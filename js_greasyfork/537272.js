// ==UserScript==
// @name         AI风月系列-顶部优化
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  解决顶部广告屏蔽后搜索栏位置错误问题
// @author       zjxdiu
// @license      Unlicense
// @match        https://aifun.wiki/*
// @match        https://aifuck.cc/*
// @match        https://aiporn.tw/*
// @match        https://aigirlfriend.baby/*
// @match        https://aigirlfriend.homes/*
// @match        https://aigirlfriendnetwork.com/*
// @match        https://aigirlfriendnow.com/*
// @match        https://aigirlfriendstudio.com/*
// @match        https://aitrader.wiki/*
// @match        https://acepro.store/*
// @grant        none
// @run-at       document-idle
// @downloadURL https://update.greasyfork.org/scripts/537272/AI%E9%A3%8E%E6%9C%88%E7%B3%BB%E5%88%97-%E9%A1%B6%E9%83%A8%E4%BC%98%E5%8C%96.user.js
// @updateURL https://update.greasyfork.org/scripts/537272/AI%E9%A3%8E%E6%9C%88%E7%B3%BB%E5%88%97-%E9%A1%B6%E9%83%A8%E4%BC%98%E5%8C%96.meta.js
// ==/UserScript==

// 注释：此脚本内容由AI生成。自行承担使用风险。请配合uBlock Origin的元素屏蔽器使用。
// Note: This script is generated by AI. Use at your own risk. Use with uBlock Origin's element filter.

(function () {
    'use strict';

    // 工具函数：从 classList 中移除多个类
    function removeClasses(el, classes) {
        classes.forEach(cls => el.classList.remove(cls));
    }

    // 处理 app-search 容器
    const appSearch = document.querySelector('#app-search');
    if (appSearch) {
        removeClasses(appSearch, ['sticky']);
    }

    // 处理包含 "flex md:block overflow-auto ..." 的容器
    const targetDivs = document.querySelectorAll('div.flex.overflow-auto.flex-col.relative.h-full.border-gray-200');
    targetDivs.forEach(div => {
        // 移除 md:block（如果有的话）
        div.classList.remove('md:block');
    });

    // 为了应对延迟加载，设置 MutationObserver（可选）
    const observer = new MutationObserver(() => {
        const updatedAppSearch = document.querySelector('#app-search');
        if (updatedAppSearch) {
            removeClasses(updatedAppSearch, ['sticky']);
        }

        const updatedTargetDivs = document.querySelectorAll('div.flex.overflow-auto.flex-col.relative.h-full.border-gray-200');
        updatedTargetDivs.forEach(div => {
            div.classList.remove('md:block');
        });
    });

    observer.observe(document.body, { childList: true, subtree: true });
})();
