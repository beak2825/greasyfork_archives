  // ==UserScript==
  // @name The West - TW-DB.info Cloth Calc [gr] - BB
  // @namespace    https://github.com/TWGR-BelleBernice/TW-UserScripts
  // @version 0.27.0
  // @description The West Script: Cloth Calculation for game version 1.34 or higher
  // @author [tw-db.info] Team, Belle Bernice
  // @homepageURL  https://TWGR-BelleBernice.github.io/TW-UserScripts
  // @supportURL   https://github.com/TWGR-BelleBernice/TW-UserScripts/issues
  // @source       https://github.com/TWGR-BelleBernice/TW-UserScripts
  // @icon         data:image/png;base64,UklGRlIDAABXRUJQVlA4TEUDAAAvGAAGAAfkKpIkxRpevsfvfZGH51/VHqMNt5EkKdLwwjGod5a8/5a8zPy/4Da2bVW58nj6JSLixxDRBv0HFOLw7d4z/8EmbVRRFEi2uEVgYKg8BdTBXmYT7LBWOADUj+wipwRKQZDAB7BWB0QzL4I4IziqAewsCkAzRUEGM4qJ4CRs/0ehwFa/uryjlhXpJIhmSCyyQA49jMAQvvpkambevvx9Ac8r/iauN4ffiTqqPacg2KhXwRkaCLYmmtFetOmhP7lVZsOJTEjWM+z0FimQ2uwvMmsnqZKBBIb0T8COtiD6o8BnxKka37Ml/rz8TNeJpdHycXkVmkbaOYYDzz3xTFKEARxVGoVwgL9Ig5JATCKjan2R5b87zwMmgWGnWARXATnV5LSf/LY36yZWzdwsqHO7Lu75LKha72L8L97jxelw95cbg0Rt25YoAoYeu7vF7u7ubpAl/FdGpmxlbE9+rz2F743of/YMTVQX17S+d7R0dVS2UWt7Z60mSK9ace+hyP3/ieMP+gyN4wUCCASIAMATx3M1C6OcAImeSZdIIDyTRhLpSoz7PecEWSIN0KV/nkmOK0I38aqG17y4TIjrki6J0rvzHteljX5RL1QL8qj6yLn6C/usIfozNVaQp81vilFhVVGnl7xhrk0UpJyLy8Zcsbq0IxQUFU4nmQsfgE1mIj0WUVvR5oyUq5u6vXJcBgQg2FY6GG6uL1jZknOdydB2GRDAtU+/LbrzOnP585u8fvnILJcF5Dun3zhxrWRw1t42v8vHE4+e5fqJZNY+ATFYqdDsrd3v59Tw8dpyk/cZZpku82FmUmbEbxqcyh4fbI+5NjECXMdPhic637TPiWePlPEsmyjwbXJYQDSS43cQi9pv7oDwyvVAPksggBm1ybOGWvU2HCazj3dANplIJ9LX5ofRwm9s8oouVzvJuwxRmADgH3cOrBly555Y3dLZ1DlhekGYJuacTozvbhvUtTYpV380FTTU1pSUfr5/vaAkUsur9Fe174UjgZdI1ohIJQAgwosiFO2pvKypiq5WlhQTiFBZCpTFtIblOYmTBUWUhZgkxAgiFAGcumOsrfa3dXVWvGpRXeNA/+DGD2hvvW9x4QcA
  // @include http://*.the-west.*/game.php*
  // @include https://*.the-west.*/game.php*
  // @include http://*.tw.innogames.*/game.php*
  // @include https://*.tw.innogames.*/game.php*
  // @grant none
// @downloadURL https://update.greasyfork.org/scripts/547843/The%20West%20-%20TW-DBinfo%20Cloth%20Calc%20%5Bgr%5D%20-%20BB.user.js
// @updateURL https://update.greasyfork.org/scripts/547843/The%20West%20-%20TW-DBinfo%20Cloth%20Calc%20%5Bgr%5D%20-%20BB.meta.js
  // ==/UserScript==

  (function (f) {
    var d = document,
      s = d.createElement("script");
    s.setAttribute("type", "application/javascript");
    s.textContent = `(${f.toString()})()`;
    (d.body || d.head || d.documentElement).appendChild(s);
    s.parentNode.removeChild(s);
  })(function () {
    if (isDefined(window.TWDB)) {
      new west.gui.Dialog(
        TWDB.script.name,
        `<div class="txcenter"><b><br>${TWDB.lang.duplicate_installation}</br></b></div>`,
        west.gui.Dialog.SYS_WARNING
      )
        .addButton(TWDB.lang.ok)
        .show();
    } else {
      TWDB = {};
      TWDB.script = new Object({
        version: "27.0",
        name: "The West - TW-DB.info Cloth Calc [gr] - BB",
        name_max: "The%20West%20-%20TW-DBinfo%20Cloth%20Calc%20%5Bgr%5D%20-%20BB",
        name_min: "clothcalc",
        folder_url: "TWGR-BelleBernice.github.io/TW-UserScripts/TW-ClothCalc-gr-BB/",
        update_suffix: ".user.js",
        update_link: "update.greasyfork.org/scripts/547843/",
        check: "version.js",
        url: "tw-db.info",
        protocol: location.protocol.match(/^(.+):$/)[1],
        game_version: 2.255,
        lang: "gr",
        langs: {
          base_url: "TWGR-BelleBernice.github.io/TW-UserScripts/TW-ClothCalc-gr-BB/langs/",
          en_US: "en_US.json",
          el_GR: "el_GR.json",
        },
        notes: {
          base_url: "TWGR-BelleBernice.github.io/TW-UserScripts/TW-ClothCalc-gr-BB/changelog/",
          filename: "notes.json",
        },
        preferences: {
          lang: null,
        },
      });
      TWDB.lang = {};
      // Load notes file
      var notesFilename = TWDB.script.notes.filename;
      var notesUrl = `${TWDB.script.notes.base_url + notesFilename}?${TWDB.script.version * 100}`;
      if (TWDB.script.protocol === "https") {
        notesUrl = `https://${notesUrl}`;
      } else {
        notesUrl = `http://${notesUrl}`;
      }

      $.getJSON(notesUrl, function(notes) {
        TWDB.script.notes = notes;
      }).fail(function() {
        // Fallback: try to load from local file structure
        var localNotesUrl = `${TWDB.script.folder_url}changelog/${notesFilename}`;
        if (TWDB.script.protocol === "https") {
          localNotesUrl = `https://${localNotesUrl}`;
        } else {
          localNotesUrl = `http://${localNotesUrl}`;
        }
        $.getJSON(`${localNotesUrl}?${TWDB.script.version * 100}`, function(notes) {
          TWDB.script.notes = notes;
        }).fail(function() {
          // Final fallback: use empty array
          TWDB.script.notes = [];
        });
      });

      TheWestApi.version = Game.version = parseInt(Game.version, 10)
        ? Game.version
        : TWDB.script.game_version;
      TWDB.script.game_version = Game.version;
      TWDB.script.isDev = function () {
        return this.check.search("dev_version") !== -1;
      };
      // Number.prototype.round = function (e) {
      //   // biome-ignore lint/style/useExponentiationOperator: tested
      //   var t = Math.pow(10, e);
      //   return Math.round(this * t) / t;
      // };
      function round (num, decimals = 0) {
        const factor = 10 ** decimals;
        return Math.round((num + Number.EPSILON) * factor) / factor;
      }
      const twiceHTMLUnescape = str => {
        const el = document.createElement("textarea");
        el.innerHTML = str; //once
        el.innerHTML = el.value; //twice
        return el.value;
      };
      window.debLog = TWDB.script.isDev() && console?.info
        ? (...args) => console.info("CC:", ...args)
        : () => {};
      TWDB.images = {
        iconName:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqBJREFUeNqslEtvElEUxy90gOHRDhQpDBIEaysKNQZpYpqiLroxaUjUrV/Bpd/BD6IrdySGmK5cVzf1sSgNgrzDAB0QBpgZxnPonYZSSLvwJj/unXMP/3vOfRyDpmnkfzUGf1Kp1Lw5A7BEwTYGVNpfaul0+kxsQbMAHOCmi/aBFtAF5IWRLbC7gLtPGOalPBpZG7J8cmKxHIDtN3AKaNcVw6gCYZNp/4XV+kaRJNKs16V3wSBG9pdyKTrjgr1aBsK7LPtqPBwStdsl1mbTGiuX98HuB6zzIpgnZgJuAHfWNc2ndjpEabcn3KtUtnERupfG64jZAH7XbN5bHg5ZVRTJT0Kq416PhATBsyJJUZj3AOarxPB7BQhuGo2Rcb9PTiVpcMDzuOnErCjMVqmUpKnarxLD1TxOgyF2X1F4TPHQbC4KNtug4HY30CFSrW5AFwKcswc4K4ar3YwbjU8xLQVSPOK4iUjW5xOw94miixfFBAy9s6kyc+5WOCHLG0qrRfqtlhLv93mcZGX53PdBsZisclwGhjlA0u8cM3O3vAFNiztrNccwlyOGdpvZPju9Cw1S9X+OxdZh+IO+itG0mH63go+bzWeD4+PJ3apxXPvChiqKabXXczgGAzaRz+99DYUOwVyeFdNTDNzK5dZQCDf8/c4OPp/vgAisAY/eZjLP8VTDjUYExHALHHRe08WwMrDJQuEhW6+zaMh7PFnoPgFH9Pngg69mvd5otFy+vVmr8RClq2W3W+hBqtNpDj2CsCQ4HGX40H75/R/A9g11cQ7A0xyD2EevKL4GH3WrWFz5Eoko9P/EgMUR6hk+oVVMkz4lrFsVSofWMIberQBNGX1qug/Us/PIVFpWMII/9Kgl+j2e8hGpraRnAwx0n38CDAD3lwpCS51YdAAAAABJRU5ErkJggg==",
        iconExperience:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAz9JREFUeNqsVNlPE0Ecntltt3u00FqK2KIQQCKERAQxKqCJB8YjMdEXH1Bjor6YoNEYH/wDJP4HJvpkYkxMCB7REOIRPDAicgkVa1sKEtqypff22u06g9Nkg6I+OMmXmZ3j+32/a6GqquB/DfiXfUqzxlbzmvUvQ/cHMhpBT2Y8FASZ4Ldk1CpEeN+AICAUjzy6cn/iyYUXaM0SAfBfyQBRwyGYL3edbeMpsSUbm9t07+7tM9VVFcxqZLrfqILEPR7BEgp4LTxtsohL0/RSdr7U7fHpiQitq6o2wBQh1hNXjNg9BKvXOytAOUwp0ncgBn3lgsCbyTlWzhAvlnloTaDZqxdPrp+ccjFbN9dsSKeltWYTV9F97dgph8HlUJLfYUK2Whw1LQEIQbSlqU64fulE9dGDbUzv0zcxnGlIFGE1wp2bnR121tdiNfNNlmJzA6QZvUFdZNW4k1LisyANLUqGqQrTFOXPpqJyOBoxS2XnHwTStlvnznfN6IgyPAvxDGeji8ytptzHLVwsA1XaCPJyFuRzyDBFIb+idD4+WuILyCWukDGt2I442SgvSlIIZx5CTQmUINgPHti78/j+2tP1hsdV63hRB/KoTtUcwJ0STQIw6gFgLGDPxbltz98PT9+YnHS60DvsZqYQPJqQmr65vfTgyIzY0NpZazfFjBwMA0XOAQVxRhIAfAmaQJDZtzAwON7tdE4jahDHRLiYKdIiuKrTCMg2SC0uivGXAyPjRpNZTUpZMBsEIJz4mfciTgZqPjPn8czMkfuZQlcUyLKYhBzGjAIvHd5dWaYkpuHQVxkMeO3qRNC2rM7KpcAaQ0TP8xy+KxEyBWiKD3/kiDppe3MN214jNnx2LoDRcGNiItLkGhLbfe7kRglnysr4K/fu2WUhbwq9qupWVDE+SDXWOdhXrz+8D4JDtm9LYKyvv38C+Sj7O3Y7jjSXH2czn6311W2NPQAMr9ZOeWIp6ZuPON8Nmzwy9DOfRsZEWVaW26z3Ud9UKLT97UZHLbo4617594CaudCPxuIioYjneXbBv5gjRqCmbXJrS22p1h1blZ6HzxZIvNWVZIXiNZC5kBx1BZmqiW+WxHuZ7IcAAwAW9VeYOecN4AAAAABJRU5ErkJggg==",
        iconDollar:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwZJREFUeNqsk91P01AYxk+3buyj6+gGZXOTrwCSiRB0gkYiGXilYDSAqHjh56XXmhAT77nUS+/8AwhqTIQQE8CIfGNAkskE5thGYWPr1lk6unpqTkkz4M6T/HJOz2mfvu/7nBeTJAn8r6EB/3Fgxzxr0Fr5WQ4ioRmg9cFQssPzhDRoT4/QojMRIiBExKH64HlCsoAJQnTc7D11rulCcwZ3dWd4PkdpY2+jkfD4m1cDyypR6ai0MCRkhthaWttO17Y+HIiksOqNaBpsxdKgxKYHbgpnLpWxj148fzYK39tT0s5PU06nAGKB0Fr6bMfgxEZ5NS2BzTD8RkiCXUEHlqZztL9U6CMI83g6zWVVNTxUaFmMdLrLSn8mSJ8JY3UV0swsZRT5YkICd8/nQOWJFMCz8Wqv12s9wryDyJR6GWs89TWTnOTOpgGImq2UjSrUJpNaMD05/BqPbE12XL1CbEYKTapApPx7plGcDK4u7XR79WmDRgCfwxWVfgbThaAYV+zrLCAd5Ip/PfDu/afEUZFhCCPEDnFBqnq6rrfZikoaAoxo/7btLuM4DuA6A9AYrMDjEMNdDXtP+/tfjsB3M7KrigHqDpB3xJ7e2+U8ZsUX5ueXSi1ssMppEFykAO43ZQBN5MDcIkMvBFKPnzy4U4KMw45rJ2nZH0xsW3x9VOO9Gziul2zG7I7OVAgiv76P1jrxFBB5PBTeavZ4atpUl/pQB/yLlbJaDD/Wfmd241nyVnvLZc0fPchpdwBrbPTMrCSNesCAKgfJr60FI/l1w9UpQrJfx0ZWO7uKhhb3yWuDE1krhpswgYuDkJhyOghBavcVCzQBJoY+DK8cZ4B8LQiVCa4mb2O93eGqm2OKmrk0a+25SO1RZm0gFot/HPsyNRiJMus8z8uuChJyQBGTczegDpAF5eLaDYYCm6fuTAVlp08CgV2fnl2cYtlUCJ4xkITKTSm/N3HUBXKEJIJAUefQh0lECsLLZZHPlKuB5aUsR6hDokY040hMQAI8Wu+jWiuBgb8CDAAXATNfWNNYlgAAAABJRU5ErkJggg==",
        iconLuck:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA39JREFUeNqsVEtvG1UUPvO2x+OxnTp+xY7T2iRUlEcKqFCVV1cVEiD1HxQWSLACJCSoxAL27Nixh58AGxYQlJaXILIT0zhOnNiJY8f2vD32vLhj3UHTUnXFSJ/uvZp7vvude893CM/z4P/6iIesyRCo0D8XwcGjD+9RZAQOZhA4hAieUzhwhjBFMPHceZCQfoDcD4wKQiz5yecfvOWsMLeHxkgo8ZnpzrBFuDOLfnXhuU+/uP3l183WwQQT3hdMhFT5ahI0Q2effW39zSOif2V3sE/vjg+41qDN1RrbTJZOly8VV7/buPOLhNO9T1lwT35qMUSUtGb2ufqv26PpOmht5TBOovPlgQLE0IPR0SguHUminwFO8987pLCiOdG7H9164fK1p68uV4sXO80OJZA8p4pGUZIVxObBWuQ8PJZdcQaG9LvlWvKNN67zU9WcjUbSnIzEl8wjpP6o1fhplfxMfnz63oXXqzflfUkpTwtj/9yVWB5Wl6ugZx1Cyc5eghuRTbvgfv/xh++/EmRI40kMIZ09n7nalY+jh0oX9l07VngmHWU5OrpKlEGgYqBmTDA5LalljHcGWwPo0SmRWCLeFuPChqJqFh1WtryYv7BHnqA3csFQdGhYSrpMLkE5XgCdmsCutgcz2YGJoUOc4kEgYkT/9Ey3bIcJlJFYHXdGSNnjcQ/GPRkIA6AiLMECswB9QoKcmwJ34sC21gLbtkFVVejTQ+9sNNqaTCbz1yRDL2IPm/2meaJ63JByn2Ar3pO5iyDmU6DSBrT1Y6iwJXiRfwp4mXM5jXFFMq799POdzaBEaFx4flUrSlP5czEimizDVMq5pWqkFM8MiB4Jkgcd8xQ4k4G/v218lStk7UuVy7lERDz8Zmvz2BfiE1JY3dxWiqSY3U5P3mu2z1DRuLDGlA9GR4ykyOCYLpyeDLwSm7/712/1Hxv15g/bO/c2LMuWUejcDb4yC0H3CTXdALx2FFlJ1Xd3JqfDfjRJiWBODL/WPJ6PGa7rttGeISJS0WgEtgqnGe4EZK/TZ192rrXWxHKC0qA7sMfDc8WF1TQpmndZtj+bzWRsfDswPRHqHIGlEgiLCPliqVC2pxaXTCZoZDO5Vm/Urjy/rtd37nU1TdcxEQQiHtaCfM8JCEkE34MsPtlPxze3gufTR7WgoESCTRYOpEJrM5Taf75/BBgAw3Si4MpJ570AAAAASUVORK5CYII=",
        iconDanger:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuNJREFUeNqsVE1rE1EUvfMy08xUbc0kU6U2H6WYSWwpRQgU6cZFV9KV4E/wBwiCP8Cf4dJuRARXVZCqYDbagk1tYwshhKZpmkzitJOkaZKZ8b72ThkL7vrgwPu65553z3tPWFpagqtqDK6wib6+QOQBAh+7CIfgJReo783btO+CTKC+jLhGEGnzKaJPRJIvpovoIE4QPU7qLQSIIIy4jbiFUChrmwIYzck0byKqiDrimCcVSVUQEUIkRiTp/tN0+smUZU2Wt7YarxnLlmSZBwUWJybSDxQlJRWLsFKvf86GQqs4/xsx4BBJ1TBiTGLs3suFhecJ29Zgbw/uVKth3bJiz+bmfjxOJiceRaOTgETQbIKezU51Z2dH1mOxZYy1uHrRJ19b1LSHiU5Hg40NgLU1AMOAm5Ikv7Dt6buuG4L1dYBcDniiouuyYLG4CLHYF4wtIwyPjB/zhu44OhQKAJubAKUSlh/rL8uQzOdV2N8/I4fDQ3D6fWhyBstSBccJu4xxMaLfTUFqNETooEGmeU7E2ymaWcbEAm4ZYGls+8wNpObqBNFGExkTvHvjkvXtg3p9H3Z30Zvji4sFLi73emekLhLxu7CN4Gc7UZS2K0kGXRObkc18j/F2dPRj3jBaJVTXoAwucfJN/GjfEbzi24LgBFOpD9it0NXoB3Rd944JA8YgF4mYjmnq3W5X8Zzh7RDxlYgKktSTZ2ZWpWj0PQ53EDUuiJO5vufRaweDVj4eL6HUMcU0VRFdO8KFT0RkqWpDmZ9/J0YiKzjcovJZfmXeG+vTkdu1SKRSCYdttVaL5rDIb/iRx8crw5nMsjA09I2I+JU4oifneGQeYZ+KyZ9Qu6UoRjUUqh8fHEzXNG1HyWReoas/cS1Pii6ILv8anqsOPQ/eb1VUtZxMJJrX4/Ff9rkS7z22Lnn0Dxn4jOPq/lDWxm46XaD5EyLpUEL3f/+Zv3lfz4ACAz7Ftv8P87e/AgwA2Gk+sVBbJGIAAAAASUVORK5CYII=",
        iconLaborpoints:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeVJREFUeNqclM1OwkAUhVtaKMViA2K7cOfOV/JF2LLyFVjwEkRehK0rUxISBUUrP/2xP95LzjRjaSNxki80LXPmzLl3RlVOhwoahCa9T4mMyMGvkee5oteINYkWYUCQRSKQQPiswQt0iRvizvf92W63mwVBMJtMJrdYSD3XGTsxiT7hRlGk6LquaJqmLBaLCyyW1LmoEjPgbhCGodJsNo+Cq9WqVcrxRKwhhc1YxCXRI65YLE1TIWbhey5lVxRFl8I24YiFHBZiQSHG7ubzuYVv/P+QCIiY+GYxFdthgf50On3gSX/BLsWv4zj3LEoFSHTJjUsVU5IkqYTdiWcWElvHfHZ3FNOw1TZvqU5IbFU8S2KaXIAMYcaj0egxy7Ie/dEm21167o7H44FwNRwOn9Y0DMP4sCzr3XXdF8wvxLirt8Ta87xIVJG45rDJbSG2XC496rUlvd8QPvGG+aks9gV3n2CPFVtyjrZts5NnCHElD5ifKVI3HxCihpKr6Kc+nwCRkWma7GgNsQSIPjuKpVJu4qCb2PqOi8JBs1in0wnwfi/dHHn5OOWlq+Ybbv04jgtnJLzH98prSK04Ytw3NvcdaCOCFfGKTMOyWN2tkSLcDRy2EMEWbpO6g17lrPGfy5Gd/QgwADbFOC1FlFuVAAAAAElFTkSuQmCC",
        iconCount:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAv1JREFUeNqElMtPE1EUxs9MH0zfL2iAlkCLQkkBRR4hBk1oYkiMduUCNi5cuPZvcGPiyhjXGHGlMTFBXBAlEQUkkUBTWmyaYm1REAq0A9On045nmlszYIs3+WUyc+795rvnnHspQRBAHF6vFySDRuQEJSKDk6OI/CbwSAnI5GpDXKxGNIgWYRCKxMSFeeQYSRNqilHEjQGxeocsw+pCvGExqohvscrMxIipQ8UFuEmf7R2ZnyfuTohRxJEoVI84kLbb11ofKgMvmZXvQ1P97WblxGXteGBu/RDAFiLbFB3mKrmRbk2FWEQRxH2uWTuqLOwxvliBj6R09haL7AKkQjCzoWExbkP05Of0WWKiq662ZlNfOR11hqQ4oa1JrwU+Bxxdn8FXM5kvr+jIq4jVT98feQqAVc7jbnYW4KKVbZi+k/CADusR84Od5tw5OjMWLvWvkHVUrZypYO0BGsJ08GmYWQfYTgF4XMugUS7Ds88AsxtYZhOUaGs5Z6WKgFRMIAHB+/rKI3z2To2+8azGAXww9jEeOdSNt37p8+1qOF2n5wPG50kli9LmhCru5O4Wldboug5XXUyOByXf02HXdrvd0N+uOyYCvNRVtT4TxRX3brmHNXW0DRSb0Is1u6tPOrpcbiPIEjBg/8FoVP7zaUEb+7TrXDxLrHx8PM6jgXLyIy8glgDmhtPnAD4JP8JBCG+BKcWxpjRt3QRwFv/nTPZ+Kbg2Ygn1TM6DPHzcuBNg5fywNdjyBDMVSjuiQrHwy2zQrOKBy5EtC6dzViIdnX28oJ9j6Jw8ug/wjRr8Gs007RcxGkkZknXW7lmm6dLzjLpTPE5i8xZqiYkB9qY7yxwmWTjIlzudG2w8UO9h2gUZE8V3PxJGtpEjsuafgy5+yCIJOxVmX/lV4SPBLC5a2ktm1dEdtUyhNr5FC0H89hNB35CptFO5FST3GU2uHfG2MBIYSQ8WyKFOke1xlduiVtMWJNbZU3GeNGn+dLPWEuMluaOq5LTC3wpKxx8BBgAeuiDOQ7ICHgAAAABJRU5ErkJggg==",
        iconKilled:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAx9JREFUeNpslE1v20YQhmeXXxIlUYodObArNDXSHoIgSJt7Pg4OmpOBBOhP6M/rsafeCvTcOBc7iBPHlmQ7shSJkknxY7nsu8IoUBUTeEACu/vOvDOzFGVZ0v7+PvEjgAVc4DE2KEEOEpACBQpae+yVbyPkAB80wSZogSrQYAa+MFOQseg3YkuhOmiDu67r3tvd3X2wvb39gxBCHh0eHgyurt4WRfER6z0w5iB6XUyCCrgNfoLAk70Xe791Ot930jS2puGUajX/Wb/X/+fNwcEfKI1k62O2rVfFzLsBdhqN+uPXr1/97lUqt05PP9JoNCLHtmg8GftRFD2/s3XHu/x8qdiiYiFjuVwVC8B3v758+cr17FunZyd0dHREURRTM/CpWvFpOLpyRsPJz41G7SSezyOt9TVnZpqhlmLLem1tbGw87Pa69OnkA2XpHMWUlKaKhJxTI6jjOwmCVrDn16rzwWB4gTMT7rKSLGbxGNTDcFoOh0OK4xlJKVEYSddRZGyS40ra7mzR8fH7rX/fHLzgGtf4/P9GwwjbUXydqyy3pbCpUvUJ5aJZnCwyJNS93+9R96ynSxNlZ+HG5WkguSJmuqPTNFOW5VLFDRb7HBsV0JrMcDuOC+uKlCoKjI7ijMS6mOYi5lKKXFjIqlKlqushsxLfNUIMkFKWK0QttW3bOZ8pma9iy+uSCRK5DyEhrUXnVZGRDa/Skovs8jRHGkJblhVxJ/N1sYJnZWbELAgJKSjJMjTBeNAQtEljV5amRhSlsML1e2qviM3BKJyEkziad5I0hkVBzUawyKzQkpIkhdWMcL0Uajbkkfia2aqYGcDL4w/Hf+V5XptOZzvI0Gvf3qTNjRY5lkNJmUF0cU5jbEZ4xyymbxK7GAwGf8JCVyn1NC3SR59Or9v98/O679cIQWgynlBRqATZfeYz2U2ZGf8mmsafIcLmM9j7G93/BSL3Ly7P7w4GV+0wnFCr1Tr0PO8d9oY3ZVZyBM2LJqKpSRe8cxyn3Ww2A4B2/GjWznltKfbNz3E5HoqzjPhHeMH3tspDmvFayG+1tPmfAAMAqEx/WbBWiOIAAAAASUVORK5CYII=",
        iconNew:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC/tJREFUeNp0WAlUFFcWvVXdTTc0NIuogLiAgsYtJm4kGk3UqMkYM3GiUXN0TDJGj6NRo7gko+JuTGLiEhN3x2VwGz1x1MQxQeNKiGCjAm4IAooI0ghN02vVvP+7quk2mTqnqKLr1//vv3vfe/eV8GKfvmgeHY7pk8bC6XRDEABRFMEOj0fiV1EUINNVliR+L7BBfocke5+x3/XBRpjzC6MijdrquJhm3uc0QJYbT7aISGdQkA6bdh5Cwa27SE1NhTYrKwvduyShT/f2qLPWQ6MRodVqwFZ3ujzMBPpNQxNKcHs8CNJq+RhmHP8jyHC7ZXru4b+bYhJ6lRYVr/ktJ/u1d5fMqrPZHXxT7GSGqBthl5BgA1asfgCz2YyKigqIQUFBfDEPLcZ2wE6Ph071XmKLecgQ5TlN6FYmV99hV5fLBV14tFCVlbs66UxGn7KHjyf9mpMHnU7Hx7B32OmiudR1yDSItLbX+yI4HmwyWfK6j/7wh95dKDgI4Dt6Gh7vOO8bQYZgmtg45dbqL/pbfsjA8NimqVsOHG/BFlHnYie7lxS4JAVa9RDZVBxLzglZ8b2ykDpI8E7o98g7XhaUCcnlMW2SS3fsXll15izcBGXSjZvNtA5H2uETpxFqDPHuXFC4SO+oG+fz+tYRoLhNUrAUfGawe3WsAK9nBHh/Y6ckk+sJHkOTWK01t2Bb4RdrwrTBIRAMelhy8/F2SNB7h06eHVhR+RgaMoaNVwNEUHjjf4jqjepCQXG9vw/UKGCTyWj0osxIGxJGTBdXXJ01p6+rzgrotDyyJOKKmHFe81p88/VfbT8YrqfI8QIqQKsROVSM8P7uFhvvGZn8/mUekPwGiizKtD6icPppdAiNbjXqxpLlqTXmqxBDCA56R2TQkVG1VdXompP7THSQbuPOf/8IU5gxcLMyfBz1GiP4k1H2EpLBo5ilhiPPNbLkcyMbERLT6tniLdu3lO1JhyY0lBtRTc/qTCYIzKBQIx5mX8Wrt26NleobtqUfzwhmaYNTQQ6wIxAm1VxfYvJ5RCB3ChxGrcY7ETkZwdHNYh+f+uVQwbKVJjEkGAKNk5wu2N9+A1Gj34RktUGgvMSelf98Ds+fPvt+eFVNxr6T57uXlj/iCc8boX7GyAp2Ag9B+IGkklkI5BB5RxceabLmFR/OnZHaTqK8IRB8DJ46um97PR9RKd1Rn9gKMiU8vghF06Mr12DauiulS+Hd8zlXbiw5ffm6yU7Gq9ne5xlRsVA9/agb6ElmiCki2FHy+IB58kcpbksN5Rc9NA4nbDRp2fhRyHVLKN99CM3nT4ccF0vkdnKva4KDYautQ83OdEPbo8cWGG4XZf18wTyu+olVCDDGW1vkgFCGIASkb58h5bUHciZ9NKS+pARagsBCu8t7rgtE4sKA5ASMSN+I+1GRqKeFwwf15d4ReZQSsSnCZCK55VoBsPbb9oknTu565/WBmSHG4I4eBqkvrP2znBJJ3BBOfw90EVEme0nVkZzxE4dZ7xYhyGgE7HbYB7yMQWuWoG7YYFz+8juguAwjp05El5d6o8WYt1AbHweJFlIjUKb7UKKFnbz2ZW6Ba+naLQ8abHZekjQ6qk0xzZpg3DvDeGYU0Fi1eXalSQzRzeOs+fe+z54w6RVbcTH0pjBYyRCLqEECXQ1lD9B1ynuoahmH/MxsSJWVEC5mo+Xg/vB06gTb6fNMAkCgBGkk/uQnJmD5I0veuZLy2TpRXNxgdzwcOnQotP6JjS0uKt6QPG5otEEIaR7/XNWps/tyZ8xJdlZXI5iwryFoyocMRnSXDniycy/qdu/Ho6t5eGHxfGDIK5Cp9p15byYsldWIpIyMmhpoqXZ5SFIciGzi2pR5dXeXdq1XXPjP1sLln2/G9z+ceSq0fdFDhrjJkOAwhMUljb6/Y3+GeeKUZHftE+gJmidkSPHgAejVNgEdb99Bsxd6UxYOhvNuMbJHf4Cyucugr65FyjdfwnLZjMJN20DJBXVJiVgqaR58dyFn2sz3R07+5ejWwp49usJO5FcPLfxCmMNCXjLGttHBISwzT5895/7edIikO0hrQCJIPB2S8caH76LmTiFOfLMZho4d0Ilgc9RayZNalP9wCvW2BkTGtwTu36cMHYWCpLZYfrv0V4Ijdf/mFedGDBsEG41x1Nt+n/Q4RyU3gvQGmFo907HhZsnPmSNGzrm391/QUhbV0SK1lEMamkUj6l4JKmenIS6xNVJ2rUffMSMhmyJQOqg/ZOJeUFgobJevoCx9P4zhJmQkt8P0y3n745pHjzp3dOu5P78+AI+ra7j+eVqS8KTnoFxgiIqBsWnC1HubdlwkQ16yXL0ObXg4tLLMhZT1r6M5H2yWJ7AW3Ebe/JVI6dwBTqMWDym6WuiDEEnweRrs3N2hFEVH4uI8y8/lrHl7cL+J/z30bUlC6xZcTQZSw88Yg0Gv7dk75QX3nYqffhszbv21BYvCOWfII7zWEEcK9Xq0KbqHzn8ahOqhA9FAiU7Ov4lLw8chqX0iolYvREP7jhBLyqkmURogD+1s0tSx4dzlRbMnjZ2357sVdSxCbWSoSgv/zOszJqFNq+iE5lEbz3w6b2D9+QvQEVSSluoGhS2TifXvjEDn7V+htE1LXNyyF8l/GwPt2BEkH92wF5Xg2tRP0KPbc+hAxlp+yoChVTy2RzZp+OeF7PlL5k5e8VnadJfd4SDp6g6AxSPJT0kVQGO3O63HTp0+ni1qPRFdO3Zua9AbBIJCUopBC8K2U9+eSJkwCrr4eOiowLXu1wt5+behvVcKkRapOHYSTy5dQmiLWOyJbmbfdT77k1WLpn89Z9oE1FLBZBleoo0xgcUMYoHC9IyBoN13+EfcKSoFyzOikxbr06tb2aqF0+ccs9T1/4fdc+hR7+4IJfIJxKW66wXImjwXxZlXEErG6c0FaBlmwisbVgDTJvPMKVOSM1EOIY64d5zPXrJywbS1c2d+4OWHKgsFf3EgeA2DEKhnZKWnGTa4H35KX5c7/M1XRy6+UTzm+8TEYmNyIpcNblJwxbMXw1lVCXNhIY6O+hC6i2Z0cLhJKlhhJH5ltGqFdWey1qb+ffzn82ZNlOsp1NWFmbzwCX14xbkkyb+PJtUwK+2C3c6eMg5HtqzcZ7bZ+39jNB0P6dkNVN7QUFiE4rlL0WnAS4gYPRLmGfNQtHUbDBT2+RS+yzNz08e+NSSNOOJmhkgKIRgkslr4BPjE2x8SWC2OTM+wELZYapHYJh6HN68qiW3b+i+7TBGHTBTCAhU3J3GpcsN26I6egExV2kBRVkOZdVlB0aUenZJSN3+90Npgd/LeCIGK0gcL106Bzc4fyE5FLjCXOihFs+7x67SZDmNM0w8uJbW7ZmoSBYGysD3HjCfXqTmjaJPjYvBFje0+jf94z7fL7+tI97J3GQ5q06fKV05apQNhB5uftywBGlj1IFN6ijDljCfjbJT+F06bUHvdLU229unlElxuUv86LkUNVH0PmyJcl/JuL9y5YXEm8ybLI4KiuEW16ZPh68vYe0y3qJ5SZW6gMbxQy0pP5GW/RvDuhin68W8NuXhSp18f/mxHqk8OBNOObya0xqZM845PZry/642hL6O2rt77/lPwcMEmeY3jHQhr5vwMeaqjVHbCc0Bjjva+IMBa34B+vbqhaXzcssIOSSVGgsIZH4t1RQ+uPd8pedmnsya6a0nVqS2wr0NVvONROk4Z/kJfaXGV6HrKM4KiZ1TpqQzkTRt4mR87fJDlioRF4a/2x0GIjpslD5ZsXD2/lLUeqijjHaOfY9iGJCXT8tZWUGHxNnIaMZDMWrU7MFK1lSmbuogXPJH5tbhu+i0xuQ1efrHHnoMXsj7eX3Dmxmf/mHqkd//ekAmeCJIQXqi9XFM9zaKTkZp9iWCphvNSUvIMjWEaWqN8heDGuFxOFNy4gwVL13KtqhjOB6vtCjNQr9fR1eNet/PgBHuD01lRUelZMH+Vb5xiTSMUsncOxju2oOD7WOCFj5UInU6D3Gs3+HAuKdLS0kgVkixQhM4ffPXw8YBFg5F2w3bNxqtftv7f4Z1LaGSG3Cj+1TaXzce8N3z4cPxPgAEA6JcjmcJQzpoAAAAASUVORK5CYII=",
        iconChat:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAPCAYAAAC4EqxxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA41JREFUeNrkl39oTWEYx7/n3t1rY8yw0a6xe8eda1lMkqaw/OF3mZQUkT/Ijz9WU6SU7A9lbMUf8o+lKBSh/NhClmnNlmVk0YhZ2MXYZjP33h3f9+6913GcO+eMojz16bzvOe/znPO87/M+73MUVVUxWJnpdg1auf55q4K/IHGRxt5CBfNHAa+q4MjuwYjWOmSO70ViCBnNCcjyn0GguxEBCA8vqlWx7J0nV0g1aSaZJI8sIQX4ByRO21FUpA5NwFaPig0zRmCizW9HD5xfnsFxKxmOYgUfa0Lo6zOw85aUkFKuXEhzv0nASCjntZAUkbExvsVOFhEXmUYaiZ9Ukq5f+GFaN+pwIIDRLheOLRiFlajhjaf9dhKQFJ8N32IvfHM6ULXxAVov8oE+lEvoaMkA4SsmoYSOi+5BgyHbyR4yzuDZJ3Kc7Cah39W1RZ5keFHoXU5n3eykk0Rx1yHtpLOVO3IzdpR5MdtrEMalJiOqVI7XyiFyJMYHC0kiOw30BqcrkpagqQv+z6LZRq6RZQTjyH7yUA2gUw3y1mGU74ro5GakqWRTpG8GMV7oyb5blSKjxhCN5GtsuVVrEtaNhvSTYRjdwmtKCpA2D4hvQZtakfPB/nXtlPfwhDdpNxmDhbm6Way2mDeqdSsQnXgTkmika1ISf9jD3LahIPsBtj/HA+2r0joDFdvaUs95smhZiZeDQ0gaojPUbPHF2vENYouLEy6cNJWfTyrNRLyUSchQ9xcS1Y06XMf9/IHXN+Q1UhFK3pSBrUvTmWeVMY392zqNfEXLO8CnNZYps7FZydT1l5ETIssOsMrCsTWkJ5buQEe+Vjfq8L3HqO/2OWf1ht0SR+c8u+K229UVAD1EO9flVbdY4VOXgWKtwTyLDufp+mKOF5PpZB2ZQETqbJUrc4bciWHLsm7U4fYyxz4cnXweDp9TQU54t0IE7yQyi44m8GB7fPWso/P+Dd1Ll4hzVnf+xqrM7LII0UuWzLhTyQWy2sIEWtK1fd9Z6nUcCG5ROlz+/kkaDjhlHHtEt/YsbA07bYjr1NkokEWFGSmMUXGJfZgvjxfGVPjNpitcK7rfK604JYjmnpNq+dO7ylzPekwOTkFfwIn2F+/QVH0JHcFKKA5WLYYlcJEsKkqNVlqubKTSMpLTpFZWSbfDqcK8WNJV/vDPg+laWvPzIMLpkUxANy1+gmVd5X/7W/omwACxMr4C5yIs3wAAAABJRU5ErkJggg==",
        iconClock:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+1JREFUeNpclFlvG1UUx/+zeWa8xGOPndiJE9dxGxcUtWoKJA2q8sDSp4DYHgAhBHwUPggfgCdeKlQWARISBVpSitIqOHGSxvFuT7zMvnDH3EhRLf00M9Y9//s/5557mO3tbTz3YwgyIUXIE+YJMYJN6BDqhC5hQnAvBvLPiXCECEElFAkvfP7pR1/KIjtzWv3Tvf+4/tVpZ/QtXdci6FQwuCgWCgkXHIVCq4SbHBNkWs0WV3vWxWSib1ARlsaEDscEh+Dz9E+eppIlXOJ5/vpiYeHNzfW1im2MrH7zUOr1B57MuyU+Kb+tja2o5wVhBlVCkzAiWDy1HKVCKyklufH+u299XJjPLTKBx83EJaSTCSxfrrDpVCL78MHD7OHxSXEw8XO9M+N76jKso89VKhWJvGQI5WhU3vjskw+/uFxaWJREjjVNA8WFHPr9DmLxGF5ZW0ViRkFU4uPHRwcVlouYluP1aaoGS9ObE0Xx2tbtzfcKC/n5CC9geSkP1tJxclRDPjuDQjaJk9o+VCWOrVfXUS4txXy9/Y4sCi+R+BwhHqaZCFtgc/3m66tXl0uOZcCcGHhWfYxcjqxhWDBE3LQtmFYAhhh5Wm8ik8mA5zjFMEevgZH+JhqNc2fZUrFwnQ08WYxwyGUUyJKM+nGVCHdBdgdDNhFggYtEsHKljDtbt5BOpzDotsq0TLHQWVizuOfayb6mMdrZGfjAnaYpSCKe7u7g0e/3UVoso3h1BYLAo9ft45+9AwwnJrThOJ7ITg9QZM87tt9t+6NBFwLHQE3NwHFcyHIUi8UyLEaElJ0j58bCs02wpJksQ8doNIFlOz6VCEJnZnga7W5HU6JCdHYuz+zuHyEtEtHZWXgshxev3YBuOzg5rUP2A2g+CzWTxmisgxciY3q1bJ6+tHXdfGIO20qz2Yr5nIQ3bt9Cr91DXFXAMwIC0iaDoQY2peLrb+6i3uygdlxHUs0dnN9VlnZv4+i0d6+t2VVdnwQbL6+hfTZEXxvAtSw0221Y5Dk2bLI9h5XlJfxbPUTACloqnfkxjA91zp21hiN9x+C5aMcZKewvPy05iDAZNYVYyiCl4jDQHTQGI/z61z389scOTNOc5AuXvouI0gN6X8c8HS0a4dBxPfIteY92ax/IIndlPMzKjUYDju3CdYlYq4O96qEvilKXCP2gpNS7JG6fpjm9mx4dJZ3pKGFYW0qofdMYbz3ZO7hhmFbG0HWJ1N0ThMhISWdrqpr5WZKjoaMDmuJ0cvB0Frk0Xf9/p4wmyokjQji7FDrjfBrUo5MiTK1Pa26fjyBcENQvCHfoVZPpiApoG02oaPi06Pppr/0nwABCMa7R/XpFcQAAAABJRU5ErkJggg==",
        iconUpb:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6BJREFUeNpcVN9v22QUPbEdx47TplnSNnaSdm1hDMZDN2CAoLww9oBE33jiCal/0SZN/BlIqHvhAU0CJgQriA5o0q5DbZw0bRonTWI7/sn9oi+Sh6WjOPp0j++553w3Fccxtre3QU+KIBIEgsSRJmQ5FH7uE4YcI4JHiMELwAlYoUrQEsgR8oQF9v7J1sc3Hcee/Prb3vf03+QkISFIkkm8sEAwCMuERULx7t333lIUVbftcW5r66MN3/Oig/phMBwOn9C5y8EI4xkZ62qesLqzs/N1GIa1ZrNZWlmp5u7c3tQLhVLasizsPt7FarUKvbz8peM4rSAIulRjccJXyJiU6+9/eOcrMSWiVNJxdtbE/v5zeu/iuHGEBw8f4YvPP4OmaWue590SBOGAz5LNLhL+J3OpfvgcPz19gmG3B9sewXXGEMmaSlXHu7ffhigJiONQIpk1PpYsNwYzMuakzAg9P8ThcR394SUWcvlpsWM7UFUFN99cB8lDLqch8H0jQSYlycCdEfxggotBG/3RFfLaPDIZGa47gSCIWNINpOi3eK0EURSKURSVuCLWSGpGFvH8uKlICsh9mDQvKAqMcgVKVsXloIe12nXcv/fp9Ls3brxejqKwzCPEyIQZWcjDZ4dh0F1cLKBlniIKQ3hhgPNuhySIoDNsbt5iEjHxvAyZoPPOMsnOQm7vqN8bDUvzRnR+1oXvezS3HDySyRwWRCL0KJ9SBJEqSb7BI8XCLs3IAk52dd7ptjY2NsJYdtBuNVFYKGJ9dQ2yLIFdvZ41wPJSmdyt0NzEWdCn3SVn5jCyWm0llFVRPG2/RP3oH6jaHMI4gmX16dMSHOp2xahgXsuxiCxGcbTEu1OSMhlZ73d6mqedztgdx/XG39OxRnTsxyFSpM267CEtp6ed1iqGQXNb5TIzUqIzJtPap2fi2X+uV98oXlp9mVKOuayGg4sGWhMPbbNDOVPQeHEM23Xjq751f6Jkd/P5vCglMjYhDAjto8OXz+699sE7Deuv0mBwBbN9gb29P/CCCFqtNtJpyRal9MCduGoUxo8L17JnLA1JMmbCmNChMB5l0rmTbFYtfvPoYernp7/ANE0/Lcvd+Xy+oWW1OjlrjsdjT1XVZ9R9mymTEjcg4t2xLXBSXNAvDvYb5rc/flfy/OBc140fyL1/qfCEztm2GNCFZwuyz4xjM08lNu3sws8R2DWp8r2mcYP6nMTiW9blQfe4qvA/AQYA7z2lEDB0G6EAAAAASUVORK5CYII=",
        iconMoti:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0VJREFUeNqUlMtvG0Ucx+e16117/U5ixzhxQo1MGypHFBOCOJJjkLj0VAmhihy5cOKf6aVHOHBqORYpAqHSoBYk0kei5qEm2LHX3oe9j9mZztCxFIkghZU+0mpW+53vfH+/38DNzU0CANAVGnjzRIJQEAsScMlHCqUFBUFekFE/jwS2wBUwAb+MGFJCDcH1rz7sfHMT42/F+zuCObUR/j/Oyhih5pcbG7c/YMnHDx498lKr7d0QQOnQF0wuOCr/L2f5rfWPbnUK+fXe74/h2Pet1KD/mVi/IpgVZJVDU6ErE/AiZ6Tre4H74CfA9/cAiyLIu90GKpXfZwD2lCtHuZHvY+VWQs+L4VarVTsZjczGycmq5TpG1OsDD2PNrczmKcRSLCVzbVTmlq7krCV7PAkp51RV+l9i+YjSLEqnF5quVw8nYwiDEIZWhgS5nEEZLzTn51e21ta2Mvd+bD/W9WcUIU85C8/nJzOzRe2PHibJ9kDXfZzJgCJjoLV/kF3p9iorpdK1rzc+/dza258/2N1diTlvi3/mBZZyTRSIqF46pYy9+M0w/moC0HmBETDDAF6fjJdri3UEn/yBD+/dB39HEeGusw5K5X2VI1AZyuNG8phTh/oAIUDH7o1BLqs9zVpgZ/Et/CuNEN3eBumXh2DIORho2IzKM6dKSE6MgRHUxScmxbgqM0owBua7zeJe2lx6bo/8oeM6vuOduSnj7O04tnJhiEPGDLtajRmEZqdeb31SLq2VxuPyQZIcEzUuMsyzhPOnXS+4Syg/qs5VhYbhQAjTIu3KcZyg9nC0vO64eNZ1Fmbaq/VOsVg5/v675OeUfh/UF38hyi6d9pLrjUUG8LlhmpoaJTmvtYeF/JDo2hcsDHLpnZ1GE2HU73bBDzS2XyLMhZA5FWOqzEwF2lU5AtX1PV/T/CdXW5W+Pbj5iiawFk3c5aGtnTLOWdX6p0XIuVmjqsNDleE0S02tRT0rN4GWdVAI42JMSHpQi696h0cLXNf6co7JBQPML1iT7SMKBgIOUC+VSs3ImdaXG7Zp2zcCQp7JfiWXuFmmESSqUPKeeyWH/zSgf4Jr793R3mzmkEteVYkSjZSgc+5mRmpO49cCDABebWpp4n76+wAAAABJRU5ErkJggg==",
        iconYield:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBJJREFUeNpclFtv22QYxx87tuP4kJOTdG0X2qrQoiE2DlpXJgaTAAk0VdoNF1z1km/AFR8IkJC4Aa4QIHUCVrYO2q1dD2mbpkmd2Ens+GzH5nH1RqqI9JPt2O//fQ7/96HW1tbKAJBHZERAMkiIuMgIcchzSoyMCel9Ald+DFJF6sgsoiBZxEMGiEauqaBPNkixyXN4VTAVq99/f+XLaim/kqHGlRwTU549gu2d59Zf+/pPoijtkQgtxER0pEuu6X8BifRS7Pp8febTLJuRXFPFHCOwbAu8KMn5rvWRLOcX1r94+HpXVcfNk4a2fdj5BtccIQ2kTTZIox2nYqXE7oBSysKfh1uwf6xCo6VDGIVQlQvlxbnpzNAY1Xq9LsSxrwhsvJ7juTN14P3AMMwOrm+ScripWPa8a8YyjXX3R8AmPmSoBJwgBNuPhPN2R5AEDox+F16rK9zy/NRSs6XOn7b1RJILPK7nSMm0zPLy8qpS4O+ZTsg/edmB064F3aEDxsgDrT8E1zJA5sZwoRvw/c+PYDTswddfrdOfP7w/t/ficKk3cC5omk5r56Zit0QuXl2eyuQ9U4fYt0AbWuA4Lry1UIaP356FBYWDeonDesZQnyrCTE2mJEGi77zzZun3R5v1KMm8RLFhmubguD1sLFaYWZqigErGsDRbhLuf3IBaUQDXD2EOBWqFHDy4vQAjN4TG3i609hsQixW4++7Sq9/+uPlepVo9ScV6jj/e/Hu3teqYfdbBjx/cngY2mwVJFOHezWuX/ozRotE4dUAElaIMh+c6bD09gESq0a5j3UC7SqlYl+Oyz3ZPOk9FMO/YXgR72NGYosGq1yCJQ1icLkM5L0EYJxBQLJz0NOhbATzeV6FQDMB2HM73fTatWSqYZHOS3tEdxfGj7HSBybGYc+B50LrQ4aCpQlsfAsuwYGDkLJr+u99ewGlnEHcH9iDLi08kSdpkiOla6JnMK/MLsW3bH/Ssi88UKZJ4LgMCy2CKMewed2D76AJoloMgZuFcM8ENktHM9WvPZFn+g+f5NkPOYT8tDLY4xhfuhWrx7YH2YUX0pPmqQOdz2En0oRuOod3tg+7EoBvuOF8oa/l8/jHyz8Rnk0kwmRSWIEptP2Z0zQHqrGfxYRDwNDbaxBRNx4f2wMc2cF3s4EaxWPwVgzhIzypD3DsmEaYTIKIoylMURSuVSjuO49xsDvSVpmEslrKRMrR8GNrxqDpV2yoUChtYniNy6F3myjiKyViJSZQm7tjDwp6JorhjmuYbak+9ZbnRHC+IDUztF0EQ/sXvVDKSoqtiE8Hg0kwk5bSeGGkHozjCxRuGYShBEIS4yXN8d04aeDk4/y8GJNXJJI2uTFyNZVm+UqkwZLFDIvIm8+w/AQYAA2L5OdadVygAAAAASUVORK5CYII=",
        iconRate:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA85JREFUeNpsVNtOG1cUPXOzPeMxvoHHJnY8JnZtrECISKpQVEVFPKSRaB/6nk+I+pLP6BdEkapGVaVWEelD27QPBSyVqA1CDUGQggW48f0CnvHYnrHHnu6DjiuKamlJs/eeWd5n7bUPtbKyQiOEOIAdIABsAJzrA3RAFzAAUOQ9DETqI+A6YklRBPgA44AxQoaJTgEN8oxzDgBPyDRAmxD9S+YETACuirw/PSXdXW6dWUKperSv219nIJ8DtEhnYnz803u7mWHUCmw+5scbx6RzNCLDnUxGgzeXUqFPPn/zUrF3NOi8I31ULoiLwYXfvoD6GWAoOgKS1Zx6lC+9OImnG4/JqajLZFLEt/DZ8yc5e2n4Xckn2ert/aXpttm/IZT5xbFgdw9rI4nzH659dSzw7+18Dzz42EOANSKjiejuTt0TPyltocisduiJnNUCqWoJl8+qw/ehHgWEjYr8scavH12Jc7sQGwSDi2T4RzXKOmJAW85GmTgxdZ03GYpHFH0u+ETEc3fh5c91j1euviAaqmQw/yHD7FohX67xlIzUg5kIRwusw4yHdCuPRDeDJyb0SsnbCruuhGK23QskI7sw+Jkl/1JrGNs/9VDwQT0rJZRsMrFjbSBTeKv6IkzeNbgtv1qri2NTReiKwz50ERvR5HtsEwOTKYCiO/F21eSK7fK71nJz0BBEL1VJp/wHoLFFK9enu9xGO5nissSPFrFUEzcCqOCJs8R4VTwZv6y2/DJag/c9EPsh5QvYF++82TYEX6zxCnKeoHsmLksfpNQ6YnO5k6zKbD5jhNbOyBoGEbNPWnYTE+OYc/RuzKnWRjsRVwp+x9z0pP3+/No3RdQzhkhwXQmXazfTkaXMI2xemgjZJcetkS5x+91rE/dmN39ouFyxLBadCjrvJJ9/uYfq4pND562vM7VqRe90O4HyIb8Mde/IGlgDk3SDyNLz5ml4XuEyajBunE+wp4qiZv2FIknmHWsbmPItpcTAumotTcYajsgQGbONLP0YbMTc9q96TAzn1iGu465bzT6yUwE06LFYHhS95mctWAITtfEmDC+TceRm4JjWzP2qvnkanbb9AvHfeOHzpeMjGwogdW8h4bXNTtQOgiEV/Yl8QWYL24O9RHZO7tQX0xs/FhOWf38VTpyHVA8f2xC2nnVp6aFW6IUqq1yojZ4iynvwOjAZ/gN3f5EMkcXVc3t9q+/+/enVJPctxAUycc45WdRkd62Yz/aWDbMpSD5qPxwL42vqBJNRcNNeXC0H0cxJnnFHHTIYmtjm/y5QrKn6jwADAOdNghDsOz2+AAAAAElFTkSuQmCC",
        iconItem:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1BJREFUeNp0VE1vGzcUJJek90O25A9JVpQYdZLC7sUoArTJJe2tKBrAKJD+xl576KE99VQ0xwBBkIuLtqitRLEcWdZqP8TdJbfzNlRhuCmBAUjucjjz3uPjx8fH7MbggHcDtYMBrMN/hryxpoMKCIAICN2aiDSQAbmbV27/g2QC8IENYAfoA9uOlJTEwDtgAlwBKVBcJ5TOlnQqtoBhXdf3ksXi8yxLHuZLva2kLDbbG6cbnc4zW/NX+OfUkcbXVFpxeHhIJG1gANwHPr2cTr+dXl48TdL0bpZlO4sk7Z9PLj5eD+WDqNXSdc2Fc8KdMrsi62JyGzjUevl4djX75u3b88+MsWSXC+FxKSW3kBQneRD6qg+yrrGmjX3jyEhZSfZ6wMFsdnl8cT752jDbLcuKpUnCOOdM+YqtKcU8z2MCzKPxZH86nX3Uaa9/cXs4/HVre+cH+o8IpTFm982b10/iOP6urExgqopZaxn3OKswL9KSZbg7jELWaoVMreH+2vLJZLq+iNOvDg5q2+31KBmpt1gsekk8fwzJgbWGlWXBqqJkNQjoRo97731A7VLrJkxRFBAh07qQo9HoS8T1AWXfA0nOhTwBiY7CoElxrvNGFbLagMKMWUNYFBVTEraFADi7mi823k2nj3CsK46OjtphGFVZlt8CwXYURbIsS7bMQWgMex8O3sSMUJaaFVBIhKR8hX6//xtlcw2jBEmWptluVRaddrst4Y9ZY6GkwLPgzFiaa2xzqOXMD/wmBEQUBH7c6/V+oWxeUs2EYejt7e3Zs7PTp1rrTzY3O0EYhGy5zBt7FjGig3JNMSlkU2BKSawlYhj9QQUs3bOgUQdBYO7c2dPj8fgJSuNISrHVarU42aYMX28FpIpsS6n+HAwGP2P3nGz+W3TAUil1BZuvhZQpsufDpkIOpIfTFJ4mftyzyIfGa3i5v7//ve/7z3H2TJycnDBHaNzDzXHjHIpGIP3L94MLrDMoq5sqF2IOW78Pbg1/Gg6HP6KQX2D/bwoXv95C0NuEazmr90pdowebu2maDpHtCMqXuGiMkhqTNddJ5uSK/09zXJFSS2o5hK67WNfTKNaJm1OIrPxAw1zFcGWbGuLMXeDd+F458qan/SPAADZkjTT769JCAAAAAElFTkSuQmCC",
        iconReset:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABB5JREFUeNpMlM9vG0UUx2dm1/Z6vY7txE5cE5yQQOymMSERJGmjSFBVSqUgAVJVoR44IA4cOJdzVfE3IBAnJISK4FQOICSKhNS0KCQqpGnaJnZ+NI7t+Nfau17vr1nelHGVkT7aGdnzfW++8+bhvwhBRBTRjeVljBDyAUEgDEQBBQgAFNCBFofNTcAFPMSHeHNl5cUckIE4MAy8DAwNG0byWTBYhXkTqABF/m0AHcDmwZ4LsEEACRgAxmVKZ6+Uyx+NVasTgmUR2u2iI0KO1lKp39dHRu7woOwULIgGWCxDIZPJ9EQjQFr0vJlPi8Xr6Wo17bXb2G21kK3riBhG30ilMg0BXqmGw0VNkjSeld07LhMTuTdJYHJJVT/MFYuTLghQTUNFUdS3EolqJRyuEUq9uKaNnj0+nq9EIhtNWa7Dnm5PkAn5gT4gBbyaabdzHgULXBcVIpHqdwsLmxTjPULIMfxujJbL0fM7Owvvra/fuD0z80k+kWCCArOKnBJjmaXPqGrUsyzkQlY/53JPPEIOBEHYBrE89pHKYSq1fWtp6cut0dGvLm1tXePmk55Xvvf3999+yTA+LoliBJ+cCFang6qC4E7t7qZlx4k8ymTyx7EY+XdOvTL2UP5NafuMP86du+8gtNlnmrQVCDDPEPMstB2NGgbG4oVCYZnoutj+v5iIIwjm3fn575uK0mor9sTBlHFVlbrJocPArud57b14PG+KoooxZjXnCNlsVoZF6ESWcSMQQK+VSmfBUdxQFO3O4uItOxhsOIQmd8+b18wgDdX8+iDuUhRt+gu8NFQQZpfgsrMSEHPAE/VRKnV3I51epWDlxuTkT6YkFVzBE/YW7Q86MRq3XBsZrokfjtUuFVLqmyAiAYS/Ao/AAuenO1mWKhhd+TOX++FocHAVjF41BjzhYMF5FxRErDuG4UICDkWDZamyn2gu/Z0tvQMimF8AZhcQKMX0i+asq09tRB9Yomj8Ojf3Lbslf4XaqRLdgLS1wxXrgmGBGBwx9zR+T7LEX+A/a7z66fPM2C1MrUV+rA9ZV+9drH1eTHVetzwv4bruKKV0AjIf355ujVXtpg8ZFIVUQQOhJ/yNNnnRur3SsJSW2MzeV24+mmt98c8b9c+CWbHZr0kqcbGvJneUE7HVh3QIblKUaCg7sOcpF1N596CnnxMO6oLdf+TfbMidwWbEHNdDTrQeMsIt3AkgC/x1PSR1RW12N/mNSMkD2HPAM7N7bYiJeXzh+m1iDh8pj8OqeNzx2zETOZJLXR+LO1CX9t7aPvN10PIxn/aBGs/KO93DLN5G2Lkd1qOSJbkJrMM8pslWv9Lx13lNPQMO+bzb62O9IRxcj6DxxwrlQl3e8FQeuey3hTx8Czwb5lO91xRvX97zMjvRF2L/CTAAXkAASAqjjOQAAAAASUVORK5CYII=",
        iconCritical:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAIAAAC0D9CtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAKNSURBVDhPfZPNTxNBFMBn9rvbL9bSsnAglGLwA2OCUj8IJl49GA56II2pB0PSi4RE5aAJ3DASrwT9B0jUBEMMJEjCSYlGEkPlwoHSokCBAm13W7bbdnzT6UEP+svOm/cxb/J25g1+GhtACCUNIZfPO2RJlGQwAbtkVSwTFF52gtS8De7qkSQKoNMR3ylKyL58utlGqmnmwVMuHtGIKoLOFbZBfl1NguztaoU0fLu/v6NFezh4r2oXCvt7vvdz3sVlObULK0y9Id3Xlepuror8bqb49lvesKrXOgNcpVwOhs5CAt7cCMWe6a/fOTZ+ceUKfK7gudDKTvjlvHJoOlXRp3lOCkbJLnO8IBhGtpo90B89V5K0DAYZGEA3+vD6ums3e/HVkmWWbF5lIQ6GbaSdbz78lTAygoaH8YsJZrrT2fYvCbFSYCYHfw+TZ+EzsxHPk8lJPDaG7keRTUOMUJyeAYMrWSWYlJ9pajmdZGYGx2JIEPDHRbS2hmZnUVMTRLT9LF1Qg9ZGIYRKrxdPTaFolORzqKWF2DYZGkLp2nZ/UM8xdI1O29tobo5IEtZOkelp3NuLE4laHB01epgCcBVexrnNvXAHs4muo/FxMvIERyLIpH3AWD/fVtcgxyGQzPFJ6nrQ0L3UMTqKIhF6YqzaGsd+T/xSfVOgXhvc9PfBm/nwBTQxgRcWmJMBCfN3wkjm6zYcbXfP1czOViDgsxzqZrv7xDQU05KKJcLhTKBh9cqZpVs9OdV9XBSX4wmt0e93ifjxg7uffqQU1eX3+2AP6GvoaEHmylYV+hpuQpIlaO2tZBLWdDYpLqdK3wK00MrG4f4e7ct/0doWbHUTURHdiqP+fgDIZMp/oO8Hod/QgQVXD60mfgAAAABJRU5ErkJggg==",
        iconPhantom:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAIAAAC0D9CtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJySURBVDhPfZPPaxNBFMd3dmdmf5htGpvUtmlLLKnF0FNJC6L5A/RQiuBBsD0KXgQ9iKB4EC969aDoVT3o1V8gHiyKVYzQKiIp9GdMm6T5tclms7vZXd+wQYNQP+y8+c7Me2/fzs6gaxfOchy32cBavS6LlFARhoBtmY6pgxDEA2BDwV7VrVCCQbP2bcegnJ0cH7Q5RdfrMNM2KmxFIaD5Zg7s55VNsMcnRyEMzc7NxYdCF8/Pu3ZT16pqKHxwJCEH+8GjXtjYWn5TXF0CvVsynn2pN0z32ES/EI/Hp6eS4yO9TksLRY8MJVJU6eF5AR5J7Ts0PsPzuJL94SG0rZF8YS8aVnkB40ajBgFYDkbGpiDlP8SmZ3uGJ5uWYwuKP8NDsxt5s6WHohMIoVL2Z2F9xV/b2/peXF8GEZs6aTqYOE1/HsPXQ2eVy0rvQCWXWXx0Q6J45sx1KGDp6S0oMXn6KtTse/vwlmlB17JrWFSgdIkSDiGBiDymgiBwHMJUwkTyvX3YXgNGrQA2ODB2YuE2CDU8DDa1cMfzXDU8wjy6YN8DmLbrC/D2A4BAX/RPQNv1fAHwjiAibUMkneD9cDo5GbyMvVK15doGDPTKjueyRcvQzKYGwvM8rfSLOXbxN31+9dO7B5fTL+/p1cLik5uv7l+pl3JfXz98fvdSJv1W6KoDnZufN7Irp1JHAzJFrmG1Wd2aCTvG2R5PEHstiEYLv/iYCYUjiQEZD4qtD4b0+H0xEumDFIRKcKKxiNqm65ga/AkqUjja25trkhIYVVlGdhcsu51eKxcLuzDej9HYYQggElEluXN/AIj0xX9g94fjfgNTw/ZOJuuzRAAAAABJRU5ErkJggg==",
        iconTotalDMG:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAG2UExURewbJOwbJewdJe0dJ+0dKO0eKO0cJOsaJfIeJv4kKfwRIP0KG+wcJPIeJP8lJPEcIO4YHu0bJe4bJP8lJfQbHu4cJO8aIesfKe0dJu4bI+0dJfMSGO4cI/8AAP0FCPwHCPkLDu0bIvAeJu0dI+0bI/AfJu0aI+wfJe8XIvAcJO4dJe8bI/IYIe4dJPAbIe4bIe8eJvAUHfEXHvAYJewcI+0aIuoVKuscI+scJPMZHPMZHvAXJO0dJe0cJPwLHe8aJewcJO4ZH+0cJO0bJe0bI+0cJe0cJO4cJOwcJOwbJewbJfEdI/IYHe8aIe0cJOwcJOweJuweJuwdJe0cJOwbJO0aIe0cJO0cJO0dJfMSGPEVHO0cJO0bI+0dJO0cJO4cJO4bI+0bJO8aIfwFBu0cJO0cJO0bI+4cJO8dJO4cJO4aIvAaIe8aIfAfJe0dJO4bIu8bIu8dJO0cJO0dJO0cJO0bI+4cJO0cJO0cJOwfJe4bI+4bIe8bIe4cIu0cJO4cIvAbIe0bIu0bI+0ZJO4cI+4bJfISIu8ZJe8eJO0aIuoVKu4eJu4YH+4bIvQZHe0cJe0cJP///9fC3GwAAACPdFJOUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADEQDbUTePELD+3sDUhbHANuhugLFrH5wHlV+CQfA6T8ZZfOnW9DHgWE96lGBK7bSBUd9/5ldca3/YWwlgkBFEeSc/QUInFMA2jtEj4RAgF6bD4LuZgJtgAAAAFiS0dEkQ8NvpoAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffCh0QMyVkNoG+AAAA6UlEQVQY02NgYGRkZGJmYWW1sWUDAQagADsHJxe3nb0DiM8DFuDl4xdwdHIWBAIhiICwiIurm7uoqCibGIOHpxcjm7ePb7+fP5O4hKQYQ0BgUHBIaNiECW7hEeJSQAHpyKgJYBDtFiMjKSTGICsrFwsRmRAXn5CYBBRITgmDikxITUtnkJdXyMiEcLOycxRlGJSUlHLzIAL5BcoqMgyqqqqFRcVAbklpWWp5hRqDunpllUb1hJraunrNhsamZqCAupZ2S2ubTnuHrp5+ZxeDARCodvcYGhmbmOjpm5oxmAOBRW+fpZU1RAAAWP9FxOOwpA4AAAAASUVORK5CYII=",
        iconRegen:
          "data:image/webp;base64,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",
        button:
          "data:image/png;base64,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",
        iconChatSM:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AoMDB4YZ3mPAAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABeklEQVQoz3WTvW4TURCFv2+DiFIipXbWCgqiySP4Idy6oEJyCV1eIR1FXoDCUqrU1JFQHiEikrVri9KioOAnEhwK3zU3KNxm9/6cM2fOzEi1ulW3Bxyr0yQz4AS4AxbAlbpsR+2v4b0V8FB9V0DbS7fXSYb/BfCmHbWbHbgAr4GXBZeaeIuPKklugcn4aLyxW3V76ntgNoCqSI/ugUWSVw1wXEk1yQo4B26SCNyo50lWZU+SmXrcqNNKGsDl+Gh8lmRezuftqD0DLofo5TttCkvxR9RJv+5P1XnJcd6v+1NgUsj/Ru9W3U/1aW3UkGOS32rzmAfAfVPqOOi2IkFteGh5XcK7pjg3AL4m+QD8GB4nuVc74GORnMK1sFt1J+qnQvBdvQA+D3Utaz/Ja/V5JeTFE2AJLNRZkgPgLfAF+Fbs31efAQd1nYGlAP26P0xyrf63wyqXb9VJO2o3DUDp1UmVv7VBFdFiAPIP+26qgGlp191UqVfAg6n6A0q42/cMWcqjAAAAAElFTkSuQmCC",
        iconChatNoColor:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWFJREFUeNqMUz1LA0EU3N1gY2OQs7HwI8L9gUAqG5VYWqS1EIOQIv4OtUxjKwS8NoWI+APyG0RCzrtLaWKwVPFYZ46nRLmNtzDs2903c7v35mmrslEC0jiJOG9prRvW2kPEPjAAAqCH/XB9bSNVMgywBDy+V6v7OOwi7oA4xFzHehGoIx5i7mDuJqPY+yYrfvmjsnmUlsufk4uzcyt7eYhHcStKogfAy26MoITN69fT9iU2noHafwLMJ49kH7iTw4MiAsyHgG/4c7C+klfcACfALVBTjgEO8xuGfxWL/sxZEYE+eUbKMf5zOFcAROb7Ruq4kqPuFMBNmT8gOYDStuN6LgHmB0ac01TukSfQBKdHcghM4ZxWEYEXGIn5GU8K79E5NMC8+tJIdOIbrMy1lsZQaAqP/sX7l6WOLMdYfg7fyKdNV3d27xfCp2PEez9kEci6igYAfnUV38irznbVlwADABPWyIVOu15aAAAAAElFTkSuQmCC",
        iconExport:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAr5JREFUeNqkU0tME1EUve/Np62hUyhBIfYTFI2u3Bj5LIplw8KthhgTTDRgDCvZoMQgbghrNkSWagyEhW4kAg3GaIsKwbYKjYQmiggBOrTQMv1M5413akoCRGPiTc7kZd57555z731E13X4n+CNz9DQEPj9/v07SMzxPEmnMzpjGvA8DxzHASHkMMGrqSl4PjKyb8PldDZ3dNzuWt/YCGK8DoXCn2R5a+WgAvLR4YB4IgFpRQGKP9YZgzaTaO+9e+9Re/uty/JWjOU1TUklkzuyLEcXFxcDszMz06Hw5/DS0tIyeYuXOJRlSONw/YMxa2dNTd3I8PBoqc1m293dBYp2jFLxPAcmkwnQkpZXVW1wcPA+TygF9lsNh2c8ZoDOFrc7elSSbPLaGmj5PFBRBBAEyGYZJFMpMJtMnNls1rfi8Q2jBkZVTiKuY0e6SyilntXVlURPD6hoC5AA6uuBNDUBRRJd0woq5ue/hH0+34RBYEf0Iq7paINHrfZIxJGKRArMxZrzXi8wSkAoGGVaIBCYjMXkNYMgh3iMKEWhl1S0RE9UA2XGfCByKhCXG1ekQMajis3N2Lpv0ves2MYkYgI35yKM3XCVVzys6OszZwWxcEFTc8CsEp7EGcAOEYFCKBh6P7+wEN6bAyMsjMVenKoOdff3U3b2HCZnwHQjL6rIKAXvhgY1m1HGxl4+KU4wNSpsQe8dnFDecPNqV6VLES3ZFShhChzRksDlYiByBETRVCje9+/LX9/5/ePFxLRuexsGWlpgWtedyk5K870JRj7MzkV/RoMJgeaY1XYMJMkONkmCsrIywOxPFSWd3htlggp0nHNg+W8P+gbasOEWHElLVVXlGW+jx1tbe+G82+2schx3WDOZTHx8fGL0wJvRobW19U8PzYY4LUlSc0ND/Z2LjZ4rh079heCf4pcAAwAOSzJPzSWG8AAAAABJRU5ErkJggg==",
        iconImport:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtBJREFUeNqkU1tIFGEU/uayt2xm3UxX000RLKVeBFES0awHKYIgKn1p8cWwNYqeRCiJXnoUwhDsoQdFkehJErxgEO4WKOqaGq4KZWFednZWV2fHnVv/iAYqRdA/fPMwZ853zne+81OGYeB/Dmu+2tvb4ff7D0YIMcOyVDwuG7qugWVZMAwDiqKOEgwPDKPnbc+BwGmPp6qh4V7j6traJDnvg8GpCUGI/DjcAZXZkglRFCFJEkCTLxuA/ZXN1dTc1F5Xd/emEAnrqqZJW7HYpiAIi6FQKDA2OvoxOPV5amFhYYnCU5LEmFR7WARyPuRc7e7o7kpLSXNGY1HQpG1zUqYMm80GIklTFUVra2t7TJOqNhI9Bh3HsYMkaojKSNxIPOyN9DpXoitgdRaaqkFVFWxvbyMsCKTbOEMzLB0RxTUKz1BPyPMIUgg02kIn2eP2KxIl8WXpZajNrcW55POwUAw0Q4OmG+A5DrOzM+M+n++aOcTrBJcIrOZQdFWHxEi7ckaWRjAuTuBlUSsKUwqhKRosjKlX1wKBwGA4LPw0Cab3kk8RISobZVI5nnOLm1GkJ7tRnVONVHsqEloCFE2BtViwvh5eHRoc6tq3sYXAQQZpRSf4+94Hrcvu7+5o8gbqC+qRz+WTZAWyIoMmBBRNIzgZ/DQzOzu1T7C8ayjprEDNvewtvn02Yldg0SictKUirkpQVJlIondtUnZkqa/vXcf+BrNWxkr6VoHXTIrvTs0TNzPNJbN5MBwuyOoGqSoT65KIUQwYUn0+FJob8fv79xeJjjXGUDNTA2PO8IhbW8qAf/pLYHR08dv8WNRKJ3TO6QbPn4CT5+FyuUCqdxIb479X2eyAJY9hqF+bn7+oAywOshuOjIz0/MqK8sqSkuKi7GxPRlZmFifLstjfP/Dm0J0x4PV6/3TRnARneJ6vKi298OhiRfmtI3/9heCfzi8BBgASRjBF6Hz+5AAAAABJRU5ErkJggg==",
        iconReset2:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtFJREFUeNqsVEtME1EUvfPrtCVRoNQfJEXjgoQJxJDACuOPhdEFRRYkJqzcGAILE3ThJ2FpIolujGyMIoSFWlQGIcYVIMVgEVrAFtLaUiJ105IWOh3m550pEJBqMPEmb8578947c++59w6haRr8F/sbka2w8Kjdbj+4Hx5CJyIIYs+G1Wp1dD15/A5RjSwtjU1Ofhnxer3T0Wj0ezKZkvdLRDmd9bc7H3R2JFMpYFkT6H5viKKQSCSCaOMTbvfo3Py8b3p65psgCBs5iUiSdPT19fGVlZXc+npaF0DXAFQEk4kBi8ViSCJLkhoMLvra22856VzhOhyOUxzHlWUyGZBlKfvSeBCQTqdhHQeJcwybZBiTthKL/SBzEJlqa2vPmM0sLcuy7p3hDYGoqWp2vWk0TUFPb+/TZDIp5iAiDl+oqzstiqLhviShR0T2mEGmqbqwGKIJlpejP4eGhl8ZpFvXq6uq6hH68XKooqKsWEjHoftZL3yemISz58+Bs6ERKIo09CQRGYYGt9v9Mh6Pr+wiQnuDJN14sPmti4fikhKDpASx4UqjQaAoCnpFoFcEiBlRdL12Pd8Oc2dQ4UjkPlfONQ3yvAmF1MWEltZWwwNVUbPZxbBYloWvU55x3+ycZzvTO4lOlBbXtLVcY/S5np2Lly7DgfxCQ2TQFKOWUCKgUCtXv6tLVVVtD5HPHzh+43rzTd/E8HZRhYMBYKk1oKkMsOY81IVBZCEWWwmPjX76sKv2trAgv+Dk3ELYzI/44VBRgXTsSJHqmZoBfyAIFqsdi9AMeRiqzWaDAX6gJ7G6mshFRMiiEB36OG7TF975xZbZQKgDNdl49LBL8fv9KK1gtMpaKpkZ5N+/+L1otsRWSh2OJkSPnrmlaEQ/aLGWl6/RDHP13p27IbPVMlNTXc1h5haDodDCvrt/ZwPj0BNg2fzwKg7pn/5HufrwTxu/BBgArZRH3O1yru8AAAAASUVORK5CYII=",
        buttonSleep:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAYAAABzVH1EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFRkU1NkIxNzg1N0VFMjExQTJEQUMwQTIxNTUxREQyOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3RTMwNEJCRTdFOEMxMUUyQjBDRURFM0I5NkY5QkY5NiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3RTMwNEJCRDdFOEMxMUUyQjBDRURFM0I5NkY5QkY5NiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkY0RTU2QjE3ODU3RUUyMTFBMkRBQzBBMjE1NTFERDI5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVGRTU2QjE3ODU3RUUyMTFBMkRBQzBBMjE1NTFERDI5Ii8+IDwvcmRmOkRlc2NyaXB0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",
        buttonBank:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFRkU1NkIxNzg1N0VFMjExQTJEQUMwQTIxNTUxREQyOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNEZCQUJBMDg5QkUxMUUyODZDMkNGRjA0OThCNDIwNiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNEZCQUI5Rjg5QkUxMUUyODZDMkNGRjA0OThCNDIwNiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGMDUxMUFGQkQ4OUUyMTE5MTMyRjkyRDBERDlFNjRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVGRTU2QjE3ODU3RUUyMTFBMkRBQzBBMjE1NTFERDI5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CbeTcwAACpBJREFUeNqUltmPHNd1xm/dunVrX7qqp/eZac5wGXJMURIt0IkNRLIS+NkG4jzlyX9FHpMXP/rfSJ4TOECgKAlly1LMJSKHpsjhbL13VVd3177eqlwmQIA8BKEKhUYX0PVrnHO+832X+au/fM+Z2Vrng9eXl2ySCIKQo0hlDImvCBPrpuxukyThSMYSEssaIjkrCEbkLZzZaFPKHuBNg1VzX9GsB8f6+VXd2G1cjMdZWJpGI00zjFlBEXKQdjQ1XCerhCVpycEMKTWXQkFTXHcznrkhwwekHGia7Cd8i0dywd/45Ce//NU/TNwtRoSUsLMD5quxLAA/AYAFFQE6lpM80hCuyrLUqtgHIsOwLBOWIQ9TtdT/4hc/D86eFWn14x/dejVfsKLICVUtQdnAca2VcISKrpNH6zQxpOMKvUG1uGFAV8M2TOkvj+4MEolrFDzutO+3hLMXz9jrHf1vP//d5SyVjFKRWRlbURJxmMkIMC2DIXXPUhs6RphdV0Q9GKZZ3Gy2alw7cYYatETeDuPZevOzT3/4xaOn//bom5eXE9UwOu1OkaVlUeSAkQSM0l2hlrL8qdXJa9bKarnbHhRpUUJGE/WsyMMsdaaLEpJtNP34/nuIdLrjhy8J5AVJtTTBXwS6xGOUMUxDFKpKJKKQM4CTMWxKGKSTYYNFAjfLC7PPAl7awIiUYDq9eFMkgx/80ZNf/9Otm7cMCTNhyG62nUbTRhXMOR5dcBIc6vfECGkQhFrIROuBricEzp0liP33bh6AhrwOo5evy+M/HaLhja4uyzgnIItIkO22G6JmHNw5mo0XnCjuHV4bz+w8JxChsiRVXQ27zdV0Mnc3bFwl7mbXbOQVY6+C+Xxs9Q/8JE/yIlnZbQkpsrVKysHtO+ORnWCsdgajqZ1SlTCoTN+ibrRbbOpG5UprtmbTIC1rSFDLlN/867+wD67Jv/ndxe3rLUMSeJANv/+xWyDXz0XDLBhu5niSJHEcDyGUZdpGbG9CLGvD4R7HgiTwVZVJ81RSmseNYjVb2cvt4XDIVjHmqtA8ugyYiRMzohqXcGJ7ovi/UHM3SIHQ3OklSVj5MRQEscakPttXuyhxl9dbFseWsKo5SSak6rabqqoChkEUwLKQYWp6gbquqqquZUnM8jxM6sH7Dw7v3v33z/5OUWBSkk8eHP/6tyd5GGehp/EIkix+N5QT583+PXOQzl5+wcdpUkuHtzuoudclv92QohAEnakiWRLKmum3rbigbaY3eQv4L0xFd49+ZxAgjCCi84mrKRKtnC2Jyhl2ttB2DSgyLKoaAl9t/PK7oFaK5HvpsSKYSMi3W8RBfQW2MujCegulOolCwNHNATyPF+uIyolSioIaQ0U/0ix/+wcA0OKLPFdl47lHDruaJHju8r5Qv1mHHMi3jsqYYp6nEd2kd0fNw7zsKqBklpsE8gAZOisLlcRTq8FJGLEsmxekKos8yyYz13Y9P0qjNIMsFBAzG48YUCuqIlClCAIv8gwASZyv4z+oVtZs4yqPSVQqtUWS9DuhQC2QTKzzVEAiTL1NFtHZa6Kg6bpqmUYY0WUqqCCoFGi/EYtURZJEAXPID4KiJBzH0cJp3TzmOJYJAn+79a/t3rZnQebXHavXwJIuQENTvhOKx2waec5sabUsapNl6lceH3OkYiGk/hytwjzLRZ5jGNphluYBAtV4MqkZGEdRr9elmk2ThIXAdRzEwnazCxlWhA1TGUTe/Ox00d1vIJ32AEf2+h1RG3fFgKTV1uThPZ6voaoZNao24XJhzy+vloqsBmGU5XTcBZ0OvdI4evXq9OLisqErd793REgxvRqtnBWVcJLEELGablDLwex2610URRLExedfn//jw28lRXt3VJrElmmajZ2pl2yKDJ28HpWEka2dKnNpw92lUxQF3ds8x1SjdKNTGg2kvv/h3V6v/eTp8ziKp5OpqqmG1brW6Z140bNvT51VOHrvJofMsna1Ru+wS+rZ0l7a74466PQef7kScvbhyem1YRv5ZZIRnuF0ukJIyueTK03WoyihQVaWoCwInWyv29rZMf/5899025YkWbTzPMeFaSaL4saLS1lIa/j4xajRryJShVFR1/FhV8q8pSaL74hSJDGIy/PJOsnQ2dNT+OEf3y25fLo4i9IgKyoAMK0vzdLkbWk5tUDf85m6Gl1NqFQVVd1uwyIv6e6wCAk8ByA32BsSWN94YN2832E5+va2ygtv7DMEfRcUoqbQ2TMtS9776C6K7LzFVjd29joGa1fb3ZZ5eTpFHKJWWVQQ1ICedRzHod6cJOnJyUsOC93OjqoqBMCvvnrEgkJmi64s7+/g9QU+aqJBo9jvm1MX91Xx8WT+jqgvv/w9B0tVASpGO7rI3mtV51FBBwzYvJaZ0dXs+IMPX59PdFWGCCdpiTF2bMd1XUFSWk2rYeqGYazWHodQFm522xI1gjevJ1Zfn83qV2546+hWkpMIiHyBzet774jiq7TLV9c7jZP56MBi2Z/9yfefnc18f+PMN1s/gFSfRXrjztGr84miyFlZI/qOKG7X6yJLSF3leRlGKQNZ6j47KizjjcDiJE4bO/Je59ZnX31dRmEaelPHjlcbLILDw8Nvz8b/L6qjswdtpYi9MIM1VpAmYOKG7997cLCrRuHKX4aGYS5nr1tmc75cKZrpeVuOw73dvcD3FUno9ztMVU6nM5khwXYV+mG/NTi+8z2LCyTitVTw6YP7naaYgZxZBSHPJUzWsbT/CwUBsRd2R8GRu74kweF+50dar4YlslNOkfRtXnwzmkp1Dmt+625ZLh129VM7mi0cUeB3+7rIgdqQ/PXmxaOvtmsXgWIBiWXoiR9Np6s4yQ96zQrSoAFz26ONCMt1bfv63oGzde7uDh5dev+DomfEqiEFm/Xpf/ze89cI5JtzZtjrvZlcApapw81h10B///Dr18vNtD4lXMysCzptInA8Ccxss3frY8DAnim/fPni6vIqL1NJpf01moYGqyjy/SKu2p3h6flZVZcPHy8FBp9vmOLRKc9VUE0aBUKeWATTjut1rh3TCNprKSfPn0zHEwSxJRqKStOoVnkRAzR/NTq6czybzs4Xq5hm5l//4s98xxm7G71jtuhAIY4hw4FSrHaWq/mTZ8+c1ZwDxJDE3f39mscaYmmWWFZDVUxMnzCezOftvnhzr33/g7sBU16e24f7h3pXqQLCKQOG8WjUVNTfT75xHLuhKSLG/X6vLXF0Ewa7O6Ig7fVv6FYXydLTVy+OhgcY8+zPP9Ie3Pzht2eXV1eenqSo4oqqbNR1vkxSQIIylXmhsH3o0wiJYrKOvDDJImpG04ntrsLxZDrYVz7+9KN6cX572L1252j5yl6MR3mxtVjgOEkJN3FCrkZzxGKRw9PpPMsqjhVXwdXVynZiu8LCF4+fT33vsyd/GLzf/+kHVhDEzN/8+Q+aMp64izM3bFl7NCUuVk4QpmkSaZJoGJoa55bCE5EobK3rGq8VGLJJDiWt5c4uvZL95HaXmuOzq9l2xbUkdOUuL9ZBu7lfEnLu2G9RaUzPJ6ZpKFFiqmIlFirLaJrOa/l/o2S97UzOfYJ/fNTmVfX5aP6fAgwAJaNCBH+YKRMAAAAASUVORK5CYII=",
        iconAlarm:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0JGRTU5MDhBOEFFMjExQkM0RkRGRTM4QUMzODJBMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDMjVGQjlCMDhBOEExMUUyODFBMTg4RUE2RTEwNTY4QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDMjVGQjlBRjhBOEExMUUyODFBMTg4RUE2RTEwNTY4QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlEQkZFNTkwOEE4QUUyMTFCQzRGREZFMzhBQzM4MkEwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlDQkZFNTkwOEE4QUUyMTFCQzRGREZFMzhBQzM4MkEwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bLqFjQAAA3tJREFUeNqsVVlIm0EQ3kRr1UgVTY23tR5oQKFFBKGKBwoKSl+qb0JREEQJ0vqgqFh8yYOFgDRajQ+tF6KgjXhGqxRCFashFCvxQoxgDPFITRRzTWd/+H+iEfriwPLvZme+neObCQ8AyEMKnzyweN/9YWhoqGJpaSk7KirKWF5e/iU5OVnnfq9Wq1+OjIxU2Gw2QWlp6WRxcbHyFgANmV39/f3SlJQUiIuLg/DwcOjs7FSwd5eXl8RkMpH29vYfERERkJCQAOnp6TA7O1vnjsFjc7i1tfW8trZ2b39/n+Tk5OgrKyvfnZ6eRi0sLBQg0AtUcQqFwl9FRUVKLy8vS1dXl3x1dTUkKyvLOjAwIPLx8bHe8hANX8XGxgICaYxGo7ijo0MRFhYGYrEYJBKJq6amxpWUlASYCujp6fmAD+cVFBQYMjIy4Pr6OoTF4QBdLpdfU1PT8tra2puGhobFgIAAmJ6ehpubG1hfXwetVgsWiwW6u7sBvQGFQvENPZQ0Nzer0J7nAcguzNsEhgQajQZYqa+vh8bGRu48NTUFAoEAlErlR2pjNpvJvYB2u12YmpoKUqmUMRweHobx8XEOyGAwwMXFBbPPz8+HkpISx8nJCf/8/NwTcHd3lwwODlZFR0fDwcEBIC0AQwJ61ul0cHV1xVSfeudwOGBsbAwSExNhY2Mj290pjtiYWIJVfRoaGkrQgFaaiEQisrOzQ5BvJD4+nszNzZGYmBhSVlZGsDjE29ubhht8dnbmSWyqEBkZacKwCJ/PJzMzM8TX15dgAcj8/DxNBwNKv729vZTgjB6uc+rMvcRGujyj1Ghra4P/CfIRCgsLAdnxxB3DnTbMt6+v709gYCCsrKxwxq2trdDS0sKdVSoV+Pv7w/Ly8ve7LOE2TqeT3T9G4ytqMDo6yvBwcXGRAaGFwQdZHpqprrszt1qPFazwI71e/xYHhEwul/vRIiBFmKLRXFKKYANYc3Nz32NP9wUHB9vvHQ57e3uMMoanplQ5PDx8jUuB57/Yjq7q6mqXTCa7QJ1Pm5ubdTQt+OBXaosU43C4KqMxsVqtBDtAhfyKRgL/RpJPYGWrsI+ZiiMQCQoKItvb23lpaWl6nEw/maHK53vSho4nmkfs4UkEwkdt+uPjY4YmOGUItiPjydHREfVEm5mZ+RnTsURt6R0rvIf+C/gnwABBPec5UzOlgQAAAABJRU5ErkJggg==",
        buttonMarket:
          "data:image/png;base64,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",
        buttonChurch:
          "data:image/webp;base64,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",
        buttonBurning:
          "data:image/webp;base64,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",
        buttonFBAnalyzer:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAyCAYAAACpgnCWAAAACXBIWXMAAAsTAAALEwEAmpwYAABAPGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDplNWIwOWRiYi01ZWEyLTExZTktYjRmOC1kYTQzZjE2NWQ3ZDY8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6Mjc0MGNjYmMtZTkxOS0yMTRkLTg5NjktN2M2OTRjZjJjOTc2PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPjFBNEU5RkI1MjUyRjU0RjM5MzEzNEI0NDBDNDJFNkFCPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpiNTIxMDc5Yy0yYjYzLTJkNDMtODljYi1jOTJkYWVjNGU2YTg8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTktMDQtMTRUMTI6NDg6NTQrMDI6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGltYWdlL2pwZWcgdG8gaW1hZ2UvcG5nPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+ZGVyaXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5jb252ZXJ0ZWQgZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6Mjc0MGNjYmMtZTkxOS0yMTRkLTg5NjktN2M2OTRjZjJjOTc2PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA0LTE0VDEyOjQ4OjU0KzAyOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDpiNTIxMDc5Yy0yYjYzLTJkNDMtODljYi1jOTJkYWVjNGU2YTg8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPjFBNEU5RkI1MjUyRjU0RjM5MzEzNEI0NDBDNDJFNkFCPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPjFBNEU5RkI1MjUyRjU0RjM5MzEzNEI0NDBDNDJFNkFCPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZS8+CiAgICAgICAgIDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpPjFBNEU5RkI1MjUyRjU0RjM5MzEzNEI0NDBDNDJFNkFCPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICAgPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE5LTA0LTEzVDIwOjM5OjM4KzAyOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTktMDQtMTRUMTI6NDg6NTQrMDI6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE5LTA0LTE0VDEyOjQ4OjU0KzAyOjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpJbWFnZVdpZHRoPjEyNTwvdGlmZjpJbWFnZVdpZHRoPgogICAgICAgICA8dGlmZjpJbWFnZUxlbmd0aD41MDwvdGlmZjpJbWFnZUxlbmd0aD4KICAgICAgICAgPHRpZmY6Qml0c1BlclNhbXBsZT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGk+ODwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpPjg8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT44PC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC90aWZmOkJpdHNQZXJTYW1wbGU+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpTYW1wbGVzUGVyUGl4ZWw+MzwvdGlmZjpTYW1wbGVzUGVyUGl4ZWw+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpFeGlmVmVyc2lvbj4wMjIxPC9leGlmOkV4aWZWZXJzaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj41MDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+I7kpAgAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAOFElEQVR42kyXe5AdVZ3HP919+nHffWfmzp1XHpjJZAOTTAJEIoIQCQkaNQsbFdnCBRFwfdUqa+mq+6itWtetclfLtdgFN9YKugpEwBXYoMjyiJEEkxDIe5LJTGYmmdd93+7b794/7tRkT9Wprj6n6/c9v1//zu98jvSdrz8QHzt2jGJPH+Pj49Rti0Khh6bVQtM0tITRfioCz/OwrQau6yLHoCgKqirwfZ8AwdnR80iShKIoaKpMLmXQ35tDVCoVRkZG+Ncf/BsLFVAEeMFJYiChg+NDHIMUQwzIgLTYY9pNlSEA4ggUBbwQCnmNHZ/6M6YnTyNGz5zjyOGjlCqQVCGRlpFlmYYVIMtgaDJRFCHHIIRAUxVkWSYOI8IwBNH2aL7kohogFIHsBFSrHkfeOszOHdsQq1at4uFHn6LLlIjjGKGqGIaBkZSIoghJUlBVFV2oKIpCHAUEQUAUhERRhNllYlkWEQ1AIEsKxWKK+YWL/Pq3h/jkXR9FXtbfT1JAQtOJfNCFSq1cQ5cUDFmgxjEiihBxhBwGyEG7E/gQ+MzOXMK2mmSTCRIqJLWY2G/S29VBTxe89rvXkCcnJ1EUSKfT9PV1k8/nWbFiGR/e9TGefuUAn3zwc6TSCaLIJ44DRELHyKTQDI1kOsny5VewZs0wsizjOA6apmHbNs1mE13XARCKCAlCSKYEkiRRKS3Q3d3NB+/4OPnOArvuvg+Z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",
        notiBell:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpDMjhFNDI0QzYyOURFMjExOEQwMUUwQkVBMzJBREI2MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4N0EzMEJDMDlENjIxMUUyODhFNUM1MTdFQzA2NTAwQiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4N0EzMEJCRjlENjIxMUUyODhFNUM1MTdFQzA2NTAwQiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMzOEU0MjRDNjI5REUyMTE4RDAxRTBCRUEzMkFEQjYyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMyOEU0MjRDNjI5REUyMTE4RDAxRTBCRUEzMkFEQjYyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+DpF/RQAAEmNJREFUeNpcWUuvJddV/qpq1/M877vv7Xa77cR27BYmthwbY1tERGQSYGDeHgQxYpApY2ZM+QUMkJgwQSAxsBQkEAgQSQyWEAET3G6Hdrv7Ps49jzqn3g++tfY5bYvbqj6vXXuv/a21vvWtXc5733yha3u3Kqu66zt4xunQ9T2iMAAcB8tNBvlzuh6h5/JND2MMXNdFYDz4cYiyqDAKDdZVjXXWoOdYx+U4z3AeA5/3VXUDn+PLskbvAE3douW4tmlR8LceLpdzUNY1mqpB0wFR5KPjazIIMYoCTMeRZ0ae65yd7IVxEqFogINRiKql5VxsPBpwgh6Hk4ivJVzHxWy+xmqdw/dprO9jMhmCW4TjhRw3QLpcIctymMBDEkZEwEOa1+AukPO1yAoa0XLjQMwxYmhKUPKiRuv6OJ4O0BOM+SLFw88v4PkGR9MEm1XG9wFM2npYhyP80Z/+jUWSuzREhPOhJ9LyuZd/vf1Nvtv9yecv/nbf6506Xr5yXEcRh/PFqN19PeHrt3c48r+zu7fX72UO8bZ8+P1338R6nsHsj3xOCnWxGErAERI9eS83dpxUfpNF2taGi+s6uoD+zqtpW35y7fcc13X9E0N6u1Ndffe9uzPe89SY3SZ2m9NQ4ZwSOrJOQxtGgwBRW9DgYYjB3kgn9z1rbMCJAsapoTubpkbVNIiSEF5vjawYq/LXPkHOKFoMNzWKlkMSQtHZ4qdx7VjEHUFIxnKMdUwvI3TDYqQvAAa+brRkrJe1g2EcdqhD1+Rli+dvHehgw4Vc9UxPo6GXR8Pr3sMqpzsgXvDgORYWYxxNLFmkaxve61gwYT0mKIm9YRAwJ2QTUMMrgiCvMka3yzld+V1ChGMkmV3HQ1aUjP8Sa7eh5936s1kayppAmRNJZq0BptEQ00EMr2swpBsm07FOvlpLYqRI4phZO8R6vVYDQiLRMLN7Sbyiw/OrAt9IGmwqF+9zbBYz+cgkARNmzU1XTDjXCVDXFTfsIwhDTWaX4Ijn6qoXIlLEPSZh2wmL0DbXCcU7pu8Zf9yZxKzstyhLzOoCY7JGXHtYXl5gOEyY8Q5iM9KsXy+XqMoC0+kerwnS1Qrtco2v1zm++wev49lf+TZ6ovPmn7yPP/7r/8a50lhFj9FwN1BabEyoBrp1p8a7mtDiZXrVdzhnjrxssEsBlzZOhjHcpu1lcC9uFvdKfLl+iIZ7TOm6dV4QYQeTZER+rLl7F8NkgNPTU6JrSFOZxvZZWeGXf2cPz7z7MpxhBveoxcvfex2/9RYDKadLvQDCCdfpCo8uztWjAUOl2SYXDUBMvhXGu75aM2xoKUHMOW9ByhuGvsahSYjkqu4rZkMoMeTRoIjFY38Uk2cdHIynSGfXcMsIt28cYrGaE/EhkiRWZHJuaB8enh81OM6usfjz76MnVSrBhTVeHK9wc9ng04DxTyCMa6QKYb3ZaN4ULDqCYBInYLAgciskhyFqGrxhYfDJy4Zc7IZBzfALzDAOeIPX1qQsX1zHzBWEU8bswOtRc7Y4GuHe5WPEi1gXqbsSDx5c4PlogLtc8IZX42dffZ4InXGCBC4To+d8PQvMKJnit1+7xF/8+AILlCiPBggOJ1odAzJSFE5RtzYBHcmDlmHBeBeq2LAqLtIaqYRGW7SGXjBV1aJivElolASmJWt0RMQXSgl9bFpWIK/CfF0Qx1b59MBZ4Ve5+68/k+Hub34Nxz/3SwhvvgAz4WbJPlB+pcFVjm6V4hdmM7xy/xP85999gH/+20v8w9rH7HiPRm+I8EypMowiJl6AnGW5IAlIfLdaOKDUVpVN2BAEGkzaqLrI29KaGMXExXjga6IY02MQsOwmRySTUt3z9jLHe+/6uP17L8B95tfhjJ7lYikRyp9UOg2JhBRIl3q3PBy9FOHtNwb4xq/9EG//4Wf43kPiLdKETOEIhdHQrklVr8S+q9/V5N+M6LZEndTgFHxvvnIU4qot3X5LJSFR9ZmANeu+Lykr3F4VGO5NKGwyosE4YxLs/+Ip/Ls/w01xd9Ujaok1TfS+dInR9AhqezFMPOZAcnwXN168Bj5Zw4wj+CT7huKn7gpE1CY++a0URhGO9liw/E7nGo0HzrDkPeKC6aFmoKNEz4RhFGi5Dsgahosbol8xVPaGI1xdz+Cz8rmjPXIgxUuz4q2MOYYNeptQussnBjf21ZUiIq9jOJMYQy9DOI41HEzs03MjpdWSNFeVPunT18q12hS4XGz4llKBAJqNGEJetBrCIKYcnCSBuiXgZy+UBGJ16kQ2cg6ikHREPx4AGVEzCZchytnGGimDnGYrhLqtwVujbUWAoQp8Zo8cfHMPNBXD8ZDup5IjhZUMURkUhjEu5ymLBhPRLZCvN80eedTIwDVdrOJHDZfMDTGkFo1YJOLQo9xsNBlKcueQcnL8OEUQU39seN+IqLqxVkuLqIsn0kw30FrDOwmNSj+HDC/MHuCaVbSqlvAezxl+zBkIuqUmdhBmWl3TdUfNzFBNIrfNaiY2OZU0porPI20ERNijNwY0JCGxb9Ybde7R4b7iVVPPHlAwmSCikRmciMgahkRxbY1znP9n8DZE+i3SNCa+McYBM3/mlIgpqhxWDhFKxjGqsT1y9WaT056IwJTwCdiiNO7QGTM84yHlW7tVT3aZqqqwWJDGKchjJkZEXpaFNjQ2ZqEYnsSQvGW54mCJYe6wuOIEzZeM3bFFvxNs9j96Mj6JcMYi9W90f9BY3q3bSn0TkJEoNWDrC8eXVvG53Pg+MTIXFxcgJTNOXFVpLlEeDCNMGBKDQaJyMKWRNUNCdjRlMYifY9ySOZQoK2EHfs4X1u39TuBuDVQh4FgL5BLpOjS4NfRxY7KvhSjLc1a4hLxM3m5Ljedu2yhIR1KTDOKOwmlFloh4gx9Ysd7SgIJFpMwpKckQy+VGNyDtUkc6W6YpnmG8T+4cbA3mJqjgGEB8JdKtbYWsYtkh6tlL4mx7OXT7/q2EmmGGs9MphocjEddo4kA9ILeLlDi/WnCZSmWqiWK+p8EZK93ThwOuzRs8VrnOV0+vmVCe26n2FYEiYBo2pnubNQ6/Rt+wSlENcYE5DeTnzbUNCQ2vLcTayqiotsZSoYHVDG2Ik7tDHPyoQsyQDGloKb2e0VZUG4OCqAsJDMcBCmmbSImrTSnFjTWbasoiadscms4BtjsWqgvYTGYsGiHdeRo4GB8KskSYpRcdGYIVCekFtMXtWjzRhLb32iIr+oBjJVmbEKcvsRN+/wqfT8hIg0QTM2Z5FgXXcp5QOYUFRJCiBglpz4YxbRIKcJ+GdXSJQK/td21EMKsAaYhavpwzMXxMsw7HT1E51Wz9m0JZgsKWBrc2RBz3C2Q13zqLei2e4OYaUlZLo9sE+6c+niJfl4cH7LSvCYh003PpDBVh2XdNAxuNZcpMRlvMvKJaYzXztrVf3cFJOHjKnTqkKWmhhty5iPiTRwucfoVTVozbNrOGaDHjqxdb9zvel5hih3hjDRePSJwzOUmauHMnxH+tVzg9mRJZHyvmyDrNyUa5Mk9fdrhm8UgZCi55ekK9bOTH4rog/xltdwZsi472B9TDA612rS7KhpLqKU7XOL1Nc2pBq7bGsY1RA4PRlou+bLCU+tayRyebq+zmpE1ivtx8lvXjX2asYhUBifWgZZqMcTQ9wErONtICUolzetGjt1aZdM1UUw9ZwfptZod0vTg221A5cZIxq1FN5gjmKzx30rIlYi/SdjYukxvA4Ss2XiVMTCTt7tbo3hopYdCQ+gomJ6UkWNnAdt1tcjz3rI+vfuDgAXOmpMbuqUWigGWaXliulvQ2+8GIQDIexL6DvSEFE2HGZKRpLQkncVyxfkeRpwK6eHyFg/kGryU53vomUU56a9TwFrD3gjV6Fwrs2b5Aubdh0Erc0iMSRiWpr6Th2WOyyiPcPCnx3Td7/OWHOe6RSSqOXbND39CT5YaFhElalo1qjCGl6qhnSEhn0SZVK5VR6YRVTs4FEnEx6/ox3fLOsMS3vgMc3yDtCDVF5GEzsEb0D5iczHIjMRxa5DX5ehu/EgZEFPXGGi8hJp6IDxBghtffaIlXgz97/xL/RE3iB1ZLiPiRsCgpPeX8LY7DrphvXFOKijeBEa6VCtMYacfJwQ7jlYu9E9X49m/EONynbuhci54kEV2qC4d7dgPJCeN4bJNPWaK1BkollDDIryyzyKXfrXUe33R46TWD3+VG07/K8O/RHiaUnSmrmshLv+/03GJ2vXZiFhEjhxYmCjVNpNV2t4Xf8P3LDIm3vxNTB1NHiTKj1HSo0jB+mmH0HKmEIXFw14bG6CmLsh6I1ZYNduEgm6tpQLm0Iqm4ZGWiZ1Y/BZb3yTpXePGtFu897nH/hxv4k9g2E8wnaUQ72vLwnAXLZeF4MK+oxHKN4d1ZGt/Ap3Z4muI5+o8cywXbJLJDcOyp5tAYdr0t1ZJHJPOFh0WsCLIauzuDC008h6wi5x9yjOCIF9hyqRT1RVdfwMnZ1L5a46UfnOMDouuzqgorSIsv3i8Y248WRLijNPLECO7Cp2qKybd9X+AO4+Y06JSZKiqqKmURIXvWS7ZP1KpNcImKwV77G9TBPeyxYk3Gcs4EW90E5ZrFIG9xvXSpuZntpDLfpfh3uLCTc+gGEVaIRWZSBhyceXhlv8f3rwpW15ZJXzKnam35B0FfVJ4bGzmjjUK39Bwnqhng82WGiEAdMRwc5s9HrLj5koqNyKQswWvKyZwVrqo/1onkGKtj7/Xzr+Z443WG1yFZY3Rmky39DKvPZvjRP3r48f9E2qdJ+Tds70Pq7gEb3fHYw4R6fn/SkLYK7DMlprMek6MRcynGnLq4WdLTMZUjCcKsScxF4+nxbEnV4/C6cXaCwU8f4YJo5XMpkbs+rWaNL7TOP/lzbbErFg7dNsXtOy/D3HpbEy2///d48BPG7irDHc/qXZ2m3F4rZTdIc/VIDlMGrs6XsFCMSLdypjnfWMUY+q67EYLIuAMayZCl+ODOY1Y8h/H3g0mChsXjjIzFrggjvg5ie+SwPe79oqkQOyhOHny4wWz2E0RfnTJJ58jufYri8wpPjaWP+5Kux3aOTsKN+ZfZa7Xs8EnFxvMwRDdbkNJof+9pPsSm82vKWTbEPatK6qrgkJpA18smHtB9H7Ken3Ci20TjbNbhjHE2DXpqC6IgdCysRi/QuwglDRYFsvRjNPcfMu8opBiDXm+PbkWyigHSsrFwMvtpJF8vGGYXbI0uqRUufDr6ICHSkQr4qmfh4o1FzaT1fLeTw0KpTGu2IT6hk46jZ2IM2Rb1zOybSYLjyZhls8U9QvMRVZmI+JPJlHHvY3k5R5XVVmtwtxF38NTtm0hYANbLBc4vlmwkU0tRNMJQqwiRtCIB2O9ItZKzD884WgOm5OKKr9dXl6pRfBYPaUDlUEUOClN2O0aOf3zXk0Ie2pMfsgU3cfN0n7W8Qs9MbyVM2BAuFysWlJZqTp4WMXtF6iZydEpD+H5Bvz789D61tJRZKUSNKr1QkEsioprj+PiQKFfICbPo34IGemwaTMDKxoa3ZqWVjrxnzMhxq30aJVRoTzpNkgRyKmMksfKq0y/L8wVmq42egpeM7VYeFbiZuli4+mq1omb3bKvG25u05UY9ouxpkROFV3etPROjqBHP+RmpjMnz2ccP9FhXAt/zMk0GYRp5PCEMIoeIEQWPnIzKo7Kslfgu8PH9xzg7mJAl8opcWXiSC027bW3YNp3Xnbb9xvXsAxNne47L/0qtQo7Ge9dIOFB/RPZAXA7x5GzDp3ulOegIgBzI+PrMhLzd+IqwuzsOkFdj+0Z56NNz41IwGn0ARF5q9HEBFnP2c5zbzFa8edrsju8gx66CoujjjojXNNTzvO2Dlc5WQjnZpOs8I89Eet3EJiu3SSutDRdxHL2vIA1UIqkFGLl3+whp9xhNHgTZBrjQTmP3xMoaax8+yl8uSLMqO99957n+5JCKP6J2otqPaODTz95StSTopmSMY9Z2+V0W/PycdCUihIjJQV4iMUotIgctPWlnfr1SlOXUczQaUXz3/b0HV8vbh4OpyNY0zWhIrWiPmYjCHgsmshye1KxUk4Qsxc3VDCd5IKRHAPTm+flMTzENO9bVoqizcrlWYDu2/B/860c0OOjFjQu6R87dOsZUZKSHJpxyrMVLOoSYixZcYEhuKzjBKi21AxdZzA33ozhwySjeB/9bXglytZyhik5rWkfGCYq5nAVT48hjA8FTTjPLspW1mGwO9qdDjJO4358m4f8JMAA2X+jJFx/C2QAAAABJRU5ErkJggg==",
        pinMini:
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtpJREFUeNqsU0trE1EYPTOT9+TRpE1qYmlibAQ1BcGCVKStC0EQQdzoTvoDLIhLdwrdKC5c6Mqdr7pRqNCFILgQRVSsQhdqK5WURpvapOk0mcxMxnNtYlGpqdALh+/O/e537vkeI9m2ja1aMrZwOZqbcUlCQHHtjybjo/Ln2b4VG/m3wOgccHsn/QHiGHGBuNyKzBHfnu0+M/zKejoGQwG6yojU87j1DZin/Cf1/0mzs3/wulubgTb9EXYUKMWAoAfoAe5S1fkasEPaLJky8bB/dfwOnIyGRTQiDSDmBK4QM0zjXGkzZFpl1VBXAZsSbJOqFoHlKlCgL0/wGJ+Aq32qesIfi/2b7DlwM88CRRgRmSZJDpjkORWBx5glJoh+07xxMpmU5ERi4wa4gREG750q4jDrj3JDTfM1sRdNKOr6tmgud9DV1vbMW6mgWq2iQvubskFm1wvcT3HvaYxCGyFGWl977KdKQbii6/uMQsHn9Xp9mUxGymazcDqd68p610yVpUKGeEd8EIENYvGA3t4ONRisv5+bUyxFObIELFiWNZtOpwsDAwP6L2VHibPAAz+tEL2b2EN0cZhjRM3hwIGhIczE469f1GoLzG8X3QLZXC6X0jQtIDX/TUlam4VrwCmS3psSMkWNZBnz9CU9HiQDgfLxfP7SpLhr2xJTW1FVtRQOh78Gg8Gc48+OjABjIrVh4KKLL+v1OtKSVPuiaS9Pa9qjSVFG247wylKdPsMwJNM03bIsh/5S1lzdgOsQs2dnM5wz8zGDeRxt9EVjcFVRlIrP5yuHQqFiR0fH4oZk65Mod9LZRzU9vCzznkUim6gxTY1paiRbjkQiRUern9epKIscgTe6rheopJPwkUgmkelyuYQyze/3l4VtScZ6mFQzn0gkvnNAw/xsZ7Dq8Xhkklkk0amuKhS2JBNlKJVKoDo9lUrlaQucLQ8L7yaZ4na7bRLVaY0fAgwAsOEOz+nRA24AAAAASUVORK5CYII=",
        pinItems:
          "data:image/png;base64,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",
        duelMotBar:
          "data:image/png;base64,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",
      };

      // Initialize language preferences
      if (localStorage.getItem("TWDB_preferences")) {
        var storage = JSON.parse(localStorage.getItem("TWDB_preferences"));
        for (var key in TWDB.script.preferences) {
          if (storage[key] === undefined) {
            storage[key] = TWDB.script.preferences[key];
          }
        }
        TWDB.script.preferences = storage;
      }

      // Determine language
      TWDB.script.preferences.lang = TWDB.script.preferences.lang == null
        ? (TWDB.script.langs[Game.locale] ? Game.locale : "el_GR")
        : TWDB.script.preferences.lang;

      // Load language file
      var langUrl = `${TWDB.script.langs.base_url + TWDB.script.langs[TWDB.script.preferences.lang]}?${TWDB.script.version * 100}`;
      if (TWDB.script.protocol === "https") {
        langUrl = `https://${langUrl}`;
      } else {
        langUrl = `http://${langUrl}`;
      }

      var triggerLangLoaded = function() {
        if (TWDB.Eventer && typeof TWDB.Eventer.trigger === "function") {
          TWDB.Eventer.trigger("TWDBLangLoaded");
        }
      };

      $.getJSON(langUrl, function(translation) {
        TWDB.lang = translation;
        triggerLangLoaded();
      }).fail(function() {
        // Fallback: try to load from local file structure
        var localLangUrl = `${TWDB.script.folder_url}langs/${TWDB.script.langs[TWDB.script.preferences.lang]}`;
        if (TWDB.script.protocol === "https") {
          localLangUrl = `https://${localLangUrl}`;
        } else {
          localLangUrl = `http://${localLangUrl}`;
        }
        $.getJSON(`${localLangUrl}?${TWDB.script.version * 100}`, function(translation) {
          TWDB.lang = translation;
          triggerLangLoaded();
        }).fail(function() {
          // Final fallback: use empty object
          TWDB.lang = {};
          triggerLangLoaded();
        });
      });
      TWDB.Util = (function (e) {
        var t = {};
        var n = function (t, n) {
          var r = "twdb_css";
          if (typeof n !== "undefined" && typeof n === "string") {
            r += `_${n.replace(/\W+/g, "")}`;
          }
          if (e(`head style#${r}`).append(`\n${t}`).length === 1) {
            return;
          } else {
            e("head").append(e(`<style type="text/css" id="${r}">`).text(t));
          }
        };
        t.addCss = function (e, t) {
          return n(e, t);
        };
        var s = function () {
          var e = [],
            t,
            r = `twdb_${Character.playerId}_`,
            i;
          if (localStorage.getItem(`${r}embackup`) === true) {
            return;
          }
          for (i = 0; i < localStorage.length; i++) {
            t = localStorage.key(i);
            if (
              t.search(r) === 0 &&
              t.search(/(marketreminder|notes|settings|statistic)$/i) !== -1
            ) {
              e.push({
                key: t,
                newkey: `backup_${t}`,
                val: localStorage.getItem(t),
              });
            }
          }
          for (i = 0; i < e.length; i++) {
            localStorage.setItem(e[i].newkey, e[i].val);
            console.log(`key ${e[i].key.substr(r.length)} saved.`);
          }
          localStorage.setItem(`${r}embackup`, true);
        };
        t.backupData = function () {
          return s();
        };
        return t;
      })(jQuery);
      TWDB.ClothCalc = {
        uid: "twdb_clothcalc",
        calcdata: {
          skills: {},
          items: {},
          jobs: {},
          custom: {},
          animals: [],
          used: {},
          loaded: false,
        },
        ready: false,
        loaded: false,
        up2date: true,
        gui: { job: {}, custom: {} },
        bidsLoading: false,
        bids: {},
        getBids: function () {
          if (this.bidsLoading) return;
          this.bidsLoading = true;
          var e = this;
          Ajax.remoteCall("building_market", "fetch_bids", {}, function (t) {
            if (t.error)
              return new UserMessage(t.msg, UserMessage.TYPE_ERROR).show();
            var n = t.msg.search_result;
            for (var r = 0; r < n.length; r++) {
              e.bids[n[r].item_id] = 1;
            }
            e.bidsLoading = false;
          });
        },
        recLoading: false,
        recipes: {},
        getLearned: function () {
          if (this.recLoading) return;
          this.recLoading = true;
          var e = this;
          Ajax.remoteCall("crafting", "", {}, function (t) {
            var n = t.recipes_content;
            if (n) for (var r = 0; r < n.length; r++) e.recipes[n[r].item_id] = 1;
            e.recLoading = false;
          });
        },
        init: function () {
          if (this.ready) {
            return;
          }
          var e = this;
          this.getBids();
          this.getLearned();
          TWDB.Eventer.set("TWDBdataLoaded", function () {
            e.handleTWDBData();
          });
          this.gui.copyright = jQuery(`<div style="position:absolute;bottom:0px;left:0px;height:15px;display:block;font-size:10px;color:#000000;">.:powered by TW-DB Team:. | <a href="https://tw-db.info" style="font-weight:normal;color:#000000;" target="_blank">.:TW-DB.info:.</a> | 0.${TWDB.script.version} | BB</div>`);
          this.gui.cache = jQuery('<div style="position:absolute;top:10px;right:8px;width:20px;height:20px;cursor:pointer;" />');
          if (!TWDB.Updater.wasUpdated()) {
            var t = TWDB.Cache.load("calcdata");
            if (typeof t === "object" && t !== null && isDefined(t.loaded)) {
              this.calcdata = t;
            }
          }
        },
        getLPForJob: function (e) {
          if (
            !isDefined(this.calcdata.jobs[e]) ||
            !isDefined(this.calcdata.jobs[e].laborpoints)
          ) {
            return null;
          }
          return this.calcdata.jobs[e].laborpoints;
        },
        isLoaded: function () {
          if (isDefined(this.calcdata.loaded)) {
            return this.calcdata.loaded;
          }
          return false;
        },
      };
      (function ($) {
        var _base = TWDB;
        var w = window;
        var Images = _base.images;
        var Script = _base.script;
        var ClothCalc = _base.ClothCalc;
        var _Language = _base.lang;
        var Debugger = (function (_e) {
          var t = {};
          return t;
        })($);
        _base.Debugger = Debugger;
        var Error = (function (e) {
          var t = {};
          var n = "twdb_error";
          var r = [];
          var i = true;
          t.report = function (e, t) {
            if (!isDefined(e.message)) {
              r.push({ msg: "failed to add error", e: t });
            } else {
              r.push({
                msg:
                  t +
                  " " +
                  ((e.stack && (e.stack.match(/:\d+:\d+/) || [])[0]) || ""),
                e: e.message,
              });
            }
            if (i) {
              i = false;
              WestUi.NotiBar.add(
                new OnGoingPermanentEntry(
                  function () {
                    s();
                  },
                  TWDB.lang.error_occurred,
                  "tip"
                )
              );
            }
          };
          var s = function () {
            var t = new west.gui.Scrollpane();
            e(t.getMainDiv()).css("height", "370px");
            e(t.getMainDiv())
              .find(".tw2gui_scrollpane_clipper_contentpane")
              .addClass("selectable");
            var i = '<table border="1" cellpadding="3" cellspacing="1">';
            for (var s = r.length - 1; s >= 0; s--) {
              i +=
                "<tr><td>" +
                s +
                "</td><td>" +
                r[s].msg +
                "</td><td>" +
                r[s].e +
                "</td></tr>";
            }
            i += "</table>";
            t.appendContent(i);
            var o = wman
              .open(n, null, "noreload")
              .setMiniTitle(TWDB.lang.errorlog_minititle)
              .setTitle(TWDB.lang.errorlog_title)
              .appendToContentPane(t.getMainDiv());
          };
          return t;
        })($);
        _base.Error = Error;
        Debugger.Error = Error;
        var Loader = (function (e) {
          var t = {};
          var n = [];
          var r = {};
          var i = {};
          var s;
          var o = false;
          var u = false;
          var a = false;
          var f = 0;
          t.add = function (e, t, r, i) {
            var s = { ready: false };
            n.push({ key: e, txt: t, call: r, dep: i || {}, ready: s, count: 0 });
            return s;
          };
          t.init = function () {
            if (s) {
              return;
            }
            s = w.setInterval(function () {
              l();
            }, 500);
          };
          var l = function () {
            if (u) {
              return;
            }
            u = true;
            if (o === false) {
              if (!c()) {
                u = false;
                return;
              }
              TWDB.Cache.init();
              r.Cache = true;
              try {
                Updater.query();
                h();
              } catch (e) {
                Error.report(e, "");
                new UserMessage(
                  TWDB.lang.api_registration_failed,
                  UserMessage.TYPE_FATAL
                ).show();
                return d();
              }
              return p();
            }
            if (isDefined(i[o.key])) {
              return p();
            }
            if (o.ready.ready) {
              r[o.key] = true;
              a = false;
              return p();
            }
            u = false;
          };
          var c = function () {
            if (
              !isDefined(w.jQuery) ||
              !isDefined(w.TheWestApi) ||
              !isDefined(w.TheWestApi.version) ||
              w.ItemManager.get(2e3) === undefined ||
              !isDefined(w.Character) ||
              w.Character.playerId === 0 ||
              !w.Bag.loaded
            ) {
              return false;
            } else {
              return true;
            }
          };
          const h = () => {
            const scriptInfo = {
              id: "twdb_clothcalc",
              name: "TW-DB.info - Cloth Calc - BB",
              version: "2.04",
              gameVersion: String(Script.game_version),
              author: "[tw-db.info] Team - BB",
              website: "https://tw-db.info",
            };
            const paypalForm = `
              <br><br>
              <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                <input name="cmd" value="_s-xclick" type="hidden">
                <input name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----" type="hidden">
                <input type="image" src="https://www.paypalobjects.com/en_US/DE/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="${TWDB.lang.paypal_alt}">
                <img width="1" border="0" height="1" src="https://www.paypal.com/en_GB/i/scr/pixel.gif" alt="">
              </form>
              <br>
            `;
            // Register the script using object destructuring for cleaner arguments
            const registeredScript = w.TheWestApi.register(
              scriptInfo.id,
              scriptInfo.name,
              scriptInfo.version,
              scriptInfo.gameVersion,
              scriptInfo.author,
              scriptInfo.website,
            );
            // Create the GUI element using a template literal for better readability
            const guiContent = e(`
              <div style="font-family: 'comic sans ms'; font-size: 13pt; padding-top: 10px; text-align: center;">
                ${TWDB.lang.script_description}
                ${paypalForm}
                ${TWDB.lang.thank_you}
              </div>
            `);
            registeredScript.setGui(guiContent);
            if (registeredScript.isOutdated()) {
              w.TheWestApi.displayOutdated();
            }
          };
          var p = function () {
            if (n.length === 0) {
              return d();
            }
            o = n.shift();
            o.count++;
            if (o.count > f) {
              if (a) {
                Error.report(
                  { message: "deadlock detected" },
                  `failed to load module: ${o.key}`
                );
                i[o.key] = true;
                return p();
              }
              f++;
              a = true;
            }
            for (var e in o.dep) {
              if (!isDefined(r[e])) {
                if (TWDB.script.isDev()) {
                  console.log(o.key, "needs ", e);
                }
                n.push(o);
                return p();
              }
            }
            try {
              o.call();
            } catch (t) {
              Error.report(t, `failed to load module: ${o.key}`);
              i[o.key] = true;
              return p();
            }
            u = false;
            l();
          };
          var d = function () {
            w.clearInterval(s);
            w.setTimeout(function () {
              t = null;
            }, 1e3);
          };
          t.stack = n;
          t.loaded = r;
          t.failed = i;
          t.current = o;
          return t;
        })($);
        Debugger.Loader = Loader;
        var Cache = (function (e) {
          var t = {};
          var n = {};
          var r = "";
          var i = {};
          var s = function (e) {
            if (!i[e]) {
              i[e] = true;
              t.save("keys", i);
            }
          };
          var o = function () {
            if (n.ready) {
              return;
            }
            r = `twdb_${Character.playerId}_`;
            i = t.load("keys");
            if (!i) {
              i = { keys: true };
            }
            n.ready = true;
          };
          t.load = function (e) {
            s(e);
            try {
              return JSON.parse(decodeURIComponent(localStorage.getItem(r + e)));
            } catch (n) {
              Error.report(n, `load ${e} from cache`);
              t.save(e, null);
              return null;
            }
          };
          t.save = function (e, n) {
            s(e);
            try {
              localStorage.setItem(r + e, encodeURIComponent(JSON.stringify(n)));
              return true;
            } catch (i) {
              Error.report(i, `save ${e} to cache`);
              t.save(e, null);
              return false;
            }
          };
          t.reset = function (n, s) {
            try {
              if (n) {
                if (isDefined(s)) {
                  localStorage.removeItem(s);
                } else {
                  for (var o in i) {
                    localStorage.removeItem(r + o);
                  }
                }
                new UserMessage(
                  TWDB.lang.cache_reset_complete,
                  UserMessage.TYPE_SUCCESS
                ).show();
                location.href = location.href.replace(location.hash || "#", "");
              } else {
                var u = e(`<div><h2>      Cache  tw-db UserScript;</h2></div>`);
                var a = new west.gui.Textfield("twdb_cache_key")
                  .setSize(40)
                  .setLabel(TWDB.lang.cache_reset_key_label);
                u.append(a.getMainDiv());
                var f = new west.gui.Checkbox(TWDB.lang.cache_reset_all_keys).setSelected(true);
                f.setCallback(function (e) {
                  if (e) {
                    a.setValue("");
                  }
                });
                e(a.getMainDiv()).find("span").css("font-size", "12px");
                e(a.getMainDiv())
                  .find("input")
                  .keyup(function () {
                    f.setSelected(false);
                  });
                u.append(
                  e('<div style="display:block;" />').append(f.getMainDiv())
                );
                new west.gui.Dialog(
                  TWDB.lang.cache_reset_title,
                  u,
                  west.gui.Dialog.SYS_QUESTION
                )
                  .addButton(TWDB.lang.ok, function () {
                    if (f.isSelected()) {
                      t.reset(true);
                    } else {
                      t.reset(true, a.getValue());
                    }
                  })
                  .addButton(TWDB.lang.cancel)
                  .show();
              }
            } catch (l) {
              Error.report(l, "cache reset");
            }
          };
          t.init = o;
          return t;
        })($);
        _base.Cache = Cache;
        Debugger.Cache = Cache;
        var Worker = (function (_e) {
          var t = {};
          var n = [];
          var r = false;
          var i = false;
          t.add = function (e) {
            n.push(e);
            if (r) {
              return;
            }
            r = w.setInterval(function () {
              s();
            }, 100);
          };
          var s = function () {
            if (i) {
              return;
            }
            i = true;
            var e = n.shift();
            try {
              e();
            } catch (t) {
              Error.report(t, "Worker");
            }
            if (n.length === 0) {
              w.clearInterval(r);
              r = false;
            }
            i = false;
          };
          return t;
        })($);
        Debugger.Worker = Worker;
        var Jobs = (function (e) {
          var t = {};
          var n = {};
          var r = [];
          var i = {};
          var s = {};
          var o = [1828e3, 1829e3, 183e4, 2e6, 2003e3, 2006e3, 2009e3];
          var u;
          var a = {};
          var f = function () {
            if (n.ready) {
              return;
            }
            var t = 0;
            var f = 0;
            var c = {};
            while (true) {
              t++;
              var h = w.JobList.getJobById(t);
              if (!h) {
                f++;
                if (f > 5) {
                  break;
                }
                continue;
              }
              f = 0;
              r.push(h.id);
              i[h.name.toLowerCase()] = h.id;
              s[h.shortname.toLowerCase()] = h.id;
              for (var p in h.yields) {
                if (Number.isNaN(p) || c[p]) {
                  continue;
                }
                c[p] = true;
                o.push(Number(p));
              }
            }
            u = (function (_e) {
              var t = {
                description: "",
                duration: 1800,
                energy: 6,
                groupid: null,
                id: 255,
                malus: 0,
                name: "",
                randomyields: [],
                shortname: "construction",
                skills: { build: 3, repair: 1, leadership: 1 },
                yields: {},
                calcJobPoints: function () {
                  return 0;
                },
                canDo: function () {
                  return true;
                },
              };
              return t;
            })(e);
            r.push(255);
            i[u.name.toLowerCase()] = 255;
            s[u.shortname.toLowerCase()] = 255;
            var d = function (e, t) {
              var n = e === 255 ? u : w.JobList.getJobById(e);
              var r = t === 255 ? u : w.JobList.getJobById(t);
              return n.name > r.name;
            };
            r.sort(d);
            o.sort();
            a = Cache.load("jobdata");
            if (a === null || typeof a !== "object") {
              a = {};
            }
            Eventer.set("TWDBdataLoaded", function () {
              l();
            });
            n.ready = true;
          };
          n = Loader.add("Jobs", "tw-db Jobsystem", f, { Cache: true });
          var l = function () {
            a = {};
            Cache.save("jobdata", a);
          };
          t.getJobByName = function (n) {
            n = e.trim(n).toLowerCase();
            if (!isDefined(i[n])) {
              return null;
            }
            return t.getJobById(i[n]);
          };
          t.getJobByShortname = function (n) {
            n = e.trim(n).toLowerCase();
            if (!isDefined(s[n])) {
              return null;
            }
            return t.getJobById(s[n]);
          };
          t.getJobById = function (t) {
            var n;
            if (t === 255) {
              n = u;
            } else {
              n = w.JobList.getJobById(t);
              if (!n) {
                return n;
              }
            }
            var r = e.extend(true, {}, n);
            var i = 1;
            if (w.Character.charClass === "adventurer") {
              if (w.Premium.hasBonus("character")) {
                i *= 1.2;
              } else {
                i *= 1.1;
              }
            }
            if (w.Premium.hasBonus("money")) {
              i *= 1.5;
            }
            for (var s = 0; s < r.randomyields.length; s++) {
              r.randomyields[s] = round(r.randomyields[s] * i, 2);
            }
            if (typeof r.yields.length === "undefined") {
              for (var o in r.yields) {
                r.yields[o].prop = round(r.yields[o].prop * i, 2);
              }
            }
            return r;
          };
          t.openJob = function (e, t, n) {
            w.JobWindow.open(e, t, n);
          };
          t.startJob = function (e, t, n, r) {
            w.JobWindow.startJob(e, t, n, Number(r) || 3600);
          };
          t.getAllJobs = function () {
            return r;
          };
          t.isProduct = function (t) {
            return e.inArray(Number(t), o);
          };
          t.getPopup = function (e, n) {
            var r = '<div style="min-width:60px;text-align:center" >';
            var i = t.getJobById(e);
            if (isDefined(i)) {
              r +=
                '<span style="font-weight:bold;display:block;">' +
                i.name +
                "</span>" +
                '<div class="job" style="position:relative;left:50%;margin:10px -25px;">' +
                "<div " +
                (!isDefined(n) ? "" : `class="featured ${n}"`) +
                "></div>" +
                '<img src="' +
                Game.cdnURL +
                "/images/jobs/" +
                i.shortname +
                '.png" class="job_icon" >' +
                "</div>";
            }
            r += "</div>";
            return r;
          };
          return t;
        })($);
        _base.Jobs = Jobs;
        Debugger.Jobs = Jobs;
        var Window = (function (e) {
          var t = {};
          var n = "twdb_window";
          var r = null;
          var i = null;
          var s = {};
          var o = {};
          var u = function () {
            if (o.ready) {
              return;
            }
            var t = e('<div title="TW-DB.info | BB" class="menulink" />')
              .css("background-image", `url(${Images.button})`)
              .on("mouseenter", function () {
                e(this).css("background-position", "-25px 0px");
              })
              .on("mouseleave", function () {
                e(this).css("background-position", "0px 0px");
              })
              .click(function () {
                a();
              });
            e("#ui_menubar").append(
              e(
                '<div class="ui_menucontainer" id="TWDB_ClothCalc_menubuttons" />'
              )
                .append(t)
                .append('<div class="menucontainer_bottom" />')
            );
            ready = true;
            o.ready = true;
          };
          o = Loader.add("Window", "tw-db Scriptwindow", u);
          t.open = function (e) {
            a(e);
          };
          var a = function (t) {
            r = wman
              .open(n, null)
              .setMiniTitle("TW-DB.info")
              .setTitle("TW-DB.info");
            r.appendToContentPane(
              e(
                '<div style="width:100%;text-align:center;position:absolute;bottom:0px;left:0px;height:15px;display:block;font-size:12px;color:#000000;">.:powered by TW-DB Team:. | <a href="https://tw-db.info" style="font-weight:normal;color:#000000;" target="_blank">.:TW-DB.info:.</a> | ' +
                "0." +
                Script.version +
                " | BB</div>"
              )
            );
            var o;
            for (var u in s) {
              if (!isDefined(o)) {
                o = u;
              }
              if (t === u) {
                o = u;
              }
              r.addTab(s[u].name, u, function (_e, t) {
                f(t);
              });
              s[u].gui.children().remove();
              r.appendToContentPane(s[u].gui);
            }
            if (isDefined(o)) {
              i = s[o].gui;
              f(o);
            }
          };
          var f = function (e) {
            i.hide();
            r.showLoader();
            r.activateTab(e);
            if (!isDefined(s[e])) {
              return;
            }
            if (s[e].title !== "") {
              r.setTitle(`TW-DB.info - ${s[e].title}`);
            } else {
              r.setTitle("");
            }
            i = s[e].gui;
            i.show();
            w.setTimeout(s[e].callback, 10);
          };
          t.addTab = function (t, n, r, i) {
            s[t] = { title: r, name: n, callback: i, gui: null };
            s[t].gui = e('<div style="margin-top:10px;"/>').hide();
            return s[t].gui;
          };
          t.hideLoader = function () {
            r.hideLoader();
          };
          return t;
        })($);
        Debugger.Window = Window;
        var Timer = (function (_e) {
          var t = {};
          var n = 0;
          var r = 0;
          var i = 0;
          t.getTimeout = function () {
            var e = Date.now();
            if (e - n < 2e3) {
              r++;
            } else {
              r = 0;
            }
            if (e - n < 6e4) {
              i++;
            } else {
              i = 0;
            }
            n = e;
            var t = 0;
            if (i > 50) {
              t = 6e4;
            }
            if (r < 20) {
              return t + 200;
            }
            return t + 2e3;
          };
          return t;
        })($);
        Debugger.Timer = Timer;
        var Eventer = (function (_e) {
          var t = {};
          var n = {};
          t.set = function (e, t, r) {
            if (!isDefined(n[e])) {
              n[e] = {};
            }
            if (!isDefined(r)) {
              var r = false;
            }
            var i = Number(Date.now());
            while (n[e][i]) i++;
            n[e][i] = { id: i, call: t, count: r };
            return i;
          };
          t.trigger = function (e) {
            if (!isDefined(n[e])) {
              return;
            }
            var t = 0;
            for (var r in n[e]) {
              if (!isDefined(n[e][r].id)) {
                continue;
              }
              w.setTimeout(n[e][r].call, 10);
              if (n[e][r].count === false) {
                t++;
                continue;
              }
              n[e][r].count--;
              if (n[e][r].count > 0) {
                t++;
              }
            }
            if (t === 0) {
              delete n[e];
            }
          };
          t.remove = function (e, t) {
            if (!isDefined(n[e]) || !isDefined(n[e][t])) {
              return false;
            }
            delete n[e][t];
          };
          return t;
        })($);
        _base.Eventer = Eventer;
        Debugger.Eventer = Eventer;
        var Settings = (function ($) {
          var settings = {}; // Stores the current settings
          var cache = {}; // Used to load and save settings
          var settingsWindowTab = null;
          var loaderModule = {};
          // Initializes the settings module
          var initialize = function () {
            if (loaderModule.ready) {
              return;
            }
            // Load settings from cache
            var loadedSettings = Cache.load("settings");
            if (typeof loadedSettings === "object" && loadedSettings !== null) {
              settings = loadedSettings;
            } else {
              settings = {};
            }
            // Add custom CSS rules
            TWDB.Util.addCss(`
              /* Existing CSS for progress bars and other elements */
              span.twdb_sett_capt { font-size: 115%; font-weight: bold; font-style: italic; display: inline-block; margin-top: 8px; text-shadow: 2px 1px 2px #643; }
              .build_progress > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 264px; }
              .rp_row_jobdata > .rp_jobdata_text > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 125px; }
              #character-shadow > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 95px; }
              #char_crafting_progress > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 144px; }
              .dal_status > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 294px; }
              .job_progress_jobstars > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 219px; }
              .cell.cell_2.progress > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill, .saloon_duel_moti > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 194px; }
              .flfi_progressbar > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 324px; }
              .dl_motivation > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 330px; }
              .duels-TWXDuelMap > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 766px; }
              .sheriff-TWXSheriff > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 581px; }
              .messages-analyser-job > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 692px; }
              .achievement-categories-total > .entry > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 204px; }
              .achievement-total-completed > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 623px; }
              #achievement_progress > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 450px; }
              .achievement-list > .achievement-list-scroll-wrapper > .tw2gui_scrollpane > .tw2gui_scrollpane_clipper > .tw2gui_scrollpane_clipper_contentpane > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 490px; }
              [class^="TWFBT_"] > .tw2gui_window_content_pane > .tw2gui_scrollpane > .tw2gui_scrollpane_clipper > .tw2gui_scrollpane_clipper_contentpane > .tw2gui_progressbar > .tw2gui_progressbar_progress > .tw2gui_progressbar_fill { max-width: 677px; }
              .TWDS_fbs_basestats_content table thead tr {position: sticky; top: 0px; background: wheat;}
              div.job_bestwearbutton {top: 5px !important;}
              .fort_battle_button_analyzer {left: 304px!important;}
              .fort_battle_buttons {left: 98px!important;}

              /* New CSS for the refactored settings layout */
              .settings-container {display: flex; flex-direction: column;
                gap: 2px; /* Spacing between setting rows/categories */}

              .settings-item {display: flex; align-items: center;
                gap: 4px; /* Spacing between checkbox and text */}

              .settings-category-header {font-size: 115%; font-weight: bold; font-style: italic; display: block; margin-top: 8px; text-shadow: 2px 1px 2px #643;}
              .settings-item-checkbox {flex-shrink: 0; width: 25px;}
              .settings-item-label {flex-grow: 1; cursor: pointer;}
              .settings-group-header {display: flex; align-items: center; cursor: pointer; margin-top: 8px; padding: 4px 0; border-radius: 3px;}
              .settings-group-header .icon {width: 16px; height: 16px; background-repeat: no-repeat; margin-left: 5px; margin-right: 5px;}
              .settings-group-header .butMinus {background-image: url(${Game.cdnURL}/images/scrollbar/scroll_down.png);}
              .settings-group-header .butPlus {background-image: url(${Game.cdnURL}/images/scrollbar/scroll_up.png);}
              .settings-group-content {padding-left: 30px; display: none; flex-direction: column; gap: 3px;}
              .beeper-sound-settings {display: flex; align-items: center; gap: 10px; padding: 4px 0;}
              .active_tab_id_settings > *, .active_tab_id_notes > * {user-select: none;}
            `);
            // Add the settings tab to the game window
            settingsWindowTab = Window.addTab("settings", "", "", renderSettingsTab);
            loaderModule.ready = true;
          };
          loaderModule = Loader.add("Settings", "tw-db Settingssystem", initialize, {
            Cache: true,
            Window: true,
          });
          // Renders the settings tab content
          var renderSettingsTab = function () {
            settingsWindowTab.children().remove();
            var scrollpane = new west.gui.Scrollpane();
            $(scrollpane.getMainDiv()).css("height", "294px").css("margin-bottom", "6px");
            settingsWindowTab.append(scrollpane.getMainDiv());
            // Define setting options using an array of objects
            const settingOptions = [
              { type: 'category', title: '' },
              { id: 'collector', text: '             ' },
              { id: 'collector_sell', text: '             ' },
              { id: 'pin_items', text: '     ' },
              { type: 'category', title: '' },
              { id: 'quest_cancel', text: '  ' },
              { id: 'instant_quest', text: '   ,     ' },
              { id: 'colored_quest', text: '        ' },
              { type: 'category', title: '' },
              { id: 'job_show_lp', text: '      ' },
              { type: 'category', title: ' ' },
              { id: 'task_list_points', text: '          &nbsp;-&nbsp;[ ]' },
              { type: 'category', title: '' },
              { id: 'import_westforts', text: '       site (westforts)' },
              { id: 'fort_recruitment', text: '    ' },
              { id: 'enhanced_fort_recruitment', text: '       ' },
              { id: 'declare_report', text: '         ' },
              { id: 'owned_forts_tab', text: '     ' },
              { id: 'cemetery_critical', text: '        ' },
              { id: 'total_dmg_battle', text: '           ' },
              { id: 'battle_info_round', text: ' ,  ,        ' },
              { type: 'category', title: '' },
              { id: 'building_progress', text: '       ' },
              { id: 'church_levels', text: '       ' },
              { id: 'improved_ch_tab', text: '       ' },
              { id: 'town_forum_blink', text: '            ' },
              { type: 'category', title: '' },
              { id: 'market_map', text: '   ' },
              { id: 'market_reminder', text: '       ' },
              { id: 'market_sell_dialog', text: '     ' },
              { id: 'market_report', text: '      ' },
              { id: 'improved_market', text: '     ' },
              { type: 'category', title: '' },
              { id: 'duel_motivation', text: '       &nbsp;-&nbsp;[    ]' },
              { id: 'direct_sleep', text: '           ' },
              { id: 'deposit', text: '          ' },
              { id: 'no_shop_sale', text: '    &nbsp;-&nbsp;[    ]' },
              { id: 'exp_bar', text: '     -     (Leones/Slygoxx/Belle Bernice)' },
              { id: 'mini_chat_gui', text: '        chat' },
              { id: 'custom_event_counter', text: '      ( , Hiro&#38;#39;s script)' },
              { id: 'no_scrollbars', text: '             ' },
              { id: 'close_all_wear', text: '           ' },
              { id: 'profile_duel_exp', text: '      ' },
              { id: 'regen_timers', text: '      ' },
              { id: 'button_church', text: '         ', group: '   ' },
              { id: 'button_market', text: '         ', group: '   ' },
              { type: 'category', title: ' ' },
              { id: 'show_bonus_jobs', text: '     ' },
              { id: 'show_coordinates', text: '      ' },
              { type: 'category', title: 'Premium ' },
              { id: 'no_work_queue_pa', text: '     Premium ' },
              { id: 'no_fetch_all_pa', text: ' Premium       ' },
              { id: 'no_wof_nuggets', text: '        (  )' },
              { type: 'category', title: '' },
              { id: 'chat', text: '    - [  chat]' },
              { id: 'notes', text: '     /' },
              { id: 'auto_deposit', text: '   ,       ' },
              { id: 'chest_analyser', text: '      /' },
              { id: 'weekly_crafting', text: '        ' },
              { id: 'telegram_bb_codes', text: '           ' },
              { id: 'enhanced_rankings', text: '       ' },
              { id: 'select_forum_text', text: '    ' },
              { id: 'pin_important_el', text: '   ,   script   ' },
              { id: 'night_mode', text: '       The-West' },
              { id: 'improved_whisper', text: '      chat  (    ,             )' },
            ];
            var settingsContentContainer = $("<div class='settings-container' />");
            var groupedSettingsContainers = {};
            settingOptions.forEach(option => {
              if (option.type === 'category') {
                settingsContentContainer.append(
                  $(`<div class='settings-category-header' />`).text(twiceHTMLUnescape(option.title))
                );
                return;
              }
              var isChecked = cache.get(option.id);
              // The original handler for toggling the setting in `cache`
              var checkboxHandler = (function (id) {
                return function () {
                  cache.set(id, !cache.get(id));
                };
              })(option.id);
              // Create the west.gui.Checkbox instance
              var checkboxGui = new west.gui.Checkbox(
                "",
                !isChecked ? "" : "tw2gui_checkbox_checked",
                checkboxHandler // This handler is what actually changes the setting in `settings`
              );
              const checkboxElement = checkboxGui.getMainDiv(); // This is the div for the checkbox visual
              // Create the overall settings item wrapper
              var settingItem = $("<div class='settings-item' />");
              // Append the checkbox GUI element
              settingItem.append(
                $('<div class="settings-item-checkbox" />').append(checkboxElement)
              );
              // Append the text label
              // Changed to div from label as west.gui.Checkbox has its own click
              const labelTextElement = $(`<div class="settings-item-label" />`).text(twiceHTMLUnescape(option.text));
              // Make ONLY the labelTextElement clickable to trigger the checkbox toggle
              labelTextElement.on('click', function() {
                checkboxGui.toggle(); // Explicitly tell the west.gui.Checkbox component to toggle
                // The `updateSettingHandler` passed to `west.gui.Checkbox` constructor will
                // also be called by `checkboxGui.toggle()` internally.
              });
              settingItem.append(labelTextElement);
              if (option.group) {
                if (!groupedSettingsContainers[option.group]) {
                  // Create the header for the group
                  const groupHeader = $(`
                    <div class="settings-group-header">
                      <span class="icon butMinus"></span>
                      <span>${twiceHTMLUnescape(option.group)}</span>
                    </div>
                  `);
                  const groupContent = $("<div class='settings-group-content' />");
                  groupHeader.click(function () {
                    groupContent.toggle();
                    $(this).find(".icon").toggleClass("butMinus").toggleClass("butPlus");
                  });
                  settingsContentContainer.append(groupHeader);
                  settingsContentContainer.append(groupContent);
                  groupedSettingsContainers[option.group] = groupContent;
                }
                groupedSettingsContainers[option.group].append(settingItem);
              } else {
                settingsContentContainer.append(settingItem);
              }
            });
            try {
              var whisperSoundContainer = $("<div class='beeper-sound-settings' />");
              var currentSoundSetting = cache.get("beeperSound", 9);
              var soundCombobox = new west.gui.Combobox("beeper_change_sound_settings")
                .addItem(0, " ")
                .addItem(1, "Bum")
                .addItem(2, "Chime")
                .addItem(3, "Coin")
                .addItem(4, "Coin 2")
                .addItem(5, "ICQ")
                .addItem(6, "QIP")
                .addItem(7, "Tinkle")
                .addItem(8, "Trumpet")
                .addItem(9, "VK")
                .addItem(10, " ...")
                .select(typeof currentSoundSetting === "string" ? 10 : currentSoundSetting)
                .addListener(function (value) {
                  var stored = cache.get("beeperSound", 9);
                  var nextValue = value;
                  if (value === 10 || value === "10") {
                    var exampleUrl = "https://example.com/sound.mp3";
                    var input = prompt(TWDB.lang.select_file, exampleUrl);
                    if (!input && input !== exampleUrl) {
                      soundCombobox.select(typeof stored === "string" ? 10 : stored);
                      return;
                    }
                    nextValue = input;
                  } else if (typeof value === "string" && /^-?\d+$/.test(value)) {
                    nextValue = parseInt(value, 10);
                  }
                  cache.set("beeperSound", nextValue);
                  if (window.ChatBeeper && typeof window.ChatBeeper.updateSound === "function") {
                    window.ChatBeeper.updateSound();
                  }
                });
              var listenButton = new west.gui.Button(TWDB.lang.listen, function () {
                if (window.ChatBeeper && typeof window.ChatBeeper.play === "function") {
                  window.ChatBeeper.play();
                }
              }).getMainDiv();
              whisperSoundContainer.append(soundCombobox.getMainDiv(), $(listenButton));
              // Append the container directly. Spacing handled by CSS margin-top.
              settingsContentContainer.append(whisperSoundContainer);
            } catch (e) {
              console.error("Error setting up whisper sound options:", e);
            }
            function showTextDialog(options) {
              const inputField = $('<input type="text" />').css({
                width: 'calc(100% - 10px)',
                maxWidth: '450px',
                padding: '5px',
                fontFamily: 'monospace',
                fontSize: '11px',
                boxSizing: 'border-box'
              }).val(options.initialText || '').attr('placeholder', (options.mode === 'import' ? '    ...' : ''));
              if (options.mode === 'export') {
                inputField.on('focus', function() {
                  this.select();
                });
              }
              const dialogContent = $('<div>').css({ maxWidth: '470px' }).append(
                (options.mode === 'export' ?
                  $('<p>').text(TWDB.lang.export_copy_failed) :
                  $('<p>').text(TWDB.lang.import_paste_instructions)
                ),
                inputField
              );
              const dialog = new west.gui.Dialog(options.title, dialogContent);
              if (options.mode === 'import') {
                dialog.addButton(TWDB.lang.import_settings, function () {
                  if (options.onConfirm) {
                    options.onConfirm(inputField.val());
                  }
                  this.close();
                });
              }
              dialog.addButton((options.mode === 'export' ? (TWDB.lang.close) : (TWDB.lang.cancel)), function () {
                this.close();
                if (options.mode === 'import') {
                  new UserMessage(TWDB.lang.import_cancelled, UserMessage.TYPE_INFO).show();
                }
              }).show();
            }
            var exportButton = new west.gui.Button(TWDB.lang.export_settings, function () {
              var settingsJson = JSON.stringify(settings, null, 2); // Pretty-print for readability
              console.log(
                `%c--- ${TWDB.lang.export_start} ---`,
                "color: green; font-weight: bold; font-size: 1.2em;"
              );
              console.log(settingsJson);
              console.log(
                `%c--- ${TWDB.lang.export_end} ---`,
                "color: green; font-weight: bold; font-size: 1.2em;"
              );
              if (navigator.clipboard?.writeText) {
                navigator.clipboard.writeText(settingsJson).then(
                  function () {
                    new UserMessage(
                      TWDB.lang.export_clipboard_success,
                      UserMessage.TYPE_SUCCESS
                    ).show();
                  },
                  function (err) {
                    console.warn(TWDB.lang.export_clipboard_failed, err);
                    showTextDialog({
                        title: TWDB.lang.export_dialog_title,
                        initialText: settingsJson,
                        mode: 'export'
                    });
                  }
                );
              } else {
                showTextDialog({
                    title: TWDB.lang.export_dialog_title,
                    initialText: settingsJson,
                    mode: 'export'
                });
              }
            });
            var importButton = new west.gui.Button(TWDB.lang.import_settings, async function () {
              if (!window.confirm(TWDB.lang.import_warning)) {
                return;
              }
              const performImport = function (settingsString) {
                if (!settingsString) {
                    new UserMessage(
                        TWDB.lang.import_no_data,
                        UserMessage.TYPE_INFO
                    ).show();
                    return;
                }
                console.log(
                  `%c--- ${TWDB.lang.import_start} ---`,
                  "color: blue; font-weight: bold; font-size: 1.2em;"
                );
                console.log(`${TWDB.lang.import_json_preview} \n\n${settingsString}\n`);
                console.log(
                  "%c------------------------------------------",
                  "color: blue; font-weight: bold; font-size: 1.2em;"
                );
                try {
                  var importedSettings = JSON.parse(settingsString);
                  for (var key in importedSettings) {
                    if (Object.hasOwn(importedSettings, key)) {
                      settings[key] = importedSettings[key];
                    }
                  }
                  Cache.save("settings", settings);
                  new west.gui.Dialog(
                    TWDB.lang.import_dialog_title,
                    TWDB.lang.import_success_reload,
                    "ok"
                  )
                    .setModal(true, false, true)
                    .show();
                } catch (error) {
                  new UserMessage(
                    TWDB.lang.import_error,
                    UserMessage.TYPE_ERROR
                  ).show();
                  console.error(TWDB.lang.import_error_log, error);
                }
              };
              try {
                if (!navigator.clipboard || !navigator.clipboard.readText) {
                    throw new Error("Clipboard API read not supported in your Browser.");
                }
                navigator.clipboard.readText().then(
                  function (str) {
                    new UserMessage(TWDB.lang.import_clipboard_success, UserMessage.TYPE_SUCCESS).show();
                    performImport(str);
                  },
                  function (err) {
                    console.warn(TWDB.lang.import_clipboard_failed, err);
                    new UserMessage(TWDB.lang.import_clipboard_failed, UserMessage.TYPE_INFO).show();
                    throw err;
                  }
                ).catch(function() {
                    showTextDialog({
                        title: TWDB.lang.import_dialog_title,
                        initialText: '',
                        mode: 'import',
                        onConfirm: performImport
                    });
                });
              } catch (err) {
                console.warn(TWDB.lang.import_clipboard_error, err);
                showTextDialog({
                    title: TWDB.lang.import_dialog_title,
                    initialText: '',
                    mode: 'import',
                    onConfirm: performImport
                });
              }
            });
            var saveButton = new west.gui.Button(TWDB.lang.save_settings, function () {
              saveSettings(settings);
            });
            var resetButton = $(
              `<div style="position: absolute; right: 0; top: calc(100% - 18px); width: auto; text-align: right;" />`
            ).append(
              $(
                `<img style="cursor:pointer;" title="${TWDB.lang.reset_settings}" src="` +
                Images.iconReset +
                '" />'
              ).click(function () {
                Cache.reset();
                new UserMessage(
                  TWDB.lang.cache_reset_complete,
                  UserMessage.TYPE_INFO
                ).show();
                // Optionally reload the settings tab to reflect changes
                renderSettingsTab();
              })
            );
            scrollpane.appendContent(settingsContentContainer);
            // Language selector
            var langLabel = $(`<div style="font-weight:bold;float: inline-start; align-items: center; display: flex; height: 26px; margin-right: 4px;">${TWDB.lang.script_lang}</div>`);
            var langCombobox = new west.gui.Combobox()
              .addItem("en_US", "English")
              .addItem("el_GR", "")
              .select(TWDB.script.preferences.lang || "el_GR")
              .addListener(function (val) {
                TWDB.script.preferences.lang = val;
                localStorage.setItem("TWDB_preferences", JSON.stringify(TWDB.script.preferences));
                // Reload language file
                var langUrl = `${TWDB.script.langs.base_url + TWDB.script.langs[TWDB.script.preferences.lang]}?${TWDB.script.version * 100}`;
                if (TWDB.script.protocol === "https") {
                  langUrl = `https://${langUrl}`;
                } else {
                  langUrl = `http://${langUrl}`;
                }
                $.getJSON(langUrl, function (translation) {
                  TWDB.lang = translation;
                  new UserMessage(`${TWDB.lang.script_lang} ${TWDB.lang.cache_reset_complete}`, UserMessage.TYPE_INFO).show();
                  // Re-render settings tab to update with new language strings
                  renderSettingsTab();
                }).fail(function () {
                  var localLangUrl = `${TWDB.script.folder_url}langs/${TWDB.script.langs[TWDB.script.preferences.lang]}`;
                  if (TWDB.script.protocol === "https") {
                    localLangUrl = `https://${localLangUrl}`;
                  } else {
                    localLangUrl = `http://${localLangUrl}`;
                  }
                  $.getJSON(`${localLangUrl}?${TWDB.script.version * 100}`, function (translation) {
                    TWDB.lang = translation;
                    new UserMessage(`${TWDB.lang.script_lang} ${TWDB.lang.cache_reset_complete}`, UserMessage.TYPE_INFO).show();
                    // Re-render settings tab to update with new language strings
                    renderSettingsTab();
                  }).fail(function () {
                    new UserMessage(`${TWDB.lang.script_lang} ${TWDB.lang.cache_reset_complete}`, UserMessage.TYPE_INFO).show();
                    // Even if failed, try to re-render to ensure consistency
                    renderSettingsTab();
                  });
                });
              });
            var langContainer = $('<div style="float: right; margin-right:4px;"></div>')
              .append(langLabel)
              .append(langCombobox.getMainDiv());
            settingsWindowTab
              .append(langContainer)
              .append(saveButton.getMainDiv())
              .append(exportButton.getMainDiv())
              .append(importButton.getMainDiv())
              .append(resetButton);
            Window.hideLoader();
          };
          cache.get = function (key, defaultValue) {
            if (!isDefined(settings[key])) {
              cache.set(key, defaultValue);
              return defaultValue;
            }
            return settings[key];
          };
          cache.set = function (key, value) {
            settings[key] = value;
            Cache.save("settings", settings);
          };
          // Saves the settings to cache
          var saveSettings = function (newSettings) {
            for (var key in newSettings) {
              if (Object.hasOwn(newSettings, key)) {
                settings[key] = newSettings[key];
              }
            }
            if (Cache.save("settings", settings)) {
              new UserMessage(
                " ",
                UserMessage.TYPE_SUCCESS
              ).show();
            } else {
              new UserMessage(TWDB.lang.save_error, UserMessage.TYPE_ERROR).show();
            }
          };
          return cache; // Return the cache object as the public interface
        })($);
        _base.Settings = Settings;
        Debugger.Settings = Settings;
        var Updater = (function (e) {
          var t = {};
          var n = {};
          var r;
          var i = false;
          var s = function () {
            if (n.ready) {
              return;
            }
            r = Window.addTab(
              "notes",
              " ",
              " ",
              function () {
                u();
              }
            );
            if (!Cache.load("version"))
              Cache.save("version", Script.version);
            else if (
              Script.version !==
              Cache.load("version")
            ) {
              Cache.save("version", Script.version);
              i = true;
              var e = " UserScript  !";
              var t = `<div class="txcenter"> UserScript =1= .      ;</div>`;
              t = t.replace("=1=", `<b>${Script.name}</b>`);
              new west.gui.Dialog(e, t, "warning")
                .addButton(TWDB.lang.no)
                .addButton(TWDB.lang.yes, function () {
                  Window.open("notes");
                })
                .show();
            }
            n.ready = true;
          };
          n = Loader.add("Updater", "tw-db Updater", s, {
            Cache: true,
            Window: true,
          });
          var o = function (e) {
            var n = " UserScript  ";
            var r = `<div class="txcenter">       UserScript =1=,     OK    .</div>`;
            r = r.replace("=1=", `<b>${Script.name}</b>`);
            r += `<div><br /> : 0.${Script.version}<br /> : 0.${e}</div>`;
            var i = `${Script.protocol}://${Script.update_link}${Script.name_max}${Script.update_suffix}`;
            var s = function () {
              window.open(i);
              new west.gui.Dialog(
                Script.name,
                "      .",
                "warning"
              )
                .setModal(true, false, true)
                .show();
            };
            new west.gui.Dialog(n, r, west.gui.Dialog.SYS_WARNING)
              .addButton(TWDB.lang.not_now)
              .addButton(TWDB.lang.ok, s)
              .show();
          };
          t.wasUpdated = function () {
            return i;
          };
          var u = function () {
            r.children().remove();
            var t = new west.gui.Scrollpane();
            e(t.getMainDiv()).css("height", "335px");
            var n = false;
            for (var i = 0; i < Script.notes.length; i++) {
              var s = e(`<h3><a> - 0.${String(Script.notes[i].version)}</a></h3>`)
                .css("border-bottom", "1px solid black")
                .click(function () {
                  e(this).next().toggle();
                });
              var o = e(`<div>${Script.notes[i].notes}</div>`);
              t.appendContent(s).appendContent(o);
              if (n) {
                o.hide();
              }
              n = true;
            }
            r.append(t.getMainDiv());
            Window.hideLoader();
          };
          t.query = function () {
            setTimeout(function () {
              e.getScript(`${Script.protocol}://${Script.folder_url}${Script.check}?${Date.now()}`);
            }, 500);
          };
          t.check = function (e) {
            if (Script.version !== e) {
              o(e);
            }
          };
          return t;
        })($);
        _base.Updater = Updater;
        Debugger.Updater = Updater;
        var Sleep = (function (e) {
          var t = {};
          var n = null;
          var r = [];
          var i = [];
          var s = {};
          var o = 1;
          var u = false;
          var a = {};
          var f;
          var l = false;
          var c = 0;
          var h = [];
          var p = [
            "",
            "cubby",
            "bedroom",
            "hotel_room",
            "apartment",
            "luxurious_apartment",
          ];
          var d = function () {
            if (a.ready) {
              return;
            }
            if (Settings.get("direct_sleep", true)) {
              var e =
                "ul.tw2gui_selectbox_content.twdb_sleepmenu {max-width: 320px!important; white-space: nowrap; overflow-y: auto; overflow-x: hidden;}" +
                "ul.tw2gui_selectbox_content.twdb_sleepmenu > div.tw2gui_scrollpane {width: 320px!important}" +
                "ul.tw2gui_selectbox_content.twdb_sleepmenu > li {padding-right: 20px!important;}";
              TWDB.Util.addCss(e);
              s = Cache.load("barracks");
              if (s === null || typeof s !== "object") {
                s = {};
              }
              v();
              if (Character.homeTown.town_id !== 0) x();
              else S();
            }
            a.ready = true;
          };
          a = Loader.add("Sleep", "tw-db DirectSleep", d, {
            Cache: true,
            Settings: true,
          });
          var v = function () {
            n = GameInject.CharacterButton.add(Images.buttonSleep);
            n.addMousePopup("").click(function (e) {
              if (w.Character.homeTown.town_id !== 0 && r.length === 0) b();
              else y(e);
            });
          };
          var m = function (t, n, r) {
            var i = new west.gui.Selectbox(true).addListener(function (e) {
              switch (e) {
                case "home":
                  b();
                  break;
                default:
                  E(e);
                  break;
              }
            });
            if (w.Character.homeTown.town_id !== 0)
              i.addItem(
                "home",
                "&nbsp;" +
                w.GameMap.calcWayTime(f, w.Character.homeTown).formatDuration()
              );
            for (var s = 0; s < r; s++)
              if (t[s].stage !== 0)
                i.addItem(
                  s,
                  "&nbsp;" +
                  t[s].stage +
                  "&nbsp;" +
                  t[s].distance.formatDuration() +
                  "&nbsp;|&nbsp;" +
                  t[s].name
                );
            e(i.elContent).addClass("twdb_sleepmenu");
            i.show(n);
            l = false;
          };
          var g = function (e, t, n) {
            Ajax.remoteCallMode(
              "building_hotel",
              "get_data",
              { town_id: h[e].town_id },
              function (r) {
                if (r.error) return new UserMessage(r.msg).show();
                h[e].stage = r.hotel_level;
                if (++c === t) m(h, n, t);
              }
            );
          };
          var y = function (e) {
            if (l) return;
            l = true;
            f = Map.getLastPosition();
            if (w.Character.homeTown.town_id === 0) {
              for (var t = 0; t < h.length; t++)
                h[t].distance = w.GameMap.calcWayTime(f, h[t]);
              h.sort(function (e, t) {
                return e.distance - t.distance;
              });
              var n = h.length > 5 ? 5 : h.length;
              c = 0;
              for (var i = 0; i < n; i++) {
                if (Object.hasOwn(h[i], "stage")) {
                  if (++c === n) m(h, e, n);
                } else g(i, n, e);
              }
            } else {
              for (var t = 0; t < r.length; t++)
                r[t].distance = w.GameMap.calcWayTime(f, r[t]);
              r.sort(function (e, t) {
                return e.distance - t.distance;
              });
              m(r, e, r.length);
            }
          };
          var b = function () {
            Ajax.remoteCallMode(
              "building_hotel",
              "get_data",
              { town_id: w.Character.homeTown.town_id },
              function (e) {
                if (e.error) return new UserMessage(e.msg).show();
                var t = p[e.hotel_level];
                w.TaskQueue.add(new TaskSleep(w.Character.homeTown.town_id, t));
              }
            );
          };
          var E = function (e) {
            if (isDefined(h[e]))
              w.TaskQueue.add(new TaskSleep(h[e].town_id, p[h[e].stage]));
            else if (isDefined(r[e]))
              w.TaskQueue.add(new TaskFortSleep(r[e].id, r[e].x, r[e].y));
          };
          var S = function () {
            Ajax.get("map", "get_minimap", {}, function (e) {
              if (e.error) return new UserMessage(e.msg).show();
              for (var t in e.towns)
                if (e.towns[t].member_count) h.push(e.towns[t]);
            });
          };
          var x = function () {
            if (w.Character.homeTown.alliance_id === 0)
              Ajax.remoteCall("fort_overview", "", {}, function (e) {
                for (var t in e.js) {
                  var n = e.js[t],
                    r = e.page.match(
                      new RegExp(
                        '<div id="ownforts">[\\S\\s]+FortWindow.open\\(undefined, ' +
                        n[1] +
                        ", " +
                        n[2] +
                        '\\)\\)">(.+?)</a>[\\S\\s]+<div id="lastbattle">'
                      )
                    );
                  if (r) i.push({ fort_id: n[0], x: n[1], y: n[2], name: r[1] });
                }
                if (i.length > 0)
                  w.setTimeout(function () {
                    T();
                  }, Timer.getTimeout());
              });
            else
              Ajax.remoteCallMode(
                "alliance",
                "get_data",
                { alliance_id: w.Character.homeTown.alliance_id },
                function (e) {
                  if (e.error) return new UserMessage(e.error).show();
                  i = e.data.forts;
                  if (i.length > 0)
                    w.setTimeout(function () {
                      T();
                    }, Timer.getTimeout());
                }
              );
          };
          var T = function () {
            try {
              if (i.length <= 0) {
                return;
              }
              var t = i.pop();
              var n = t.fort_id;
              if (!isDefined(s[n])) {
                s[n] = { time: 0, stage: 0 };
              }
              e.extend(s[n], { id: n, x: t.x, y: t.y, name: t.name });
              if (
                s[n].stage !== 5 &&
                s[n].time + o * 86400 > Date.now()/ 1e3
              ) {
                r.push(s[n]);
                if (i.length > 0) {
                  w.setTimeout(function () {
                    T();
                  }, Timer.getTimeout());
                } else {
                  Cache.save("barracks", s);
                }
                return;
              }
              Ajax.remoteCallMode(
                "fort_building_barracks",
                "index",
                { fort_id: n },
                function (e) {
                  if (e.error) {
                    new UserMessage(e.error).show();
                  } else {
                    s[n].time = Math.floor(Date.now() / 1e3);
                    if (isDefined(e.barrackStage)) {
                      s[n].stage = e.barrackStage;
                    }
                  }
                  r.push(s[n]);
                  if (i.length > 0) {
                    w.setTimeout(function () {
                      T();
                    }, Timer.getTimeout());
                  } else {
                    Cache.save("barracks", s);
                  }
                }
              );
            } catch (u) {
              Error.report(u, "getFortData");
            }
          };
          return t;
        })($);
        Debugger.Sleep = Sleep;
        var Analyser = (function (jQuery) { // 'e' is now 'jQuery' for clarity
          // --- Module-level private state variables (renamed from t, n, r, s, o, u, a, f, l, c, h) ---
          var publicApi = {}; // Renamed from 't'. This will be the object returned by the IIFE.
          // var isModuleReady = false; // Renamed from 'n', but now `analyserLoaderConfig.isReady` serves this.
          var statisticData = null; // Renamed from 'r'. Stores all main statistics.
          var initialStatisticSnapshot = null; // Renamed from 's'. Snapshot for restore.
          var isReportFetchingActive = false; // Renamed from 'o'. Flag for fetching state.
          var reportFetchQueue = []; // Renamed from 'u'. Queue of reports to process.
          var failedReportIds = []; // Renamed from 'a'. List of reports that failed parsing.
          var currentReportFetchPage = 0; // Renamed from 'f'. Current page number being fetched.
          // UI-related state (renamed from 'l')
          var uiState = {
            currentWindowElement: null, // The jQuery object for the specific analyser tab's content.
            progressBar: null,
            tableRows: [], // jQuery objects for table rows, used for sorting.
            tableFooter: null, // jQuery object for the table footer.
            tableBodyScrollpane: null, // west.gui.Scrollpane instance for table body.
          };
          // Sort and Average state (renamed from 'c')
          var sortAndDisplayState = {
            order: 1, // 1 for ascending, -1 for descending.
            sortByColumn: 0, // Index of the column currently being sorted.
            displayMode: "avg", // "avg" or "sum" for display.
          };
          // Loader configuration object (renamed from 'h').
          // Will contain `isReady` property instead of separate `n` flag.
          var analyserLoaderConfig = {};
          publicApi.extra = false; // Renamed from 't.extra'. Public flag for extra data presence.
          // --- Helper Functions for Data Reset (renamed from handleResetLogic, displayResetConfirmationDialog) ---
          /**
           * Performs the actual statistic reset logic based on type and an initial value.
           * Renamed from `handleResetLogic`.
           * @param {string} type - "job", "duel", "chest", "all"
           * @param {string|number|null} [initialValue] - The report link or report ID.
           */
          function executeStatisticReset(type, initialValue) {
            let processedValue;
            if (!initialValue) {
              processedValue = 0;
            } else {
              const reportRegex = /\[report=([0-9]+)([A-Fa-f0-9]{10})\]/;
              const match = String(initialValue).match(reportRegex);
              if (match) {
                processedValue = match[1]; // Extract the report ID
              } else {
                processedValue = initialValue; // Use original value if no match
              }
            }
            let finalValue;
            const parsedValue = parseInt(processedValue, 10);
            if (Number.isNaN(parsedValue)) {
              finalValue = 0;
            } else {
              finalValue = parsedValue - 1;
            }
            switch (type) {
              case "job":
                statisticData[type] = { last: finalValue, items: { last: 0 } };
                break;
              case "duel":
                statisticData[type] = { last: finalValue };
                break;
              case "chest":
                statisticData[type] = {};
                break;
              case "all":
                statisticData = { ver: 4 }; // Uses 'statisticData'
                // Recursively call for individual types with a reset start point
                executeStatisticReset("job", finalValue + 1);
                executeStatisticReset("duel", finalValue + 1);
                executeStatisticReset("chest", finalValue + 1);
                break;
            }
          }
          /**
           * Displays a confirmation dialog for resetting analyser statistics.
           * Renamed from `displayResetConfirmationDialog`.
           * @param {string} type - The analyser type to reset ("job", "duel", "chest").
           */
          function showResetConfirmationDialog(type) {
            const dialogContent = jQuery(`
              <div><h2>        ;</h2><span style="font-size:12px"><br />              </span></div>
            `);
            const linkTextfield = new west.gui.Textfield("twdb_analyser_last").setSize(40);
            linkTextfield.setLabel(TWDB.lang.report_link_label);
            dialogContent.append(linkTextfield.getMainDiv());
            const useAllCheckbox = new west.gui.Checkbox(TWDB.lang.use_all_reports);
            const useFutureCheckbox = new west.gui.Checkbox(TWDB.lang.use_future_reports);
            useAllCheckbox.setCallback(function (checked) {
              if (checked) {
                useFutureCheckbox.setSelected(false);
                linkTextfield.setValue("");
              }
            });
            useFutureCheckbox.setCallback(function (checked) {
              if (checked) {
                useAllCheckbox.setSelected(false);
                linkTextfield.setValue("");
              }
            });
            jQuery(linkTextfield.getMainDiv()).find("span").css("font-size", "12px");
            jQuery(linkTextfield.getMainDiv())
              .find("input")
              .keyup(function () {
                useAllCheckbox.setSelected(false);
                useFutureCheckbox.setSelected(false);
              });
            dialogContent.append(
              jQuery('<div style="display:block;" />')
                .append(useAllCheckbox.getMainDiv())
                .append(useFutureCheckbox.getMainDiv())
            );
            const dialog = new west.gui.Dialog(TWDB.lang.reset_report_analyser, dialogContent);
            dialog.addButton(TWDB.lang.ok, function () {
              if (useAllCheckbox.isSelected()) {
                executeStatisticReset(type);
              } else if (useFutureCheckbox.isSelected()) {
                executeStatisticReset(type, statisticData[type].last + 1);
              } else {
                executeStatisticReset(type, linkTextfield.getValue());
              }
              dialog.hide();
              MessagesWindow.open(`analyser-${type}`);
            });
            dialog.addButton(TWDB.lang.cancel); // Assuming TWDB.lang.cancel is defined, else ""
            dialog.show();
          }
          /**
           * Main dispatcher for reset actions. (renamed from `d`)
           * @param {string} type - The analyser type.
           * @param {boolean} [shouldExecuteImmediately=false] - If true, skips dialog.
           * @param {*} [initialValue] - Value to pass for reset logic.
           */
          var dispatchResetAction = function (type, shouldExecuteImmediately = false, initialValue) {
            if (shouldExecuteImmediately) {
              executeStatisticReset(type, initialValue);
            } else {
              showResetConfirmationDialog(type);
            }
          };
          // --- Report Fetching and Processing Functions (renamed from m, g, y, b, w, E, S, x) ---
          /** Initiates fetching reports for a given type. (renamed from `m`) */
          var startReportFetchProcess = function (type) {
            if (isReportFetchingActive) return;
            isReportFetchingActive = true;
            reportFetchQueue = []; // Clear previous queue
            currentReportFetchPage = 0; // Reset page counter
            fetchReportsPage(type, 1);
          }
          /** Fetches a single page of reports. (renamed from `g`) */
          var fetchReportsPage = function (type, pageNum) {
            if (!pageNum) {
              pageNum = 1;
            }
            currentReportFetchPage = pageNum;
            Ajax.remoteCall(
              "reports",
              "get_reports",
              { page: pageNum, folder: type },
              function (response) {
                processFetchedReportsResponse(type, response);
              }
            );
          }
          /** Processes the response from a report fetch. (renamed from `y`) */
          var processFetchedReportsResponse = function (type, response) {
            let continueFetching = true;
            if (typeof response.reports !== "object" || response.reports === null) {
              response.reports = [];
              continueFetching = false;
            }
            // Ensure we are processing the page we requested, helps with out-of-order responses
            if (typeof response.page === "undefined" || currentReportFetchPage !== response.page) {
              response.reports = [];
              continueFetching = false;
            }
            for (let i = 0; i < response.reports.length; i++) {
              const report = response.reports[i];
              // Stop if we encounter a report that's already processed
              if (report.report_id <= statisticData[type].last) {
                continueFetching = false;
                break;
              }
              reportFetchQueue.push({ id: report.report_id, hash: report.hash, type: type });
            }
            uiState.progressBar.setMaxValue(reportFetchQueue.length); // Update progress bar max value
            if (continueFetching) {
              window.setTimeout(() => fetchReportsPage(type, currentReportFetchPage + 1), Timer.getTimeout());
            } else {
              processNextReportFromQueue(type); // Start processing the gathered reports
            }
          }
          /** Processes reports from the queue one by one. (renamed from `b`) */
          var processNextReportFromQueue = function (type) {
            if (reportFetchQueue.length > 0) {
              uiState.progressBar.setValue(uiState.progressBar.getValue() + 1);
              fetchSingleReportDetails(reportFetchQueue.pop()); // Pop and fetch oldest report
            } else {
              Cache.save("statistic", statisticData);
              isReportFetchingActive = false;
              displayAnalyserTab(type, true); // Refresh UI with new data
            }
          }
          /** Fetches full details for a single report. (renamed from `w`) */
          var fetchSingleReportDetails = function (reportMeta) {
            jQuery.post(
              "game.php?window=reports&mode=show_report",
              { flash: null, hash: reportMeta.hash, report_id: reportMeta.id },
              function (reportDetails) {
                handleFetchedReportDetails(reportMeta.type, reportDetails);
              },
              "json"
            );
          }
          /** Handles the detailed report data, parsing and saving. (renamed from `E`) */
          var handleFetchedReportDetails = function (type, reportDetails) {
            if (!reportDetails || !reportDetails.report_id || !reportDetails.publishHash) {
              new UserMessage(
                "empty Server Response",
                UserMessage.TYPE_ERROR
              ).show();
              return false;
            }
            if (typeof reportDetails.page !== "string" ||
                typeof reportDetails.title !== "string" ||
                typeof reportDetails.js !== "string") {
              failedReportIds.push(reportDetails.report_id); // Malformed report
            } else {
              switch (type) {
                case "job":
                  parseAndStoreJobReport(reportDetails); // Calls specific parser
                  break;
                case "duel":
                  parseAndStoreDuelReport(reportDetails); // Calls specific parser
                  break;
              }
              statisticData[type].last = reportDetails.report_id; // Update last processed report ID
            }
            window.setTimeout(() => processNextReportFromQueue(type), Timer.getTimeout());
          }
          /** Parses and stores data from a Job report. (renamed from `x`) */
          var parseAndStoreJobReport = function (reportDetails) {
            const jobData = {
              id: null, hash: null, job: null, motivation: null, duration: null,
              wage: null, bond: null, experience: null, injury: 0, killed: false,
              date_received: null, items: {},
            };
            try {
              jobData.id = reportDetails.report_id;
              jobData.hash = reportDetails.publishHash;
              const jobInfo = Jobs.getJobByName(reportDetails.title.slice(reportDetails.title.indexOf(":") + 1));
              if (!jobInfo) {
                failedReportIds.push(jobData.id);
                return false;
              }
              jobData.job = jobInfo.id;
              jobData.date_received = reportDetails.date_received;
              const reportPage = jQuery(reportDetails.page);
              reportPage.find(".rp_row_jobdata").each(function (idx) {
                let valueText = jQuery.trim(jQuery(this).children("span:last-child").html());
                valueText = valueText.split("&nbsp;").join(" "); // Normalize spaces
                switch (idx) {
                  case 0: jobData.motivation = parseInt(valueText.slice(0, valueText.indexOf(" ")), 10); break;
                  case 1: {
                    const durationFloat = parseFloat(valueText);
                    jobData.duration = durationFloat === 1 ? 3600 : durationFloat === 10 ? 600 : durationFloat === 15 ? 15 : null;
                    if (!jobData.duration) {
                      Error.report({ message: `Unrecognized time on report:${valueText}` }, "Job-Analyser");
                    }
                    break;
                  }
                  case 2: jobData.wage = parseInt(valueText.slice(valueText.indexOf(" ") + 1), 10); break;
                  case 3: jobData.bond = parseInt(valueText, 10); break;
                  case 4: jobData.experience = parseInt(valueText.slice(0, valueText.indexOf(" ")), 10); break;
                }
              });
              reportPage.find(".rp_hurtmessage_text").each(function () {
                const regex = /[0-9]+/;
                jobData.injury = Number(regex.exec(jQuery(this).html()));
              });
              reportPage.find(".rp_row_killmessage").each(function () {
                jobData.killed = true;
              });
              const jsCodeLines = reportDetails.js.split(";");
              jQuery(jsCodeLines).each(function () {
                const itemRegex = /\s*ItemManager\.get\(([0-9]+)\)\s*\)\.setCount\(([0-9]+)\)/m;
                const match = itemRegex.exec(this);
                if (match) {
                  jobData.items[Number(match[1])] = Number(match[2]);
                }
              });
              // Update statisticData
              if (!statisticData.job[jobData.job]) {
                statisticData.job[jobData.job] = { count: 0, products: {} };
              }
              const jobStats = statisticData.job[jobData.job];
              jobStats.count++;
              if (!jobStats[jobData.motivation]) {
                jobStats[jobData.motivation] = {
                  count: 0, duration: 0, wage: 0, bond: 0, experience: 0,
                  injury: {}, killed: 0, items: {}, extraitems: {},
                };
              }
              const motivationStats = jobStats[jobData.motivation];
              if (!isDefined(motivationStats.duration)) { motivationStats.duration = 0; }
              motivationStats.count++;
              motivationStats.duration += jobData.duration;
              motivationStats.wage += jobData.wage;
              motivationStats.bond += jobData.bond;
              motivationStats.experience += jobData.experience;
              if (!motivationStats.injury[jobData.injury]) { motivationStats.injury[jobData.injury] = 0; }
              motivationStats.injury[jobData.injury]++;
              if (jobData.killed) { motivationStats.killed++; }
              for (const itemId in jobData.items) {
                const parsedItemId = Number(itemId);
                const bountyBagId = 138000; // Specific item ID
                // Handle Bounty Bags (specific extra item)
                if (parsedItemId === bountyBagId) {
                  if (!isDefined(statisticData.extra)) {
                    statisticData.extra = { count: 0 };
                    publicApi.extra = true; // Flag for public API if extra is present
                  }
                  statisticData.extra.count++;
                  statisticData.extra[statisticData.extra.count] = jobData;
                }
                const itemCount = jobData.items[parsedItemId];
                const itemObject = ItemManager.get(parsedItemId);
                // Handle Job Products
                if (Jobs.isProduct(parsedItemId) !== -1) {
                  if (!jobStats.products[parsedItemId]) {
                    jobStats.products[parsedItemId] = { last: 0 };
                  }
                  const productStats = jobStats.products[parsedItemId];
                  for (let k = 0; k < itemCount; k++) {
                    const occurrencesSinceLast = jobStats.count - productStats.last;
                    productStats.last = jobStats.count;
                    if (!productStats[occurrencesSinceLast]) { productStats[occurrencesSinceLast] = 0; }
                    productStats[occurrencesSinceLast]++;
                  }
                }
                // Handle Extra Items (price 0)
                else if (itemObject.price === 0) {
                  if (!motivationStats.extraitems[parsedItemId]) { motivationStats.extraitems[parsedItemId] = 0; }
                  motivationStats.extraitems[parsedItemId]++;
                }
                // Handle other general items (luck-related)
                else {
                  // luck = true; // This 'luck' variable is unused and undeclared here, likely a remnant
                  if (!motivationStats.items[parsedItemId]) { motivationStats.items[parsedItemId] = 0; }
                  motivationStats.items[parsedItemId]++;
                }
              }
            } catch (error) {
              failedReportIds.push(jobData.id);
              Error.report(error, "Job-Analyser parseAndStoreJobReport");
              return false;
            }
          }
          /**
           * Placeholder function for processing Duel reports. (renamed from `S`)
           * Parameter `_reportData` is passed but unused as functionality is not implemented.
           * @param {*} _reportData - The duel report data.
           */
          var parseAndStoreDuelReport = function (_reportData) { };
          // --- UI Rendering & Interaction for Jobs (renamed from T, N, C, k, L) ---
          /**
           * Main function to display the analyser tab content. (renamed from `T`)
           * @param {string} type - The analyser type ("job", "duel", "chest").
           * @param {boolean} [forceRefresh=false] - If true, re-renders tables immediately.
           */
          var displayAnalyserTab = function (type, forceRefresh) {
            if (!MessagesWindow.window) return;
            uiState.currentWindowElement = jQuery(MessagesWindow.window.getContentPane()).find(
              `.messages-analyser-${type}`
            );
            if (typeof forceRefresh === "undefined") {
              MessagesWindow.window.showLoader();
              uiState.progressBar = new west.gui.Progressbar(0, reportFetchQueue.length); // Initialize with 0 max
              uiState.currentWindowElement.children().remove();
              uiState.currentWindowElement.append(uiState.progressBar.getMainDiv());
              startReportFetchProcess(type);
            } else {
              uiState.currentWindowElement.children().remove();
              let contentElement;
              switch (type) {
                case "job": contentElement = renderJobAnalyserTable(); break;
                case "duel": contentElement = renderDuelAnalyserTable(); break; // showDuels
              }
              uiState.currentWindowElement.append(contentElement);
              applyTableSorting(); // Apply sorting after render
              applyTableDisplayMode(); // Apply sum/avg after render
              applyTableSorting(); // Called again as in original, perhaps for consistency with default sort?
              MessagesWindow.window.hideLoader();
            }
          }
          /**
           * Sorts the job analyser table rows based on current `sortAndDisplayState`. (renamed from `N`)
           * @param {number} [columnIndex] - Optional column index to sort by. If undefined, uses current state.
           */
          var applyTableSorting = function (columnIndex) {
            try {
              if (typeof columnIndex !== "undefined") {
                if (sortAndDisplayState.sortByColumn === columnIndex) {
                  sortAndDisplayState.order *= -1; // Toggle order if same column
                } else {
                  sortAndDisplayState.order = 1; // Default to ascending for new column
                  sortAndDisplayState.sortByColumn = columnIndex;
                }
              } else {
                columnIndex = sortAndDisplayState.sortByColumn; // Use current state if no new column given
              }
              const currentOrder = sortAndDisplayState.order;
              const sortFunction = (row1, row2) => {
                const val1 = jQuery(row1).find(`.cell_${columnIndex}`).html();
                const val2 = jQuery(row2).find(`.cell_${columnIndex}`).html();
                if (Number(val1) === parseFloat(val1)) { // Check if it's a number
                  return (parseFloat(val1) > parseFloat(val2) ? currentOrder : -currentOrder);
                } else {
                  return (val1 > val2 ? currentOrder : -currentOrder);
                }
              };
              uiState.tableRows.sort(sortFunction); // Sort the stored jQuery row objects
              // Re-append sorted rows to the scrollpane
              for (let i = 0; i < uiState.tableRows.length; i++) {
                uiState.tableBodyScrollpane.appendContent(uiState.tableRows[i]);
              }
            } catch (error) {
              Error.report(error, "Analyser applyTableSorting");
            }
          }
          /**
           * Toggles between 'sum' and 'avg' display modes for table data. (renamed from `C`)
           */
          var applyTableDisplayMode = function () {
            sortAndDisplayState.displayMode = (sortAndDisplayState.displayMode === "avg") ? "sum" : "avg";
            jQuery(uiState.currentWindowElement)
              .find("div.row div")
              .each(function (_param) { // `_param` is an unused index, renamed for clarity
                const element = jQuery(this);
                const displayValue = element.data(String(sortAndDisplayState.displayMode));
                const titleValue = element.data(`${String(sortAndDisplayState.displayMode)}-t`);
                element.html(displayValue).attr("title", titleValue);
              });
          }
          /**
           * Renders the Job Analyser table HTML and populates it with data. (renamed from `k`)
           * @returns {jQuery} The rendered table element.
           */
          var renderJobAnalyserTable = function () {
            uiState.currentWindowElement.addClass("view-rewards"); // Default view
            sortAndDisplayState = { order: 1, sortByColumn: 0, displayMode: "avg" }; // Explicit initialization
            const tableHtml = jQuery(`
              <div class="fancytable">
              <div class="_bg tw2gui_bg_tl"></div><div class="_bg tw2gui_bg_tr"></div>
              <div class="_bg tw2gui_bg_bl"></div><div class="_bg tw2gui_bg_br"></div>
              <div class="trows">
              <div class="thead statics">
              <div class="row row_head">
              <div class="cell_0 view-rewards view-items" style="width:91px; text-align:center;"><span title="" style="cursor:pointer, margin-bottom:3px;"><img src="${Images.iconName}"/></span></div><div class="cell_1 view-rewards view-items" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconCount}"/></span></div><div class="cell_2 view-rewards view-items" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconClock}"/></span></div><div class="cell_3 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconExperience}"/></span></div><div class="cell_4 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconDollar}"/></span></div><div class="cell_5 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconUpb}"/></span></div><div class="cell_6 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconMoti}"/></span></div><div class="cell_7 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconDanger}"/></span></div><div class="cell_8 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconKilled}"/></span></div><div class="cell_9 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconYield}"/></span></div><div class="cell_9 view-items" style="width:63px; text-align:center;"><span title=""><img src="${Images.iconYield}"/></span></div><div class="cell_10 view-rewards" style="width:50px; text-align:center;"><span title=""><img src="${Images.iconItem}"/></span></div><div class="cell_10 view-items" style="width:378px; text-align:center;"><span title=""><img src="${Images.iconItem}"/></span></div><div class="cell_11 view-rewards" style="width:41px; text-align:center;"><span title=""><img src="${Images.iconLuck}"/></span></div><div class="cell_reset view-rewards view-items" style="width:20px; text-align:right;"><span title=""><img src="${Images.iconReset}"/></span></div></div></div>
                      <div class="tbody">
                      <div class="_bg tw2gui_bg_l"></div><div class="_bg tw2gui_bg_r"></div></div>
                      <div class="tfoot statics">
                      <div class="row row_foot"></div></div></div>
            `);
            // Attach header click handlers for sorting and resetting
            tableHtml.find(".row_head > div").each(function () {
              const headerDiv = jQuery(this);
              const match = headerDiv.attr("class").match(/cell_(\d+|reset)/);
              const cellIdentifier = match ? match[1] : null;
              if (cellIdentifier === "reset") {
                headerDiv.click(function () {
                  dispatchResetAction("job"); // Calls dispatchResetAction
                });
              } else if (cellIdentifier !== null) {
                headerDiv.click(((colIdx) => () => applyTableSorting(colIdx))(Number(cellIdentifier)));
              }
            });
            tableHtml.find(".row_head").find("img").css("cursor", "pointer");
            // Aggregate overall statistics for the job analyser
            const totalAnalyserStats = {
              jobs: 0, count: 0, duration: 0, experience: 0, wage: 0, bond: 0,
              motivation: 0, injury: 0, killed: 0, products: 0, items: 0, luck: 0,
            };
            const jobStatistics = statisticData.job;
            uiState.tableRows = []; // Clear previous rows
            for (const jobId in jobStatistics) {
              const jobDetails = Jobs.getJobById(jobId);
              if (!jobDetails) continue;
              const jobAggregateStats = {
                count: 0, duration: 0, experience: 0, wage: 0, bond: 0, motivation: 0,
                injury: 0, killed: 0, products: 0, items: 0, luck: 0,
                all_products: {}, all_items: {},
              };
              const currentJobStats = jobStatistics[jobId];
              jobAggregateStats.count = currentJobStats.count;
              // Calculate potential product yield chance
              let totalYieldChance = 0;
              if (Array.isArray(jobDetails.randomyields)) {
                for (let i = 0; i < jobDetails.randomyields.length; i++) {
                  totalYieldChance += jobDetails.randomyields[i];
                }
              }
              if (typeof jobDetails.yields === 'object' && jobDetails.yields !== null) {
                  for (const yieldKey in jobDetails.yields) {
                      totalYieldChance += jobDetails.yields[yieldKey].prop;
                  }
              }
              // Aggregate product data
              for (const productId in currentJobStats.products) {
                if (productId === "last") continue;
                for (const countKey in currentJobStats.products[productId]) { // Renamed from 'm'
                  const count = Number(currentJobStats.products[productId][countKey]);
                  jobAggregateStats.products += count;
                  const item = ItemManager.get(productId);
                  if (item) { jobAggregateStats.luck += Number(item.price * count); }
                  jobAggregateStats.all_products[productId] = (jobAggregateStats.all_products[productId] || 0) + count;
                }
              }
              // Aggregate motivation-specific data
              for (const motivationKey in currentJobStats) {
                if (motivationKey === "count" || motivationKey === "products") continue;
                const motivationStats = currentJobStats[motivationKey];
                jobAggregateStats.motivation += Number(motivationKey) * motivationStats.count;
                jobAggregateStats.bond += motivationStats.bond;
                jobAggregateStats.duration += motivationStats.duration || 0;
                jobAggregateStats.experience += motivationStats.experience;
                for (const injuryVal in motivationStats.injury) {
                  jobAggregateStats.injury += Number(injuryVal) * motivationStats.injury[injuryVal];
                }
                for (const itemId in motivationStats.items) {
                  const count = Number(motivationStats.items[itemId]);
                  jobAggregateStats.items += count;
                  const item = ItemManager.get(itemId);
                  if (item) { jobAggregateStats.luck += Number(item.price * count); }
                  jobAggregateStats.all_items[itemId] = (jobAggregateStats.all_items[itemId] || 0) + count;
                }
                jobAggregateStats.killed += motivationStats.killed;
                jobAggregateStats.wage += motivationStats.wage;
              }
              // Create HTML row for this job
              const rowElement = jQuery(`<div class="row row_${jobId}" />`);
              const rowCellsData = [
                // Cell 0: Job Name
                {
                  classes: "cell_0 view-rewards view-items",
                  style: "width:91px; text-align:left;cursor:pointer;font-size:11px;",
                  sum: jobDetails.name, sumT: jobDetails.name,
                  avg: jobDetails.name, avgT: jobDetails.name
                },
                // Cell 1: Count
                {
                  classes: "cell_1 view-rewards view-items",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.count, sumT: jobAggregateStats.count,
                  avg: jobAggregateStats.count, avgT: jobAggregateStats.count
                },
                // Cell 2: Duration
                {
                  classes: "cell_2 view-rewards view-items",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: round(jobAggregateStats.duration / 3600, 2), sumT: `${String(round(jobAggregateStats.duration / 3600, 2))} `,
                  avg: round(jobAggregateStats.duration / (3600 * jobAggregateStats.count), 2), avgT: `&Oslash; ${String(round(jobAggregateStats.duration / (3600 * jobAggregateStats.count), 2))} `
                },
                // Cell 3: Experience
                {
                  classes: "cell_3 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.experience, sumT: String(jobAggregateStats.experience),
                  avg: round(jobAggregateStats.experience / jobAggregateStats.count, 2), avgT: `&Oslash; ${String(round(jobAggregateStats.experience / jobAggregateStats.count, 2))}`
                },
                // Cell 4: Wage
                {
                  classes: "cell_4 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.wage, sumT: `$${String(jobAggregateStats.wage)}`,
                  avg: round(jobAggregateStats.wage / jobAggregateStats.count, 2), avgT: `&Oslash; $${String(round(jobAggregateStats.wage / jobAggregateStats.count, 2))}`
                },
                // Cell 5: Bond
                {
                  classes: "cell_5 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.bond, sumT: String(jobAggregateStats.bond),
                  avg: round((jobAggregateStats.bond / jobAggregateStats.count) * 100, 2), avgT: `&Oslash; ${String(round((jobAggregateStats.bond / jobAggregateStats.count) * 100, 2))}%`
                },
                // Cell 6: Motivation
                {
                  classes: "cell_6 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.motivation, sumT: `${String(jobAggregateStats.motivation)}%`,
                  avg: round(jobAggregateStats.motivation / jobAggregateStats.count, 2), avgT: `&Oslash; ${String(round(jobAggregateStats.motivation / jobAggregateStats.count, 2))}%`
                },
                // Cell 7: Injury
                {
                  classes: "cell_7 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.injury, sumT: String(jobAggregateStats.injury),
                  avg: round(jobAggregateStats.injury / jobAggregateStats.count, 2), avgT: `&Oslash; ${String(round(jobAggregateStats.injury / jobAggregateStats.count, 2))}`
                },
                // Cell 8: Killed
                {
                  classes: "cell_8 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.killed, sumT: String(jobAggregateStats.killed),
                  avg: round((jobAggregateStats.killed / jobAggregateStats.count) * 100, 2), avgT: `&Oslash; ${String(round((jobAggregateStats.killed / jobAggregateStats.count) * 100, 2))}%`
                },
                // Cell 9 (rewards): Products count
                {
                  classes: "cell_9 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.products, sumT: String(jobAggregateStats.products),
                  avg: round((jobAggregateStats.products / jobAggregateStats.count) * 100, 2), avgT: `&Oslash; ${String(round((jobAggregateStats.products / jobAggregateStats.count) * 100, 2))}% [${totalYieldChance * 100}%]`
                },
                // Cell 9 (items): Product images
                {
                  classes: "cell_9 view-items",
                  style: "width:63px; text-align:center;cursor:pointer;",
                  sum: jQuery.map(jobAggregateStats.all_products, (count, id) => new tw2widget.Item(ItemManager.get(id)).setCount(count).getMainDiv()),
                  avg: jQuery.map(jobAggregateStats.all_products, (count, id) => new tw2widget.Item(ItemManager.get(id)).setCount(count).getMainDiv()),
                  // sumT and avgT are not directly applicable here as it's content
                },
                // Cell 10 (rewards): Items count
                {
                  classes: "cell_10 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.items, sumT: String(jobAggregateStats.items),
                  avg: round((jobAggregateStats.items / jobAggregateStats.count) * 100, 2), avgT: `&Oslash; ${String(round((jobAggregateStats.items / jobAggregateStats.count) * 100, 2))}%`
                },
                // Cell 10 (items): Item images
                {
                  classes: "cell_10 view-items",
                  style: "width:390px; text-align:center;cursor:pointer;",
                  sum: jQuery.map(jobAggregateStats.all_items, (count, id) => new tw2widget.Item(ItemManager.get(id)).setCount(count).getMainDiv()),
                  avg: jQuery.map(jobAggregateStats.all_items, (count, id) => new tw2widget.Item(ItemManager.get(id)).setCount(count).getMainDiv()),
                  // sumT and avgT are not directly applicable here as it's content
                },
                // Cell 11: Luck
                {
                  classes: "cell_11 view-rewards",
                  style: "width:50px; text-align:center;cursor:pointer;",
                  sum: jobAggregateStats.luck, sumT: `$${String(jobAggregateStats.luck)}`,
                  avg: round(jobAggregateStats.luck / jobAggregateStats.count, 2), avgT: `&Oslash; $${String(round(jobAggregateStats.luck / jobAggregateStats.count, 2))}`
                }
              ];

              rowCellsData.forEach((cellData, index) => {
                const cell = jQuery(`<div class="${cellData.classes}" style="${cellData.style}" ></div>`);
                cell.data("sum", cellData.sum);
                cell.data("sum-t", cellData.sumT);
                cell.data("avg", cellData.avg);
                cell.data("avg-t", cellData.avgT);
                if (typeof cellData.sum === 'object' && cellData.sum !== null) { // For item images, append directly
                    cell.append(cellData.sum);
                }
                rowElement.append(cell);
              });
              totalAnalyserStats.jobs++; // Only incremented once per job, so outside loop for cells
              totalAnalyserStats.count += jobAggregateStats.count;
              totalAnalyserStats.duration += jobAggregateStats.duration;
              totalAnalyserStats.experience += jobAggregateStats.experience;
              totalAnalyserStats.wage += jobAggregateStats.wage;
              totalAnalyserStats.bond += jobAggregateStats.bond;
              totalAnalyserStats.motivation += jobAggregateStats.motivation;
              totalAnalyserStats.injury += jobAggregateStats.injury;
              totalAnalyserStats.killed += jobAggregateStats.killed;
              totalAnalyserStats.products += jobAggregateStats.products;
              totalAnalyserStats.items += jobAggregateStats.items;
              totalAnalyserStats.luck += jobAggregateStats.luck;
              uiState.tableRows.push(rowElement);
              rowElement.click(function () {
                showJobDetailsPopup(jQuery(this).children(".cell_0").html());
              });
            }
            // Set up the body scrollpane
            uiState.tableBodyScrollpane = new west.gui.Scrollpane();
            jQuery(uiState.tableBodyScrollpane.getMainDiv()).css("height", "300px");
            tableHtml.find(".tbody").append(uiState.tableBodyScrollpane.getMainDiv());
            // Populate footer with total/average statistics
            uiState.tableFooter = tableHtml.find(".row_foot");
            const footerCellsData = [
                // Cell 0: Jobs Count
                {
                  classes: "cell_0",
                  style: "width:71px; text-align:center;",
                  sum: totalAnalyserStats.jobs, sumT: `${totalAnalyserStats.jobs} `,
                  avg: totalAnalyserStats.jobs, avgT: `${totalAnalyserStats.jobs} `
                },
                // Cell 0 (view-rewards view-items): Sum/Avg toggle button
                {
                  classes: "cell_0 view-rewards view-items",
                  style: "width:87px; text-align:center;cursor:pointer;color:#444;",
                  sum: "&sum;", sumT: "  &Oslash;  ",
                  avg: "&Oslash;", avgT: "  &sum; ",
                  onClick: applyTableDisplayMode,
                  onMouseEnter: function() { jQuery(this).css("color", "#888"); },
                  onMouseLeave: function() { jQuery(this).css("color", "#444"); }
                },
                // Cell 1: Total Count
                {
                  classes: "cell_1 view-rewards view-items",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.count, sumT: totalAnalyserStats.count,
                  avg: totalAnalyserStats.count, avgT: totalAnalyserStats.count
                },
                // Cell 2: Total Duration
                {
                  classes: "cell_2 view-rewards view-items",
                  style: "width:50px; text-align:center;",
                  sum: round(totalAnalyserStats.duration / 3600, 2), sumT: `${String(round(totalAnalyserStats.duration / 3600, 2))} `,
                  avg: round(totalAnalyserStats.duration / (3600 * totalAnalyserStats.count), 2), avgT: `&Oslash; ${String(round(totalAnalyserStats.duration / (3600 * totalAnalyserStats.count), 2))} `
                },
                // Cell 3: Total Experience
                {
                  classes: "cell_3 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.experience, sumT: String(totalAnalyserStats.experience),
                  avg: round(totalAnalyserStats.experience / totalAnalyserStats.count, 2), avgT: `&Oslash; ${String(round(totalAnalyserStats.experience / totalAnalyserStats.count, 2))}`
                },
                // Cell 4: Total Wage
                {
                  classes: "cell_4 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.wage, sumT: `$${String(totalAnalyserStats.wage)}`,
                  avg: round(totalAnalyserStats.wage / totalAnalyserStats.count, 2), avgT: `&Oslash; $${String(round(totalAnalyserStats.wage / totalAnalyserStats.count, 2))}`
                },
                // Cell 5: Total Bond
                {
                  classes: "cell_5 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.bond, sumT: String(totalAnalyserStats.bond),
                  avg: round((totalAnalyserStats.bond / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.bond / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 6: Total Motivation
                {
                  classes: "cell_6 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.motivation, sumT: `${String(totalAnalyserStats.motivation)}%`,
                  avg: round(totalAnalyserStats.motivation / totalAnalyserStats.count, 2), avgT: `&Oslash; ${String(round(totalAnalyserStats.motivation / totalAnalyserStats.count, 2))}%`
                },
                // Cell 7: Total Injury
                {
                  classes: "cell_7 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.injury, sumT: String(totalAnalyserStats.injury),
                  avg: round(totalAnalyserStats.injury / totalAnalyserStats.count, 2), avgT: `&Oslash; ${String(round(totalAnalyserStats.injury / totalAnalyserStats.count, 2))}`
                },
                // Cell 8: Total Killed
                {
                  classes: "cell_8 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.killed, sumT: String(totalAnalyserStats.killed),
                  avg: round((totalAnalyserStats.killed / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.killed / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 9 (rewards): Total Products Count
                {
                  classes: "cell_9 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.products, sumT: String(totalAnalyserStats.products),
                  avg: round((totalAnalyserStats.products / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.products / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 9 (items): Total Products placeholder (same data as above)
                {
                  classes: "cell_9 view-items",
                  style: "width:63px; text-align:center;",
                  sum: totalAnalyserStats.products, sumT: String(totalAnalyserStats.products),
                  avg: round((totalAnalyserStats.products / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.products / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 10 (rewards): Total Items Count
                {
                  classes: "cell_10 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.items, sumT: String(totalAnalyserStats.items),
                  avg: round((totalAnalyserStats.items / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.items / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 10 (items): Total Items placeholder (same data as above)
                {
                  classes: "cell_10 view-items",
                  style: "width:390px; text-align:center;",
                  sum: totalAnalyserStats.items, sumT: String(totalAnalyserStats.items),
                  avg: round((totalAnalyserStats.items / totalAnalyserStats.count) * 100, 2), avgT: `&Oslash; ${String(round((totalAnalyserStats.items / totalAnalyserStats.count) * 100, 2))}%`
                },
                // Cell 11: Total Luck
                {
                  classes: "cell_11 view-rewards",
                  style: "width:50px; text-align:center;",
                  sum: totalAnalyserStats.luck, sumT: `$${String(totalAnalyserStats.luck)}`,
                  avg: round(totalAnalyserStats.luck / totalAnalyserStats.count, 2), avgT: `&Oslash; $${String(round(totalAnalyserStats.luck / totalAnalyserStats.count, 2))}`
                }
              ];
            footerCellsData.forEach((cellData) => {
                const cell = jQuery(`<div class="${cellData.classes}" style="${cellData.style}" ></div>`);
                cell.data("sum", cellData.sum);
                cell.data("sum-t", cellData.sumT);
                cell.data("avg", cellData.avg);
                cell.data("avg-t", cellData.avgT);
                if (cellData.onClick) {cell.click(cellData.onClick);}
                if (cellData.onMouseEnter) {cell.on("mouseenter", cellData.onMouseEnter);}
                if (cellData.onMouseLeave) {cell.on("mouseleave", cellData.onMouseLeave);}
                uiState.tableFooter.append(cell);
            });
            const controlsAndTableWrapper = jQuery('<div style="margin: 0px 6px 0px 6px;width:680px;" />')
              .append(
                jQuery(
                  '<a href="#">       </a>'
                )
                  .css({ marginTop: "-8px", display: "block", textAlign: "center" })
                  .click(function () {
                    jQuery(".messages-analyser-job").toggleClass("view-rewards view-items");
                  })
              )
              .append(tableHtml);
            return controlsAndTableWrapper;
          }
          /**
           * Placeholder for rendering Duel Analyser table.
           * Renamed from `showDuels`.
           * @returns {jQuery}
           */
          var renderDuelAnalyserTable = function () {
              return jQuery('<div/>').text('Duel Analyser coming soon!');
          }
          /**
           * Placeholder for displaying detailed job information in a popup.
           * Renamed from `L`. Parameter `_jobName` is passed but unused as functionality is not implemented.
           * @param {string} _jobName - The name of the job to display details for.
           */
          var showJobDetailsPopup = function (_jobName) { };
          // --- Chest Analyser Functions (renamed from 'v') ---
          var ChestAnalyserModule = (function (jQuery) { // Renamed from 'v', param 'e' to 'jQuery'
            var api = {};
            /**
             * Adds chest opening data to statistics.
             * @param {object} event - The game event object.
             * @param {object} data - Data from the event, including msg.effects.
             */
            api.add = function (event, data) {
              let chestHandled = false;
              for (let i = 0; i < data.msg.effects.length; i += 1) {
                const effect = data.msg.effects[i];
                if (effect.type === "lottery" || effect.type === "content") {
                  // Ensure statisticData.chest exists for this chest type
                  if (!isDefined(statisticData.chest[event.item_id])) {
                    statisticData.chest[event.item_id] = { count: 0, items: {} };
                  }
                  const chestStats = statisticData.chest[event.item_id];
                  // Increment chest count only once per chest opening
                  if (!chestHandled) {
                    chestStats.count++;
                    chestHandled = true;
                  }
                  // Aggregate items received from the chest
                  effect.items.each(function (item) {
                    if (!isDefined(chestStats.items[item.item_id])) {
                      chestStats.items[item.item_id] = 0;
                    }
                    chestStats.items[item.item_id] += item.count;
                  });
                } else if (effect.type === "learn_recipe") {
                  TWDB.ClothCalc.recipes[effect.recipe] = 1; // Update recipe status
                }
              }
              Cache.save("statistic", statisticData);
            };
            /**
             * Displays the Chest Analyser UI.
             */
            api.show = function () {
              if (!MessagesWindow.window) return;
              const chestAnalyserWindow = jQuery(MessagesWindow.window.getContentPane()).find(
                ".messages-analyser-chest"
              );
              MessagesWindow.window.showLoader();
              chestAnalyserWindow.children().remove();
              const scrollpane = new west.gui.Scrollpane();
              jQuery(scrollpane.getMainDiv()).css("height", "385px");
              chestAnalyserWindow.append(scrollpane.getMainDiv());
              for (const chestId in statisticData.chest) {
                const chestStats = statisticData.chest[chestId];
                // Display the chest itself
                const chestItemWidget = new tw2widget.Item(ItemManager.get(chestId), "item_inventory").setCount(chestStats.count);
                chestItemWidget.getImgEl().addClass("item_inventory_img");
                scrollpane.appendContent(
                  jQuery(
                    '<div style="float:left;position:relative;height:61px;width:61px;" />'
                  ).append(chestItemWidget.getMainDiv())
                );
                // Display items obtained from the chest
                let itemsCount = 0;
                const itemsContainer = jQuery(
                  '<div style="float:left;position:relative;width:610px;" />'
                );
                for (const itemId in chestStats.items) {
                  itemsCount++;
                  const itemWidget = new tw2widget.Item(ItemManager.get(itemId), "item_inventory").setCount(chestStats.items[itemId]);
                  itemWidget.getImgEl().addClass("item_inventory_img");
                  itemsContainer.append(itemWidget.getMainDiv());
                }
                // Calculate height for divider based on number of items (10 items per row roughly 61px high)
                const dividerHeight = String(Math.ceil(itemsCount / 10) * 61);
                scrollpane
                  .appendContent(
                    `<div style="float:left;position:relative;width:10px;height:${dividerHeight}px;background: url(/images/window/report/devider_report.png) repeat-y;" />`
                  )
                  .appendContent(itemsContainer)
                  .appendContent(
                    '<div style="clear:both;position:relative;height:10px;display:block;background: url(/images/window/dailyactivity/wood_devider_horiz.png) repeat-x;" />'
                  );
              }
              MessagesWindow.window.hideLoader();
            };
            return api;
          })(jQuery);
          // --- Module Initialization (renamed from 'p') ---
          var initializeAnalyser = function () {
            if (analyserLoaderConfig.ready) return;
            TWDB.Util.addCss(
              ".messages-analyser-job .item img.tw_item { width: 30px; height: 27px; }" +
              ".messages-analyser-job .item .count { bottom: -4px; }" +
              ".messages-analyser-job .item span.usable { display: none; }" +
              "div.tw2gui_window .messages-analyser-job div.fancytable .row > div { display: none; vertical-align: top; }" +
              ".messages-analyser-job.view-rewards div.fancytable .row > div.view-rewards { display: inline-block; }" +
              ".messages-analyser-job.view-items div.fancytable .row > div.view-items { display: inline-block; }" +
              "div.tw2gui_window .messages-analyser-job div.fancytable div.trows div.tbody div.row { height: auto; }"
            );
            // Load statistic data from cache
            const loadedStats = Cache.load("statistic");
            if (typeof loadedStats === "object" && loadedStats !== null) {
              statisticData = loadedStats;
            } else {
              dispatchResetAction("all", true); // Calls dispatcher
            }
            // Ensure version exists and migrate if needed
            if (!statisticData || !statisticData.ver) {
              dispatchResetAction("all", true); // Calls dispatcher
            }
            // Version migration logic (with explicit fallthrough comments)
            switch (statisticData.ver) {
              // biome-ignore lint/suspicious/noFallthroughSwitchClause: <testing>
              case 1: {
                dispatchResetAction("job", true, 1);
                dispatchResetAction("duel", true, 1);
                statisticData.ver = 2;
              }
              // biome-ignore lint/suspicious/noFallthroughSwitchClause: <testing>
              case 2: {
                dispatchResetAction("job", true, 1);
                dispatchResetAction("duel", true, 1);
                statisticData.ver = 3;
              }
              case 3: {
                dispatchResetAction("chest", true, 1);
                statisticData.ver = 4;
              } break;
            }
            // Create a snapshot for restore functionality
            initialStatisticSnapshot = jQuery.extend(true, {}, statisticData);
            // Add tabs to messages window
            GameInject.addTabOnMessagesWindow(
              " ",
              "analyser-job",
              function () {
                displayAnalyserTab("job");
              }
            );
            // Conditionally enable chest analyser
            if (Settings.get("chest_analyser", true)) {
              GameInject.ItemUse(ChestAnalyserModule.add);
              GameInject.addTabOnMessagesWindow(
                " ",
                "analyser-chest",
                ChestAnalyserModule.show
              );
            }
            analyserLoaderConfig.ready = true;
          }
          // Attach the initializer to the Loader (renamed from original 'h' assignment)
          analyserLoaderConfig = Loader.add("Analyser", "tw-db Job-Analyser", initializeAnalyser, {
            Cache: true, Settings: true, Jobs: true,
          });
          // --- Public API methods (from original `t` object, renamed for clarity) ---
          publicApi.restore = function () {
            statisticData = jQuery.extend(true, {}, initialStatisticSnapshot);
            Cache.save("statistic", statisticData);
            // Re-render current tab if it's open, or just ensure next render uses restored data
            const activeTab = MessagesWindow.getActiveTab(); // Assuming this returns the ID
            if (activeTab?.startsWith('analyser-')) {
                const type = activeTab.split('-')[1];
                displayAnalyserTab(type, true); // Force refresh
            }
          };
          publicApi.debug = function () {
            console.log("Current Statistic Data:", statisticData);
            console.log("Current Sort/Display State:", sortAndDisplayState);
            console.log("Report Queue:", reportFetchQueue);
            console.log("Failed Report IDs:", failedReportIds);
          };
          publicApi.getExtra = function () {
            return isDefined(statisticData.extra) ? statisticData.extra : null;
          };
          return publicApi; // Returns the public API object (formerly 't')
        })(jQuery); // Renamed parameter 'e' to 'jQuery', passed 'jQuery' assuming it's the global jQuery.
        Debugger.Analyser = Analyser;
        var Notes = (function (e) {
          var t = {};
          var n = null;
          var r = {};
          var i = function () {
            if (r.ready) {
              return;
            }
            if (r.ready) {
              return;
            }
            if (Settings.get("notes", true)) {
              GameInject.addTabOnMessagesWindow(
                "",
                "notes",
                function () {
                  s();
                }
              );
            }
            r.ready = true;
          };
          r = Loader.add("Notes", "tw-db Notes", i, {
            Cache: true,
            Settings: true,
          });
          var s = function () {
            if (!w.MessagesWindow.window) {
              return;
            }
            n = e(w.MessagesWindow.window.getContentPane()).find(
              ".messages-notes"
            );
            n.css("width", "680px")
              .css("margin", "0 auto")
              .css("position", "relative")
              .css("top", "0");
            a(Cache.load("notes"));
          };
          var o = function (e) {
            Cache.save("notes", e);
            new UserMessage(
              " ",
              UserMessage.TYPE_SUCCESS
            ).show();
          };
          var u = function (t) {
            n.children().remove();
            w.MessagesWindow.window.showLoader();
            var r = new west.gui.Textarea()
              .setWidth(660)
              .setHeight(300)
              .setContent(t);
            n.append(
              e('<div style="margin-left:8px" />').append(
                new west.gui.Bbcodes(r).getMainDiv()
              )
            )
              .append(r.getMainDiv())
              .append(
                e('<div style="margin-left:8px" />')
                  .append(
                    new west.gui.Button("".escapeHTML(), function () {
                      o(r.getContent());
                      a(r.getContent());
                    }).getMainDiv()
                  )
                  .append(
                    new west.gui.Button(
                      "".escapeHTML(),
                      function () {
                        a(r.getContent());
                      }
                    ).getMainDiv()
                  )
              );
            w.MessagesWindow.window.hideLoader();
          };
          var a = function (t) {
            n.children().remove();
            var r = new west.gui.Scrollpane();
            e(r.getMainDiv()).css("height", "324px");
            e(r.getMainDiv())
              .find(".tw2gui_scrollpane_clipper_contentpane")
              .addClass("selectable");
            n.append(
              e('<div style="margin:8px" />').append(r.getMainDiv())
            ).append(
              e('<div style="margin-left:8px" />')
                .append(
                  new west.gui.Button("".escapeHTML(), function () {
                    o(t);
                  }).getMainDiv()
                )
                .append(
                  new west.gui.Button("".escapeHTML(), function () {
                    u(t);
                  }).getMainDiv()
                )
            );
            if (t) {
              w.MessagesWindow.window.showLoader();
              Ajax.remoteCall(
                "settings",
                "get_parsed_text",
                { text: t },
                function (e) {
                  r.appendContent(w.Game.TextHandler.parse(e.parsed_text));
                  w.MessagesWindow.window.hideLoader();
                }
              );
            }
          };
          return t;
        })($);
        Debugger.Notes = Notes;
        var Map = (function (e) {
          var t = {};
          var n = false;
          var r = 181;
          var i = 79;
          var s = 0;
          var o = 0;
          var u = {};
          var a = {};
          var f = null;
          var l = null;
          var c = {};
          var h = function () {
            if (c.ready) {
              return;
            }
            if (Settings.get("show_coordinates", true)) {
              d();
            }
            Ajax.get("map", "get_minimap", {}, function (e) {
              if (e.error) {
                c.failed = true;
                return new UserMessage(e.msg).show();
              }
              u = e.job_groups;
              c.ready = true;
            });
          };
          c = Loader.add("Map", "tw-db Map", h, { Settings: true });
          t.getNearestJob = function (e) {
            var n = JobList.getJobById(e);
            var r = u[n.groupid];
            if (!r) {
              return [];
            }
            var i = [];
            var s = t.getLastPosition();
            for (var o = 0; o < r.length; o++) {
              var a = r[o][0] - s.x;
              var f = r[o][1] - s.y;
              var l = Math.sqrt(a * a + f * f);
              var c = window.GameMap.calcWayTime({ x: r[o][0], y: r[o][1] }, s);
              var h = round((Math.atan(f / a) * 180) / Math.PI);
              if (a < 0) {
                h -= 180;
              }
              i.push({ dist: l, time: c, x: r[o][0], y: r[o][1], angle: h });
            }
            var p = function (e, t) {
              return e.dist * 1 > t.dist * 1 ? 1 : -1;
            };
            i.sort(p);
            return i;
          };
          t.getLastPosition = function () {
            var e = { x: Character.position.x, y: Character.position.y };
            var t = TaskQueue.queue;
            for (var n = 0; n < t.length; n++) {
              var r = t[n].wayData;
              if (r.x) {
                e.x = r.x;
                e.y = r.y;
              }
            }
            return e;
          };
          t.setMinimapJob = function (t) {
            if (f) {
              window.clearInterval(l);
              window.clearInterval(f);
            }
            var n = function (t) {
              if (
                !MinimapWindow.window ||
                e(MinimapWindow.window.divMain).find(".tw2gui_jobsearch_string")
                  .length === 0 ||
                !e(MinimapWindow.window.divMain)
                  .find(".tw2gui_jobsearch_string")
                  .is(":visible")
              ) {
                return;
              }
              window.clearInterval(f);
              window.clearInterval(l);
              f = null;
              l = null;
              MinimapWindow.resetSearchContext();
              e("input.tw2gui_jobsearch_string", MinimapWindow.DOM)
                .val(t)
                .keyup();
            };
            l = setInterval(function () {
              window.clearInterval(f);
              window.clearInterval(l);
              f = null;
              l = null;
            }, 3e5);
            f = setInterval(function () {
              n(t);
            }, 200);
          };
          var p = function (e) {
            var n = false;
            var u = 0;
            var e = [];
            var a = s;
            var f = o;
            for (var a = s; a <= r; a++) {
              for (var f = o; f <= i; f++) {
                u++;
                e.push([a, f]);
                if (u > 299) {
                  n = true;
                  break;
                }
              }
              if (n) {
                break;
              }
              o = 0;
            }
            s = a;
            o = f + 1;
            if (e.length > 0) {
              window.GameMap.Data.Loader.load(e, function () {
                setTimeout(function () {
                  t.loadMap();
                }, Timer.getTimeout());
              });
            }
          };
          t.loadMap = function () {
            p();
          };
          var d = function () {
            var t =
              "div#mmap_twdb_coords {position: absolute; bottom: 35px; left: 1px; display: block;}\n" +
              "div#mmap_twdb_coords > img {cursor:pointer; opacity:0.5; position:relative;}";
            TWDB.Util.addCss(t, "minimap");
            var n = function () {
              var t = e('<div id="mmap_twdb_coords" />');
              var n = new west.gui.Textfield();
              var r = new west.gui.Textfield();
              var i = "";
              var s = "";
              n.setWidth(45);
              r.setWidth(45).setMaxLength(5);
              var o = function () {
                var e = Number(n.getValue());
                var t = Number(r.getValue());
                window.GameMap.center(e, t);
                n.setValue("");
                r.setValue("");
              };
              e(n.getMainDiv())
                .find("input")
                .keyup(function (t) {
                  window.setTimeout(function () {
                    var u;
                    if (t.ctrlKey && t.keyCode === 86 && !t.altKey) {
                      u = new RegExp("^([0-9]{1,5})([^0-9]+)([0-9]{1,5})$").exec(
                        e.trim(n.getValue())
                      );
                      if (u) {
                        n.setValue(u[1]);
                        r.setValue(u[3]);
                        e(r.getMainDiv()).find("input").focus();
                        i = n.getValue();
                        s = r.getValue();
                        return;
                      }
                      u = new RegExp("^([0-9]{1,5})$").exec(e.trim(n.getValue()));
                      if (u) {
                        n.setValue(u[1]);
                        e(r.getMainDiv()).find("input").focus();
                        i = n.getValue();
                        return;
                      }
                      n.setValue(i);
                    }
                    if (t.keyCode === 13) {
                      return o();
                    }
                    if (String(e.trim(n.getValue())).length === 0) {
                      i = n.getValue();
                      return;
                    }
                    u = new RegExp("^([0-9]{1,5})$").exec(e.trim(n.getValue()));
                    if (u) {
                      n.setValue(u[1]);
                      if (String(u[1]).length === 5) {
                        e(r.getMainDiv()).find("input").focus();
                      }
                      i = n.getValue();
                      return;
                    }
                    n.setValue(i);
                  }, 100);
                });
              e(r.getMainDiv())
                .find("input")
                .keyup(function (t) {
                  window.setTimeout(function () {
                    if (t.ctrlKey && t.keyCode === 86 && !t.altKey) {
                      var n = new RegExp("^([0-9]{1,5})$").exec(
                        e.trim(r.getValue())
                      );
                      if (n) {
                        r.setValue(n[1]);
                        e(r.getMainDiv()).find("input").focus();
                        s = r.getValue();
                        return;
                      }
                      r.setValue(s);
                    }
                    if (t.keyCode === 13) {
                      o();
                      return;
                    }
                    if (String(e.trim(r.getValue())).length === 0) {
                      s = r.getValue();
                      return;
                    }
                    var n = new RegExp("^([0-9]{1,5})$").exec(
                      e.trim(r.getValue())
                    );
                    if (n) {
                      r.setValue(n[1]);
                      if (String(n[1]).length === 5) {
                        e(r.getMainDiv()).find("input").focus();
                      }
                      s = r.getValue();
                      return;
                    }
                    r.setValue(s);
                  }, 100);
                });
              var u = new west.gui.Button(
                "Ok",
                function () {
                  o();
                },
                null,
                null,
                "     "
              ).setWidth("48");
              var a = e(
                '<img title="   " src="' +
                Images.iconCount +
                '" />'
              ).click(function () {
                if (e(this).css("opacity") === 1) {
                  e(this).css("opacity", "0.5");
                  window.GameMap.hideCoords();
                } else {
                  e(this).css("opacity", "1");
                  window.GameMap.showCoords();
                }
              });
              t.append(
                a,
                n.getMainDiv(),
                "<span>|</span>",
                r.getMainDiv(),
                e(u.getMainDiv()).css("top", "6px")
              );
              e(".minimap-right", MinimapWindow.window.divMain).append(t);
            };
            GameInject.injectMinimap(function () {
              n();
            });
          };
          return t;
        })($);
        _base.Map = Map;
        Debugger.Map = Map;
        var BonusJobs = (function (e) {
          var t = {},
            n,
            r = {},
            i = { gold: false, silver: false },
            s = function () {
              if (r.ready) {
                return;
              }
              if (!Settings.get("show_bonus_jobs", true)) {
                r.ready = true;
                return;
              }
              var e,
                t,
                s,
                a,
                f = get_server_date(),
                l = 1,
                c = new Date();
              c.setUTCHours(l);
              c.setMinutes(15);
              c.setSeconds(0);
              c.setMilliseconds(0);
              var h = c.getTime();
              if (
                f.getUTCHours() < l ||
                (f.getUTCHours() === l && f.getMinutes() < 15)
              )
                h -= 24 * 60 * 60 * 1e3;
              n = Cache.load("bonusjobs") || {};
              i = Cache.load("bonusdisplay") || { gold: false, silver: false };
              for (e in n) {
                if (!Object.hasOwn(n, e)) {
                  continue;
                }
                t = n[e];
                s = 0;
                for (a in t) {
                  if (!Object.hasOwn(t, a)) {
                    continue;
                  }
                  if (t[a].gold) {
                    s++;
                    continue;
                  }
                  if (t[a].time > h) {
                    s++;
                  } else {
                    delete t[a];
                  }
                }
                if (s === 0) {
                  delete n[e];
                }
              }
              u();
              o();
              r.ready = true;
            };
          r = Loader.add("BonusJobs", "tw-db BonusJobs", s, {
            Settings: true,
            Cache: true,
            Jobs: true,
          });
          var o = function () {
            var e = function (e) {
              var t = window.GameMap.Helper.getPosition(e.parent);
              if (!isDefined(t) || !isDefined(t.x) || !isDefined(t.y)) {
                return;
              }
              if (
                !isDefined(window.GameMap.JobHandler.Featured[`${t.x}-${t.y}`])
              ) {
                if (isDefined(n[`${t.x}-${t.y}`])) {
                  delete n[`${t.x}-${t.y}`];
                  Cache.save("bonusjobs", n);
                }
                return;
              }
              var r = window.GameMap.JobHandler.Featured[`${t.x}-${t.y}`],
                i;
              n[`${t.x}-${t.y}`] = {};
              for (i in r) {
                if (!Object.hasOwn(r, i)) {
                  continue;
                }
                n[`${t.x}-${t.y}`][i] = r[i];
                n[`${t.x}-${t.y}`][i].time = Date.now();
              }
              Cache.save("bonusjobs", n);
            };
            GameInject.injectRadialmenu(function (t) {
              e(t);
            });
          };
          var u = function () {
            var t = `div#mmap_twdb_bonusjobs {position:absolute; top:40px; right:10px;}
              div#mmap_twdb_bonusjobs > input[type="checkbox"] {margin-left:6px; cursor:pointer;}
              div#mmap_twdb_bonusjobs > div {position:relative; display:inline-block; height:9px; width:9px; margin:1px;}
              div#mmap_twdb_bonusjobs > img {margin-left:3px; cursor:pointer; position:relative; display:inline-block; height:16px; width:16px; top:-4px;}`;
            TWDB.Util.addCss(t, "minimap");
            var n = function () {
              var t = e('<div id="mmap_twdb_bonusjobs" />')
                .append(
                  e(
                    `<input title="${TWDB.lang.show_gold_jobs}" type="checkbox" ${i.gold ? 'checked="checked"' : ""} />`
                  ).change(function () {
                    i.gold = e(this).is(":checked");
                    a();
                  })
                )
                .append(`<div title="${TWDB.lang.gold_jobs}" style="background-color:yellow; border:1px solid red;" />`)
                .append(
                  e(
                    `<input title="${TWDB.lang.show_silver_jobs}" type="checkbox" ${i.silver ? 'checked="checked"' : ""}" />`
                  ).change(function () {
                    i.silver = e(this).is(":checked");
                    a();
                  })
                )
                .append(`<div title="${TWDB.lang.silver_jobs}" style="background-color:white; border:1px solid black;" />`)
                .append(
                  e(
                    `<img title="${TWDB.lang.export_jobs_bonus}" src="${Images.iconExport}" />`
                  ).click(function () {
                    f();
                  })
                )
                .append(
                  e(
                    `<img title="${TWDB.lang.import_jobs_bonus}" src="${Images.iconImport}" />`
                  ).click(function () {
                    l();
                  })
                )
                .append(
                  e(
                    `<img title="${TWDB.lang.reset_jobs_bonus}" src="${Images.iconReset2}" />`
                  ).click(function () {
                    c();
                  })
                );
              e(MinimapWindow.window.divMain).find(".minimap-right").append(t);
              a();
            };
            GameInject.injectMinimap(function () {
              n();
            });
          };
          var a = function () {
            Cache.save("bonusdisplay", i);
            e(
              "#minimap_worldmap > div.TWDBbonusjob",
              MinimapWindow.window.divMain
            ).remove();
            var t = function (t, n, r, i, s) {
              var o = 0.00513;
              var u = parseInt(t * o, 10) - 3;
              var a = parseInt(n * o, 10) + 2;
              var f = "";
              if (i > 1) {
                f = "-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);";
              }
              var l = e(
                `<div class="TWDBbonusjob" style="z-index:7;position:absolute;display:block;width:4px;height:4px;background-color:${r ? "yellow" : "white"};left:${u}px;top:${a}px;${f}border:1px solid ${r ? "red" : "black"};" />`
              ).click(
                  (function (e, t) {
                    return function () {
                      window.GameMap.center(e, t);
                    };
                  })(t, n)
                )
                .addMousePopup(`<div style="min-width:60px;text-align:center">${s.join('<div class="marker_popup_divider"></div>')}</div>`);
              e(MinimapWindow.window.divMain).find("#minimap_worldmap").append(l);
            };
            var r = n;
            for (key in r) {
              if (!Object.hasOwn(r, key)) {
                continue;
              }
              var s = r[key];
              var o = false;
              var u = 0;
              var a = [];
              for (var f in s) {
                if (!Object.hasOwn(s, f)) {
                  continue;
                }
                if (s[f].gold) {
                  if (!i.gold) {
                    continue;
                  }
                  o = true;
                  u++;
                }
                if (s[f].silver) {
                  if (!i.silver) {
                    continue;
                  }
                  u++;
                }
                var l = s[f].x;
                var c = s[f].y;
                job = JobList.getJobById(s[f].job_id);
                a.push(Jobs.getPopup(s[f].job_id, s[f].gold ? "gold" : "silver"));
              }
              if (u > 0) {
                t(l, c, o, u, a);
              }
            }
          };
          var f = function () {
            var t = [];
            for (var r in n) {
              if (!Object.hasOwn(n, r)) {
                continue;
              }
              var i = n[r];
              for (var s in i) {
                if (!Object.hasOwn(i, s)) {
                  continue;
                }
                var o = Jobs.getJobById(s);
                var u = Math.ceil(i[s].x / 6635) + (i[s].y > 10176 ? 7 : 0);
                t.push({
                  name: o.name,
                  bonus: i[s].gold ? "gold" : "silver",
                  country: u,
                  x: i[s].x,
                  y: i[s].y,
                  id: s,
                });
              }
            }
            var a = e("<textarea />")
              .css({
                width: "500px",
                height: "200px",
                "background-color": "transparent",
                "border-width": "0px",
              })
              .click(function () {
                this.select();
              });
            var f = "";
            var l = 1;
            var c = function (e) {
              if (f !== e) {
                f = e;
                l = 1;
              } else {
                l *= -1;
              }
              var n = function (e, t) {
                return e[f] > t[f] ? l : -1 * l;
              };
              t.sort(n);
              var r = "";
              var i = "";
              for (var s = 0; s < t.length; s++) {
                var o = t[s];
                if (f === "country" && i !== o.country) {
                  i = o.country;
                  r += `-- ${TWDB.lang.country} ${i} --\n`;
                }
                r += `${o.name}; ${o.bonus}; ${o.x}-${o.y}; ${o.id}\n`;
              }
              a.val(r);
            };
            c("name");
            var h = e("<div />")
              .css({
                width: "500px",
                height: "22px",
                position: "relative",
                display: "block",
              })
              .append(
                e(`<img src="${Images.iconName}" title="${TWDB.lang.sort_by_name}" style="margin:0px 2px 0px 2px;cursor:pointer;" /> `).click(function () {
                  c("name");
                })
              )
              .append(
                e(`<img src="${Images.iconCount}" title="${TWDB.lang.sort_by_county}" style="margin:0px 2px 0px 2px;cursor:pointer;" /> `).click(function () {
                  c("country");
                })
              );
            new west.gui.Dialog(TWDB.lang.export_jobs_bonus, e("<div />").append(h).append(a))
            .addButton(TWDB.lang.ok)
            .show();
          };
          var l = function () {
            var t = e("<textarea />").css({ width: "400px", height: "100px" });
            var r = function () {
              var r = t.val(),
                i = r.split(/[\n,\r,\r\n]/),
                s,
                o,
                u,
                f,
                l,
                c;
              for (s = 0; s < i.length; s++) {
                o = i[s].split(";", 4);
                if (
                  o.length !== 4 ||
                  !e.isNumeric(o[3]) ||
                  !Jobs.getJobById(Number(o[3]))
                ) {
                  continue;
                }
                u = String(o[2]).split("-", 2);
                if (u.length !== 2 || !e.isNumeric(u[0]) || !e.isNumeric(u[1])) {
                  continue;
                }
                f = Number(o[3]);
                l = {
                  gold: e.trim(o[1])  === "gold",
                  group_id: Jobs.getJobById(f).groupid,
                  job_id: f,
                  silver: e.trim(o[1]) !=="gold",
                  x: Number(u[0]),
                  y: Number(u[1]),
                  time: Date.now(),
                };
                c = `${Number(u[0])}-${Number(u[1])}`;
                if (!isDefined(n[c])) {
                  n[c] = {};
                }
                n[c][f] = l;
              }
              Cache.save("bonusjobs", n);
              a();
            };
            new west.gui.Dialog(TWDB.lang.import_jobs_bonus, t)
              .addButton(TWDB.lang.ok, r)
              .addButton(TWDB.lang.cancel)
              .show();
          };
          var c = function (e) {
            try {
              if (e) {
                for (var t in n) {
                  if (!Object.hasOwn(n, t)) {
                    continue;
                  }
                  var r = n[t];
                  var i = 0;
                  for (var s in r) {
                    if (!Object.hasOwn(r, s)) {
                      continue;
                    }
                    if (e === "gold" && r[s].gold) {
                      i++;
                      continue;
                    }
                    if (e === "silver" && r[s].silver) {
                      i++;
                      continue;
                    }
                    delete r[s];
                  }
                  if (i === 0) {
                    delete n[t];
                  }
                }
                Cache.save("bonusjobs", n);
                a();
                new UserMessage(
                  TWDB.lang.reset_jobs_bonus,
                  UserMessage.TYPE_SUCCESS
                ).show();
              } else {
                var o = TWDB.lang.reset_jobs_bonus;
                var u = `<div class="txcenter">${TWDB.lang.reset_jobs_bonus_confirm}</div>`;
                new west.gui.Dialog(o, u, west.gui.Dialog.SYS_QUESTION)
                  .addButton(TWDB.lang.reset_all_jobs_bonus, function () {
                    c("all");
                  })
                  .addButton(TWDB.lang.reset_silver_jobs_bonus, function () {
                    c("silver");
                  })
                  .addButton(TWDB.lang.reset_gold_jobs_bonus, function () {
                    c("gold");
                  })
                  .addButton(TWDB.lang.cancel)
                  .show();
              }
            } catch (f) {
              Error.report(f, "bonusjob reset");
            }
          };
          return t;
        })($);
        Debugger.BonusJobs = BonusJobs;
        var Chat = (function (e) {
          var t = {};
          var n = false;
          var i = {
            ":/": "sore",
            "=:)": "invader",
            ">:(": "angry",
            ":'(": "cry",
            ":)": "smile",
            ":D": "grin",
            ":(": "frown",
            ";)": "smirk",
            ":P": "tongue",
            ":o": "ohmy",
            ":x": "muted",
            ":|": "silent",
            ">.<": "palm",
            "-.-": "nc",
            "o.O": "oo",
            "O.o": "oo",
            "^_^": "happy",
            o_O: "oo",
            "x.x": "xx",
            "T.T": "cry",
            "el pollo diablo!": "elpollodiablo",
            "!el pollo diablo": "elpollodiablo_mirror",
            "el pollo diablo?!": "elpollodiablo_front",
            "add me": "sheep.gif",
            "add me!": "sheep_rainbow.gif",
          };
          var s = [];
          var o = {};
          var u = function () {
            if (o.ready) {
              return;
            }
            if (Settings.get("chat", true)) {
              GameInject.ChatLayout(function (e) {
                f(e);
              });
              GameInject.ChatSend(function (e) {
                a(e);
              });
              var e = Cache.load("chathistory");
              if (typeof e === "object" && e !== null) {
                if (e.color) {
                  e = e.color;
                  Cache.save("chathistory", e);
                }
                s = e;
              }
              if (
                $(
                  "div.tw2gui_window.chat.nominimize div.tw2gui_window_buttons_close"
                ).click().length > 0
              ) {
                ChatWindow.open();
              }
            }
            o.ready = true;
          };
          o = Loader.add("Chat", "tw-db Chat Enhancement", u, {
            Settings: true,
            Cache: true,
          });
          var a = function (e) {
            var t = e.input.val();
            if (!t) {
              return;
            }
            var n = function (t) {
              if (e._caps) {
                t = t.toUpperCase();
              }
              if (e._bold) {
                t = t.replace(/\*/g, "~");
                t = `*${t}*`;
              }
              return t;
            };
            if (t.substr(0, 1) === "/") {
              r = new RegExp("^\\/(tell|msg)\\s+([^:]+):(.+)$");
              v = t.match(r);
              if (v) {
                if (e._color) {
                  t = `/tell ${v[2]}:/${e._color}${n(v[3])}`;
                } else {
                  t = `/tell ${v[2]}:${n(v[3])}`;
                }
              }
              e.input.val(t);
              return;
            }
            t = n(t);
            if (e._color) {
              t = `/${e._color}${t}`;
            }
            e.input.val(t);
            return;
          };
          var f = function (e) {
            var t = e.mainDiv.find(".TWDBchat");
            if (t.length === 0) {
              e.mainDiv
                .find(".chat_input")
                .find(".cbg")
                .css("left", "38px")
                .addClass(".TWDBchat");
              e._color = null;
              e._bold = false;
              e._caps = false;
              l(e);
              m(e);
            }
          };
          var l = function (t) {
            var n;
            var r = e(
              '<span style="padding:3px;display:none;width:160px;position:absolute;bottom:20px;left:-3px;" />'
            );
            for (var s in i) {
              n = i[s].indexOf(".gif") === -1 ? `${i[s]}.png` : i[s];
              r.append(
                e(
                  '<img src="' +
                  Game.cdnURL +
                  "/images/chat/emoticons/" +
                  n +
                  '?1" title="' +
                  s +
                  '" style="cursor:pointer;margin:1px;" />'
                ).click(
                  (function (e) {
                    return function () {
                      // biome-ignore lint/style/useTemplate: tested
                      t.input.val(t.input.val() + " " + e + " ");
                      t.input.focus();
                      r.hide();
                    };
                  })(s)
                )
              );
            }
            var o = false;
            t.mainDiv.find(".chat_input").append(
              e(
                '<div style="position:absolute;width:15px;height:15px;bottom:7px;vertical-align:top;left:23px;cursor:pointer;" />'
              )
                .append(
                  e(
                    '<img style="vertical-align:top;" src="' +
                    Images.iconChatSM +
                    '" />'
                  )
                )
                .append(r)
                .on("mouseenter", function () {
                  o = true;
                  r.show();
                })
                .on("mouseleave", function () {
                  o = false;
                  setTimeout(function () {
                    if (!o) {
                      r.hide();
                    }
                  }, 200);
                }
                )
            );
          };
          var c = function (e) {
            var t = e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
            if (t) {
              return (
                String(parseInt((t[1] * 9) / 255 + 0.5, 10)) +
                String(parseInt((t[2] * 9) / 255 + 0.5, 10)) +
                String(parseInt((t[3] * 9) / 255 + 0.5, 10))
              );
            } else {
              return "000";
            }
          };
          var h = function (e) {
            return (
              "rgb(" +
              parseInt((e[0] * 255) / 9, 10) +
              "," +
              parseInt((e[1] * 255) / 9, 10) +
              "," +
              parseInt((e[2] * 255) / 9, 10) +
              ")"
            );
          };
          var p = function (e, t) {
            if (isDefined(t.color)) {
              var n = c(t.color);
              var r = s.length;
              for (var i = 0; i < r; i++) {
                var o = s.shift();
                if (o !== n) {
                  s.push(o);
                }
              }
              s.push(n);
              if (s.length > 5) {
                s.shift();
              }
              Cache.save("chathistory", s);
              e._color = n;
            }
            if (t.color === null) {
              e._color = null;
            }
            if (isDefined(t.bold)) {
              e._bold = t.bold;
            }
            if (isDefined(t.caps)) {
              e._caps = t.caps;
            }
            if (e._bold) {
              e.mainDiv.find(".TWDBtext").css("font-weight", "bold");
            } else {
              e.mainDiv.find(".TWDBtext").css("font-weight", "normal");
            }
            if (e._caps) {
              e.mainDiv.find(".TWDBtext").html("A");
            } else {
              e.mainDiv.find(".TWDBtext").html("a");
            }
            if (e._color) {
              e.mainDiv
                .find(".TWDBcolor")
                .children("div")
                .children("div")
                .css("background-color", h(e._color));
              if (e._color[1] >= 4) {
                e.mainDiv.find(".TWDBtext").css("color", "#000");
              } else {
                e.mainDiv.find(".TWDBtext").css("color", "#fff");
              }
            } else {
              e.mainDiv
                .find(".TWDBcolor")
                .children("div")
                .children("div")
                .css("background-color", "#e0e2e0");
              e.mainDiv.find(".TWDBtext").css("color", "#000");
            }
            e.input.focus();
          };
          var d = function (t) {
            return e(
              '<div style="position:absolute;display:block;width:15px;height:15px;"/>'
            )
              .append(
                e(
                  '<div style="position:absolute;width:15px;height:1px;top:7px;left:0px;background-color:' +
                  t +
                  ';opacity:0.1;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:1px;height:15px;top:0px;left:7px;background-color:' +
                  t +
                  ';opacity:0.1;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:15px;height:3px;top:6px;left:0px;background-color:' +
                  t +
                  ';opacity:0.33;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:3px;height:15px;top:0px;left:6px;background-color:' +
                  t +
                  ';opacity:0.33;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:15px;height:5px;top:5px;left:0px;background-color:' +
                  t +
                  ';opacity:0.47;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:5px;height:15px;top:0px;left:5px;background-color:' +
                  t +
                  ';opacity:0.47;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:13px;height:9px;top:3px;left:1px;background-color:' +
                  t +
                  ';opacity:0.6;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:9px;height:13px;top:1px;left:3px;background-color:' +
                  t +
                  ';opacity:0.6;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:11px;height:11px;top:2px;left:2px;background-color:' +
                  t +
                  ';opacity:0.8;" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:13px;height:7px;top:4px;left:1px;background-color:' +
                  t +
                  ';" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:7px;height:13px;top:1px;left:4px;background-color:' +
                  t +
                  ';" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:9px;height:11px;top:2px;left:3px;background-color:' +
                  t +
                  ';" />'
                )
              )
              .append(
                e(
                  '<div style="position:absolute;width:11px;height:9px;top:3px;left:2px;background-color:' +
                  t +
                  ';" />'
                )
              );
          };
          var m = function (t) {
            try {
              var n = e(
                '<span style="position:relative;display:none;padding:3px;width:300px;position:absolute;bottom:17px;left:-5px;" />'
              );
              n.append(
                '<div style="position:absolute;height: 50px; width:25;display:block" />'
              );
              var r = [
                "black",
                "red",
                "blue",
                "yellow",
                "green",
                "brown",
                "magenta",
                "gray",
              ];
              n.append(
                e(
                  '<div style="display:inline-block;width:15px;height:15px;padding:2px;opacity:0.5;"/>'
                )
                  .append(d("#e0e2e0"))
                  .append(
                    e(
                      '<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;font-weight:bold;">a</td></tr></table></div>'
                    )
                  )
                  .click(function () {
                    if (e(this).css("opacity") === 0.5) {
                      p(t, { bold: true });
                      e(this).css("opacity", 1);
                    } else {
                      p(t, { bold: false });
                      e(this).css("opacity", 0.5);
                    }
                    n.hide();
                  })
              );
              n.append(
                e(
                  '<div style="display:inline-block;width:15px;height:15px;padding:2px;opacity:0.5;"/>'
                )
                  .append(d("#e0e2e0"))
                  .append(
                    e(
                      '<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;">A</td></tr></table></div>'
                    )
                  )
                  .click(function () {
                    if (e(this).css("opacity") === 0.5) {
                      p(t, { caps: true });
                      e(this).css("opacity", 1);
                    } else {
                      p(t, { caps: false });
                      e(this).css("opacity", 0.5);
                    }
                    n.hide();
                  })
              );
              for (var i = 0; i < r.length; i++) {
                n.append(
                  e(
                    '<div style="display:inline-block;width:15px;height:15px;padding:2px;"/>'
                  )
                    .append(d(r[i]))
                    .click(function () {
                      p(t, {
                        color: e(this)
                          .children("div")
                          .children("div")
                          .css("background-color"),
                      });
                      n.hide();
                    })
                );
              }
              n.append(
                e(
                  '<div style="margin:2px;display:inline-block;vertical-align:top;width:15px;height:15px;background:url(' +
                  Images.iconChatNoColor +
                  ')no-repeat 0px 0px transparent;"/>'
                ).click(function () {
                  p(t, { color: null });
                  n.hide();
                })
              );
              n.append(
                e(
                  '<div style="margin:3px;display:inline-block;vertical-align:top;width:13px;height:13px;background:url(' +
                  Images.iconChat +
                  ')no-repeat 0px 0px transparent;"/>'
                ).click(function () {
                  g(t);
                  n.hide();
                })
              );
              var s = false;
              t.mainDiv.find(".chat_input").append(
                e(
                  '<div class="TWDBcolor" style="position:absolute;width:15px;height:15px;bottom:7px;vertical-align:top;left:5px;cursor:pointer;" />'
                )
                  .append(d("#e0e2e0"))
                  .append(
                    e(
                      '<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td class="TWDBtext" style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;">a</td></tr></table></div>'
                    )
                  )
                  .append(n)
                  .on("mouseenter", function () {
                    s = true;
                    n.show();
                  })
                  .on("mouseleave", function () {
                    s = false;
                    setTimeout(function () {
                      if (!s) {
                        n.hide();
                      }
                    }, 200);
                  }
                  )
              );
            } catch (o) {
              Error.report(o, "injectColor");
            }
          };
          var g = function (t) {
            var n = t.mainDiv.find(".TWDBcolor").children("div").children("div");
            var r = c(n.css("background-color"));
            var i = {};
            i.customColor = e(
              '<div style="width:50px;height:50px;display:inline-block;vertical-align:top;margin: 5px;" />'
            );
            i.customColor.css(
              "background-color",
              h(c(n.css("background-color")))
            );
            var o = function (e, t) {
              if ((t && r[e] === 9) || (!t && r[e] === 0)) {
                return;
              }
              var n = [Number(r[0]), Number(r[1]), Number(r[2])];
              n[e] += t ? 1 : -1;
              r = String(n[0]) + String(n[1]) + String(n[2]);
              i.input.val(r);
              if (r[e] === 0) {
                i.plusminus[e].children(".butMinus").css("opacity", 0.3);
              } else {
                i.plusminus[e].children(".butMinus").css("opacity", 1);
              }
              if (r[e] === 9) {
                i.plusminus[e].children(".butPlus").css("opacity", 0.3);
              } else {
                i.plusminus[e].children(".butPlus").css("opacity", 1);
              }
              i.customColor.css("background-color", h(r));
            };
            var u = e(
              '<div style="width:42px;height:48px;display:inline-block;vertical-align:top;margin: 6px 5px 6px 5px;" />'
            );
            i.plusminus = [];
            for (var a = 0; a < 3; a++) {
              switch (a) {
                case 0: f = "#f00"; break;
                case 1: f = "#0f0"; break;
                case 2: f = "#00f"; break;
              }
              i.plusminus[a] = e(
                '<div class="tw2gui_plusminus" style="display:inline-block;background-color:' +
                f +
                ';width:12px;height:46px;padding:1px;"><span class="butPlus" style="cursor:pointer;"></span><span style="width:12px;height:10px;display:inline-block;"></span><span class="butMinus" style="cursor:pointer;"></span></div>'
              );
              i.plusminus[a].children(".butMinus").click(
                (function (e) {
                  return function () {
                    o(e, false);
                  };
                })(a)
              );
              i.plusminus[a].children(".butPlus").click(
                (function (e) {
                  return function () {
                    o(e, true);
                  };
                })(a)
              );
              if (r[a] === 0) {
                i.plusminus[a].children(".butMinus").css("opacity", 0.3);
              }
              if (r[a] === 9) {
                i.plusminus[a].children(".butPlus").css("opacity", 0.3);
              }
              u.append(i.plusminus[a]);
            }
            u.append(i.plusminus[0])
              .append(i.plusminus[1])
              .append(i.plusminus[2]);
            i.input = e(
              '<input maxLength="3" type="text" value="' +
              r +
              '" style="position: relative; top: -35px; left: 2px;color: rgb(255, 255, 255); font-weight: bold; letter-spacing: 6px; text-shadow: 1px 1px 1px rgb(0, 0, 0); width: 43px; background: none repeat scroll 0pt 0pt transparent; border: medium none; height: 18px; line-height: 18px; margin: 0pt; outline: medium none;" />'
            );
            i.input.keyup(function () {
              var e = i.input.val();
              if (e.length < 3) {
                return;
              }
              if (!e.match(/(\d){3}/)) {
                i.input.val(r);
                return;
              }
              r = e;
              for (var t = 0; t < 3; t++) {
                if (r[t] === 0) {
                  i.plusminus[t].children(".butMinus").css("opacity", 0.3);
                } else {
                  i.plusminus[t].children(".butMinus").css("opacity", 1);
                }
                if (r[t] === 9) {
                  i.plusminus[t].children(".butPlus").css("opacity", 0.3);
                } else {
                  i.plusminus[t].children(".butPlus").css("opacity", 1);
                }
              }
              i.customColor.css("background-color", h(r));
              i.input.attr("value", r);
            });
            u.append(i.input);
            var l = { bold: t._bold, caps: t._caps };
            var d = e(
              '<div style="height:50px;display:inline-block;vertical-align:top;margin: 5px;" />'
            );
            var v = new west.gui.Checkbox(
              "**",
              l.bold ? "tw2gui_checkbox_checked" : "",
              function () {
                l.bold = !l.bold;
              }
            );
            e(v.getMainDiv()).css("display", "block").css("margin-bottom", "5px");
            d.append(v.getMainDiv());
            var v = new west.gui.Checkbox(
              "",
              l.caps ? "tw2gui_checkbox_checked" : "",
              function () {
                l.caps = !l.caps;
              }
            );
            d.append(v.getMainDiv());
            var m = e(
              '<div style="width:160px;height:50px;display:inline-block;vertical-align:top;border: 1px solid #000;padding: 0px;margin: 5px;" />'
            );
            m.append(
              '<span style="width:140px;height:15px;display:inline-block;text-align:center;padding: 4px 0px 2px 0px;font-size:11px;"></span>'
            );
            for (var a = 0; a < s.length; a++) {
              var g = e(
                '<div style="width:20px;height:20px;display:inline-block;vertical-align:top;margin: 0px 0px 0px 10px;cursor:pointer;background-color:' +
                h(s[a]) +
                ';" />'
              );
              g.click(function () {
                p(t, {
                  color: e(this).css("background-color"),
                  bold: l.bold,
                  caps: l.caps,
                });
                i.colorBox.hide();
              });
              m.append(g);
            }
            var y = e("<div />")
              .append(i.customColor)
              .append(u)
              .append(d)
              .append(m);
            i.colorBox = new west.gui.Dialog(TWDB.lang.color_dialog_title, y);
            i.colorBox.addButton(TWDB.lang.ok, function () {
              p(t, {
                color: e(i.customColor).css("background-color"),
                bold: l.bold,
                caps: l.caps,
              });
            });
            i.colorBox.addButton("");
            i.colorBox.show();
          };
          return t;
        })(jQuery);
        Debugger.Chat = Chat;
        var Collector = (function (_e) {
          var t = {};
          var n = false;
          var r = {};
          var i = function () {
            if (r.ready) {
              return;
            }
            if (Settings.get("collector", true)) {
              GameInject.injectItem("Trader", "collector", function (e) {
                return s(e);
              });
              GameInject.injectTrader("collector", function (e) {
                if (t.isNewItem(e.item_id)) {
                  var n =
                    '<img src="' +
                    Images.iconNew +
                    '" class="TWDBcollector" title="       " ' +
                    ' style="position:absolute;top:0px;left:0px;padding:0px;border:0px;margin:0px;" />';
                  return n;
                }
                return "";
              });
              GameInject.injectMarket("collector", function (e) {
                return o(e);
              });
              GameInject.injectGetBids();
            }
            r.ready = true;
          };
          r = Loader.add("Collector", "tw-db Collector", i, { Settings: true });
          t.isNewItem = function (e) {
            var t = w.ItemManager.get(e);
            var n = w.Bag.getItemsIdsByBaseItemId(t.item_base_id);
            var r = w.Wear.wear[t.type];
            var i = r && r.obj.item_base_id === t.item_base_id;
            var s = TWDB.ClothCalc.bids[t.item_id];
            var o = TWDB.ClothCalc.recipes[t.item_id];
            if (n.length || i || s || o) {
              return false;
            } else {
              return true;
            }
          };
          var s = function (e) {
            e.divMain.find(".TWDBcollector").remove();
            if (t.isNewItem(e.obj.item_id)) {
              e.divMain.append(
                '<img src="' +
                Images.iconNew +
                '" class="TWDBcollector" title="       " style="position:absolute;top:-8px;left:-15px;padding:0px;border:0px;margin:0px;" />'
              );
            }
          };
          var o = function (e) {
            if (t.isNewItem(e)) {
              return (
                '<img src="' +
                Images.iconNew +
                '" class="TWDBcollector" title="       " style="width:18px;height:18px;position:relative;top:0px;left:0px;padding:0px;border:0px;margin:0px;" />'
              );
            } else {
              return "";
            }
          };
          return t;
        })($);
        Debugger.Collector = Collector;
        var Snippets = (function ($) {
          var _self = {};
          var timeout = null;
          var interval = null;
          var loader = {};
          var init = function () {
            if (loader.ready) {
              return;
            }
            trustTWDB();
            if (Settings.get("button_church", true)) {
              GameInject.MenuButton(TWDB.images.buttonChurch, ' ', addConstructionButton);
            }
            if (Settings.get("button_market", false)) {
              GameInject.MenuButton(TWDB.images.buttonMarket, ' ', addMarketButton);
            }
            if (Settings.get("close_all_wear", true)) {
              addCloseAllWearButton();
            }
            if (Settings.get("collector_sell", true)) {
              GameInject.injectWanderingTraderSellDialog();
            }
            if (Settings.get("custom_event_counter", true)) {
              repositionEventCounters();
            }
            if (Settings.get("no_scrollbars", false)) {
              disableScrollbars();
            }
            if (Settings.get("building_progress", true)) {
              townBuildingProgress();
            }
            if (Settings.get("church_levels", true)) {
              addChurchLevels();
            }
            if (Settings.get("improved_ch_tab", true)) {
              improvedCityhallTab();
            }
            if (Settings.get("fort_recruitment", true)) {
              activateFortRecruitment();
            }
            if (Settings.get("no_work_queue_pa", true)) {
              removeWorkQueuePA();
            }
            if (Settings.get("no_fetch_all_pa", false)) {
              removeVariousPA();
            }
            if (Settings.get("no_wof_nuggets", false)) {
              changeWofNuggets();
            }
            if (Settings.get("market_sell_dialog", true)) {
              enhanceMarketSellDialog();
            }
            if (Settings.get("weekly_crafting", true)) {
              weeklyCrafting();
            }
            if (Settings.get("pin_items", true)) {
              GameInject.injectInventoryAddItemsPinItems();
              GameInject.injectInventoryAddItemDivToInvPinItems();
            }
            if (Settings.get("telegram_bb_codes", true)) {
              GameInject.injectTelegramWindowAppendTelegramDisplaySource();
            }
            if (Settings.get("no_shop_sale", false)) {
              suppressOnGoingEntries();
            }
            if (Settings.get("exp_bar", true)) {
              expBarValues();
            }
            if (Settings.get("mini_chat_gui", false)) {
              allowChatGuiMinimize();
            }
            if (Settings.get("task_list_points", true)) {
              addTaskJobsHints();
              GameInject.injectTaskJobs();
            }
            if (Settings.get("town_forum_blink", false)) {
              removeForumBlink();
            }
            if (Settings.get("enhanced_rankings", true)) {
              addEnhancedRankings();
            }
            if (Settings.get("profile_duel_exp", false)) {
              addDuelXpInProfiles();
            }
            if (Settings.get("regen_timers", true)) {
              addRegenTimers();
            }
            if (Settings.get("select_forum_text", true)) {
              selectForumText();
            }
            if (Settings.get("pin_important_el", true)) {
              TWDB.Util.addCss(`#ui_bottombar, #ui_menubar, #ui_experience_bar {z-index: 20!important;}`);
            }
            if (Settings.get("night_mode", false)) {
              addNightMode();
            }
            if (Settings.get("market_report", true)) {
              TWDB.Util.addCss(`
                .mpb_pickup, .wih_pickup {padding-left: 0!important; width: 65px!important; margin-left: -10px!important;}
              `);
              reworkMarketReport();
            }
            if (Settings.get("improved_market", false)) {
              improvedMarket();
            }
            if (Settings.get("job_show_lp", true)) {
              jobWindowLP();
            }
            if (Settings.get("improved_whisper", true)) {
              improvedWhisper();
            }
            if (Settings.get("instant_quest", false)) {
              addInstantQuests();
            }
            if (Settings.get("colored_quest", false)) {
              addColoredQuests();
            }
            if (Settings.get("import_westforts", true)) {
              importWestForts();
            }
            var e = new ServerDate().date;
            loader.ready = true;
          };
          loader = Loader.add("Snippets", "tw-db code Snippets", init, {
            Settings: true,
          });
          var trustTWDB = function () {
            try {
              var str = showlink.toString();
              str = str.replace("the-west", "tw-db|the-west");
              str = str.replace("|com|", "|com|info|");
              eval(`showlink = ${str}`);
            } catch (_) { }
          };
          var addCloseAllWearButton = function() {
            const addBtn = () => {
              if (!Inventory?.window?.divMain) return;
              const container = $(".tw2gui_window_buttons", Inventory.window.divMain);
              if (!container.length || container.find(".game_ext_close_all_button").length) return;
              const btn = $(`<div class="tw2gui_window_buttons_closeall game_ext_close_all_button" title="<b>     </b>"></div>`);
              btn.on("click", () => {
                Inventory.window?.destroy?.();
                Inventory.dockedWindow?.destroy?.();
                document.querySelectorAll(".tw2gui_window.wear").forEach(win => {
                  win.querySelector(".tw2gui_window_buttons_close")?.click() ||
                  win.querySelector(".tw2gui_window_buttons_closeall")?.click() ||
                  win.__windowInstance?.destroy?.() ||
                  win.remove();
                });
                document.querySelector('.button.inventory.active')?.classList.remove('active');
              });
              container.append(btn);
            };
            if (!window.inventoryObserver) {
              window.inventoryObserver = new MutationObserver(() => addBtn());
              window.inventoryObserver.observe(document.body, { childList: true, subtree: true });
            }
            addBtn();
          };
          var addConstructionButton = function () {
              const churchClass = `build-${Character.homeTown.x}-${Character.homeTown.y}-church`;
              document.querySelectorAll(`.${churchClass}`).forEach(win => {
                const closeBtn = win.querySelector('.tw2gui_window_buttons_close');
                if (closeBtn) {
                  closeBtn.click();
                  return;
                }
                if (win.__windowInstance && typeof win.__windowInstance.destroy === 'function') {
                  win.__windowInstance.destroy();
                  return;
                }
                win.parentNode?.removeChild(win);
              });
              setTimeout(() => {
                if (BuildWindow && typeof BuildWindow.open === 'function') {
                  BuildWindow.open(Character.homeTown.town_id, Character.homeTown.x, Character.homeTown.y, 'church', false);
                }
              }, 50);
          };
          var addMarketButton = function() {
            if (Character.homeTown.town_id) {
              Ajax.remoteCallMode(
                "town",
                "get_town",
                {
                  x: Character.homeTown.x,
                  y: Character.homeTown.y,
                },
                function (json) {
                  if (json.error) return new UserMessage(json.msg).show();
                  MarketWindow.open(
                    Character.homeTown.town_id,
                    json.allBuildings.market.stage
                  );
                  if (Wear?.window) { Wear.window.divMain.style.display = "none"; }
                }
              );
            } else {
              MarketWindow.open();
              new UserMessage(
                "    !",
                UserMessage.TYPE_ERROR
              ).show();
            }
          };
          var repositionEventCounters = function () {
            TWDB.Util.addCss("@media (min-width: 1320px) { .custom_unit_counter {top: -1px!important; margin-left: 310px!important;} #hiro_friends_container {top: -1px!important; margin-right: 304px!important;} }");
          };
          var disableScrollbars = function () {
            $("body").css({ overflow: "hidden" });
          };
          var addChurchLevels = function () {
            BuildWindow.updateLaborPoints_backup = BuildWindow.updateLaborPoints;
            BuildWindow.updateLaborPoints = function (points) {
              BuildWindow.updateLaborPoints_backup.call(this, points);
              if (this.building === "church" && points > 0) {
                var stageCount = Math.floor(this.window.$("div.build_progress_nfo > span.text_bold").text() / 15);
                this.window.$("div.build_progress_nfo").append(` (${stageCount >= 0 ? "+" : ""}${stageCount} )`);
              }
            };
          };
          var townBuildingProgress = function () {
            BuildWindow.initInfo_backup = BuildWindow.initInfo;
            BuildWindow.initInfo = function (data) {
              BuildWindow.initInfo_backup.call(this, data);
              var tmp = $(
                  '<div class="rp_row_jobdata row_build_' +
                    "hammer" +
                    '" style="margin:-2px 0 ' + ($('.twir_bestwear').length ? '-24px' : '0') + ' 0;" title="' +
                    ":&nbsp;            " +
                    '">' +
                    `<span class="rp_jobdata_label_icon"><img src="${Game.cdnURL}/images/icons/` +
                    "hammer" +
                    '.png" alt="" /></span>' +
                    '<span class="rp_jobdata_label text_bold">' +
                    '' +
                    "</span>" +
                    '<span class="rp_jobdata_text text_bold"></span>' +
                    "</div>"
                );
                $("span.rp_jobdata_text", tmp).append(
                  new west.gui.Progressbar(
                    data.build_point,
                    data.build_point_limit
                  ).getMainDiv()
                );
                $(
                  ".build-" +
                    data.x +
                    "-" +
                    data.y +
                    "-" +
                    data.build_key +
                    " div.build_info"
                ).append(tmp);
              };
          };
          var improvedCityhallTab = function () {
            CityhallWindow.Build.fillContent_backup = CityhallWindow.Build.fillContent;
            CityhallWindow.Build.fillContent = function (data) {
              this.table.clearBody();
              for (var i = 0; i < data.length; i++) {
                var r = data[i];
                var build_text;
                if (!this.main.ownTown) {
                  this.table.appendRow();
                  build_text = r.name;
                  this.table
                    .appendToCell(-1, "building_foreign", build_text)
                    .appendToCell(-1, "stage", `${r.stage} / ${r.infinite
                        ? `<img src='${Game.cdnURL}/images/xp_inf_000.png' style='padding-bottom: 4px;'/>`
                        : r.maxStage}`);
                } else if (r.stage === r.maxStage && !r.infinite) {
                } else {
                  this.table.appendRow();
                  build_text =
                    '<a href="#" onClick="javascript:void(BuildWindow.open(' +
                    Character.homeTown.town_id +
                    ", " +
                    Character.homeTown.x +
                    ", " +
                    Character.homeTown.y +
                    ", '" +
                    r.key +
                    "', false));\">" +
                    r.name +
                    "</a></span>";
                  this.table
                    .appendToCell(-1, "building", build_text)
                    .appendToCell(-1, "stage", `${r.stage} / ${r.infinite
                        ? `<img src='${Game.cdnURL}/images/xp_inf_000.png' style='padding-bottom: 4px;'/>`
                        : r.maxStage}`)
                    .appendToCell(-1, "progress", new west.gui.Progressbar(r.buildPoints, r.nextStagePoints).getMainDiv());
                }
              }
            };
          };
          var allowChatGuiMinimize = function () {
            TWDB.Util.addCss(
              "div#ui_bottomleft { width: auto; overflow: hidden; }" +
              "div#ui_chat { margin-top: 12px; }" +
              "div#ui_chat div#toggleMinChat { position: absolute; top: -14px; left: 5px; width: 27px; display: block; background-size: 108px 42px; border: 0px solid rgba(0, 0, 0, 0); background-clip: content-box; }" +
              "div#ui_chat.minchat div#toggleMinChat { background-position: 0px 0px; border-width: 0px 8px 34px 0px; }" +
              "div#ui_chat.minchat div#servertime { display: none; }" +
              "div#ui_chat.minchat > div.tabs div { display: none; }" +
              "div#ui_chat.minchat div.container div.friend { display: none!important; }" +
              "div#ui_chat.minchat div.container div.general { display: block!important; }" +
              "div#ui_chat.minchat div.container div.vertical_divider { display: none; }" +
              "div#ui_chat.minchat img.leave_channel { display: none!important; }" +
              "div#ui_chat div.minchat_tabr { display: none; }" +
              'div#ui_chat.minchat div.minchat_tabr { display: block; position: absolute; left: 32px; top: 0px; width: 8px; height: 34px; background: url("' +
              to_cdn("images/interface/chat/chat-top.png?1") +
              '") top right; }' +
              "div#ui_chat.minchat { position: relative; left: -10px; top: 4px; width: 39px; }" +
              'div#ui_chat.minchat > div.tabs { width: 32px; background: url("' +
              to_cdn("images/interface/chat/chat-top.png?1") +
              '"); }' +
              "div#ui_chat.minchat div.chat_channel { width: 24px; }" +
              "div#ui_chat.minchat div.chat_channel .new_message { left: 2px; top: 0px; }" +
              "div#ui_chat.minchat div.chat_channel div.online_count { background: none; position: absolute; right: 0px; top: -1px; width: auto; height: auto; line-height: normal; padding: 0px; font-size: 8pt; font-weight: bold; text-align: right; text-shadow: -1px 1px 1px #FFF, 0px 0px 2px #FFF; cursor: default; }" +
              "div#ui_chat.minchat div.container { width: 40px; background-position-x: right; }" +
              "div#ui_chat.minchat div.row_title { left: 5px; width: 32px; opacity: 0; }" +
              "div#ui_chat.minchat div.tw2gui_scrollpane { width: 50px; }",
              "minchat"
            );
            $("div#ui_chat")
              .append('<div class="minchat_tabr" />')
              .toggleClass("minchat", Settings.get("mini_chat_gui_min", true))
              .children(".tabs")
              .first()
              .append(
                $('<div id="toggleMinChat" class="tw2gui_arrow_up_top" />').on(
                  "click",
                  function (e) {
                    e.stopPropagation();
                    Settings.set(
                      "mini_chat_gui_min",
                      $("div#ui_chat").toggleClass("minchat").hasClass("minchat")
                    );
                    return false;
                  }
                )
              );
          };
          var addTaskJobsHints = function () {
            var e =
              "div#ui_workcontainer div.twdb_lp_hint { position: absolute; left: 2px; width: 18px; height: 18px; background-color: #432; border: 2px ridge #976; border-radius: 11px; background-blend-mode: soft-light; }" +
              "div.twdb_lp_hint > img { position: absolute; left: 1px; top: 1px; }";
            TWDB.Util.addCss(e);
            var t = function () {
              if (TaskQueue.queue.length) {
                var e,
                  t = $("div#ui_workcontainer"),
                  n,
                  r;
                for (e = 0; e < TaskQueue.queue.length; e++) {
                  if (TaskQueue.queue[e].type === "job") {
                    n = null;
                    r =
                      TWDB.ClothCalc.calcdata.loaded &&
                      TaskQueue.queue[e].data.job_points <
                      TWDB.ClothCalc.calcdata.jobs[
                        TaskQueue.queue[e].data.job.id
                      ].laborpoints.sum -
                      5;
                    if (TaskQueue.queue[e].data.job_points < 0) {
                      n = west.gui.Icon.get(
                        "exclamation-priority-3",
                        "  "
                      );
                    } else if (
                      TaskQueue.queue[e].data.job_points <
                      TaskQueue.queue[e].data.job.malus / 5
                    ) {
                      n = west.gui.Icon.get(
                        "exclamation-priority-2",
                        "  "
                      );
                    } else if (r) {
                      n = west.gui.Icon.get(
                        "exclamation-priority-1",
                        "   "
                      );
                    }
                    if (n !== null) {
                      $(`.task-queuePos-${e} > div.icon`, t)
                        .children(".twdb_lp_hint")
                        .remove()
                        .end()
                        .append(
                          $('<div class="twdb_lp_hint" />')
                            .toggleClass("tw2gui-iconset tw2gui-icon-star", !r)
                            .append(n)
                        );
                    }
                  }
                }
              }
            };
            EventHandler.listen(["taskqueue-updated", "taskqueue-ready"], t);
          };
          const expBarValues = () => {
            if (isDefined(w.SlySuite)) return TWDB.Settings.set("exp_bar", false);
            TWDB.Util.addCss(`div#ui_experience_bar .label {
              text-shadow: 3px 1px 1px #000,3px -1px 1px #000,-2px 1px 1px #000,-2px 0px 0px #000;}`);
            const formatNumber = n => {
                const abs = Math.abs(n);
                return abs >= 1e6 ? `${(n/1e6).toFixed(2)}m` :
                abs >= 1e3 ? `${(n/1e3).toFixed(1)}k` :
                n.toString();
            };
            const updateExpBar = () => {
                const $bar = $("#ui_experience_bar");
                const data = Character.getTrackingAchievement() === undefined
                    ? WestUi.updateTrackXp($bar)
                    : WestUi.updateTrackAchievement($bar);
                $(".label", $bar).off("mouseenter mouseleave");
                $(".label span", $bar).show();
                const labelText = Character.level < 250
                    ? `${data.percent}% - ${formatNumber(data.current)} / ${formatNumber(data.required)} (${formatNumber(data.required - data.current)})`
                    : Character.experience.toLocaleString();
                $(".label span", $bar).html(labelText);
            };
            EventHandler.listen("character_exp_changed", updateExpBar);
            EventHandler.listen("character_tracking_achievement_changed", updateExpBar);
            updateExpBar();
        };
          var suppressOnGoingEntries = function () {
            var e = ["shop_sale"];
            var t = function (e) {
              if ($.isArray(e)) {
                for (var n = 0; n < e.length; n++) {
                  t(e[n]);
                }
              } else if (typeof e === "string") {
                var r = WestUi.NotiBar.main.list;
                for (var n = 0; n < r.length; n++) {
                  if (
                    $(r[n].element)
                      .children()
                      .is(`div.image.${e}`)
                  ) {
                    WestUi.NotiBar.remove(r[n]);
                  }
                }
              }
            };
            var n = function (e) {
              try {
                WestUi.NotiBar.__twdb__add =
                  WestUi.NotiBar.__twdb__add || WestUi.NotiBar.add;
                WestUi.NotiBar.add = function (t) {
                  var n = $(".image", t.element);
                  for (var r = 0; r < e.length; r++) {
                    if (n.hasClass(e[r])) {
                      return;
                    }
                  }
                  WestUi.NotiBar.__twdb__add.apply(this, arguments);
                };
              } catch (t) {
                Error.report(t, "manipulate WestUi.NotiBar.add");
              }
            };
            n(e);
            t(e);
          };
          var removeWorkQueuePA = function () {
            try {
              TWDB.Util.addCss(
                "#queuedTasks .buyPremiumTask {background: none!important}"
              );
              Premium.checkForAutomationPremium = function (_e, t) {
                if (typeof t !== "undefined") return t();
              };
            } catch (e) {
              Error.report(e, "manipulate removeWorkQueuePA");
            }
          };
          var changeWofNuggets = function () {
            try {
              west.gui.payHandler.prototype.__twdb__addPayOption =
                west.gui.payHandler.prototype.addPayOption;
              west.gui.payHandler.prototype.addPayOption = function (e) {
                this.__twdb__addPayOption.apply(this, arguments);
                if (false === e || "nugget" === e || 2 === e || 2 === e.id) {
                  return this;
                }
                this.setSelectedPayId(e.id || e);
                return this;
              };
            } catch (e) {
              Error.report(e, "manipulate changeWofNuggets");
            }
          };
          var removeVariousPA = function () {
            var e = [],
              t;
            if (Settings.get("no_fetch_all_pa", false)) e.push("marketdelivery all");
            if (!e.length) return;
            t = new RegExp(e.join("|"));
            try {
              Premium.twdb_confirmUse = Premium.confirmUse;
              Premium.confirmUse = function (e, n, r, i, s, o, u, a) {
                if (t.test(e)) {
                  if (typeof u !== "undefined") return u();
                } else {
                  return Premium.twdb_confirmUse(e, n, r, i, s, o, u, a);
                }
              };
            } catch (n) {
              Error.report(n, "manipulate removeVariousPA");
            }
          };
          var activateFortRecruitment = function () {
            TWDB.Util.addCss(`
              .twir_fb_sector_map_btn {display: none;}
              .TWDS_charinfocolor {margin-top: 20px;}
            `);
            try {
              FortBattleWindow.__twdb__getInfoArea = FortBattleWindow.__twdb__getInfoArea || FortBattleWindow.getInfoArea;
              FortBattleWindow.getInfoArea = function () {
                this.preBattle.battleData.canSetPrivilege = true;
                return FortBattleWindow.__twdb__getInfoArea.apply(this, arguments);
              };
            } catch (e) {
              Error.report(e, "manipulate FortBattleWindow.getInfoArea");
            }
          };
          var enhanceMarketSellDialog = function () {
            var e;
            var t = TWDB.Cache.load("msdsettings");
            if (typeof t !== "object" || t === null) {
              t = { cb: {} };
            } else if (typeof t.cb !== "object" || t.cb === null) {
              t.cb = {};
            }
            try {
              if (!isDefined(west.gui.Dialog.prototype.__twdb__show)) {
                west.gui.Dialog.prototype.__twdb__show =
                  west.gui.Dialog.prototype.show;
              }
              if (TWDB.script.isDev()) {
                west.gui.Dialog.prototype.show = function () {
                  if (this.divMain.attr("id") === "market_createoffer_window") {
                    var e = this.__twdb__show();
                    w.setTimeout(function () {
                      MarketWindow.TWDB_touchUpSellDialog(e);
                    }, 25);
                    return e;
                  }
                  var t = ["div#equip_manager_list", "span.twdb_banking"].join(
                    ", "
                  );
                  if ($(this.divMain).find(t).addBack().is(t)) {
                    return this.setModal(false)
                      .setBlockGame(false)
                      .setDraggable(true)
                      .__twdb__show();
                  }
                  return this.__twdb__show();
                };
              } else {
                west.gui.Dialog.prototype.show = function () {
                  if (this.divMain.attr("id") === "market_createoffer_window") {
                    var e = this.__twdb__show();
                    w.setTimeout(function () {
                      MarketWindow.TWDB_touchUpSellDialog(e);
                    }, 25);
                    return e;
                  }
                  return this.__twdb__show();
                };
              }
              if (!isDefined(MarketWindow.TWDB_createMarketOffer)) {
                MarketWindow.TWDB_createMarketOffer =
                  MarketWindow.createMarketOffer;
              }
              MarketWindow.createMarketOffer = function (t) {
                var n = typeof t === "number" ? t : $(t).data("itemId");
                if (n === undefined) {
                  var r = $(this).data("dnd_droppedObj");
                  n = r.data("itemId");
                }
                e = w.ItemManager.get(n);
                return MarketWindow.TWDB_createMarketOffer(n);
              };
            } catch (n) {
              Error.report(n, "manipulate market sell dialog");
            }
            MarketWindow.TWDB_touchUpSellDialog = function (n) {
              if (n.divMain.attr("id") !== "market_createoffer_window") {
                return;
              }
              var r = $("div.tw2gui_dialog_content", n.divMain);
              if (r.find("#auction_item_slot", r).html() === "")
                return w.setTimeout(function () {
                  MarketWindow.TWDB_touchUpSellDialog(n);
                }, 25);
              $("div.tw2gui_dialog_framefix").css({
                left: "50%",
                top: "50%",
                width: "1px",
                height: "1px",
              });
              $("textarea#auction_description", r)
                .css("width", "270px")
                .closest("tr")
                .append("<td id='twdb_msd_desc_cc'>");
              var i = $("table:nth-child(2)", r);
              $("tr:first-child", i).after(
                $("<tr>").append(
                  '<td id="twdb_msd_bid_btn_cc">',
                  '<td id="twdb_msd_bid_cc" style="min-width: 90px;">',
                  '<td id="twdb_msd_buy_btn_cc">',
                  '<td id="twdb_msd_buy_cc" style="min-width: 90px;">'
                )
              );
              $(
                "tr:nth-last-child(5) td:nth-child(2) span.tw2gui_textfield",
                i
              ).after(
                '<span id="twdb_msd_mult_cc" title=" ()       " style="background-image: url(&quot;/images/ranking/town_ranking_icons.png&quot;); display:inline-block; height:16px; width:16px; background-position:0px -80px; cursor:pointer;">&nbsp;</span>'
              );
              $("tr:last-child td:first-child", i)
                .attr("colspan", 3)
                .before('<td id="twdb_msd_opt_cc">');
              var s = function () {
                n.divMain.css({
                  "margin-top": `-${n.divMain.height() / 2}px`,
                  "margin-left": `-${n.divMain.width() / 2}px`,
                });
              };
              var o = function () {
                var e,
                  n = this.groupClass;
                $(`div.tw2gui_checkbox.${n}`)
                  .not(this.divMain)
                  .removeClass("tw2gui_checkbox_checked");
                if (this.isSelected()) {
                  e = this.getValue();
                  this.divMain.next().click();
                } else {
                  e = 0;
                }
                t.cb[n] = e;
                TWDB.Cache.save("msdsettings", t);
                new UserMessage(
                  " ",
                  UserMessage.TYPE_SUCCESS
                ).show();
                return this;
              };
              var u = function (e, n) {
                t[e] = n;
                TWDB.Cache.save("msdsettings", t);
                new UserMessage(
                  " ",
                  UserMessage.TYPE_SUCCESS
                ).show();
              };
              var a = function () {
                var e, n;
                for (e in t.cb) {
                  if (!Object.hasOwn(t.cb, e)) continue;
                  $(`div.tw2gui_checkbox.${e}`).each(function () {
                    n = $(this).guiElement();
                    if (n.getValue() === t.cb[e]) {
                      n.setSelected(true, true);
                      $(this).next().click();
                    }
                  });
                }
                $("textarea#auction_description", r).val(t.description || "");
                $("span#market_days.tw2gui_combobox", r)
                  .guiElement()
                  .select(t.duration || 1);
                $("span#market_rights.tw2gui_combobox", r)
                  ?.guiElement()
                  ?.select(isDefined(t.rights) ? t.rights : 2);
              };
              $("#twdb_msd_desc_cc", r).append(
                $(
                  '<div class="tw2gui-iconset tw2gui-icon-save" title="    ">'
                ).click(function () {
                  u("description", $("textarea#auction_description", r).val());
                }),
                $(
                  '<div class="tw2gui-iconset tw2gui-icon-abort" title=" ">'
                ).click(function () {
                  u("description", "");
                  $("textarea#auction_description", r).val("");
                })
              );
              $("#twdb_msd_bid_btn_cc", r).append(
                $(
                  '<span class="tw2gui-iconset tw2gui-icon-abort" title=" " style="display: inline-block;">'
                ).click(function () {
                  $("div.tw2gui_checkbox.twdb_msd_bid_fix", r).each(function () {
                    const checkbox = $(this).guiElement();
                    if (checkbox?.isSelected()) {
                      checkbox.setSelected(false, true);
                      o.call(checkbox);
                    }
                  });
                  $("#market_min_bid", r).val("").keyup();
                })
              );
              $("#twdb_msd_buy_btn_cc", r).append(
                $(
                  '<span class="tw2gui-iconset tw2gui-icon-abort" title=" " style="display: inline-block;">'
                ).click(function () {
                  $("div.tw2gui_checkbox.twdb_msd_buy_fix", r).each(function () {
                    const checkbox = $(this).guiElement();
                    if (checkbox?.isSelected()) {
                      checkbox.setSelected(false, true);
                      o.call(checkbox);
                    }
                  });
                  $("#market_max_price", r).val("").keyup();
                })
              );
              $("#twdb_msd_buy_cc", r)
                .append(
                  new west.gui.Checkbox("", "twdb_msd_buy_fix", o)
                    .setTitle(TWDB.lang.use_as_default_price)
                    .setValue(2).divMain
                )
                .append(
                  $('<div class="tw2gui_checkbox" title=" ">')
                    .append(
                      '<span class="invPopup_buyicon" style="height:20px;">'
                    )
                    .click(function () {
                      $("#market_max_price", r)
                        .val(e.price || 1)
                        .keyup();
                    })
                )
                .append("&nbsp;&nbsp;")
                .append(
                  new west.gui.Checkbox("", "twdb_msd_buy_fix", o)
                    .setTitle(TWDB.lang.use_as_default_price)
                    .setValue(1).divMain
                )
                .append(
                  $('<div class="tw2gui_checkbox" title=" ">')
                    .append(
                      '<span class="invPopup_sellicon" style="height:20px;">'
                    )
                    .click(function () {
                      $("#market_max_price", r)
                        .val(e.sell_price || Math.round(e.price / 2) || 1)
                        .keyup();
                    })
                );
              $("#twdb_msd_bid_cc", r)
                .append(
                  new west.gui.Checkbox("", "twdb_msd_bid_fix", o)
                    .setTitle(TWDB.lang.use_as_default_price)
                    .setValue(2).divMain
                )
                .append(
                  $('<div class="tw2gui_checkbox" title=" ">')
                    .append(
                      '<span class="invPopup_buyicon" style="height:20px;">'
                    )
                    .click(function () {
                      $("#market_min_bid", r)
                        .val(e.price || 1)
                        .keyup();
                    })
                )
                .append("&nbsp;&nbsp;")
                .append(
                  new west.gui.Checkbox("", "twdb_msd_bid_fix", o)
                    .setTitle(TWDB.lang.use_as_default_price)
                    .setValue(1).divMain
                )
                .append(
                  $('<div class="tw2gui_checkbox" title=" ">')
                    .append(
                      '<span class="invPopup_sellicon" style="height:20px;">'
                    )
                    .click(function () {
                      $("#market_min_bid", r)
                        .val(e.sell_price || Math.round(e.price / 2) || 1)
                        .keyup();
                    })
                );
              $("#twdb_msd_mult_cc", r).click(function () {
                var e,
                  t = parseInt($("#market_sell_itemStack", r).val(), 10);
                if (t > 0) {
                  e = parseInt($("#market_min_bid", r).val(), 10);
                  if (e > 0) {
                    $("#market_min_bid", r)
                      .val(t * e)
                      .keyup();
                  }
                  e = parseInt($("#market_max_price", r).val(), 10);
                  if (e > 0) {
                    $("#market_max_price", r)
                      .val(t * e)
                      .keyup();
                  }
                }
              });
              $("#twdb_msd_opt_cc", r).append(
                $(
                  '<span class="tw2gui-iconset tw2gui-icon-save" title="      " style="display: inline-block;">'
                ).click(function () {
                  u("duration", parseInt($("#market_days", r).data("value"), 10));
                  u("rights", parseInt($("#market_rights", r).data("value"), 10));
                }),
                $(
                  '<span class="tw2gui-iconset tw2gui-icon-abort" title=" " style="display: inline-block;">'
                ).click(function () {
                  u("duration", 1);
                  $("span#market_days.tw2gui_combobox", r).guiElement().select(1);
                  u("rights", 2);
                  $("span#market_rights.tw2gui_combobox", r)
                    .guiElement()
                    .select(2);
                })
              );
              var f = $("span#market_rights.tw2gui_combobox", r)?.guiElement()
                ?.items;
              if (f && f.length === 3) {
                var l = ["home", "flag", "world"];
                for (var c = 0; c < f.length; c++) {
                  f[c].node[0].innerHTML =
                    '<span class="tw2gui-iconset tw2gui-icon-' +
                    l[f[c].value] +
                    '" style="display: inline-block;position: relative;top: 4px;"></span>&nbsp;' +
                    f[c].node[0].innerHTML;
                }
              }
              var h = $("h4", r),
                p = $("table#mps_otheroffers", r);
              if (
                $("tr", p).length > 2 ||
                $("tr:nth-child(2) > td", p).attr("colspan") !== 4
              ) {
                h.html(`${h.html()}&nbsp;(${$("tr", p).length - 1})`)
                  .click(function () {
                    p.toggle();
                    s();
                  })
                  .css({ cursor: "pointer" });
              } else {
                h.html(`${h.html()}&nbsp;(0)`);
                p.hide();
              }
              s();
              a();
            };
          };
          var weeklyCrafting = function () {
            if (w.Character.professionId && w.Character.professionSkill > 599) {
              var e = function (e) {
                var t = new OnGoingEntry();
                var n = ItemManager.get(ItemManager.get(e).craftitem);
                var r =
                  "<div style='text-align:center;'>   !<br />" +
                  '<div class="item  item_inventory" style="display:inline-block;float:none;"><img class="tw_item item_inventory_img" src="' +
                  n.image +
                  '"></div><br />' +
                  n.name +
                  "</div>";
                t.init(
                  "",
                  function () {
                    CharacterWindow.open("crafting");
                    TWDB.Cache.save("craftingCheck", {
                      found: false,
                      date: null,
                    });
                  },
                  11
                );
                t.setTooltip(r);
                t.setImageClass("work");
                t.highlightBorder();
                WestUi.NotiBar.add(t);
                TitleTicker.setNotifyMessage("");
              };
              var t = function () {
                var r = TWDB.Cache.load("craftingCheck") || {
                  found: false,
                  date: null,
                };
                if (!r.found) {
                  return n();
                }
                var i = new Date(r.date).getTime() - new ServerDate().getTime();
                if (i < 0) {
                  return e(r.found);
                } else if (i < 864e5) {
                  if (i < 18e4) {
                    w.setTimeout(function () {
                      e(r.found);
                    }, i);
                  } else {
                    w.setTimeout(function () {
                      t();
                    }, parseInt(i / 2, 10));
                  }
                }
              };
              var n = function () {
                Ajax.remoteCall("crafting", "", {}, function (e) {
                  if (e.error) {
                    return new UserMessage(e.msg).show();
                  }
                  if (
                    Object.hasOwn(e, "recipes_content") &&
                    e.recipes_content.length > 0
                  ) {
                    var n;
                    var r = [20099e3, 20104e3, 20109e3, 20114e3];
                    for (n = 0; n < e.recipes_content.length; n++) {
                      if (r.indexOf(e.recipes_content[n].item_id) !== -1) {
                        if (e.recipes_content[n].last_craft) {
                          TWDB.Cache.save("craftingCheck", {
                            found: e.recipes_content[n].item_id,
                            date: new Date(
                              new ServerDate().getTime() +
                              parseInt(
                                e.recipes_content[n].last_craft * 1e3,
                                10
                              )
                            ),
                          });
                        } else {
                          TWDB.Cache.save("craftingCheck", {
                            found: e.recipes_content[n].item_id,
                            date: new Date(null),
                          });
                        }
                        return t();
                      }
                    }
                  }
                  TWDB.Cache.save("craftingCheck", { found: false, date: null });
                });
              };
              t();
            }
          };
          var removeForumBlink = function () {
              setTimeout(function () {
                $("div.city > div.city").removeClass("dock-highlight");
              }, 1000);
              //The West Menu
              setTimeout(function () {
                $("#TWM_bottombar div.city > div.Stadt").removeClass("TWM_highlight");
              }, 1000);
          };
          var addEnhancedRankings = function () {
            var rankPlayerCache = `twdb_${Character.playerId}_playercategory`;
            var playerChars = JSON.parse(localStorage.getItem(rankPlayerCache) || '{}');
            var charClass = [null, 'greenhorn', 'duelist', 'adventurer', 'worker', 'soldier'];
            var playerNameSelectors = [
              '.exp_playername',
              '.duel_playername',
              '.forts_playername',
              '.craft_playername',
              '.build_playername',
              '.mpi_playername',
              '.achieve_playername',
              '.skill_playername',
            ];
            function addCharClassToCell(cell) {
              var pIdMatch = cell.innerHTML.match(/open\((\d+)/);
              if (!pIdMatch) return;
              var pId = pIdMatch[1];
              if (!playerChars[pId]) return getCharClass(pId, function () { addCharClassToCell(cell); });
              var charC = charClass[playerChars[pId]];
              $(cell).prepend(
                '<img src="images/class_choose/class_' + charC + '.png" title="' +
                Game.InfoHandler.getLocalString4Charclass(charC) + '"> '
              );
            }
            function getCharClass(_pId, callback) {
              Ajax.remoteCallMode('ranking', 'get_data', {
                tab: 'experience',
                entries_per_page: 9999
              }, function (json) {
                for (var jr of json.ranking) {
                  playerChars[jr.player_id] = charClass.indexOf(jr.class);
                }
                localStorage.setItem(rankPlayerCache, JSON.stringify(playerChars));
                if (callback) callback();
              });
            }
            function injectCharIcons() {
              playerNameSelectors.forEach(sel => {
                var cells = $(sel);
                for (var i = 0; i < cells.length; i++) {
                  addCharClassToCell(cells[i]);
                }
              });
            }
            TWDB.Util.addCss(`
              #ranking_exptable div.exp_exp, #ranking_duel div.duel_exp {text-align: center;}
              #ranking_exptable div.exp_town, #ranking_duel div.duel_town, #ranking_cities .tbody .town_member_lvl {padding-left: 10px;}
              #ranking_duel div.duel_win, #ranking_duel div.duel_loss, #ranking_duel div.duel_diff {margin-right: 5px;}
              #ranking_crafting div.craft_profession_id {width: 115px;}
              #ranking_cities .row_head .town_member_lvl span {margin: 0px 20px;}
              #ranking_exptable div.exp_class {display: none;}
              #ranking_exptable div.exp_playername {width: 260px;}
              #ranking_adventures div.mpi_knockouts, #ranking_adventures div.mpi_total_actions, #ranking_adventures div.mpi_games_played, #ranking_adventures div.mpi_friendly_dmg {width: 80px;}
              #ranking_adventures div.mpi_rage_quits {width: 88px;}
              div.ranking span.search_lable_span {top: 10px;}
            `);
            function customRankingColumns(selectors) {
              selectors.forEach(sel => {
                var elements = $(`${sel.selector}:not(${sel.skip})`);
                for (var i = 0; i < elements.length; i++) {
                  if (sel.hidden) {
                    $(elements[i]).hide();
                  } else {
                    elements[i].innerText = format_number(elements[i].innerText);
                    if (sel.diff && i !== 0) {
                      elements[i].title = format_number(
                        deformat_number(elements[i].innerText) -
                        deformat_number(elements[i - 1].innerText)
                      );
                    }
                  }
                }
              });
            }
            function rankingUpdate(module, selectors) {
              module.updateTable_backup = module.updateTable;
              module.updateTable = function(be_data) {
                module.updateTable_backup.call(this, be_data);
                customRankingColumns(selectors);
                injectCharIcons();
              };
            }
            rankingUpdate(RankingWindow.Experience, [
              {selector: ".exp_exp", skip: "div.cell.cell_3", diff: true},
              {selector: ".exp_class", skip: "div.cell.cell_4", diff: true, hidden: true}
            ]);
            rankingUpdate(RankingWindow.Duels, [
              {selector: ".duel_exp", skip: "div.cell.cell_2", diff: true},
              {selector: ".duel_win", skip: "div.cell.cell_3", diff: true},
              {selector: ".duel_loss", skip: "div.cell.cell_4", diff: true},
              {selector: ".duel_diff", skip: "div.cell.cell_5", diff: false}
            ]);
            rankingUpdate(RankingWindow.FortBattles, [
              {selector: ".forts_score", skip: "div.cell.cell_2", diff: true},
              {selector: ".forts_damage_dealt", skip: "div.cell.cell_3", diff: true},
              {selector: ".forts_hits_taken", skip: "div.cell.cell_4", diff: true},
              {selector: ".forts_dodges", skip: "div.cell.cell_5", diff: true}
            ]);
            rankingUpdate(RankingWindow.Crafting, [
              {selector: ".craft_score", skip: "div.cell.cell_4", diff: true},
              {selector: ".craft_items_created", skip: "div.cell.cell_5", diff: true},
              {selector: ".craft_profession_skill", skip: "div.cell.cell_3", diff: false}
            ]);
            rankingUpdate(RankingWindow.Construction, [
              {selector: ".build_total_cp", skip: "div.cell.cell_2", diff: true},
              {selector: ".build_fair_points", skip: "div.cell.cell_3", diff: false},
              {selector: ".build_stage_ups", skip: "div.cell.cell_4", diff: false}
            ]);
            rankingUpdate(RankingWindow.Adventures, [
              {selector: ".mpi_knockouts", skip: "div.cell.cell_2", diff: true},
              {selector: ".mpi_total_actions", skip: "div.cell.cell_3", diff: true},
              {selector: ".mpi_games_played", skip: "div.cell.cell_4", diff: true},
              {selector: ".mpi_friendly_dmg", skip: "div.cell.cell_5", diff: true},
              {selector: ".mpi_rage_quits", skip: "div.cell.cell_6", diff: false}
            ]);
            rankingUpdate(RankingWindow.Achievements, [
              {selector: ".achieve_total", skip: "div.cell.cell_2", diff: true},
              {selector: ".achieve_first", skip: "div.cell.cell_3", diff: false},
              {selector: ".achieve_points", skip: "div.cell.cell_4", diff: true}
            ]);
            rankingUpdate(RankingWindow.Cities, [
              {selector: ".town_points_sum", skip: "div.cell.cell_2", diff: true},
              {selector: ".town_points", skip: "div.cell.cell_3", diff: true},
              {selector: ".town_fort_points", skip: "div.cell.cell_4", diff: false},
              {selector: ".town_member_points", skip: "div.cell.cell_5", diff: false},
              {selector: ".town_duel_points", skip: "div.cell.cell_6", diff: false}
            ]);
            rankingUpdate(RankingWindow.Skills, [
              {selector: ".skill_pointss", skip: "div.cell.cell_2", diff: true}
            ]);
          };
          var addDuelXpInProfiles = function () {
              PlayerProfileMain.setProfileInfo_backup = PlayerProfileMain.setProfileInfo_backup || PlayerProfileMain.setProfileInfo;
              PlayerProfileMain.setProfileInfo = function () {
                PlayerProfileMain.setProfileInfo_backup.apply(this, arguments);
                var char_lvl = this.resp.level,
                duel_lvl = this.resp.duelLevel,
                target = $(`.playerprofile-${this.playerid} .profileinfo-duellevel .profileinfo-value`),
                dLvlRange = function (dl) {
                    return {
                      min: Math.ceil(dl / 1.4 + 0.01),
                      max: Math.min(450, Math.floor(dl * 1.4 - 0.01))
                    };
                  },
                range = dLvlRange(duel_lvl),
                getXp = function (lvl) {
                  return Math.ceil((lvl * 10) ** (1 / 0.6));
                },
                getLvl = function (xp, percent) {
                  return char_lvl + Math.floor((xp * (percent || 1)) ** 0.6 / 10);
                },
                minXp = getXp(duel_lvl - char_lvl),
                maxXp = duel_lvl === '450' ? '<b></b>' : getXp(duel_lvl + 1 - char_lvl),
                minLvl = getLvl(minXp, 0.9),
                maxLvl = duel_lvl === '450' ? '450' : getLvl(maxXp, 0.9);
                target.append(` <div class="tw2gui-iconset tw2gui-icon-question-priority-4" title="<span>     : ${range.min} - ${range.max}<br><br>     : ${minXp} - ${maxXp}<br>  -10%    ${minLvl}${maxLvl > minLvl ? ` - ${maxLvl}` : ''}</span>" style="display:inline-block;vertical-align:top;cursor:pointer;"></div>`);
              };
          };
          var addRegenTimers = function () {
            try {
              TWDB.Util.addCss(`
                #rt_container {width: 16px; top: 144px; left: 8px; position: relative; display: flex; flex-direction: column; align-items: center;}
                #rt_container img {cursor: help; margin: 2px 0; padding: 0 12px 0 6px; filter: hue-rotate(-50deg) saturate(777%);}
              `);
              const charPanel = $("#ui_character_container");
              const container = $('<div id="rt_container">');
              const createTimerImage = (id) => {
                const popup = new MousePopup();
                const $img = $(`<img id="${id}" src="${Images.iconRegen}" alt="sleeping">`).addMousePopup(popup);
                return { $img, popup };
              };
              const timers = [
                {id: "rt_health", maxKey: "maxHealth", regenKey: "healthRegen", currentKey: "health", dateKey: "healthDate", popup: null,},
                {id: "rt_energy", maxKey: "maxEnergy", regenKey: "energyRegen", currentKey: "energy", dateKey: "energyDate", popup: null,},
              ];
              timers.forEach((timer) => {
                const widget = createTimerImage(timer.id);
                timer.$img = widget.$img;
                timer.popup = widget.popup;
                container.append(widget.$img);
              });
              function RegenTimer(maxKey, regenKey, currentKey, dateKey, renderFn) {
                let maxVal = Character[maxKey];
                let regenVal = Character[regenKey];
                let currentVal = Character[currentKey];
                let lastUpdate = Character[dateKey];
                let perHour, secondsToFull, nextTick, percentMissing;
                const recalc = () => {
                  perHour = maxVal * regenVal;
                  const oneTick = 3600 / perHour;
                  const missing = maxVal - currentVal;
                  secondsToFull = missing * oneTick;
                  nextTick = oneTick - Game.getServerTime() + lastUpdate;
                  percentMissing = Math.round((100 / maxVal) * missing);
                };
                const checkForChanges = () => {
                  if (
                    maxVal !== Character[maxKey] ||
                    regenVal !== Character[regenKey] ||
                    currentVal !== Character[currentKey] ||
                    lastUpdate !== Character[dateKey]
                  ) {
                    maxVal = Character[maxKey];
                    regenVal = Character[regenKey];
                    currentVal = Character[currentKey];
                    lastUpdate = Character[dateKey];
                    recalc();
                  }
                };
                const formatTime = (v) => v.formatDuration();
                recalc();
                setInterval(() => {
                  checkForChanges();
                  if (secondsToFull > 1) secondsToFull--;
                  if (nextTick > 1) nextTick--;
                  renderFn(formatTime(secondsToFull), perHour, formatTime(nextTick), percentMissing);
                }, 1000);
              }
              timers.forEach((timer) => {
                new RegenTimer(
                  timer.maxKey,
                  timer.regenKey,
                  timer.currentKey,
                  timer.dateKey,
                  (timeStr, perHour, nextStr, percentMissing) => {
                    timer.popup.setXHTML(
                      s(
                        `    ${timer.id.includes("health") ? "" : ""}: <b>%1</b><br>` +
                        `: <b>%4%</b>&boxv;` + `  : <b>%2</b><br>` +
                        `  ${timer.id.includes("health") ? "" : ""} : <b>%3</b><br>`,
                        timeStr,
                        perHour,
                        nextStr,
                        percentMissing
                      )
                    );
                  }
                );
              });
              charPanel.append(container);
            } catch (e) {
              Error.report(e, "RegenTimers");
            }
          };
          var selectForumText = function () {
            try {
                const style = $(`
                    <style>
                    #forum, #ui_chat, div#ui_topbar > div, #ui_character_container, .tw2gui_window {
                      -webkit-user-select: text !important;
                      -khtml-user-select: text !important;
                      -moz-user-select: text !important;
                      -ms-user-select: text !important;
                      user-select: text !important;
                    }
                    </style>
                `);
                const makeForumSelectable = () => {
                    $("iframe[src='forum.php']").on("load", function () {
                        const content = $(this).contents();
                        content.find("head").append(style);
                    });
                };
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mut) => {
                        mut.addedNodes.forEach((node) => {
                            if (node.tagName === "IFRAME") {
                                makeForumSelectable();
                            }
                        });
                    });
                });
                observer.observe(document.body, { childList: true, subtree: true });
                makeForumSelectable();
            } catch (e) {console.error("Error enabling selectable text:", e);}
          };
          var addNightMode = function () {
            try {
              $("#map").css({ "filter": "brightness(55%)", "-webkit-filter": "brightness(55%)" });
            } catch (e) {console.error("Error enabling Night Mode:", e);}
          };
          var reworkMarketReport = function () {
            if (document.getElementsByClassName("marketplace").length > 0) {
              document.querySelectorAll('[id^="mpb_marketOfferReport"]').forEach(img => {
                var row = img.parentNode.parentNode;
                var offerMsgImg = row.querySelector(".cell_8").querySelector("img");
                if (offerMsgImg !== null) {
                  img.src = `${Game.cdnURL}/images/icons/warn_circle.png`;
                  img.height = 16;
                  offerMsgImg.parentNode.insertBefore(img, offerMsgImg);
                }
                else { img.remove(); }
              }
              );
            }
            if (Settings.get("improved_market", true)) {
              return;
            }
            else {
              MarketWindow.Buy.updateTable_backup = MarketWindow.Buy.updateTable_backup || MarketWindow.Buy.updateTable;
              MarketWindow.Buy.updateTable = function () {
                MarketWindow.Buy.updateTable_backup.apply(this, arguments);
                if (Character.homeTown.town_id) {
                  reworkMarketReport();
                }
              };
            }
          };
          var improvedMarket = function () {
            try {
              MarketWindow.sellRights = [
                    { i: 'town_new', t: '' },
                    { i: 'friends', t: '' },
                    { i: 'welt', t: '' }
                  ];
                  var getRights = function (page) {
                    Ajax.remoteCall('building_market', 'search', {
                      page: page,
                      sort: 'distance',
                      visibility: 0
                    }, function (json) {
                      var results = json.msg.search_result;
                      for (var i = 0; i < results.length; i++) {
                        var jsr = results[i];
                        if (jsr.seller_name === Character.name) {
                          $(`.marketSellsData_${jsr.market_offer_id} .mps_pickup`)
                            .prepend('<img src="images/icons/' +
                              MarketWindow.sellRights[jsr.sell_rights].i +
                              '.png" title="' +
                              MarketWindow.sellRights[jsr.sell_rights].t + '">');
                        }
                      }
                      if (page === 1 && json.msg.next) getRights(2);
                    });
                  };
                  MarketWindow.Sell.updateTable_backup = MarketWindow.Sell.updateTable_backup || MarketWindow.Sell.updateTable;
                  MarketWindow.Sell.updateTable = function () {
                    MarketWindow.Sell.updateTable_backup.apply(this, arguments);
                    if (Character.homeTown.town_id) {
                      getRights(1);
                    }
                  };
                  MarketWindow.Buy.updateTable_backup = MarketWindow.Buy.updateTable;
                  MarketWindow.Buy.updateTable = function (data) {
                    MarketWindow.Buy.updateTable_backup.call(this, data);
                    if (Character.homeTown.town_id) {
                      for (var i = 0; i < data.length; i++) {
                        $(`#mpb_vendor_${data[i].market_offer_id}`)
                          .before('<img src="images/icons/' +
                            MarketWindow.sellRights[data[i].sell_rights].i +
                            '.png" title="' +
                            MarketWindow.sellRights[data[i].sell_rights].t + '">');
                      }
                      reworkMarketReport();
                    }
                  };
                  // MarketWindow.WhatIsHot.updateTable_backup = MarketWindow.WhatIsHot.updateTable;
                  // MarketWindow.WhatIsHot.updateTable = function (data) {
                  //   MarketWindow.WhatIsHot.updateTable_backup.call(this, data);
                  //   if (Character.homeTown.town_id) {
                  //     for (var i = 0; i < data.length; i++) {
                  //       $('#mpb_vendor_' + data[i].market_offer_id)
                  //         .before('<img src="images/icons/' +
                  //           MarketWindow.sellRights[data[i].sell_rights].i +
                  //           '.png" title="' +
                  //           MarketWindow.sellRights[data[i].sell_rights].t + '">');
                  //     }
                  //     reworkMarketReport();
                  //   }
                  // };
            } catch (e) {
              Error.report(e, "improvedMarket");
            }
          };
          var improvedWhisper = function () {
            try {
              var soundBaseURL = `${Script.protocol}://${Script.folder_url}whispers/`;
              var soundOptions = [
                "tw",
                "bum",
                "chime",
                "coin",
                "coin2",
                "icq",
                "qip",
                "tinkle",
                "trumpet",
                "vk",
              ];
              var soundID = 9;
              var eventContext = {};
              var enableKey = "improved_whisper";
              var soundKey = "beeperSound";
              var currentSound = `${soundBaseURL + soundOptions[soundID]}.mp3`;
              var normalizeStoredSound = function (value) {
                if (typeof value === "string" && value !== "" && /^-?\d+$/.test(value)) {
                  return parseInt(value, 10);
                }
                return value;
              };
              var getStoredSound = function () {
                return normalizeStoredSound(Settings.get(soundKey, soundID));
              };
              var setStoredSound = function (value) {
                Settings.set(soundKey, value);
              };
              Settings.get(enableKey, true);
              var updateSound = function () {
                var soundSetting = getStoredSound();
                if (typeof soundSetting === "number" && soundOptions[soundSetting]) {
                  currentSound = `${soundBaseURL + soundOptions[soundSetting]}.mp3`;
                } else if (typeof soundSetting === "string" && soundSetting) {
                  currentSound = soundSetting;
                } else {
                  currentSound = `${soundBaseURL + soundOptions[soundID]}.mp3`;
                }
              };
              var playSound = function () {
                try {
                  new Audio(currentSound).play();
                } catch (err) {
                  Error.report(err, "improvedWhisper.playSound");
                }
              };
              var enable = function () {
                EventHandler.listen("chat_tell_received", playSound, eventContext);
                if (!AudioController.play_whisper) {
                  AudioController.play_whisper = AudioController.play;
                  AudioController.play = function (soundName) {
                    if (soundName === "newmsg") return;
                    AudioController.play_whisper.apply(this, arguments);
                  };
                }
              };
              var disable = function () {
                EventHandler.unlistenByContext("chat_tell_received", eventContext);
                if (AudioController.play_whisper) {
                  AudioController.play = AudioController.play_whisper;
                  delete AudioController.play_whisper;
                }
              };
              updateSound();
              if (Settings.get(enableKey, true)) enable();
              window.ChatBeeper = {
                updateSound: updateSound,
                play: playSound,
                enable: enable,
                disable: disable,
              };
            } catch (e) {
              Error.report(e, "improvedWhisper");
            }
          };
          var jobWindowLP = function () {
            try {
              JobWindow.prototype.__twdb__initView = JobWindow.prototype.__twdb__initView || JobWindow.prototype.initView;
              JobWindow.prototype.initView = function () {
                var t = JobWindow.prototype.__twdb__initView.apply(this, arguments);
                if (this.job && typeof this.currSkillpoints === "number") {
                  var n = `&nbsp;&nbsp;(${this.currSkillpoints - this.job.workpoints}&nbsp;..)`;
                  $("div.tw2gui_inner_window_title > .textart_title", this.window.divMain).append(n);
                }
                return t;
              };
            } catch (t) {
              Error.report(t, "manipulate JobWindow.prototype.initView");
            }
          };
          var addInstantQuests = function() {
            if (!QuestEmployerView?.showQuest) return;

            QuestEmployerView.showQuest_backup = QuestEmployerView.showQuest;

            QuestEmployerView.showQuest = questData => {
              QuestEmployerView.showQuest_backup(questData);

              const isUnaccepted = questData.accepted === false;
              const hasNoRewardOptions = !questData.questRewardsOptions;

              if (isUnaccepted && hasNoRewardOptions) {
                const requirements = questData.requirements || [];
                const solvedCount = requirements.filter(r => r.solved === true).length;
                const allSolved = solvedCount === requirements.length;

                if (allSolved) {
                  const buttonArea = $(`div.quest_button_area_${questData.id}`);
                  if (!buttonArea.length) return;

                  const finishButton = new west.gui.Button(` &  `, () => {
                    QuestWindow.acceptQuest(questData.id);

                    let attempts = 0;
                    const checkInterval = setInterval(() => {
                      const questExists = QuestLog.quests?.[questData.id];

                      if (questExists) {
                        clearInterval(checkInterval);
                        QuestWindow.finishQuest(questData.id);
                      } else if (++attempts === 20) {
                        clearInterval(checkInterval);
                      }
                    }, 200);
                  }).getMainDiv();

                  buttonArea.empty().append(finishButton);
                }
              }
            };
          };
          var addColoredQuests = function () {
            const formatRequirement = (requirement, solvedClass) => {
              if (requirement.jsInfo?.metatype === "FRONTEND") {
                const key = requirement.jsInfo.key;
                if (QuestLog.windows_opened[key] || QuestLog.tabs_opened[key]) {
                  requirement.solved = true;
                }
              }
              const infoText = requirement.info.replace(/ (\(?\d+\/\d+\)?)/g, "&nbsp;$1");
              const style = requirement.solved && !solvedClass ? "color:gray;" : "";
              return `<li class="quest_requirement ${requirement.solved && solvedClass ? solvedClass : ""}" style="${style}">- ${infoText}</li>`;
            };

            const originalBuildQuestLog = QuestEmployerView.buildQuestLog;
            QuestEmployerView.buildQuestLog = function (questData) {
              originalBuildQuestLog.apply(this, arguments);

              try {
                questData.open.forEach(quest => {
                  const questLink = $(`#open_quest_employerlink_${quest.id}`);
                  if (!questLink || !questLink.is(":visible")) return;

                  let solvedCount = 0;
                  let requirementHtml = '<div style="max-width: 300px; min-width: 150px;"><ul class="requirement_container">';

                  quest.requirements.forEach(req => {
                    if (req.solved || (req.type === "wear_changed" && Bag.getItemByItemId(req.id))) {
                      solvedCount++;
                    } else if (!req.solved) {
                      requirementHtml += formatRequirement(req);
                    }
                  });

                  requirementHtml += "</ul></div>";
                  requirementHtml += `<div style="text-align: center;">${Quest.getRewards(quest.questRewards, quest.questRewardsOptions, false)}</div>`;

                  const questIcon = questLink.children("img");
                  if (requirementHtml.trim() !== "") questIcon.addMousePopup(requirementHtml);

                  if (quest.limited?.length) {
                    questIcon.after(
                      $('<div class="hourglass_quest" style="display: inline-block; vertical-align: middle; margin-bottom: 3px; margin-right: 2px;"></div>')
                        .addMousePopup(quest.limited)
                    );
                  }

                  if (Settings.get("colored_quest")) {
                    questLink.addClass("twdb_quest_entrie");
                    const totalReq = quest.requirements.length;

                    if (solvedCount === totalReq && quest.accepted) {
                      // Solved
                      questLink.css({ color: "#666", "font-style": "italic" });
                    } else if (solvedCount === totalReq || (solvedCount + 1 === totalReq && quest.duel?.isNPCDuel)) {
                      // Can be solved
                      questLink.css({ color: "#070" });
                    } else if ((solvedCount / totalReq) * 100 >= 66) {
                      // 66% done
                      questLink.css({ color: "#b75c00" });
                    }
                  }
                });
              } catch (err) {
                Error.report(err, "QuestEmployerView.buildQuestLog");
              }
            };

            TWDB.Util.addCss(".twdb_quest_entrie:hover { color: #1479A8 !important; }");
          };
          var importWestForts = function () {
              if (location.href.includes(".the-west.") && location.href.includes("game.php")) {
                if (document.getElementById('westforts_js')) return;
                const westfortsScript = document.createElement('script');
                westfortsScript.type = 'text/javascript';
                westfortsScript.id = 'westforts_js';
                westfortsScript.innerHTML = `(() => {
                    const ICON_ACTIVE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuxJREFUeNqkk0tvG1UYQM+987A9nrEdP+rEIWmaNE0wbdVSsaBUrVRVVAIiVoVFaWGBlH/CijVSVrAEiQVClRIJCQkEEm1BitomTcijMa3z8Cvx28k4Hq5dhLdI3MXc2XznO/d7CM/z6J7Z2dmXP//xzM3Nie4tuoBu8O7eDmtr69y9M8M7Ny7jOA625cfnM9B8fvYLFe4/+A0pSvy50WTzr3oPIrvB0bAks7VJemqMU6MjmD6L4cEEiUSUoGUjjiX1VofMXhNT15ia8BGP6r3EelcjGjXRDcnDxVU++PA9Js5McFA8oPxCZXv0lOUny1QqDVwfnB9/hY6ncWbcplA6oAeINQ+4PhGjNh4jqTXJLP5Bdnuf+flfMEzJ6VPDFCtV3GYNx5pEai0sS9H4B1DdLTAZCrBbbfHDt/cIBEzCpkZIqadfu8zioyeUcnkuXkkjpMTQTQ7dTq+YPcB6vsGYJYj4DX7eLJCttolZOh0hWHq+oPTLiIDOrbE4Qkikgkjh9QGrRZeca5C2D3n/xiWWci2+X/i1l6nseKSSDh/fvspA2KJ93FHBqm4Bfx9wfeYSFwYtNh4/4+sfn3I2FeTTt6d5uJojPjLEJx+9hWZoNFquarxUFso2aPUAsvtJqIJUyxUO92sUCzl+WspQrrXQEIQjFo4dpNP2MBXE1iUJdfsRfYOA3iYSsjkO6tw8l2JhJc93v29jdDoMjTWJmzYD0kfNbREJBNVcuLQ90TcYTEVpHkkaeFx9fZRr6SEM6TGcjKgJrPLZ59/wxVcLJJ0QW+tZCrl9dAX516CsurCV2aVed0k0jjg9EGD7RJAd9eZitkCuWCEWtnmR/ZKpkzFuz7xJvVTqG6xuVBlR2c5emGZvr8pjNYF19xjpKqBf48q5k9w8P8rK5g5vXHwVvxr1+eXmS0B3IZ7lj9jOQWogTl6Z3X9eZiVfI6WGazLk49a711QrTzA96JCMRbm3WODBWrG3TOL/rvPfAgwA2+cl/CVOsykAAAAASUVORK5CYII=';
                    const ICON_INACTIVE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjRJREFUeNqkU8lqYlEULOcpGolDjEYMiJugIR+QTVy4kCSQhd/gL+kX+AluRNdBBHWRoHFAE6QVFY1znLrrgKa3TR+4XN6959SpU/WuYr/fgxGPx3/hHyKZTLq4KwjA4j+B9/d3xGIxhMNhmM1mGI1GaLVaWaPRCC8vL1gul2Bur9cTEDWLmdhsNhEIBODz+aDX6+FyuaRwt9thvV7j+/sbg8EAp6enOD8/x3w+l8Zq0jg5OYFKpUK5XMbz8zP8fr90ZKdKpYLX11dMp1Nst1vY7XYBvbi4EMYCoFAocH19LV10Oh3e3t6EYjabFeCrqysBXCwWMJlMkm8wGH4AeEla3NPptIzABHa6vb0VZt1uF6FQSIo5GsdiCAAvrVaroLM7gTgWBf74+MDX1xeUSiUuLy9lP6wjAOnOZjOZ7/7+Hp1OB5lMBhqNRlQ/OzvD09MTLBaL6EAWdOkIcHd3B4/Hg0ajgVwuJ50ikQiq1aqM9vj4KFqsVisp/htAeXBhMpmISP1+H6VSSVQnTd4dxiEjisxvtVr9w4DoRKTHB9Hy+bwA0C7qwyJ6zzEoLteRgcPhwGazERtvbm4QDAalmOfj8RiJRAKpVAo2mw3tdlt+qEMIA9L//PyUZHZzOp1wu91yzoLhcCjndMvr9SIajUruEYCqs4h0aVur1RLBSJPUKSodKhQKeHh4kH+EOskIfBCkxG5UnHbW63UBpX0EZke+DTpFoGKxiFqtJo9J8b/P+bcAAwD2STF0+3hwkQAAAABJRU5ErkJggg==';
                    let scriptArmed = false;
                    const originalFortStats = FortBattle.makeStats;
                    const originalCemeteryTable = CemeteryWindow.showStatUpdateTable;
                    const westfortsButton = document.createElement('div');
                    westfortsButton.id = 'westforts_link_div';
                    const TITLE_DEFAULT = '<b>    West Forts</b>';
                    const TITLE_ARMED = '<b>    West Forts</b>';
                    westfortsButton.title = TITLE_DEFAULT;
                    westfortsButton.style.cssText = 'position:absolute; z-index:10; cursor:pointer; text-align:center; color:#fff; font-size:12px; padding:0px 3px 1px 9px; right:0; top:0; background:url("/images/interface/minimap/minimapbg.png") no-repeat scroll 0px -7px';
                    westfortsButton.innerHTML = \`<img id="westforts_icon_img" src="\${ICON_INACTIVE}" /><div style="float:right;margin-left:5px;margin-top:1px;">West Forts</div>\`;
                    westfortsButton.onclick = () => {
                        const iconImg = document.getElementById('westforts_icon_img');
                        if (scriptArmed) {
                            // Disarm
                            westfortsButton.style.color = '#fff';
                            iconImg.src = ICON_INACTIVE;
                            westfortsButton.title = TITLE_DEFAULT;
                            scriptArmed = false;
                            const existingScript = document.getElementById('wfScript');
                            if (existingScript) existingScript.remove();
                            FortBattle.makeStats = originalFortStats;
                            CemeteryWindow.showStatUpdateTable = originalCemeteryTable;
                            const form = document.getElementById('wfForm');
                            if (form) form.remove();
                        } else {
                            // Arm
                            if (!document.getElementById('wfScript')) {
                                const script = document.createElement('script');
                                script.id = 'wfScript';
                                script.type = 'text/javascript';
                                script.src = 'https://www.westforts.com/js/import.js?' + Date.now();
                                document.body.appendChild(script);
                            }
                            westfortsButton.style.color = '#01DF00';
                            iconImg.src = ICON_ACTIVE;
                            westfortsButton.title = TITLE_ARMED;
                            scriptArmed = true;
                        }
                    };
                    document.body.appendChild(westfortsButton);
                })();`;
                document.body.appendChild(westfortsScript);
            }
          };
          return _self;
        })($);
        Debugger.Snippets = Snippets;
        var GameInject = (function ($) {
          var _self = {};
          var save = {};
          var minimap = [];
          var questlog = [];
          var radialmenu = [];
          var quests = [];
          var ready = false;
          var timeout = null;
          var interval = null;
          var _position = [];
          var _reportreceived = [];
          _self.CharacterButton = (function (e) {
            var t = {};
            var n = 0;
            var r = null;
            t.add = function (t) {
              if (n === 0) {
                var i =
                  "div#twdb_characbut {width:36px; height:35px; position:absolute; left:141px; top:131px; border-bottom-left-radius:8px;" +
                  "background:url(" +
                  Game.cdnURL +
                  "/images/interface/character/character.png?3) no-repeat -141px -105px transparent;}";
                TWDB.Util.addCss(i);
                r = e('<div id="twdb_characbut" />');
                e("#ui_character_container").prepend(r);
              }
              n++;
              r.css({
                height: `${10 + 26 * n}px`,
                "background-position": `-141px ${26 * n - 131}px`,
              });
              var s = e(
                '<div class="char_links" style="top:' +
                (6 + (n - 1) * 26) +
                "px;left:6px;background:url(" +
                t +
                ')no-repeat 0px 0px transparent;"/>'
              );
              s.on("mouseenter", function () {
                e(this).css("background-position", "-25px 0px");
              })
                .on("mouseleave", function () {
                  e(this).css("background-position", "0px 0px");
                });
              r.append(s);
              return s;
            };
            return t;
          })($);
          _self.injectTaskJobs = function () {
            try {
              var e = TaskJob;
              TaskJob = function () {
                var t = e.apply(this, arguments);
                t.__twdb__getTitle = t.getTitle;
                t.getTitle = function () {
                  return (
                    t.__twdb__getTitle() +
                    " : " +
                    (this.data.job_points < 0 ? "<b class='text_red'>" : "<b>") +
                    this.data.job_points +
                    "</b><br />"
                  );
                };
                return t;
              };
            } catch (t) {
              Error.report(t, "manipulate TaskJob template");
            }
            try {
              if (TaskQueue.queue.length) {
                var n = $("script:contains('TaskQueue.init')")
                  .text()
                  .match(/TaskQueue\.init\(\s*(\[[^\]]*\])/);
                if (n.length === 2) {
                  n = JSON.parse(n[1]);
                  TaskQueue.init(n, TaskQueue.limit);
                }
              }
            } catch (t) {
              Error.report(t, "manipulate existing Job tasks");
            }
          };
          _self.ChatLayout = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  save["window.Chat.Layout.Tab.prototype.getMainDiv"] =
                    window.Chat.Layout.Tab.prototype.getMainDiv;
                  window.Chat.Layout.Tab.prototype.getMainDiv = function () {
                    for (var e = 0; e < t.length; e++) {
                      try {
                        t[e](this);
                      } catch (n) {
                        Error.report(n, "callbacks on Chat Layout");
                      }
                    }
                    return this.mainDiv;
                  };
                } catch (n) {
                  Error.report(n, "manipulate Chat Layout");
                  window.Chat.Layout.Tab.prototype.getMainDiv =
                    save["window.Chat.Layout.Tab.prototype.getMainDiv"];
                }
              }
              t.push(e);
            };
          })($);
          _self.ChatSend = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  window.Chat.Layout.Tab.prototype.twdb_send =
                    window.Chat.Layout.Tab.prototype.send;
                  window.Chat.Layout.Tab.prototype.send = function () {
                    for (var e = 0; e < t.length; e++) {
                      try {
                        t[e](this);
                      } catch (n) {
                        Error.report(n, "callbacks on Chat Send");
                      }
                    }
                    this.twdb_send();
                  };
                } catch (n) {
                  Error.report(n, "manipulate Chat Send");
                  window.Chat.Layout.Tab.prototype.send =
                    window.Chat.Layout.Tab.prototype.twdb_send;
                }
              }
              t.push(e);
            };
          })($);
          _self.MarketOfferTable = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  save["MarketWindow.Offer.updateTable"] =
                    MarketWindow.Offer.updateTable;
                  MarketWindow.Offer.updateTable = function (e) {
                    save["MarketWindow.Offer.updateTable"](e);
                    for (var n = 0; n < t.length; n++) {
                      try {
                        t[n](e);
                      } catch (r) {
                        Error.report(r, "callbacks MarketOfferTable");
                      }
                    }
                  };
                } catch (n) {
                  Error.report(n, "manipulate MarketOfferTable");
                  MarketWindow.Offer.updateTable =
                    save["MarketWindow.Offer.updateTable"];
                }
              }
              t.push(e);
            };
          })($);
          _self.MarketWatchlistTable = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  save["MarketWindow.Watchlist.updateTable"] =
                    MarketWindow.Watchlist.updateTable;
                  MarketWindow.Watchlist.updateTable = function (e) {
                    save["MarketWindow.Watchlist.updateTable"](e);
                    for (var n = 0; n < t.length; n++) {
                      try {
                        t[n](e);
                      } catch (r) {
                        Error.report(r, "callbacks MarketWatchlistTable");
                      }
                    }
                  };
                } catch (n) {
                  Error.report(n, "manipulate MarketWatchlistTable");
                  MarketWindow.Watchlist.updateTable =
                    save["MarketWindow.Watchlist.updateTable"];
                }
              }
              t.push(e);
            };
          })($);
          _self.MarketWhatIsHotTable = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  save["MarketWindow.WhatIsHot.updateTable"] =
                    MarketWindow.WhatIsHot.updateTable;
                  MarketWindow.WhatIsHot.updateTable = function (e) {
                    save["MarketWindow.WhatIsHot.updateTable"](e);
                    for (var n = 0; n < t.length; n++) {
                      try {
                        t[n](e);
                      } catch (r) {
                        Error.report(r, "callbacks MarketWhatIsHotTable");
                      }
                    }
                  };
                } catch (n) {
                  Error.report(n, "manipulate MarketWhatIsHotTable");
                  MarketWindow.WhatIsHot.updateTable =
                    save["MarketWindow.WhatIsHot.updateTable"];
                }
              }
              t.push(e);
            };
          })($);
          _self.injectSetDuelMotivation = (function (_e) {
            var t = [];
            return function (e) {
              if (t.length === 0) {
                try {
                  Character.twdb_setDuelMotivation = Character.setDuelMotivation;
                  Character.setDuelMotivation = function (e) {
                    this.twdb_setDuelMotivation(e);
                    for (var n = 0; n < t.length; n++) {
                      try {
                        t[n](e);
                      } catch (r) {
                        Error.report(r, "callbacks setDuelMotivation");
                      }
                    }
                  };
                } catch (n) {
                  Error.report(n, "manipulate setDuelMotivation");
                  Character.setDuelMotivation = twdb_Character.setDuelMotivation;
                }
              }
              t.push(e);
            };
          })($);
          _self.ItemUse = (function (_$) {
            var callbacks = [];
            return function (callback) {
              if (callbacks.length === 0) {
                ItemUse.twdb = function (e, t) {
                  for (var n = 0; n < callbacks.length; n++) {
                    try {
                      callbacks[n](e, t);
                    } catch (r) {
                      Error.report(r, "callbacks on ItemUse");
                    }
                  }
                };
                save["ItemUse.doIt"] = ItemUse.doIt;
                try {
                  var toolkit = ItemUse.doItOrigin ? "doItOrigin" : "doIt",
                    str = ItemUse[toolkit].toString(),
                    pos = str.indexOf("EventHandler.signal('item_used'"),
                    inject =
                      str.substr(0, pos) +
                      "ItemUse.twdb(itemId,res);" +
                      str.substr(pos);
                  eval(`ItemUse.${toolkit} = ${inject}`);
                } catch (e) {
                  ItemUse.doIt = save["ItemUse.doIt"];
                  Error.report(e, "manipulate ItemUse");
                }
              }
              callbacks.push(callback);
            };
          })($);
          _self.injectItem = function (type, name, callback) {
            var item = `${type}Item`;
            if (typeof save[item] === "undefined") {
              save[item] = tw2widget[item].prototype.getMainDiv;
            }
            try {
              tw2widget[item].prototype[`TWDB${name}`] = function (e) {
                try {
                  return callback(e);
                } catch (t) {
                  Error.report(t, `injected ${e} function: ${name}`);
                  return "";
                }
              };
            } catch (e) {
              Error.report(e, `inject ${item} function: ${name}`);
            }
            try {
              var inject = `this.TWDB${name}(this);`;
              inject.replace(/ /g, "");
              var newfunction = tw2widget[item].prototype.getMainDiv
                .toString()
                .replace("return", `${inject}\n return`);
              eval(
                `tw2widget['${item}'].prototype.getMainDiv = ${newfunction}`
              );
            } catch (e) {
              Error.report(e, `manipulate ${item}.prototype.getMainDiv`);
              tw2widget[item].prototype.getMainDiv = save[item];
            }
          };
          _self.injectTrader = function (name, callback) {
            if (
              typeof save["west.game.shop.item.view.prototype.render"] ===
              "undefined"
            ) {
              save["west.game.shop.item.view.prototype.render"] =
                west.game.shop.item.view.prototype.render;
            }
            try {
              west.game.shop.item.view.prototype[`TWDB${name}`] = function (e) {
                try {
                  return callback(e);
                } catch (t) {
                  Error.report(t, `callback on injectTrader, function: ${name}`);
                  return "";
                }
              };
            } catch (e) {
              Error.report(
                e,
                `injectTrader, creating callback function: ${name}`
              );
            }
            try {
              var str = west.game.shop.item.view.prototype.render.toString();
              var inject =
                "window.setTimeout(function() {$item.append(that.TWDB" +
                name +
                "(model.getItemData()))}, 100);";
              inject.replace(/ /g, "");
              var newfunction = str.replace(
                "return $item",
                `${inject}\n return $item`
              );
              eval(`west.game.shop.item.view.prototype.render = ${newfunction}`);
            } catch (e) {
              Error.report(
                e,
                "manipulate west.game.shop.item.view.prototype.render"
              );
              west.game.shop.item.view.prototype.render =
                save["west.game.shop.item.view.prototype.render"];
            }
          };
          _self.injectMarket = function (name, callback) {
            if (typeof save.MarketWindow === "undefined") {
              save.MarketWindow = MarketWindow.getClearName.toString();
            }
            try {
              MarketWindow[`TWDB${name}`] = function (e) {
                try {
                  return callback(e);
                } catch (t) {
                  Error.report(t, `injected MarketWindow function:${name}`);
                }
                return "";
              };
            } catch (e) {
              Error.report(e, `inject MarketWindow function:${name}`);
            }
            try {
              var str = MarketWindow.getClearName.toString();
              var inject = `this.TWDB${name}(obj.item_id)`;
              inject.replace(/ /g, "");
              var newfunction = "";
              while (str.indexOf("return") !== -1) {
                var pos = str.indexOf("return");
                newfunction +=
                  `${str.slice(0, pos + 6)} ${inject} + String(`;
                str = str.substr(pos + 7);
                var pos = str.indexOf(";");
                newfunction += `${str.slice(0, pos)});`;
                str = str.substr(pos + 1);
              }
              newfunction += str;
              eval(`MarketWindow.getClearName = ${newfunction}`);
            } catch (e) {
              Error.report(e, "manipulate MarketWindow.getClearName");
              eval(`MarketWindow.getClearName = ${save.MarketWindow}`);
            }
          };
          _self.injectGetBids = function () {
            try {
              MarketWindow.twdb_showTab2 =
                MarketWindow.twdb_showTab2 || MarketWindow.showTab;
              MarketWindow.showTab = function (e) {
                if (e != "sell" && e != "marketmap") TWDB.ClothCalc.getBids();
                MarketWindow.twdb_showTab2.apply(this, arguments);
              };
            } catch (e) {
              Error.report(e, "manipulate MarketWindow.showTab (2)");
            }
          };
          _self.addTabOnMessagesWindow = function (name, shortname, callback) {
            if (typeof save.MessagesWindowOpen === "undefined") {
              save.MessagesWindowOpen = MessagesWindow.open.toString();
              save.MessagesWindowTab = MessagesWindow.showTab.toString();
            }
            try {
              var inject =
                "MessagesWindow.window.addTab('" +
                name +
                "', '" +
                shortname +
                "', tabclick).appendToContentPane($('<div class=\"messages-" +
                shortname +
                "\"/>'));";
              var newfunction = MessagesWindow.open
                .toString()
                .replace(
                  /MessagesWindow.Telegram.DOM/g,
                  `${inject}MessagesWindow.Telegram.DOM`
                );
              eval(
                "(function ($) {" +
                "MessagesWindow.open = " +
                newfunction +
                "})(jQuery);"
              );
            } catch (e) {
              Error.report(e, "manipulate MessagesWindow.open");
              eval(
                "(function ($) {" +
                "MessagesWindow.open = " +
                save.MessagesWindowOpen +
                "})(jQuery);"
              );
            }
            try {
              MessagesWindow[`TWDB-${shortname}`] = function () {
                callback();
              };
            } catch (e) {
              Error.report(e, "add showTab to MessagesWindow");
            }
            try {
              var inject =
                "case '" +
                shortname +
                "':MessagesWindow['TWDB-" +
                shortname +
                "']();break;";
              var newfunction = MessagesWindow.showTab
                .toString()
                .replace(/switch(\s)*\(id\)(\s)*{/g, `switch (id) { ${inject}`);
              eval(
                "(function ($) {" +
                "MessagesWindow.showTab = " +
                newfunction +
                "})(jQuery);"
              );
            } catch (e) {
              Error.report(e, "manipulate MessagesWindow.showTab");
              eval(
                "(function ($) {" +
                "MessagesWindow.showTab = " +
                save.MessagesWindowTab +
                "})(jQuery);"
              );
            }
          };
          _self.addTabOnMarketWindow = function (e, t, n) {
            var r = function (_e, n) {
              if (!MarketWindow.window) return;
              MarketWindow.window
                .activateTab(n)
                .$("div.tw2gui_window_content_pane > *", MarketWindow.DOM)
                .each(function (_e, t) {
                  if ($(t).hasClass(`marketplace-${n}`)) {
                    $(t).children().fadeIn();
                    $(t).show();
                  } else {
                    $(t).children().fadeOut();
                    $(t).hide();
                  }
                });
              MarketWindow[`TWDB-${t}`]();
            };
            try {
              MarketWindow.twdb_open =
                MarketWindow.twdb_open || MarketWindow.open;
              MarketWindow.open = function () {
                this.twdb_open.apply(this, arguments);
                MarketWindow.window
                  .addTab(e, t, r)
                  .appendToContentPane($(`<div class="marketplace-${t}"/>`));
              };
            } catch (i) {
              Error.report(i, "manipulate MarketWindow.open");
            }
            try {
              MarketWindow[`TWDB-${t}`] = function () {
                n();
              };
            } catch (i) {
              Error.report(i, "add showTab to MarketWindow");
            }
            try {
              MarketWindow.twdb_showTab =
                MarketWindow.twdb_showTab || MarketWindow.showTab;
              MarketWindow.showTab = function () {
                MarketWindow.window.setSize(748, 471).removeClass("premium-buy");
                this.twdb_showTab.apply(this, arguments);
              };
            } catch (i) {
              Error.report(i, "manipulate MarketWindow.showTab (1)");
            }
          };
          var waitForMinimap = function (_e) {
            if (interval) {
              window.clearInterval(timeout);
              window.clearInterval(interval);
            }
            var t = function () {
              if (
                !MinimapWindow.window ||
                $(MinimapWindow.window.divMain).find(".mmap_jobs").length === 0
              ) {
                return;
              }
              if ($(MinimapWindow.window).find(".loader").is(":visible")) {
                return;
              }
              window.clearInterval(timeout);
              window.clearInterval(interval);
              interval = null;
              timeout = null;
              for (var e = 0; e < minimap.length; e++) {
                try {
                  minimap[e]();
                } catch (t) {
                  Error.report(t, "MinimapWindow inject");
                }
              }
            };
            timeout = setInterval(function () {
              window.clearInterval(interval);
              window.clearInterval(timeout);
              interval = null;
              timeout = null;
            }, 3e5);
            interval = setInterval(function () {
              t();
            }, 200);
          };
          _self.injectMinimap = function (e) {
            try {
              if (!MinimapWindow._open) {
                MinimapWindow._open = MinimapWindow.open;
                MinimapWindow.open = function (e) {
                  try {
                    MinimapWindow._open(e);
                    waitForMinimap();
                  } catch (t) {
                    Error.report(t, "MinimapWindow.open");
                  }
                };
              }
            } catch (t) {
              Error.report(t, "manipulate MinimapWindow.open");
            }
            try {
              if (!MinimapWindow._refreshWindow) {
                MinimapWindow._refreshWindow = MinimapWindow.refreshWindow;
                MinimapWindow.refreshWindow = function () {
                  try {
                    MinimapWindow._refreshWindow();
                    window.setTimeout(function () {
                      waitForMinimap();
                    }, 2500);
                  } catch (e) {
                    Error.report(e, "MinimapWindow.refreshWindow");
                  }
                };
              }
            } catch (t) {
              Error.report(t, "manipulate MinimapWindow.refreshWindow");
            }
            minimap.push(function () {
              e();
            });
          };
          _self.injectRadialmenu = function (e) {
            try {
              if (!window.GameMap.Radialmenu.prototype._open) {
                window.GameMap.Radialmenu.prototype._open =
                  window.GameMap.Radialmenu.prototype.open;
                window.GameMap.Radialmenu.prototype.open = function (e) {
                  try {
                    this._open(e);
                    for (var t = 0; t < radialmenu.length; t++) {
                      radialmenu[t](this);
                    }
                  } catch (n) {
                    Error.report(n, "Radialmenu.open");
                  }
                };
              }
            } catch (t) {
              Error.report(t, "manipulate Radialmenu.open");
            }
            radialmenu.push(function (t) {
              e(t);
            });
          };
          _self.injectQuestLog = function (e) {
            try {
              if (!QuestEmployerView._buildQuestLog) {
                QuestEmployerView._buildQuestLog =
                  QuestEmployerView.buildQuestLog;
                QuestEmployerView.buildQuestLog = function (e) {
                  try {
                    QuestEmployerView._buildQuestLog(e);
                    for (var t = 0; t < questlog.length; t++) {
                      questlog[t](e);
                    }
                  } catch (n) {
                    Error.report(n, "QuestEmployerView.buildQuestLog");
                  }
                };
              }
              questlog.push(function (t) {
                e(t);
              });
            } catch (t) {
              Error.report(t, "manipulate QuestEmployerView.buildQuestLog");
            }
          };
          _self.injectQuest = function (e) {
            try {
              if (!Quest.prototype._render) {
                Quest.prototype._render = Quest.render;
                Quest.prototype.render = function () {
                  try {
                    this._render();
                    for (var e = 0; e < quests.length; e++) {
                      quests[e](this);
                    }
                  } catch (t) {
                    Error.report(t, "Quest.render");
                  }
                };
              }
              quests.push(function (t) {
                e(t);
              });
            } catch (t) {
              Error.report(t, "manipulate Quest.render");
            }
          };
          _self.injectReportReceivedEntry = function (callback) {
            if (_reportreceived.length === 0 && typeof OnGoingReportReceivedEntry === "function") {
                try {
                    const Original = OnGoingReportReceivedEntry;
                    OnGoingReportReceivedEntry = function (...args) {
                        Original.apply(this, args);
                        if (typeof this._TWDB === "function") this._TWDB(args[0]);
                    };
                    OnGoingReportReceivedEntry.prototype = Object.create(OnGoingEntry.prototype);
                    OnGoingReportReceivedEntry.prototype.constructor = OnGoingReportReceivedEntry;
                    OnGoingReportReceivedEntry.prototype._TWDB = function (msg) {
                        try {
                            _reportreceived.forEach(fn => {fn(msg)});
                        } catch (err) {
                            Error.report(err, "OnGoingReportReceivedEntry._TWDB");
                        }
                    };
                } catch (err) {
                    Error.report(err, "patch OnGoingReportReceivedEntry");
                }
            }
            _reportreceived.push(callback);
          };
          _self.injectInventoryAddItemsPinItems = function () {
            try {
                Inventory.__CCPI__addItems = Inventory.__CCPI__addItems || Inventory.addItems;
                Inventory.addItems = function (...args) {
                    Inventory.__CCPI__addItems.apply(this, args);
                    const [category, t] = args;
                    const dom = Inventory.DOM instanceof jQuery ? Inventory.DOM[0] : Inventory.DOM;
                    if (!dom) return;
                    if (!document.getElementById("CC_pin_items")) {
                        const actions = dom.querySelector(".actions");
                        if (!actions) return;
                        const pinBtn = document.createElement("div");
                        pinBtn.id = "CC_pin_items";
                        pinBtn.className = "tw2gui_iconbutton";
                        pinBtn.title = "  ";
                        if (TWDB.Settings.itemPinningMode === 1) pinBtn.classList.add("pinact");
                        actions.appendChild(pinBtn);
                        pinBtn.addEventListener("click", () => {
                            TWDB.Settings.itemPinningMode ^= true;
                            pinBtn.classList.toggle("pinact", TWDB.Settings.itemPinningMode === 1);
                            Inventory.addItems(category, t);
                        });
                    }
                    if ((category || Inventory.defaultCategory) === "new") {
                        const pinned = (TWDB.Settings.get("pinnedItems") || []).slice().reverse();
                        pinned.forEach(id => {
                            const item = Bag.getItemByItemId(id);
                            if (item) Inventory.addItemDivToInv(item, true);
                        });
                    }
                };
                const css = `
                    div#CC_pin_items {background-image: url("${Images.pinItems}"); background-position: top; width: 34px; height: 36px; position: absolute; left: 0px !important;}
                    div#CC_pin_items.pinact {background-position: bottom;}
                    div.actions:has(.bag_resize) div#CC_pin_items {left: 34px !important; position: absolute !important;}
                `;
                TWDB.Util.addCss(css, "pinning");
            } catch (err) {
                console.error("Error manipulating Inventory.addItems (pin items):", err);
            }
          };
          _self.injectInventoryAddItemDivToInvPinItems = function () {
            try {
                Inventory.__CCPI__addItemDivToInv = Inventory.__CCPI__addItemDivToInv || Inventory.addItemDivToInv;
                Inventory.addItemDivToInv = function (item, pinnedFlag) {
                    const pinnedMode = TWDB.Settings.itemPinningMode;
                    if (!pinnedMode && !pinnedFlag) {
                        Inventory.__CCPI__addItemDivToInv.apply(this, [item, pinnedFlag]);
                        return;
                    }
                    const pinnedItems = TWDB.Settings.get("pinnedItems") || [];
                    const itemId = item.getId();
                    const container = document.createElement("div");
                    let mainDiv = item.getMainDiv();
                    if (mainDiv instanceof jQuery) mainDiv = mainDiv[0];
                    if (!mainDiv) return;
                    mainDiv.dataset.itemId = itemId;
                    container.appendChild(mainDiv);
                    const img = container.querySelector("img");
                    if (!img) return;
                    img.onclick = pinnedMode
                        ? () => {
                              const index = pinnedItems.indexOf(itemId);
                              if (index < 0) {
                                  if (pinnedItems.length >= Inventory.latestSize) return;
                                  pinnedItems.push(itemId);
                              } else pinnedItems.splice(index, 1);
                              container.classList.toggle("opacity05", pinnedItems.indexOf(itemId) < 0);
                              TWDB.Settings.set("pinnedItems", pinnedItems);
                          }
                        : (event) => Inventory.clickHandler(itemId, event);
                    if (pinnedMode && !pinnedItems.includes(itemId)) container.classList.add("opacity05");
                    else if (!pinnedMode) img.setDraggable?.(Inventory.announceDragStart, Inventory.announceDragStop);
                    let bag;
                    const dom = Inventory.DOM instanceof jQuery ? Inventory.DOM[0] : Inventory.DOM;
                    if (dom) bag = dom.querySelector("#bag");
                    if (!bag) return;
                    if (pinnedFlag) {
                        container.classList.add("pinned");
                        bag.prepend(container);
                        Array.from(bag.children)
                            .filter(div => div.tagName === "DIV" && div.children.length === 0)
                            .forEach(div => {div.remove()});
                        const nonPinned = Array.from(bag.children).filter(div => !div.classList.contains("pinned"));
                        if (bag.children.length > Inventory.latestSize && nonPinned.length > 0) nonPinned[0].remove();
                    } else {
                        bag.appendChild(container);
                    }
                };
                const css = `
                    #bag > .pinned > .item {background: rgba(134, 93, 39, 0.4) url("${Images.pinMini}") -1px -1px no-repeat; border-radius: 4px; box-shadow: inset 0px 0px 2px 1px #852;}
                    #bag > .pinned > .item span.count {bottom: -1px; left: 1px;}
                    #bag > .pinned > .item span.usable {right: -1px;}
                    #bag > .pinned > .item span.item_level {opacity: 0.4; top: 1px; left: initial; right: 1px; background-color: rgba(0,0,0,0);}
                    #bag > .pinned > .item span.cooldown {top: 2px; left: 15px;}
                `;
                TWDB.Util.addCss(css, "pinning");
            } catch (err) {
                console.error("Error manipulating Inventory.addItemDivToInv (pin items):", err);
            }
          };
          _self.injectTelegramWindowAppendTelegramDisplaySource = function (_e) {
            try {
                TelegramWindow.__CCDTS__appendTelegram = TelegramWindow.__CCDTS__appendTelegram || TelegramWindow.appendTelegram;
                TelegramWindow.appendTelegram = function (...args) {
                    TelegramWindow.__CCDTS__appendTelegram.apply(this, args);
                    const [msgData, t] = args;
                    const contentPane = t.contentPane instanceof jQuery ? t.contentPane[0] : t.contentPane;
                    if (!contentPane) return;
                    const telegramHeads = contentPane.querySelectorAll(".telegram-head");
                    if (telegramHeads.length === 0) return;
                    const lastHead = telegramHeads[telegramHeads.length - 1];
                    const authorEl = lastHead.querySelector(".author");
                    if (!authorEl) return;
                    Object.assign(authorEl.style, {
                        left: "81px",
                        width: "140px",
                        background: "url(/images/window/messages/post-head.jpg) -16px 0"
                    });
                    const sourceBtn = document.createElement("div");
                    sourceBtn.className = "telegram-source";
                    sourceBtn.title = "       ";
                    const innerDiv = document.createElement("div");
                    innerDiv.textContent = "BB";
                    sourceBtn.appendChild(innerDiv);
                    sourceBtn.addEventListener("click", function () {
                        const isActive = sourceBtn.classList.toggle("active");
                        const postEl = lastHead.nextElementSibling;
                        if (!postEl) return;
                        if (isActive) {
                            // Convert HTML to BBCode-like format
                            const rawText = msgData.text
                                .replace(/<(\/?(b|i|u|del))>/g, "[$1]")
                                .replace(/<a href="[^"]+PlayerProfileWindow[^"]+">([^<]+)<\/a>/g, "[player]$1[/player]")
                                .replace(/<a href="[^"]+TownWindow[^"]+">([^<]+)<\/a>/g, "[town]$1[/town]")
                                .replace(/<a href="[^"]+FortWindow[^"]+">([^<]+)<\/a>/g, "[fort]$1[/fort]")
                                .replace(/<a href="[^"]+AllianceWindow[^"]+">([^<]+)<\/a>/g, "[alliance]$1[/alliance]")
                                .replace(/<a class="external_link" href="[^=]+=redirect[^=]+=([^"]+)" target="_blank">([^<]+)<\/a>/g,
                                    (_, url, text) => `[url=${decodeURIComponent(url)}]${text}[/url]`)
                                .replace(/<a class="public_report_link" href="[^"]+ReportWindow\.open\((\d+), '([0-9a-f]+)'\);">([^<]+)<\/a>/g, (_, id, hash, text) => `[report=${id}${hash}]${text.replace(/^\[|\]$/g, "")}[/report]`);
                            postEl.innerHTML = rawText;
                        } else {
                            postEl.innerHTML = Game.TextHandler.parse(msgData.text);
                        }
                    });
                    authorEl.parentNode.insertBefore(sourceBtn, authorEl);
                };
                if (!document.getElementById("telegram-source-style")) {
                    const styleEl = document.createElement("style");
                    styleEl.id = "telegram-source-style";
                    styleEl.textContent = `
                        .telegram-source {position: absolute; width: 24px; height: 24px; cursor: pointer; background: url(/images/window/messages/icons.png) 72px -3px; left: 52px;}
                        .telegram-source div {display: inline-block; width: 14px; height: 11px; color: white; background: #523F30; font-size: 10px; margin: 4px; padding: 0 0 5px 2px; line-height: 16px; font-family: Impact, sans-serif; font-weight: 300;}
                        .telegram-source.active div {background: blue;}
                    `;
                    document.head.appendChild(styleEl);
                }
            } catch (err) {
                console.error("Error manipulating TelegramWindow.appendTelegram:", err);
            }
          };
          _self.injectWanderingTraderSellDialog = function () {
            try {
                west.window.shop.view.__proto__.__twdb__showSellDialog = west.window.shop.view.__proto__.showSellDialog;
                west.window.shop.view.__proto__.showSellDialog = function (e) {
                    var t = this.getController(),
                        n = Bag.getItemByItemId(e),
                        r = n.count,
                        i,
                        s;
                    this.__twdb__showSellDialog.apply(this, arguments);
                    if (r < 3) {
                        return;
                    }
                    i = $("div.tw2gui_dialog").has(`div.textart_title:contains(${n.getName()})`);
                    if (i.length === 1) {
                        r--;
                        s = `Max-1 (${r}x = $ ${r * n.getSellPrice()})`;
                        i.children("div.tw2gui_dialog_actions").prepend(
                            new west.gui.Button(
                                s,
                                function () {
                                    t.requestSell({ inv_id: n.inv_id, count: r });
                                    i.find("div.tw2gui_button").last().click();
                                }.bind(this)
                            ).getMainDiv()
                        );
                    }
                };
            } catch (e) {
                Error.report(e, "manipulate .showSellDialog (wandering trader - sell all but one)");
            }
          };
          _self.MenuButton = function (image, title, onclick) {
            var onClick = onclick || function(){};
            var $obj = $(`<div class="menulink" title="${title}">`)
              .css({
                'background-image': `url(${image})`,
                'background-repeat': 'no-repeat',
                'background-position': '0px 0px',
              });
            var button = { obj: $obj, setOnClick: function(cb){ onClick = cb; } };
            function clicked(e) { if (onClick) onClick(button, e); }
            function mouseIn() { $obj.css('background-position', '-25px 0px'); }
            function mouseOut() { $obj.css('background-position', '0px 0px'); }
            $obj.on('mouseenter', mouseIn)
                .on('mouseleave', mouseOut)
                .on('click', clicked);
            $('#TWDB_ClothCalc_menubuttons').append($obj);
            return button;
          };
          return _self;
        })($);
        Debugger.GameInject = GameInject;
        var Quests = (function (_e) {
          var t = {};
          var n = {};
          var r = function () {
            if (n.ready) {
              return;
            }
            if (Settings.get("quest_cancel", true)) {
              s();
            }
            n.ready = true;
          };
          n = Loader.add("Quests", "tw-db Quests", r, { Settings: true });
          var s = function () {
            try {
              var e = QuestWindow.cancelQuest;
              QuestWindow.cancelQuest = function (t) {
                new west.gui.Dialog(
                  TWDB.lang.cancel_quest_title,
                  TWDB.lang.cancel_quest_message
                )
                  .setIcon(west.gui.Dialog.SYS_QUESTION)
                  .setModal(true, false, {
                    bg: `${Game.cdnURL}/images/curtain_bg.png`,
                    opacity: 0.4,
                  })
                  .addButton(TWDB.lang.yes, function () {
                    e(t);
                  })
                  .addButton(TWDB.lang.no, function () { })
                  .show();
              };
            } catch (t) {
              Error.report(t, `inject ${item} function: ${name}`);
            }
          };
          return t;
        })($);
        Debugger.Quests = Quests;
        var DuelMotivation = (function (e) {
          var t = {};
          var n = {};
          var r = null;
          var i = null;
          var s = null;
          var o = null;
          var u = 0;
          var a = "";
          var f = 0;
          var l = "";
          var c = false;
          var h = function () {
            if (n.ready) {
              return;
            }
            if (!Settings.get("duel_motivation", false)) {
              n.ready = true;
              return;
            }
            if (
              Character.setDuelProtection
                .toString()
                .search("duelprotection_changed") === -1
            ) {
              Character.twdb_setDuelProtection = Character.setDuelProtection;
              Character.setDuelProtection = function (e) {
                if (e === 0) {
                  e = 1;
                }
                var t = e !== Character.duelProtection;
                Character.twdb_setDuelProtection.apply(this, arguments);
                if (t) {
                  EventHandler.signal("duelprotection_changed", []);
                }
              };
            } else if (TWDB.script.isDev()) {
              console.log("setDuelProtection changed");
              new UserMessage(TWDB.lang.setDuelProtection_changed).show();
            }
            var t =
              "div#ui_character_container .twdb_charcont_ext {background-image:" +
              e("#ui_character_container").css("background-image") +
              "; background-repeat:no-repeat; background-position:bottom left; width:143px; height:15px; position:absolute; left:0px; top:173px; padding-top:2px;}" +
              "div#ui_character_container #duelmot_bar {background-image:url(" +
              TWDB.images.duelMotBar +
              "); background-repeat:no-repeat; background-position:0px -26px; top:2px; left:3px; height:13px; width:137px; position:absolute; color:#FFF; text-align:center; font-size:8pt; line-height:12px; font-weight:bold; text-shadow: 1px 0px 1px #000, -1px 0px 1px #000;}" +
              "div#ui_character_container .duelmot_ko {background-position:0px -13px!important;}" +
              "div#ui_character_container .duelmot_protect {background-position:0px 0px!important;}" +
              "div#ui_character_container .duelmot_warn {background-position:0px 0px; top:2px; left:3px; opacity:0;}" +
              "div#ui_character_container .duelmot_dim {opacity:0.6;}";
            TWDB.Util.addCss(t, "duelmot");
            c = Game.duelProtectionEarly === Game.duelProtectionHours;
            p();
            EventHandler.listen("duelprotection_changed", function () {
              v();
            });
            EventHandler.listen("duelmotivation_changed", function () {
              m();
            });
            v();
            m(true);
            if (Character.homeTown.town_id !== 0) {
              Ajax.remoteCallMode(
                "building_saloon",
                "get_data",
                { town_id: Character.homeTown.town_id },
                function (e) {
                  if (e.error) {
                    return new UserMessage(e.msg).show();
                  }
                  Character.setDuelMotivation(e.motivation);
                }
              );
            }
            n.ready = true;
          };
          var p = function () {
            e("#ui_character_container").css({
              "background-repeat": "no-repeat",
              height: "191px",
            });
            e(".energy_add").css({ top: "161px" });
            var t = e('<div class="twdb_charcont_ext" />').insertBefore(
              ".energy_bar"
            );
            r = e('<div id="duelmot_bar" class="duelmot_dim" />').appendTo(t);
            i = e('<div class="status_bar duelmot_warn" />').appendTo(t);
          };
          var d = function (e, t, n, s, o) {
            if (e === undefined) {
              e = "";
            }
            if (t === undefined) {
              t = false;
            }
            if (n === undefined) {
              n = false;
            }
            if (s === undefined) {
              s = false;
            }
            if (!s) {
              if (typeof n === "string") {
                r.attr("class", n);
              }
              r.text(e);
              if (typeof t === "string") {
                i.addMousePopup(t);
              }
            } else {
              i.fadeTo(400, 1, function () {
                d(e, t, n, false);
                if (o) {
                  o();
                }
                i.fadeTo(400, 0);
              });
            }
          };
          var v = function () {
            if (s === Character.duelProtection) {
              return;
            }
            s = Character.duelProtection;
            if (Character.getDuelProtection(true) > new ServerDate().getTime()) {
              g();
            } else if (u > 0) {
              o = 666;
            } else {
              m();
            }
          };
          var m = function (e) {
            if (o === Character.duelMotivation || u > 0) {
              return;
            }
            o = Character.duelMotivation;
            var t = Math.round(Character.duelMotivation * 100);
            d(
              `${t}%`,
              ` :&nbsp;${t}%`,
              e ? "duelmot_dim" : ""
            );
          };
          var g = function (e) {
            if (f) {
              w.clearInterval(f);
            }
            var t = new ServerDate().getTime();
            var n = Character.getMandatoryDuelProtection(true);
            var r = Character.getDuelProtection(true);
            a = "<div style='text-align:center;'> <br />";
            if (!c && n > t && !e) {
              a +=
                " -   &nbsp;" +
                new Date(n).toLocaleString() +
                "<br />";
              u = parseInt((n - t) / 1e3, 10);
              l = "getMandatoryDuelProtection";
            } else {
              u = parseInt((r - t) / 1e3, 10);
              l = "getDuelProtection";
            }
            u = Math.max(0, u);
            a +=
              " -   &nbsp;" +
              new Date(r).toLocaleString() +
              "</div>";
            d(
              u.formatDuration(),
              a,
              l === "getDuelProtection" ? "duelmot_protect" : "duelmot_ko",
              true
            );
            i.addClass("koblink").click(function () {
              i.removeClass("koblink").stop(true, false).css({ opacity: 0 });
            });
            f = w.setInterval(function () {
              y();
            }, 1e3);
          };
          var y = function () {
            if (u > 0) {
              if (u % 180 === 0) {
                u =
                  parseInt(
                    (Character[l](true) - new ServerDate().getTime()) / 1e3,
                    10
                  ) || 0;
              } else {
                u--;
              }
              if (u <= 0 || o === 666) {
                w.clearInterval(f);
                i.stop(true, true);
                u = 0;
                if (l === "getDuelProtection" || o === 666) {
                  o = null;
                  return d("", "", "", true, m);
                } else {
                  return g(true);
                }
              }
              d(u.formatDuration());
              if (u <= 1800 && i.hasClass("koblink") && u % 8 === 0) {
                i.fadeTo(500, 0.5).fadeTo(500, 0);
              }
              return;
            }
            o = null;
            m();
          };
          n = Loader.add("DuelMotivation", "tw-db DuelMotivation", h, {
            Settings: true,
          });
          return t;
        })($);
        Debugger.DuelMotivation = DuelMotivation;
        var Bank = (function (e) {
          var t = {};
          var n = true;
          var r = {};
          var i = function () {
            if (r.ready) {
              return;
            }
            if (Settings.get("auto_deposit", false)) {
              EventHandler.listen("position_change", function () {
                u();
              });
              u();
            }
            if (Settings.get("deposit", true)) {
              s();
            }
            r.ready = true;
          };
          r = Loader.add("Bank", "tw-db Bank", i, { Settings: true });
          var s = function () {
            btn = GameInject.CharacterButton.add(Images.buttonBank);
            btn
              .click(function () {
                o();
              })
              .addMousePopup(" ");
          };
          var o = function () {
            new west.gui.Dialog(
              " ",
              e(
                "<span class='twdb_banking'>: " +
                w.Character.money +
                "</span>"
              )
            )
              .setIcon(west.gui.Dialog.SYS_QUESTION)
              .setModal(true, false)
              .addButton("", function () {
                a(1);
              })
              .addButton(TWDB.lang.no)
              .show();
          };
          var u = function () {
            try {
              if (w.Character.homeTown.town_id === 0 || w.Character.money <= 10) {
                n = true;
                return;
              }
              if (
                w.Character.position.x === w.Character.homeTown.x &&
                w.Character.position.y === w.Character.homeTown.y
              ) {
                if (n) {
                  n = false;
                  new west.gui.Dialog(
                    " ",
                    e(
                      "<span class='twdb_banking'>    .       ; <br />: " +
                      w.Character.money +
                      "</span>"
                    )
                  )
                    .setIcon(west.gui.Dialog.SYS_QUESTION)
                    .setModal(true, false)
                    .addButton("", function () {
                      n = true;
                      a(w.Character.homeTown.town_id);
                    })
                    .addButton(TWDB.lang.no)
                    .show();
                }
              } else {
                n = true;
              }
            } catch (t) {
              Error.report(t, "autoDeposit");
            }
          };
          var a = function (e) {
            if (w.Character.money <= 0) {
              return;
            }
            w.BankWindow.townid = e;
            w.BankWindow.DOM = new west.gui.Textfield(
              `tb_balance_input_${w.BankWindow.townid}`
            )
              .setSize(10)
              .setValue(w.Character.money)
              .getMainDiv();
            w.BankWindow.Balance.add();
          };
          return t;
        })($);
        Debugger.Bank = Bank;
        var Market = (function (e) {
          var t = {};
          var n = false;
          var r = false;
          var i = {};
          var s = {};
          var o = function () {
            if (s.ready) return;
            if (Settings.get("market_map", false)) {
              GameInject.addTabOnMarketWindow(
                " ",
                "marketmap",
                function () {
                  c();
                }
              );
              TWDB.Util.addCss(
                ".twdb_mmap_point { width: 7px;" +
                "height: 7px;" +
                "background-color: #F00;" +
                "position: absolute;" +
                "border: 1px solid #000;" +
                "border-radius: 5px; }"
              );
            }
            if (Settings.get("market_reminder", true)) {
              GameInject.MarketOfferTable(function (e) {
                u(e);
              });
              GameInject.MarketWatchlistTable(function (e) {
                a(e);
              });
              l.init();
            }
            s.ready = true;
          };
          s = Loader.add("Market", "tw-db Market", o, { Settings: true });
          var u = function (t) {
            for (var n = 0; n < t.length; n++) {
              var r = t[n];
              var i = e('<div class="mpo_alert" />');
              e(MarketWindow.offerTable.getMainDiv())
                .children()
                .find(`.marketBidsData_${r.market_offer_id}`)
                .append(i);
              if (!r.isFinished) {
                i.append(f(r));
              }
            }
          };
          var a = function (t) {
            for (var n = 0; n < t.length; n++) {
              var r = t[n];
              var i = e('<div class="mpo_alert" />');
              e(MarketWindow.watchlistTable.getMainDiv())
                .children()
                .find(`.marketWatchData_${r.market_offer_id}`)
                .append(i);
              if (!r.isFinished) {
                i.append(f(r));
              }
            }
          };
          var f = function (t) {
            var n = e(`<img src="${Images.iconAlarm}" />`).css({
              cursor: "pointer",
            });
            n.click(
              (function (e, t) {
                return function () {
                  l.create(e, t);
                };
              })(t, n)
            );
            if (l.exists(t.market_offer_id) === false) {
              n.css("opacity", 0.5);
            }
            return n;
          };
          var l = (function (e) {
            var t = {},
              n = {},
              r = {};
            t.init = function () {
              var e = Cache.load("marketreminder");
              if (isDefined(e)) {
                n = e;
              }
              for (var t in n) {
                i(t);
              }
            };
            t.exists = function (e) {
              return isDefined(n[e]);
            };
            var i = function (e) {
              var t = n[e],
                r = Math.max(
                  t.ends * 1e3 - Date.now() - t.reminder * 60 * 1e3,
                  100
                );
              t.timer = setTimeout(
                (function (e) {
                  return function () {
                    u(e);
                  };
                })(e),
                r
              );
            };
            var s = function (e, r, s) {
              var o = parseInt(r.getValue(), 10);
              if (Number.isNaN(o) || o < 1) {
                t.create(e, s);
                return;
              }
              if (Date.now()/ 1e3 + o * 60 >= e.auction_end_date) {
                new UserMessage(TWDB.lang.reminder_toolate).show();
                t.create(e, s);
                return;
              }
              if (t.exists(e.market_offer_id)) {
                clearTimeout(n[e.market_offer_id].timer);
                delete n[e.market_offer_id].timer;
              }
              n[e.market_offer_id] = {
                ends: e.auction_end_date,
                reminder: o,
                id: e.market_offer_id,
                item: e.item_id,
              };
              Cache.save("marketreminder", n);
              i(e.market_offer_id);
            };
            var o = function (e) {
              delete n[e];
              Cache.save("marketreminder", n);
            };
            var u = function (t) {
              var r = n[t],
                i = ItemManager.get(r.item),
                s = new OnGoingEntry();
              s.init();
              s.setTooltip(
                ": " +
                i.name +
                ", : " +
                Number(
                  r.ends - Date.now() / 1e3
                ).getTimeString4Timestamp()
              );
              s.setImage(e(`<img src="${Images.notiBell}" />`));
              WestUi.NotiBar.add(s);
              TitleTicker.setNotifyMessage(
                ": " +
                i.name +
                ", : " +
                Number(
                  r.ends - Date.now() / 1e3
                ).getTimeString4Timestamp()
              );
              AudioController.play(AudioController.SOUND_NEWMSG);
              o(t);
            };
            t.create = function (r, i) {
              var u = e("<div />").append(
                '<span style="position:relative; width:100%;display:block;"> : ' +
                r.auction_ends_in.getTimeString4Timestamp() +
                "</span>"
              ),
                a = new west.gui.Textfield("twdb_analyser_last")
                  .maxlength(4)
                  .onlyNumeric()
                  .setLabel("    : ")
                  .setPlaceholder("");
              u.append(a.getMainDiv());
              if (t.exists(r.market_offer_id)) {
                a.setValue(n[r.market_offer_id].reminder);
                i.css("opacity", 1);
              } else {
                i.css("opacity", 0.5);
              }
              var f = new west.gui.Dialog(" ", u)
                .setIcon(west.gui.Dialog.SYS_QUESTION)
                .setModal(true, false, {
                  bg: `${w.Game.cdnURL}/images/curtain_bg.png`,
                  opacity: 0.4,
                })
                .addButton("", function () {
                  i.css("opacity", 1);
                  s(r, a, i);
                });
              if (t.exists(r.market_offer_id)) {
                f.addButton(TWDB.lang.delete, function () {
                  o(r.market_offer_id);
                  i.css("opacity", 0.5);
                });
              }
              f.addButton(TWDB.lang.cancel, function () { }).show();
            };
            return t;
          })(e);
          var c = function () {
            try {
              window.MarketWindow.window.showLoader();
              window.MarketWindow.window
                .setTitle(TWDB.lang.market_map_title)
                .setSize(840, 655)
                .addClass("premium-buy");
              var t = -111,
                s = -1;
              r = e(
                '<div style="position:relative;display:block;margin:10px 9px 10px 9px;width:770px;height:338px;" />'
              );
              for (var o = 1; o < 16; o++) {
                if (o === 8) {
                  s += 169;
                  t = -111;
                }
                t += 110;
                var u = e(
                  '<img style="position:absolute;border:1px solid #000;width:110px;height:169px;left:' +
                  t +
                  "px;top:" +
                  s +
                  'px;" src="' +
                  Game.cdnURL +
                  "/images/map/minimap/county_" +
                  o +
                  '.jpg" />'
                );
                if (o === 4) {
                  u.css({ height: "114px" });
                } else {
                  if (o === 11) {
                    u.css({ height: "114px", top: `${s + 55}px` });
                  } else {
                    if (o === 15) {
                      u.css({
                        height: "108px",
                        width: "109px",
                        left: "329px",
                        top: "114px",
                      });
                    }
                  }
                }
                r.append(u);
              }
              n = e("<div />").append(r);
              e(MarketWindow.window.getContentPane())
                .find(".marketplace-marketmap")
                .children()
                .remove();
              e(MarketWindow.window.getContentPane())
                .find(".marketplace-marketmap")
                .append(n);
              i = {};
              p();
            } catch (a) {
              Error.report(a, "Market map");
            }
          };
          var h = function (e, t, n, r, s, o, u) {
            if (!isDefined(i[e])) {
              i[e] = {
                name: t,
                town_id: e,
                x: n,
                y: r,
                count: 0,
                offers_end: {},
                offers_unend: {},
                money: 0,
                distance: window.GameMap.calcWayTime(window.Character.position, {
                  x: n,
                  y: r,
                }).formatDuration(),
              };
            }
            var a = i[e];
            if (s !== "") {
              if (!isDefined(a.offers_end[s.item_id])) {
                a.count++;
                a.offers_end[s.item_id] = s;
              } else {
                a.offers_end[s.item_id].count += s.count;
              }
            }
            if (o !== "") {
              if (!isDefined(a.offers_unend[o.item_id])) {
                a.count++;
                a.offers_unend[o.item_id] = o;
              } else {
                a.offers_unend[o.item_id].count += o.count;
              }
            }
            if (u !== 0) {
              a.money += u;
            }
          };
          var p = function () {
            Ajax.remoteCall("building_market", "fetch_bids", {}, function (e) {
              if (e.error)
                return new UserMessage(e.msg, UserMessage.TYPE_ERROR).show();
              var t = e.msg.search_result;
              for (var n = 0; n < t.length; n++) {
                if (
                  t[n].auction_ends_in < 0 ||
                  t[n].current_bid === t[n].max_price
                ) {
                  var r = {
                    item_id: t[n].item_id,
                    count: parseFloat(t[n].item_count),
                  };
                  var i = "";
                } else {
                  var i = {
                    item_id: t[n].item_id,
                    count: parseFloat(t[n].item_count),
                  };
                  var r = "";
                }
                h(
                  t[n].market_town_id,
                  t[n].market_town_name,
                  t[n].market_town_x,
                  t[n].market_town_y,
                  r,
                  i,
                  0
                );
              }
              d();
            });
          };
          var d = function () {
            Ajax.remoteCall(
              "building_market",
              "fetch_offers",
              { page: 0 },
              function (e) {
                if (e.error)
                  return new UserMessage(e.msg, UserMessage.TYPE_ERROR).show();
                var t = e.msg.search_result;
                for (var n = 0; n < t.length; n++) {
                  var r = "";
                  if (t[n].auction_ends_in < 0 && !t[n].current_bid) {
                    r = {
                      item_id: t[n].item_id,
                      count: parseFloat(t[n].item_count),
                    };
                  }
                  h(
                    t[n].market_town_id,
                    t[n].market_town_name,
                    t[n].market_town_x,
                    t[n].market_town_y,
                    r,
                    "",
                    t[n].current_bid
                  );
                }
                v();
              }
            );
          };
          var v = function () {
            for (var t in i) {
              var n = i[t];
              var s =
                '<div style="max-width: 305px;"><b>' +
                n.name +
                "</b>" +
                (n.money === 0 ? "" : ` ${n.money}$`) +
                "<br/>";
              var o = 0,
                u;
              for (var a in n.offers_end) {
                o++;
                if (o > 19) {
                  s += " ... ";
                  break;
                }
                u = n.offers_end[a];
                if (n.offers_end[a] !== 0) {
                  s +=
                    '<div class="item item_inventory"><img width="53" height="53" src="' +
                    ItemManager.get(a).image +
                    '" class="tw_item item_inventory_img dnd_draggable dnd_dragElem" style="margin-left:3px;margin-top:4px;"><span class="count" style="display: block;"><p>' +
                    u.count +
                    "</p></span></div>";
                }
              }
              for (a in n.offers_unend) {
                o++;
                if (o > 19) {
                  s += " ... ";
                  break;
                }
                u = n.offers_unend[a];
                if (n.offers_unend[a] !== 0) {
                  s +=
                    '<div style="opacity:0.35" class="item item_inventory"><img width="53" height="53" src="' +
                    ItemManager.get(a).image +
                    '" class="tw_item item_inventory_img dnd_draggable dnd_dragElem" style="margin-left:3px;margin-top:4px;"><span class="count" style="display: block;"><p>' +
                    u.count +
                    "</p></span></div>";
                }
              }
              s += "</div>";
              e("<div />")
                .css({
                  left: `${(n.x / (181 * window.GameMap.tileSize)) * 770 - 5}px`,
                  top: `${(n.y / (79 * window.GameMap.tileSize)) * 338 - 5}px`,
                })
                .attr({ class: "twdb_mmap_point", id: t, title: s })
                .click(
                  (function (e) {
                    return function () {
                      TownWindow.open(e.x, e.y);
                    };
                  })(n)
                )
                .appendTo(r);
            }
            e(
              "<img src='" +
              to_cdn("images/map/minimap/icons/miniicon_pos.png") +
              "' />"
            )
              .css({
                left:
                  (Character.position.x / (181 * window.GameMap.tileSize)) * 770 -
                  8 +
                  "px",
                top:
                  (Character.position.y / (79 * window.GameMap.tileSize)) * 338 -
                  8 +
                  "px",
                width: "16px",
                height: "16px",
              })
              .attr({
                class: "mmap_mappoint",
                id: "mmap_icon_pos",
                title: "  ",
              })
              .appendTo(r);
            m();
          };
          var m = function () {
            try {
              var t = [],
                r,
                s,
                o;
              for (r in i) {
                t.push({ id: r, distance: i[r].distance });
              }
              t.sort(function (e, t) {
                return e.distance === t.distance
                  ? 0
                  : e.distance > t.distance
                    ? 1
                    : -1;
              });
              o = "";
              for (var u = 0; u < t.length; u++) {
                var a = i[t[u].id];
                o +=
                  '<div><a onclick="TownWindow.open(' +
                  a.x +
                  ", " +
                  a.y +
                  ');">' +
                  a.name +
                  "</a>" +
                  ' <a title="   " onclick="GameMap.center(' +
                  a.x +
                  ", " +
                  a.y +
                  ')"><img src="' +
                  Game.cdnURL +
                  '/images/icons/center.png" /></a>' +
                  " : " +
                  a.distance +
                  ' <a title="  " onclick="TaskQueue.add(new TaskWalk(' +
                  a.town_id +
                  ",'town'))\"><img src=\"" +
                  Game.cdnURL +
                  '/images/map/icons/instantwork.png"></a>' +
                  (a.money === 0 ? "" : ` ${a.money}$`) +
                  "<br />";
                for (s in a.offers_end) {
                  var f = a.offers_end[s];
                  if (a.offers_end[s] !== 0) {
                    var l = new ItemPopup(ItemManager.get(s));
                    o +=
                      '<div class="item item_inventory" title="' +
                      l.getXHTML().escapeHTML() +
                      '"><img width="53" height="53" src="' +
                      ItemManager.get(s).image +
                      '" class="tw_item item_inventory_img dnd_draggable dnd_dragElem" style="margin-left:3px;margin-top:4px;"><span class="count" style="display: block;"><p>' +
                      f.count +
                      "</p></span></div>";
                  }
                }
                for (s in a.offers_unend) {
                  var f = a.offers_unend[s];
                  if (a.offers_unend[s] !== 0) {
                    var l = new ItemPopup(ItemManager.get(s));
                    o +=
                      '<div style="opacity:0.35" class="item item_inventory" title="' +
                      l.getXHTML().escapeHTML() +
                      '"><img width="53" height="53" src="' +
                      ItemManager.get(s).image +
                      '" class="tw_item item_inventory_img dnd_draggable dnd_dragElem" style="margin-left:3px;margin-top:4px;"><span class="count" style="display: block;"><p>' +
                      f.count +
                      "</p></span></div>";
                  }
                }
                o += "</div>";
                for (var c = 0; c <= (a.count - (a.count % 12)) / 12; c++) {
                  o += a.count === 0 ? "<br/>" : "<br/><br/><br/><br/>";
                }
              }
              var h = new west.gui.Scrollpane();
              e(h.getMainDiv()).css({ height: "200px", "margin-left": "8px" });
              h.appendContent(o);
              n.append(h.getMainDiv());
            } catch (p) {
              Error.report(p, "Market createTownList");
            }
            window.MarketWindow.window.hideLoader();
          };
          return t;
        })($);
        Debugger.Market = Market;
        var Fort = (function ($) {
          var _self = {};
          var loader = {};
          var battleStats = {};
          var init = function () {
            if (loader.ready) {
              return;
            }
            if (Settings.get("enhanced_fort_recruitment", true)) {
              inject();
            }
            if (Settings.get("declare_report", true)) {
              declareShowFort();
            }
            if (Settings.get("owned_forts_tab", false)) {
              ownedForts();
            }
            if (Settings.get("cemetery_critical", false)) {
              setupCemeteryCritHits();
            }
            if (Settings.get("total_dmg_battle", false)) {
              totalDMGinBattle();
            }
            if (Settings.get("battle_info_round", false)) {
              battleInfoPerRound();
            }
            if (Settings.get("total_dmg_battle", true) || Settings.get("battle_info_round", true)) {
              initBattleInfo();
            }
            loader.ready = true;
          };
          loader = Loader.add("Fort", "tw-db Fort", init, { Settings: true });
          var getFortBattleLang = function() {
            var lang = TWDB.lang || {};
            return {
              sortByHealth: lang.sort_by_health,
              healthPoints: lang.health_points,
              sortAscCurrentHealth: lang.sort_asc_current_health,
              sortDescCurrentHealth: lang.sort_desc_current_health,
              sortAscMaxHealth: lang.sort_asc_max_health,
              sortDescMaxHealth: lang.sort_desc_max_health,
              sortAscDistance: lang.sort_asc_distance,
              sortDescDistance: lang.sort_desc_distance,
              showPlayersAtFort: lang.show_players_at_fort,
              hidePlayersAtFort: lang.hide_players_at_fort,
              showPlayersNearFort: lang.show_players_near_fort,
              hidePlayersNearFort: lang.hide_players_near_fort,
              showPlayersAwayFort: lang.show_players_away_fort,
              hidePlayersAwayFort: lang.hide_players_away_fort
            };
          };
          var inject = function () {
            var fortLang = getFortBattleLang();
            TWDB.Util.addCss(`
              .fortbattle .trows .status {text-align: center;}
              .fortbattle .trows .health_points {width: 90px; text-align: center; margin-left: -8px;}
              .fortbattle .tfoot .name, .fortbattle .tfoot .town, .fortbattle .tfoot .class {width: 100px; position: relative; top: 10px; margin-right: 10px;}
              .fortbattle .tfoot .name {text-align: left; width: 75px; margin: 0 -5px 0 5px;}
              .fort_battle_recruitlist span.tw2gui_textfield {position: relative; top: 10px;}
              .fortbattle .trows .health_points p {font-size: 13px!important;}
              .cell_3.class {margin-left: -15px; margin-right: 8px;}
              .cell_4 .sort-class {margin-left: -8px;}
              .cell_5 .sort-status {margin-left: -20px;}
              .cell_6 .sort-health_points {text-align: center; width: 90px; display: inline-block; margin-left: -12px;}
              .fortbattle .trows .cell_3.class {text-align: right;}
            `);
            try {
              window.gradeValues = { TRAITOR:"-2", RESERVIST:"-1", RECRUIT:"0", PRIVATE:"1", SERGEANT:"2", CAPTAIN:"3", MAJOR_GENERAL:"4", GENERAL:"5" };
              window.gradeNames = { "-2":"traitor", "-1":"reservist", 0:"recruit", 1:"private", 2:"sergeant", 3:"captain", 4:"major_general", 5:"general" };
              window.getGradeImg = function (e, t, n, r) {
                try {
                  return (`<img class="${n || ""}" src="${window.Game.cdnURL}/images/chat/servicegrade_${gradeNames[e]}.png" title="${t ? window.Chat.rankTitles[gradeNames[e]].escapeHTML() : ""}${isDefined(r) && r !== "" ? ` (${r})` : ""}" />` );
                } catch (i) {
                  Error.report(i, "getGradeImg");
                }
              };
              if(!window.FortBattleWindow) return;
              [
                ['updateRecruitlist', true, [
                  [/totalCnt\s{0,1}=\s{0,1}0;/,
                    "totalCnt=0, totalCntTotal=0, gradeCountTotal={ '-2':0, '-1':0, '0':0, '1':0, '2':0, '3':0, '4':0, '5':0 };"],
                  [/gradeCount\[g\]/,
                    "'<span style=\"font-size:15px;\"><span style=\"font-weight:700;text-align:center;width:45px;display:inline-block;margin-left:-10px;top:2px;position:relative;color:'+(gradeCount[g]===gradeCountTotal[g]?(gradeCount[g]>0?'forestgreen':'lightslategray'):'crimson')+';\">'+gradeCount[g]+'</span></span>'"],
                  [/\+\s{0,1}totalCnt\s{0,1}\+/, "+totalCnt+' ['+totalCntTotal+']'+"],
                  [/if\(this\.preBattle\.isHidden\(list\[i\]\['class'\], ?'rank_' ?\+ ?priv\)\)/,
                    "totalCntTotal++;gradeCountTotal[priv]++;if(this.preBattle.isHidden(list[i]['class'],'rank_'+priv,list[i].coords.x,list[i].coords.y))"],
                  [/getGradeImg\(priv, ?true, ?'recruitplayer recruitplayer-'\+ ?i\)/,
                    "getGradeImg(priv,true,'recruitplayer recruitplayer-'+i,list[i].officername||'')"],
                  [/\.addColumns\(\s*\[\s*'count'\s*,\s*'name'\s*,\s*'town'\s*,\s*'rank'\s*,\s*'class'\s*,\s*'status'\s*,\s*'evaluated'\s*\]\s*\)/,
                    ".addColumns(['count','name','town','rank','class','status','health_points'])"],
                  [/\.appendToThCell\(\s*'head'\s*,\s*'evaluated'\s*,[\s\S]*?\);/,
                    `.appendToThCell('head','health_points','${fortLang.sortByHealth}','<span class="sort sort-health_points">'+'${fortLang.healthPoints}'+'</span>');`],
                  [/evaluated\s*:\s*list\[i\]\.officername\s*\|\|\s*''/,
                    "health_points:'<p style=\"font-weight:700;color:'+((this.preBattle.battleData.fortCoords.x-list[i].coords.x==0&&this.preBattle.battleData.fortCoords.y-list[i].coords.y==0)?'rgb(0,153,0)':((Math.abs(this.preBattle.battleData.fortCoords.x-list[i].coords.x)<=500&&Math.abs(this.preBattle.battleData.fortCoords.y-list[i].coords.y)<=500)?'rgb(255,119,0)':'rgb(255,0,0)'))+'\">'+(list[i].currhealth===list[i].maxhealth?format_number(list[i].maxhealth):format_number(list[i].currhealth)+'&boxv;'+format_number(list[i].maxhealth))+'</p>'"]
                ]],
                ['recruitListClick',false,[
                  [/pp ?< ?ownPriv/,"pp<ownPriv&&ownPriv>gv.SERGEANT"],
                  [/var hidden ?= ?function\(classKey, ?privKey\) ?{ ?return that\.preBattle\.isHidden\(classKey, ?'rank_'\+ ?privKey\); ?};/,
                    "{var hidden=function(classKey,privKey,location){return that.preBattle.isHidden(classKey,'rank_'+privKey,null,null,location);};}"],
                  [/return ?{message: ?sorting, ?title: ?title};/,
                    `else if(key=='health_points'){title='${fortLang.sortByHealth}';sorting.append(getSortLink('${fortLang.sortAscCurrentHealth}','>currhealth'));sorting.append(getSortLink('${fortLang.sortDescCurrentHealth}','<currhealth'));sorting.append(getSortLink('${fortLang.sortAscMaxHealth}','>maxhealth'));sorting.append(getSortLink('${fortLang.sortDescMaxHealth}','<maxhealth'));sorting.append('<br />');sorting.append(getSortLink('${fortLang.sortAscDistance}','>distance'));sorting.append(getSortLink('${fortLang.sortDescDistance}','<distance'));sorting.append(getVisLink(hidden(null,'-3','atfort')?'${fortLang.showPlayersAtFort}':'${fortLang.hidePlayersAtFort}','atfort'));sorting.append(getVisLink(hidden(null,'-3','nearbyfort')?'${fortLang.showPlayersNearFort}':'${fortLang.hidePlayersNearFort}','nearbyfort'));sorting.append(getVisLink(hidden(null,'-3','notatfort')?'${fortLang.showPlayersAwayFort}':'${fortLang.hidePlayersAwayFort}','notatfort'));}return{message:sorting,title:title};`]
                ]]
              ]
              .forEach(([fn,preserve,repls])=>{
                  const original=window.FortBattleWindow[fn];
                  if(!original||original.__hp_patched) return;
                  let src=String(original);
                  repls.forEach(([p,r])=>{src=src.replace(p,r);});
                  const wrapped= preserve ? `(function(){var lastStamp;return ${src}})();` : `(function(){return ${src}})();`;
                  const compiled=new Function(`return ${wrapped}`)();
                  window.FortBattleWindow[fn] = function (...a) {
                    const r = compiled.apply(this, a);
                    if (fn === 'updateRecruitlist') try {
                      const root = this.infoareaEl?.[0];
                      const th1 = TWDS.q1(".cell_4 .sort-class", root);
                      const th2 = TWDS.q1(".cell_5 .sort-status", root);
                      if (th1) th1.textContent = TWDB.lang.category;
                      if (th2) th2.innerHTML = `<img src="${window.Game.cdnURL}/images/chat/servicegrade_general.png" alt="${TWDB.lang.rank}" style="pointer-events:none;">`;
                    } catch {}
                    return r;
                  };
                  window.FortBattleWindow[fn].__hp_patched=true;
                  window.FortBattleWindow[fn].__hp_original=original;
              });
              PreBattle.recruitSorting.currhealth = function (e, t, n) {
                return n
                  ? e.currhealth === t.currhealth
                  : e.currhealth < t.currhealth;
              };
              PreBattle.recruitSorting.maxhealth = function (e, t, n) {
                return n ? e.maxhealth === t.maxhealth : e.maxhealth < t.maxhealth;
              };
              PreBattle.recruitSorting.distance = function (_e, _t, _n, _r, _i, _s) { };
              PreBattle.isHidden = function (e, t, n, r, i) {
                if (i === null) {
                  var s = this.battleData.fortCoords.x - n;
                  var o = this.battleData.fortCoords.y - r;
                  var u = "notatfort";
                  if (s === 0 && o === 0) {
                    u = "atfort";
                  } else if (Math.abs(s) <= 500 && Math.abs(o) <= 500) {
                    u = "nearbyfort";
                  }
                } else if (i !== null) {
                  var u = i;
                }
                return (
                  (e !== undefined && this.recruitlistVisibility[e]) ||
                  (t !== undefined && this.recruitlistVisibility[t]) ||
                  (u !== undefined && this.recruitlistVisibility[u])
                );
              };
            } catch (e) {
              Error.report(e, "Fort");
            }
          };
          var declareShowFort = function () {
            ReportWindow.init_content_backup = ReportWindow.init_content;
            ReportWindow.init_content = function (data) {
              ReportWindow.init_content_backup.call(this, data);
              if (data.reportType === "fortbattle" && data.reportInfo.subtype === "declare") {
                getFortID(data.reportInfo.fortname, data.report_id);
              }
            };
            function getFortID(fortName, reportId) {
              Ajax.remoteCall(
                "fort_overview",
                "search_fort",
                { fortNames: fortName },
                function (json) {
                  if (json && !json.error) {
                    for (var i in json) {
                      var fort = json[i];
                      if (fort && fort.name === fortName) {
                        $(`#rp_report-${reportId} .fort_muster a:first-child`).replaceWith(`<a href="javascript:void(FortWindow.open(${fort.fort_id}, ${fort.fort_x}, ${fort.fort_y}));">${fort.name}</a>` );
                        break;
                      }
                    }
                  }
                }
              );
            };
          };
          var ownedForts = function () {
            var data = {};
            var lang = {
              forts: TWDB.lang.forts,
              fort_size: TWDB.lang.fort_size,
              fort_sizes: TWDB.lang.fort_sizes,
            };
            $(document).on("click", ".tow_profileheader img", function () {
              var windowEl = $(this).closest(".tw2gui_window");
              var mapAttr = windowEl.find(".imagemap_cityhall").attr("onclick");
              if (!mapAttr) return;
              var match = /CityhallWindow\.open\((.*)?\); return false;/.exec(mapAttr);
              if (!match) return;

              var townId = parseInt(match[1]);
              var prop =
                this ===
                windowEl.find('.tow_profileheader img[src*="fort_mini_icon"]').get(0)
                  ? "owned"
                  : "members";

              if (!data[townId]) {
                Ajax.get("map", "get_minimap", {}, function (json) {
                  buildData(json);
                  if (data[townId]) openWindow(townId, prop);
                });
              } else {
                openWindow(townId, prop);
              }
            });

            document.styleSheets[0].insertRule(
              ".twdb-forts-container .fortname {width:75%;}"
            );
            document.styleSheets[0].insertRule(
              ".twdb-forts-container .fortsize {width:25%;text-align:center;}"
            );
            document.styleSheets[0].insertRule(
              '.tow_profileheader img[src*="fort_mini_icon"] {cursor:pointer;}'
            );

            var buildData = function (json) {
              for (var i in json.forts) {
                for (var j in json.forts[i]) {
                  var fort = json.forts[i][j];
                  if (!fort.fort) continue;
                  var owner = fort.fort.town_id;
                  var members = fort.townIds || [];
                  var fortData = {
                    type: fort.fort.type,
                    id: fort.fort.fort_id,
                    x: fort.fort.x,
                    y: fort.fort.y,
                    name: fort.fort.name,
                  };
                  if (!data[owner]) data[owner] = { owned: [], members: [] };
                  data[owner].owned.push(fortData);
                  for (var k = 0; k < members.length; k++) {
                    if (!data[members[k]]) data[members[k]] = { owned: [], members: [] };
                    data[members[k]].members.push(fortData);
                  }
                }
              }
            };

            Ajax.get("map", "get_minimap", {}, function (json) {
              buildData(json);
            });

            var openWindow = function (townId, type) {
              var fortsContainer = $(
                '<div class="twdb-forts-container" style="height:100%"></div>'
              );
              var table = new west.gui.Table();
              table
                .addColumn("fortname")
                .addColumn("fortsize")
                .appendToCell("head", "fortname", lang.forts)
                .appendToCell("head", "fortsize", lang.fort_size);

              var forts = data[townId][type];
              for (var i = 0; i < forts.length; i++) {
                table.appendRow();
                table
                  .appendToCell(
                    i,
                    "fortname",
                    '<div class="anti_wrap">' +
                      '<a onclick="GameMap.center(' +
                      forts[i].x +
                      ", " +
                      forts[i].y +
                      ')" href="#">' +
                      '<img class="fortOverviewIconScroll hasMousePopup" src="images/icons/center.png"></a> ' +
                      '<a href="javascript:void(FortWindow.open(' +
                      forts[i].id +
                      "," +
                      forts[i].x +
                      "," +
                      forts[i].y +
                      '));" class="hasMousePopup">' +
                      forts[i].name +
                      "</a></div>"
                  )
                  .appendToCell(i, "fortsize", lang.fort_sizes[forts[i].type]);
              }

              fortsContainer.html(table.getMainDiv());
              wman
                .open(
                  "twdb-forts-container",
                  null,
                  "twdb-forts-container noreload nocloseall nominimize dontminimize"
                )
                .setTitle(lang.forts)
                .setMiniTitle(lang.forts)
                .appendToContentPane(fortsContainer)
                .setSize(340, 360);
            };
          };
          var setupCemeteryCritHits = function () {
            document.styleSheets[0].insertRule(`.cemetery .fancytable .row_head .battle_cri span {background: url("${Images.iconCritical}");height:17px;width:16px;}`);
            document.styleSheets[0].insertRule(".cemetery .fancytable .battle_cri, .cemetery .fancytable .battle_gho {width:18px;}");
            document.styleSheets[0].insertRule(`.cemetery .fancytable .row_head .battle_gho span {background: url("${Images.iconPhantom}");height:17px;width:16px;}`);
            document.styleSheets[0].insertRule(".cemetery #battle_stat.fancytable div.battle_tow {width:60px!important;}");
            var patchedInit = CemeteryWindow.showStatInit.toString().replace(
              "$('div.cemetery-content',",
              "CemeteryWindow.table.addColumn('battle_cri',{sortBy:'crithits'})" +
                ".addColumn('battle_gho',{sortBy:'playdeadcount'})" +
                ".appendToThCell('head','battle_cri','" +
                " " +
                "','&nbsp;')" +
                ".appendToThCell('head','battle_gho','" +
                "  " +
                "','&nbsp;');sortByObj.sortBy=null;$('div.cemetery-content',"
            );
            var patchedUpdate = CemeteryWindow.showStatUpdateTable
              .toString()
              .replace(
                "CemeteryWindow.table.buildRow('battlestat tw_red'",
                "tmpCells['battle_cri']=rd.charclass==1?rd.crithits:'-';" +
                  "tmpCells['battle_gho']=rd.charclass==0?rd.playdeadcount:'-';" +
                  "CemeteryWindow.table.buildRow('battlestat tw_red'"
              )
              .replace(
                "CemeteryWindow.table.buildRow('battlestat tw_blue'",
                "tmpCells['battle_cri']=rd.charclass==1?rd.crithits:'-';" +
                  "tmpCells['battle_gho']=rd.charclass==0?rd.playdeadcount:'-';" +
                  "CemeteryWindow.table.buildRow('battlestat tw_blue'"
              );
            var sortHelpers =
              "var sortByObj={sortBy:null,orderBy:'ASC'};" +
              "var startSortDispatcher=function(ev){var sortBy='';sortBy=$(ev.target).closest('div.cell').data('sortBy');if(sortByObj.sortBy==sortBy){sortByObj.orderBy=sortByObj.orderBy=='asc'?'desc':'asc';CemeteryWindow.currentStats.reverse();}else{sortByObj.sortBy=sortBy;sortByObj.orderBy='asc';switch(sortBy){case'name':case'townname':CemeteryWindow.currentStats.sort(sortStrings(sortBy));break;case'ko_shots':CemeteryWindow.currentStats.sort(sortLength(sortBy));break;default:if($.isNumeric(CemeteryWindow.currentStats[0][sortBy])) CemeteryWindow.currentStats.sort(sortNumbers(sortBy));break;}}updatePlayerStatTable(CemeteryWindow.currentStats);};" +
              "var sortLength=function(col) {return function(a,b) {return b[col].length-a[col].length;};};" +
              "var sortNumbers=function(col) {return function(a,b) {return b[col]-a[col];};};" +
              "var sortStrings=function(col) {return function(a,b) {return a[col].toUpperCase().replace(/[-]/g,'A').replace(/[-]/,'O').replace(/[-]/,'U').replace(/[-]/,'E')>b[col].toUpperCase().replace(/[-]/g,'A').replace(/[-]/,'O').replace(/[-]/,'U').replace(/[-]/,'E')?1:-1;};};" +
              "var updatePlayerStatTable=function() {CemeteryWindow.table.clearBody();var tmpCells={};for(var i=0;i<CemeteryWindow.currentStats.length;i++) {var rd=CemeteryWindow.currentStats[i];tmpCells['battle_nam']=rd.name;tmpCells['battle_tow']=rd.townname;tmpCells['battle_shp']=rd.starthp;tmpCells['battle_ehp']=rd.finishedhp;tmpCells['battle_fla']=rd.flagholdcount;tmpCells['battle_hco']=rd.hitcount;tmpCells['battle_fco']=rd.misscount;tmpCells['battle_dco']=rd.totalcauseddamage;tmpCells['battle_ohi']=rd.takenhits;tmpCells['battle_ofa']=rd.dodgecount;tmpCells['battle_odm']=rd.takendamage;tmpCells['battle_avd']=rd.avg_damage;tmpCells['battle_okh']=rd.ko_shots.length;tmpCells['battle_onl']=rd.onlinecount;tmpCells['battle_cri']=rd.charclass==1?rd.crithits:'-';tmpCells['battle_gho']=rd.charclass==0?rd.playdeadcount:'-';CemeteryWindow.table.buildRow('battlestat '+(rd.battle_type=='defender'?'tw_blue':'tw_red'),tmpCells,addKoShotTitle(rd.ko_shots));}};" +
              "var addKoShotTitle=function(koShots){return function(row){if(koShots.length){$('.battle_okh',row).attr('title',koShots.join(', '));} return row;}};";

            eval(
              "(function($){" +
                "CemeteryWindow.showStatInit=" +
                patchedInit +
                ";" +
                "CemeteryWindow.showStatUpdateTable=" +
                patchedUpdate +
                ";" +
                sortHelpers +
                "})(jQuery);"
            );
          };
          var totalDMGinBattle = function () {
            if (typeof FortBattle === "undefined") return;
            try {
              if (!FortBattle.flashShowCharacterInfo_backup && typeof FortBattle.flashShowCharacterInfo === "function") {
                FortBattle.flashShowCharacterInfo_backup = FortBattle.flashShowCharacterInfo;
                FortBattle.flashShowCharacterInfo = function () {
                  FortBattle.flashShowCharacterInfo_backup.apply(FortBattle, arguments);
                  var args = arguments;
                  $("div.recruitlist_name", `#fort_battle_${args[0]}_infoarea`).html(
                    `<span onclick="PlayerProfileWindow.open(${args[1]});" style="cursor:pointer;">${$("div.recruitlist_name").text()}</span>`
                  );
                };
              }
              if (!FortBattle.getCharDataSheet_backup && typeof FortBattle.getCharDataSheet === "function") {
                FortBattle.getCharDataSheet_backup = FortBattle.getCharDataSheet;
                FortBattle.getCharDataSheet = function (data) {
                  return (
                    FortBattle.getCharDataSheet_backup(data) +
                    '<div><img src="' +
                    Images.iconTotalDMG +
                    '" title=" " /> %totalDmg%</div>'
                  );
                };
              }
            } catch (e) {}
          };
          var battleInfoPerRound = function () {
            try {
              FortBattle.addRoundStatusMessage_backup = FortBattle.addRoundStatusMessage;
              FortBattle.addRoundStatusMessage = function (fortId, queue) {
                FortBattle.addRoundStatusMessage_backup(fortId, queue);
                if (!battleStats[fortId]) {
                  battleStats[fortId] = { hit: 0, missed: 0, gotshot: 0, dodge: 0 };
                }
                var stats = battleStats[fortId];
                for (var i = 0; i < queue.length; i++) {
                  var msg = queue[i];
                  switch (msg.action) {
                    case "gotshot":
                      if (msg.damage === 0) {
                        stats.dodge++;
                      } else {
                        stats.gotshot++;
                      }
                      break;
                    case "shot":
                      if (msg.damage === 0) {
                        stats.missed++;
                      } else {
                        stats.hit++;
                      }
                      break;
                  }
                }
                if (queue.length !== 0) {
                  FortBattle.showMessage(
                    fortId,
                    `<strong> |   : </strong>"${stats.hit}"<strong> |   : </strong>"${stats.missed}"<strong> |   : </strong>"${stats.gotshot}"<strong> |   : </strong>"${stats.dodge}`
                  );
                }
              };
            } catch (e) {}
          };
          var initBattleInfo = function () {
            FortBattle.addFinishMessage_backup = FortBattle.addFinishMessage;
            FortBattle.addFinishMessage = function (fortId, msg) {
              FortBattle.addFinishMessage_backup(fortId, msg);
              battleStats[fortId] = { hit: 0, missed: 0, gotshot: 0, dodge: 0 };
            };
          };
          return _self;
        })($);
        Debugger.Fort = Fort;
        var CCstarter = (function (_e) {
          var t = {};
          var n = {};
          var r = function () {
            if (n.ready) {
              return;
            }
            ClothCalc.ready = n.ready;
            ClothCalc.init();
            n.ready = true;
          };
          n = Loader.add("ClothCalc", "tw-db ClothCalc", r, {});
          return t;
        })($);
        Debugger.CCstarter = CCstarter;
        if (
          (w.location.href.indexOf(".the-west.") !== -1 ||
            w.location.href.indexOf(".tw.innogames.") !== -1) &&
          w.location.href.indexOf("game.php") !== -1
        ) {
          Loader.init();
        }
      })(jQuery);
    }
  });