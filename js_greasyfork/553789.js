// ==UserScript==
// @name         解锁华医网视频拖动限制
// @version      2.1
// @description  使用此脚本可以解除华医网不允许拖动视频播放进度条的限制，会弹窗显示视频观看时长不足，请重新观看是正常现象，第二天再考试即可。
// @author       君羽尘尘
// @match        https://cme28.91huayi.com/course_ware/*
// @icon         data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAA38mAH9sBACCbwwAg3IEAId4BQCLfQYAA4AoAASDKwAPgy4ABocxAA+GMgAGiTIACI86AAmQPABAiDwACpZDAAuYRgAMmEYAGJ5RADCRRgA2lk4AJp5UAB6hVQAVtGoAFrZtABm7dAAYvXUAIK9nACCxaQAuuXYAMbh2AESjYQBLomMAU6FkAFKpbABJrnAARrh7AF6yegBorXcAbLB8AI6CCQCShwgAlYsKAJePCgCakwsAm5QLAJ+aDQCgmw0Aop4OAKShDgCopw8AqqoQAK2uEQCqqB4ArawfALG0EwCytBUAlYclAJyRKgClnDsAsrMjAK+rOQC4tj4An49NAKmbXwC7uU4Ar6ZQALKrVQC4slYAsadkALOoaQC2rHIAvLR0AL2zeQC/t3oAvLJ/AMG7cQDHyk8AystsAMjFeQDP0HQA09R+AHy+kABfz5wAS9CYAGjDkQBpx5YAbcWVAG3ImABpz58AesOVAF/SoAB1z6MAgbuNAMC3ggDHvpcAg8OYAIXFmgCVxZ8Ais+oAJPGoACYyaUAm9CtAJ7VtQCf27sArMyrAKPSsgCn1rgA1teFANjahgDQzJIA19eQANfXlQDd35MA2NedANzaqADa1LkA29W9AOHftwDh4bAAv9zGALTgxwDD4csAye7dANTs3QDn5sYA5uPLAOLhzwDu780A7+/YAM7x4gDe8+kA5vLqAOP37wD19eYA9vXrAPf46ADp+PEA7/jzAPD59AD3+vcA+vr2APz89gD5/PoA/f36APv+/QD+/oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAACFJyJjjQAAAAAAAAAAAAAAAAAAag95AAAAAAAAAAAAAAAAdUCAKF4UFWYAAAAAgEpIYEGNACEJZQEBIwAATSkFXwNKAHsLCFMgCgpsdC0rPEoEAnVhJmxhZw0OJEIvLW9DSkdGWw0WhX0QERc3MjB+iUQFOmgRE3qNZFYlPTM3gnctKjsAVllWaRwdXW1RcHBzUEVNAAAfH1kZGXyBOTVPeDA+AAAAAFQbG1QAAG45NTU/AAAAAAAAAFUAAAAATjlSAAAAAAAAAAAAAAAAAAByAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AADwfwAA/j8AAPwDAADAgQAAgQAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAeEAAIP7AADH/wAA7/8AAP//AAA=
// @grant        none
// @license MIT
// @namespace https://greasyfork.org/users/1530986
// @downloadURL https://update.greasyfork.org/scripts/553789/%E8%A7%A3%E9%94%81%E5%8D%8E%E5%8C%BB%E7%BD%91%E8%A7%86%E9%A2%91%E6%8B%96%E5%8A%A8%E9%99%90%E5%88%B6.user.js
// @updateURL https://update.greasyfork.org/scripts/553789/%E8%A7%A3%E9%94%81%E5%8D%8E%E5%8C%BB%E7%BD%91%E8%A7%86%E9%A2%91%E6%8B%96%E5%8A%A8%E9%99%90%E5%88%B6.meta.js
// ==/UserScript==

(function(){'use strict';window.s2j_onPlayerInitOver=function(){return;};let a=false;function b(){if(a){return;}const c=document.querySelectorAll('video');let d=0;c.forEach(e=>{if(e.duration>0){e.currentTime=e.duration-1;}e.play().then(()=>{d++;setTimeout(()=>{e.play();},1000);if(d===c.length){a=true;}}).catch(f=>{setTimeout(()=>{e.play().then(()=>{d++;}).catch(()=>{d++;});},1000);if(d===c.length){a=true;}});});if(c.length===0){a=true;}}var g={childList:true,subtree:true};var h=function(i,j){for(var k of i){if(k.type==='childList'){k.addedNodes.forEach(function(l){if(l.nodeType===1){if(l.classList.contains('pv-ask-modal-wrap')||l.classList.contains('study_diaog')||l.classList.contains('pv-base-control')){l.parentNode.removeChild(l);}var m=l.querySelectorAll?l.querySelectorAll('video'):[];if(m.length>0){m.forEach(function(n){if(!n.hasAttribute('controls')){n.setAttribute('controls','');}});}}});}}};var o=new MutationObserver(h);var p=document.body;o.observe(p,g);var q=document.getElementsByTagName('video');Array.prototype.forEach.call(q,function(r){if(!r.hasAttribute('controls')){r.setAttribute('controls','');}});function s(){setTimeout(b,2000);}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',s);}else{s();}})();