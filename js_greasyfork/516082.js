// ==UserScript==
// @name        VK Next
// @description Лучшее расширение для ВКонтакте с множеством функций, в числе которых есть эксклюзивные.
// @version     14.8.0
// @author      https://vknext.net
// @homepage    https://vknext.net
// @supportURL  https://vk.me/vknext
// @match       https://vk.com/*
// @match       https://vk.ru/*
// @match       https://vkvideo.ru/*
// @match       https://vksport.vkvideo.ru/*
// @match       https://oauth.vk.ru/blank.html
// @connect     self
// @connect     vknext.net
// @connect     api.telegram.org
// @connect     api.genius.com
// @connect     *
// @grant       GM_info
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_addValueChangeListener
// @grant       GM_listValues
// @grant       GM_deleteValue
// @grant       GM_xmlhttpRequest
// @grant       GM_addElement
// @grant       GM_notification
// @grant       GM_openInTab
// @grant       GM_registerMenuCommand
// @icon        https://static.vknext.net/logos/VKNext.png
// @namespace   vknext
// @noframes
// @run-at      document-start
// @downloadURL https://update.greasyfork.org/scripts/516082/VK%20Next.user.js
// @updateURL https://update.greasyfork.org/scripts/516082/VK%20Next.meta.js
// ==/UserScript==

(([window,globalThis])=>{(()=>{var __webpack_modules__={387:(e,t,s)=>{s.d(t,{A:()=>n});const n=()=>Math.floor(Date.now()/1e3)},2006:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});s(98570);const n=new(s(73737).A)},3916:(e,t,s)=>{"use strict";s.d(t,{P:()=>r});var n=s(50313);const r=()=>(0,n.A)("vk")},5305:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(91953);const r=new Set;let a=!1;const o=e=>(r.add(e),(async()=>{if(a)return;a=!0;const e=await(0,n._)(),t=e.post;e.post=function(...s){let n=!1;for(const e of r)try{const t=e(s);!0===t?n=!0:!t||t instanceof Promise||(s=t)}catch(e){console.error(e)}if(!n)return Reflect.apply(t,e,s)}})(),()=>r.delete(e))},7298:(e,t,s)=>{"use strict";s.d(t,{Ku:()=>n.K,Kr:()=>r.K,vt:()=>o,R2:()=>i.R});s(35627);var n=s(71191),r=s(74501),a=s(50313);const o=()=>(0,a.A)("MECommunityCommonContext");var i=s(91570)},7408:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(36008);const r=(e,t)=>{const s=new URL(e);return s.pathname=`${s.pathname}/${t}`,s.toString()};let a=null;const o=async(e="")=>{const t=document.currentScript;if(t&&t instanceof HTMLScriptElement&&t.src)return r(t.src,e);const s=await(async()=>{if(a)return a;const e=await n.default.sendMessage("vkn-b-gm");return a=e.url,e.url})();return r(s,e)}},7417:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});const n=e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}},7618:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});const n=Object.freeze({MIN_CHAT_ID:2e9,MAX_CHAT_ID:21e8,UNAUTH_LONG_ID_SUBRANGE_WITH_DEVICE_ID_SIZE:5e16,UNAUTH_LONG_ID_SUBRANGE_WITHOUT_DEVICE_ID_SIZE:2**56-1,UNAUTH_LONG_ID_MIN:9e18,UNAUTH_LONG_ID_MAX:0x7e980f0d11490000,MARUSYA_UPLOAD_OWNER_MIN:593139650,MARUSYA_UPLOAD_OWNER_MAX:593139654,UNAUTH_LONG_ID_MIN_OLD:10000000001,UNAUTH_LONG_ID_MAX_OLD:11e10,FAKE_DOC_OWNER_MIN:2e9,FAKE_DOC_OWNER_MAX:2000063999,ADS_VIDEO_OWNER_MIN:16e6,ADS_VIDEO_OWNER_MAX:16000599,ADS_PHOTO_OWNER_MIN:1698e4,ADS_PHOTO_OWNER_MAX:16999999,AUDIO_FAKE_UMA_RELEASE_OWNER_MIN:-2002e6,AUDIO_FAKE_UMA_RELEASE_OWNER_MAX:-2001e6,AUDIO_FAKE_UMA_ALBUM_OWNER_MIN:-2000999999,AUDIO_FAKE_UMA_ALBUM_OWNER_MAX:-2e9,AUDIO_FAKE_UMA_OWNERS_COUNT:1e6,AUDIO_FAKE_WALL_OWNER_MIN:2e9,AUDIO_FAKE_WALL_OWNER_MAX:2000512e3,USERS_LOWER_BOUND:1,USERS_UPPER_BOUND:19e8,USERS_LOWER_BOUND_LONG:2e11,USERS_UPPER_BOUND_LONG:1e12,EMAIL_UPPER_BOUND:-2e9,CONTACTS_LOWER_BOUND:1900000001,CONTACTS_UPPER_BOUND:2e9,CALLS_PEER_LOWER_BOUND:-1899999999,CALLS_PEER_UPPER_BOUND:-189e7,ANONYMOUS_USER_PEER_ID_LOWER_BOUND:10000000001,ANONYMOUS_USER_PEER_ID_UPPER_BOUND:11e10,CHAT_OR_CHANNEL_LOWER_BOUND:2000000001,CHAT_OR_CHANNEL_UPPER_BOUND:21e8,GROUPS_LOWER_BOUND:-1e9,GROUPS_UPPER_BOUND:-1,APP_LOWER_BOUND:-1999999999,APP_UPPER_BOUND:-1e9,ALIEXPRESS_USER_ID_RANGE_START:2e9,ALIEXPRESS_USER_ID_RANGE_LENGTH:150,AD_BOT_ID_RANGE_START:2e9,AD_BOT_ID_RANGE_END:2000064e3,MARUSIA_AUDIO_FAKE_ID_MIN:2000512001,MARUSIA_AUDIO_FAKE_ID_MAX:2000512051,AUTOTEST_GROUP_ID_MIN:216720807,AUTOTEST_GROUP_ID_MAX:216820807,EXTERNAL_USER_ID_OFFSET:-19e8,APP_DOMAIN_ID_OFFSET:-1e9}),r=(e,t,s)=>t<e&&e<s,a=(e,t,s)=>t<=e&&e<=s,o=(e,t)=>e+Math.floor(Math.random()*(t-e)),i=Object.freeze({getAutotestGroupIdRand:()=>o(n.AUTOTEST_GROUP_ID_MIN,n.AUTOTEST_GROUP_ID_MAX),isAutotestGroup:e=>a(e,n.AUTOTEST_GROUP_ID_MIN,n.AUTOTEST_GROUP_ID_MAX),isGroupId:e=>e<=n.GROUPS_UPPER_BOUND&&e>n.GROUPS_LOWER_BOUND,isUserId:e=>e>=n.USERS_LOWER_BOUND&&e<n.USERS_UPPER_BOUND||e>=n.USERS_LOWER_BOUND_LONG&&e<n.USERS_UPPER_BOUND_LONG,isUserIdTransitional:e=>r(e,0,n.CONTACTS_UPPER_BOUND),isRealOwner:e=>i.isGroupId(e)||i.isUserId(e),isAudioOwner:e=>i.isRealOwner(e)||i.isUMA(e)||i.isFakeWallAudioOwner(e),isPlaylistOwner:e=>i.isRealOwner(e)||i.isUMA(e)||i.isChatOrChannelPeer(e),isOfficialPlaylist:e=>i.isUMAReleaseOwner(e)||i.isUMAAlbumOwner(e),isFakeWallAudioOwner:e=>a(e,n.AUDIO_FAKE_WALL_OWNER_MIN,n.AUDIO_FAKE_WALL_OWNER_MAX),isUMA:e=>i.isUMAReleaseOwner(e)||i.isUMAAlbumOwner(e),isUMAAlbumOwner:e=>a(e,n.AUDIO_FAKE_UMA_ALBUM_OWNER_MIN,n.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX),getUMAAlbumOwnerByShift:e=>n.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX-Math.abs(e%n.AUDIO_FAKE_UMA_OWNERS_COUNT),isUMAReleaseOwner:e=>a(e,n.AUDIO_FAKE_UMA_RELEASE_OWNER_MIN,n.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX),getUMAReleaseOwnerByShift:e=>n.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX-Math.abs(e%n.AUDIO_FAKE_UMA_OWNERS_COUNT),isEmailId:e=>e<n.EMAIL_UPPER_BOUND,isOwnerId:e=>e>=n.USERS_LOWER_BOUND?i.isUserId(e):i.isGroupId(e),isContactId:e=>r(e,n.CONTACTS_LOWER_BOUND,n.CONTACTS_UPPER_BOUND),convertContactIdToPeerId:e=>e+n.USERS_UPPER_BOUND,convertPeerIdToContactId:e=>e-n.USERS_UPPER_BOUND,isChatOrChannelPeer:e=>a(e,n.CHAT_OR_CHANNEL_LOWER_BOUND,n.CHAT_OR_CHANNEL_UPPER_BOUND),isChatId:e=>e>n.MIN_CHAT_ID&&e<=n.MAX_CHAT_ID,convertChatPeerIdToChatId:e=>e-n.CONTACTS_UPPER_BOUND,convertChatIdToChatPeerId:e=>e+n.CONTACTS_UPPER_BOUND,isAppDomain:e=>r(e,n.APP_LOWER_BOUND,n.APP_UPPER_BOUND),convertPeerIdToAppId:e=>-e+n.APP_UPPER_BOUND,convertAppIdToPeerId:e=>n.APP_UPPER_BOUND-e,isUnauthLongId:e=>a(e,n.UNAUTH_LONG_ID_MIN,n.UNAUTH_LONG_ID_MAX),isUnauthLongIdOld:e=>a(e,n.UNAUTH_LONG_ID_MIN_OLD,n.UNAUTH_LONG_ID_MAX_OLD),isMarusyaUploadOwner:e=>a(e,n.MARUSYA_UPLOAD_OWNER_MIN,n.MARUSYA_UPLOAD_OWNER_MAX),getRandomMarusyaUploadOwnerId:()=>o(n.MARUSYA_UPLOAD_OWNER_MIN,n.MARUSYA_UPLOAD_OWNER_MAX),isFakeDocOwner:e=>a(e,n.FAKE_DOC_OWNER_MIN,n.FAKE_DOC_OWNER_MAX),getFirstFakeOwnerId:()=>n.FAKE_DOC_OWNER_MIN,getRandomFirstFakeOwnerId:()=>o(n.FAKE_DOC_OWNER_MIN,n.FAKE_DOC_OWNER_MIN+64e3),getRandomFakeOwnerId:()=>n.FAKE_DOC_OWNER_MIN+(Math.floor(Date.now()/1e3)/173+o(0,999))%64e3,isAdsVideoOwner:e=>a(e,n.ADS_VIDEO_OWNER_MIN,n.ADS_VIDEO_OWNER_MAX),getRandomAdsVideoOwner:()=>o(n.ADS_VIDEO_OWNER_MIN,n.ADS_VIDEO_OWNER_MAX),isAdsPhotoOwner:e=>a(e,n.ADS_PHOTO_OWNER_MIN,n.ADS_PHOTO_OWNER_MAX),getRandomAdsPhotoOwner:()=>o(n.ADS_PHOTO_OWNER_MIN,n.ADS_PHOTO_OWNER_MAX),isZeroOwner:e=>0===e,convertEmailIdToEmailPeerId:e=>i.isEmailId(e)?-e+n.EMAIL_UPPER_BOUND:0,isZeroOwnerDeprecated:e=>!!e||i.isZeroOwner(e),isExternalUser:e=>r(e,n.EMAIL_UPPER_BOUND,n.EXTERNAL_USER_ID_OFFSET),isExternalUserDeprecated:e=>r(e,n.EMAIL_UPPER_BOUND,n.APP_DOMAIN_ID_OFFSET),isAnonymousCallPeerId:e=>r(e,n.CALLS_PEER_LOWER_BOUND,n.CALLS_PEER_UPPER_BOUND),isAnonymousUserPeerId:e=>r(e,n.ANONYMOUS_USER_PEER_ID_LOWER_BOUND,n.ANONYMOUS_USER_PEER_ID_UPPER_BOUND),getAnonymousCallUserByShift(e){const t=n.CALLS_PEER_UPPER_BOUND-n.CALLS_PEER_LOWER_BOUND,s=(e%t+t)%t;return n.CALLS_PEER_UPPER_BOUND-1-s},isValidAliExpressOrderUserId:e=>e>=n.ALIEXPRESS_USER_ID_RANGE_START&&e<=n.ALIEXPRESS_USER_ID_RANGE_START+n.ALIEXPRESS_USER_ID_RANGE_LENGTH,generateAliexpressOrderUserId:()=>o(n.ALIEXPRESS_USER_ID_RANGE_START,n.ALIEXPRESS_USER_ID_RANGE_START+n.ALIEXPRESS_USER_ID_RANGE_LENGTH),isADBot:e=>a(e,n.AD_BOT_ID_RANGE_START,n.AD_BOT_ID_RANGE_END),getMarusiaAudioFakeId(e){const t=n.MARUSIA_AUDIO_FAKE_ID_MAX-n.MARUSIA_AUDIO_FAKE_ID_MIN;return n.MARUSIA_AUDIO_FAKE_ID_MIN+e%t},isMarusiaAudioFakeId:e=>r(e,n.MARUSIA_AUDIO_FAKE_ID_MIN,n.MARUSIA_AUDIO_FAKE_ID_MAX),isOwnerIdTransitional:e=>e>n.USERS_LOWER_BOUND?i.isUserIdTransitional(e):i.isGroupId(e),convertGroupIdToOwnerId:e=>-e,convertGroupIdToOwnerIdStrict:e=>-Math.abs(e),convertOwnerIdToGroupId:e=>Math.abs(e)})},8257:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=e=>{let t=e+"";return e>1e9?t=(e/1e9).toFixed(1).toString().replace(".",",")+"B":e>1e6?t=(e/1e6).toFixed(1).toString().replace(".",",")+"M":e>1e3&&(t=(e/1e3).toFixed(1).toString().replace(".",",")+"K"),t.includes(",0")&&(t=t.slice(0,-3)+t.at(-1)),t}},11688:(e,t,s)=>{"use strict";s(57580);var n=s(7417),r=s(79110),a=s(13625),o=s(76763),i=s(29566),c=s(95313),d=s(94441);const l=(0,i.A)(()=>s.e(9604).then(s.bind(s,77223))),u=(0,i.A)(()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(3068),s.e(555),s.e(4152)]).then(s.bind(s,52567))),_=()=>s.e(8987).then(s.bind(s,8987)),h=()=>s.e(5629).then(s.bind(s,75629)),f=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(8414),s.e(3068),s.e(6987)]).then(s.bind(s,56844)),p=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(3068),s.e(2622)]).then(s.bind(s,19191)),m=()=>Promise.all([s.e(3068),s.e(195)]).then(s.bind(s,54660)),g=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(8414),s.e(181),s.e(8486),s.e(3068),s.e(1600)]).then(s.bind(s,55697)),b=()=>s.e(70).then(s.bind(s,90070)),w=()=>s.e(1547).then(s.bind(s,81547)),A=(0,i.A)(()=>s.e(4060).then(s.bind(s,44060)));(0,c.A)("animatedSplash",()=>s.e(9123).then(s.bind(s,39123))),(0,c.A)("accent",()=>s.e(2797).then(s.bind(s,2797))),(0,c.A)("currentTheme",()=>Promise.all([s.e(7886),s.e(5510)]).then(s.bind(s,45510))),(0,c.A)("alternativeHeader",()=>s.e(2251).then(s.bind(s,42251))),(0,c.A)("customLogoNew",u),(0,c.A)("activeFont",A),(0,c.A)("rounding",()=>s.e(9718).then(s.bind(s,59718))),(0,c.A)("vkSquare",()=>s.e(8922).then(s.bind(s,78922))),(0,n.n)(()=>{(0,c.A)("garland",_),(0,c.A)("logoNY2023",h),(0,c.A)("headerMoon",f),(0,c.A)("stickersSize",w)}),(0,r.g)(()=>{(0,c.A)(({customEmoji:e})=>"vk"!==e,l),(0,c.A)("nyPageHeaderGarland",p),(0,c.A)("nyBackgroundSnowFlake",m),(0,c.A)(({currentTheme:e,themeEditor:t})=>e===t,g),Promise.all([s.e(3068),s.e(5235)]).then(s.bind(s,40772)).catch(console.error)}),(0,a.A)("alternativeScrollBar",d.A.alternativeScrollbar),(0,a.A)("groupsCascaded",d.A.groupsCascaded),(0,a.A)("shrikingStoryBlock",d.A.shrikingStoryBlock);(async()=>{const e=await o.default.getCurrent();return Boolean(e)})().then(e=>{if(e)return void b().catch(console.error);const{remove:t}=o.default.addListener(async(e,s)=>{if(s?.current)return b().catch(console.error),void t()})})},11860:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(7618),r=s(43024);const a=(e,t)=>{if("string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),t&&(t=Math.abs(t)),t){if((r.default.getValue("silentreadinclgim")[t]||[]).includes(e))return!0;return!(r.default.getValue("silentreadexclgim")[t]||[]).includes(e)&&r.default.getValue("silentreadgim")}return!!r.default.getValue("silentreadincl").includes(e)||!r.default.getValue("silentreadexcl").includes(e)&&(n.z.isGroupId(e)?r.default.getValue("silentreadbots"):n.z.isChatId(e)?r.default.getValue("silentreadchats"):r.default.getValue("silentreadusers"))}},12550:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(26195);const r=()=>!(0,n.A)()&&"vkvideo.ru"!==window.location.hostname},13536:(e,t,s)=>{"use strict";s.d(t,{h:()=>r});var n=s(54251);const r=e=>(0,n.A)("Wall",e)},13625:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,T:()=>c});var n=s(56875),r=s(63898),a=s(7408),o=s(43024);const i=new Map,c=async e=>{if(i.has(e))return i.get(e);e.startsWith("/")&&await(0,a.A)(e);let t;try{const s=await(0,r.A)(e,{method:"GET"}),n=await s.text(),a=document.createElement("style");a.textContent=n,t=a}catch(e){throw console.error("Failed to load CSS via gmFetch:",e),e}return i.set(e,t),t},d=async(e,t,s)=>{const r=await c(t),a=async()=>{const e=await(0,n.h)();e.contains(r)||e.appendChild(r)},i=async()=>{const e=await(0,n.h)();e.contains(r)&&e.removeChild(r)},d=async e=>{if("boolean"==typeof e)return s?e&&await s()?a():i():e?a():i();a(),i()};o.default.onInited(()=>{const t=o.default.getValue(e);d(t)}),o.default.addChangeKeyListener(e,(e,t)=>{d(t)})}},13674:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(48913),r=s(79068),a=s(51018);const o=e=>{const t=new a.e,s=s=>{let n=s[e];Object.defineProperty(s,e,{get:()=>n,set:e=>{n=e;for(const e of t.listeners)try{e(n)}catch(e){console.error(e)}return!0},configurable:!0,enumerable:!0})};let o=!1;const i=async a=>{o||(o=!0,await(async()=>{let a=await(0,n.e)();s(a),(0,r.A)(n=>{if(a[e]!==n[e])for(const s of t.listeners)try{s(n[e])}catch(e){console.error(e)}s(n),a=n})})());a((await(0,n.e)())[e])};return e=>{const s=t.addListener(e);return i(e),s}}},15114:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});const n=()=>`${GM_info.scriptHandler.toLowerCase()}_${GM_info.script.namespace}`},18055:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=["account","ads","appWidgets","apps","audio","auth","board","database","docs","fave","friends","gifts","groups","leads","leadForms","likes","market","messages","newsfeed","notes","notifications","orders","pages","photos","places","polls","podcasts","prettyCards","store","search","secure","stats","status","storage","stories","streaming","users","utils","video","wall","widgets","junction","articles","donut","specials","statEvents","loyaltyTeen","marusia"]},19575:(e,t,s)=>{"use strict";s.d(t,{n:()=>c});var n=s(37352),r=s(92046),a=s(63898),o=s(18055),i=s(82295);class c{options;_getToken;constructor({version:e,appId:t,getToken:s,language:n,onError:r,onErrorValidToken:a,exchange_token:i,onChangeToken:c}){if(void 0===s)throw new Error("getToken not found");this.options={exchange_token:i,appId:t,getToken:s,onError:r,onErrorValidToken:a,onChangeToken:c,version:e||"5.246",language:n||"ru"},this._getToken=s;for(const e of o.A)this[e]=new Proxy(Object.create(null),{get:(t,s)=>t=>this.call(`${e}.${s}`,t)})}async updateToken(){const{promise:e,resolve:t}=(0,n.default)(),{exchange_token:s,appId:r}=this.options;if(!s)return t();if(!r)return t();const o=new URLSearchParams({client_id:r.toString(),exchange_token:s,scope:"all"}),c=`https://oauth.${i.A}/auth_by_exchange_token?${o.toString()}`;{const e=await(0,a.A)(c,{method:"GET"}),s=new URLSearchParams(new URL(e.url).hash).get("#access_token");return this.options.token=s||"",this.options.exchange_token="",s&&this.options.onChangeToken&&await this.options.onChangeToken(s),t()}}async call(e,t,n=0){try{this.options.token||(this.options.token=await this.options.getToken());const a=await fetch(`https://api.${i.A}/method/${e}`+(this.options.appId?`?client_id=${this.options.appId}`:""),{method:"POST",body:new URLSearchParams({access_token:this.options.token,lang:this.options.language||"ru",v:this.options.version,...t}),headers:{"content-type":"application/x-www-form-urlencoded"}}),o=await a.json();try{const{checkCaptchaError:r,CheckCaptchaType:i}=await s.e(217).then(s.bind(s,90217)),{captchaType:c,captchaWidget:d}=r({responseHeaders:a.headers,url:a.url,responseError:o.error,withWidget:!0});if(c&&c!==i.UNKNOWN&&d)try{const s=await d.show({container:document.body,view:"popup"});this.call(e,{...t,success_token:s},n+1)}catch(e){console.error(e)}}catch(e){console.error(e)}const c=o?.error?.error_code;if(c&&n>5){const t=new Error(`[VK API] error call ${e}: ${JSON.stringify(o.error)}`);throw this.options.onError&&this.options.onError(t,o.error),t}const d=()=>this.call(e,t,n+1);return 1117===c&&this.options.exchange_token&&this.options.appId?(await this.updateToken(),d()):[1,5,38,3610].includes(c)?(this.options.onErrorValidToken&&this.options.onErrorValidToken(),this.options.token=await this.options.getToken(),d()):6===c||10===c?(await(0,r.c)(1e3),d()):o.response?o.response:o}catch(e){throw console.error(e),new Error(e)}}execute(e){return this.call("execute",e)}}},19962:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n={compactLeftMenu:s.p+"styles/bfa9a34e.vknext.css",fixedLeftMenu:s.p+"styles/88be3da9.vknext.css",hideBtnSettings:s.p+"styles/7ba772ad.vknext.css",hideCounters:s.p+"styles/9a73751c.vknext.css",hideLeftNav:s.p+"styles/b07c1894.vknext.css",hideRecommendations:s.p+"styles/6e1c1f30.vknext.css",onlyIcons:s.p+"styles/eec4e021.vknext.css",sideBarSolidBlock:s.p+"styles/256cf202.vknext.css"}},20568:(e,t,s)=>{"use strict";const n=(0,s(98570).A)();n.webpack=n.webpack||{exports:new Map,re:new Map,_c:new Map,onLoadModule:()=>{throw new Error("deprecated")}}},21230:(e,t,s)=>{var n={"./Belarusian":[51300,1300],"./Belarusian.ts":[51300,1300],"./English":[78426,8426],"./English.ts":[78426,8426],"./German":[45394,5394],"./German.ts":[45394,5394],"./Kazakh":[41210,1210],"./Kazakh.ts":[41210,1210],"./Polish":[17877,7877],"./Polish.ts":[17877,7877],"./Portuguese, Brazilian":[55147,5147],"./Portuguese, Brazilian.ts":[55147,5147],"./Soviet":[22462,2462],"./Soviet.ts":[22462,2462],"./Ukrainian":[77692,7692],"./Ukrainian.ts":[77692,7692],"./default":[34079,4079],"./default.ts":[34079,4079]};function r(e){if(!s.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],r=t[0];return s.e(t[1]).then(()=>s(r))}r.keys=()=>Object.keys(n),r.id=21230,e.exports=r},22440:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=()=>"undefined"!=typeof unsafeWindow?unsafeWindow:void 0!==window?window:globalThis},22707:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});const n=()=>new Promise(e=>requestAnimationFrame(e))},23238:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(78535).A)("pe")},24856:(e,t,s)=>{"use strict";var n=s(387),r=s(84436),a=s(36008);(async()=>{const{version:e}=await a.default.sendMessage("vkn-b-gm"),t=new r.A({hiddenAutoInject:!0}),s=`https://static.vknext.net/vknext/hotfix/${e||"0.0.0"}.css?t=${(0,n.A)()}`,o=await fetch(s);if(!o.ok)return void t.unuse(!0);const i=await o.text();i.length?(t.innerContent=i,t.use(!0)):t.unuse(!0)})().catch(console.error)},26195:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(e=window.location)=>"oauth.vk.ru"===e.host||"oauth.vk.com"===e.host},26555:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const n=1024,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=(e,t=1)=>{if(Math.abs(e)<n)return`${e.toFixed(t)} ${r[0]}`;let s=0;const a=10**t;do{e/=n,s++}while(Math.round(Math.abs(e)*a)/a>=n&&s<r.length-1);return`${e.toFixed(t)} ${r[s]}`}},28893:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const n=["a","b","i","p","q","s","w","z","y","x","r","o","m","g","max","l","f","k","c","e","d","j","temp","h","n"],r=e=>{let t=null,s=0;for(const r of e){const e=r.type;if(n.includes(e)){const e=(r.width||0)*(r.height||0);e>s&&(s=e,t=r)}}return t||e[0]}},29566:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const n=()=>Promise.resolve();var r=s(32488);const a=e=>async()=>await(0,r.default)()?e():n()},32488:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(52815),r=s(79384);const a=async()=>{const e=await(0,n.A)(),t=(0,r.A)(e[0][0]),s=(0,r.A)(e[1][0]);return!!(97<=t&&t<=100&&97<=s&&s<=100)}},35627:(e,t,s)=>{"use strict";s.d(t,{s:()=>d});var n=s(51018),r=s(50313);const a=()=>(0,r.A)("TopNotifier"),o=new n.e,i=async e=>{for(const t of o.listeners)t(e)};let c=!1;const d=e=>{const t=o.addListener(e);return a().then(e=>i(e)),c||(c=!0,(async()=>{let e=await a();Object.defineProperty(window,"TopNotifier",{get:()=>e,set:t=>{e=t,i(t)}})})()),t}},36008:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(82295);const r=class{SOURCE_NAME="vkcom-vkn-13";messageHandlers=new Map;pendingMessages=new Map;messageHandler;constructor(){this.messageHandler=async e=>{if(e.origin!==window.origin)return;const t=e.data;if(t?.source!==this.SOURCE_NAME)return;const{type:s,payload:n,id:r,answer:a}=t;if(!0!==a)for(const e of this.messageHandlers.get(s)||[]){const t=e=>{window.postMessage({source:this.SOURCE_NAME,type:s,payload:e,id:r,answer:!0},window.origin)};try{await e(n,t)}catch(e){console.error(e)}}else for(const e of this.pendingMessages.get(r)||[])e&&(e.resolve(n),this.pendingMessages.delete(r))},window.addEventListener("message",this.messageHandler)}sendMessage(e,t){const s=this.generateUniqueId(),n=new Promise(e=>{const t=this.pendingMessages.get(s)||[];t.push({resolve:e}),this.pendingMessages.set(s,t)});return window.postMessage({source:this.SOURCE_NAME,type:e,payload:t,id:s,answer:!1},window.origin),n}addMessageHandler(e,t){const s=this.messageHandlers.get(e)||[];return s.push(t),this.messageHandlers.set(e,s),()=>this.removeMessageHandler(e,t)}removeMessageHandler(e,t){const s=this.messageHandlers.get(e)||[],n=s.indexOf(t);-1!==n&&s.splice(n,1),this.messageHandlers.set(e,s)}requestCount=0;generateUniqueId(){return this.requestCount++}};var a=s(96708),o=s(15114);const i=()=>{const e=GM_info.script.downloadURL||GM_info.script.updateURL;if(!e)return new URL("").origin;const t=new URL(e);return t.pathname=`/v/${GM_info.script.version}`,`${t.href}/`};const c=new class extends r{async sendMessage(e,t){switch(e){case"vkn-b-gm":return{manifest_version:3,name:GM_info.script.name,version:GM_info.script.version,id:(0,o.k)(),url:i()};case"vkn-b-gvt":{const{default:e}=await Promise.resolve().then(s.bind(s,37352)),r=t,a=r?.vk_id||window.vk?.id||0,{promise:i,resolve:c}=e(),d=new URLSearchParams({scope:501202911..toString(),client_id:6121396..toString(),redirect_uri:`https://oauth.${n.A}/blank.html`,response_type:"token",display:"mobile",revoke:"1",state:`${(0,o.k)()}_${a}_${6121396..toString()}`}),l=`https://oauth.${n.A}/authorize?${d}`;window.open(l,"_blank");const{default:u}=await s.e(6289).then(s.bind(s,96289)),_=u.addListener((e,t)=>{t[a]?.[6121396]?.token&&(c(!0),_.remove())});return window.addEventListener("focus",async()=>{const{default:e}=await Promise.all([s.e(3068),s.e(1109)]).then(s.bind(s,67078));e({type:"done",text:"Если загрузка не пропадает, попробуйте перезагрузить страницу"})},{once:!0}),await i,!0}case"vkn-b-gpms":{const e=GM_getValue("primeStatus");return{primeIsShown:e?.primeIsShown||!1,deluxeIsShown:e?.deluxeIsShown||!1}}case"vkn-b-spms":{const e=t;return GM_setValue("primeStatus",{primeIsShown:e?.primeIsShown||!1,deluxeIsShown:e?.deluxeIsShown||!1}),Promise.resolve(!0)}case"vkn-b-aath":return Promise.resolve(!0);case"vkn-b-gtet":throw new Error("Not implemented");case"vkn-b-rvk":return a.r.postMessage({t:"vkb_rp"}),window.location.reload(),Promise.resolve(!0);default:console.warn("[VK Next/bridge] sendMessage",e,t)}return super.sendMessage(e,t)}}},37331:(e,t,s)=>{"use strict";s(57580);var n=s(79110),r=s(13625),a=s(29566),o=s(95313);const i={videoGrid:s.p+"styles/6be3a74b.vknext.css"};var c=s(12550);const d=()=>Promise.all([s.e(2441),s.e(6195)]).then(s.bind(s,48576)),l=()=>s.e(5061).then(s.bind(s,15061)),u=()=>Promise.all([s.e(3068),s.e(1475)]).then(s.bind(s,15508));(0,o.A)("away",()=>s.e(1348).then(s.bind(s,31348))),(0,r.A)("videoGrid",i.videoGrid),(0,n.g)(()=>{(0,o.A)("viewPollNotVoting",(0,a.A)(d)),(0,o.A)("photoScroll",l),(0,o.A)("enableBtnChangePhoto",u),(0,c.A)()&&s.e(4275).then(s.bind(s,44275)).catch(console.error)}),(0,c.A)()&&s.e(9523).then(s.bind(s,59523)).catch(console.error)},37352:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=()=>{let e,t;return{promise:new Promise((s,n)=>{e=s,t=n}),resolve:e,reject:t}}},37400:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});const n=()=>new Promise(e=>requestIdleCallback(e))},37573:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(7618),r=s(43024);const a=(e,t)=>{if("string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),t&&(t=Math.abs(t)),t){if((r.default.getValue("silentwriteinclgim")[t]||[]).includes(e))return!0;return!(r.default.getValue("silentwriteexclgim")[t]||[]).includes(e)&&r.default.getValue("silentwritegim")}return!!r.default.getValue("silentwriteincl").includes(e)||!r.default.getValue("silentwriteexcl").includes(e)&&(n.z.isGroupId(e)?r.default.getValue("silentwritebots"):n.z.isChatId(e)?r.default.getValue("silentwritechats"):r.default.getValue("silentwriteusers"))}},38729:(e,t,s)=>{"use strict";s.d(t,{Ln:()=>a,NS:()=>r,sr:()=>o});const n=e=>`_${e}_${Math.random().toString(36).substring(2,10)}`,r=()=>n("mbs"),a=()=>n("ibs"),o=()=>n("vknext")},40853:(e,t,s)=>{"use strict";var n=s(80557),r=s(13674),a=s(43024),o=s(26555),i=s(28893),c=s(60164);const d=e=>{if(!e.text)return!1;try{if(a.default.getValue("postFiltersMark"))return!1;const t=a.default.getValue("customFilter"),{isFiltered:s}=(0,c.m)(t.split(","),e.text);return s}catch(e){console.error(e)}return!1};var l=s(7618);const u=e=>{if(e.copy_history)for(const t of e.copy_history)u(t);if(!e.attachments)return;let t=!1;for(const s of e.attachments){const e="on_media"===s.style||"full"===s.style;if("audio"===s.type&&e){t=!0;const e=s.audio,n=e?.thumb;s.style="compact",s.compact={icons:[{name:"song_outline",sizes:[]}],title:{text:{text:e.title}},description:{text:{text:e.artist}}},n?.photo_270&&s.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:n.photo_270})}if("audio_playlist"===s.type&&e){t=!0;const e=s.audio_playlist,n=e?.photo;s.style="compact",s.compact={icons:[{name:"playlist_outline",sizes:[]}],title:{text:{text:e.title}},description:{text:{text:e.description}}},n?.photo_270&&s.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:n.photo_270})}if("doc"===s.type&&"chip"===s.style){const e=s.doc;if(s.style="compact",s.compact={icons:[{name:"document_outline",sizes:[]}],title:{text:{text:e.title}},description:{text:{text:(0,o.A)(e.size||0)}}},e.preview?.photo?.sizes){const t=(0,i.A)(e.preview.photo.sizes);s.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:t.src})}}}t&&0===e.compact_attachments_before_cut&&(e.compact_attachments_before_cut=10)},_=(e,{domain:t="",isOne:s=!1}={})=>{if(!Array.isArray(e))return e;const n=Number(t),r=l.z.isGroupId(n);for(let t=e.length-1;t>=0;t--){const n=e[t],o=()=>{e.splice(t,1)};if("type"in n)switch(n.type){case"photo":break;case"post":{const e=a.default.getValue("enablePostFiltersInGroups");(!s&&(!r||e)&&d(n)||(n.marked_as_ads||n.marked_as_author_ad)&&a.default.getValue("adsPost")||n.copyright&&a.default.getValue("adsPostCopyright"))&&o();break}case"recommended_audios":case"recommended_channels":case"recommended_chats":case"recommended_playlists":case"recommended_artists":case"ads":a.default.getValue("ads")&&o();break;case"post_ads":a.default.getValue("post_recomm")&&o();break;case"user_rec":case"friends_recomm":a.default.getValue("friends_recomm")&&o();break;case"recommended_game":case"recommended_games_carousel":a.default.getValue("apps_recomm")&&o();break;case"recommended_groups":a.default.getValue("groups_recomm")&&o();break;case"recommended_narratives":a.default.getValue("narratives_recomm")&&o();break;case"mini_apps_carousel":case"recommended_mini_app":a.default.getValue("services_recomm")&&o();break;case"videos_for_you":a.default.getValue("video_recomm")&&o();break;default:console.warn("[VK Next/apiHook] неизвестный тип поста",n)}}if(a.default.getValue("oldPostDesign"))for(const t of e)"post"===t.type&&t.attachments&&u(t);return e},h=["newsfeed.getLikesFeed","newsfeed.search","newsfeed.get","newsfeed.getByType","wall.search","wall.get","wall.getById","catalog.getSection","catalog.getSearchStatuses","search.getSearchAllWeb2"],f=({domain:e,response:t,method:s})=>{if(!t)return t;const n="wall.getById"===s;if(Array.isArray(t?.items)&&(t.items=_(t.items,{domain:e,isOne:1===t.items.length&&n})),Array.isArray(t?.newsfeed_items)){const s=1===t.newsfeed_items.length&&n;for(const n of t.newsfeed_items)n.item=_([n.item],{domain:e,isOne:s})[0]}return t};(0,n.I)(async({method:e,params:t,response:s})=>{if(h.includes(e))return a.default.isRestored||await new Promise(e=>a.default.onInited(e)),s=f({response:s,domain:t.domain,method:e})});const p=e=>{if(Array.isArray(e))for(const t of e)h.includes(t.method)&&(t.response=f({response:t.response,method:t.method,domain:t?.request?.domain}))};(0,r.A)("apiPrefetchCache")(e=>{a.default.isRestored?p(e):a.default.onInited(()=>p(e))});var m=s(93494);(0,m.A)(e=>{a.default.getValue("ads")&&"groups.getBanner"===e[0]&&9===e[1]?.banner_type&&(e[1].banner_type=0)});const g=168874636,b=-g;(0,m.A)(e=>{const t=e[0],s=e[1];s&&("groups.join"!==t&&"newsfeed.deleteBan"!==t||s.group_id!==g||delete s.group_id,"wall.subscribe"===t&&s.owner_id===b&&delete s.owner_id)}),(0,n.I)(async({method:e,params:t,response:s})=>{if("groups.getById"===e&&"2style"===t?.group_ids&&Array.isArray(s?.groups))for(const e of s.groups)delete e.ban_info;return s})},43024:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(86335),r=s(44181);class a extends r.A{constructor(){super("vknext")}getValue(e){const t=this.getStorage();return e in t&&void 0!==t[e]?t[e]:n.g[e]}setValue(e,t){const s=this.getStorage();s[e]=t,this.saveStorage(s)}removeValue(e){const t=this.getStorage();delete t[e],this.saveStorage(t)}getStorageWithDefault(){return{...n.g,...this.getStorage()}}clearStorage(){this.saveStorage({})}hasEnabledValues(e){return e.some(e=>this.getValue(e))}addChangeKeyListener(e,t){return this.addListener((s={},n={})=>{const r=s[e],a=n[e];"object"==typeof r&&"object"==typeof a&&JSON.stringify(r)===JSON.stringify(a)||Object.is(r,a)||t(r,a)})}}const o=new a},43171:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=e=>{const t=window.cur??{};t._back??={};const s=t._back;s.show??=[],s.hide??=[],s.hide.push(e)}},44181:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});s(36008);var n=s(61290);const r=class{idb;name;storage=null;inited;onInitedListeners;onChangeStorageListeners;isRestoredFromLS=!1;saveTimeout=null;saveDelay;constructor(e,{saveDelay:t,restoreFromLS:s}={}){this.name=e,this.inited=!1,this.onInitedListeners=[],this.onChangeStorageListeners=[],this.saveDelay=t||0,s&&this.restoreFromLS(),this.idb=n.A,this.updateStorage().catch(console.error),GM_addValueChangeListener(this.name,async(e,t,s)=>{this.storage=s;for(const e of this.onChangeStorageListeners)try{await e(t,s)}catch(e){console.error(e)}}),this.onInited=this.onInited.bind(this),this.addListener((e,t)=>{this.saveToLS(t)})}restoreFromLS(){try{const e=localStorage.getItem(this.name);e&&(this.storage=JSON.parse(e),this.isRestoredFromLS=!0)}catch(e){console.error(e)}}saveToLS(e){try{localStorage.setItem(this.name,JSON.stringify(e))}catch(e){console.error(e)}}get isRestored(){return this.isRestoredFromLS}async updateStorage(){let e;e=GM_getValue(this.name);const t=this.storage;this.storage=e;const s=this.storage;if(this.inited)for(const e of this.onChangeStorageListeners)try{await e(t,s)}catch(e){console.error(e)}else{this.inited=!0,this.isRestoredFromLS=!0;for(const e of this.onInitedListeners)e()}}onInited(e){this.onInitedListeners.push(e),this.inited&&e()}saveStorage(e){if(!this.inited)throw new Error(`${this.name} not inited`);const t=this.storage;this.storage=e;try{for(const e of this.onChangeStorageListeners)try{e(t,this.storage)}catch(e){console.error(e)}}catch(e){console.error(e)}null!==this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(async()=>{try{GM_setValue(this.name,e)}catch(e){console.error(e)}this.saveTimeout=null},this.saveDelay)}getStorage(){if(!this.inited&&!this.isRestoredFromLS)throw new Error(`${this.name} not inited`);return Array.isArray(this.storage)?[...this.storage]:{...this.storage}}addListener(e){return this.onChangeStorageListeners.push(e),{remove:()=>this.removeListener(e)}}removeListener(e){const t=this.onChangeStorageListeners.indexOf(e);-1!==t&&this.onChangeStorageListeners.splice(t,1)}}},45230:(e,t,s)=>{"use strict";s.d(t,{Q:()=>m});var n=s(92046);const r=()=>"https://api.vknext.net",a=async e=>{const t=await e.json(),n=e.headers.get("Content-Type");if(n&&n.startsWith("application/x-vknextpack")&&t)try{const e=new Uint8Array(Object.values(t)),{decode:n}=await s.e(7802).then(s.bind(s,77802));return n(e)}catch(e){console.error(e)}return t};var o=s(22440),i=s(98570);const c=async()=>{try{const e=await fetch(`${r()}/internal.getAuthAppId`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Api-Version":"3"}});if(e.ok)return parseInt(await e.text())}catch(e){console.error("[VK Next/getAuthAppId] Error:",e)}return 8194076},d=(0,o.A)(),l=async e=>{const t=(0,i.A)().browserApi;if(t){return(await t.storage.local.get(e))[e]}if(d?.localStorage)return d.localStorage.getItem(e);const{storage:n}=await s.e(6815).then(s.t.bind(s,96815,23));return(await n.local.get(e))[e]},u=async(e,t)=>{const n=(0,i.A)().browserApi;if(n)return void await n.storage.local.set({[e]:t});if(d?.localStorage)return void d.localStorage.setItem(e,t);const{storage:r}=await s.e(6815).then(s.t.bind(s,96815,23));await r.local.set({[e]:t})},_=async(e,t)=>{const s=`vknLP${e}`,r=`vknLPD${e}`,a=await l(s),o=await l(r);if(a&&Date.now()-(parseInt(o||"")||0)<216e5)return a?.response||a;try{const a=await t.apps.getAppLaunchParams({mini_app_id:await c(),referer:"other",v:"5.123"}),o=new URLSearchParams(Object.entries(a)).toString();return o?(await u(s,o),await u(r,Date.now().toString()),o):(await(0,n.c)(5e3),_(e,t))}catch(s){return console.error(s),await(0,n.c)(1500),_(e,t)}},h=_;var f=s(387);const p=async(e,t,s)=>{try{delete Uint8Array.prototype.toJSON}catch(e){console.error(e)}const n=(0,f.A)(),r=((e,t)=>{const s=e.toString().length,n=new Uint8Array(16);for(let r=0;r<t.length;r++){const a=t.charCodeAt(r)*e/s;n[r%16]^=255&a}return n})(e,t),a=await(e=>crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt"]))(r),o={version:await s.getVersion(),udGltZS5p:await s.getRuntimeId(),cGlkb3I:e,fdhjiD:"ba05681e16c97c31e1be20e84f250d55",v9Cdi3sD:n},i=JSON.stringify(o),c=(new TextEncoder).encode(i),d={name:"AES-CBC",iv:crypto.getRandomValues(new Uint8Array(16))},l=await crypto.subtle.encrypt(d,a,c),u=new Uint8Array(d.iv.length+l.byteLength);return u.set(new Uint8Array(d.iv),0),u.set(new Uint8Array(l),d.iv.length),u};class m{vkapi;vkAgents;userId;constructor({api:e}){this.vkapi=e,this.userId=0,this.vkAgents=new Map}async call(e,t,s){const o=await this.getVkAgent(),i={...t,"vknext-agent":await this.gvkna()};let c=0;const d=`${r()}/${e}`,l=JSON.stringify(i),u={Accept:"application/json","Content-Type":"application/json","VK-Agent":o,"VK-User-ID":`${this.userId||0}`,"9603a224b40d7b67210b78f2e390d00f":"ba05681e16c97c31e1be20e84f250d55","Api-Version":"3",...s};let _=new Response(JSON.stringify({error_code:408}),{status:408});for(;c<3;){const e=new AbortController,t=setTimeout(()=>e.abort(),15e3);try{if(_=await fetch(d,{body:l,method:"POST",headers:u,signal:e.signal}),502!==_.status)return a(_);{await(0,n.c)(2e3);const e=await _.text();if(!e.toLowerCase().includes("cloudflare"))return a(_);await(0,n.c)(c)}}catch(e){console.error(e),await(0,n.c)(2e3)}clearTimeout(t),c++}return a(_)}async getVkAgent(){if(0===this.userId&&(this.userId=await this.getUserId()),this.vkAgents.has(this.userId))return this.vkAgents.get(this.userId);return h(this.userId,this.vkapi)}async gvkna(){return await p(this.userId,"ba05681e16c97c31e1be20e84f250d55",this)}resetUserId(){this.userId=0}async getUserId(){return 0}async getRuntimeId(){return""}async getVersion(){return""}}},47405:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});const n=async(e,t)=>{const n=Number(t.split(String.fromCharCode(46)).join(""))*e;return(await Promise.resolve().then(s.bind(s,76408))).default(n.toString())};var r=s(76408);const a=(e,t)=>((e,t)=>{const s=new Uint8Array(e.length);for(let n=0;n<e.length;n++)s[n]=e[n]^t[n%t.length];return s})(t,(0,r.default)(e));var o=s(22440),i=s(47875),c=s(12550);const d=(0,o.A)(),l="00000000-0000-0000-0000-000000000000",u="posts_app_modules_@id:",_=async(e,t=!1)=>{const{default:r}=await s.e(5667).then(s.bind(s,65667)),o=r.getManifest(),c=a(o.id,await n(e,o.version));try{const s=await i.A.call("extension.getClientInfo",{o:[o.version,o.id,c],t:o.installType});if(4===s?.error_code&&!t)return i.A.resetUserId(),await _(e,!0);try{((e,t)=>{const s={c:JSON.stringify(t),t:Date.now()};d.localStorage.setItem(`${u}${e}`,JSON.stringify(s))})(e,s)}catch(e){console.error(e)}return s.error&&setTimeout(async()=>{d.localStorage.removeItem(`${u}${e}`)},8e3),s.h||(s.h=l),s}catch(e){console.error(e)}return{h:l,error_code:-1}},h=new Map,f=new Map,p=async(e=!1)=>{if(!(0,c.A)())return{h:l};const t=await i.A.getUserId();if(h.has(t)&&!e)return await h.get(t);const s=new Promise(async s=>{let n=!1;try{if(!e){const[e,r]=(e=>{const t=`${u}${e}`,s=d.localStorage.getItem(t);if(s)try{const e=JSON.parse(s),t=JSON.parse(e.c);return t.error?[null,0]:[t,e.t]}catch(e){console.error(e)}return[null,0]})(t);if(e&&(s(e),n=!0,Date.now()-r<1e5))return}}catch(e){console.error(e)}try{const e=await _(t);if(n)return;s(e)}catch(e){console.error(e)}n||s({h:l,error_code:-1})});return s.finally(async()=>{f.has(t)&&clearTimeout(f.get(t));const e=setTimeout(()=>{h.delete(t)},5e3);f.set(t,e)}),h.set(t,s),await s};let m;const g=async()=>{if(m)return await m;m=p();const e=await m;return e||(m=null),e}},47875:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var n=s(45230),r=s(99381),a=s(3916),o=s(36008),i=s(61634);const c=o.default.sendMessage("vkn-b-gm");class d extends n.Q{async getRuntimeId(){return(await c).id}async getVersion(){return(await c).version}async getUserId(){const e=await(0,a.P)();return e?.id||0}async getVkAgent(){return 0===(await(0,a.P)()).id?new Promise(r.A):await super.getVkAgent()}}const l=new d({api:i.J})},48913:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var n=s(50313);const r=()=>(0,n.A)("cur")},50313:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(92580),r=s(54251);const a=async(e,t)=>{const s=("undefined"!=typeof unsafeWindow?unsafeWindow:void 0!==window?window:globalThis)[e];if(s)return Promise.resolve(s);const{promise:a,resolve:o}=(0,n.Q)(),i=(0,r.A)(e,e=>{o(e),i()},{once:!0});return a}},51018:(e,t,s)=>{"use strict";s.d(t,{e:()=>n});class n{_listeners=new Set;addListener(e){return this._listeners.add(e),()=>this.removeListener(e)}removeListener(e){this._listeners.delete(e)}get listeners(){return[...this._listeners]}}},51603:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});const n={0:"default",1:"Ukrainian",3:"English",6:"German",15:"Polish",97:"Kazakh",114:"Belarusian",777:"Soviet",73:"Portuguese, Brazilian",54:"default",4:"default",82:"default",76:"default"},r=async e=>{try{const{default:t}=await s(21230)(`./${n[e]}`);return t}catch(e){console.error(e)}return{}},a=async()=>{try{const{default:e}=await s(21230)(`./${n[0]}`);return e}catch(e){console.error(e)}return{}},o=async e=>{try{const{default:t}=await s(66811)(`./${e}/${n[0]}`);return t}catch(e){console.error(e)}return{}},i=async(e,t)=>{try{const{default:r}=await s(66811)(`./${e}/${n[t]}`);return r}catch(e){console.error(e)}return{}},c=async(e,t)=>{const[s,n,c,d]=await Promise.all([r(t),a(),o(e),i(e,t)]);return{...s,...n,...c,...d}}},52815:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(47405);const r=async()=>(await(0,n.A)()).h.split("-")},53778:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});s(36008);var n=s(61290);const r=class{idb;name;storage=null;onChangeStorageListeners;saveTimeout=null;saveDelay;lifetime;lifetimeTimeoutId=null;defaultValue;constructor(e,{saveDelay:t,lifetime:s,defaultValue:r}={}){this.name=e,this.onChangeStorageListeners=[],this.saveDelay=t||0,this.lifetime=s,this.defaultValue=r,this.idb=n.A,GM_addValueChangeListener(this.name,async(e,t,s)=>{this.storage=s;for(const e of this.onChangeStorageListeners)try{await e(t,s)}catch(e){console.error(e)}})}updateStoragePromise=null;updateStorage(e=!1){return this.updateStoragePromise||(this.updateStoragePromise=this._updateStorage(e),this.updateStoragePromise.finally(()=>{this.updateStoragePromise=null})),this.updateStoragePromise}async _updateStorage(e=!1){let t;t=GM_getValue(this.name);const s=this.storage;if(this.lifetimeTimeoutId&&(clearInterval(this.lifetimeTimeoutId),this.lifetimeTimeoutId=null),this.storage=t,!e)for(const e of this.onChangeStorageListeners)try{await e(s,t)}catch(e){console.error(e)}}async saveStorage(e){try{for(const t of this.onChangeStorageListeners)try{t(this.storage,e)}catch(e){console.error(e)}}catch(e){console.error(e)}this.storage=e,null!==this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(async()=>{try{GM_setValue(this.name,e)}catch(e){console.error(e)}this.saveTimeout=null},this.saveDelay)}async getStorage(){null===this.storage&&await this.updateStorage(),this.lifetimeTimeoutId&&(clearTimeout(this.lifetimeTimeoutId),this.lifetimeTimeoutId=null),this.lifetime&&0===this.onChangeStorageListeners.length&&requestIdleCallback(()=>{this.lifetimeTimeoutId=setTimeout(()=>{this.storage=null},this.lifetime)});const e=this.storage||this.defaultValue;return Array.isArray(e)?[...e]:"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e?e:{...e}}addListener(e){return this.onChangeStorageListeners.push(e),{remove:()=>this.removeListener(e)}}removeListener(e){const t=this.onChangeStorageListeners.indexOf(e);-1!==t&&this.onChangeStorageListeners.splice(t,1)}}},54251:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(e,t,s={})=>{const{timeout:n=null,waitForPageLoad:r=!1,once:a=!1}=s;let o=!0,i=null,c=null,d=window[e],l=50;const u=()=>{o=!1,i&&clearTimeout(i),c&&clearTimeout(c)},_=()=>{if(!o)return;const s=window[e];if(void 0!==s&&s!==d){if(d=s,t(s),a)return void u();l=50}else l=Math.min(1.5*l,1e3);i=window.setTimeout(_,l)},h=()=>{null!==n&&(c=window.setTimeout(()=>{u(),console.warn(`[watchGlobalProperty] Timeout waiting for variable: ${String(e)}`)},n)),_()};if(r&&"complete"!==document.readyState){const e=()=>{h(),window.removeEventListener("load",e)};window.addEventListener("load",e)}else h();return u}},54689:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=class{dbName;fixValue;constructor(e,t){this.dbName=e,this.fixValue=t||!1}open(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName);s.onupgradeneeded=()=>{this.fixValue?s.result.createObjectStore("db"):s.result.createObjectStore("db",{keyPath:"key"})},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})}async get(e){const t=await this.open(),s=new Promise(s=>{const n=t.transaction("db","readwrite").objectStore("db").get(e);n.onsuccess=()=>{const e=n.result;s(e?.key&&"val"in e?e?.val:e)}});return s.finally(()=>t.close()),await s}async set(e,t){const s=await this.open(),n=s.transaction("db","readwrite").objectStore("db"),r=this.fixValue?n.put(t,e):n.put({key:e,val:t}),a=new Promise((e,t)=>{r.onsuccess=()=>e(),r.onerror=()=>t(r.error)});return a.finally(()=>s.close()),await a}async remove(e){const t=await this.open(),s=t.transaction("db","readwrite").objectStore("db"),n=new Promise((t,n)=>{const r=s.delete(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)});return n.finally(()=>t.close()),await n}clearDatabase(){return new Promise((e,t)=>{let s=indexedDB.deleteDatabase(this.dbName);s.onerror=()=>t(s.error),s.onblocked=()=>t("База данных заблокирована"),s.onsuccess=()=>e(s.result)})}}},56875:(e,t,s)=>{"use strict";s.d(t,{h:()=>a});var n=s(92580);let r=null;const a=e=>{if(document.head)return Promise.resolve(document.head);if(r&&!e)return r;const{promise:t,resolve:s}=(0,n.Q)();if(r=t,document.head)return s(document.head),t;const a=new MutationObserver(()=>{document?.head&&(s(document.head),a.disconnect())});return a.observe(document.documentElement,{childList:!0}),t}},57580:(e,t,s)=>{"use strict";s(7408)},58354:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var n=s(7417),r=s(51018),a=s(22707),o=s(37400),i=s(91570);const c=["#wl_post",".wl_post"].join(","),d=new r.e,l=async e=>{for(const t of d.listeners)await(0,o.G)(),t(e)},u=async()=>(await(0,a.t)(),document.querySelectorAll(c));let _=!1;const h=e=>{const t=d.addListener(e);return(0,n.n)(async()=>{for(const t of await u())e(t)}),_||(_=!0,(async()=>{const e=await(0,i.R)();e.onLocationChange(async()=>{if(e.objLoc.w)for(const e of await u())l(e)})})()),t}},60164:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});const n=(e,t="")=>e.replace(/[«»/"`~!@#$%^&*()_|+\-=?;:'",.<>\\{\\}\\[\]\\\\/]/gi,t);var r=s(43024);const a=(e,t)=>{const s=n(t.toLowerCase()),a=s.split(" "),o=[];for(const t of e){const e=r.default.getValue("postFiltersRemoveSpecialSymbols")?n(t.trim()):t.trim();e.length&&(e.includes(" ")?s.includes(e)&&o.push(t):a.includes(e)&&o.push(t))}return{isFiltered:o.length>0,triggeredFilters:o}}},61054:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});var n=s(50313);const r=()=>(0,n.A)("vkApi")},61290:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(54689);const r=new n.A("vknext-storage-v2",!0);new n.A("vknext-storage").clearDatabase();const a=r},61634:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var n=s(19575),r=s(61054);class a extends n.n{async call(e,t){const s=await(0,r.V)();return await s.api(e,t||{})}_anonymToken;_anonymTokenExpires;async getAnonymToken(){if(this._anonymToken&&this._anonymTokenExpires&&Date.now()<this._anonymTokenExpires)return this._anonymToken;const e=await(0,r.V)(),{access_token:t,expires:s}=await e.login("get_anonym_token",{client_secret:"QbYic1K3lEV5kTGiqlq2",client_id:6287487,scopes:"audio_anonymous,video_anonymous,photos_anonymous,profile_anonymous",isApiOauthAnonymEnabled:!1});return this._anonymToken=t,this._anonymTokenExpires=s,t}}const o=new a({getToken:async()=>""})},63898:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=async(e,t)=>{{const s=new Request(e,t);if(s.signal.aborted)throw new DOMException("Network request aborted.","AbortError");const n=await s.arrayBuffer(),r=n.byteLength?(new TextDecoder).decode(n):void 0,a=Object.fromEntries(s.headers);return new Headers(t?.headers).forEach((e,t)=>{a[t]=e}),new Promise((e,t)=>{let n=!1;const o=new Promise(i=>{const{abort:c}=GM_xmlhttpRequest({method:s.method.toUpperCase(),url:s.url||location.href,headers:a,data:r,redirect:s.redirect,binary:!0,nocache:"no-store"===s.cache,revalidate:"reload"===s.cache,timeout:3e5,responseType:"blob",overrideMimeType:s.headers.get("Content-Type")??void 0,anonymous:"omit"===s.credentials,onload:({response:e})=>{i(n?null:e)},async onreadystatechange({readyState:t,responseHeaders:r,status:a,statusText:d,finalUrl:l,response:u}){if(t===XMLHttpRequest.DONE)s.signal.removeEventListener("abort",c);else if(t!==XMLHttpRequest.HEADERS_RECEIVED)return;if(n)return void i(null);const _=function(e){const t=new Headers,s=e.replace(/\r?\n[\t ]+/g," ");for(const e of s.split(/\r?\n/)){const s=e.split(":"),n=s.shift()?.trim();if(n){const e=s.join(":").trim();try{t.append(n,e)}catch(e){console.warn(`Response ${e.message}`)}}}return t}(r),h=s.url!==l,f=new Response(u instanceof ReadableStream?u:await o,{headers:_,status:a,statusText:d});Object.defineProperties(f,{url:{value:l},type:{value:"basic"},...f.redirected!==h?{redirected:{value:h}}:{},..._.has("set-cookie")||_.has("set-cookie2")?{headers:{value:_}}:{}}),e(f),n=!0},onerror:({statusText:e,error:s})=>{t(new TypeError(e||s||"Network request failed.")),i(null)},ontimeout(){t(new TypeError("Network request timeout.")),i(null)},onabort(){t(new DOMException("Network request aborted.","AbortError")),i(null)}});s.signal.addEventListener("abort",c)})})}}},66811:(e,t,s)=>{var n={"./chatHistory/Belarusian":[70141,141],"./chatHistory/Belarusian.ts":[70141,141],"./chatHistory/English":[31297,1297],"./chatHistory/English.ts":[31297,1297],"./chatHistory/German":[52739,2739],"./chatHistory/German.ts":[52739,2739],"./chatHistory/Kazakh":[91351,1351],"./chatHistory/Kazakh.ts":[91351,1351],"./chatHistory/Polish":[11332,1332],"./chatHistory/Polish.ts":[11332,1332],"./chatHistory/Portuguese, Brazilian":[76628,6628],"./chatHistory/Portuguese, Brazilian.ts":[76628,6628],"./chatHistory/Soviet":[56631,6631],"./chatHistory/Soviet.ts":[56631,6631],"./chatHistory/Ukrainian":[4211,4211],"./chatHistory/Ukrainian.ts":[4211,4211],"./chatHistory/default":[66852,6852],"./chatHistory/default.ts":[66852,6852],"./global/Belarusian":[51300,1300],"./global/Belarusian.ts":[51300,1300],"./global/English":[78426,8426],"./global/English.ts":[78426,8426],"./global/German":[45394,5394],"./global/German.ts":[45394,5394],"./global/Kazakh":[41210,1210],"./global/Kazakh.ts":[41210,1210],"./global/Polish":[17877,7877],"./global/Polish.ts":[17877,7877],"./global/Portuguese, Brazilian":[55147,5147],"./global/Portuguese, Brazilian.ts":[55147,5147],"./global/Soviet":[22462,2462],"./global/Soviet.ts":[22462,2462],"./global/Ukrainian":[77692,7692],"./global/Ukrainian.ts":[77692,7692],"./global/default":[34079,4079],"./global/default.ts":[34079,4079],"./serviceWorker/Belarusian":[52068,2068],"./serviceWorker/Belarusian.ts":[52068,2068],"./serviceWorker/English":[53018,3018],"./serviceWorker/English.ts":[53018,3018],"./serviceWorker/German":[11570,1570],"./serviceWorker/German.ts":[11570,1570],"./serviceWorker/Kazakh":[7386,7386],"./serviceWorker/Kazakh.ts":[7386,7386],"./serviceWorker/Polish":[84053,4053],"./serviceWorker/Polish.ts":[84053,4053],"./serviceWorker/Portuguese, Brazilian":[83339,3339],"./serviceWorker/Portuguese, Brazilian.ts":[83339,3339],"./serviceWorker/Soviet":[88638,8638],"./serviceWorker/Soviet.ts":[88638,8638],"./serviceWorker/Ukrainian":[86652,6652],"./serviceWorker/Ukrainian.ts":[86652,6652],"./serviceWorker/default":[92319,2319],"./serviceWorker/default.ts":[92319,2319],"./settings/Belarusian":[17714,7714],"./settings/Belarusian.ts":[17714,7714],"./settings/English":[66192,6192],"./settings/English.ts":[66192,6192],"./settings/German":[48583,964],"./settings/German.ts":[48583,964],"./settings/Kazakh":[62220,2220],"./settings/Kazakh.ts":[62220,2220],"./settings/Polish":[68643,8643],"./settings/Polish.ts":[68643,8643],"./settings/Portuguese, Brazilian":[80045,45],"./settings/Portuguese, Brazilian.ts":[80045,45],"./settings/Soviet":[3464,3464],"./settings/Soviet.ts":[3464,3464],"./settings/Ukrainian":[89486,9486],"./settings/Ukrainian.ts":[89486,9486],"./settings/default":[97085,7085],"./settings/default.ts":[97085,7085],"./vkcom/Belarusian":[63975,3975],"./vkcom/Belarusian.ts":[63975,3975],"./vkcom/English":[83739,3739],"./vkcom/English.ts":[83739,3739],"./vkcom/German":[92081,2081],"./vkcom/German.ts":[92081,2081],"./vkcom/Kazakh":[32965,2965],"./vkcom/Kazakh.ts":[32965,2965],"./vkcom/Polish":[53790,3790],"./vkcom/Polish.ts":[53790,3790],"./vkcom/Portuguese, Brazilian":[57114,7114],"./vkcom/Portuguese, Brazilian.ts":[57114,7114],"./vkcom/Soviet":[66709,6709],"./vkcom/Soviet.ts":[66709,6709],"./vkcom/Ukrainian":[80777,777],"./vkcom/Ukrainian.ts":[80777,777],"./vkcom/default":[51974,1974],"./vkcom/default.ts":[51974,1974]};function r(e){if(!s.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],r=t[0];return s.e(t[1]).then(()=>s(r))}r.keys=()=>Object.keys(n),r.id=66811,e.exports=r},67767:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var n=s(51018),r=s(92046),a=s(7417),o=s(79110),i=s(22707),c=s(37400),d=s(13536),l=s(48913),u=s(91570),_=s(38729),h=s(2006);const f=[".Post--redesign",".post","._post:not(.reply)",".Post",".FeedBlockWrap",".feed_post_indicator:not(:has(.post))",'[id*="postadsite_"]:not(:has(.post))',"[post-hash]:not(:has(.post))",'div[data-testid="post"]',"article > div:has(.vkuiIcon--more_horizontal_24)"].join(","),p=[".wall_module","#public_wall",'div[data-testid="feed_main_container"] > .vkuiInternalGroup--mode-card',".vkuiInternalGroup:has(>#page-wall)"].join(","),m=["#page_wall_posts",".page_wall_posts","#page_donut_posts","#page-wall"].join(","),g=["#feed_rows","._feed_rows",'div[role="feed"]'].join(","),b=(0,_.NS)(),w=(0,_.NS)(),A=(0,_.NS)(),v=(0,_.Ln)(),y=(0,_.sr)(),k=new n.e,E=async e=>{if(e.closest("html,body")){if(e.getElementsByClassName("PostContentDumbSkeleton").length)return await(0,r.c)(1e3),E(e);for(const t of k.listeners)await(0,c.G)(),t(e)}},S=e=>{if(e[y])return;if(e[v])return;if(e.dataset.spaPostLegacySelector)return e[y]=!0,void E(e);const t=e.querySelector(".PostContentContainer__root:not(.ReactEntryRootClone)");t&&"none"!==t.style.display?E(e):(e[v]=new IntersectionObserver(t=>{for(const s of t)s.isIntersecting&&(E(e),e[v]&&(e[v].unobserve(e),delete e[v]))},{threshold:0,rootMargin:"800px 0% 800px 0%"}),h.A.add(e),e[v].observe(e))},P=()=>document.querySelectorAll(f),O=["feed","public","profile","wall","groups","group"],I=e=>{for(const t of e.querySelectorAll(f))S(t);e[w]||(e[w]=new MutationObserver(e=>{for(const t of e)if(t.addedNodes.length)for(const e of t.addedNodes){const t=e.querySelector(f);t&&S(t)}}),h.A.add(e),e[w].observe(e,{childList:!0}))},R=e=>{for(const t of e.querySelectorAll(g))I(t);e[A]||(e[A]=new MutationObserver(e=>{for(const t of e){if(!t.addedNodes.length)return;for(const e of t.addedNodes)S(e)}}),h.A.add(e),e[A].observe(e,{childList:!0}))},U=async e=>{for(const t of e.querySelectorAll(g))I(t);e[b]||(e[b]=new MutationObserver(e=>{for(const t of e)if(t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&(e.matches(g)&&I(e),e.matches(m)&&R(e))}),h.A.add(e),e[b].observe(e,{childList:!0}))};let N=null;const L=async()=>{if(null!==N&&(clearTimeout(N),N=null),document.querySelector('#FeedPageSkeleton,[class*="PostSkeleton__root"],[class*="SkeletonComponent__skeleton"]'))return void(N=setTimeout(()=>{N=null,L()},1e3));for(const e of document.querySelectorAll(p))U(e);const e=document.querySelectorAll(m);for(const t of e)R(t);await(0,i.t)();for(const e of P())S(e)},M=Symbol();let C=!1;const x=e=>{const t=k.addListener(e);return(0,a.n)(()=>{const t=P();for(const s of t)e(s)}),C||(C=!0,(async()=>{const e=await(0,u.R)(),t=await(0,l.e)(),s=async()=>{await(0,i.t)(),await(0,c.G)(),"profile"===t.module&&await(0,r.c)(1e3),L()};e.subscribeOnModuleEvaluated(s),(0,d.h)(e=>{if(e[M])return;e[M]=!0;const t=e.init;e.init=(...n)=>{const r=Reflect.apply(t,e,n);return requestAnimationFrame(s),r}}),t?.module&&await new Promise(e=>(0,o.g)(e)),(O.includes(t.module)||void 0===t.module)&&await L()})()),t}},71191:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var n=s(50313);const r=()=>(0,n.A)("boxQueue")},71982:(e,t,s)=>{"use strict";const n=["ad.mail.ru","/al_video.php?act=ads_stat","/dist/web/ads_light","/ads_rotate","js/lib/px.js"],r=["trk.mail.ru","mc.yandex.ru/metrika/watch.js","rs.mail.ru","google-analytics.com/analytics.js","*.ms.vk.com","*.ms.vk.ru","/dist/core_spa/error_monitoring.isolated.*.js"],a=["tracker-api.my.com","top-fwz1.mail.ru/js/code.js","r.mail.ru","tns-counter.ru","stats.vk-portal.net/uxzoom","stat.pladform.ru","stats.vk-portal.net/web-stats"];var o=s(22440),i=s(63898),c=s(43024);const d="VKAndroidApp/8.22-15699 (Android 13; SDK 33; arm64-v8a; VK Next; ru; 2400x1080)",l=(e,t)=>{try{if(!t.includes)return!1;for(let s of e)if(s&&t.includes(s))return!0}catch(e){console.error(e)}return!1},u=e=>(!c.default.getValue("ads")||!l(n,e))&&((!c.default.getValue("adsSpyning")||!l(a,e))&&(!c.default.getValue("disableAnalytics")||!l(r,e))),_=(e,t)=>{setTimeout(()=>{e.onerror&&(e.onerror(new Event("error")),e.remove())},1e3)},h=()=>{Object.defineProperty(HTMLScriptElement.prototype,"src",{set:function(e){return u(this)?this.setAttribute("src",e):_(this),!0}}),Object.defineProperty(HTMLImageElement.prototype,"src",{set:function(e){return u(this)?this.setAttribute("src",e):_(this),!0}}),Object.defineProperty(HTMLIFrameElement.prototype,"src",{set:function(e){return u(this)?this.setAttribute("src",e):_(this),!0}});const e=(0,o.A)(),t=e.fetch;e.fetch=function(...e){try{const t=e[0],s=e[1],n=t instanceof URL?t.href:`${t}`;if(u(n)||(e[0]="file://"),n&&n.includes("client_id=6146827")){const e=s?{...s}:{};return e.headers||(e.headers={}),e.headers instanceof Headers?e.headers.set("User-Agent",d):Array.isArray(e.headers)?e.headers.push(["User-Agent",d]):e.headers["User-Agent"]=d,(0,i.A)(t,e)}}catch(e){console.error("[VK Next/scriptHook] fetch error",e)}return Reflect.apply(t,this,e)}};c.default.onInited(h)},73737:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(43171);const r=class{elements=new Set;isClearInit=!1;add(e){this.elements.add(e),this.initClear()}clear(){for(const e of this.elements){for(const t of Object.keys(e)){const s=t;if(s.startsWith("_ibs")||s.startsWith("_mbs")){const t=e[s];t?.disconnect(),delete e[s]}}this.elements.delete(e)}}initClear(){this.isClearInit||(this.isClearInit=!0,(0,n.A)(()=>{this.clear(),this.isClearInit=!1}))}}},73749:(e,t,s)=>{"use strict";s(57580);var n=s(7417),r=s(79110),a=s(29566),o=s(95313),i=s(12550),c=s(13536),d=s(91570),l=s(98570),u=s(93819),_=s(23238),h=s(43024);const f=e=>{const t=document.querySelectorAll(`#${e}`);t.forEach((e,s)=>{s!==t.length-1&&e.remove()})},p=()=>{((e,t)=>{document.querySelectorAll(`[id^="${e}"]`).forEach(s=>{Number(s.id.replace(e,""))!==t&&s.remove()})})("post_postpone_btn",window.__addMediaIndex??1),f("post_donut_duration_btn"),f("donut_visibility_btn")};let m=!1;const g=()=>{m||(m=!0,(0,_.A)(e=>{(0,l.A)()?.vcf_installed||(delete e.posting_web_react_form,delete e.posting_hide_copyright_button_web)}),(0,c.h)(e=>{if(e._posting_hooked)return;e._posting_hooked=!0;const t=e.init;e.init=async(...n)=>{try{const{default:e}=await Promise.all([s.e(763),s.e(1049)]).then(s.bind(s,71049));e(n[0])}catch(e){console.error(e)}try{return await Reflect.apply(t,e,n)}catch(e){throw e}finally{p()}}}),(0,n.n)(async()=>{const e=await(0,d.R)();if(document.getElementById("submit_post_box"))return;if(0===document.getElementsByClassName("PostingReactBlock__root").length)return;const t=document.getElementById("main_feed");if(!(0,l.A)()?.vcf_installed){try{await(async e=>{const t=await u.A;if(window.Notifier?.showEvent){const s=[t.use(e?"vkcom_posting_main_feed_error":"vkcom_posting_profile_feed_error")],n=parseInt(localStorage.getItem("oldPostingNotifyCount")||"0")||0;if(n>10)return;10===n&&s.push("<br/><br/>",t.use("vkcom_posting_reload_section_notification")),window.Notifier.showEvent({title:t.use("global_app_name"),text:s.join("\n")}),localStorage.setItem("oldPostingNotifyCount",(n+1).toString())}})(t)}catch(e){console.error(e)}t||e.go(e.objLoc,null,{noback:!0,replace:!0,preventScroll:!0})}}))},b=()=>{(0,l.A)()?.vcf_installed||h.default.getValue("oldPosting")&&g()};h.default.onInited(b),h.default.addChangeKeyListener("oldPosting",b);const w=()=>s.e(3028).then(s.bind(s,93028)),A=()=>s.e(4413).then(s.bind(s,24413)),v=(0,a.A)(()=>Promise.all([s.e(3068),s.e(5075)]).then(s.bind(s,86468))),y=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(8414),s.e(3068),s.e(2441),s.e(432),s.e(102),s.e(430)]).then(s.bind(s,70964)),k=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(8414),s.e(181),s.e(8486),s.e(3068),s.e(5253),s.e(2539)]).then(s.bind(s,23867)),E=()=>Promise.all([s.e(3068),s.e(5868)]).then(s.bind(s,67717)),S=()=>s.e(956).then(s.bind(s,30956)),P=()=>Promise.all([s.e(2441),s.e(432),s.e(5981)]).then(s.bind(s,98501)),O=()=>s.e(9724).then(s.bind(s,29724)),I=async()=>{const{default:e}=await s.e(7302).then(s.bind(s,97302)),t=await e.getStorage()||{};return Object.keys(t).length>0};(0,i.A)()&&((0,n.n)(()=>{(0,o.A)("alternativeProfile",v),(0,o.A)("redirectToMyAllGroups",O)}),(0,r.g)(()=>{(0,o.A)("colorFriends",w),(0,o.A)("colorGroups",A),(0,o.A)("prof_info",k),(0,o.A)("prof_info",E),(0,o.A)("prof_info",S),(0,o.A)(e=>["galo4kiVKN","galo4kiVT","galo4kiSova","galo4kiMp3","galo4kiCoffee","galo4kiVKXPlus","galo4kiVkTea"].some(t=>Boolean(e[t])),y),Promise.all([s.e(3068),s.e(6202)]).then(s.bind(s,29755)).catch(console.error),s.e(8365).then(s.bind(s,18365)).catch(console.error)}),(0,r.g)(async()=>{if(await I())return void P().catch(console.error);const{default:e}=await s.e(7302).then(s.bind(s,97302)),{remove:t}=e.addListener(async()=>{await I()&&(P().catch(console.error),t())})}))},74501:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var n=s(50313);const r=()=>(0,n.A)("MECommonContext")},76243:()=>{},76408:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=e=>{const t=e.length,s=new Uint8Array(t);for(let n=0;n<t;n++)s[n]=e.charCodeAt(n);return s}},76763:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(53778);class r extends n.default{constructor(){super("wallpaper",{lifetime:5e3})}async getCurrent(){const e=await this.getStorage();return e?.current||null}}const a=new r},77527:(e,t,s)=>{"use strict";s(57580);var n=s(29566),r=s(95313),a=s(12550);const o=(0,n.A)(()=>s.e(8357).then(s.bind(s,48357))),i=()=>s.e(1679).then(s.bind(s,31679)),c=()=>s.e(4619).then(s.bind(s,64619)),d=(0,n.A)(()=>s.e(9326).then(s.bind(s,79326)));(0,a.A)()&&((0,r.A)("silentstories",o),(0,r.A)("silentnotify",i),(0,r.A)("noonline",c),(0,r.A)("offlinebypass",d))},77775:(e,t,s)=>{"use strict";s(57580);var n=s(95728),r=s(98570),a=s(58354),o=s(67767),i=s(13625),c=s(43024);const d={ads:s.p+"styles/3e18c50b.vknext.css",adsPost:s.p+"styles/a20a5230.vknext.css",adsPostCopyright:s.p+"styles/5331c353.vknext.css",apps_recomm:s.p+"styles/08303a17.vknext.css",clips_recomm:s.p+"styles/d3ae5f67.vknext.css",friends_recomm:s.p+"styles/b1da3e6c.vknext.css",groups_recomm:s.p+"styles/9dd88264.vknext.css",hideStoriesFeed:s.p+"styles/ca788a14.vknext.css",narratives_recomm:s.p+"styles/75add9cc.vknext.css",post_recomm:s.p+"styles/b633602b.vknext.css",services_recomm:s.p+"styles/4006a3bb.vknext.css",video_recomm:s.p+"styles/8303e4ab.vknext.css",wideNewsFeed:s.p+"styles/d75b0d24.vknext.css",expandTextPost:s.p+"styles/90e5d5e1.vknext.css",oldPostDesign:s.p+"styles/468c02ac.vknext.css"};var l=s(8257);const u=(e,t)=>{const s=document.createElement("div");s.className="like_views like_views--inActionPanel",s.setAttribute("role","img"),s.setAttribute("title",(e=>window.getLang?window.getLang("like_N_people_viewed",e):String(e))(e)),t&&s.setAttribute("onmouseover",`Likes && Likes.updateViews('wall${t}', event);`);const n=document.createElement("span");n.className="like_views__icon";const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("fill","none"),r.setAttribute("height","16"),r.setAttribute("viewBox","0 0 16 16"),r.setAttribute("width","16"),r.setAttribute("xmlns","http://www.w3.org/2000/svg");const a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("fill","currentColor");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("clip-rule","evenodd"),i.setAttribute("d","M15.5 8c0-1-3-5-7.5-5S.5 7 .5 8s3 5 7.5 5 7.5-4 7.5-5zm-4 0a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"),i.setAttribute("fill-rule","evenodd"),a.appendChild(o),a.appendChild(i),r.appendChild(a),n.appendChild(r);const c=document.createElement("span");return c.className="_views",c.setAttribute("data-count",String(e)),c.textContent=(0,l.A)(e),s.appendChild(n),s.appendChild(c),s},_=(e=0,t=!1)=>{if(!e)return"";const s=3600,n=1e3*e,r=new Date(n),a=new Date,o=(Date.now()-r.getTime())/1e3,i=r.getFullYear(),c=r.getMonth();if(o<5)return window.getLang("global_just_now");if(o<60)return window.getLang("global_secs_ago",Math.ceil(o));if(o<s){const e=Math.ceil(o/60),t=window.getLang("global_word_mins_ago","raw");return Array.isArray(t)&&e<t.length?t[e]:window.langNumeric(e,window.getLang("global_mins_ago","raw"))}if(o/s<5){const e=Math.ceil(o/s),t=window.getLang("global_word_hours_ago","raw");return Array.isArray(t)&&e<t.length?t[e]:window.langNumeric(e,window.getLang("global_hours_ago","raw"))}const d=a.getFullYear(),l=a.getMonth(),u=t?window.getLang("months_of","raw"):window.getLang("months_sm_of","raw");return i<d&&(l>1||c<9||d-i>=2)?window.langDate(n,window.getLang("global_short_date_year_time","raw"),0,u):window.langDate(n,window.getLang("global_short_date_time","raw"),0,u)};var h=s(26555),f=s(28893),p=s(51018),m=s(92046),g=s(56875),b=s(91570);const w=new p.e,A=async()=>{const e=await(0,g.h)();return e._tqs?e._tqs:(await(0,m.c)(1e3),A())},v=async()=>{const e=await A();if(!e._vkns){e._vkns=!0;for(const t of w.listeners)try{t(e)}catch(e){console.error(e)}}};let y=!1;const k=async e=>{y||(y=!0,await v(),(async()=>{(await(0,b.R)()).onLocationChange(v)})().catch(console.error)),e(await A())},E=e=>{const t=w.addListener(e);return k(e),t},S=new p.e,P=new p.e,O=e=>(...t)=>{try{const e=t[0].payload;for(const t of S.listeners)try{t(e)}catch(e){console.error(e)}}catch(e){console.error(e)}const s=Reflect.apply(e,void 0,t);try{const e=t[0].payload;for(const t of P.listeners)try{t(e)}catch(e){console.error(e)}}catch(e){console.error(e)}return s},I=Symbol(),R=async e=>{if(e[I])return;e[I]=!0;const t=e._handlers;if(t[I])return;t[I]=!0,t["PostContentContainer/init"]&&(t["PostContentContainer/init"]=O(t["PostContentContainer/init"]));const s=new Proxy(t,{set:(e,t,s)=>"PostContentContainer/init"===t?(e[t]=O(s),!0):(e[t]=s,!0)});e._handlers=s};let U=!1;const N=(e,t=!1)=>{const s=t?P.addListener(e):S.addListener(e);return U||(U=!0,E(R)),s},L=async()=>{N(e=>{const t=e.data,s=t.item;let n=!1;if(s.attachments)for(const e of s.attachments){const t="on_media"===e.style||"full"===e.style;if("audio"===e.type&&t){n=!0;const t=e.audio,s=t?.thumb;e.style="compact",e.compact={icons:[{name:"song_outline",sizes:[]}],title:{text:{text:t.title}},description:{text:{text:t.artist}}},s?.photo_270&&e.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:s.photo_270})}if("audio_playlist"===e.type&&t){n=!0;const t=e.audio_playlist,s=t?.photo;e.style="compact",e.compact={icons:[{name:"playlist_outline",sizes:[]}],title:{text:{text:t.title}},description:{text:{text:t.description}}},s?.photo_270&&e.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:s.photo_270})}if("doc"===e.type&&"chip"===e.style){const t=e.doc;if(e.style="compact",e.compact={icons:[{name:"document_outline",sizes:[]}],title:{text:{text:t.title}},description:{text:{text:(0,h.A)(t.size)}}},t.preview?.photo?.sizes){const s=(0,f.A)(t.preview.photo.sizes);e.compact.icons[0].sizes.push({height:270,type:"x",width:270,url:s.src})}}}n&&0===s.compact_attachments_before_cut&&(s.compact_attachments_before_cut=1),t.attachmentsExpanded||(t.attachmentsExpanded=!0)})},M=e=>{if((0,r.A)()?.vcf_installed)return;const t=e.querySelector(".PostHeaderInfo");if(!t)return;const s=e.querySelector(".PostHeaderSubtitle");for(const r of e.querySelectorAll(".PostDateBlock__root:not(.ReactEntryRootClone)")){"none"===r.style.display&&(r.style.display=""),s?s.insertAdjacentElement("afterend",r):t.appendChild(r);const a=e.querySelector(".like_cont,.PostBottomActionLikeBtns");if(!a)return;if(a.getElementsByClassName("like_views").length)return;const{container:o}=(0,n.A)(r),{props:i}=(0,n.A)(r.firstChild),c=o?.memoizedState?.element?.props||i?.children?.props,d=c?.viewsCount,l=c?.date;if(l){const e=r.querySelector("a,.vkuiLink,[class*='vkuiLink']");e&&(e.innerText=_(l,!0))}if(!d)return void 0;const h=u(d,e.dataset.postId);a.appendChild(h)}};let C=[],x=!1;const T=()=>{if(C.length){for(const e of C)e();C=[]}c.default.getValue("oldPostDesign")&&!(0,r.A)()?.vcf_installed&&(x||(L().catch(console.error),(0,i.A)("oldPostDesign",d.oldPostDesign),x=!0),C.push((0,o.A)(M)),C.push((0,a.A)(M)))};c.default.onInited(T),c.default.addChangeKeyListener("oldPostDesign",T);var D=s(7417),B=s(29566),V=s(95313);const F=()=>s.e(126).then(s.bind(s,40126)),W=()=>Promise.all([s.e(3068),s.e(7843)]).then(s.bind(s,8868));(0,V.A)("ads",()=>s.e(2711).then(s.bind(s,42711))),(0,i.A)("hideStoriesFeed",d.hideStoriesFeed),(0,i.A)("wideNewsFeed",d.wideNewsFeed),(0,i.A)("expandTextPost",d.expandTextPost),(0,D.n)(()=>{(0,V.A)("adsPost",F),(0,i.A)("ads",d.ads),(0,i.A)("adsPost",d.adsPost),(0,i.A)("apps_recomm",d.apps_recomm),(0,i.A)("clips_recomm",d.clips_recomm),(0,i.A)("friends_recomm",d.friends_recomm),(0,i.A)("groups_recomm",d.groups_recomm),(0,i.A)("narratives_recomm",d.narratives_recomm),(0,i.A)("post_recomm",d.post_recomm),(0,i.A)("services_recomm",d.services_recomm),(0,i.A)("video_recomm",d.video_recomm),Promise.all([s.e(3068),s.e(1376)]).then(s.bind(s,75473)).catch(console.error)});const G=()=>{if(c.default.hasEnabledValues(["defaultFilter","filterShortLinks"]))return W;if(0!==c.default.getValue("customFilter").trim().length)return(0,B.A)(W);return Object.keys(c.default.getStorageWithDefault()).some(e=>e.startsWith("vtFilter_")&&!0===c.default.getValue(e))?W:null};c.default.onInited(()=>{(0,D.n)(()=>{(async()=>{const e=G();if(e)return void e();const{remove:t}=c.default.addListener(()=>{const e=G();e&&(e(),t())})})().catch(console.error)})})},78535:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(51018),r=s(3916),a=s(54251);const o=new n.e;let i=!1;const c=e=>{const t=o.addListener(e);return(async e=>{i?await(0,r.P)():(i=!0,(0,a.A)("vk",e=>{for(const t of o.listeners)try{t(e)}catch(e){console.error(e)}})),e(window.vk)})(e),t},d=e=>{const t=new n.e,s=s=>{let n=s[e];Object.defineProperty(s,e,{get:()=>n,set:e=>{n=e;for(const e of t.listeners)try{e(n)}catch(e){console.error(e)}return!0},configurable:!0,enumerable:!0})};let a=!1;const o=async t=>{a||(a=!0,await(async()=>{const e=await(0,r.P)();e&&s(e),c(e=>{s(e)})})());t((await(0,r.P)())[e])};return e=>{const s=t.addListener(e);return o(e),s}}},79068:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(51018),r=s(54251),a=s(48913);const o=new n.e;let i=!1;const c=e=>{const t=o.addListener(e);return(async e=>{i?await(0,a.e)():(i=!0,(0,r.A)("cur",e=>{for(const t of o.listeners)try{t(e)}catch(e){console.error(e)}})),e(window.cur)})(e),t}},79110:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});const n=e=>{if("complete"===document.readyState)return void e();const t=()=>{"complete"===document.readyState&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}},79384:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(e,t=0)=>e.charCodeAt(t)},80557:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var n=s(61054);const r=new Set;let a=!1;const o=e=>(r.add(e),(async()=>{if(a)return;a=!0;const e=await(0,n.V)(),t=e.api;e.api=async function(...s){let n=await Reflect.apply(t,e,s);for(const e of r)try{const t=await e({method:s[0],params:s[1],response:n});void 0!==t&&(n=t)}catch(e){console.error("[VKNext] Interceptor error:",e)}return n}})(),()=>r.delete(e))},81196:(e,t,s)=>{"use strict";var n;s.d(t,{F:()=>r}),function(e){e[e.Russian=0]="Russian",e[e.Ukrainian=1]="Ukrainian",e[e.English=3]="English",e[e.German=6]="German",e[e.Polish=15]="Polish",e[e.Kazakh=97]="Kazakh",e[e.Belarusian=114]="Belarusian",e[e.Soviet=777]="Soviet",e[e.PortugueseBrazilian=73]="PortugueseBrazilian",e[e.Romanian=54]="Romanian",e[e.Spanish=4]="Spanish",e[e.Turkish=82]="Turkish",e[e.Hindi=76]="Hindi"}(n||(n={}));const r=(e=n.Russian)=>/^ru\b/.test(navigator.language)?n.Russian:/^uk\b/.test(navigator.language)?n.Ukrainian:/^en\b/.test(navigator.language)?n.English:/^de\b/.test(navigator.language)?n.German:/^pl\b/.test(navigator.language)?n.Polish:/^kk\b/.test(navigator.language)?n.Kazakh:/^be\b/.test(navigator.language)?n.Belarusian:e},82295:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const n=globalThis.location.host.split(".");let r;r="vk"!==n[0]?"vk.ru":`vk.${n[n.length-1]||"ru"}`;const a=r},84436:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(56875);const r=class{element;parent;constructor({id:e,href:t,hiddenAutoInject:s,parent:n}={}){this.element=document.createElement(t?"link":"style"),e&&(this.element.id=e),t&&(this.element.rel="stylesheet",this.element.type="text/css",this.element.href=t),s&&(this.unuse(),this.injectToPage()),this.parent=n}set innerContent(e){this.element.textContent="",e.length&&this.element.appendChild(document.createTextNode(e))}set href(e){this.element.href=e}use(e=!1){this.element.media="",e&&this.injectToPage()}unuse(e=!1){this.element.media="none",e&&this.element.remove()}injectToPage(){if(this.parent){if(this.parent.contains(this.element))return;this.parent.appendChild(this.element)}else"complete"===document.readyState&&document?.head||document.documentElement.appendChild(this.element),this.injectToHead().catch(console.error)}async injectToHead(){await(0,n.h)(),document.head.appendChild(this.element)}}},85209:(e,t,s)=>{"use strict";s.a(e,async(e,t)=>{try{s(71982),s(40853),s(77527),s(11688),s(99205);var n=s(89172),r=(s(89010),s(85836),s(77775),s(37331),s(73749),s(7417)),a=s(79110),o=s(95313),i=s(12550),c=e([n]);n=(c.then?(await c)():c)[0];const d=()=>Promise.all([s.e(3068),s.e(3937)]).then(s.bind(s,39738)),l=()=>Promise.all([s.e(3068),s.e(5013)]).then(s.bind(s,10134));(0,a.g)(()=>{Promise.all([s.e(3068),s.e(237)]).then(s.bind(s,32865)).catch(console.error),s.e(1356).then(s.bind(s,61356)).catch(console.error),(0,o.A)("showAttachDownloadButtons",l)}),(0,i.A)()&&((0,a.g)(()=>{(0,o.A)(["enableBtnGraffiti","enableBtnAudio","enableBtnVideoMessage"],d),Promise.all([s.e(3068),s.e(9697)]).then(s.bind(s,13834)).catch(console.error),Promise.all([s.e(3068),s.e(6466)]).then(s.bind(s,81507)).catch(console.error),Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(3068),s.e(9964),s.e(2591)]).then(s.bind(s,11512)).catch(console.error),Promise.all([s.e(3068),s.e(9964),s.e(8075)]).then(s.bind(s,80588)).catch(console.error)}),(0,r.n)(()=>{s.e(6856).then(s.bind(s,74475)).catch(console.error),Promise.all([s.e(3068),s.e(5847)]).then(s.bind(s,52352)).catch(console.error),Promise.all([s.e(3068),s.e(5570)]).then(s.bind(s,23091)).catch(console.error)})),t()}catch(e){t(e)}})},85836:(e,t,s)=>{"use strict";s(57580);var n=s(7417),r=s(79110),a=s(13625),o=s(29566),i=s(95313);const c={musicExplicitIcon:s.p+"styles/2f4393a6.vknext.css",musicRemoveAds:s.p+"styles/c19cf431.vknext.css"},d=()=>s.e(3179).then(s.bind(s,13179)),l=()=>s.e(6746).then(s.bind(s,16746)),u=(0,o.A)(()=>Promise.all([s.e(3068),s.e(7671)]).then(s.bind(s,97440)));(0,i.A)("musicRemoveAds",()=>s.e(6873).then(s.bind(s,66873))),(0,a.A)("musicRemoveAds",c.musicRemoveAds),(0,a.A)("musicExplicitIcon",c.musicExplicitIcon),(0,n.n)(()=>{(0,i.A)("equalization",l),(0,i.A)("alternativeTopPlayer",u)}),(0,r.g)(()=>{(0,i.A)("showBitrateNearDuration",d),Promise.all([s.e(3068),s.e(6042)]).then(s.bind(s,55035)).catch(console.error)})},86335:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});const n={saveConfig:!1,hideUsersCovers:!1,ads:!0,adsPost:!0,adsPostCopyright:!1,adsSpyning:!0,disableAnalytics:!0,wideNewsFeed:!1,friends_recomm:!0,groups_recomm:!0,post_recomm:!0,clips_recomm:!0,video_recomm:!0,podcast_recomm:!0,apps_recomm:!0,narratives_recomm:!0,services_recomm:!0,customFilter:"",defaultFilter:!1,filterShortLinks:!1,filterRefLinks:!1,newDesignGroups:!1,alternativeHeader:!0,headerMoon:!0,alternativeScrollBar:!1,groupsCascaded:!1,shrikingStoryBlock:!1,rounding:!1,roundingAngle:10,casper:!1,emojiCasper:!1,chatsRight:!1,garland:!1,hideRecentGroups:!0,theme:!1,animations:!1,firstTheme:"light",secondTheme:"vknext_gray",currentTheme:"light",accent:null,accents:[],backgroundSize:"cover",backgroundPosition:"center",backgroundBlur:0,backgroundBrightness:100,backgroundContrast:100,customFont:"",activeFont:null,customLogo:"",alternativeStickerPanel:!1,vkSquare:!1,animatedSplash:!1,nodeleteall:!1,hookBombs:!1,showDeletedMsg:!0,showBombsMsg:!1,decrypt:!0,graffitiReduce:!1,dialogRight:!1,silentread_all:!1,silentreadusers:!1,silentreadchats:!1,silentreadbots:!1,silentreadgim:!1,silentwrite_all:!1,silentwriteusers:!1,silentwritechats:!1,silentwritebots:!1,silentwritegim:!1,silentreadexcl:[],silentreadincl:[],silentwriteexcl:[],silentwriteincl:[],encryptMessagesType:"",sendCasper:!1,silentMsg:!1,sendCasperTime:15,silentreadinclgim:{},silentreadexclgim:{},silentwriteinclgim:{},silentwriteexclgim:{},downDialogsWay:"txt",includeAttsInTxt:!1,prettyPrintInDownJson:!1,hideBlacklisted:!1,callsConfirmation:!0,noonline:!1,silentnotify:!1,alternativeWriteBar:!1,silentListen:!1,deleteTodayMessages:!0,hideGearSettings:!1,leftNavHide:!1,fixedLeftMenu:!1,sideBarBlock:"default",sideBarOnlyIcons:!1,sideBarHideRecommendations:!0,vkcc:!0,short_params:!1,flex_name:!1,changeIconsAppsAndGroups:!0,leftHideList:[],customSideBar:[{name:"Новости VK Next",link:"https://vk.ru/vknext",icon:"logo_vk_outline_28",target:"_blank"},{name:"Привилегии",link:"https://vk.ru/donut/vknext",icon:"donate_outline_28",target:"_blank"},{name:"Чат VK Next",link:"https://vk.ru/vknext?w=chats-207165415",icon:"messages_outline_28",target:"_blank"}],leftChange:{},currentOnline:!1,compactLeftMenu:!1,prof_info:!0,notifyFriendRemove:!1,colorFriends:!1,colorFriendsColor:"#4bb34b",colorGroups:!1,colorGroupsColor:"#0ff",hotKeys:{},alternativeProfileUrl:"",away:!0,viewPollNotVoting:!1,photoScroll:!1,galo4kiVT:!1,galo4kiSova:!1,galo4kiVKN:!0,galo4kiMp3:!1,galo4kiCoffee:!1,galo4kiVKXPlus:!1,galo4kiVkTea:!1,id3:!0,downPlaylistsWay:1,curEqualizer:[0,0,0,0,0,0,0,0,0,0],curPreset:"Flat",curVolume:.476,numTracksInPlaylist:!0,curRepeat:null,equalization:!1,voicePlaybackRate:1,voiceVolume:1,customLogoUrl:"",customEmoji:"vk",silentstories:!1,offlinebypass:!1,spyFriendOnline:!1,spyFriendOffline:!1,spyRemoveFriend:!1,spyReadMessage:!1,spyTyping:!1,spyNotifyVK:!1,spyNotifySystem:!1,spyNotCurPeer:!1,spySound:"",spyDisableSound:!1,ignoreIncomingCalls:!1,enableBtnTemplate:!0,enableBtnGraffiti:!0,enableBtnAudio:!0,enableBtnVideoMessage:!0,enableBtnOptions:!0,enableBtnExtendedDel:!0,enableBtnFav:!0,enableBtnStickers:!0,enableBtnMentions:!0,enableBtnRename:!0,enableBtnShared:!0,enableBtnChangePhoto:!0,enableBtnDlVoice:!0,enableBtnDlStories:!0,enableBtnDlPhoto:!0,enableBtnDlAlbums:!0,enableBtnDlVideo:!0,enableBtnDlMusic:!0,enableBtnDlPlaylists:!0,enableBtnText:!0,enableBtnDlEqualizer:!0,enableBtnDlPlaylistPhoto:!0,enableCheckNewVersionModal:!0,paintingMiniApps:!1,checkingUpdateInBackground:!1,hints8:[],hideOldButtonEdit:!1,hideNoSortedSettings:!1,settingsInSections:!1,typeSettingsSelected:!1,voiceEnhancer:!1,emojiSuggestions:!1,bypassMusic:!1,lastfm:!1,autoThemeChange:!1,hidableBlocks:!1,VKNclearCacheParams:{msgDeleted:!1,msgAll:!1,themes:!1,msgExpired:!1,auth:!1,chatStats:!1,localRename:!1,authVKME:!1},genius:!1,logoNY2023:!1,nyBackgroundSnowFlake:!1,nyPageHeaderGarland:!1,showAdminsChat:!1,hideLeftCount:!1,scalePhoto:!1,changePhotoWay:3,videoMessageShapeId:1,appleMessageReactions:!1,inlineCommandPrefix:"@",useInlinePic:!0,useInlineGif:!1,useInlineVid:!1,useInlineWiki:!1,useInlineBaiChat:!1,inlineRemoveWatermark:!1,showMessageHistory:!1,currentSettingsLang:-1,extendedMessageMenu:!0,openSettingsInNewTab:!1,stickersSize:0,showAttachDownloadButtons:!0,themeEditor:!1,downloadChatHistorySplit:!0,downloadChatHistoryPrettyPrint:!1,downloadChatHistoryFormat:"txt",alternativeTopPlayer:!0,alternativeProfile:!1,customLogoNew:null,hideUnreadReactions:!1,musicRemoveAds:!0,musicExplicitIcon:!0,postFiltersMark:!1,postFiltersRemoveSpecialSymbols:!1,downloadChatHistoryAttaches:{},hideStoriesFeed:!1,showBitrateNearDuration:!1,checkBetaUpdate:!0,actionAfterUpdate:"page",videoGrid:!0,messagesSaveMode:"background",numPhotosOnAlbumDownload:!0,keepOriginalPhotoNamesDownload:!1,enablePostFiltersInGroups:!0,audioConvertMethod:"hlsjs",oldPostDesign:!0,oldPosting:!1,expandTextPost:!1,redirectToMyAllGroups:!0,hideConvoListFooter:!1,hideStlNav:!1}},89010:(e,t,s)=>{"use strict";s(57580);var n=s(5305),r=s(11860),a=s(37573),o=s(43024);o.default.onInited(()=>{(0,n.A)(e=>{const[t,s,n]=e;if("al_im.php"===t&&s?.act){if("a_mark_read"===s.act&&(0,r.A)(s.peer||0,s.gid||0))return n?.onFail&&n.onFail(new Error("stop")),!0;if("a_activity"===s.act&&(0,a.A)(s.peer||0,s.gid||0))return n?.onFail&&n.onFail(new Error("stop")),!0}return!1})});var i=s(91570),c=s(3916),d=s(23238),l=s(96276);const u=["me_fc_message_actions","me_message_selecting","vkm_profile_info_screen_name","vkm_settings_experimental","vkm_hide_forward_author","me_community_messages_enabled","vkm_convo_forbid_writing_all","vkm_message_preview_on_hover","vkm_recommended_folders","vkm_settings_hide_suggested","vkm_send_private_message_link","vkm_stickers_popup","vkm_media_share","vkm_delete_chat","vkm_new_chunk_parser","vkm_photo_save_to_album","vkm_media_viewer_report","vkm_chat_list_collapse","vkm_compact_mode_button_switch","vkm_members_search_pagination","vkm_convo_antispam_card","vkm_settings_privacy","vas_gifts_random_pack","vkm_birthday_sticker_pack","vkm_chat_restore"],_=()=>{window.vk&&(window.vk.pe||(window.vk.pe={}),window.vk.pe.vkm_reforged_in_vkcom=1,window.vk.pe.vkm_reforged_enable_layout_switch=1,window.vk.pe.vkm_hide_forward_author=1)};(0,n.A)(e=>{if(_(),"al_im.php"===e[0]&&("im"===e[1]?.__query||"al_im.php"===e[1]?.__query)){const t=e[2].onDone;e[2].onDone=function(...e){const s=Reflect.apply(t,this,e);return s instanceof Promise?s.finally(_):_(),s}}return e}),(0,l.s)(e=>{if(!e.store.featureFlags)return;const t=e.store.featureFlags;for(const e of u)t[e]=!0;t.vkm_new_forward=!1,t.vkm_reactions||(t.vkm_reactions=20),t.vkm_bubble_theme_default_value||(t.vkm_bubble_theme_default_value=1),t.vkm_mediascope_collect=!1}),(async()=>{(0,c.P)().then(_);const e=await(0,i.R)();(0,d.A)(_),e.addNavigationStartListener&&e.addNavigationStartListener(_)})().catch(console.error);var h=s(7417),f=s(79110),p=s(13625),m=s(12550),g=s(29566),b=s(95313);const w={dialogRight:s.p+"styles/ef8f0e65.vknext.css",alternativeWriteBar:s.p+"styles/ac2347a3.vknext.css",hideConvoListFooter:s.p+"styles/f46dc808.vknext.css",graffitiReduce:s.p+"styles/816531ff.vknext.css",appleMessageReactions:s.p+"styles/d2090e00.vknext.css"},A=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(8414),s.e(3068),s.e(2441),s.e(3097)]).then(s.bind(s,18082)),v=()=>Promise.all([s.e(3068),s.e(214)]).then(s.bind(s,18143)),y=()=>s.e(4288).then(s.bind(s,34288)),k=()=>Promise.all([s.e(3068),s.e(9964),s.e(2214)]).then(s.bind(s,21679)),E=()=>Promise.all([s.e(3068),s.e(8528)]).then(s.bind(s,79745)),S=()=>s.e(4747).then(s.bind(s,34747)),P=()=>Promise.all([s.e(3068),s.e(2441),s.e(7040)]).then(s.bind(s,71985)),O=()=>Promise.all([s.e(3068),s.e(2441),s.e(8086)]).then(s.bind(s,85199)),I=()=>s.e(2963).then(s.bind(s,72963)),R=()=>Promise.all([s.e(3068),s.e(7068)]).then(s.bind(s,79477));(0,m.A)()&&((0,b.A)(["nodeleteall","showDeletedMsg","showBombsMsg","hookBombs"],v),(0,f.g)(()=>{(0,b.A)("showAdminsChat",A),(0,b.A)("callsConfirmation",y),(0,b.A)("enableBtnTemplate",k),(0,b.A)("enableBtnOptions",E),(0,b.A)("enableBtnFav",S),(0,b.A)("decrypt",P),(0,b.A)("showDeletedMsg",O),(0,b.A)("encryptMessagesType",I),o.default.onInited(()=>{const e=()=>{const e=(()=>{if(o.default.getValue("useInlinePic"))return R;const e=o.default.getValue("useInlineGif"),t=o.default.getValue("useInlineVid"),s=o.default.getValue("useInlineWiki");return!!(e||t||s)&&(0,g.A)(R)})();e&&e().catch(console.error)};e(),o.default.addListener(e)})}),(0,h.n)(()=>{s.e(119).then(s.bind(s,119)).catch(console.error),Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(3068),s.e(6872)]).then(s.bind(s,74329)).catch(console.error)}),(0,p.A)("dialogRight",w.dialogRight),(0,p.A)("hideConvoListFooter",w.hideConvoListFooter),(0,p.A)("appleMessageReactions",w.appleMessageReactions),(0,p.A)("graffitiReduce",w.graffitiReduce),(0,p.A)("alternativeWriteBar",w.alternativeWriteBar))},89172:(e,t,s)=>{"use strict";s.a(e,async(e,t)=>{try{s(57580);var n=s(56875),r=s(7417),a=s(79110),o=s(13625),i=s(43024),c=s(12550),d=s(95313),l=s(19962);const e=()=>s.e(3807).then(s.bind(s,83807)),u=()=>Promise.all([s.e(961),s.e(7397),s.e(1024),s.e(3068),s.e(7556)]).then(s.bind(s,9693)),_=()=>s.e(5283).then(s.bind(s,85283)),h=()=>s.e(5740).then(s.bind(s,15740)),f=()=>s.e(7374).then(s.bind(s,57374)),p=()=>{if(i.default.getValue("vkcc"))return!0;const e=i.default.getValue("customSideBar")||[];return!!(Array.isArray(e)&&e.length>0)},m=()=>{if(p())return void u().catch(console.error);const{remove:e}=i.default.addListener(()=>{p()&&(u().catch(console.error),e())})},g=()=>Object.keys(i.default.getValue("leftChange")||{}).length>0,b=()=>{if(g())return void h().catch(console.error);const{remove:e}=i.default.addChangeKeyListener("leftChange",()=>{g()&&(h().catch(console.error),e())})};if((0,c.A)()){(0,d.A)("currentOnline",f),(0,a.g)(()=>{(0,d.A)("changeIconsAppsAndGroups",e),(0,d.A)("flex_name",_)}),(0,r.n)(()=>{i.default.onInited(m),i.default.onInited(b),s.e(53).then(s.bind(s,50053)).catch(console.error)});const t=await(0,o.T)(l.A.sideBarSolidBlock);(0,o.A)("compactLeftMenu",l.A.compactLeftMenu),(0,o.A)("fixedLeftMenu",l.A.fixedLeftMenu),(0,o.A)("hideGearSettings",l.A.hideBtnSettings),(0,o.A)("hideLeftCount",l.A.hideCounters),(0,o.A)("leftNavHide",l.A.hideLeftNav),(0,o.A)("sideBarHideRecommendations",l.A.hideRecommendations),(0,o.A)("sideBarOnlyIcons",l.A.onlyIcons),i.default.onInited(async()=>{let e=i.default.getValue("sideBarBlock");"boolean"==typeof e&&(e=e?"solid_block":"default",i.default.setValue("sideBarBlock",e));const s=await(0,n.h)();"solid_block"===e?s.appendChild(t):s.contains(t)&&s.removeChild(t)}),i.default.addChangeKeyListener("sideBarBlock",async(e,s)=>{const r=await(0,n.h)();"solid_block"===s?r.contains(t)||r.appendChild(t):r.contains(t)&&r.removeChild(t)})}t()}catch(e){t(e)}},1)},91570:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var n=s(50313);const r=()=>(0,n.A)("nav")},91953:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});var n=s(50313);const r=()=>(0,n.A)("ajax")},92046:(e,t,s)=>{"use strict";s.d(t,{c:()=>n});const n=e=>new Promise(t=>setTimeout(t,e))},92103:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _lib_createPromise__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37352),_helpers_isOauthVK__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26195),_injected_bridge_getRuntimeURL__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7408);console.info("[VK Next] userscript start");const getChunkFromServer=async e=>{try{return(await fetch(e)).text()}catch(e){}const{promise:t,resolve:s,reject:n}=(0,_lib_createPromise__WEBPACK_IMPORTED_MODULE_0__.default)();return GM_xmlhttpRequest({method:"GET",url:e,onload:({responseText:e})=>{if(!e)return n(new Error("Chunk not found"));s(e)},onerror:e=>n(e)}),t},getChunkCacheKey=e=>`_webpack_require_l_cache_${new URL(e).pathname}`;__webpack_require__.l=(chunkUrl,done)=>{const onLoad=(text,fromCache=!1)=>{try{eval(text),done(),fromCache||requestAnimationFrame(()=>{requestIdleCallback(()=>{GM_setValue(getChunkCacheKey(chunkUrl),text)})})}catch(e){console.error(e),done(e)}};{const e=GM_getValue(getChunkCacheKey(chunkUrl),"");if(e?.length)return onLoad(e,!0)}getChunkFromServer(chunkUrl).then(e=>onLoad(e)).catch(done)},(0,_injected_bridge_getRuntimeURL__WEBPACK_IMPORTED_MODULE_2__.A)("vknext.css").then(e=>{GM_addElement("link",{href:e,rel:"stylesheet",type:"text/css"})}),(0,_helpers_isOauthVK__WEBPACK_IMPORTED_MODULE_1__.A)()&&__webpack_require__.e(2985).then(__webpack_require__.bind(__webpack_require__,62985)).catch(console.error)},92580:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});const n=()=>{let e,t;return{promise:new Promise((s,n)=>{e=s,t=n}),resolve:e,reject:t}}},93494:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(61054);const r=new Set;let a=!1;const o=e=>(r.add(e),(async()=>{if(a)return;a=!0;const e=await(0,n.V)(),t=e.api;e.api=function(...s){let n=!1;for(const e of r)try{const t=e(s);!0===t?n=!0:!t||t instanceof Promise||(s=t)}catch(e){console.error(e)}return n?new Promise(()=>{}):Reflect.apply(t,e,s)}})(),()=>r.delete(e))},93819:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(22440),r=s(51603),a=s(81196),o=s(3916);s(98570);const i=(async()=>{await(0,o.P)();const e=(0,n.A)(),t="number"==typeof e.vk?.lang?e.vk.lang:(0,a.F)(),{LangReact:i}=await s.e(6690).then(s.bind(s,26690));return new i(await(0,r.A)("vkcom",t))})();const c=i},94441:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});const n=s.p+"styles/67813509.vknext.css",r=s.p+"styles/9cee5d31.vknext.css",a=s.p+"styles/e505835c.vknext.css",o={alternativeScrollbar:n,groupsCascaded:r,shrikingStoryBlock:s.p+"styles/77a38514.vknext.css",rounding:a}},95313:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(43024);const r=(e,t)=>{const s=()=>t().catch(console.error);n.default.onInited(()=>"function"==typeof e?(e=>{if(e(n.default.getStorageWithDefault()))return void s();const{remove:t}=n.default.addListener(()=>{e(n.default.getStorageWithDefault())&&(s(),t())})})(e):Array.isArray(e)?(e=>{if(n.default.hasEnabledValues(e))return void s();const{remove:t}=n.default.addListener(()=>{n.default.hasEnabledValues(e)&&(s(),t())})})(e):void(e=>{if(n.default.getValue(e))return void s();const{remove:t}=n.default.addChangeKeyListener(e,(e,n)=>{n&&(s(),t())})})(e))}},95728:(e,t,s)=>{"use strict";function n(e){const t={};if(!e)return t;for(const s of Object.keys(e))s.startsWith("__reactFiber")&&(t.fiber=e[s]),s.startsWith("__reactProps")&&(t.props=e[s]),s.startsWith("__reactContainer")&&(t.container=e[s]);return t}s.d(t,{A:()=>n})},96276:(e,t,s)=>{"use strict";s.d(t,{s:()=>p});var n=s(51018),r=s(7417),a=s(79110),o=s(7298);const i=new n.e,c=Symbol(),d=e=>{if(!e[c]){e[c]=!0;for(const t of i.listeners)t(e)}};let l=!1;const u=async()=>{if(l)return;l=!0;const e=await(0,o.vt)();l=!1,e&&d(e)},_=async()=>{const e=await(0,o.Kr)();if(e&&(d(e),window.MECommunityCommonContext)){const e=await window.MECommunityCommonContext;e&&d(e)}},h=()=>{_().catch(console.error),u().catch(console.error)};let f=!1;const p=e=>{const t=i.addListener(e);return f?[window.MECommonContext,window.MECommunityCommonContext].forEach(t=>{t&&(t instanceof Promise?t.then(e):e(t))}):(f=!0,(async()=>{_().catch(console.error),(await(0,o.R2)()).onLocationChange(e=>{e.startsWith("gim")&&u().catch(console.error)})})().catch(console.error),(0,r.n)(h),(0,a.g)(h)),t}},96708:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});const n=new BroadcastChannel("vknext");n.addEventListener("message",({data:e})=>{if("object"==typeof e&&"vkb_rp"===e.t)window.location.reload()});const r=n},96939:(e,t,s)=>{"use strict";s.a(e,async(e,t)=>{try{s(57580),s(20568),s(43024);var n=s(85209),r=(s(24856),s(7417)),a=s(79110),o=(s(76243),e([n]));n=(o.then?(await o)():o)[0],console.info("[VK Next] Injected14 start"),(0,r.n)(async()=>{try{await s.e(240).then(s.bind(s,20240))}catch(e){console.error(e)}Promise.all([s.e(3068),s.e(6831)]).then(s.bind(s,53064)).catch(console.error)}),(0,a.g)(()=>{s.e(2343).then(s.bind(s,42343)).catch(console.error),Promise.all([s.e(3068),s.e(5622)]).then(s.bind(s,73983)).catch(console.error)}),s.e(5105).then(s.bind(s,35105)).catch(console.error),t()}catch(e){t(e)}})},98570:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const n={},r=()=>{try{"vknext"in globalThis||Object.defineProperty(globalThis,"vknext",{configurable:!1,value:n})}catch(e){}try{if("vknext"in globalThis)return globalThis.vknext;globalThis.vknext=n}catch(e){console.error(e)}return n}},99205:(e,t,s)=>{"use strict";s(57580);var n=s(13625);const r=s.p+"styles/ab6ae287.vknext.css",a=s.p+"styles/ac1885e7.vknext.css",o=s.p+"styles/dfac3133.vknext.css",i=s.p+"styles/c054cb4f.vknext.css",c=s.p+"styles/866cf68e.vknext.css",d=s.p+"styles/153860e3.vknext.css";(0,n.A)("casper",r),(0,n.A)("emojiCasper",a),(0,n.A)("chatsRight",o),(0,n.A)("hideRecentGroups",i),(0,n.A)("hideUnreadReactions",d),(0,n.A)("hideStlNav",c)},99381:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=()=>{}}},__webpack_module_cache__={},hasSymbol,webpackQueues,webpackExports,webpackError,resolveQueue,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.loaded=!0,s.exports}__webpack_require__.m=__webpack_modules__,hasSymbol="function"==typeof Symbol,webpackQueues=hasSymbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports=hasSymbol?Symbol("webpack exports"):"__webpack_exports__",webpackError=hasSymbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},__webpack_require__.a=(e,t,s)=>{var n;s&&((n=[]).d=-1);var r,a,o,i=new Set,c=e.exports,d=new Promise((e,t)=>{o=t,a=e});d[webpackExports]=c,d[webpackQueues]=e=>(n&&e(n),i.forEach(e),d.catch(e=>{})),e.exports=d,t(e=>{var t;r=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[webpackQueues])return e;if(e.then){var t=[];t.d=0,e.then(e=>{s[webpackExports]=e,resolveQueue(t)},e=>{s[webpackError]=e,resolveQueue(t)});var s={};return s[webpackQueues]=e=>e(t),s}}var n={};return n[webpackQueues]=e=>{},n[webpackExports]=e,n}))(e);var s=()=>r.map(e=>{if(e[webpackError])throw e[webpackError];return e[webpackExports]}),a=new Promise(e=>{(t=()=>e(s)).r=0;var a=e=>e!==n&&!i.has(e)&&(i.add(e),e&&!e.d&&(t.r++,e.push(t)));r.map(e=>e[webpackQueues](a))});return t.r?a:s()},e=>(e?o(d[webpackError]=e):a(c),resolveQueue(n))),n&&n.d<0&&(n.d=0)},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var s=Object.create(null);__webpack_require__.r(s);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;("object"==typeof r||"function"==typeof r)&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach(t=>n[t]=()=>e[t]);return n.default=()=>e,__webpack_require__.d(s,n),s},__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((t,s)=>(__webpack_require__.f[s](e,t),t),[])),__webpack_require__.u=e=>961===e?"scripts/8523bb4d5.vknext.js":7397===e?"scripts/7cd8e6be3.vknext.js":8414===e?"scripts/956cf1af1.vknext.js":181===e?"scripts/68b96fd28.vknext.js":8238===e?"scripts/26bcfbc3f.vknext.js":7887===e?"scripts/04fd9e4c4.vknext.js":1502===e?"scripts/b8b969bab.vknext.js":"scripts/"+{33:"dfecb1b62",34:"b30b792f6",45:"be29f00ab",53:"6ead7dde7",70:"bcab13817",102:"f5711269f",113:"c53bf581d",119:"efb9a1121",122:"b1c5e704f",126:"0552f894a",134:"5949e2fdf",141:"655d702ac",150:"431f3e8e7",192:"13cfeb255",195:"03b42ee22",214:"3fd93f672",217:"aa9d00f90",225:"06587ffa0",237:"476fd842c",240:"f23036114",350:"601bc9fdf",367:"0f8817b08",382:"abdcb029c",404:"f026f0f84",430:"ddfc98733",432:"f9f543423",555:"94a29eba7",634:"6e34e97ea",661:"75a45ac8e",681:"e8d7fd32e",690:"52617e7c5",697:"46eedd122",717:"e7a261a55",763:"941349815",777:"c5fded50c",781:"c01db0fdb",797:"75e82cc0d",851:"b6273507f",913:"1aa96cc44",956:"f668fcba9",959:"99d9d1f13",964:"ca330a231",1024:"d98db3dd4",1049:"913473ed2",1062:"eb6bd2e68",1077:"f3f0e3fbf",1109:"ccee7b7da",1192:"3ac635a0f",1210:"69e82302d",1243:"030b5cf56",1297:"c7b301e92",1300:"1811e9149",1332:"5f07f4256",1348:"991a3fb57",1351:"827763caf",1356:"0c1ef8da5",1376:"9ba9b9650",1396:"a81f4f220",1429:"fa434768b",1475:"e9b9f1787",1547:"7b4b95059",1570:"cd14c27ba",1600:"0182f28b5",1679:"8628b9699",1691:"bccb73c8a",1812:"194f9d750",1825:"c3536b33e",1843:"29019a18d",1909:"dbce5e6ca",1922:"f9c39ca91",1923:"da0ac5900",1941:"c792853b4",1974:"667627810",2013:"8c440fbe1",2031:"d004eb1ab",2068:"2e1bbcd39",2069:"eaafa23e9",2081:"fbafc30a6",2130:"221aa9b80",2135:"74567dbe2",2139:"4b5d23421",2204:"e1313220d",2214:"9fa7ed220",2220:"8ea3838ba",2251:"6d662cc63",2268:"18a12a77a",2295:"c35f59d36",2319:"2214ec0e2",2338:"fc1c2b8b8",2342:"71f1951ec",2343:"b8731cb02",2350:"bcee27655",2392:"64e8dc7f3",2402:"6d5ad41b7",2418:"8b02521ef",2425:"06e6ec904",2441:"fc904c415",2461:"eb1b0d267",2462:"40cb499a3",2497:"2f52bdaa6",2539:"ce245f111",2591:"ada9c41e2",2606:"77a72b1ed",2622:"881d06187",2665:"e806d38fb",2692:"c9ee328bc",2710:"823d1cbc4",2711:"47aae12af",2721:"57cae99a3",2725:"1bdab3eac",2739:"6cbed17a5",2797:"7b70d468c",2827:"a941e85f8",2893:"8bebc1100",2913:"7d6067441",2957:"9f6088ded",2963:"31585acb5",2965:"0c3ad7e08",2985:"61a70a1f4",3018:"43fef2549",3023:"cbe9f8d59",3028:"cb07e9387",3040:"ffd46a23a",3068:"1fae353ad",3096:"d9c2bd5ca",3097:"0c3265ef7",3116:"fc0ae15a1",3158:"7bc44bfc4",3172:"167f68592",3179:"d58f90670",3185:"efa6d0ff5",3265:"b33976fdd",3301:"a031070e1",3339:"825398caf",3386:"b13b9cff0",3415:"253644b4f",3456:"36f1033a0",3464:"ed6609733",3515:"2bed6190e",3579:"ddb4d95f0",3600:"b192f2dff",3622:"6db737163",3639:"df0bef2b0",3671:"8cdd004af",3739:"49ea8f848",3783:"85acf415a",3790:"48507d8e2",3793:"80c78426a",3807:"695483424",3917:"842a13bda",3937:"501f20c76",3975:"aa72e136b",3983:"456128d2f",4006:"328a04432",4053:"a85669589",4060:"dd6981255",4067:"ca07aefc3",4079:"86954cb7a",4091:"d4376951c",4109:"e8c7e4e23",4144:"ee17c0a9f",4152:"9c2387180",4211:"63b78fdd9",4213:"0900cb6f6",4275:"8c4cea611",4288:"a169eefa0",4345:"4e2a698bd",4352:"e45e90ed9",4413:"2d7e26268",4461:"dac3d7ddd",4475:"7b233af85",4518:"5ac8a75b1",4530:"74e271c53",4547:"71d152b32",4619:"b784cceec",4639:"41bfe753f",4682:"299572c3a",4708:"f57af809b",4747:"45bb4f448",4759:"d0eea5dea",4765:"9c62c757b",4827:"6af44507c",4945:"4ed288df8",4980:"06c263576",4986:"9513be3a2",4996:"fa2150bdc",5013:"4bf8ee1d1",5061:"f14eeda9b",5069:"f6c02ca43",5075:"2056fc43a",5105:"4456c164b",5109:"27d90f74a",5147:"136521c83",5189:"c9257ff6d",5224:"4d4d6fcfb",5225:"bcebe052c",5235:"6f4f1dbc9",5253:"964bc55d1",5283:"5b6d33023",5302:"d637d058f",5338:"70af29ee2",5355:"da5be057d",5394:"9b70335f4",5510:"1f58579b6",5539:"b6d6e9b60",5542:"78cbe5698",5559:"312752ab1",5560:"c8a8d44f0",5566:"efa6d0ff5",5570:"6e5044415",5580:"9c7c354f8",5622:"14f876c62",5629:"87b02d47d",5633:"f54b37f54",5640:"168b89014",5661:"3b3787ce9",5667:"27786c61c",5671:"4de89b378",5680:"b8975001a",5740:"5132240ec",5812:"a38fcd8b8",5847:"ed9a4d3de",5860:"6bb1ea3a6",5868:"014988b1c",5889:"8c1a330d4",5896:"3edcfc75e",5942:"5dec157aa",5949:"e4f536cb8",5981:"39b81601c",6042:"88284a08a",6091:"a384722ca",6135:"d417c482d",6148:"cc1032b39",6192:"52400d5a3",6195:"1449f3766",6202:"f334fa981",6208:"42675ea40",6264:"05d4233dd",6289:"ce7cd4dd7",6332:"2e33bd74d",6353:"3daadb5af",6394:"f1fe5c133",6466:"3001268fd",6474:"aae7bf353",6537:"97b4c1210",6542:"64fcb9748",6550:"368b0995c",6552:"c20906798",6555:"5250be72c",6604:"61876b8f0",6613:"0d9ae4f2e",6628:"bd5163a33",6631:"92b06a3e1",6652:"93a6037b1",6690:"ec9374bd0",6709:"7de2077bd",6728:"64ca96a57",6746:"ae7bec4c6",6782:"fdda34dc8",6807:"f87938fa2",6815:"62e323090",6831:"7a8a8a5dc",6852:"12919d9f6",6856:"988a9ca6f",6872:"40ad7d0c8",6873:"4addf9039",6886:"6488e5574",6917:"9107dd42e",6929:"62c44e747",6987:"35c0e59c9",7040:"0df062921",7043:"7b5bbb561",7068:"290951b76",7085:"52c434cef",7114:"6c4c16736",7223:"f70234223",7248:"1a57770a3",7302:"64184d746",7374:"fe2c2b671",7386:"d79ff97b9",7528:"ff286c217",7539:"4c9e098f8",7556:"d6ce58f5d",7602:"cb86c5b56",7671:"d4d05fe36",7692:"cd4eab18f",7714:"f4d7f16dd",7721:"5c74d3315",7802:"4619b2b7e",7810:"e9c7aafda",7843:"b625592f8",7877:"bd58252e1",7886:"993057df2",8048:"e03038cbf",8075:"70ca9485a",8086:"678b47d27",8218:"6941aeab2",8278:"dd960de3f",8279:"0e0faef1a",8336:"a87f64292",8340:"272cd7f37",8357:"795a042d7",8361:"2f83142b8",8365:"196e4950b",8426:"28cc60969",8474:"c45de7cd2",8482:"ef228568e",8486:"c8020dbc2",8528:"f4fa1a918",8597:"79299608b",8638:"67efc362c",8643:"c0834507a",8650:"6985994d1",8671:"3efa1bab7",8689:"72cdd22c8",8726:"a96781e8a",8922:"856b65717",8975:"4820cfe8a",8981:"2cf86847f",8982:"7a124d2a3",8987:"e2bd758b5",8997:"8db2e133e",9007:"f595c2d2f",9009:"d52134058",9013:"06466a596",9014:"1b92ed779",9026:"643ced7f0",9038:"4b5c2976c",9097:"3ee00271b",9123:"22029311b",9186:"6b20285da",9287:"d65c58db3",9302:"6d5bafc2c",9304:"edd4b3287",9319:"032dfb046",9326:"2048b3823",9431:"df476ccf9",9434:"74364de37",9449:"8d7eb247c",9451:"79d97a4bc",9461:"f41a331dd",9486:"5360a392e",9499:"5a98d7bdf",9509:"3c6d4b955",9523:"1c48fee6a",9604:"a010613a1",9629:"a5acb5a67",9697:"f778f2b66",9718:"c2dc08e89",9724:"5fed5c62f",9765:"3f5a4015c",9766:"a68f8807d",9773:"94d28c250",9778:"54d0c054c",9817:"9ed9d5871",9847:"a8e2b1dd7",9907:"2ee70b474",9942:"2b16adf6e",9947:"4aeed1b66",9964:"cb076de53"}[e]+".vknext.js",__webpack_require__.miniCssF=e=>7397===e?"styles/c6bb8e93e.vknext.css":"styles/"+{33:"a7f9c4f52",70:"0243a299b",113:"9bdb00890",134:"ab009139e",192:"ce5c43818",195:"2ad83368f",214:"a7986dab4",225:"469a6ab23",237:"14a6c3353",382:"6a64ca490",404:"637b93fa4",430:"c53b16b31",661:"234acd87b",681:"1fd3bb2a4",690:"7659efee7",697:"9bdb00890",717:"eae63f2b0",781:"a132b0a68",851:"4d8400eb7",956:"b8dafc98f",959:"bbcc14b03",1062:"612bfadbc",1077:"5a03757f2",1109:"83ab3b697",1376:"194493f13",1429:"a58d57ed3",1475:"4b9e7e34f",1600:"c45ee5bba",1825:"13a8a92bc",1843:"27ab07a0c",1909:"a72deb310",2031:"c7eb8c497",2069:"49e8c8000",2130:"3e6ec0f77",2135:"788541c79",2139:"99ca9fa4d",2204:"07795fcff",2214:"194493f13",2251:"cf00a6e67",2268:"e6009bee4",2338:"ae2e3cfb9",2342:"0e7ce3424",2350:"8946d7706",2402:"8afa86896",2418:"7ae8afc29",2461:"fa513ea77",2539:"0282921e0",2591:"4ab18dc9f",2606:"4d8400eb7",2622:"97a2b5a2d",2721:"4d8400eb7",2725:"0e7ce3424",2797:"4983d584d",2913:"bbcc14b03",2957:"bbcc14b03",3023:"bbcc14b03",3097:"29e54bbb7",3116:"f0fbe75fc",3158:"e53927e6e",3179:"3a08f9182",3265:"af1725ecb",3301:"f72206c19",3386:"1799f175d",3456:"75b5e6838",3515:"3e6ec0f77",3600:"496ec3d0c",3622:"e340d959b",3639:"234acd87b",3783:"496ec3d0c",3793:"cfac4d82e",3937:"53c8cd219",4006:"47d4e1f2d",4060:"d6397524e",4067:"bbcc14b03",4109:"68f2d1bd4",4152:"549173a50",4345:"6a5bac0db",4461:"bbcc14b03",4475:"0e7ce3424",4530:"03d49eaef",4682:"ded6a94d0",4708:"b1a49f153",4827:"0e7ce3424",4986:"0f7a520fa",5013:"194493f13",5075:"4d75826f6",5109:"53fad54b2",5225:"25c494662",5235:"ea4b6c3ae",5355:"77fc2da94",5510:"af80f2bb1",5539:"604f9d45e",5542:"bbcc14b03",5559:"1f4746b8e",5570:"83ab3b697",5622:"194493f13",5661:"b78d7f500",5671:"a1696f0dd",5680:"9b64117ef",5847:"2416801d3",5868:"194493f13",5889:"9db0a8690",5896:"569f26355",5942:"1f4746b8e",5949:"0e7ce3424",6042:"194493f13",6135:"cafea053b",6148:"4177ccc11",6195:"b770f1db7",6202:"89134dbc7",6353:"4bf302772",6466:"07c99f2b8",6474:"3864822a2",6537:"f402ffa47",6555:"806e2960e",6604:"baeead996",6782:"f35100638",6807:"93c2c67fd",6831:"2416801d3",6872:"44901bdad",6886:"bbcc14b03",6917:"d571ab3ec",6929:"515d3fd81",6987:"78535f73a",7040:"0d809f64a",7043:"ac9f3737d",7068:"194493f13",7091:"f1b2910fc",7223:"0e7ce3424",7374:"c8258f0dc",7556:"1c9ea0da7",7602:"bfc29d630",7671:"ea9a7ee5e",7721:"ba00dfd48",7810:"09bea4806",7843:"65740f85d",8075:"83ab3b697",8086:"a7986dab4",8218:"64119ac9e",8336:"a5dbd33cf",8340:"734cf4fc6",8361:"bbcc14b03",8474:"4d04339a3",8482:"3c183786f",8528:"5fe4575a7",8689:"5d0cf17f7",8726:"27ab07a0c",8975:"551a2ab05",8981:"c29aeb207",8997:"f18e8a10e",9007:"569f26355",9013:"c980bfa8c",9026:"f5281f08e",9123:"bae4f2e8b",9186:"932247161",9319:"bbcc14b03",9449:"d3a08083f",9451:"c893cf708",9461:"515d3fd81",9509:"bbcc14b03",9697:"194493f13",9765:"788541c79",9766:"3c183786f",9847:"73d203198",9907:"bed222544",9942:"0e7ce3424"}[e]+".vknext.css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="vknext:",__webpack_require__.l=(e,t,s,n)=>{if(inProgress[e])inProgress[e].push(t);else{var r,a;if(void 0!==s)for(var o=document.getElementsByTagName("script"),i=0;i<o.length;i++){var c=o[i];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+s){r=c;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.setAttribute("data-webpack",dataWebpackPrefix+s),r.src=e),inProgress[e]=[t];var d=(t,s)=>{r.onerror=r.onload=null,clearTimeout(l);var n=inProgress[e];if(delete inProgress[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach(e=>e(s)),t)return t(s)},l=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),a&&document.head.appendChild(r)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="https://ext.vknext.net/v/14.8.0/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise((t,s)=>{var n=__webpack_require__.miniCssF(e),r=__webpack_require__.p+n;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var r=(o=s[n]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){var o;if((r=(o=a[n]).getAttribute("data-href"))===e||r===t)return o}})(n,r))return t();((e,t,s,n,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",__webpack_require__.nc&&(a.nonce=__webpack_require__.nc),a.onerror=a.onload=s=>{if(a.onerror=a.onload=null,"load"===s.type)n();else{var o=s&&s.type,i=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=i,a.parentNode&&a.parentNode.removeChild(a),r(c)}},a.href=t,(e=>{if("LINK"===e.tagName&&"undefined"!=typeof GM_addElement){const t=GM_addElement("link",{rel:e.rel,type:e.type,href:e.href});return t.onerror=e.onerror,void(t.onload=e.onload)}(document.head||document.documentElement).appendChild(e)})(a)})(e,r,0,t,s)}),t={1473:0};__webpack_require__.f.miniCss=(s,n)=>{t[s]?n.push(t[s]):0!==t[s]&&{33:1,70:1,113:1,134:1,192:1,195:1,214:1,225:1,237:1,382:1,404:1,430:1,661:1,681:1,690:1,697:1,717:1,781:1,851:1,956:1,959:1,1062:1,1077:1,1109:1,1376:1,1429:1,1475:1,1600:1,1825:1,1843:1,1909:1,2031:1,2069:1,2130:1,2135:1,2139:1,2204:1,2214:1,2251:1,2268:1,2338:1,2342:1,2350:1,2402:1,2418:1,2461:1,2539:1,2591:1,2606:1,2622:1,2721:1,2725:1,2797:1,2913:1,2957:1,3023:1,3097:1,3116:1,3158:1,3179:1,3265:1,3301:1,3386:1,3456:1,3515:1,3600:1,3622:1,3639:1,3783:1,3793:1,3937:1,4006:1,4060:1,4067:1,4109:1,4152:1,4345:1,4461:1,4475:1,4530:1,4682:1,4708:1,4827:1,4986:1,5013:1,5075:1,5109:1,5225:1,5235:1,5355:1,5510:1,5539:1,5542:1,5559:1,5570:1,5622:1,5661:1,5671:1,5680:1,5847:1,5868:1,5889:1,5896:1,5942:1,5949:1,6042:1,6135:1,6148:1,6195:1,6202:1,6353:1,6466:1,6474:1,6537:1,6555:1,6604:1,6782:1,6807:1,6831:1,6872:1,6886:1,6917:1,6929:1,6987:1,7040:1,7043:1,7068:1,7091:1,7223:1,7374:1,7397:1,7556:1,7602:1,7671:1,7721:1,7810:1,7843:1,8075:1,8086:1,8218:1,8336:1,8340:1,8361:1,8474:1,8482:1,8528:1,8689:1,8726:1,8975:1,8981:1,8997:1,9007:1,9013:1,9026:1,9123:1,9186:1,9319:1,9449:1,9451:1,9461:1,9509:1,9697:1,9765:1,9766:1,9847:1,9907:1,9942:1}[s]&&n.push(t[s]=e(s).then(()=>{t[s]=0},e=>{throw delete t[s],e}))}}})(),(()=>{var e={1473:0};__webpack_require__.f.j=(t,s)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else if(7091!=t){var r=new Promise((s,r)=>n=e[t]=[s,r]);s.push(n[2]=r);var a=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(a,s=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,n[1](o)}},"chunk-"+t,t)}else e[t]=0};var t=(t,s)=>{var n,r,[a,o,i]=s,c=0;if(a.some(t=>0!==e[t])){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(i)i(__webpack_require__)}for(t&&t(s);c<a.length;c++)r=a[c],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=(void 0!==window?window:self).webpackChunkvknext=(void 0!==window?window:self).webpackChunkvknext||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),__webpack_require__.nc=void 0,__webpack_require__(92103);var __webpack_exports__=__webpack_require__(96939)})()})("undefined"!=typeof window&&window instanceof Window?[window,window]:"undefined"!=typeof unsafeWindow?[unsafeWindow,unsafeWindow]:[window,window]);