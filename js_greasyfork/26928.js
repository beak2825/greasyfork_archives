// ==UserScript==
// @name          MCMan - Browser Helper
// @description   Buttons for easy download into MCMan.
// @version       0.1.0
// @namespace     http://akzyra.peace.rip/mcman/
// @include       https://minecraft.curseforge.com/projects/*/files/*
// @grant         GM_addStyle
// @downloadURL https://update.greasyfork.org/scripts/26928/MCMan%20-%20Browser%20Helper.user.js
// @updateURL https://update.greasyfork.org/scripts/26928/MCMan%20-%20Browser%20Helper.meta.js
// ==/UserScript==
window.mcman_run = function() {
    mcman_log("---------- START ----------");
    var head, style;
    head = document.getElementsByTagName("head")[0];
    if (!head) {
        return;
    }
    style = document.createElement("style");
    style.type = "text/css";
    style.innerHTML = `
.mcman-btn {
  background-image: url(data:image/png;base64,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AAABAAAAAQAAAAEAAAEBAQAAAAAAAAAAAAAAAAABAQEAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAEBAAAAAQAAAAAAAAIAAAAAAAAAAAABAAAAAAEAAAAAAAAAAAAAAAAAAAEAAAABAAABAQEAAAEAAAAAAAAAAAAAAAAAAAABAAABAQEAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAEAAAEAAAAAAAAAAAAAAgAAAAAAAQEAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAQEBAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAABAQEAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEBAAAAAAACAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzI/eAAAAAADMj94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAAAAAAzI/eAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAIAAAAAAP//AAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAP///wAA/wAAAAAAAAD/AAAA/wAAAP8AAAAAAAAA/wAA////AAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAD//wAAAAAABAAAAAAAAAAAAP8AAAAA/wAAAAAAAAAAAAAAAAAA/wAAAAAAAP8A/wABAAEAAAAAAAAAAAAAAAAAAAAAAP///wAA/wAAAP8AAAAAAAAAAAAAAAAAAAAA/wAA/wAAAAAAAAAAAAAEAAAAAAD/AAD//wAAAf8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAP8A/wAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAP8AAP//AAAA/wAAAAAAAAQAAAAAAP8AAAD/AAAA/gAAAAAAAAAAAAAAAAAA//4AAAEBAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAP//AAAAAAAAAAAAAAAAAAAA/gAAAP8AAAD/AAAAAAAAAgAAAAD//wAAAP//AP//AAAAAAAAAAAAAMqE3AAA//8A//7/AP/+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAP/+AAD//v8AAP//AMqE3AAAAAAAAAAAAP//AAAA//8A//8AAAAAAAACAAAAAAD+/wAA/gAAAP7/AAAAAADJgNsA//4AAAD9AAAA/gAAAP7/AP/+/wD//v8A//7/AP/+/wD//v8AAP7/AAD+AAAA/QAA//4AAMmA2wAAAAAAAP7/AAD+AAAA/v8AAAAAAAEZOR3/+RzzAAACAQABAgAAAAIAAAACAQABAQAAAAIAAAABAAAAAAEAAAEAAAEAAAAAAAAAAAAAAP8AAAAA/wAAAAD/AAD/AAAA/gAA//8AAAD+/wAA/gAA//4AAAD+/wAH5A0ABAAAAO4A/AESAAT/AP8AAQABAAAAAAD/AP8BAQAA/wAAAQEAAAAB/wAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAA/wAA//8AAAD/AAAA//8AAP4AAP/+AAAA/v8AAPwBAAAAAO4DDR0PGgH+ADj+Bf4AAAH/AAD/AAAAAAEAAf8AAAD/AAAA/wAAAP4AAAD/AQAA/wAAAP8AAAD/AAAA/wAAAP7/AAD/AAAA/gAAAP4AAP/+AAAA/v8AAP8AAAD8AQAE8gYAAvsDkwQAAAB2A/YGAQP2Bl0AAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7wAAAKMAAAB9AQAA///nvS1xc5O/DgAAAABJRU5ErkJggg==);
  width: 25px!important;
  height: 25px!important;
  margin-left: 5px!important;
  border-radius: 0!important;
  border: 0 solid #000;
}
.mcman-btn::before {
  content: " " !important;
}

.mcman-btn:hover {
  background-position: 0 0;
  filter: saturate(250%) hue-rotate(60deg);
}

.mcman-btn-wide {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAACe1JREFUeAEA3Qki9gEZOR0GAAAAiwAAAFwAAAASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7wAAAKMAAAB1BAAAAIr9Cvpu/A76AAAE/wAAAQAAAAIBAAEBAAAAAQAAAAEAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAP8AAAD/AAD//wAAAP7/AAD/AAAA/AERBPIGbgP2BvcBGTkd7fkY9BIABP8AAAIBAAECAAAAAgAAAAEBAAABAAABAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAD//wAAAP8AAAD//wAA/gAA//4AAAD+/wAA/AEAB+gM7gQAAAASAAT/AAACAQABAgAAAAIAAAACAQABAQAAAAIAAAABAAAAAAEAAAEAAAEAAAAAAAAAAAAAAP8AAAAA/wAAAAD/AAH/AAAA/gAA//8BAAAA/wABAAAA/wABAAAE/wAAAAASBAAAAAAAAQAAAQIAAAACAAABAwEAN4ElAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMqG3AA2eiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyX/bAP8A/wABAAAA//8AAAAAAAABGTkd//kf9AABAwAAAAIBADiCJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyH7bAAD+/wD//QAAB+EMAAIAAAAAAQEAAAABAQABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAEBAAEBAAAAAAAABAAAAAAAAQAAAAEAAAACAAAAAAAAAAAAAAAAAADLid0AAAEAAAABAAAAAQAANXQjAAAAAAAAAAAAy4zdAAD/AAAA/wAAAP8AADV3IwAAAAAAAAAAAAACAAAA/wAAAAEAAAAAAAACAAAAAAABAAABAQAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAEBAQAAAAAAAAAAAAAAAAABAQEAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAEBAAAAAQAAAAAAAAIAAAAAAAAAAAABAAAAAAEAAAAAAAAAAAAAAAAAAAEAAAABAAABAQEAAAEAAAAAAAAAAAAAAAAAAAABAAABAQEAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAEAAAEAAAAAAAAAAAAAAgAAAAAAAQEAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAQEBAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAABAQEAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEBAAAAAAACAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzI/eAAAAAADMj94AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAAAAAAzI/eAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAIAAAAAAP//AAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAP///wAA/wAAAAAAAAD/AAAA/wAAAP8AAAAAAAAA/wAA////AAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAD//wAAAAAABAAAAAAAAAAAAP8AAAAA/wAAAAAAAAAAAAAAAAAA/wAAAAAAAP8A/wABAAEAAAAAAAAAAAAAAAAAAAAAAP///wAA/wAAAP8AAAAAAAAAAAAAAAAAAAAA/wAA/wAAAAAAAAAAAAAEAAAAAAD/AAD//wAAAf8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAP8A/wAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAP8AAP//AAAA/wAAAAAAAAQAAAAAAP8AAAD/AAAA/gAAAAAAAAAAAAAAAAAA//4AAAEBAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAP//AAAAAAAAAAAAAAAAAAAA/gAAAP8AAAD/AAAAAAAAAgAAAAD//wAAAP//AP//AAAAAAAAAAAAAMqE3AAA//8A//7/AP/+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAP/+AAD//v8AAP//AMqE3AAAAAAAAAAAAP//AAAA//8A//8AAAAAAAACAAAAAAD+/wAA/gAAAP7/AAAAAADJgNsA//4AAAD9AAAA/gAAAP7/AP/+/wD//v8A//7/AP/+/wD//v8AAP7/AAD+AAAA/QAA//4AAMmA2wAAAAAAAP7/AAD+AAAA/v8AAAAAAAEZOR3/+RzzAAACAQABAgAAAAIAAAACAQABAQAAAAIAAAABAAAAAAEAAAEAAAEAAAAAAAAAAAAAAP8AAAAA/wAAAAD/AAD/AAAA/gAA//8AAAD+/wAA/gAA//4AAAD+/wAH5A0ABAAAAO4A/AESAAT/AP8AAQABAAAAAAD/AP8BAQAA/wAAAQEAAAAB/wAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAA/wAA//8AAAD/AAAA//8AAP4AAP/+AAAA/v8AAPwBAAAAAO4DDR0PGgH+ADj+Bf4AAAH/AAD/AAAAAAEAAf8AAAD/AAAA/wAAAP4AAAD/AQAA/wAAAP8AAAD/AAAA/wAAAP7/AAD/AAAA/gAAAP4AAP/+AAAA/v8AAP8AAAD8AQAE8gYAAvsDkwQAAAB2A/YGAQP2Bl0AAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7wAAAKMAAAB9AQAA///nvS1xc5O/DgAAAABJRU5ErkJggg==);
  background-color: #182f1b;
  background-repeat:no-repeat;
  border: 0 solid #000;
  color: #4bdf37 !important;
  height:25px;
  line-height:18px;
}

.mcman-btn-wide > span {
  color: #4bdf37 !important;
}

.mcman-btn-wide::after {
  content: " " !important;
  background-image: none;
  width: 25px!important;
  height: 25px!important;
  border: 0 solid #000;
  background-color #182f1b;
}
.mcman-btn-wide::before {
  content: " " !important;
  background-color #182f1b;
} 
.mcman-btn-wide:hover {
  background-position: 0 0;
  filter: saturate(250%) hue-rotate(60deg);
}
`;
    
    var url = window.location.href;
    var isFile = url.search("/files/");
    if(isFile > 0) {
        head.appendChild(style);
        mcman_log("Injected style");
        mcman_addWideDL();
    } else {
        mcman_log("Not a file page, doing nothing.");
    }
    mcman_log("---------- DONE ----------");

};

window.mcman_addWideDL = function() {
    var buttons = document.getElementsByClassName("project-file-download-button-large");
    var btn = buttons[0];
    if(!btn) {
        return false;
    }
    var new_btn = document.createElement("a");
    new_btn.href = mcman_createLink();
    new_btn.className = "button fa-icon-download mcman-btn-wide";    
    
    var span = document.createElement("span");
    span.textContent = "MCMan";
       
    var div = document.createElement("div");
    div.className = "project-file-download-button-large";
    
    new_btn.appendChild(span);
    div.appendChild(new_btn);
    
    btn.parentNode.appendChild(div);
    mcman_log("Added MCMan DL-Button");
    return true;
};

window.mcman_createLink = function() {
    var log = true;
    var filename, md5, mcVersionsString, cfFileId, cfProjectSlug, cfUploaderSlug, type;
    var url = window.location.href;
    var split = url.split("/");
    var mcman_url = "mcman:/";
    if(split[2] == "minecraft.curseforge.com" && split[3] == "projects"){
         cfProjectSlug = split[4];
         cfFileId = split[6];
    }
    if(log) {
        mcman_log("    Project:        " + cfProjectSlug);
        mcman_log("    File ID:        " + cfFileId);
    }
    var detailsUL = document.getElementsByClassName("details-info")[0].children[0];
    type = document.getElementsByClassName("project-file-release-type")[0].children[0].classList;
    if(log) mcman_log("    Type:           " + type);
    
    filename = detailsUL.children[0].children[1].innerText;
    if(log) mcman_log("    Filename:       " + filename);
    
    cfUploaderSlug = detailsUL.children[1].children[1].children[0].children[1].innerText;
    if(log) mcman_log("    Uploader:       " + cfUploaderSlug);
    
    md5 = detailsUL.children[4].children[1].children[0].innerText
    if(log) mcman_log("    MD5:            " + md5);
    
    //MC Versions
    mcVersionsString = "";
    var verSec = document.getElementsByClassName("details-versions")[0];
    var verList = null;
    var l = verSec.children.length;
    var i = 0;
    try {
    while(i < l){
        if(verSec.children[i].innerText.includes("Minecraft") ) {
            verList = verSec.children[i+1].children;
            for(var j = 0; j < verList.length; j++){
                mcVersionsString += verList[j].innerText + ",";
            }
            
            i += 2;
        } else {
            break;
        }
    }
    if(mcVersionsString.length  > 1)
        mcVersionsString = mcVersionsString.slice(0, -1);
    } catch(err) {
    console.error("[McMan] Error: "+ err.message)
}
    
    // Info log
    if(log) 
        mcman_log("    MC Versions:    " + mcVersionsString);
    else
        mcman_log("Created McMan Link");     
    
    mcman_url += cfProjectSlug + "/";
    mcman_url += cfFileId + "/";
    mcman_url += filename + "/";
    mcman_url += md5 + "/";
    mcman_url += cfUploaderSlug + "/";
    mcman_url += mcVersionsString;

    return mcman_url;
};

window.mcman_log = function(text) {
    if(console.info)
        console.info("%c[McMan] " + text, "color: #4bf442;");
    else
        console.log("%c[McMan] " + text, "color: #4bf442;");
}

mcman_run();
