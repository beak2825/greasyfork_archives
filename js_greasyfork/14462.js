// ==UserScript==
// @name pt_frame_index
// @namespace 
// @description 96160320dl
// @include http://music.163.com/*
// @grant none
// @version 0.0.7
// @downloadURL https://update.greasyfork.org/scripts/14462/pt_frame_index.user.js
// @updateURL https://update.greasyfork.org/scripts/14462/pt_frame_index.meta.js
// ==/UserScript==
(function(){var be=NEJ.P,bZ=NEJ.O,fP=NEJ.R,Fp=be("nej.e"),bj=be("nej.v"),bv=be("nej.ut"),rW;if(!!bv.HM)return;bv.HM=NEJ.C();rW=bv.HM.bN(bv.eW);rW.dv=function(){this.hP={onchange:this.wZ.bh(this),ondragend:this.wZ.gz(this,!0)};this.dF()};rW.cw=function(bf){this.cA(bf);this.hP.view=Fp.bw(bf.track);this.hP.body=Fp.bw(bf.slide);this.hP.mbar=this.hP.view;this.Mk(bf.range);this.dA([[this.hP.view,"mousedown",this.brE.bh(this)]]);this.lb=bv.yo.bL(this.hP)};rW.cX=function(){this.dc();this.lb.ch();delete this.lb;delete this.iS;delete this.hP.view;delete this.hP.body;delete this.hP.mbar};rW.wZ=function(bc,iy){var XG=bc.left/this.iS.x[1],XH=bc.top/this.iS.y[1],XI=this.iS.x,XJ=this.iS.y;this.bG("onchange",{stopped:!!iy,x:{rate:XG,value:XG*(XI[1]-XI[0])},y:{rate:XH,value:XH*(XJ[1]-XJ[0])}})};rW.brE=function(bc){var cl=Fp.mV(this.hP.view),XK={x:bj.lB(bc),y:bj.oj(bc)},dP={x:Math.floor(this.hP.body.offsetWidth/2),y:Math.floor(this.hP.body.offsetHeight/2)};this.lb.fJ({top:XK.y-cl.y-dP.y,left:XK.x-cl.x-dP.x})};rW.Mk=function(gl){var sf;if(!!this.iS){var kt=this.lb.KI();sf={x:kt.left/this.iS.x[1],y:kt.top/this.iS.y[1]}}gl=gl||bZ;var brB=(gl.x||fP)[1]||this.hP.view.clientWidth-this.hP.body.offsetWidth,brr=(gl.y||fP)[1]||this.hP.view.clientHeight-this.hP.body.offsetHeight;this.iS={x:gl.x||[0,brB],y:gl.y||[0,brr]};if(!!sf)this.fJ(sf);return this};rW.fJ=function(sf){sf=sf||bZ;this.lb.fJ({top:this.iS.y[1]*(sf.y||0),left:this.iS.x[1]*(sf.x||0)})}})();
(function(){var bv=NEJ.P("nej.ut"),XO;if(!!bv.Bd)return;bv.Bd=NEJ.C();XO=bv.Bd.bN(bv.HM);XO.dv=function(){this.dF();this.hP.direction=2}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bv=be("nej.p"),eQ=be("nej.ui"),ib=be("nej.ut"),bEZ=be("nm.w"),bb,bJ;bEZ.rP=NEJ.C();bb=bEZ.rP.bN(eQ.ic);bJ=bEZ.rP.du;bb.dv=function(){this.dF()};bb.cw=function(bf){this.cA(bf);this.bB=Fp.bw(bf.content);this.hn=Fp.bw(bf.slide);this.fw=Fp.bw(bf.track);this.Zk=bf.speed;this.Kb=this.bB.scrollHeight-this.bB.clientHeight;Fp.bY(this.hn,"height",(this.bB.clientHeight/this.bB.scrollHeight*parseInt(Fp.bIU(this.fw,"height"))||0)+"px");if(this.bB.scrollHeight<=this.bB.clientHeight)Fp.bY(this.hn,"display","none");else Fp.bY(this.hn,"display","block");this.oK=ib.Bd.bL({slide:this.hn,track:this.fw,onchange:this.JT.bh(this)});if(bv.dp.browser!="firefox")this.dA([[this.bB,"mousewheel",this.si.bh(this)]]);else{this.bB.addEventListener("DOMMouseScroll",this.si.bh(this),false)}};bb.cX=function(){this.dc();this.oK.ch();delete this.bB;delete this.hn;delete this.fw;delete this.iS;delete this.Zk};bb.JT=function(bc){this.bB.scrollTop=parseInt(this.Kb*bc.y.rate)};bb.si=function(bc){bj.cG(bc);this.Kb=this.bB.scrollHeight-this.bB.clientHeight;var dP=0,xj,dT,bim;dT=parseInt(this.fw.clientHeight)-parseInt(Fp.bIU(this.hn,"height"));dP=bc.wheelDelta?bc.wheelDelta/120:-bc.detail/3;xj=parseInt(Fp.bIU(this.hn,"top"))-dP*this.Zk;if(xj<0)xj=0;if(xj>dT)xj=dT;Fp.bY(this.hn,"top",xj+"px");bim=parseInt(Fp.bIU(this.hn,"top"));this.oK.bG("onchange",{y:{rate:bim/dT}})};bb.lO=function(){this.Kb=this.bB.scrollHeight-this.bB.clientHeight;this.oK.fJ({x:0,y:0});Fp.bY(this.hn,"height",this.bB.clientHeight/this.bB.scrollHeight*parseInt(this.fw.clientHeight)+"px");this.oK.Mk({x:[],y:[0,this.fw.clientHeight-parseInt(Fp.bIU(this.hn,"height"))]});if(this.bB.scrollHeight<=this.bB.clientHeight)Fp.bY(this.hn,"display","none");else Fp.bY(this.hn,"display","block")};bb.fJ=function(hO){this.oK.fJ(hO)};bb.sr=function(JE){var bpI=parseInt(Fp.bIU(this.hn,"height"));var bpH=parseInt(Fp.bIU(this.fw,"height"));var vc=bpH-bpI;var bim=parseInt(vc*JE)+"px";Fp.bY(this.hn,"top",bim)};bb.Zv=function(){if(this.bB.scrollHeight<=this.bB.clientHeight)return;var JE=this.bB.scrollTop/(this.bB.scrollHeight-this.bB.clientHeight);this.sr(JE)};bb.byA=function(){if(this.oK)this.oK.Mk()}})();
(function(){var be=NEJ.P,bZ=NEJ.O,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bK=be("nej.ut"),bq=be("nm.x"),bp=be("nm.d"),xq=be("nm.w.player.log");var bwT=bp.qE.bL();var LogLevel={ERROR:10,INFO:6,DEBUG:2};var AZ=function(bDM,cD,bNu){var fc=bq.gN("{0} {1} {2}",bm.sW(new Date,"yyyy-MM-dd HH:mm:ss"),bDM,cD);if(bNu==LogLevel.ERROR){bwT.tq("playerror",{message:cD})}if(bNu>=LogLevel.INFO){bwT.bPG(fc)}if(location.hostname.indexOf("igame.163.com")!=-1){console.log(fc)}};xq.cP=function(){AZ("PLAY_ERROR",bq.gN.apply(null,arguments),LogLevel.ERROR)};xq.sn=function(){AZ("PLAY_INFO",bq.gN.apply(null,arguments),LogLevel.INFO)};xq.bPI=function(){AZ("PLAY_DEBUG",bq.gN.apply(null,arguments),LogLevel.DEBUG)}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bK=be("nej.ut"),bm=be("nej.u"),bEZ=be("nm.w"),yI=be("flash.cb"),bb;var MediaWrap=function(bKN,bNy){var zp=this,ez=["loadedmetadata","play","pause","ended","waiting","playing","timeupdate","progress","stalled","error"];var el=function(bc){bj.bG(zp,bc.type,bc)};bK.hh.bL({element:this,event:ez});bm.bLt(ez,function(bDM){if(bNy=="flash"){yI[bDM]=el;bKN.addCallback(bDM,"flash.cb."+bDM)}else{bj.bs(bKN,bDM,el)}});this.type=bNy;this.play=function(){if(bNy=="flash"){bKN.as_play()}else{bKN.play()}};this.pause=function(){if(bNy=="flash"){bKN.as_pause()}else{bKN.pause()}};this.load=function(){if(bNy=="flash"){bKN.as_load()}else{bKN.load()}};var btp=["Src","Duration","CurrentTime","Paused","Ended","ReadyState","Volume","Error","Buffered"];bm.bLt(btp,function(bX){var bNR="get"+bX,bNS="set"+bX;if(bNy=="flash"){this[bNR]=function(){return bKN[bNR]()};this[bNS]=function(value){bKN[bNS](value)}}else{var bOp=bX.slice(0,1).toLowerCase()+bX.slice(1);this[bNR]=function(){return bKN[bOp]};this[bNS]=function(value){bKN[bOp]=value}}},this)};bEZ.bPv=function(bDM,fF){var rB=bDM!="flash"?Fp.gH("audio"):null;if(rB&&rB.canPlayType&&rB.canPlayType("audio/mpeg")){fF(new MediaWrap(rB,"audio"))}else{Fp.qK({src:"/style/swf/CloudMusicPlayer.swf",hidden:true,params:{allowscriptaccess:"always"},onready:function(gh){fF(new MediaWrap(gh,"flash"))}.bh(this)})}}})();
(function(){var be=NEJ.P,bj=be("nej.v"),bH=be("nej.j"),bK=be("nej.ut"),bEZ=be("nm.w"),xq=be("nm.w.player.log"),bb;var DEFAULT_BR=320e3;var CDN_HOST_REG=/(m\d+\.music\.126\.net)/;var MAX_STALLED_RETRY=2;var MediaError={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4};var ErrorType={INFO_GET_ERR:1,NET_ERR:2,UNKNOWN_ERR:10};var LoadState={LOAD_START:1,LOADED_META:2,IN_RELOAD:3,IN_RE_GET_URL:4,IN_SWITCH_CDN:5};var RetryLevel={NONE:0,GET_URL:1,RELOAD:2,SWITCH_CDN:3};bEZ.ig=NEJ.C();bb=bEZ.ig.bN(bK.eW);bb.cw=function(bf){this.cA(bf);this.cs={};bEZ.bPv(bf.media,function(bKN){this.wx=bKN;xq.sn("media loaded: {0}",bKN.type);this.dA([[this.wx,"loadedmetadata",this.bPu.bh(this)],[this.wx,"ended",this.bPt.bh(this)],[this.wx,"waiting",this.bNB.bh(this)],[this.wx,"playing",this.bNT.bh(this)],[this.wx,"timeupdate",this.bPs.bh(this)],[this.wx,"progress",this.LO.bh(this)],[this.wx,"stalled",this.bPr.bh(this)],[this.wx,"error",this.jh.bh(this)]]);if(this.cs){if(this.cs.loadState==LoadState.LOAD_START){this.bNU()}else if(this.cs.volume!=null){this.wx.setVolume(this.cs.volume)}}}.bh(this));bH.cR("/api/cdns",{type:"json",onload:function(bc){if(bc.code){this.oc=bc.data}}.bh(this)});window.gplayer=this};bb.cX=function(){this.dc();delete this.cs};bb.bOq=function(eD){if(!eD)return;var bMV=this.cs.volume;if(this.wx){this.wx.pause()}this.cs={time:0,id:eD.id,duration:eD.duration/1e3,play:this.cs.play,stalledRetryCount:0};if(bMV!=null){this.cs.volume=bMV}this.cs.loadState=LoadState.LOAD_START;this.bOr(eD.id);xq.sn("play song id: {0}",eD.id)};bb.gJ=function(){if(this.cs.error){this.cs.error=null;if(this.cs.error==ErrorType.INFO_GET_ERR||this.bOs()){this.bOt()}else{this.bNC()}}else{if(this.wx&&this.cs.loadState==LoadState.LOADED_META){this.wx.play()}}this.cs.play=true;this.xy("play")};bb.hY=function(){if(this.wx){this.wx.pause()}this.cs.play=false;this.xy("pause")};bb.lu=function(cr){if(this.wx){this.wx.setCurrentTime(cr)}this.cs.time=cr;xq.sn("seek to: {0}",cr)};bb.bNV=function(){return this.cs.duration||0};bb.pn=function(){return!!this.cs.play};bb.jZ=function(bMM){this.cs.volume=bMM;if(this.wx){this.wx.setVolume(bMM)}};bb.bOu=function(){return this.cs.time};bb.bOr=function(){this.bNB();bH.cR("/api/song/enhance/player/url",{type:"json",query:{ids:JSON.stringify([this.cs.id]),br:DEFAULT_BR},onload:this.bOv.bh(this),onerror:this.bOv.bh(this)})};bb.bOv=function(bc){if(bc.code==200&&bc.data&&bc.data.length){var dD=bc.data[0];this.cs.mp3url=dD.url;this.cs.expireTime=(new Date).getTime()+dD.expi*1e3;this.bNU()}else{this.wx.setSrc("");this.cs.error=ErrorType.INFO_GET_ERR;this.xy("error",{code:this.cs.error});xq.cP("info load error")}};bb.bNU=function(){if(this.wx){var cg=this.cs.mp3url;if(this.cs.time>0&&(this.cs.loadState==LoadState.IN_RE_GET_URL||this.cs.loadState==LoadState.IN_RE_GET_URL)){cg+="#t="+this.cs.time}this.wx.setSrc(cg);xq.sn("load mp3: {0},loadState: {1}.",cg,this.cs.loadState)}};bb.bOw=function(){if(/#t=(\d+)$/.test(this.wx.getSrc())){return parseInt(RegExp.$1)||0}else{return 0}};bb.bNC=function(){var cr=parseInt(this.cs.time)||0,bPq=this.bOw();if(cr===bPq){this.wx.load()}else{this.wx.setSrc(this.cs.mp3url+"#t="+cr)}this.cs.loadState=LoadState.IN_RELOAD;this.bNB();xq.sn("reload from: {0}",cr)};bb.bOt=function(){this.cs.loadState=LoadState.IN_RE_GET_URL;this.bOr()};bb.bOx=function(){var tl=getHost(this.cs.mp3url);if(tl){for(var i=0;i>=0;i++){var nc=this.oc[i]||[],bu=nc.indexOf(tl);if(bu>=0&&nc.length>1){return nc[(bu+1)%nc.length]}}}function getHost(cg){if(CDN_HOST_REG.test(cg))return RegExp.$1}};bb.bPp=function(){this.cs.mp3url=this.cs.mp3url.replace(CDN_HOST_REG,this.bOx());this.cs.loadState=LoadState.IN_SWITCH_CDN;this.bNU();this.bNB()};bb.bPu=function(){if(this.cs.loadState==LoadState.LOAD_START){this.cs.loadState=LoadState.LOADED_META;this.xy("loadedmeta",{duration:this.cs.duration})}else{this.cs.loadState=LoadState.LOADED_META}if(this.cs.play){this.wx.play()}else{this.wx.pause()}if(this.cs.time&&parseInt(this.cs.time)!=this.bOw()){this.wx.setCurrentTime(this.cs.time)}this.bNW();this.bNT();xq.sn("loaded meta")};bb.bPt=function(){this.cs.ended=true;this.xy("ended")};bb.bNB=function(){if(!this.cs.waiting){this.cs.waiting=true;this.cs.waitTimestamp=+(new Date);this.xy("waiting")}};bb.bNT=function(){this.cs.waiting=false;this.cs.waitTimestamp=0;this.xy("playing")};bb.bPs=function(){if(this.cs.loadState!=LoadState.LOADED_META)return;var cr=this.wx.getCurrentTime();if(this.cs.waiting&&cr>this.cs.time){this.bNT()}this.cs.time=cr;this.xy("timeupdate",{time:this.cs.time,duration:this.cs.duration})};bb.LO=function(bc){if(this.cs.loadState!=LoadState.LOADED_META)return;var bn={};if(bc.data){bn.total=bc.data.total;bn.loaded=bc.data.loaded}else{var bNK=this.wx.getBuffered(),cr=this.wx.getCurrentTime(),nF=0;for(var i=0;i<bNK.length;i++){if(cr>bNK.start(i)&&cr<bNK.end(i)){nF=bNK.end(i);break}}bn.loaded=nF;bn.total=this.cs.duration}this.xy("progress",bn)};bb.bNW=function(){if(this.cs.retry){clearTimeout(this.cs.retry.tid);this.cs.retry=null}};bb.jh=function(){var cS=this.wx.getError();xq.cP("media error code: {0}",cS.code);if(cS.code==MediaError.MEDIA_ERR_NETWORK||cS.code==MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED){if(!this.cs.retry){this.cs.retry={level:RetryLevel.NONE}}else{window.clearTimeout(this.cs.retry.tid)}if(this.cs.retry.level==RetryLevel.NONE){if(this.bOs()){this.cs.retry.level=RetryLevel.GET_URL;this.bOt();xq.sn("Url expired, get url.")}else{this.cs.retry.level=RetryLevel.RELOAD;this.cs.retry.tid=setTimeout(this.bNC.bh(this),3e3);xq.sn("Reload mp3 3s later.")}}else if(this.cs.retry.level==RetryLevel.GET_URL){this.cs.retry.level=RetryLevel.RELOAD;this.cs.retry.tid=setTimeout(this.bNC.bh(this),3e3);xq.sn("Reload mp3 3s later.")}else if(this.cs.retry.level==RetryLevel.RELOAD){this.cs.retry.level=RetryLevel.SWITCH_CDN;if(this.bOx()){this.cs.retry.tid=setTimeout(this.bPp.bh(this),5e3);xq.sn("Switch CDN 5s later.")}else{this.cs.retry.tid=setTimeout(this.bNC.bh(this),5e3);xq.sn("Reload mp3 5s later.")}}else{this.bNW();this.hY();this.cs.error=ErrorType.NET_ERR;this.xy("error",{code:this.cs.error});xq.cP("error can not retry.")}}else{this.bNW();this.hY();this.cs.error=ErrorType.UNKNOWN_ERR;this.xy("error",{code:this.cs.error});xq.cP("error can not retry.")}};bb.bPr=function(){var vo=0,bOy=5e3;return function(){this.bNB();clearTimeout(vo);setTimeout(function(){var lk=+(new Date);if(this.cs.waiting&&lk-this.cs.waitTimestamp>=bOy&&this.cs.stalledRetryCount<MAX_STALLED_RETRY){xq.sn("stalled too long retry.");this.cs.stalledRetryCount++;this.bNC()}}.bh(this),bOy);xq.sn("stalled")}}();bb.bOs=function(){var lk=+(new Date);return lk>this.cs.expireTime};bb.xy=function(cv,bl){bj.bG(bEZ.ig,"playaction",{action:cv,data:bl||{}})};bK.hh.bL({element:bEZ.ig,event:["playaction"]})})();
(function(){var be=NEJ.P,bZ=NEJ.O,bm=be("nej.u"),bH=be("nej.j"),bq=be("nm.x");var SETTING_KEY="player-setting";var ri={mode:1,volume:.5,autoPlay:false,index:0,lock:false};ri=bH.vz(SETTING_KEY)||ri;bq.bOz=function(){return ri};bq.bND=function(bNX){if(bNX){ri=bNX;bH.yX(SETTING_KEY,bNX)}}})();
(function(){var be=NEJ.P,co=NEJ.F,bK=be("nej.ut"),bm=be("nej.u"),bj=be("nej.v"),bH=be("nej.j"),bp=be("nm.d"),bb;bp.gN({"binding-list":{url:"/api/user/bindings/{id}",type:"get",filter:function(bf){},format:function(bHN){return this.bsL(bHN.bindings)}}});bp.Xi=NEJ.C();bb=bp.Xi.bN(bp.gY);bb.dv=function(){this.dF()};bb.bsL=function(bk){var bu,eh,sx=[{type:1,title:"手机",icon:"mb",key:"cellphone",uidkey:"cellphone"},{type:2,title:"新浪微博",icon:"sn",key:"name",uidkey:"uid"},{type:0,title:"网易邮箱帐号",icon:"urs",key:"email",uidkey:"email"},{type:6,title:"腾讯微博",icon:"tc",key:"nick",uidkey:"openId"},{type:4,title:"人人",icon:"rr",key:"user.name",uidkey:"user.id"},{type:3,title:"豆瓣",icon:"db",key:"douban_user_name",uidkey:"douban_user_id"},{type:5,title:"QQ",icon:"qq",key:"nickname",uidkey:"uid"},{type:10,title:"微信",icon:"wx",key:"nickname",uidkey:"uid"}];bm.bLt(bk,function(bt){bu=bm.dY(sx,function(ord){return ord.type==bt.type});if(bu>=0){bt.tokenJson=bt.tokenJson||JSON.parse(bt.tokenJsonStr);bt.uid=query(bt.tokenJson,sx[bu].uidkey);bt.uname=query(bt.tokenJson,sx[bu].key);sx[bu].info=bt;if(bt.type==window.currentAccountType){eh=sx[bu];sx.splice(bu,1);sx.unshift(eh)}else if(bt.expired){sx[bu].info=null}}});return sx;function query(hw,bF){if(bF){bF=bF.split(".");for(var i=0;i<bF.length;i++){hw=hw[bF[i]];if(!hw)return}return hw}}}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bH=be("nej.j"),bZ=be("nej.o"),bm=be("nej.u"),bj=be("nej.v"),eQ=be("nej.ui"),bp=be("nm.d"),bq=be("nm.x"),bo=be("nm.l"),bb,bJ;bo.Xg=NEJ.C();bb=bo.Xg.bN(bo.eH,!0);bb.dv=function(){this.dF()};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.vO=bk[0];this.Nb=bk[1];this.Nc=bk[2];bj.bs(bk[3],"click",this.Nd.bh(this))};bb.bLv=function(){this.dn="m-unbind-alert"};bb.cw=function(bf){bf.parent=bf.parent||document.body;this.cA(bf);Fp.bY(this.vO,"display","");if(bf.type=="noicon"){Fp.bY(this.vO,"display","none")}else if(bf.type=="success"){Fp.fC(this.vO,"u-icn-88","u-icn-89")}else{Fp.fC(this.vO,"u-icn-89","u-icn-88")}this.Nb.innerHTML=bf.mesg||"";if(bf.mesg2){Fp.bR(this.Nc,"f-hide");this.Nc.innerHTML=bf.mesg2||""}else{Fp.bV(this.Nc,"f-hide")}};bb.cX=function(){this.dc()};bb.Nd=function(bc){this.bG("onnotice");this.cj()};bo.ep=function(bf){if(this.qe){this.qe.ch();delete this.qe}this.qe=bo.Xg.bL(bf);this.qe.bO()}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,bj=be("nej.v"),bm=be("nej.u"),bK=be("nej.ut"),bp=be("nm.d"),bq=be("nm.x"),bo=be("nm.l"),bF="RADIO_LATEST_MAP",bb,bJ;bp.gN({"radio_crt-list":{url:"/api/djradio/get/byuser",format:function(bHN,bf){var bk=bHN.djRadios;return{total:bk.length||0,list:bk}}},"radio_sub-list":{url:"/api/djradio/get/subed",format:function(bHN,bf){var bk=bHN.djRadios;bf.data.time=bHN.time;return{total:bHN.count||0,list:bk}}},"radio_sub-add":{url:"/api/djradio/sub",filter:function(bf){bf.data={id:bf.id}},format:function(bHN,bf){if(this.Hv("firstSub")){bo.ep({title:"订阅成功",type:"noicon",mesg:"可以在“我的音乐-我的电台”收到节目更新"})}else{bo.cq.bO({tip:"订阅成功"})}var dS=this.fh(bf.id)||bf.ext.data;dS.subCount+=1;dS.subed=true;return dS},finaly:function(bc,bf){bj.bG(bp.jQ,"listchange",bc);bj.bG(bp.jQ,"itemchange",{attr:"subCount",data:bc.data})},onmessage:function(dU){}},"radio_sub-del":{url:"/api/djradio/unsub",filter:function(bf){bf.data={id:bf.id}},format:function(bHN,bf){bo.cq.bO({tip:"取消订阅成功"});var dS=this.fh(bf.id)||bf.ext.data;dS.subCount-=1;dS.subed=false;return dS},finaly:function(bc,bf){bj.bG(bp.jQ,"listchange",bc);bj.bG(bp.jQ,"itemchange",{attr:"subCount",data:bc.data})}}});bp.jQ=NEJ.C();bb=bp.jQ.bN(bp.gY);bb.TZ=function(cY,cr){var bLs=this.zq(bF,{});bLs[cY.radio.id]={id:cY.id,name:cY.name,time:cr||0};this.sv(bF,bLs)};bb.buj=function(bC){return this.zq(bF,{})[bC]};bb.TV=function(dS){var fT={key:"radio_sub",ext:{}};if(bm.bLC(dS)){fT.id=dS.id;fT.ext.data=dS}else{fT.id=dS}return fT};bb.iE=function(dS){if(bq.uH())this.jo(this.TV(dS))};bb.TU=function(dS){bq.bKQ({btnok:"确定",btncc:"取消",message:"确定取消订阅？",action:function(bz){if(bz=="ok"){this.Ae(this.TV(dS))}}.bh(this)})};bb.Hv=function(){var qR="RADIO_UPGRADE_TIP";return function(bDM){var bl=this.zq(qR,{});if(bl[bDM]){return false}else{bl[bDM]=true;this.sv(qR,bl);return true}}}();bK.hh.bL({element:bp.jQ,event:["listchange","itemchange"]})})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,bj=be("nej.v"),bK=be("nej.ut"),bm=be("nej.u"),bH=be("nej.j"),bq=be("nm.x"),bp=be("nm.d"),bEZ=be("nm.w"),bb;var QUEUE_KEY="track-queue";var PlayMode={SINGLE_CYCLE:2,LIST_LOOP:4,RANDOM:5};bEZ.uv=NEJ.C();bb=bEZ.uv.bN(bK.eW);bb.cw=function(bf){this.cA(bf);this.cz=bEZ.ig.mh();this.dl=[];this.yt=[];this.ri=bq.bOz();this.bHO=0;this.dA([[bEZ.ig,"playaction",this.bNv.bh(this)]]);this.bwT=bp.qE.bL();this.lh=bp.jQ.bL();this.bPo()};bb.cX=function(){this.dc();delete this.dl;delete this.yt;delete this.ri};bb.bNY=function(){bH.yX(QUEUE_KEY,this.dl)};bb.bPn=function(){var pe=[PlayMode.SINGLE_CYCLE,PlayMode.LIST_LOOP,PlayMode.RANDOM];return function(){var eU,bu=bm.dY(pe,this.ri.mode);eU=bu<0?PlayMode.LIST_LOOP:pe[(bu+1)%3];this.ri.mode=eU;if(this.bNE()){this.bNZ()}bq.bND(this.ri);return this.ri.mode}}();bb.bPm=function(){return this.ri.mode};bb.kW=function(){this.bNx(this.bOB(+1),"ui")};bb.wQ=function(){this.bNx(this.bOB(-1),"ui")};bb.sp=function(){return this.dl[this.bHO]};bb.bPl=function(jF,Lq,dB){if(!jF||!jF.length)return;var bLs={},bdO=jF[0];if(!Lq){bm.bLt(this.dl,function(eD){bLs[eD.id]=eD});bm.bLt(jF,function(eD){if(bLs[eD.id]){if(bdO.id==eD.id){bdO=bLs[eD.id]}}else{this.dl.push(eD)}},this)}else{this.dl=jF}if(this.bNE()){this.bNZ()}if(dB){this.bNx(bm.dY(this.dl,bdO));this.cz.gJ()}this.bNY();bj.bG(bEZ.uv,"queuechange",{cmd:dB?"play":"addto"})};bb.oE=function(bkY){var bu=bm.dY(this.dl,function(eD){return eD.id==bkY});if(bu!=-1){var bPk=bu==this.bHO&&this.dl.length>1,bPj=bu==this.dl.length-1,eD=this.dl[bu];this.dl.splice(bu,1);if(this.bNE()){this.yt.splice(bm.dY(this.yt,eD),1)}if(bPk){if(bPj){this.bNx(bu-1)}else{this.bNx(bu)}}else if(bu<this.bHO){this.bHO--}this.bNY();bj.bG(bEZ.uv,"queuechange",{cmd:"delete"})}};bb.xv=function(){this.dl=[];this.yt=[];this.ri.index=this.bHO=0;bq.bND(this.ri);this.bNY();bj.bG(bEZ.uv,"queuechange",{cmd:"clear"})};bb.sp=function(){return this.dl[this.bHO]};bb.bOC=function(){return this.dl};bb.kN=function(){return this.dl.length};bb.bOa=function(bC){var bu=bm.dY(this.dl,function(eD){return bC==eD.id});if(bu>=0){return this.dl[bu]}};bb.bPi=function(bC){var bu=bm.dY(this.dl,function(eD){return bC==eD.id});if(bu>=0){this.bNx(bu);this.cz.gJ()}};bb.bPo=function(){this.dl=bH.vz(QUEUE_KEY)||[];this.bHO=this.ri.index||0;if(this.dl.length&&this.bNE()){this.bNZ()}this.cz.bOq(this.sp())};bb.bOB=function(dP){if(this.bNE()){var bvD=this.sp(),bu=inRange(bm.dY(this.yt,bvD)+dP,this.yt.length);return bm.dY(this.dl,this.yt[bu])}else{return inRange(this.bHO+dP,this.dl.length)}function inRange(bu,ck){return bu<0?ck-1:bu>=ck?0:bu}};bb.bNZ=function(){var bk=this.dl.slice(0);this.yt=[];while(bk.length){var bu=bm.DZ(0,bk.length-1);this.yt.push(bk[bu]);bk.splice(bu,1)}};bb.bNx=function(bu,bDM){if(!this.dl.length)return;var lm,lZ=this.sp(),bOD=this.cz.bOu();this.bHO=bu;this.ri.index=this.bHO;lm=this.dl[this.bHO];bq.bND(this.ri);bj.bG(bEZ.uv,"playchange",{old:lZ,"new":lm,type:bDM});this.cz.bOq(this.sp());if(lZ&&bOD>3){this.bwT.Sh(lZ.id,bOD,lZ.source,bDM||"interrupt")}if(lm&&lm.program)this.lh.TZ(lm.program,0)};bb.bNE=function(){return this.ri.mode==PlayMode.RANDOM};bb.bNv=function(bc){if(bc.action=="ended"){if(this.ri.mode==PlayMode.SINGLE_CYCLE){this.bNx(this.bHO,"playend")}else{this.kW()}}};bK.hh.bL({element:bEZ.uv,event:["queuechange","playchange"]})})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),dE=be("nej.p"),bH=be("nej.j"),cQ=be("nej.ui"),bK=be("nej.ut"),bp=be("nm.d"),bo=be("nm.l"),bq=be("nm.x"),eb=be("nm.u"),bEZ=be("nm.w"),bE=be("nm.m.f"),bb,bJ;bE.bOE=NEJ.C();bb=bE.bOE.bN(cQ.ic);bb.dv=function(){this.dF();this.qT=bEZ.uv.mh();bj.bs(bEZ.uv,"queuechange",this.nj.bh(this));bj.bs(bEZ.uv,"playchange",this.bJI.bh(this))};bb.bLv=function(){this.dn="m-player-panel"};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.bNL=bk[0];this.la=bk[1];this.bNF=bk[2];this.dk=bk[3];this.bGf=bk[4];this.gu=bEZ.rP.bL({track:this.bGf,slide:Fp.dh(this.bGf)[0],content:this.dk,speed:4});this.cO={nask:bk[5],nmenu:bk[6],nlist:bk[7],nscroll:bk[8]};bj.bs(this.bB,"click",this.gI.bh(this));bj.bs(this.bNF,"load",this.Rf.bh(this))};bb.cw=function(bf){this.cA(bf);this.gQ=bEZ.bfB.bL(this.cO);this.bJI({"new":this.qT.sp()});this.gu.lO();var bk=Fp.bP(this.dk,"z-sel");if(bk.length){var cl=Fp.mV(bk[0],this.dk);this.dk.scrollTop=this.dk.scrollTop+(cl.y-(this.dk.scrollTop+112));this.gu.Zv()}};bb.cX=function(){this.bG("onclose");if(this.gQ){this.gQ.ch();delete this.gQ}this.dc()};bb.nj=function(bc){Fp.ne(this.dk,"m-player-queue",{queue:this.qT.bOC(),current:this.qT.sp()},{dur2time:bq.lx,getArtistName:bq.ls});this.bNL.innerText=this.qT.kN();if(bc&&bc.cmd=="delete")return;var bk=Fp.bP(this.dk,"z-sel");if(bk.length){var cl=Fp.mV(bk[0],this.dk);this.dk.scrollTop=Math.max(Math.min(cl.y,this.dk.scrollTop),cl.y-224);this.gu.Zv()}};bb.gI=function(bc){var bid,bC;bid=bj.cf(bc,"a:href");if(bid&&bid.tagName.toLocaleLowerCase()=="a"&&/^http/.test(bid.href)){return}bj.lg(bc);bid=bj.cf(bc,"d:action");bC=Fp.bI(bid,"id");switch(Fp.bI(bid,"action")){case"likeall":var gw=this.qT.bOC();if(gw&&gw.length){var bk=[];bm.bLt(gw,function(bt){if(!bt.program)bk.push(bt)});window.subscribe(bk,!1);this.ch()}break;case"delete":this.qT.oE(bC);bj.cu(bc);break;case"like":var eD=this.qT.bOa(bC);window.subscribe(eD,false);bj.cu(bc);this.ch();break;case"share":eD=this.qT.bOa(bC);!eD.program?bq.nw({rid:eD.id,type:18,purl:eD.album.picUrl}):bq.nw({rid:eD.program.id,type:17,purl:eD.album.coverUrl});bj.cu(bc);this.ch();break;case"download":eD=this.qT.bOa(bC);if(eD.program){bq.bNg({type:17,id:eD.program.id})}else{bq.bNg({type:18,id:eD.id})}this.ch();break;case"play":this.qT.bPi(bC);break;case"clear":this.qT.xv();break;case"close":this.ch();break}};bb.bJI=function(bc){var bHu=bc["new"];if(bHu){this.gQ&&this.gQ.bPh(bHu);if(bHu.program){this.bNF.src=bHu.program.blurCoverUrl;this.la.innerText=bHu.program.name}else{this.bNF.src="http://music.163.com/api/img/blur/"+(bHu.album.pic||bHu.album.picId||bHu.album.picStr);this.la.innerText=bHu.name}}this.nj()};bb.Rf=function(bc){var dT=this.bNF.clientHeight,bPg=this.dk.parentNode.clientHeight;Fp.bY(this.bNF,"top",(bPg-dT)/2+"px")}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,bv=be("nej.ut"),bb;if(!!bv.Sx)return;bv.Sx=NEJ.C();bb=bv.Sx.bN(bv.eW);bb.cw=function(bf){this.cA(bf);this.Il=bf.to||bZ;this.Dw=bf.from||{};this.bhj=Math.max(0,parseInt(bf.delay)||0)};bb.cX=function(){this.dc();this.cu();if(!!this.Dv){window.clearTimeout(this.Dv);delete this.Dv}delete this.Il;delete this.Dw};bb.Tc=function(cr){if(!this.Dw)return;if((""+cr).indexOf(".")>=0)cr=+(new Date);if(this.Td(cr)){this.cu();return}this.dQ=requestAnimationFrame(this.Tc.bh(this))};bb.Td=co;bb.gJ=function(){var bhk=function(){this.Dv=window.clearTimeout(this.Dv);this.Dw.time=+(new Date);this.dQ=requestAnimationFrame(this.Tc.bh(this))};return function(){this.Dv=window.setTimeout(bhk.bh(this),this.bhj);return this}}();bb.cu=function(){this.dQ=cancelRequestAnimationFrame(this.dQ);this.bG("onstop");return this}})();
(function(){var be=NEJ.P,bZ=NEJ.O,bm=be("nej.u"),bv=be("nej.ut"),bb,bJ;if(!!bv.tj)return;bv.tj=NEJ.C();bb=bv.tj.bN(bv.Sx);bJ=bv.tj.du;bb.cw=function(bf){this.cA(bf);this.So=bf.duration||200;this.bjo=1/(200*this.So);this.bjB(bf.timing);this.bjN()};bb.cX=function(){this.dc();delete this.wH;delete this.Sa};bb.bjB=function(){var fg=/^cubic\-bezier\((.*?)\)$/i,hy=/\s*,\s*/i,Tm={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var bkz=function(bz,bu,bk){bk[bu]=parseFloat(bz)};return function(HT){HT=(HT||"").toLowerCase();this.wH=Tm[HT];if(fg.test(HT)){this.wH=RegExp.$1.split(hy);bm.bLt(this.wH,bkz)}if(!!this.wH)return;this.wH=Tm.ease}}();bb.bjN=function(){var xi=this.wH,RW=3*xi[0],Tr=3*(xi[2]-xi[0])-RW,bkU=1-RW-Tr,RV=3*xi[1],Tu=3*(xi[3]-xi[1])-RV,blO=1-RV-Tu;this.Sa={ax:bkU,ay:blO,bx:Tr,by:Tu,cx:RW,cy:RV}};bb.bfG=function(){var Tx=function(cr,le){return((le.ax*cr+le.bx)*cr+le.cx)*cr};var bnh=function(cr,le){return((le.ay*cr+le.by)*cr+le.cy)*cr};var bod=function(cr,le){return(3*le.ax*cr+2*le.bx)*cr+le.cx};var bpo=function(cr,TC,le){var t0,t1,t2,x2,d2,i;for(t2=cr,i=0;i<8;i++){x2=Tx(t2,le)-cr;if(Math.abs(x2)<TC)return t2;d2=bod(t2,le);if(Math.abs(d2)<1e-6)break;t2=t2-x2/d2}t0=0;t1=1;t2=cr;if(t2<t0)return t0;if(t2>t1)return t1;while(t0<t1){x2=Tx(t2,le);if(Math.abs(x2-cr)<TC)return t2;if(cr>x2)t0=t2;else t1=t2;t2=(t1-t0)*.5+t0}return t2};return function(dP){return bnh(bpo(dP/this.So,this.bjo,this.Sa),this.Sa)}}();bb.Td=function(cr){var dP=cr-this.Dw.time,lS=this.bfG(dP),cl=bm.Cy(this.Dw.offset*(1-lS)+this.Il.offset*lS,2),nH=!1;if(dP>=this.So){cl=this.Il.offset;nH=!0}this.bG("onupdate",{offset:cl});return nH};bb.cu=function(){this.bG("onupdate",{offset:this.Il.offset});bJ.cu.apply(this,arguments);return this}})();
(function(){var be=NEJ.P,bv=be("nej.ut"),bb;if(!!bv.wi)return;bv.wi=NEJ.C();bb=bv.wi.bN(bv.tj);bb.cw=function(bf){bf=NEJ.X({},bf);bf.timing="easein";this.cA(bf)}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bv=be("nej.ut"),pp;bv.wd=NEJ.C();pp=bv.wd.bN(bv.eW);pp.cw=function(bf){this.cA(bf);this.brb=!!bf.reset;this.HY=parseInt(bf.delta)||0;this.fw=Fp.bw(bf.track);this.XT=Fp.bw(bf.progress);this.dA([[bf.thumb,"mousedown",this.bra.bh(this)],[document,"mousemove",this.XV.bh(this)],[document,"mouseup",this.Mf.bh(this)],[this.fw,"mousedown",this.bqW.bh(this)]]);var hW=bf.value;if(hW==null){hW=this.XT.offsetWidth/this.fw.offsetWidth}this.fJ(hW)};pp.cX=function(){if(!!this.brb)this.Hu(0);this.dc()};pp.bra=function(bc){if(!!this.gd)return;bj.cu(bc);this.gd=bj.lB(bc);this.XZ=this.fw.offsetWidth};pp.XV=function(bc){if(!this.gd)return;var cl=bj.lB(bc),dP=cl-this.gd;this.gd=cl;this.Hu(this.we+dP/this.XZ);this.bG("onslidechange",{ratio:this.we})};pp.Mf=function(bc){if(!this.gd)return;this.XV(bc);delete this.gd;delete this.XZ;this.bG("onslidestop",{ratio:this.we})};pp.bqW=function(bc){var bqT=Fp.mV(this.fw).x,bqP=bj.lB(bc);this.Hu((bqP-bqT+this.HY)/this.fw.offsetWidth);this.bG("onslidestop",{ratio:this.we})};pp.Hu=function(hW){this.we=Math.max(0,Math.min(1,hW));Fp.bY(this.XT,"width",this.we*100+"%")};pp.fJ=function(hW){if(!!this.gd)return;this.Hu(hW)};pp.KI=function(hW){return this.we}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),fS=be("nm.ut");fS.bFm=function(){var bFf=function(cK,eh,tY,ud,bFc){if(tY<ud){var bFd=Math.floor((tY+ud)/2);bFf(cK,eh,tY,bFd,bFc);bFf(cK,eh,bFd+1,ud,bFc);bFl(cK,eh,tY,bFd,ud,bFc)}};var bFl=function(cK,eh,tY,bFd,ud,bFc){var i=tY,j=bFd+1,k=tY;while(i<=bFd&&j<=ud){if(bFc(cK[i],cK[j])<=0){eh[k++]=cK[i++]}else{eh[k++]=cK[j++]}}while(i<=bFd){eh[k++]=cK[i++]}while(j<=ud){eh[k++]=cK[j++]}for(i=tY;i<=ud;i++){cK[i]=eh[i]}};var bFk=function(ox,bFj){return ox<bFj};return function(cK,bFc){if(!cK||cK.length==0)return cK;bFc=bFc||bFk;bFf(cK,new Array(cK.length),0,cK.length-1,bFc);return cK}}();fS.bEO=function(){var fg=/\r\n|\r|\n/,hy=/\[(.*?)\]/gi,II={ar:"artist",ti:"track",al:"album",offset:"offset"};var IH=function(bn,iD){var cK=[];iD=iD.replace(hy,function($1,$2){var cr=IF.call(this,bn,$2);if(cr!=null){cK.push({time:cr,tag:$2});bn.scrollable=!0}return""}.bh(this)).trim();if(!cK.length){if(!iD||iD.length==0)return;cK.push({time:-1})}bm.bLt(cK,function(bt){bt.lyric=iD});var ps=bn.lines;ps.push.apply(ps,cK)};var IF=function(bn,cr){var cK=cr.split(":"),oO=cK.shift(),bF=II[oO];if(!!bF){bn[bF]=cK.join(":");return null}oO=parseInt(oO);if(isNaN(oO)){return null}else{var cl=parseInt(bn.offset)||0;return oO*60+parseFloat(cK.join("."))+cl/1e3}};var SL=function(SD,SC){return SD.time-SC.time};return function(bC,ci){var bn={id:bC,lines:[],scrollable:!1,source:ci};bm.bLt((ci||"").trim().split(fg),IH.bh(null,bn));if(bn.scrollable){fS.bFm(bn.lines,SL);var bu;for(var i=0;i<bn.lines.length;i++){if(!!bn.lines[i].lyric){bu=i;break}}bn.lines.splice(0,bu)}return bn}}();fS.bET=function(bDu,bEI){var bEP=fS.bEO(0,bDu),bEQ=fS.bEO(0,bEI);if(bEP.scrollable&&bEQ.scrollable){bm.bLt(bEP.lines,function(bt){var bES=getTranslate(bt.time);if(bES){bt.lyric=bt.lyric+"<br>"+bES.lyric}})}return bEP;function getTranslate(cr){var bu=bm.dY(bEQ.lines,function(bt){return bt.time==cr});if(bu!=-1){return bEQ.lines[bu]}}}})();
(function(){var bv=NEJ.P("nej.ut"),TE;if(!!bv.RP)return;bv.RP=NEJ.C();TE=bv.RP.bN(bv.tj);TE.cw=function(bf){bf=NEJ.X({},bf);bf.timing="linear";this.cA(bf)}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bH=be("nej.j"),bm=be("nej.u"),bq=be("nm.x"),bo=be("nm.l"),bp=be("nm.d");var bEa=function(bl){if(bl.errorType==6||bl.errorType==7||bl.errorType==8){if(!bq.uH())return;bq.vE({txt:"m-report-point",title:"提示",onaction:bEb.bh(this,bl)})}else{bEb(bl)}};var bEq=function(bc){var bid=bj.cf(bc,"d:action");if(Fp.bI(bid,"action")=="feedLyric"){bj.cu(bc);var dU=Fp.bI(bid,"code"),bl={songId:Fp.bI(bid,"id"),errorType:dU};bEa(bl)}};var bEb=function(bl,bc){if(!bc||bc.action=="ok"){bH.cR("/api/v1/feedback/lyric",{type:"json",method:"post",data:bm.eK(bl),onload:function(bc){if(bc.code==200){bo.cq.bO({tip:"提交成功"});if(bm.gj(bl.onok)){bl.onok()}}else if(bc.code==-2){bq.bKQ({title:"提示",message:"您的积分不足",btnok:"赚积分",action:function(cv){if(cv=="ok"){location.dispatch2("/store/gain/index")}}})}else{bo.cq.bO({type:2,tip:"提交失败"})}}})}};bq.bEc=function(bid){var bid=bid||document.body,yI=bEq.bh(this);bj.bs(bid,"click",yI);return{destroy:function(){bj.nt(bid,"click",yI)}}};bq.bEB=function(bl){bEa(bl)}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bH=be("nej.j"),bK=be("nej.ut"),bv=be("nej.p"),bp=be("nm.d"),bq=be("nm.x"),bo=be("nm.l"),eb=be("nm.ut"),bEZ=be("nm.w"),bb,bJ;var bOb={};bEZ.bfB=NEJ.C();bb=bEZ.bfB.bN(bK.eW);bb.cw=function(bf){this.cA(bf);this.dk=bf.nlist;this.bNG=bf.nmenu;this.bOF=bf.nask;this.yA={track:bf.nscroll,slide:Fp.dh(bf.nscroll)[0],content:this.dk,speed:4};this.bOc=this.si.bh(this);this.dA([[bf.nask,"click",this.bPf.bh(this)],[this.yA.slide,"mousedown",this.zJ.bh(this)],[document,"mouseup",this.zF.bh(this)],[bEZ.ig,"playaction",this.bNv.bh(this)]]);if(bv.dp.browser!="firefox"){this.dA([[this.dk,"mousewheel",this.bOc]])}else{this.dk.addEventListener("DOMMouseScroll",this.bOc,false)}this.gu=bEZ.rP.bL(this.yA);this.bOd=bq.bEc(this.dk);this.cz=bEZ.ig.mh()};bb.cX=function(){this.dc();delete this.bHv;delete this.tb;delete this.bNM;if(this.bOd){this.bOd.destroy();delete this.bOd}if(bv.dp.browser=="firefox"){this.dk.removeEventListener("DOMMouseScroll",this.bOc)}Fp.bY(this.bNG,"display","none")};bb.bPf=function(){if(Fp.bIU(this.bNG,"display")=="none"){Fp.bY(this.bNG,"display","block")}else{Fp.bY(this.bNG,"display","none")}};bb.bOe=function(){var vo=0;return function(PW){clearTimeout(vo);this.bNM=true;if(this.tb){this.tb.ch();delete this.tb}if(!PW){vo=setTimeout(function(){delete this.bNM}.bh(this),3e3)}}}();bb.si=function(){this.bOe()};bb.zJ=function(){this.bOe(true)};bb.bNv=function(bc){if(bc.action=="timeupdate"){this.bOG(bc.data.time,true)}};bb.bOG=function(cr,bPe){if(!(this.bHv&&this.bHv.scrollable)||this.bNM)return;var i=this.bHv.lines.length-1,ii,dP,bu=-1,bOH=0,hg=0;for(;i>=0;i--){ii=this.bHv.lines[i];dP=ii.time-cr;if(dP<0&&(i>0||dP<=-2)){bu=i;break}}for(var j=0,jj;j<this.bOf.length;j++){jj=this.bOf[j];if(j<bu){bOH+=jj.clientHeight}if(bu==j){Fp.bV(jj,"z-sel")}else{Fp.bR(jj,"z-sel")}}if(bu<0||Fp.mV(this.bOf[bu],this.dk).y<96){hg=0}else{hg=bOH-96}if(Math.abs(hg-this.dk.scrollTop)<=4||this.tb)return;if(bPe){var fT={from:{offset:this.dk.scrollTop},to:{offset:hg},duration:500,onupdate:function(bc){this.dk.scrollTop=bc.offset;this.gu.sr(this.dk.scrollTop/(this.dk.scrollHeight-this.dk.clientHeight))}.bh(this),onstop:function(){if(this.tb){this.tb.ch();delete this.tb}}.bh(this)};this.tb=bK.RP.bL(fT);this.tb.gJ()}else{this.dk.scrollTop=hg;this.gu.sr(this.dk.scrollTop/(this.dk.scrollHeight-this.dk.clientHeight))}};bb.bPh=function(eD){this.bNN=eD;delete this.bHv;if(eD&&!eD.program){var cg="/api/song/lyric",cC={id:eD.id,lv:-1,tv:-1};if(bOb[eD.id]){this.bOg(bOb[eD.id])}else{bH.cR(cg,{sync:false,type:"json",query:cC,method:"get",onload:this.bOg.gz(this,eD.id),onerror:this.bOg.bh(this)})}Fp.bR(this.bOF,"f-hide")}else{Fp.bV(this.bOF,"f-hide");this.HK({})}};bb.bOg=function(bc,bC){if(bc.code==200){if(bC){bOb[bC]=bc}var bDu=bc.lrc||{},bES=bc.tlyric||{};if(!bDu.lyric){this.HK(bc)}else{this.bHv=eb.bET(bDu.lyric,bES.lyric);bc.scrollable=this.bHv.scrollable;Fp.ne(this.dk,"m-lyric-line",{id:this.bNN.id,lines:this.bHv.lines,scrollable:this.bHv.scrollable});this.bOf=Fp.bP(this.dk,"j-flag")}bc.songId=this.bNN.id;Fp.ne(this.bNG,"m-player-lyric-ask",bc)}else{}if(this.tb){this.tb.ch();delete this.tb}this.gu.lO();this.bOG(this.cz.bOu()||0,false)};bb.zF=function(){if(this.bNM){this.bOe()}};bb.HK=function(bl){if(this.bNN.program){this.dk.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">电台节目，无歌词</span></div>'}else if(bl.nolyric){this.dk.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">纯音乐，无歌词</span></div>'}else{this.dk.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">暂时没有歌词</span><a data-action="feedLyric" data-code="6"'+"data-id="+this.bNN.id+' href="#" class="f-tdu">求歌词</a></div>'}this.gu&&this.gu.lO()}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),dE=be("nej.p"),bH=be("nej.j"),bK=be("nej.ut"),bp=be("nm.d"),bo=be("nm.l"),bq=be("nm.x"),eb=be("nm.u"),bEZ=be("nm.w"),bE=be("nm.m.f"),gi=be("player"),bb,bJ;bE.Dm=NEJ.C();bb=bE.Dm.bN(bK.eW);bb.dv=function(){this.dF();this.bEF=Fp.bw("g_player");this.sl=this.bEF.parentNode;var bk=Fp.bP(this.bEF,"j-flag");this.ju=bk[0];this.pM=bk[1];this.la=bk[2];this.Dn=bk[3];this.hZ=bk[4];this.nG=bk[5];bk=Fp.dh(bk[6]);this.bMO=bk[0];this.bMT=bk[1];this.bOI=bk[2];this.bNL=bk[3];this.Rh=bk[4];this.Ia=Fp.dh(this.bNL)[0];this.bNw=bq.bOz();this.bNO(3e3);this.brV();this.bPd();this.bPc();this.bOJ();gi.setLike=this.QX.bh(this);bj.bs(this.sl,"click",this.gI.bh(this));bj.bs(bEZ.ig,"playaction",this.bNv.bh(this));bj.bs(bEZ.uv,"queuechange",this.nj.bh(this));bj.bs(bEZ.uv,"playchange",this.bJI.bh(this));bj.bs(this.sl,dE.dp.browser=="ie"?"mouseleave":"mouseout",this.bfp.bh(this,!1));bj.bs(this.sl,dE.dp.browser=="ie"?"mouseenter":"mouseover",this.bfp.bh(this,!0));bj.bs(document,"keyup",this.bOK.bh(this));bj.bs(window,"iframeclick",this.pL.bh(this));bj.bs(document,"click",this.pL.bh(this));bj.bs(this.bMO,"click",bj.cu.bh(bj));gi.hotkeys=this.bOK.bh(this);this.bOL=bm.nq()};bb.bOJ=function(){if(this.bNw.lock){Fp.bR(this.sl,"m-playbar-unlock");Fp.bV(this.sl,"m-playbar-lock")}else{Fp.bV(this.sl,"m-playbar-unlock");Fp.bR(this.sl,"m-playbar-lock")}};bb.brV=function(){var bk=Fp.dh(this.Dn);this.bOM=bk[0];this.bNP=Fp.dh(bk[1])[0];this.bON=bK.wd.bL({track:this.Dn,thumb:this.bNP,progress:bk[1],onslidestop:function(bc){this.bOO=false;this.cz.lu(this.cz.bNV()*bc.ratio)}.bh(this),onslidechange:function(bc){this.bOO=true;this.bOh({time:bc.ratio*this.cz.bNV(),duration:this.cz.bNV()})}.bh(this)})};bb.bPc=function(){var bk=Fp.bP(this.bMO,"j-t"),hW=bk[1],bMV=this.bNw.volume;if(bMV==null){bMV=.8}this.AC=bK.Bd.bL({track:bk[0],slide:bk[2],onchange:function(bc){var bz=1-bc.y.rate,dT=93*bz;Fp.bY(hW,"height",dT+"px");dT>0?Fp.bR(this.bMT,"icn-volno"):Fp.bV(this.bMT,"icn-volno");this.cz.jZ(bz);this.bNw.volume=bz;bq.bND(this.bNw)}.bh(this)});this.AC.fJ({x:0,y:1-bMV})};bb.bPd=function(){this.cz=bEZ.ig.mh();this.qT=bEZ.uv.mh();gi.addTo=function(jF,Lq,dB){this.qT.bPl(JSON.parse(JSON.stringify(jF)),Lq,dB)}.bh(this);gi.tipPlay=this.bOi.bh(this);gi.getPlaying=function(){return{track:this.qT.sp(),playing:this.cz.pn()}}.bh(this);gi.pause=this.cz.hY.bh(this.cz);var bvD=this.qT.sp();if(bvD){this.bOP(bvD)}this.bOQ(this.qT.bPm());this.bOR()};bb.nj=function(){var vo=0;return function(bc){if(bc.cmd=="play"||bc.cmd=="addto"){this.bOi(bc.cmd=="play"?"已开始播放":"已添加到播放列表")}this.bOR()}}();bb.bJI=function(bc){var eD=bc["new"];this.bOP(eD);bj.bG(window,"playchange",{trackId:eD.id,track:eD})};bb.gI=function(bc){var bid=bj.cf(bc,"d:action"),cv=Fp.bI(bid,"action"),tu=bj.cf(bc,"a:href");if(tu&&tu.tagName.toLocaleLowerCase()=="a"&&/^http/.test(tu.href)){this.ch();return}else{bj.cu(bc)}switch(cv){case"lock":this.bNw.lock=!Fp.cJ(this.sl,"m-playbar-lock");bq.bND(this.bNw);this.bOJ();break;case"prev":this.qT.wQ();break;case"next":this.qT.kW();break;case"play":this.cz.gJ();break;case"pause":this.cz.hY();break;case"like":var eD=this.qT.sp();if(eD){window.subscribe(eD,eD.program)}!eD.program&&this.vd&&this.vd.ch();break;case"share":var eD=this.qT.sp();if(eD){!eD.program?bq.nw({rid:eD.id,type:18,purl:eD.album.picUrl}):bq.nw({rid:eD.program.id,type:17,purl:eD.program.coverUrl})}this.vd&&this.vd.ch();break;case"mode":this.bOQ(this.qT.bPn(),true);break;case"volume":bj.cu(bc);if(this.bMO.style.visibility!="hidden"){Fp.bY(this.bMO,"visibility","hidden")}else{Fp.bY(this.bMO,"visibility","visible")}break;case"panel":bj.cu(bc);if(!this.vd){this.vd=bE.bOE.bL({parent:this.sl,onclose:function(){delete this.vd;this.bNO()}.bh(this)})}else{if(this.vd){this.vd.ch();delete this.vd}}break}};bb.bOh=function(bc){this.hZ.innerHTML=bq.gN("<em>{0}</em> / {1}",bq.lx(bc.time),bq.lx(bc.duration))};bb.bOQ=function(eU,eG){var bLs={2:{icn:"icn-one",title:"单曲循环"},4:{icn:"icn-loop",title:"循环"},5:{icn:"icn-shuffle",title:"随机"}},bQ=bLs[eU];Fp.fC(this.bOI,"icn-one icn-loop icn-shuffle",bQ.icn);this.Rh.innerText=this.bOI.title=bQ.title;clearTimeout(this.bPb);if(eG){Fp.bY(this.Rh,"display","");this.bPb=setTimeout(function(){Fp.bY(this.Rh,"display","none")}.bh(this),2e3)}};bb.QX=function(cY){var bvD=this.qT.sp();if(bvD&&bvD.program&&bvD.program.id==cY.id){bvD.program.liked=cY.liked;this.nG.title="赞";if(cY.liked){Fp.fC(this.nG,"icn-zan","icn-yizan")}else{Fp.fC(this.nG,"icn-yizan","icn-zan")}}};bb.bOP=function(eD){var dD;Fp.bY(this.bOM,"width",0);this.bOh(0);this.bON.fJ(0);if(eD){dD=this.bPa(eD);if(eD.program){Fp.fC(this.nG,"icn-add","icn-zan");bH.mB(this.pK);if(eD.program.localupdatetime-(new Date).getTime()>6e5){this.pK=bH.cR("/api/dj/program/detail",{type:"json",query:{id:eD.program.id},onload:function(bc){if(bc.code==200){this.QX(bc.program)}}.bh(this)})}}else{Fp.fC(this.nG,"icn-zan icn-yizan","icn-add")}this.pM.innerHTML=bq.gN('<img src="{0}?param=34y34"><a href="{1}" hidefocus="true" class="mask"></a>',dD.cover,dD.titleUrl);Fp.ne(this.la,"m-player-playinfo",dD)}document.title=eD.name};bb.bOR=function(){var bk=Fp.dh(this.bNL);bk[1].innerText=this.qT.kN()};bb.bPa=function(eD){var bn={duration:eD.duration,cover:"http://s4.music.126.net/style/web2/img/default_album.jpg",source:eD.source};if(eD.program){bn.type="program";bn.name=bm.eZ(eD.program.name);bn.cover=eD.program.coverUrl;bn.titleUrl="/program?id="+eD.program.id;bn.artistHtml=bq.gN('<a hidefocus="true" href="/radio?id={0}" title="{1}">{1}</a>',eD.program.radio.id,bm.eZ(eD.program.radio.name))}else{bn.type="song";bn.name=eD.name;bn.mvid=eD.mvid;if(!eD.album){eD.album={}}if(eD.album.pic&&eD.album.picUrl){bn.cover=eD.album.picUrl}bn.titleUrl="/song?id="+eD.id;bn.artistHtml=bq.ls(eD.artists)}return bn};bb.bNv=function(bc){var bl=bc.data;switch(bc.action){case"play":Fp.bV(this.ju,"pas");Fp.bI(this.ju,"action","pause");bH.fN("playerid",this.bOL);break;case"pause":Fp.bR(this.ju,"pas");Fp.bI(this.ju,"action","play");break;case"timeupdate":if(this.bOO)return;var bAr=bH.fN("playerid");if(bAr&&bAr!==this.bOL){this.cz.hY()}this.bON.fJ(bl.time/bl.duration);this.bOh(bl);break;case"progress":Fp.bY(this.bOM,"width",bl.loaded*100/bl.total+"%");break;case"error":this.bOi("播放失败");Fp.bR(this.bNP,"z-load");break;case"playing":Fp.bR(this.bNP,"z-load");break;case"waiting":Fp.bV(this.bNP,"z-load");break}};bb.bOi=function(){var vo=0;return function(hA){if(hA){this.Ia.innerText=hA;Fp.bY(this.Ia,"display","");clearTimeout(vo);vo=setTimeout(function(){Fp.bY(this.Ia,"display","none")}.bh(this),2e3);this.bEl(true);this.bNO(2e3)}}}();bb.bfp=function(sN,bc){if(!this.vd){if(sN){if(!bq.Ki(this.sl,bc.relatedTarget||bc.fromElement)){this.bEl(true)}}else{if(!bq.Ki(this.sl,bc.relatedTarget||bc.toElement)){this.bNO()}}}};bb.bNO=function(uw){clearTimeout(this.bOS);this.bOS=setTimeout(function(){if(!this.bNw.lock){this.bEl(false)}}.bh(this),uw||500)};bb.bEl=function(){var sF,qb=true;return function(so){clearTimeout(this.bOS);if(sF||so==qb)return;qb=so;sF=bK.wi.bL({to:{offset:so?-53:-7},from:{offset:so?-7:-53},onstop:function(){sF.ch();sF=null},onupdate:function(bc){Fp.bY(this.sl,"top",bc.offset+"px")}.bh(this),duration:so?100:350});sF.gJ()}}();bb.bOK=function(bc){if(bc.keyCode==80&&!bq.bcM()){this.cz.pn()?this.cz.hY():this.cz.gJ()}else if(bc.ctrlKey){switch(bc.keyCode){case 37:this.qT.wQ();break;case 39:this.qT.kW();break}}};bb.pL=function(){Fp.bY(this.bMO,"visibility","hidden");this.vd&&this.vd.ch()};bb.bO=function(){Fp.bY(this.sl,"visibility","visible")};bb.cj=function(){this.cz.hY();Fp.bY(this.sl,"visibility","hidden")}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),cQ=be("nej.ui"),bK=be("nej.ut"),bm=be("nej.u"),bq=be("nm.x"),bp=be("nm.d"),bEZ=be("nm.w"),bb;bEZ.bBF=NEJ.C();bb=bEZ.bBF.bN(cQ.ic);bb.bFa=function(){this.bLu();var bk=Fp.dh(this.bB);this.bDQ=bk[0];this.eC=bk[1];this.dk=bk[2]};bb.bLv=function(){this.dn="g-select"};bb.cw=function(bf){this.cA(bf);this.dA([[this.eC,"click",this.bEl.bh(this)],[this.dk,"click",this.ry.bh(this)],[document,"click",this.nr.bh(this)]]);this.bDz=bf.filter||this.bEk;this.pW(bf.list)};bb.cX=function(){this.dc();delete this.dK;delete this.bDA;delete this.bDz};bb.pW=function(bk,mP){if(!bk){this.bDQ.innerText="－请选择－";return}this.dK=bk;Fp.ne(this.dk,"g-select-item",{options:bk},{filter:this.bDz});this.iU(mP||bk[0])};bb.zS=function(){return this.dK};bb.fo=function(){return this.bDA};bb.iU=function(bz){if(this.bDA!=bz){this.bDA=bz;this.bDQ.innerText=this.bDz(bz);this.bG("onchange",bz)}};bb.bEl=function(bc){bj.cu(bc);if(Fp.cJ(this.dk,"f-hide")){if(!this.dK||!this.dK.length)return;Fp.bR(this.dk,"f-hide")}else{Fp.bV(this.dk,"f-hide")}};bb.nr=function(){Fp.bV(this.dk,"f-hide")};bb.ry=function(bc){var bid=bj.cf(bc,"d:index"),bu=Fp.bI(bid,"index");if(bid){this.iU(this.dK[bu])}};bb.bEk=function(hO){return hO.name}})();
(function(){var be=NEJ.P,bZ=NEJ.O,bj=be("nej.v"),Fp=be("nej.e"),bH=be("nej.j"),bm=be("nej.u"),bo=be("nm.l"),bEZ=be("nm.w"),eQ=be("nej.ui"),bp=be("nm.d"),bq=be("nm.x"),bb,bJ;bo.bDB=NEJ.C();bb=bo.bDB.bN(bo.eH);bJ=bo.bDB.du;bb.bLv=function(){this.dn="m-question"};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.iB=bk[1];this.yN=bk[2];this.Go=bEZ.bBF.bL({filter:this.bEj,parent:bk[0]});bj.bs(this.bB,"click",this.gI.bh(this))};bb.cw=function(bf){bf.parent=bf.parent||document.body;bf.title="回答安全问题";bf.draggable=!0;bf.destroyalbe=!0;bf.mask=true;this.cA(bf);this.Go.pW(bf.data||[])};bb.cX=function(){this.dc();this.iB.value=""};bb.vD=function(){this.cj()};bb.gI=function(bc){var bid=bj.cf(bc,"d:action");switch(Fp.bI(bid,"action")){case"back":this.bG("onback");this.cj();break;case"next":var bDR=this.iB.value.trim();if(!bDR){this.bDh("请输入回答");return}var bl={questionId:this.Go.fo().id,answer:bm.mi(bDR)};this.bDh(null);bH.cR("/store/api/security/validateAnswer",{type:"json",method:"post",data:bm.eK(bl),onload:this.bDS.bh(this),onerror:this.bDS.bh(this)});break}};bb.bEj=function(bt){return bt.question};bb.bDh=function(eG){if(eG){this.yN.innerHTML='<i class="u-icn u-icn-25"></i>'+eG;Fp.bY(this.yN,"display","block")}else{Fp.bY(this.yN,"display","none")}};bb.bDS=function(bc){if(bc&&bc.code==200){this.bG("onnext");this.cj()}else{var bLs={"-3":"回答错误，您还有"+bc.times+"次机会！"};if(bc.code==-2||bc.code==-4){bq.ep({clazz:"m-layer-w2",message:"回答错误的次数过多，您的账号已被锁定<br>将无法进行任何商城交易，请联系客服人工解锁。<br>客服电话：0571-89853546<br>客服邮箱：cloudmusicservice@163.com"});this.cj()}else{this.bDh(bLs[bc.code]||"回答出错")}}};bq.bDK=function(bf){var bDT=function(bc){if(bc&&bc.code==200){bf.data=bc.data;bo.bDB.bL(bf).bO()}else{bq.ep({clazz:"m-layer-w2",message:"请联系客服电话0571-89853546"})}};bH.cR("/store/api/security/getQuestion",{type:"json",method:"get",onload:bDT,onerror:bDT})}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bm=be("nej.u"),cQ=be("nej.ui"),bH=be("nej.j"),bj=be("nej.v"),bK=be("nej.ut"),bo=be("nm.l"),bq=be("nm.x"),bEZ=be("nm.w"),bb,bJ;bo.bDU=NEJ.C();bb=bo.bDU.bN(bo.eH);bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.yN={cellphone:bk[3],code:bk[4]};this.bDV=bk[0];this.hZ=bk[1];this.bDW=bk[2];this.Xw=bk[5];bj.bs(this.bB,"click",this.gI.bh(this))};bb.bLv=function(){this.dn="m-change-phone"};bb.cw=function(bf){bf.clazz="m-layertel";this.cA(bf);this.fL=bK.JM.bL({form:this.bB});Fp.fC(this.Xw,"u-btn2-2","u-btn2-dis")};bb.cX=function(){this.dc();Fp.bY(this.bDV,"display","");this.fL.ch();delete this.fL;delete this.bDC};bb.gI=function(bc){var bid=bj.cf(bc,"d:action"),bl=this.fL.brt();switch(Fp.bI(bid,"action")){case"send":var bDm=this.bB.cellphone.value.trim();if(!bDm){this.bDh("cellphone","请输入手机号");return}if(!/^\d{11}$/.test(bDm)){this.bDh("cellphone","手机号必须为11位数字");return}this.bDC=bDm;this.bDh("cellphone",null);bH.cR("/api/cellphone/existence/check",{type:"json",query:{cellphone:bDm},onload:function(bc){if(bc.exist!=-1){this.bDh("cellphone","该手机号已被其他帐号认证")}else{this.zR()}}.bh(this)});break;case"resend":this.zR();break;case"back":this.bG("onback");this.cj();break;case"ok":if(Fp.cJ(this.Xw,"u-btn2-dis"))return;var bl={captcha:this.bB.code.value.trim(),cellphone:this.bDC};if(!bl.captcha){this.bDh("code","请输入验证码");return}this.bDh("code",null);bH.cR("/api/sms/captcha/verify/",{type:"json",method:"post",query:bl,onload:this.YM.bh(this,bl)});break}};bb.bEi=function(){var bC,cr=0;return function(){var zp=this;cr=60;clearTimeout(bC);Fp.bV(this.bDW,"f-hide");Fp.bR(this.hZ,"f-hide");(function(){cr--;if(cr<0){Fp.bR(zp.bDW,"f-hide");Fp.bV(this.hZ,"f-hide");return}zp.hZ.innerText="00:"+(cr>9?cr:"0"+cr);bC=setTimeout(arguments.callee,1e3)})()}}();bb.zR=function(){bH.cR("/api/sms/captcha/sent",{type:"json",method:"get",query:{cellphone:this.bDC},onload:function(bc){if(bc.code==200){Fp.bY(this.bDV,"display","none");this.bEi();if(Fp.fC(this.Xw,"u-btn2-dis","u-btn2-2"))return}else{this.bDh("cellphone",bc.message||"验证码发送失败")}}.bh(this)})};bb.bDh=function(bF,eG){var bDX=this.bB[bF],bDD=this.yN[bF];if(eG){bDD.innerHTML='<i class="u-icn u-icn-25"></i>'+eG;Fp.bV(bDD,"z-show");Fp.bV(bDX,"u-txt-err")}else{Fp.bR(bDD,"z-show");Fp.bR(bDX,"u-txt-err")}};bb.YM=function(bl,bc){if(bc.code==200){bH.cR("/api/v1/user/replaceCellphone",{type:"json",method:"post",query:{phone:bl.cellphone,captcha:bl.captcha},onload:function(bc){if(bc.code==200){bo.cq.bO({tip:"手机号修改成功"});this.bG("onok",bl)}else{bo.cq.bO({type:2,tip:"手机号修改失败"})}this.cj()}.bh(this)})}else{this.bDh("code","验证码不正确")}}})();
(function(){var be=NEJ.P,bZ=NEJ.O,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bp=be("nm.d"),bo=be("nm.l"),bq=be("nm.x"),bb,bJ;bo.Iy=NEJ.C();bb=bo.Iy.bN(bo.eH);bJ=bo.Iy.du;bb.cw=function(bf){this.cA(bf);this.hS=bf.mobile||"";this.bfa=bf.head||"你的手机号为："+bq.bEp(this.hS);this.bA=bp.mj.bL();this.bA.bs("onsendcaptcha",this.rf.bh(this));this.bA.bs("onverifycaptcha",this.yK.bh(this));this.bA.bs("onmobilebinderror",this.ek.bh(this,0));this.bA.bs("onsendcaptchaerror",this.ek.bh(this,1));this.bA.bs("onverifycaptchaerror",this.ek.bh(this,2));this.cP();this.cI(!1);this.vI.innerText=this.bfa;this.cZ.value="";Fp.bR(this.cZ,"u-txt-err");Fp.bY(this.vI,"display",this.bfa?"":"none");if(bf.sended){Fp.bV(this.eC,"f-hide");this.rf()}else{this.kj()}Fp.bY(this.kg,"display",bf.noback?"none":"");if(bf.ntext){this.hR.innerHTML="<i>"+bf.ntext+"</i>"}else{this.hR.innerHTML="<i>下一步</i>"}if(bf.widthFind){Fp.bR(this.bDE,"f-hide")}else{Fp.bV(this.bDE,"f-hide")}this.bEh=bf.onnext};bb.bLv=function(){this.dn="m-wgt-verifycaptchawin"};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.vI=bk[0];this.cZ=bk[1];this.yM=bk[2];this.eC=bk[3];this.eN=bk[4];this.kg=bk[5];this.hR=bk[6];this.bDE=bk[7];bj.bs(this.cZ,"focus",this.ey.bh(this));bj.bs(this.cZ,"keypress",this.jH.bh(this));bj.bs(this.eC,"click",this.kj.bh(this));bj.bs(this.kg,"click",this.rX.bh(this));bj.bs(this.hR,"click",this.Qh.bh(this));bj.bs(this.bDE,"click",this.bEg.bh(this))};bb.cX=function(){this.dc();if(this.dQ){clearInterval(this.dQ);delete this.dQ}};bb.ey=function(){Fp.bR(this.cZ,"u-txt-err")};bb.jH=function(bc){if(bc.keyCode==13)this.DE()};bb.rX=function(bc){bj.cG(bc);this.bG("onback");this.cj()};bb.Qh=function(bc){bj.cG(bc);this.DE()};bb.DE=function(){if(this.cI())return;var ki;if(!(ki=this.yR()))return;this.cI(!0);this.bA.NN({data:{cellphone:this.hS,captcha:ki}})};bb.yK=function(bn){this.bG("onnext",bn);this.cj()};bb.kj=function(bc){bj.cG(bc);if(!!this.dQ)return;Fp.bV(this.eC,"f-hide");this.bA.Io({data:{cellphone:this.hS}})};bb.rf=function(bn){this.yl()};bb.ek=function(bDM,bn){bn=bn||{};this.cI(!1);if(bDM==1){this.cP(bn.message||"验证码发送失败")}else{this.cP(bn.message||"验证码错误")}};bb.yR=function(){var ki=this.cZ.value.trim();if(!ki){Fp.bV(this.cZ,"u-txt-err");this.cP("请输入验证码");return}this.cP();Fp.bR(this.cZ,"u-txt-err");return ki};bb.yl=function(){var cr;var rH=function(){cr--;cr=Math.max(0,cr);this.yM.innerText=" (00:"+(cr>=10?cr:"0"+cr)+") ";if(cr<=0){this.dQ=clearInterval(this.dQ);Fp.bR(this.eC,"f-hide")}};return function(){cr=60;this.dQ=clearInterval(this.dQ);this.dQ=setInterval(rH.bh(this),1e3);rH.call(this)}}();bb.cP=function(cD){this.bxe(this.eN,cD)};bb.cI=function(cN){return this.dG(this.hR,cN,"下一步","验证中...")};bb.bEg=function(){top.api.changePhone(this.hS,this.bEh);this.cj()}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bH=be("nej.j"),bK=be("nej.ut"),bm=be("nej.u"),bq=be("nm.x"),bo=be("nm.l"),blh=be("api"),bEZ=be("nm.w");var bDF=function(bDm,bEf){var bDY=function(){bo.bDU.bL({title:"设置手机号",parent:document.body,onok:bEf}).bO()};bq.vE({title:"更换手机号",clazz:"m-layer-find",txt:"m-verify-type",onaction:function(bc){if(bc.action=="using"){bDZ({mobile:bDm,onback:function(){bDF(bDm)},onnext:bDY})}else{bq.bDK({onback:function(){bDF(bDm)},onnext:bDY})}}})};var bDZ=function(bf){var ts=function(bc){if(bc.code==200){bf.title=bf.title||"验证手机号";bf.parent=document.body;bf.destroyable=true;bf.sended=true;bo.Iy.bL(bf).bO()}else{bo.cq.bO({tip:bc.message||"验证码发送失败",type:2})}};bH.cR("/api/sms/captcha/sent/",{type:"json",query:{cellphone:bf.mobile,channel:"new"},onload:ts,onerror:ts})};blh.changePhone=bDF;blh.phoneCode=bDZ;blh.validateQuestion=bq.bDK})();
(function(){var be=NEJ.P,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bT=be("nej.h"),bv=be("nej.p");var mr={opacity:1,"z-index":1,background:1,"font-weight":1,filter:1};bT.SQ=function(hK){return mr[hK]===undefined&&hK.indexOf("color")<0};bT.vY=function(bid,pZ,lW){lW=lW.slice(0,-1);Fp.bY(bid,"transition",lW);Fp.pD(bid,pZ);return this};bT.Dy=function(bid,dO,nH){Fp.pD(bid,dO);Fp.bY(bid,"transition","none");nH.call(null,dO);return this}})();
(function(){var be=NEJ.P,co=NEJ.F,bT=be("nej.h"),bv=be("nej.p");if(bv.jN.trident1)return;bT.tf=function(){return!0}})();
(function(){var be=NEJ.P,bv=be("nej.ut"),bb;if(!!bv.RL)return;bv.RL=NEJ.C();bb=bv.RL.bN(bv.tj);bb.cw=function(bf){bf=NEJ.X({},bf);bf.timing="easeout";this.cA(bf)}})();
(function(){var be=NEJ.P,bv=be("nej.ut"),bb;if(!!bv.RJ)return;bv.RJ=NEJ.C();bb=bv.RJ.bN(bv.tj);bb.cw=function(bf){bf=NEJ.X({},bf);bf.timing="easeinout";this.cA(bf)}})();
(function(){var be=NEJ.P,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bT=be("nej.h"),bv=be("nej.p"),dr=be("nej.x"),ib=be("nej.ut");if(bv.jN.trident)return;var TJ={linear:ib.RP,"ease-in":ib.wi,"ease-out":ib.RL,"ease-in-out":ib.RJ};bT.vY=function(){var bsd=function(pZ,lW){var dL="";bm.eJ(pZ,function(bz,bX){dL+=lW.replace("all",bX)});return dL};var bto=function(bz,hK){if(hK==="filter"){bz=bm.Cy(bz,0);bz="alpha(opacity="+bz+")"}if(hK==="z-index")bz=bm.Cy(bz,0);return bz};var bts=function(bz){return TJ[bz.split(" ")[2]]};var btB=function(bid,bz,pZ,nH,bu){var bz=bz.split(" "),hK=bz[0],dz=parseFloat(Fp.bIU(bid,hK))||0,km=parseFloat(pZ[hK])||0,btE=TJ[bz[2]],RH=bz[1].slice(0,-1)*1e3+bz[3].slice(0,1)*1e3;if(RH>=bid.sumTime){bid.sumTime=RH;bid.isLastOne=bu}var Dh=nej.p.dp.engine==="trident"&&nej.p.dp.release-5<0;if(hK==="opacity"&&Dh){hK="filter";var eg=Fp.bIU(bid,hK);dz=parseFloat(eg.split("=")[1])||0;km=km*100}var bf={from:{offset:dz},to:{offset:km},duration:RH,onupdate:function(cl){var bz=cl.offset;if(!bT.SQ(hK)){bz=bto(bz,hK);Fp.bY(bid,hK,bz)}else{Fp.bY(bid,hK,bz+"px")}},onstop:function(hK){var wI=bid.effects[bu];if(!wI)return;wI=btE.ch(wI);if(bid.isLastOne===bu)nH.apply(this)}.bh(this,bu)};return bf};return bT.vY.ee(function(bc){bc.stopped=!0;var bk=bc.args;var bid=bk[0],pZ=bk[1],lW=bk[2],nH=bk[3];bid.sumTime=0,bid.isLastOne=0;var TS=[];if(lW.indexOf("all")>-1)lW=bsd(pZ,lW);var Rz=lW.slice(0,-1);Rz=Rz.split(",");bid.effects=[];bm.bLt(Rz,function(bz,bu){var bf=btB(bid,bz,pZ,nH,bu);TS.push({o:bf,c:bts(bz)})});bm.bLt(TS,function(bt,bu){var wI=bt.c.bL(bt.o);bid.effects[bu]=wI;wI.gJ()});return this})}();bT.Dy=bT.Dy.ee(function(bc){bc.stopped=!0;var bk=bc.args;var bid=bk[0];bm.bLt(bid.effects,function(bZ){bZ.cu()});bid.effects=[];return this})})();
(function(){var be=NEJ.P,co=NEJ.F,bT=be("nej.h"),Fp=be("nej.e"),bv=be("nej.p");if(bv.jN.gecko)return;bT.vY=function(bid,pZ,lW){lW=lW.slice(0,-1);Fp.bY(bid,"transition",lW);setTimeout(function(){Fp.pD(bid,pZ)},33);return this}})();
(function(){var be=NEJ.P,co=NEJ.F,bT=be("nej.h"),bv=be("nej.p");if(bv.jN.webkit)return})();
(function(){var be=NEJ.P,co=NEJ.F,bT=be("nej.h"),bv=be("nej.p");if(bv.jN.presto)return})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,bm=be("nej.u"),bT=be("nej.h"),Fp=be("nej.e"),bj=be("nej.v"),bv=be("nej.ut"),oe;if(!!bv.mx)return;bv.mx=NEJ.C();oe=bv.mx.bN(bv.eW);oe.cw=function(bf){this.cA(bf);this.xc=Fp.bw(bf.node);this.TX=bf.styles||[];this.TY=bf.onstop||co;this.Ru=bf.transition||[];this.Dd={};this.Ub=this.bvn();if(!!bT.tf&&bT.tf()){setTimeout(this.tf.bh(this),this.Rg*1e3)}else{this.dA([[this.xc,"transitionend",this.tf.bh(this)]])}};oe.cX=function(){if(!!this.wj){this.wj=window.clearInterval(this.wj)}delete this.xc;delete this.TX;delete this.Ub;delete this.Dd;delete this.Qx;delete this.Ru;delete this.wj;this.dc()};oe.tf=function(bc){if(!!bT.tf&&bT.tf()){this.Qv=!1;this.cu();return}if(!!this.Qv&&this.bxd(bc)){this.Qv=!1;this.cu()}};oe.bxd=function(bc){var bX=bc.propertyName;if(bX===this.Qx||bX.indexOf(this.Qx)>-1)return!0;else return!1};oe.bvn=function(){var bxt=function(di){var bk=di.split(":"),hK=bk[0],bz=bk[1],bid=this.xc;if(bz.indexOf("=")>-1){var Uj=parseInt(Fp.bIU(bid,hK))||0;var dE=parseInt(bz.split("=")[1]);if(bz.indexOf("+")>-1)bz=Uj+dE;else bz=Uj-dE}if(bT.SQ(hK)){if(bz.toString().indexOf("px")<0)bz+="px"}this.Dd[hK]=bz};var bxw=function(bu){if(!this.Ru[bu])return"";var mM=this.Ru[bu],bK=mM.duration+mM.delay;if(bK>=this.Rg){this.Rg=bK;this.Qx=mM.property}return mM.property+" "+mM.duration+"s "+mM.timing+" "+mM.delay+"s,"};return function(){var Um="";this.Rg=0;bm.bLt(this.TX,function(di,bu){bxt.call(this,di);Um+=bxw.call(this,bu)}.bh(this));return Um}}();oe.bxs=function(){this.rd={};bm.eJ(this.Dd,function(bz,hK){this.rd[hK]=Fp.bIU(this.xc,hK)}.bh(this));this.bG("onplaystate",this.rd)};oe.sw=function(){this.Qv=!0;bT.vY(this.xc,this.Dd,this.Ub,this.TY);this.wj=window.setInterval(this.bxs.bh(this),49);return this};oe.cu=function(){bT.Dy(this.xc,this.Dd,this.TY);this.wj=window.clearInterval(this.wj);return this};oe.bxH=function(){};oe.bxI=function(){}})();
(function(){var be=NEJ.P,co=NEJ.F,bm=be("nej.u"),Fp=be("nej.e"),bm=be("nej.u"),bv=be("nej.ut");Fp.GF=function(bf){bf=bf||{};bf.onstop=bf.onstop||co;bf.onplaystate=bf.onplaystate||co;return bf};Fp.Us=function(){var bxm=function(bid,GE,Dh){var bJx,eu=true;if(!!Dh){bm.eJ(GE,function(bz,bX){if(bX==="opacity"){bX="filter";var eg=Fp.bIU(bid,bX);if(eg===""){Fp.bY(bid,"filter","alpha(opacity=100)");bJx=100}else{bJx=parseFloat(eg.split("=")[1])||0}bz=bz*100}else{bJx=Fp.bIU(bid,bX)}if(parseInt(bJx)===bz)eu=false}.bh(this))}else{bm.eJ(GE,function(bz,bX){bJx=Fp.bIU(bid,bX);if(parseInt(bJx)===bz)eu=false}.bh(this))}return eu};return function(bid,GE){var Dh=nej.p.dp.engine==="trident"&&nej.p.dp.release-5<0;if(!bxm(bid,GE,Dh))return!1;return!0}}();Fp.Uv=function(){var bxl=function(bid){var DO=Fp.bIU(bid,"display");if(DO==="none")return!1;return!0};return function(bid,bf,mP){var NC=bf.opacity||mP;bid=Fp.bw(bid);if(!bxl.call(bid))return!1;if(!!bid.effect)return!1;if(!Fp.Us(bid,{opacity:NC}))return!1;bf=Fp.GF(bf);bid.effect=bv.mx.bL({node:bid,transition:[{property:"opacity",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:["opacity:"+NC],onstop:function(dO){bid.effect=bv.mx.ch(bid.effect);bf.onstop.call(null,dO)},onplaystate:bf.onplaystate.bh(bid.effect)});bid.effect.sw();return this}}.bh(this)();Fp.Ux=function(bid,bf){return Fp.Uv(bid,bf,1)};Fp.bxk=function(bid,bf){return Fp.Uv(bid,bf,0)};Fp.bxh=function(bid){Fp.bxg(bid);return this};Fp.bxg=function(bid){bid=Fp.bw(bid);if(bid.effect&&bid.effect.cu()){if(!!bid.effect)bid.effect=bv.mx.ch(bid.effect)}return this};Fp.bxJ=function(bid,kt,bf){bid=Fp.bw(bid);if(!!bid.effect)return!1;if(!Fp.Us(bid,kt))return!1;bf=Fp.GF(bf);bf.duration=bf.duration||[];var bim=kt.top||0,ox=kt.left||0;bid.effect=bv.mx.bL({node:bid,transition:[{property:"top",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration[0]||1},{property:"left",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration[1]||1}],styles:["top:"+bim,"left:"+ox],onstop:function(dO){bf.onstop.call(null,dO);bid.effect=bv.mx.ch(bid.effect)},onplaystate:bf.onplaystate.bh(bid.effect)});bid.effect.sw();return this};Fp.UC=function(){return function(bid,kt,bf){bid=Fp.bw(bid);if(!!bid.effect)return!1;bf=Fp.GF(bf);var bk=kt.split(":"),bxb=bk[0],UE=[];UE.push(kt);bid.effect=bv.mx.bL({node:bid,transition:[{property:bxb,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:UE,onstop:function(dO){bf.onstop.call(null,dO);bid.effect=bv.mx.ch(bid.effect)},onplaystate:bf.onplaystate.bh(bid.effect)});bid.effect.sw();return this}}();Fp.bxK=function(){var Qm=function(bid,bDM){return bDM=="height"?bid.clientHeight:bid.clientWidth};return function(bid,bDM,bf){bid=Fp.bw(bid);if(!!bid.effect)return!1;bf=Fp.GF(bf);var bz=bf.value||false;if(!bz){Fp.bY(bid,"display","block");var bid=Fp.bw(bid);bz=Qm(bid,bDM)}var eu=Fp.bIU(bid,"visibility");if(eu==="hidden"){bid.style.height=0;Fp.bY(bid,"visibility","inherit");bid.effect=bv.mx.bL({node:bid,transition:[{property:bDM,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:[bDM+":"+bz],onstop:function(dO){bf.onstop.call(null,dO);bid.effect=bv.mx.ch(bid.effect);Gy=window.clearTimeout(Gy)},onplaystate:bf.onplaystate.bh(bid.effect)})}else{bid.style.height=bz;bid.effect=bv.mx.bL({node:bid,transition:[{property:bDM,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:[bDM+":"+0],onstop:function(dO){Fp.bY(bid,"visibility","hidden");Fp.bY(bid,bDM,"auto");bf.onstop.call(null,dO);bid.effect=bv.mx.ch(bid.effect);Gy=window.clearTimeout(Gy)},onplaystate:bf.onplaystate.bh(bid.effect)})}var Gy=window.setTimeout(function(){bid.effect.sw()}.bh(this),0);return this}}()})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bK=be("nej.ut"),bm=be("nej.u"),eQ=be("nej.ui"),bq=be("nm.x"),bp=be("nm.d"),bEZ=be("nm.w"),blh=be("api"),bb,bJ;bEZ.bBk=NEJ.C();bb=bEZ.bBk.bN(eQ.ic);bJ=bEZ.bBk.du;bb.bLv=function(){this.dn="m-image-preview"};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.bGf=bk[0];this.byo=bk[1];this.LF=bk[2];this.bFT=bk[3];this.bFB=bk[4];this.bFA=bk[5]};bb.cw=function(bf){this.cA(bf);this.bGS();this.bEN=bf.urls;this.gS=this.bEN.length;if(this.gS==1){Fp.bY(this.bFB,"display","none");Fp.bY(this.bFA,"display","none")}this.dA([[this.bB,"click",this.gI.bh(this)],[document,"keydown",this.bGR.bh(this)]]);bq.bGe(this.bEN,function(bEY,ip){this.qM=ip;this.bEJ(bf.index||0)}.bh(this))};bb.cX=function(){this.dc();Fp.bV(this.byo,"fail-loading");Fp.bR(this.byo,"f-hide");Fp.bY(this.bFB,"display","");Fp.bY(this.bFA,"display","");Fp.bR(this.bFB,"z-cntdis");Fp.bR(this.iK,"z-cntdis");Fp.bR(this.bFA,"z-cntdis");Fp.bR(this.byq,"z-cntdis");this.LF.src="";delete this.bEN;delete this.gS};bb.gI=function(bc){var bid=bj.cf(bc,"action");if(Fp.cJ(bid,"z-dis"))return;switch(Fp.bI(bid,"action")){case"close":this.ch();break;case"prev":this.bEJ(this.dw-1);break;case"next":this.bEJ(this.dw+1);break;case"go":this.bEJ(Fp.bI(bid,"index"));break}};bb.bEJ=function(bu){if(bu<=0){Fp.bV(this.bFB,"z-cntdis")}else{Fp.bR(this.bFB,"z-cntdis")}if(bu>=this.gS-1){Fp.bV(this.bFA,"z-cntdis")}else{Fp.bR(this.bFA,"z-cntdis")}if(bu<0||bu>=this.bEN.length)return;var mz=this.bEN[bu];this.bFT.href=mz;if(this.qM[bu]){Fp.bV(this.byo,"f-hide");this.LF.src=mz}else{this.LF.src="";Fp.bR(this.byo,"f-hide");Fp.bR(this.byo,"fail-loading")}this.dw=bu};blh.imageView=function(bEY,bu){bEZ.bBk.bL({parent:document.body,urls:bEY,index:bu})};bb.bGR=function(bc){bj.cu(bc);switch(bc.keyCode){case 37:this.bEJ(this.dw-1);break;case 39:this.bEJ(this.dw+1);break;case 27:this.ch();break;case 38:this.bGf.scrollTop-=20;break;case 40:this.bGf.scrollTop+=20;break}};bb.bGS=function(){var bDX=Fp.gH("input");this.bB.appendChild(bDX);bDX.focus();Fp.fx(bDX)}})();
(function(){var be=NEJ.P,bZ=NEJ.O,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bq=be("nm.x"),bp=be("nm.d"),bo=be("nm.l"),bb,bJ;bo.Iz=NEJ.C();bb=bo.Iz.bN(bo.eH);bJ=bo.Iz.du;bb.cw=function(bf){this.cA(bf);this.bA=bp.mj.bL();this.bA.bs("onsendcaptcha",this.rf.bh(this));this.bA.bs("onsendcaptchaerror",this.ek.bh(this));this.cP();this.cI(!1);this.zV=bf.title1||"";this.bgW=bf.title2||"";Fp.bY(this.Qs,"display",!this.zV?"none":"");Fp.bY(this.Qr,"display",!this.zV?"none":"");this.Qs.innerHTML=this.zV;this.Qr.innerHTML=this.bgW;this.cZ.value="";Fp.bY(this.Qs,"display",!this.zV?"none":"");Fp.bY(this.Qr,"display",!this.zV?"none":"");Fp.bY(this.dI,"display",!this.Fs?"none":"");Fp.bR(this.cZ,"u-txt-err")};bb.bLv=function(){this.dn="m-wgt-sentcaptchawin"};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.Qs=bk[0];this.Qr=bk[1];this.cZ=bk[2];this.eC=bk[3];this.eN=bk[4];Fp.fm(this.cZ,"holder");bj.bs(this.cZ,"focus",this.ey.bh(this));bj.bs(this.cZ,"keypress",this.jH.bh(this));bj.bs(this.eC,"click",this.kj.bh(this))};bb.ey=function(){Fp.bR(this.cZ,"u-txt-err")};bb.jH=function(bc){if(bc.keyCode==13)this.kj()};bb.kj=function(bc){bj.cG(bc);if(this.cI())return;var eF;if(!(eF=this.qa()))return;this.bG("onsendcaptcha",{mobile:eF});this.cj()};bb.rf=function(bn){this.cI(!1);this.cj();this.bG("onsendcaptcha",bn)};bb.ek=function(bn){this.cI(!1);this.cP(bn.message||"验证码发送失败")};bb.qa=function(){var eF=this.cZ.value.trim();if(!eF||!bq.rT(eF)){Fp.bV(this.cZ,"u-txt-err");this.cP("请输入正确的手机号码");return}this.cP();Fp.bR(this.cZ,"u-txt-err");return eF};bb.cP=function(cD){this.bxe(this.eN,cD)};bb.cI=function(cN){return this.dG(this.eC,cN,"获取验证码","发送中...")}})();
(function(){var be=NEJ.P,bZ=NEJ.O,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bp=be("nm.d"),bo=be("nm.l"),bb,bJ;bo.DB=NEJ.C();bb=bo.DB.bN(bo.eH);bJ=bo.DB.du;bb.cw=function(bf){this.cA(bf);this.bA=bp.mj.bL();this.bA.bs("onmobileresetpwd",this.FL.bh(this));this.bA.bs("onmobileupdatepwd",this.FL.bh(this));this.bA.bs("onmobileresetpwderror",this.ek.bh(this));this.bA.bs("onmobileupdatepwderror",this.ek.bh(this));this.hS=bf.mobile;this.bJi=bf.captcha;this.cP();this.cI(!1);this.es.value="";this.sX.innerHTML=bf.message||"设置密码后，可使用手机号登录";if(!bf.message){Fp.fC(this.ny,"n-set-2","n-set-1")}else{Fp.fC(this.ny,"n-set-1","n-set-2")}Fp.bY(this.kg,"display",!bf.noback?"":"none");Fp.bR(this.es,"u-txt-err")};bb.bLv=function(){this.dn="m-wgt-setpasswordwin"};bb.bFa=function(){this.bLu();var bk=Fp.dh(this.bB);this.ny=bk[0];bk=Fp.bP(this.bB,"j-flag");this.sX=bk[0];this.es=bk[1];this.eN=bk[2];this.kg=bk[3];this.hR=bk[4];Fp.fm(this.es,"holder");bj.bs(this.es,"focus",this.ey.bh(this));bj.bs(this.es,"keypress",this.jH.bh(this));bj.bs(this.kg,"click",this.rX.bh(this));bj.bs(this.hR,"click",this.yG.bh(this))};bb.ey=function(){Fp.bR(this.cZ,"u-txt-err")};bb.jH=function(bc){if(bc.keyCode==13)this.yG()};bb.rX=function(bc){bj.cG(bc);this.cj();this.bG("onback")};bb.yG=function(bc){bj.cG(bc);if(this.cI())return;var eE;if(!(eE=this.nS()))return;this.cI(!0);if(!this.bJi){var bl={phone:this.hS,oldPassword:"",password:bm.mi(eE)};this.bA.bkv({data:bl});return}var bl={phone:this.hS,captcha:this.bJi,password:bm.mi(eE)};this.bA.bcG({data:bl})};bb.FL=function(bn){this.cI(!1);this.cj();this.bG("onnext",bn)};bb.ek=function(bn){this.cI(!1);this.cP("密码设置失败")};bb.nS=function(){var eE=this.es.value;if(/[^\x00-\xff]/.test(eE)){Fp.bV(this.es,"u-txt-err");this.cP("密码不支持中文字符");return}if(!eE||eE.length<6||eE.length>16){Fp.bV(this.es,"u-txt-err");this.cP(!eE?"请输入密码":"请输入6到16个字符的密码");return}this.cP();Fp.bR(this.es,"u-txt-err");return eE};bb.cP=function(cD){this.bxe(this.eN,cD)};bb.cI=function(cN){return this.dG(this.hR,cN,"完　成","设置中...")}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bH=be("nej.j"),bZ=be("nej.o"),bj=be("nej.v"),bm=be("nej.u"),ib=be("nej.ut"),eQ=be("nej.ui"),bp=be("nm.d"),bq=be("nm.x"),bo=be("nm.l"),bb,bJ;bo.Qc=NEJ.C();bb=bo.Qc.bN(ib.eW,!0);bb.dv=function(){this.dF();this.kS=[{klass:bo.Iz,opt:{parent:document.body,title:"绑定手机号",onclose:this.DA.bh(this),onsendcaptcha:this.kj.bh(this)}},{klass:bo.Iy,opt:{parent:document.body,title:"绑定手机号",onclose:this.DA.bh(this),onback:function(){this.kX(0)}.bh(this),onnext:this.Bm.bh(this)},api:top.api.phoneCode},{klass:bo.DB,opt:{parent:document.body,title:"设置密码",onclose:this.DA.bh(this),onback:function(){this.kX(1)}.bh(this),onnext:this.PT.bh(this)}}]};bb.cw=function(bf){this.cA(bf);if(bf&&bm.fz(bf.conf)){if(bf.conf[0]){this.kS[0].opt.title1=bf.conf[0].title1;this.kS[0].opt.title2=bf.conf[0].title2;this.kS[0].opt.tip=bf.conf[0].tip}if(bf.conf[1]){this.kS[1].opt.head=bf.conf[1].head}if(bf.conf[2]){this.kS[2].opt.head=bf.conf[2].head;this.kS[2].opt.message=bf.conf[2].message}}this.PN=(bf||{}).relogin;this.jm={};this.kX(0);this.NE=0};bb.DA=function(bc){this.bG("onabort")};bb.cX=function(){this.dc()};bb.kX=function(iR){this.tg=iR||0;var iz=this.kS[this.tg];if(iz){iz.opt.mobile=this.jm.mobile;iz.opt.captcha=this.jm.captcha;if(iz.api){iz.api(iz.opt)}else{iz.klass.bL(iz.opt).bO()}}};bb.kj=function(bn){this.jm.mobile=bn.mobile;this.kX(1)};bb.Bm=function(bn){this.jm.captcha=bn.captcha;bH.cR("/api/user/bindingCellphone",{type:"json",method:"post",query:{phone:this.jm.mobile,captcha:bn.captcha},onload:this.Vm.bh(this),onerror:this.Vm.bh(this)})};bb.PT=function(bn){if(this.PN){bH.cR("/api/mainAccount/set",{type:"json",method:"post",query:{phone:this.jm.mobile,password:bn.password},onload:this.Do.bh(this),onerror:this.Do.bh(this)});return}bo.ep({type:"success",title:"绑定成功",mesg:"绑定成功"+(this.NE>0?' 获得<em class="s-fc6">'+this.NE+"积分</em>":""),mesg2:"以后可直接用手机号登录云音乐"});this.bG("onsuccess")};bb.Do=function(bc){bo.ep({type:"success",title:"绑定成功",mesg:"绑定成功",mesg2:"以后可直接用手机号登录云音乐"});if(bc&&bc.code==200){localCache.nK("user",bc);bj.bG(window,"login",{user:bc})}};bb.Vm=function(bc){if(bc.code==200){this.NE=bc.point;this.kX(2)}else{if(bc.code==506){bo.ep({type:"fail",title:"绑定失败",mesg:"绑定失败",mesg2:"手机号已被绑定在云音乐帐号："+bc.bindingNickname})}else{bo.ep({type:"fail",title:"绑定失败",mesg:"绑定失败"})}}};bb.Ph=function(bc){if(bc.code==200){top.g_cbBind({code:200,type:1,message:"以后可直接用手机号登录云音乐",cellphone:this.jm.mobile})}else{bo.ep({type:"fail",title:"设置密码失败",mesg:"设置密码失败"})}}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bH=be("nej.j"),bZ=be("nej.o"),bj=be("nej.v"),bm=be("nej.u"),ib=be("nej.ut"),eQ=be("nej.ui"),bp=be("nm.d"),bq=be("nm.x"),bo=be("nm.l"),bb,bJ;bo.beL=NEJ.C();bb=bo.beL.bN(ib.eW,!0);bb.dv=function(){this.dF();this.kS=[{klass:bo.DB,opt:{parent:document.body,title:"设置密码",onclose:this.DA.bh(this),noback:true,onnext:this.PT.bh(this)}}]};bb.cw=function(bf){this.cA(bf);if(bf&&bm.fz(bf.conf)){if(bf.conf[0]){var eF=bf.conf[0].mobile;this.kS[0].opt.mobile=eF;this.kS[0].opt.message="云音乐即将不支持腾讯微博登录，设置密码后，<br/>可使用手机号"+bq.bks(eF)+"登录"}}this.PN=(bf||{}).relogin;this.jm={};this.kX(0)};bb.cX=function(){this.dc()};bb.DA=function(bc){this.bG("onabort")};bb.kX=function(iR){this.tg=iR||0;var iz=this.kS[this.tg];if(iz){iz.klass.bL(iz.opt).bO()}};bb.PT=function(bn){if(this.PN){bH.cR("/api/mainAccount/set",{type:"json",method:"post",query:{phone:bn.mobile,password:bn.password},onload:this.Do.bh(this),onerror:this.Do.bh(this)});return}bo.ep({type:"success",title:"密码设置成功",mesg:"密码设置成功",mesg2:"以后可直接用手机号登录云音乐"});this.bG("onsuccess")};bb.Do=function(bc){bo.ep({type:"success",title:"密码设置成功",mesg:"密码设置成功",mesg2:"以后可直接用手机号登录云音乐"});if(bc&&bc.code==200){localCache.nK("user",bc);bj.bG(window,"login",{user:bc})}}})();
(function(){var be=NEJ.P,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),dE=be("nej.p"),bH=be("nej.j"),fS=be("nm.ut"),bEZ=be("nm.w"),bo=be("nm.l"),bq=be("nm.x"),bb,bJ;bo.NQ=NEJ.C();bb=bo.NQ.bN(bo.eH);bJ=bo.NQ.du;bb.dv=function(bf){bf.title="转发动态";this.dF(bf)};bb.cw=function(bf){if(bf.onclose===undefined)bf.onclose=function(){this.cj()}.bh(this);this.cA(bf);this.gx=bf.rid;this.mZ=bf.uid;this.bkh=bf.text;this.eY.value=this.bkh;this.gG=bEZ.AE.bL({parent:document.body,target:this.eY})};bb.bLv=function(){this.dn="m-wgt-forward"};bb.bFa=function(){this.bLu();var cm=Fp.bP(this.bB,"j-flag");this.vP=cm[0];this.eY=cm[1];this.Oz=cm[2];this.bke=cm[3];this.AF=cm[4];this.jz=cm[5];this.bcN=cm[6];this.bkd=cm[7];this.qp=cm[8];bj.bs(this.eY,"input",this.is.bh(this));bj.bs(this.eY,"keyup",this.IE.bh(this));bj.bs(this.eY,"click",this.iO.bh(this));bj.bs(this.AF,"click",this.OE.bh(this));bj.bs(this.bke,"click",this.OF.bh(this));bj.bs(this.bcN,"click",this.bkc.bh(this));bj.bs(this.bkd,"click",this.NL.bh(this))};bb.cX=function(){this.dc();if(this.fR){this.fR.ch();delete this.fR}if(this.gG){this.gG.ch();delete this.gG}};bb.is=function(bc){dE.dp.browser=="ie"&&dE.dp.version<"7.0"?setTimeout(this.gb.bh(this),0):this.gb()};bb.IE=function(bc){this.iO();this.is()};bb.gb=function(){var ck=this.eY.value.trim().length;this.jz.innerHTML=!ck?"140":140-ck;ck>140?Fp.bV(this.jz,"s-fc6"):Fp.bR(this.jz,"s-fc6");if(!ck||ck==0)Fp.bY(this.vP,"display","block");else Fp.bY(this.vP,"display","none")};bb.OE=function(bc){bj.cu(bc);!!this.fR&&this.fR.cj();this.gG.AB();this.gb()};bb.OF=function(bc){bj.cu(bc);if(!this.fR){this.fR=bo.xt.bL({parent:this.Oz});this.fR.bs("onselect",this.qx.bh(this))}this.fR.bO()};bb.qx=function(bc){var ci="["+bc.text+"]";fS.xk(this.eY,this.kJ,ci);this.gb();bj.bG(this.eY,"keyup")};bb.iO=function(){this.kJ=fS.ov(this.eY)};bb.bkc=function(bc){bj.cu(bc);if(this.dG())return;if(this.eY.value.trim().length>140){this.bxe("字数超过140个字符");return}var bka=this.eY.value.trim();var il=window.GUser.userId;var bC=this.gx;var cg="/api/event/forward";var bl={forwards:bka,id:this.gx,eventUserId:this.mZ};bl=bm.eK(bl);this.dG(!0);var fb=bH.cR(cg,{sync:false,type:"json",data:bl,method:"POST",onload:this.RU.bh(this),onerror:this.jh.bh(this)})};bb.RU=function(bn){this.dG(!1);if(bn.code!=200){var cD="转发失败";switch(bn.code){case 404:cD=bn.message||"该动态已被删除";break;case 407:cD="输入内容包含有关键字";break;case 408:cD="转发太快了，过会再分享吧";break}this.bxe(cD);return}fS.YX(this.eY.value);this.cj();bo.cq.bO({tip:"转发成功！",autoclose:true});this.bG("onforward",{id:this.gx,eventUserId:this.mZ})};bb.jh=function(bl){this.dG(!1);this.bxe(cD)};bb.dG=function(cN){return bJ.dG(this.bcN,cN,"转发","转发中 ...")};bb.bxe=function(cD){return bJ.bxe(this.qp,cD)};bb.NL=function(bc){bj.cG(bc);this.cj()};bb.jq=function(){this.eY.focus();if(dE.dp.browser=="ie"&&parseInt(dE.dp.version)<10)return;fS.HN(this.eY,{start:0,end:0});this.iO()};bb.cj=function(){bJ.cj.call(this);if(this.fR){this.fR.ch();delete this.fR}if(this.gG){this.gG.ch();delete this.gG}};bb.bO=function(bf){bJ.bO.call(this);this.bxe();this.dG(!1);this.gb();this.jq();this.kJ=fS.ov(this.eY)};bq.NK=function(bf){if(!GUser||!GUser.userId||GUser.userId<=0){bo.kA.bO({title:"登录"});return}if(bf.title===undefined)bf.title="转发动态";bo.NQ.bO(bf)}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bK=be("nej.ut"),bH=be("nej.j"),bq=be("nm.x"),bp=be("nm.d"),fS=be("nm.ut"),bo=be("nm.l"),bb,bJ;bo.Mu=NEJ.C();bb=bo.Mu.bN(bo.eH);bJ=bo.Mu.du;bb.dv=function(){this.dF()};bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");this.gM=bk[0];this.Ls=bk[1];this.dI=bk[2];this.Xw=bk[3];this.eN=bk[4];bj.bs(this.bB,"click",this.dC.bh(this));bj.bs(this.gM,"input",this.is.bh(this));bj.bs(this.gM,"keyup",this.tG.bh(this))};bb.bLv=function(){this.dn="m-sharesingle-layer"};bb.cw=function(bf){bf.parent=bf.parent||document.body;bf.title=bf.title||"分享";bf.draggable=!0;bf.mask=!0;bf.clazz="m-layer m-layer-w2";this.cA(bf);this.gM.value=bf.mesg||"";this.bS={id:bf.rid,type:bf.type,picUrl:bf.purl,snsType:bf.snsType,resourceUrl:bf.rurl};if(!this.bS.resourceUrl)delete this.bS.resourceUrl;this.uE();this.bxe(null);this.dG(false)};bb.dC=function(bc){var bid=bj.cf(bc,"d:action"),cv=Fp.bI(bid,"action");bj.cG(bc);switch(cv){case"txt":this.iO();break;case"emt":bj.lg(bc);!!this.gG&&this.gG.xu();if(!this.fR){this.fR=bo.xt.bL({parent:this.Ls});this.fR.bs("onselect",this.qx.bh(this))}this.fR.bO();break;case"ok":this.bxe(null);if(this.kO)return;if(this.gM.value.trim().length>140){this.bxe("字数超过140个字符");return}this.dG(true);this.bS.msg=this.gM.value;if(!this.bS.resourceUrl){delete this.bS.resourceUrl}bH.cR("/sns/share/resource",{type:"json",method:"post",data:bm.eK(this.bS),onload:this.uu.bh(this),onerror:this.uu.bh(this)});break;case"cc":this.cj();break}};bb.qx=function(bc){var ci="["+bc.text+"]";fS.xk(this.gM,this.kJ,ci);this.uE()};bb.is=function(){this.uE();this.iO()};bb.tG=function(){this.uE();this.iO()};bb.uE=function(){var ck=this.gM.value.trim().length;this.dI.innerText=140-ck;ck>140?Fp.fC(this.dI,"s-fc4","s-fc6"):Fp.fC(this.dI,"s-fc6","s-fc4")};bb.iO=function(){this.kJ=fS.ov(this.gM)};bb.uu=function(bc){var gR={407:"输入内容包含有关键字",404:"分享的资源不存在",408:"分享太快了，过会再分享吧"};if(bc.code==200){this.bG("onsuccess",bc);if(!bc.stopped){bo.cq.bO({tip:"分享成功！",autoclose:true})}this.cj()}else{this.bxe(gR[bc.code]||"分享失败")}this.dG(false)};bb.bxe=function(Xv){if(Xv){this.eN.innerHTML='<i class="u-icn u-icn-25"></i>'+Xv;Fp.bR(this.eN,"f-hide")}else{Fp.bV(this.eN,"f-hide")}};bb.dG=function(vX){this.kO=vX;if(vX){this.Xw.innerHTML="<i>分享中...</i>"}else{this.Xw.innerHTML="<i>分享</i>"}};bb.bO=function(){bJ.bO.call(this);var jx=this.gM.value.length;fS.HN(this.gM,{start:jx,end:jx,text:""});this.iO()}})();
(function(){var be=NEJ.P,bZ=NEJ.O,co=NEJ.F,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bK=be("nej.ut"),bH=be("nej.j"),bq=be("nm.x"),bp=be("nm.d"),blh=be("api"),bo=be("nm.l"),bb,bJ;bo.bEd=NEJ.C();bb=bo.bEd.bN(bo.eH);bb.bFa=function(){this.bLu();var bk=Fp.bP(this.bB,"j-flag");bj.bs(this.bB,"click",this.gI.bh(this))};bb.bLv=function(){this.dn="m-simple-share-layer"};bb.cw=function(bf){bf.clazz="m-layer-w6";if(!bf.shareType)bf.parent=bf.parent||document.body;bf.title=bf.title||"分享";bf.draggable=!0;bf.mask=bf.mask||true;this.cA(bf);this.bS={id:bf.id||0,type:bf.type||"activity",picUrl:bf.picUrl,msg:bf.text,resourceUrl:bf.resourceUrl,summary:bf.summary};this.dA([[window,"snsbind",this.uF.bh(this)],[window,"snsbinderror",this.cj.bh(this)]]);this.yA={rid:this.bS.id,rurl:this.bS.resourceUrl,purl:this.bS.picUrl,mesg:this.bS.msg,type:this.bS.type,onsuccess:bf.onsuccess};if(bf.shareType){this.bKf(bf.shareType)}};bb.gI=function(bc){var bid=bj.cf(bc,"d:type"),bDM=Fp.bI(bid,"type");this.bKf(bDM)};bb.bKf=function(bDM){switch(bDM){case"xlwb":case"rr":case"db":var nM={xlwb:2,rr:4,db:3},bhH=nM[bDM],lH=localCache.OG("user.bindings")||[],bu=bm.dY(lH,function(bt){return bt.type==bhH&&!bt.expired});if(bu>=0){this.wm(bhH)}else{var hM={snsType:bhH,callbackType:"Binding",clientType:"web2",forcelogin:true,csrf_token:bH.fN("__csrf")};top.window.open("/api/sns/authorize?"+bm.eK(hM))}break;case"wx":case"yx":var hM={resourceUrl:this.bS.resourceUrl,type:bDM};top.open("/share/QRCode?"+bm.eK(hM));this.cj();break;case"qzone":var jT={url:this.bS.resourceUrl,title:this.bS.msg||"",pics:this.bS.picUrl,summary:this.bS.summary};top.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+bm.eK(jT));this.cj();break;case"lofter":var jT={from:"cloudmusic",image:this.bS.picUrl,source:"网易云音乐",sourceurl:this.bS.resourceUrl,content:this.bS.msg};top.open("http://www.lofter.com/sharephoto/?"+bm.eK(jT));this.cj();break}};bb.uF=function(bc){this.wm(bc.result.type)};bb.wm=function(bDM){this.cj();if(this.Iv){this.Iv.ch();delete this.Iv}this.yA.snsType=bDM;this.Iv=bo.Mu.bL(this.yA);this.Iv.bO()};var dx=null;blh.simpleShare=function(bf){if(dx)dx.ch();dx=bo.bEd.bL(bf).bO()}})();
(function(){var be=NEJ.P,bZ=NEJ.O,Fp=be("nej.e"),bj=be("nej.v"),bm=be("nej.u"),bH=be("nej.j"),bK=be("nej.ut"),bp=be("nm.d"),bq=be("nm.x"),bM=be("nm.m"),bo=be("nm.l"),bE=be("nm.m.f"),blh=be("api"),rn=/#(.*?)$/,bb,bJ;bE.beK=NEJ.C();bb=bE.beK.bN(bK.bFb);bb.cE=function(){this.cL();window.onHashChange=this.Hp.bh(this);window.log=this.AZ.bh(this);window.share=this.wm.bh(this);window.login=this.bht.bh(this);window.logout=this.bhu.bh(this);window.subscribe=this.EV.bh(this);window.onIframeClick=this.bhv.bh(this);window.g_cbBind=this.By.bh(this);window.g_cbLogin=this.iJ.bh(this);bj.bs(window,"login",this.pk.bh(this));bj.bs(window,"playchange",this.bJI.bh(this));bj.bs(window,"playstatechange",this.bhw.bh(this));this.bhx();this.cz=bE.Dm.bL();this.cz.bG("onshow",{});bH.cR("/api/login/token/refresh",{type:"json",method:"post"});this.Hp(bq.uy());this.byu=bM.bEe.bL();blh.refreshUserInfo=this.byu.bDx.bh(this.byu);this.bHW()};bb.bhx=function(){var gr={account:{},profile:{},bindings:[]};if(typeof GUser!=="undefined"){gr.profile.userId=GUser.userId;gr.profile.nickname=GUser.nickname;gr.profile.avatarUrl=GUser.avatarUrl}if(typeof GBinds!=="undefined"){gr.bindings=GBinds}localCache.nK("user",gr);this.gV=bp.qE.bL();this.xw=bp.mj.bL();this.xw.bs("onlogout",this.bhz.bh(this));this.xw.bs("onmainaccountreplace",this.iJ.bh(this))};bb.Hp=function(bLw){var bc=location.parse(bLw);this.nz(bc)};bb.nz=function(bc,bDM){var fe=Fp.bw("g_iframe"),gv=bc.path,cC=bc.query,bLi=fe.contentWindow.location;this.rQ=fe;if(/^\/mv/.test(gv)){if(this.cz)this.cz.cj();this.oh=document.title}else{if(this.cz)this.cz.bO();document.title=this.oh||bq.Ig()}if(cC.play=="true"&&/^\/(m\/)?song/.test(gv)){if(this.cz)this.cz.sJ(18,cC.id,true)}if(/^\/my\/m\/music\/playlist/.test(gv)){var sU=bq.He();if(!sU&&!!cC.id){location.dispatch2("/playlist?id="+cC.id);return}}if(bDM!==undefined){if(gv=="/my/"||gv=="/friend"||gv=="/event")GDispatcher.refreshIFrame(bc.href);else bLi.reload();return}};bb.pk=function(){var Ol=function(bhC){bH.fN("MUSIC_U",{expires:-1});if(!bhC)this.xw.bcU();else this.xw.bjZ();var cW=bo.kA;cW.bO({title:"登录"})};var Og=function(eu){var bLw=rn.test(location.href)?RegExp.$1:"",bc=location.parse(bLw);this.byu.bDx();if(this.rQ&&this.rQ.contentWindow&&this.rQ.contentWindow.CbLogin&&this.rQ.contentWindow.CbLogin()){return}this.nz(bc,eu)};return function(bc){if(typeof GUser==="object"&&bc.user&&bc.user.profile){var Of=bc.user.profile;GUser.userId=Of.userId;GUser.nickname=Of.nickname;GUser.avatarUrl=Of.avatarUrl;GUser.djStatus=Of.djStatus}var gr=localCache.bw("user");if(gr.account&&gr.account.type==6){if(gr.loginType==6){var Oe=null,beF=false,beD=false;for(var i=0,bk=gr.bindings||[],eh;i<bk.length;++i){if(bk[i].type!=1)continue;try{eh=JSON.parse(bk[i].tokenJsonStr)}catch(e){}if(eh){Oe=eh.cellphone;beF=true;beD=!!eh.hasPassword;break}}if(!beF){bo.Qc.bL({conf:[{title1:"云音乐即将不支持腾讯微博登录",title2:"绑定手机号后，可使用手机号登录",tip:"为了安全，我们会向你的手机发送短信验证码！"},{head:""},{message:"设置密码后，可使用手机号登录"}],relogin:true,onabort:Ol.bh(this)});Og.call(this,1);return}if(!beD){bo.beL.bL({conf:[{mobile:Oe}],relogin:true,onabort:Ol.bh(this)});Og.call(this,1);return}bo.kQ.bO({title:"手机号登录",onclose:Ol.bh(this,true),tweibo:true,mobile:Oe})}else{this.xw.bkH({data:{type:gr.loginType}});var bLs={1:"手机号",0:"网易邮箱",2:"新浪微博"};bq.bKQ({title:"登录说明",message:"云音乐即将不支持腾讯微博登录<br/>系统将自动把"+(bLs[gr.loginType]||"")+"设置为你的主帐号",btnok:"查看详情",btncc:"我知道了",okstyle:"u-btn2-w1",ccstyle:"u-btn2-w1",action:function(bDM){if(bDM=="ok"){location.hash="/user/binding"}}})}}else{Og.call(this,1)}}}();bb.bJI=function(bc){if(this.rQ){var fZ=this.rQ.contentWindow;if(fZ.nej&&fZ.nej.v)fZ.nej.v.bG(fZ,"playchange",bc)}};bb.bhw=function(bc){if(!this.rQ)return;var fZ=this.rQ.contentWindow;try{if(fZ.nej&&fZ.nej.v)fZ.nej.v.bG(fZ,"playstatechange",bc)}catch(e){}};bb.AZ=function(cv,bQ){switch(cv){case"play":this.gV.gJ(bQ);break;case"search":this.gV.bft(bQ);break;default:this.gV.tq(cv,bQ)}};bb.bhu=function(){bo.Fw.cj();bH.fN("MUSIC_U",{expires:-1});this.xw.bcU();window.GUser={};this.byu.bDx()};bb.bhz=function(bn){localCache.fx("user");localCache.fx("host-plist");if(typeof GUser==="object"){GUser.userId=0;GUser.nickname="";GUser.avatarUrl=""}if(!location.hash||location.hash=="#"){var bLw=rn.test(location.href)?RegExp.$1:"",bc=location.parse(bLw);this.nz(bc,0);return}location.hash="#"};bb.bht=function(bDM){bo.kA.cj();bo.kQ.cj();bo.pV.cj();var cW=bDM===undefined?bo.kA:bDM==0?bo.kQ:bo.pV;cW.bO({title:bDM===undefined?"登录":bDM==0?"手机号登录":"网易邮箱帐号登录"})};bb.iJ=function(bn){if(bn&&bn.code==200){var gZ=JSON.stringify(bn);localCache.nK("user",JSON.parse(gZ));if(bn.profile){this.pk({user:bn})}else{bo.nE.bO({title:"昵称设置"})}return}};bb.wm=function(){if(this.rQ.contentWindow.share){this.rQ.contentWindow.share.apply(this.rQ.contentWindow,arguments)}};bb.EV=function(bU,bhI){var fZ=this.rQ.contentWindow;if(fZ.nm&&fZ.nm.x){if(!fZ.nm.x.iE){fZ=top.window}if(bhI&&fZ.nm.x.bae){fZ.nm.x.bae({data:bU.program})}else if(fZ.nm.x.iE){var bk=bm.fz(bU)?bU:[bU];fZ.nm.x.iE({tracks:bk})}}};bb.bhv=function(bc){bj.bG(window,"iframeclick")};bb.By=function(bn){var bu,lH=localCache.OG("user.bindings")||[],fZ=this.rQ.contentWindow;if(bn.code==200){bu=bm.dY(lH,function(bd){return bd.type==bn.type});bn.refreshTime=Math.floor((new Date).getTime()/1e3);bn.tokenJsonStr=JSON.stringify(bn);if(bu>=0){lH[bu]=bn}else{lH.push(bn)}try{if(fZ.nej&&fZ.nej.v)fZ.nej.v.bG(fZ,"snsbind",{result:bn})}catch(e){}bj.bG(window,"snsbind",{result:bn})}else{try{if(fZ.nej&&fZ.nej.v)fZ.nej.v.bG(fZ,"snsbind",{result:bn})}catch(e){}if(bn.stopped)return;if(bn.code==400){bo.ep({title:"解绑失败",type:"fail",mesg:"解绑失败",mesg2:bn.message||""})}else{bo.ep({title:"绑定失败",type:"fail",mesg:"绑定失败",mesg2:bn.message||"绑定失败"})}bj.bG(window,"snsbinderror",{result:bn})}};bb.bHW=function(){bH.cR("/api/copyright/pay_fee_message/config",{type:"json",onload:function(bc){if(bc.code==200){blh.feeMessage=bc.config}}})};bK.hh.bL({element:window,event:["login","snsbind","snsbinderror","playchange","iframeclick","playstatechange"]});Fp.dN("template-box");new bE.beK})()
