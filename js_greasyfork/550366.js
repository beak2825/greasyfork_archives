// ==UserScript==
// @name         微博Weibo关键词涂白/微博热搜含金量鉴定器
// @namespace    local.weibo.kwwhite
// @version      1.3
// @description  把网页内的关键词涂抹成白色,达到不看关键词的效果。支持微博、今日热榜等。
// @author       you
// @match        *://*.weibo.cn/*
// @match        *://weibo.cn/*
// @match        *://weibo.com/*
// @match        *://s.weibo.com/*
// @match        *://rebang.today/*
// @match        *://tophub.today/*
// @match        *://www.xiaohongshu.com/*
// @match        *://www.zaobao.com.sg/*
// @match        *://wp.m.163.com/*
// @run-at       document-end
// @grant        none
// @license MIT
// @downloadURL https://update.greasyfork.org/scripts/550366/%E5%BE%AE%E5%8D%9AWeibo%E5%85%B3%E9%94%AE%E8%AF%8D%E6%B6%82%E7%99%BD%E5%BE%AE%E5%8D%9A%E7%83%AD%E6%90%9C%E5%90%AB%E9%87%91%E9%87%8F%E9%89%B4%E5%AE%9A%E5%99%A8.user.js
// @updateURL https://update.greasyfork.org/scripts/550366/%E5%BE%AE%E5%8D%9AWeibo%E5%85%B3%E9%94%AE%E8%AF%8D%E6%B6%82%E7%99%BD%E5%BE%AE%E5%8D%9A%E7%83%AD%E6%90%9C%E5%90%AB%E9%87%91%E9%87%8F%E9%89%B4%E5%AE%9A%E5%99%A8.meta.js
// ==/UserScript==

(function () {
  'use strict';

  /** 1 在这里添加/删除你的关键词 **/

  const KEYWORDS = [


"#","14亿","@","BLACKPINK","C位","GAI","Gucci","HarmonyOS","S妈","TFBOYS","TF家族","angelababy","iPhone","ins","labubu","papi酱","vivo","vs","xdm","xxn",
"一","丁一宇","丁克","丁真","丁禹兮","丁程鑫","七","万","万达","三","上海","上身","下班","不","不同意","不能","与","世界","东风日产","东风汽车",
"丞磊","严子贤","严浩翔","个","中介","中医","中国","中药","临时工","为","为什么","为啥","乌克兰","乔妍","乔振宇","九","了","二","二胎","于东来",
"于垚","于正","于洋","于适","五","五月天","井柏然","井胧","井迪","京东","亮相","人","人日","人民日报","人生","亿","什么","介绍","代","代表作",
"代言","以色列","任嘉伦","任敏","任素汐","任豪","休息","伴郎","位","体制内","何婧婧","何广智","何惟芳","何晟铭","何炅","何瑞贤","何超莲","余承东","余承恩","余适",
"佟丽娅","侯明昊","侵权","俊辰","保利","保姆","保暖","俞灏明","修杰楷","倒霉","假唱","偶遇","偷偷","偷拍","儿子","先生","克拉拉","入围","全伊伦","全女",
"全智贤","全红婵","全运会","八","公安部","公布","六","关晓彤","关淑怡","具俊晔","具象化","内卷","内娱","内耗","冯建宇","冯德伦","况盛","冷","准备","出轨",
"出道","出镜","分手","刘些宁","刘亦菲","刘令姿","刘佩琦","刘嘉玲","刘大锤","刘奕君","刘奕畅","刘宇","刘宇宁","刘宪华","刘德华","刘思慕","刘思远","刘敏涛","刘昊然","刘晓庆",
"刘浩存","刘涛","刘端端","刘耀文","刘芮麟","刘芸","刘萧旭","刘诗诗","刘轩丞","刘雨昕","刘雯","创业","删帖","到位","到底","刻薄","前夫","前妻","加密货币","加沙",
"动态","包文婧","包贝尔","北京","区块链","十","千","华为","华晨宇","华裔","卓沅","单依纯","南京","南昌","南派三叔","卢伟冰","卢昱晓","卢远","卢靖姗","卫兰",
"卫蓝","印小天","原来","原生家庭","双11","双十一","发文","发现","古天乐","叫","召回","台湾","台风","史可","叶童","叶蒨文","司徒岭","合唱","吉克隽逸","同年",
"同意","同日","同月","同框","后","后续","吐槽","向佐","向佑","向太","吗","听","吴世勋","吴京","吴克群","吴冠中","吴彦祖","吴慷仁","吴昕","吴樾",
"吴磊","吴艳妮","吵架","周也","周传雄","周冬雨","周安信","周峻纬","周慧敏","周政杰","周星驰","周杰伦","周柏豪","周深","周翊然","周诗雨","周震南","周鸿祎","和","哈妮克孜",
"哈尔滨","哥","哪吒","唐俪辞","唐国强","唐嫣","唐怜月","唐朝诡事录","唐艺昕","唐诡","唱","啊","啥","啥样","喊话","嘉宾","嘎子","四","回应","囤货",
"国际","在","坣娜","备战","复出","夏思齐","夏梦","外卖","大","大S","大事","大冰","大理","大秀","天塌","天猫","夫妻","央视","奇瑞","奔跑吧",
"奖","奥黛丽赫本","女","女主","女主角","女儿","女友","女子","女孩","女星","女生","女神","好","好久","好嗑","好笑","如何","如果","妈咪","妈妈",
"妹子","妻子","姚安娜","姚琛","姜妍","姜李韵喆","姜潮","娃哈哈","娃娃","娜娜","娜扎","婉拒","婚姻","婚礼","婚纱","孔雪儿","孕妇","字节跳动","孙一宁","孙俪",
"孙宇晨","孙怡","孙恩胜","孙红雷","孙艺珍","孙菲菲","孙颖莎","孟佳","孟子义","孟宴臣","孟美岐","学生","宁艺卓","宁静","安徽","宋亚轩","宋佳","宋妍霏","宋威龙","宋小宝",
"宋慧乔","宋浩然","宋祖儿","宋茜","宋轶","宗馥莉","官宣","官方","定位","定档","宝妈","实力","客服","容祖儿","将","小S","小孩","小沈阳","小米","少女",
"尔滨","尚雯婕","就能","尸","尹浩宇","居然","展轩","岳云鹏","岳雨婷","工作室","工资","左航","差点","已","巴勒斯坦","希林娜依高","带伤","常华森","干","幽门螺旋杆菌",
"广东","广场舞","广州","广电总局","庆生","建议","开机","张一山","张丹峰","张书伟","张予曦","张伟丽","张元英","张兴朝","张凌赫","张召忠","张嘉益","张天爱","张天阳","张婧仪",
"张子枫","张子萱","张家辉","张小斐","张峻豪","张帅","张康乐","张弛","张慧雯","张新成","张晋","张晚意","张智霖","张杰","张极","张柏芝","张栋梁","张檬","张泽禹","张海宇",
"张真源","张碧晨","张继科","张维伊","张翰","张艺兴","张艺凡","张若昀","张萌","张译","张远","张铎","张雅琪","张雅钦","张雨绮","张雪峰","张靓颖","张静初","张颂文","张馨予",
"强","当地","彭于晏","彭小苒","彭昱畅","征婚","律师","徐冬冬","徐峥","徐志胜","徐明浩","徐正溪","徐瑛彬","徐璐","徐艺洋","得","微信","微博","快递","快递员",
"怀孕","怎么","怕","怼脸","恋情","恋综","情绪价值","惠英红","感谢","慎婕","慕雨墨","慕雪薇","成毅","成龙","我","我国","或成","戚薇","戴向宇","戴燕妮",
"打工","打赏","抄袭","报平安","探店","提名","揭秘","支付宝","收视率","敖瑞鹏","整容","文泰一","文淇","文章","断层","斯琴高娃","新剧","新晋","新生","新疆",
"方媛","方瑾","无论","日本","时代少年团","时代峰峻","明星","易梦玲","易烊千玺","是不是","晒","晚会","智己","暂停","曝","更新","曹政奭","曹雪芹","曹颖","曼谷",
"曾舜晞","最后","有望","朋友","服务员","本人","朱一龙","朱丽岚","朱孝天","朱延浩","朱志鑫","朱桢","朱梓予","朱珠","朱苏","朱雨玲","朴宝英","朴敏英","朴正民","机场",
"杀青","杂志","权志龙","李一桐","李乃文","李亚鹏","李佳航","李兰迪","李冰冰","李在仁","李宇春","李宛妲","李川","李庚希","李惠利","李慧英","李承铉","李斯丹妮","李施嬅","李昀锐",
"李昊","李明磊","李晟","李晨","李栋旭","李梦","李沁","李沉舟","李沛恩","李湘","李煜东","李现","李相沅","李禹熹","李秀满","李秉宪","李维刚","李艺彤","李荣浩","李行亮",
"李连杰","李雪琴","李鸿其","杜海涛","杜淳","杨丞琳","杨乐乐","杨仕泽","杨博文","杨和苏","杨天真","杨幂","杨洋","杨瀚森","杨紫","杨蓉","杨超越","杨迪","杨采钰","杨雨潼",
"杭州","林一","林依轮","林俊杰","林允","林允儿","林子祥","林小宅","林尚武","林峯","林心如","林忆莲","林志炫","林江国","林雨薇","林青霞","柏成训","柬埔寨","柯洁","柯爱林",
"柯纯","柳冈旻","柳智敏","柴怼怼","树一","桂纶镁","梁朝伟","梁靖崑","梅婷","梓渝","樊振东","檀健次","欧豪","欧阳妮妮","欧阳娜娜","欧阳娣娣","歌","歐陽娜娜","正告","正确",
"段奥娟","殷世航","母女","比","比亚迪","毕雯珺","毛不易","毛晓彤","气血","气血很足","气血足","水着","求婚","求生欲","汤唯","汪东城","汪峰","汪涵","汪苏泷","汪顺",
"沈佳润","沈月","沈梦瑶","沈梦辰","沈涛","沈皓明","沈羽洁","沈腾","沙溢","没分手","没有","河南","油车","法院","泡泡玛特","泽连斯基","洗澡","洗碗","洪尧","洪欣",
"洱海","派出所","流感","浪姐","淘宝","深圳","深夜发文","温峥嵘","港媒","演唱会","演技","演绎","潘展乐","潘玮柏","潘珺雅","澎湃","澳门","炎症","点名","点赞",
"烧烤","热依扎","热巴","热度","热搜","焦俊艳","焦点","照","熊猫","熊黛林","爆料","爱奇艺","爷爷","爸爸","牵手","状态","玄彬","王一博","王一通","王乐晨",
"王以纶","王传君","王俊凯","王健林","王冕","王力宏","王嘉尔","王大陆","王子文","王安宇","王宝强","王家卫","王岳伦","王影璐","王心凌","王敬轩","王星越","王晶","王暖暖","王曼昱",
"王栎鑫","王楚然","王楚钦","王源","王玉雯","王珞丹","王紫璇","王耀庆","王者荣耀","王自如","王菲","王诗龄","王赫野","王霏霏","王青","王鸥","王鹤棣","王鹤润","现货","珂拉琪",
"理想汽车","瑞虎","甄子丹","生图","生日","田力","田嘉瑞","田曦薇","田柾国","田栩宁","田震","电车","男","男主","男主角","男友","男子","男星","男神","疑似",
"病","白宇","白敬亭","白百何","白素贞","白鹤淮","白鹿","百","的","皮衣","监控","直播","看完","看待","睡觉","瞒着家人","瞿颖","知道","短剧","破",
"祝绪丹","福利","福禄寿","离婚","离谱!","私生","秋膘","秒删","租房","秦岚","秦昊","积蓄","称","程度","程潇","穆祉丞","穷人","突然","窦靖童","窦骁",
"章时安","章昊","章泽天","章若楠","端木磊","笑死","第","第一次","管用","粉丝","精神","紫菜蛋花兔","级别","纪伯宰","终于","经纪人","结婚","给","维嘉","缅怀",
"网传","网剧","网友","网红","罗予彤","罗云熙","罗永浩","美依礼芽","美团","美学","老公","老婆","耘豪","肖俊","肖战","肖明明","肖顺尧","肯德基","胖东来","胡先煦",
"胡兵","胡军","胡可","胡夏","胡彦斌","胡歌","胡连馨","胡锡进","脱口秀","腾讯","舒淇","航母","艺人","艾热孜巴","节气","芭比","花光","花少","苏勋伦","苏喆",
"苏新皓","苏昌河","苏晓彤","苏暮雨","苏有朋","苏炳添","苏醒","范丞丞","范冰冰","范玮琪","荣梓杉","葛夕","董子健","董璇","蒋一侨","蒋梦婕","蒋欣","蒋龙","蓝战非","蓝盈莹",
"蔚来","蔡国庆","蔡威泽","蔡康永","蔡徐坤","蔡文静","薛之谦","薛佳凝","薛景求","薛飞","虞书欣","街头","袁一琦","袁咏仪","被","裴秀智","见","见义勇为","规劝","解晓东",
"解清帅","警告","警方","警车","让","许亚军","许佳琪","许光汉","许凯","许我耀眼","许杨玉琢","许珑瀚","许魏洲","评","评价","评论","说","请假","谁","谁懂",
"谈","谢可寅","谢娜","谢孟伟","谢楠","谢玲玲","谢谢","谢霆锋","谭咏麟","谭松韵","谭维维","贺峻霖","贺鑫隆","贾冰","贾国龙","贾樟柯","贾玲","走秀","赵丽颖","赵今麦",
"赵又廷","赵国瑞","赵子豪","赵昭仪","赵晓卉","赵樱子","赵磊","赵露思","跑男","跨界","路透","身家","车企","辛吉飞","辛柏青","辛芷蕾","边伯贤","达人","还在","还有",
"这不","进组","迪丽热巴","迪奥","通报","逝世","造型","邓为","邓亚萍","邓佳鑫","邓妍","邓孝慈","邓家佳","邓紫棋","邓莎","邓超","邝玲玲","邢菲","那英","邪修",
"邱淑贞","邱鼎杰","邵兵","邵子恒","邵雨琪","郑妮可","郑恺","郑智化","郑朋","郑秀斌","郑钦文","郑钧","郭俊辰","郭富城","郭德纲","郭敬明","郭晋安","郭采洁","重庆","金世佳",
"金九粒","金价","金俊勉","金子涵","金宇彬","金晨","金智秀","金海心","金秀贤","金赛纶","金钟","金钟国","金靖","金马","釜山","钟楚曦","钟辰乐","长安","长期","闫妮",
"闫桉","闵孝琳","闵玧其","闷声","阚清子","阿云嘎","阿娇","阿尔茨海默","陆毅","陈丽君","陈乔恩","陈伟霆","陈冠希","陈冰","陈凯文","陈哲远","陈奕恒","陈奕迅","陈妍希","陈小春",
"陈岚","陈志朋","陈思诚","陈数","陈昊宇","陈晓","陈松伶","陈柏霖","陈梦","陈楚生","陈汉典","陈泽","陈浚铭","陈添祥","陈牧驰","陈立农","陈粒","陈紫函","陈芋汐","陈赫",
"陈道明","陈都灵","陈靖可","陈飞宇","陳嵐","陳柏霖","陶喆","陶白白","零","零跑汽车","雷佳音","雷军","雷淞然","靳梦佳","鞠婧炜","鞠婧祎","韩国","韩安冉","韩庚","音乐节",
"顶流","颁奖","预制菜","颜人中","首尔","香港","马丽","马伊琍","马嘉祺","马国明","马思纯","马柏全","马筱梅","马頔","马龙","骨灰","骨相","高圆圆","高德","高瀚宇",
"高露","魏哲鸣","魏大勋","魏建军","魔丸","鲁豫","鲍蕾","鸟巢","鸡排","鸿蒙","鹤男","鹭卓","鹿哈","鹿晗","鹿骐","麦当劳","麦琳","麦迪娜","黄一鸣","黄冠亨",
"黄圣依","黄子弘凡","黄子韬","黄明昊","黄晓明","黄景瑜","黄杨钿甜","黄正音","黄渤","黄灿灿","黄磊","黄金","黎姿","黑龙江","齐思钧","齐溪","龙凤胎","龚俊","龚俊林",


];
    const CASE_INSENSITIVE = true;

  /** 3 轮询间隔(毫秒)。为兼容 /pub 的局部刷新,建议保留 **/
  const POLL_MS = 1000;

  // --- 正则 --- <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 59.16 69.57'>     <g transform='translate(-110.73,-61.49)'>         <path d='m 130.15,99.28 c 2.9,-1.3 4.93,-4.22 4.94,-7.6 0,-4.61 -3.74,-8.35 -8.35,-8.35 -4.61,0 -8.35,3.74 -8.35,8.35 0,4.6 3.74,8.34 8.35,8.34 0.72,0 1.41,-0.1 2.08,-0.27 0.41,-0.18 0.85,-0.33 1.32,-0.46 z m -7.55,-6.13 c 0,-2.3 1.87,-4.17 4.18,-4.17 0.58,0 1.15,0.12 1.65,0.34 -0.11,0.31 -0.18,0.65 -0.18,1.0 0,1.53 1.19,2.79 2.7,2.91 -0.04,2.26 -1.89,4.09 -4.17,4.09 -2.3,0 -4.18,-1.87 -4.18,-4.17' style='fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 146.01,83.31 c -4.61,0 -8.35,3.74 -8.35,8.35 0,3.35 1.97,6.23 4.82,7.56 0.55,0.14 1.08,0.32 1.56,0.54 0.63,0.15 1.28,0.24 1.96,0.24 4.6,0 8.34,-3.74 8.35,-8.35 0,-4.61 -3.74,-8.35 -8.35,-8.35 z m 0.04,14.01 c -2.3,0 -4.17,-1.87 -4.17,-4.17 0,-2.3 1.87,-4.17 4.17,-4.17 0.51,0 1.01,0.09 1.46,0.26 -0.13,0.33 -0.21,0.7 -0.21,1.08 0,1.61 1.3,2.92 2.92,2.92 -0.05,2.26 -1.9,4.08 -4.17,4.08' style='fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 144.48,101.56 c -0.88,-0.89 -2.66,-1.31 -4.61,-1.49 0.0,-0.06 0.02,-0.13 0.02,-0.2 0,-0.14 -0.02,-0.28 -0.05,-0.41 -0.06,-0.24 -0.18,-0.46 -0.33,-0.65 -0.31,-0.37 -0.77,-0.62 -1.3,-0.62 -0.48,0 -0.92,0.2 -1.23,0.53 -0.16,0.17 -0.28,0.38 -0.36,0.61 -0.05,0.17 -0.09,0.35 -0.09,0.54 0,0.02 0.0,0.04 0.0,0.06 -0.03,0 -0.07,-7.94e-4 -0.11,-7.94e-4 -0.05,0 -0.11,0 -0.18,0 0.0,-0.02 0.0,-0.04 0.0,-0.06 0,-0.19 -0.03,-0.37 -0.09,-0.54 -0.07,-0.23 -0.2,-0.44 -0.36,-0.61 -0.31,-0.33 -0.74,-0.53 -1.23,-0.53 -0.53,0 -1.0,0.25 -1.32,0.63 -0.15,0.19 -0.26,0.41 -0.32,0.65 -0.03,0.13 -0.05,0.26 -0.05,0.4 0,0.07 0.01,0.14 0.02,0.21 -1.76,0.17 -3.61,0.58 -4.53,1.49 -0.29,0.28 -0.48,0.62 -0.55,1.02 -0.02,0.1 -0.03,0.22 -0.03,0.33 0,3.35 3.73,5.89 8.68,5.89 4.78,0 8.68,-2.64 8.68,-5.89 0,-0.11 -0.02,-0.22 -0.03,-0.33 -0.06,-0.39 -0.25,-0.73 -0.53,-1.02 z m -7.01,-1.7 c 0,-0.21 0.09,-0.4 0.24,-0.53 0.12,-0.11 0.28,-0.18 0.47,-0.18 0.2,0 0.38,0.08 0.51,0.22 0.12,0.12 0.2,0.3 0.2,0.49 0,0.04 -0.01,0.08 -0.02,0.13 -0.06,0.33 -0.34,0.58 -0.69,0.58 -0.36,0 -0.66,-0.28 -0.7,-0.64 -0.0,-0.02 -0.01,-0.05 -0.01,-0.07 z m -3.68,0 c 0,-0.19 0.07,-0.36 0.19,-0.49 0.13,-0.13 0.31,-0.22 0.52,-0.22 0.18,0 0.34,0.07 0.47,0.18 0.14,0.13 0.24,0.31 0.24,0.53 0,0.02 -0.01,0.04 -0.01,0.07 -0.03,0.35 -0.33,0.64 -0.7,0.64 -0.35,0 -0.63,-0.25 -0.69,-0.58 -0.0,-0.04 -0.02,-0.08 -0.02,-0.13 z m -0.16,6.82 c -0.93,0 -1.7,-0.76 -1.7,-1.7 h 0.49 0.49 c 0,0.39 0.32,0.72 0.72,0.72 0.39,0 0.72,-0.32 0.72,-0.72 h 0.49 0.49 c 0,0.93 -0.76,1.7 -1.7,1.7' style='fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 115.82,89.87 c -1.14,-0.47 -2.52,-0.26 -3.29,0.5 -0.36,0.36 -0.7,0.99 -0.3,1.93 0.45,1.07 1.22,2.33 2.01,3.29 0.99,1.2 1.64,1.49 1.87,1.47 0.13,-0.01 0.27,-0.27 0.37,-0.67 l 0.02,0.0 c -0.44,-1.11 -0.69,-2.32 -0.69,-3.6 v -2.93' style='fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 160.15,90.37 c -0.75,-0.75 -2.09,-0.96 -3.23,-0.52 v 2.95 c 0,1.29 -0.25,2.52 -0.71,3.65 0.09,0.36 0.22,0.6 0.35,0.61 0.23,0.01 0.88,-0.27 1.87,-1.47 0.78,-0.95 1.56,-2.21 2.01,-3.29 0.39,-0.94 0.05,-1.57 -0.3,-1.93' style='fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 130.96,93.23 c -1.51,-0.11 -2.7,-1.37 -2.7,-2.91 0,-0.35 0.06,-0.69 0.18,-1.0 -0.5,-0.22 -1.06,-0.34 -1.65,-0.34 -2.3,0 -4.18,1.87 -4.18,4.17 0,2.3 1.87,4.17 4.18,4.17 2.28,0 4.13,-1.82 4.17,-4.09' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 146.05,97.32 c 2.27,0 4.12,-1.81 4.17,-4.08 -1.61,-0.0 -2.92,-1.31 -2.92,-2.92 0,-0.38 0.07,-0.75 0.21,-1.08 -0.45,-0.17 -0.95,-0.26 -1.46,-0.26 -2.3,0 -4.17,1.87 -4.17,4.17 0,2.3 1.87,4.17 4.17,4.17' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 146.29,102.92 c 0,-0.11 -0.0,-0.22 -0.01,-0.33 h 0.86 c 3.46,0 6.5,-1.81 8.23,-4.53 0.03,-0.05 0.07,-0.1 0.1,-0.16 0.3,0.33 0.66,0.46 0.96,0.48 0.04,0.0 0.08,0.0 0.13,0.0 0.83,0 1.79,-0.65 2.86,-1.95 0.86,-1.04 1.71,-2.43 2.21,-3.61 0.52,-1.24 0.31,-2.46 -0.58,-3.37 -1.01,-1.01 -2.65,-1.38 -4.15,-0.97 V 86.44 71.27 c 1e-5,-5.4 -4.37,-9.78 -9.78,-9.78 h -21.53 c -5.4,0 -9.78,4.37 -9.78,9.78 v 15.21 2.0 c -1.52,-0.42 -3.19,-0.07 -4.21,0.95 -0.89,0.9 -1.11,2.12 -0.58,3.37 0.5,1.18 1.34,2.56 2.21,3.61 1.07,1.29 2.03,1.95 2.86,1.95 0.04,0 0.08,-0.0 0.13,-0.0 0.31,-0.02 0.68,-0.15 1.0,-0.52 0.03,0.05 0.06,0.1 0.1,0.15 1.73,2.74 4.77,4.58 8.26,4.58 h 0.86 c -0.01,0.11 -0.01,0.22 -0.01,0.33 0,4.06 4.26,7.12 9.92,7.12 5.46,0 9.91,-3.19 9.91,-7.12 z m 13.86,-12.55 c 0.36,0.36 0.7,0.99 0.3,1.93 -0.45,1.07 -1.22,2.33 -2.01,3.29 -0.99,1.2 -1.64,1.49 -1.87,1.47 -0.12,-0.01 -0.26,-0.25 -0.35,-0.61 0.45,-1.12 0.71,-2.35 0.71,-3.65 v -2.95 c 1.13,-0.43 2.47,-0.22 3.23,0.52 z m -14.14,-7.05 c 4.61,0 8.35,3.74 8.35,8.35 -0.01,4.61 -3.75,8.35 -8.35,8.35 -0.67,0 -1.33,-0.08 -1.96,-0.24 -0.47,-0.22 -1.0,-0.4 -1.56,-0.54 -2.84,-1.33 -4.82,-4.21 -4.82,-7.56 0,-4.61 3.74,-8.35 8.35,-8.35 z m -29.52,13.09 c -0.09,0.39 -0.23,0.65 -0.37,0.67 -0.23,0.01 -0.88,-0.27 -1.87,-1.47 -0.78,-0.95 -1.56,-2.21 -2.01,-3.29 -0.39,-0.94 -0.05,-1.57 0.3,-1.93 0.76,-0.76 2.14,-0.97 3.29,-0.5 v 2.93 c 0,1.27 0.25,2.48 0.69,3.6 z m 1.9,-4.72 c 0,-4.61 3.74,-8.35 8.35,-8.35 4.61,0 8.35,3.74 8.35,8.35 -0.0,3.38 -2.03,6.3 -4.94,7.6 -0.46,0.12 -0.91,0.27 -1.32,0.46 -0.66,0.17 -1.36,0.27 -2.08,0.27 -4.61,0 -8.35,-3.74 -8.35,-8.34 z m 9.29,11.24 c 0,-0.11 0.01,-0.22 0.03,-0.33 0.07,-0.39 0.26,-0.73 0.55,-1.02 0.91,-0.9 2.76,-1.31 4.53,-1.49 -0.0,-0.06 -0.02,-0.13 -0.02,-0.21 0,-0.14 0.02,-0.27 0.05,-0.4 0.06,-0.24 0.17,-0.46 0.32,-0.65 0.31,-0.38 0.78,-0.63 1.32,-0.63 0.48,0 0.92,0.2 1.23,0.53 0.16,0.17 0.28,0.38 0.36,0.61 0.05,0.17 0.09,0.35 0.09,0.54 0,0.02 -0.0,0.04 -0.0,0.06 0.06,0 0.12,0 0.18,0 0.03,0 0.07,7.94e-4 0.11,7.94e-4 -0.0,-0.02 -0.0,-0.04 -0.0,-0.06 0,-0.19 0.03,-0.37 0.09,-0.54 0.07,-0.23 0.2,-0.44 0.36,-0.61 0.31,-0.32 0.74,-0.53 1.23,-0.53 0.52,0 0.99,0.24 1.3,0.62 0.15,0.19 0.27,0.41 0.33,0.65 0.03,0.13 0.05,0.27 0.05,0.41 0,0.07 -0.01,0.13 -0.02,0.2 1.94,0.18 3.73,0.59 4.61,1.49 0.28,0.28 0.46,0.62 0.53,1.02 0.01,0.11 0.03,0.21 0.03,0.33 0,3.24 -3.89,5.89 -8.68,5.89 -4.95,0 -8.68,-2.53 -8.68,-5.89' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 134.49,100.58 c 0.37,0 0.66,-0.28 0.7,-0.64 0.0,-0.02 0.01,-0.04 0.01,-0.07 0,-0.21 -0.09,-0.4 -0.24,-0.53 -0.12,-0.11 -0.29,-0.18 -0.47,-0.18 -0.2,0 -0.38,0.08 -0.52,0.22 -0.12,0.12 -0.19,0.3 -0.19,0.49 0,0.04 0.01,0.08 0.02,0.13 0.06,0.33 0.34,0.58 0.69,0.58' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 138.18,100.58 c 0.35,0 0.62,-0.25 0.69,-0.58 0.0,-0.04 0.02,-0.08 0.02,-0.13 0,-0.19 -0.07,-0.36 -0.2,-0.49 -0.13,-0.13 -0.31,-0.22 -0.51,-0.22 -0.18,0 -0.34,0.07 -0.47,0.18 -0.15,0.13 -0.24,0.31 -0.24,0.53 0,0.02 0.01,0.05 0.01,0.07 0.04,0.35 0.33,0.64 0.7,0.64' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 134.33,104.97 c -3.4e-4,0.39 -0.32,0.72 -0.72,0.72 -0.39,0 -0.72,-0.32 -0.72,-0.72 h -0.49 -0.49 c 0,0.93 0.76,1.7 1.7,1.7 0.93,0 1.7,-0.76 1.7,-1.7 h -0.49 -0.49' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />         <path d='m 165.85,106.2 -0.22,-0.22 c -4.1,-4.1 -10.78,-4.1 -14.88,0 -1.78,1.78 -2.77,4.16 -2.77,6.68 0,2.52 0.98,4.9 2.77,6.68 l 0.08,0.08 c 1.66,1.66 3.85,2.5 6.04,2.5 2.19,-2.7e-4 4.37,-0.83 6.04,-2.5 2.45,-2.45 2.45,-6.44 0,-8.9 -0.57,-0.57 -1.5,-0.57 -2.08,0 -0.57,0.57 -0.57,1.5 0,2.08 1.3,1.3 1.3,3.42 0,4.73 -2.18,2.18 -5.73,2.18 -7.92,0 l -0.08,-0.08 c -1.22,-1.22 -1.9,-2.86 -1.9,-4.6 0,-1.73 0.67,-3.37 1.9,-4.6 2.95,-2.95 7.76,-2.95 10.71,0 l 0.22,0.22 c 4.23,4.23 4.23,11.13 0,15.37 -2.87,2.86 -6.68,4.45 -10.74,4.45 h -4.03 c 0.06,-0.28 0.11,-0.59 0.11,-0.94 0,-4.96 -7.31,-7.35 -7.23,-10.18 0.19,-6.94 -9.38,-7.21 -9.58,-0.27 -0.19,6.97 -1.11,14.35 6.29,14.35 0.64,0 1.26,-0.0 1.86,-0.0 0.03,0.0 0.07,0.01 0.11,0.01 h 12.46 c 4.84,0 9.4,-1.88 12.82,-5.31 5.38,-5.38 5.38,-14.15 0,-19.54' style='fill:#282a2b;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.03' />     </g> </svg>
  const regex = buildRegex(KEYWORDS, CASE_INSENSITIVE);
  if (!regex) return;

  // 初次执行 + 轮询
  runOnce();
  setInterval(runOnce, POLL_MS);

  function runOnce() {
    // 老页尽量少过滤,直接全页扫;但跳过常见不可见容器
    highlightIn(document.body);
  }

  function buildRegex(words, ci) {
    const parts = (words || []).filter(Boolean).map(escapeRegExp);
    if (!parts.length) return null;
    return new RegExp("(" + parts.join("|") + ")", ci ? "gi" : "g");
  }
  function escapeRegExp(s) {
    return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }

  // 核心:扫描文本节点,把命中片段用 <span style="color:#fff !important" data-kw-hit> 包裹
  function highlightIn(root) {
    if (!root || !regex) return;

    const ign = node => {
      if (node.nodeType !== 1) return false;
      const tag = node.tagName;
      // 最小化忽略清单:脚本/样式/内嵌对象
      return tag === "SCRIPT" || tag === "STYLE" || tag === "IFRAME" || tag === "OBJECT" || tag === "NOSCRIPT";
    };
    if (ign(root)) return;

    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null);
    const nodes = [];
    let n;
    while ((n = walker.nextNode())) nodes.push(n);

    for (const textNode of nodes) {
      const parent = textNode.parentNode;
      if (!parent) continue;
      // 如果父节点已经是我们包裹过的片段,跳过
      if (parent.nodeType === 1 && parent.hasAttribute && parent.hasAttribute("data-kw-hit")) continue;

      const text = textNode.nodeValue;
      if (!text || !regex.test(text)) continue;
      regex.lastIndex = 0;

      const frag = document.createDocumentFragment();
      let last = 0;
      text.replace(regex, (m, _g1, idx) => {
        // 前段原样
        if (idx > last) frag.appendChild(document.createTextNode(text.slice(last, idx)));
        // 命中片段 -> 白字
        const span = document.createElement("span");
        span.setAttribute("style", "color:#fff !important;");
        span.setAttribute("data-kw-hit", "1");
        span.textContent = m;
        frag.appendChild(span);
        last = idx + m.length;
        return m;
      });
      // 末尾残余
      if (last < text.length) frag.appendChild(document.createTextNode(text.slice(last)));

      parent.replaceChild(frag, textNode);
    }
  }
})();