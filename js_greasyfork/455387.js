// ==UserScript==
// @name         检验检疫编码
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  检验检疫编码111
// @author       You
// @match       *://swapp.singlewindow.cn/decserver/sw/dec/*
// @require      https://unpkg.com/jquery@3.6.0/dist/jquery.min.js
// @grant        none
// @license MIT
// @downloadURL https://update.greasyfork.org/scripts/455387/%E6%A3%80%E9%AA%8C%E6%A3%80%E7%96%AB%E7%BC%96%E7%A0%81.user.js
// @updateURL https://update.greasyfork.org/scripts/455387/%E6%A3%80%E9%AA%8C%E6%A3%80%E7%96%AB%E7%BC%96%E7%A0%81.meta.js
// ==/UserScript==

(function() {
    'use strict';

    var codeTsArr = ["1401100000","9401520010","4421911020","4421911020","4407930099","4407910092","4407960090","4407930091","4407920091","4407910012","2008999000","1704900000","1301904010","1212216919","1212216919","1212216919","1212216919","1211209199","1211209199","0510003010","0711591920","0709595010","0602909430","0602909430","0602409010","0602401090","0602401090","0602301090","0602401090","0602301090","0602301090","0601102910","9403830090","9403820090","9403830090","9403820090","9403830010","9403830010","9403820010","9403820010","9401619010","9401619010","9401619090","9401619090","9401611090","9401611090","9401611010","9401611010","9401530090","9401530010","9401520090","9401419090","9401419010","9401411090","9401411010","4420191210","4420191290","4419110010","4419190010","4419190090","4419129090","4419129090","4419129010","4419129010","4419121020","4419121020","4419110090","4407960010","4407920099","4407930011","4407930019","4407920011","4407920019","4407210091","4407210019","4407210099","4407210011","4403950000","4403910020","4403960000","4403930090","4403930010","4401120010","4401120090","4401110090","4401110010","3004905290","3004905290","3004905210","3004905210","3002120094","3001909019","3001909011","2202990099","2202990099","2106909019","2007100000","2006009000","2006009000","2006009000","2006009000","2005919000","2005919000","2005919000","2007999000","2007999000","2007999000","2005999929","2005999929","2005999921","2005999929","2005999921","2005999921","2005911000","2005100000","2005100000","2001909090","1902190090","1904100000","1902190010","1301903090","1301903090","1301903010","1301903010","1212291090","1212291010","1212216991","1212216991","1212216190","1212216190","1212216190","1212216999","1212216999","1212216999","1212216999","1212216911","1212216911","1212216110","1212216110","1211903979","1211903984","1211903985","1211903982","1211903983","1211903971","1211901690","1211901490","1211901790","1211901710","1211901610","1211901410","1211209991","1211209991","1211209991","1211209999","1211209999","1211209999","1211209299","1211209299","1211209299","1211209191","1211209191","1211209291","1211209291","1211209291","1103201001","1103201001","1103201090","1103201090","1103110001","1103110001","1103110090","1103110090","1101000090","1101000090","1101000001","1101000001","0908320090","0908320090","0908310010","0908310010","0908310090","0908310090","0908320010","0908320010","0908220090","0908220010","0908210010","0908120090","0908120090","0908210090","0908120010","0908120010","0908110090","0908110090","0908110010","0908110010","0802920019","0802920019","0802920011","0802920011","0802999019","0802999019","0802999019","0802999011","0802999011","0802999011","0802910019","0802910019","0802910011","0802910011","0712901000","0712399920","0711903100","0709550090","0709550010","0709991000","0709595090","0709560090","0709560010","0604901090","0604901090","0604901090","0604901010","0604901010","0604901010","0604201090","0604201010","0604201090","0604201010","0604201090","0604201010","0602909420","0602409090","0602301010","0602301010","0602301010","0602309010","0602401010","0602401010","0602401010","0602309090","0601102990","0601102190","0601102110","0507909011","0507909011","0507909011","0507909011","0507909011","0510003090","0507909020","0507909030","0507909030","0507909030","0507909030","0507909030","0507909030","0507909019","0507909019","0507909019","0507909019","0507909019","0507902090","0507902090","0507902090","0507902090","0507902010","0507902010","0507902010","0507902010","0406900000","0406900000","0406400000","0406100000","0407110000","0402910000","0305591020","0305591020","0305591010","0305591010","0210930090","0210930090","0210930090","0210930090","0210930090","0210930090","0210920020","0210930010","0210920020","0210930010","0210920020","0210930010","0210920020","0210930010","0210930010","0210930010","0210920011","0210920011","0210920011","0210920019","0210920011","0210920019","0210920019","0210920019","0208500010","0208500010","0208500010","0208500010","0208500010","0208500010","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500090","0208500010","0208500090","0208500010","0208500090","0208500010","0208500090","0208500090","0208500090","0208500090","0208500090","0208500090","0208400019","0208400019","0208400020","0208400020","0208400011","0208400011","0106392310","0106392390","0106329090","0106321010","0106329010","0106202011","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106201910","0106321090","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106201990","0106202019","0106122990","0106122990","0106122990","0106122990","0106122910","0106122910","0106122110","0106122910","0106122110","0106122910","0106122110","0106122110","0106122190","0106122190","0106122190","0106122190","4412101191","4412101111","1301904010","1301904010","1301904010","1301904010","1301904010","1211903810","1211209910","1211209910","1211209910","1103110001","0812900060","0812900060","0812900060","0812900060","0709999010","0602909120","6702901010","6702901010","6701000010","4421919010","4418890010","4418830010","4418910010","4418810010","4418820010","4412109990","4412109590","4412310010","4412109910","4412109510","4412109310","4412109490","4412109390","4412109410","4412102099","4412102011","4412102091","4412102019","4412101999","4412101991","4412101919","4412101911","4409221020","4409229020","4409219010","4409211010","4408901310","4408399010","4408391910","4408392010","4408391110","4403110010","4302301010","2008199910","2008199910","2005100000","2004900030","2004900020","2003909020","2003901020","2003909020","2003909020","2001909030","2001909050","2001909020","1515909010","1515909010","1302199095","1302199095","1211209210","1211209210","1211209210","1211209110","1211209110","1211202990","1211202110","1211202910","1211202110","1211202910","1211202190","1103201090","1103201001","1103110090","1101000090","1101000001","0811909030","0811909021","0712909910","0710809030","0709591000","0602909930","0602909410","0601101000","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0507909090","0406900000","0203290010","0203219090","0203220090","0203220010","0203211010","0203211090","0203219010","0201300010","0201300010","0203120010","0203120010","0203119090","0203119090","0203119010","0203119010","0203190010","0203190010","0202300010","0203120090","0203120090","0203111090","0203111090","0203111010","0203111010","0202100010","0202200010","0201100010","0201100010","0201200010","0201200010","0103911010","0103920010","0103912010"];
    //var codeDataArr = [];
    var str = "";
    var obj = {};
    for (var i=0;i<codeTsArr.length;i++){
         delayRun(0,500)
        //getCiqCodeByAjax(codeTsArr[i])
               if (obj[codeTsArr[i]] == undefined) {
            str += (getCiqCodeByAjax(codeTsArr[i]));
                 obj[codeTsArr[i]] = 1;
        }

    }

   $("body").html(str)

function delayRun(code, time) {
    var t=setTimeout(code,time) ;
}


function getCiqCodeByAjax(codeTsArr){
    var sql='';
    $.ajax({
        async:false,
        type : "POST",
        url:"https://swapp.singlewindow.cn/decserver/sw/dec/ciq/L1ufEw8VxC",
        data : JSON.stringify({'codeTs':codeTsArr}),
        dataType : "json",
        contentType : "application/json;charset=UTF-8",
        success:function(rtData){

            if(rtData){
                var decFactor =[];
                var lengtth=rtData.rows.length

                decFactor=rtData.rows
                for (var i = 0; i < lengtth;i++ ) {

                    sql += "insert into BILL_BD_INSP_QUAR (ID, HS_NAME_CN, HS_CODE, EXTEND_CODE, GOODS_NAME_CN, TYPE)"+ "values (SYS_GUID(), '"+decFactor[i].hsname+"','"+decFactor[i].hscode+"', '"+decFactor[i].statcode.substring(decFactor[i].statcode.length-3)+"', '"+decFactor[i].ciqname+"', '"+decFactor[i].classifyCnnm+"');###"


                };

               
            }
        }
    });
    return sql;
}
})();