// ==UserScript==
// @name         成都工业学院评教自动填写
// @namespace    http://tampermonkey.net/
// @version      0.1.2
// @license Common
// @description  自动填写选项
// @author       tweaker
// @match        *://*/jsxsd/*
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/480036/%E6%88%90%E9%83%BD%E5%B7%A5%E4%B8%9A%E5%AD%A6%E9%99%A2%E8%AF%84%E6%95%99%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99.user.js
// @updateURL https://update.greasyfork.org/scripts/480036/%E6%88%90%E9%83%BD%E5%B7%A5%E4%B8%9A%E5%AD%A6%E9%99%A2%E8%AF%84%E6%95%99%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99.meta.js
// ==/UserScript==
(function(){'use strict';let b1=true;function jump_to_undo(){setTimeout(function(){const teachers=document.getElementsByTagName("tr");for(let i=1;i<teachers.length;i++){if(teachers[i].children[6].innerHTML&&teachers[i].children[7].innerHTML==='是'){}else{b1=false;teachers[i].children[8].children[0].click();break}}if(b1){alert("没有需要评教的")}},100)}const pj=document.getElementsByClassName("Nsb_layout_r title");if(window.location.href.indexOf("xspj_list")!==-1){jump_to_undo()}if(window.location.href.indexOf("xspj_edit")!==-1){setTimeout(function(){let tds=document.getElementsByName("zbtd");tds[0].children[2].children[0].click();for(let i=1;i<tds.length;i++){tds[i].children[0].children[0].click()}let textarea=document.getElementsByTagName("textarea")[0];document.getElementsByName("tj")[0].click()},500)}(function(){if(window.self===window.top){var logoPopup=document.createElement('div');logoPopup.className='logoPopup';logoPopup.innerHTML=`<div class="logoPopup-content"><h2>一键评教工具使用说明</h2><h3>推客校园提供服务</h3><p>登录后点击教学评价-教学评价-学生评价-选择对应批次进入评价-按提示操作保存提交即可</p><p>请连接校园内网使用本工具基于用户前端实现不存储用户数据</p><p>1.一键评教不支持设置分数，默认为「98分」，如果这不是你想要的评教结果，请勿使用此功能；<br>2.请根据自己的实际情况评教，产生的一切后果由使用者自主承担；<br>3.对于大一的萌新，建议先到教务系统体验一下评教，然后会发现，一键评教真香；<br>4.如果你觉得觉得功能不错的话，请推荐给身边的人使用哦。</p><div class="logoPopup-close"onclick="$('.logoPopup').hide()">我知道了</div></div>`;document.body.appendChild(logoPopup);var banner=document.createElement('div');banner.className='banner';banner.innerHTML=`<div style="position: fixed;  top: 80vh;  left: 50vw;  transform: translateX(-50%);  z-index: 33333;  width: 80vw;  max-width: 600px"><img onclick="this.parentElement.style.display = 'none';"src="https://bdn.135editor.com/files/202108/images/de9f981c74a483176cf3c8ea168f2a7.png"style="position: absolute; top: 0; left: 0; cursor: pointer; width: 3vw; max-width: 30px; height: auto;"><a href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=5UH6ONiOi7VJ7jHWFgq5zI_yvoi36uHf&authKey=f0CBNZW1jfPQmNTnfOLuQRsrnGt8RxkvlQ%2FgHKvaXXm2nC0JqNRmxdX2v6nucDWw&noverify=0&group_code=747166695"onclick="var _hmt = window._hmt || [];_hmt.push(['_trackEvent', 'jiuzhounian', 'click', 'shouye_left']);"target="_blank"><img src="http://m.tweaker.cn/list-banner(1).png"alt=""style="width: 100%; height: auto; display: block;"></a></div>`;document.body.appendChild(banner)}})();var style = document.createElement('style');style.textContent = `.logoPopup {position: fixed;top: 50vh;left: 50vw;transform: translate(-50%, -50%);border-radius: 10px;width: 75vw;max-width: 300px;height: auto;padding: 10px 20px 19px 25px;box-sizing: border-box;background: url(https://bcn.135editor.com/files/202211/images/logo_bg_box.png) no-repeat center;background-size: cover;color: #fff;display: flex;align-items: center;justify-content: center;flex-direction: column;z-index: 9999;}.logoPopup-content {margin-top: 0px;position: relative;}.logoPopup h2 {font-size: 24px;margin-bottom: 10px;}.logoPopup h3 {font-size: 18px;margin-bottom: 10px;}.logoPopup h4 {font-size: 14px;margin-bottom: 10px;}.logoPopup p {font-size: 14px;margin-bottom: 10px;}.logoPopup-close {width: 110px;height: 34px;font-size: 14px;text-align: center;border-radius: 4px;border: 1px solid #fff;cursor: pointer;line-height: 34px;margin-top: 20px;}`;document.head.appendChild(style);})();;