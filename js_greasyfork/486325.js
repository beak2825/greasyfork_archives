// ==UserScript==
// @name         ticketdlp-fannou
// @namespace    http://tampermonkey.net/
// @version      2024-02-03
// @description  dlp
// @author       You
// @match        https://web.lineberty.net/dlp
// @license MIT
// @downloadURL https://update.greasyfork.org/scripts/486325/ticketdlp-fannou.user.js
// @updateURL https://update.greasyfork.org/scripts/486325/ticketdlp-fannou.meta.js
// ==/UserScript==

const ticketlist = {'19': {'date': '08:39:18', 'userId': '65bbcae3ab73f78e133f4f42'}, '2': {'date': '08:30:31', 'userId': '65bbcae46cb413d71aa88e31'}, '27': {'date': '08:43:26', 'userId': '65bbcae495444a32affc7d23'}, '20': {'date': '08:39:49', 'userId': '65bbcae584e6c7932db4fc04'}, '30': {'date': '08:44:59', 'userId': '65bbcae6258fce98c52e71dd'}, '1': {'date': '08:30:00', 'userId': '65bbcae7a114ceee48a7efa5'}, '9': {'date': '08:34:08', 'userId': '65bbcae7f218e9f3bc6afd96'}, '4': {'date': '08:31:33', 'userId': '65bbcae8bfbe9cd43989ec10'}, '11': {'date': '08:35:10', 'userId': '65bbcae995444a32affc7d2c'}, '33': {'date': '08:46:32', 'userId': '65bbcaea3e24c5c4c2538e4c'}, '13': {'date': '08:36:12', 'userId': '65bbcaeb9bc44e753d426752'}, '7': {'date': '08:33:06', 'userId': '65bbcaebf218e9f3bc6afd9f'}, '10': {'date': '08:34:39', 'userId': '65bbcaed7b8fae8b03d8b535'}, '21': {'date': '08:40:20', 'userId': '65bbcaee564a52b787f025f8'}, '5': {'date': '08:32:04', 'userId': '65bbcaeea947e0733e748b47'}, '3': {'date': '08:31:02', 'userId': '65bbcaef190ddebb16d2430d'}, '12': {'date': '08:35:41', 'userId': '65bbcaef98e95e75bf710bf6'}, '8': {'date': '08:33:37', 'userId': '65bbcaefa947e0733e748b50'}, '15': {'date': '08:37:14', 'userId': '65bbcaf0a20950a103c55027'}, '6': {'date': '08:32:35', 'userId': '65bbcaf0ef5f54eacf428452'}, '16': {'date': '08:37:45', 'userId': '65bbcaf1239638c5e463a68d'}, '29': {'date': '08:44:28', 'userId': '65bbcaf13e24c5c4c2538e5b'}, '28': {'date': '08:43:57', 'userId': '65bbcaf14aa725084dcc85be'}, '24': {'date': '08:41:53', 'userId': '65bbcaf265be21b95b7f1435'}, '22': {'date': '08:40:51', 'userId': '65bbcaf284e6c7932db4fc0d'}, '35': {'date': '08:47:34', 'userId': '65bbcaf37b8fae8b03d8b53e'}, '31': {'date': '08:45:30', 'userId': '65bbcaf384e6c7932db4fc16'}, '14': {'date': '08:36:43', 'userId': '65bbcaf3befeb6863d4a59af'}, '26': {'date': '08:42:55', 'userId': '65bbcaf454f875c112b04d74'}, '17': {'date': '08:38:16', 'userId': '65bbcaf46c732ff7ef5a4337'}, '23': {'date': '08:41:22', 'userId': '65bbcaf46cb413d71aa88e3a'}, '34': {'date': '08:47:03', 'userId': '65bbcaf4cb84b6b11b17d008'}, '32': {'date': '08:46:01', 'userId': '65bbcaf565be21b95b7f143e'}, '25': {'date': '08:42:24', 'userId': '65bbcaf67f89f377194e19c1'}, '18': {'date': '08:38:47', 'userId': '65bbcaf77792833fd9198f30'}, '36': {'date': '08:48:05', 'userId': '65bbcaf8856a724a1902e828'}, '37': {'date': '08:48:36', 'userId': '65bbcaf8a20950a103c55030'}, '38': {'date': '08:49:07', 'userId': '65bbcaf8cb84b6b11b17d011'}, '39': {'date': '08:49:38', 'userId': '65bbcaf9239638c5e463a696'}, '57': {'date': '08:58:56', 'userId': '65bbcaf995444a32affc7d3b'}, '51': {'date': '08:55:50', 'userId': '65bbcaf998e95e75bf710bff'}, '40': {'date': '08:50:09', 'userId': '65bbcaf9a947e0733e748b62'}, '53': {'date': '08:56:52', 'userId': '65bbcafa0448ff933406ec17'}, '72': {'date': '09:06:41', 'userId': '65bbcafacb84b6b11b17d01a'}, '69': {'date': '09:05:08', 'userId': '65bbcafaef5f54eacf42845b'}, '63': {'date': '09:02:02', 'userId': '65bbcafaf218e9f3bc6afdae'}, '52': {'date': '08:56:21', 'userId': '65bbcafb190ddebb16d24316'}, '46': {'date': '08:53:15', 'userId': '65bbcafb3e24c5c4c2538e64'}, '79': {'date': '09:10:18', 'userId': '65bbcafb98e95e75bf710c08'}, '56': {'date': '08:58:25', 'userId': '65bbcafbd07069957c89b9ba'}, '43': {'date': '08:51:42', 'userId': '65bbcafc239638c5e463a6a5'}, '58': {'date': '08:59:27', 'userId': '65bbcafc564a52b787f02601'}, '42': {'date': '08:51:11', 'userId': '65bbcafca947e0733e748b6b'}, '62': {'date': '09:01:31', 'userId': '65bbcafcd07069957c89b9c3'}, '68': {'date': '09:04:37', 'userId': '65bbcafd239638c5e463a6ae'}, '71': {'date': '09:06:10', 'userId': '65bbcafd564a52b787f0260a'}, '77': {'date': '09:09:16', 'userId': '65bbcafd7f89f377194e19ca'}, '70': {'date': '09:05:39', 'userId': '65bbcafd7f89f377194e19d3'}, '61': {'date': '09:01:00', 'userId': '65bbcafd98e95e75bf710c11'}, '66': {'date': '09:03:35', 'userId': '65bbcafe3e24c5c4c2538e6d'}, '60': {'date': '09:00:29', 'userId': '65bbcafe496858eaefb1cc28'}, '59': {'date': '08:59:58', 'userId': '65bbcafea114ceee48a7efb3'}, '50': {'date': '08:55:19', 'userId': '65bbcaff3e24c5c4c2538e76'}, '89': {'date': '09:15:28', 'userId': '65bbcaff564a52b787f02613'}, '80': {'date': '09:10:49', 'userId': '65bbcb0065be21b95b7f144b'}, '64': {'date': '09:02:33', 'userId': '65bbcb00f19e122884f673fc'}, '47': {'date': '08:53:46', 'userId': '65bbcb01496858eaefb1cc37'}, '49': {'date': '08:54:48', 'userId': '65bbcb01801cbfdf51264e06'}, '67': {'date': '09:04:06', 'userId': '65bbcb02856a724a1902e831'}, '73': {'date': '09:07:12', 'userId': '65bbcb02980969b1b7355c86'}, '48': {'date': '08:54:17', 'userId': '65bbcb02a20950a103c55039'}, '41': {'date': '08:50:40', 'userId': '65bbcb02cb84b6b11b17d029'}, '76': {'date': '09:08:45', 'userId': '65bbcb030448ff933406ec20'}, '55': {'date': '08:57:54', 'userId': '65bbcb039bc44e753d426767'}, '88': {'date': '09:14:57', 'userId': '65bbcb04239638c5e463a6b7'}, '90': {'date': '09:15:59', 'userId': '65bbcb0454f875c112b04d7e'}, '45': {'date': '08:52:44', 'userId': '65bbcb04856a724a1902e83a'}, '87': {'date': '09:14:26', 'userId': '65bbcb050fbb7818daad8d70'}, '86': {'date': '09:13:55', 'userId': '65bbcb0554f875c112b04d87'}, '85': {'date': '09:13:24', 'userId': '65bbcb0562ee664df16020f4'}, '75': {'date': '09:08:14', 'userId': '65bbcb0571bae1bed3324d35'}, '65': {'date': '09:03:04', 'userId': '65bbcb0671bae1bed3324d3e'}, '44': {'date': '08:52:13', 'userId': '65bbcb0681550709cb488db9'}, '54': {'date': '08:57:23', 'userId': '65bbcb06ddcb7859f1c80fe0'}, '81': {'date': '09:11:20', 'userId': '65bbcb077f89f377194e19dc'}, '82': {'date': '09:11:51', 'userId': '65bbcb07a947e0733e748b74'}, '78': {'date': '09:09:47', 'userId': '65bbcb07f19e122884f67406'}, '74': {'date': '09:07:43', 'userId': '65bbcb0898e95e75bf710c1a'}, '91': {'date': '09:16:30', 'userId': '65bbcb08fe03948306f8c459'}, '94': {'date': '09:18:03', 'userId': '65bbcb090448ff933406ec29'}, '84': {'date': '09:12:53', 'userId': '65bbcb09befeb6863d4a59b8'}, '93': {'date': '09:17:32', 'userId': '65bbcb0a7b8fae8b03d8b547'}, '96': {'date': '09:19:05', 'userId': '65bbcb0aa20950a103c5504b'}, '97': {'date': '09:19:36', 'userId': '65bbcb0aa947e0733e748b7d'}, '83': {'date': '09:12:22', 'userId': '65bbcb0abfbe9cd43989ec25'}, '95': {'date': '09:18:34', 'userId': '65bbcb0b0fbb7818daad8d82'}, '92': {'date': '09:17:01', 'userId': '65bbcb0b65be21b95b7f1454'}, '98': {'date': '09:20:07', 'userId': '65bbcb0bcb84b6b11b17d033'}, '99': {'date': '09:20:38', 'userId': '65bbcb0bf19e122884f67413'}, '101': {'date': '09:21:40', 'userId': '65bbcb0c0448ff933406ec33'}, '100': {'date': '09:21:09', 'userId': '65bbcb0ca20950a103c55054'}, '102': {'date': '09:22:11', 'userId': '65bbcb0cbfbe9cd43989ec2e'}, '104': {'date': '09:23:13', 'userId': '65bbcb0cbfbe9cd43989ec37'}, '120': {'date': '09:31:29', 'userId': '65bbcb0d6c732ff7ef5a434f'}, '103': {'date': '09:22:42', 'userId': '65bbcb0d801cbfdf51264e14'}, '105': {'date': '09:23:44', 'userId': '65bbcb0dddcb7859f1c80fe9'}, '107': {'date': '09:24:46', 'userId': '65bbcb0e9bc44e753d426776'}, '122': {'date': '09:32:31', 'userId': '65bbcb0f6c732ff7ef5a4358'}, '108': {'date': '09:25:17', 'userId': '65bbcb106c732ff7ef5a4361'}, '110': {'date': '09:26:19', 'userId': '65bbcb1181550709cb488dc2'}, '106': {'date': '09:24:15', 'userId': '65bbcb1181d133bb074f7966'}, '112': {'date': '09:27:21', 'userId': '65bbcb1198e95e75bf710c23'}, '109': {'date': '09:25:48', 'userId': '65bbcb124aa725084dcc85cd'}, '114': {'date': '09:28:23', 'userId': '65bbcb137f89f377194e19eb'}, '111': {'date': '09:26:50', 'userId': '65bbcb147f89f377194e19f4'}, '115': {'date': '09:28:54', 'userId': '65bbcb1498e95e75bf710c2c'}, '118': {'date': '09:30:27', 'userId': '65bbcb15258fce98c52e71ec'}, '121': {'date': '09:32:00', 'userId': '65bbcb167f89f377194e19fd'}, '131': {'date': '09:37:10', 'userId': '65bbcb16bc3829e8db56f4cf'}, '123': {'date': '09:33:02', 'userId': '65bbcb17190ddebb16d24321'}, '119': {'date': '09:30:58', 'userId': '65bbcb171d7107aa65317780'}, '113': {'date': '09:27:52', 'userId': '65bbcb1795444a32affc7d48'}, '125': {'date': '09:34:04', 'userId': '65bbcb1871bae1bed3324d50'}, '130': {'date': '09:36:39', 'userId': '65bbcb191d7107aa65317789'}, '132': {'date': '09:37:41', 'userId': '65bbcb194aa725084dcc85e2'}, '124': {'date': '09:33:33', 'userId': '65bbcb19856a724a1902e846'}, '127': {'date': '09:35:06', 'userId': '65bbcb1a62ee664df1602104'}, '129': {'date': '09:36:08', 'userId': '65bbcb1a65be21b95b7f145d'}, '128': {'date': '09:35:37', 'userId': '65bbcb1b546a897fa066a012'}, '134': {'date': '09:38:43', 'userId': '65bbcb1c7b8fae8b03d8b551'}, '138': {'date': '09:40:47', 'userId': '65bbcb1cfe8027e0c836c71d'}, '136': {'date': '09:39:45', 'userId': '65bbcb1d81550709cb488dcb'}, '143': {'date': '09:43:22', 'userId': '65bbcb1d81d133bb074f7971'}, '142': {'date': '09:42:51', 'userId': '65bbcb1d95444a32affc7d51'}, '137': {'date': '09:40:16', 'userId': '65bbcb1e0d99502153f1530c'}, '133': {'date': '09:38:12', 'userId': '65bbcb1f496858eaefb1cc46'}, '170': {'date': '09:57:19', 'userId': '65bbcb20856a724a1902e84f'}, '169': {'date': '09:56:48', 'userId': '65bbcb21f218e9f3bc6afdcb'}, '171': {'date': '09:57:50', 'userId': '65bbcb22190ddebb16d2432a'}, '162': {'date': '09:53:11', 'userId': '65bbcb22b9af977fcddf229d'}, '140': {'date': '09:41:49', 'userId': '65bbcb233470e8e9b2893e76'}, '139': {'date': '09:41:18', 'userId': '65bbcb2354f875c112b04d91'}, '141': {'date': '09:42:20', 'userId': '65bbcb23a20950a103c5505d'}, '145': {'date': '09:44:24', 'userId': '65bbcb24190ddebb16d24333'}, '154': {'date': '09:49:03', 'userId': '65bbcb25258fce98c52e71fb'}, '147': {'date': '09:45:26', 'userId': '65bbcb2531d2175d14dbe8b9'}, '148': {'date': '09:45:57', 'userId': '65bbcb269bc44e753d426795'}, '191': {'date': '10:08:10', 'userId': '65bbcb2754f875c112b04d9a'}, '150': {'date': '09:46:59', 'userId': '65bbcb2762ee664df160210d'}, '152': {'date': '09:48:01', 'userId': '65bbcb27b9af977fcddf22a6'}, '151': {'date': '09:47:30', 'userId': '65bbcb286c732ff7ef5a437c'}, '149': {'date': '09:46:28', 'userId': '65bbcb28cb84b6b11b17d044'}, '157': {'date': '09:50:36', 'userId': '65bbcb294aa725084dcc85eb'}, '153': {'date': '09:48:32', 'userId': '65bbcb29546a897fa066a01b'}, '155': {'date': '09:49:34', 'userId': '65bbcb29bfbe9cd43989ec52'}, '158': {'date': '09:51:07', 'userId': '65bbcb2a0d99502153f15315'}, '159': {'date': '09:51:38', 'userId': '65bbcb2aab73f78e133f4f4c'}, '179': {'date': '10:01:58', 'userId': '65bbcb2b31d2175d14dbe8cb'}, '172': {'date': '09:58:21', 'userId': '65bbcb35980969b1b7355c9c'}, '161': {'date': '09:52:40', 'userId': '65bbcb36fe8027e0c836c726'}, '196': {'date': '10:10:45', 'userId': '65bbcb371d7107aa65317792'}, '192': {'date': '10:08:41', 'userId': '65bbcb3771bae1bed3324d6e'}, '195': {'date': '10:10:14', 'userId': '65bbcb37cb84b6b11b17d04d'}, '193': {'date': '10:09:12', 'userId': '65bbcb380d99502153f1531e'}, '194': {'date': '10:09:43', 'userId': '65bbcb3895444a32affc7d5b'}, '163': {'date': '09:53:42', 'userId': '65bbcb38a114ceee48a7efc9'}, '164': {'date': '09:54:13', 'userId': '65bbcb394aa725084dcc85fd'}, '166': {'date': '09:55:15', 'userId': '65bbcb39fe8027e0c836c72f'}, '187': {'date': '10:06:06', 'userId': '65bbcb3addcb7859f1c81004'}, '180': {'date': '10:02:29', 'userId': '65bbcb3c190ddebb16d2433c'}, '198': {'date': '10:11:47', 'userId': '65bbcb3e3470e8e9b2893e7f'}, '189': {'date': '10:07:08', 'userId': '65bbcb3fbfbe9cd43989ec65'}, '190': {'date': '10:07:39', 'userId': '65bbcb40f19e122884f67427'}, '266': {'date': '10:46:55', 'userId': '65bbcb44bfbe9cd43989ec6e'}, '185': {'date': '10:05:04', 'userId': '65bbcb46258fce98c52e7204'}, '252': {'date': '10:39:41', 'userId': '65bbcb4681550709cb488dde'}, '231': {'date': '10:28:50', 'userId': '65bbcb476cb413d71aa88e4a'}, '269': {'date': '10:48:28', 'userId': '65bbcb49546a897fa066a02d'}, '210': {'date': '10:17:59', 'userId': '65bbcb4a1d7107aa653177a4'}, '221': {'date': '10:23:40', 'userId': '65bbcb4ae4bdb3a2b80c5a84'}, '241': {'date': '10:34:00', 'userId': '65bbcb4b31d2175d14dbe8da'}, '271': {'date': '10:49:30', 'userId': '65bbcb4e65be21b95b7f1475'}, '278': {'date': '10:53:07', 'userId': '65bbcb5053c3102941e1ba81'}, '283': {'date': '10:55:42', 'userId': '65bbcb51bc3829e8db56f4ef'}, '230': {'date': '10:28:19', 'userId': '65bbcb59bfbe9cd43989ec80'}, '235': {'date': '10:30:54', 'userId': '65bbcb5e239638c5e463a6e7'}, '279': {'date': '10:53:38', 'userId': '65bbcb6da114ceee48a7eff1'}, '248': {'date': '10:37:37', 'userId': '65bbcb70bc3829e8db56f505'}, '262': {'date': '10:44:51', 'userId': '65bbcb75801cbfdf51264e52'}, '264': {'date': '10:45:53', 'userId': '65bbcb770448ff933406ec6d'}, '288': {'date': '10:58:17', 'userId': '65bbcb7a71bae1bed3324d93'}, '300': {'date': '11:04:29', 'userId': '65bbcb7c801cbfdf51264e5b'}}
document.body.innerHTML = "<input type='button' id='valider1' style='width:100%; font-size:500%' value='TICKET 1'/><input type='button' id='valider2' style='width:100%; font-size:500%' value='TICKET 2'/><input type='button' id='valider3' style='width:100%; font-size:500%' value='TICKET 3'/><input type='button' id='valider4' style='width:100%; font-size:500%' value='TICKET 4'/><input type='button' id='valider5' style='width:100%; font-size:500%' value='TICKET 5'/>";
//<input type='number' id='number'/>
async function Login(userid) {
const response = await fetch("https://booking.lineberty.net/api/v1/lineberty/webapp/login?userId=" + userid, {
    method: "GET",
    headers: {
        "Content-Type": "application/json"
    }
});

if (!response.ok) {
    throw new Error("Network response was not ok");
}

const data = await response.json();
return data.jwtToken;
}
async function setUser(label){
let userid = ticketlist[label]["userId"];
let token = await Login(userid);
let queuesData = {"disneyland_paris_q10":{
    "timezone": "Europe/Paris",
    "queueId": "disneyland_paris_q10",
    "cancelEnabled": true,
    "qrcode": false,
    "ticketDisplay": {
        "display": null,
        "viewSwitch": {
            "defaultView": "date"
        }
    },
    "version": "v2",
    "createdAt": 1706815676023
}};
const dbName="lbStorage",storeName="_ionickv",request=window.indexedDB.open("lbStorage");request.onerror=function(e){console.error("Erreur lors de l\'ouverture de la base de donn�es:",e.target.errorCode)},request.onsuccess=function(e){let r=e.target.result.transaction(storeName,"readwrite").objectStore(storeName),t=r.put(userid,"userId");t=r.put(queuesData,"queuesData");t=r.put(token,"userBearer").onsuccess=function(e){console.log("La valeur de \'userId\' a �t� mise � jour avec succ�s !")},t.onerror=function(e){console.error("Erreur lors de la mise � jour de la valeur de \'userId\':",e.target.errorCode)}},request.onupgradeneeded=function(e){let r=e.target.result;r.objectStoreNames.contains(storeName)||r.createObjectStore(storeName)};
}
document.getElementById("valider1").onclick = function() {setUser('61')};
document.getElementById("valider2").onclick = function() {setUser('66')};
document.getElementById("valider3").onclick = function() {setUser('5')};
document.getElementById("valider4").onclick = function() {setUser('10')};
document.getElementById("valider5").onclick = function() {setUser('14')};
//window.location.href = "https://web.lineberty.net/#/currentsTickets";