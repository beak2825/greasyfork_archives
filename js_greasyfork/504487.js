// ==UserScript==
// @name         Symfony 翻译文档 setup/flex.html
// @namespace    fireloong
// @version      0.1.1
// @description  翻译文档 setup/flex.html
// @author       Itsky71
// @match        https://symfony.com/doc/5.x/setup/flex.html
// @match        https://symfony.com/doc/6.4/setup/flex.html
// @match        https://symfony.com/doc/7.1/setup/flex.html
// @match        https://symfony.com/doc/7.2/setup/flex.html
// @match        https://symfony.com/doc/current/setup/flex.html
// @icon         https://www.google.com/s2/favicons?sz=64&domain=symfony.com
// @require      https://unpkg.com/jquery@3.7.1/dist/jquery.min.js
// @require      https://update.greasyfork.org/scripts/503008/fanyi.js
// @grant        none
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/504487/Symfony%20%E7%BF%BB%E8%AF%91%E6%96%87%E6%A1%A3%20setupflexhtml.user.js
// @updateURL https://update.greasyfork.org/scripts/504487/Symfony%20%E7%BF%BB%E8%AF%91%E6%96%87%E6%A1%A3%20setupflexhtml.meta.js
// ==/UserScript==

(function($) {
    'use strict';

    const translates = {
        '\n        \n                    Upgrading Existing Applications to Symfony Flex\n        \n            ': '将现有应用升级到 Symfony Flex',
        'Using Symfony Flex is optional, even in Symfony 4, where Flex is used by\ndefault. However, Flex is so convenient and improves your productivity so much\nthat it\'s strongly recommended to upgrade your existing applications to it.': '使用 Symfony Flex 是可选的，即使在默认使用 Flex 的 Symfony 4 中也是如此。然而，Flex 如此便捷，并且极大地提升了开发效率，因此强烈建议将您现有的应用升级到 Flex。',
        'Symfony Flex recommends that applications use the following directory structure,\nwhich is the same used by default in Symfony 4, but you can\ncustomize some directories:': 'Symfony Flex 推荐应用程序采用以下目录结构，这与 Symfony 4 默认使用的结构相同，但您可以<a href="flex.html#flex-customize-paths" class="reference internal">自定义某些目录</a>：',
        'This means that installing the symfony/flex dependency in your application\nis not enough. You must also upgrade the directory structure to the one shown\nabove. There\'s no automatic tool to make this upgrade, so you must follow these\nmanual steps:': '这意味着仅仅在您的应用中安装 <code translate="no" class="notranslate">symfony/flex</code> 依赖是不够的。您还必须将目录结构升级到上述结构。没有自动工具来完成这一升级，因此您需要遵循以下手动步骤：',
        'Install Flex as a dependency of your project:': '将 Flex 安装为您的项目的依赖：',
        'If the project\'s composer.json file contains symfony/symfony dependency,\nit still depends on the Symfony Standard Edition, which is no longer available\nin Symfony 4. First, remove this dependency:': '如果项目的 <code translate="no" class="notranslate">composer.json</code> 文件中含有 <code translate="no" class="notranslate">symfony/symfony</code> 依赖，那么它仍然依赖于 Symfony 标准版，而后者在 Symfony 4 中已不再可用。首先，移除这个依赖：',
        'Now add the symfony/symfony package to the conflict section of the project\'s\ncomposer.json file as shown in this example of the skeleton-project so that\nit will not be installed again:': '现在将 <code translate="no" class="notranslate">symfony/symfony</code> 包添加到项目 <code translate="no" class="notranslate">composer.json</code> 文件的冲突（<code translate="no" class="notranslate">conflict</code>）部分，如<a href="https://github.com/symfony/skeleton/blob/a0770a7f26eeda9890a104fa3de8f68c4120fca5/composer.json#L55-L57" class="reference external" rel="external noopener noreferrer" target="_blank">下例中的 skeleton-project 所示</a>，以确保它不会被再次安装：',
        'Now you must add in composer.json all the Symfony dependencies required\nby your project. A quick way to do that is to add all the components that\nwere included in the previous symfony/symfony dependency and later you\ncan remove anything you don\'t really need:': '现在您必须在 <code translate="no" class="notranslate">composer.json</code> 中添加项目所需的所有 Symfony 依赖。一个快速的方法是添加之前 <code translate="no" class="notranslate">symfony/symfony</code> 依赖中包含的所有组件，之后您可以移除任何实际上不需要的组件：',
        'If the project\'s composer.json file doesn\'t contain the symfony/symfony\ndependency, it already defines its dependencies explicitly, as required by\nFlex. Reinstall all dependencies to force Flex to generate the\nconfiguration files in config/, which is the most tedious part of the upgrade\nprocess:': '如果项目的 <code translate="no" class="notranslate">composer.json</code> 文件中不包含 <code translate="no" class="notranslate">symfony/symfony</code> 依赖，那么它已经显式定义了所需的依赖，这是 Flex 所要求的。重新安装所有依赖以强制 Flex 在 <code translate="no" class="notranslate">config/</code> 目录下生成配置文件，这是升级过程中最繁琐的部分：',
        'Regardless of which of the previous steps you followed, at this point you\'ll have\nlots of new config files in config/. They contain the default config\ndefined by Symfony, so you must check your original files in app/config/\nand make the needed changes in the new files. Flex config doesn\'t use suffixes\nin config files, so the old app/config/config_dev.yml goes to\nconfig/packages/dev/*.yaml, etc.': '无论您遵循了上述哪个步骤，在这一点上，您会在 <code translate="no" class="notranslate">config/</code> 目录下有许多新的配置文件。这些文件包含了 Symfony 定义的默认配置，因此您需要检查原本位于 <code translate="no" class="notranslate">app/config/</code> 下的文件，并在新文件中做出必要的更改。Flex 的配置文件不使用后缀，因此旧的 <code translate="no" class="notranslate">app/config/config_dev.yml</code> 需要移动到 <code translate="no" class="notranslate">config/packages/dev/*.yaml</code> 等位置。',
        'The most important config file is app/config/services.yml, which now is\nlocated at config/services.yaml. Copy the contents of the\ndefault services.yaml file and then add your own service configuration.\nLater you can revisit this file because thanks to Symfony\'s\nautowiring feature you can remove\nmost of the service configuration.': '最重要的配置文件是 <code translate="no" class="notranslate">app/config/services.yml</code>，现在它位于 <code translate="no" class="notranslate">config/services.yaml</code>。复制<a href="https://github.com/symfony/recipes/blob/master/symfony/framework-bundle/5.3/config/services.yaml" class="reference external" rel="external noopener noreferrer" target="_blank">默认 services.yaml 文件</a>的内容，然后添加您自己的服务配置。稍后您可以重新审视这个文件，因为借助 Symfony 的<a href="../service_container/autowiring.html" class="reference internal">自动连线（autowiring）特性</a>，您可以移除大部分的服务配置。',
        'Make sure that your previous configuration files don\'t have imports\ndeclarations pointing to resources already loaded by Kernel::configureContainer()\nor Kernel::configureRoutes() methods.': '确保您的原有配置文件中没有指向已经被 <code translate="no" class="notranslate">Kernel::configureContainer()</code> 或 <code translate="no" class="notranslate">Kernel::configureRoutes()</code> 方法加载的资源的 <code translate="no" class="notranslate">imports</code> 声明。',
        'Move the rest of the app/ contents as follows (and after that, remove the\napp/ directory):': '按照以下方式移动 <code translate="no" class="notranslate">app/</code> 目录下的其余内容（之后可以删除 <code translate="no" class="notranslate">app/</code> 目录）：',
        'rest of app/Resources/ files -> src/Resources/': '<code translate="no" class="notranslate">app/Resources/</code> 文件夹中的其余文件 -&gt; <code translate="no" class="notranslate">src/Resources/</code>',
        'Move the original PHP source code files from src/AppBundle/*, except bundle\nspecific files (like AppBundle.php and DependencyInjection/), to\nsrc/ and update the namespace of each moved file to be App\\... (advanced\nIDEs can do this automatically).': '将原始 PHP 源代码文件从 <code translate="no" class="notranslate">src/AppBundle/*</code> 移动到 <code translate="no" class="notranslate">src/</code>（除了特定于 Bundle 的文件，如 <code translate="no" class="notranslate">AppBundle.php</code> 和 <code translate="no" class="notranslate">DependencyInjection/</code>），并将每个移动文件的命名空间更新为 <code translate="no" class="notranslate">App\...</code>（高级 IDE 可以自动完成这项工作）。',
        'In addition to moving the files, update the autoload and autoload-dev\nvalues of the composer.json file as shown in this example to use\nApp\\ and App\\Tests\\ as the application namespaces.': '除了移动文件之外，还需要更新 <code translate="no" class="notranslate">composer.json</code> 文件中的 <code translate="no" class="notranslate">autoload</code> 和 <code translate="no" class="notranslate">autoload-dev</code> 值，如<a href="https://github.com/symfony/skeleton/blob/a0770a7f26eeda9890a104fa3de8f68c4120fca5/composer.json#L30-L39" class="reference external" rel="external noopener noreferrer" target="_blank">下例所示</a>，使用 <code translate="no" class="notranslate">App\\</code> 和 <code translate="no" class="notranslate">App\\Tests\\</code> 作为应用的命名空间。',
        'If you used multiple bundles to organize your code, you must reorganize your\ncode into src/. For example, if you had src/UserBundle/Controller/DefaultController.php\nand src/ProductBundle/Controller/DefaultController.php, you could move\nthem to src/Controller/UserController.php and src/Controller/ProductController.php.': '如果您使用了多个 Bundle 来组织代码，您需要将代码重新组织到 <code translate="no" class="notranslate">src/</code> 目录下。例如，如果您有 <code translate="no" class="notranslate">src/UserBundle/Controller/DefaultController.php</code> 和 <code translate="no" class="notranslate">src/ProductBundle/Controller/DefaultController.php</code>，您可以将它们移动到 <code translate="no" class="notranslate">src/Controller/UserController.php</code> 和 <code translate="no" class="notranslate">src/Controller/ProductController.php</code>。',
        'Move the public assets, such as images or compiled CSS/JS files, from\nsrc/AppBundle/Resources/public/ to public/ (e.g. public/images/).': '将公共资源文件，如图片或编译后的 CSS/JS 文件，从 <code translate="no" class="notranslate">src/AppBundle/Resources/public/</code> 移动到 <code translate="no" class="notranslate">public/</code>（例如 <code translate="no" class="notranslate">public/images/</code>）。',
        'Remove src/AppBundle/.': '移除 <code translate="no" class="notranslate">src/AppBundle/</code>。',
        'Move the source of the assets (e.g. the SCSS files) to assets/ and use\nWebpack Encore to manage and compile them.': '将资产的源文件（例如 SCSS 文件）移动到 <code translate="no" class="notranslate">assets/</code> 并使用 <a href="../frontend.html" class="reference internal">Webpack Encore</a> 来管理和编译它们。',
        'SYMFONY_DEBUG and SYMFONY_ENV environment variables were replaced by\nAPP_DEBUG and APP_ENV. Copy their values to the new vars and then remove\nthe former ones.': '<code translate="no" class="notranslate">SYMFONY_DEBUG</code> 和 <code translate="no" class="notranslate">SYMFONY_ENV</code> 环境变量已被 <code translate="no" class="notranslate">APP_DEBUG</code> 和 <code translate="no" class="notranslate">APP_ENV</code> 替换。将它们的值复制到新的变量中，然后移除原有的变量。',
        'Create the new public/index.php front controller\ncopying Symfony\'s index.php source and, if you made any customization in\nyour web/app.php and web/app_dev.php files, copy those changes into\nthe new file. You can now remove the old web/ dir.': '创建新的 <code translate="no" class="notranslate">public/index.php</code> 前端控制器，通过<a href="https://github.com/symfony/recipes/blob/master/symfony/framework-bundle/5.3/public/index.php" class="reference external" rel="external noopener noreferrer" target="_blank">复制 Symfony 的 index.php 源代码</a>，并且如果您对 <code translate="no" class="notranslate">web/app.php</code> 和 <code translate="no" class="notranslate">web/app_dev.php</code> 文件进行了任何定制化修改，请将这些修改复制到新的文件中。现在您可以移除旧的 <code translate="no" class="notranslate">web/</code> 目录。',
        'Update the bin/console script copying Symfony\'s bin/console source\nand changing anything according to your original console script.': '更新 <code translate="no" class="notranslate">bin/console</code> 脚本，通过<a href="https://github.com/symfony/recipes/blob/master/symfony/console/5.3/bin/console" class="reference external" rel="external noopener noreferrer" target="_blank">复制 Symfony 的 bin/console 源代码</a>，并根据您原来的控制台脚本进行相应的修改。',
        'Remove the bin/symfony_requirements script and if you need a replacement\nfor it, use the new Symfony Requirements Checker.': '移除 <code translate="no" class="notranslate">bin/symfony_requirements</code> 脚本，如果您需要替代方案，可以使用新的 <a href="https://github.com/symfony/requirements-checker" class="reference external" rel="external noopener noreferrer" target="_blank">Symfony 需求检查器</a>。',
        'Update the .gitignore file to replace the existing var/logs/ entry\nby var/log/, which is the new name for the log directory.': '更新 <code translate="no" class="notranslate">.gitignore</code> 文件，将现有的 <code translate="no" class="notranslate">var/logs/</code> 条目替换为 <code translate="no" class="notranslate">var/log/</code>，这是日志目录的新名称。',
        'Customizing Flex Paths': '定制 Flex 路径',
        'The Flex recipes make a few assumptions about your project\'s directory structure.\nSome of these assumptions can be customized by adding a key under the extra\nsection of your composer.json file. For example, to tell Flex to copy any\nPHP classes into src/App instead of src:': 'Flex 配方对您的项目的目录结构有一些假设。其中一些假设可以通过在 <code translate="no" class="notranslate">composer.json</code> 文件的 <code translate="no" class="notranslate">extra</code> 部分添加键来进行定制。例如，要告诉 Flex 将所有 PHP 类复制到 <code translate="no" class="notranslate">src/App</code> 而不是 <code translate="no" class="notranslate">src</code>，可以这样做：',
        'The configurable paths are:': '可配置的路径包括：',
        'bin-dir: defaults to bin/': '<code translate="no" class="notranslate">bin-dir</code>：默认为 <code translate="no" class="notranslate">bin/</code>',
        'config-dir: defaults to config/': '<code translate="no" class="notranslate">config-dir</code>：默认为 <code translate="no" class="notranslate">config/</code>',
        'src-dir defaults to src/': '<code translate="no" class="notranslate">src-dir</code>：默认为 <code translate="no" class="notranslate">src/</code>',
        'var-dir defaults to var/': '<code translate="no" class="notranslate">var-dir</code>：默认为 <code translate="no" class="notranslate">var/</code>',
        'public-dir defaults to public/': '<code translate="no" class="notranslate">public-dir</code>：默认为 <code translate="no" class="notranslate">public/</code>',
        'If you customize these paths, some files copied from a recipe still may contain\nreferences to the original path. In other words: you may need to update some things\nmanually after a recipe is installed.': '如果您定制了这些路径，某些从配方复制的文件可能仍然包含对原始路径的引用。换句话说：在安装配方后，您可能需要手动更新某些内容。',
        'Learn more': '了解更多',
        'How To Configure and Use Flex Private Recipe Repositories': '<a href="flex_private_recipes.html" class="reference internal">如何配置和使用 Flex 私有配方仓库</a>',
    };

    fanyi(translates, 1);
})($);
