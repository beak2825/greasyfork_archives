// ==UserScript==
// @name         禁用浏览器ctrl D/command D快捷键
// @name:ar      تعطيل اختصارات المتصفح Ctrl D/Command D
// @name:bg      Деактивиране на бързи клавиши Ctrl D/Command D в браузъра
// @name:cs      Zakázat klávesové zkratky Ctrl D/Command D v prohlížeči
// @name:da      Deaktivér browserens Ctrl D/Command D genveje
// @name:de      Browser-Shortcuts Ctrl D/Command D deaktivieren
// @name:el      Απενεργοποίηση συντομεύσεων Ctrl D/Command D του προγράμματος περιήγησης
// @name:en      Disable browser Ctrl D/Command D shortcuts
// @name:eo      Malŝalti retumilajn klavkombinojn Ctrl D/Command D
// @name:es      Desactivar los atajos Ctrl D/Command D del navegador
// @name:fi      Poista selaimen Ctrl D/Command D -pikanäppäimet käytöstä
// @name:fr      Désactiver les raccourcis Ctrl D/Command D du navigateur
// @name:fr-CA   Désactiver les raccourcis Ctrl D/Command D du navigateur
// @name:he      השבת קיצורי דרך Ctrl D/Command D בדפדפן
// @name:hr      Onemogući prečace Ctrl D/Command D u pregledniku
// @name:hu      Böngésző Ctrl D/Command D gyorsbillentyűk letiltása
// @name:id      Nonaktifkan pintasan Ctrl D/Command D pada peramban
// @name:it      Disabilita le scorciatoie Ctrl D/Command D del browser
// @name:ja      ブラウザのCtrl D/Command Dショートカットを無効化
// @name:ka      გამორთე ბრაუზერის Ctrl D/Command D მალსახმობები
// @name:ko      브라우저 Ctrl D/Command D 단축키 비활성화
// @name:nb      Deaktiver nettleserens Ctrl D/Command D-snarveier
// @name:nl      Schakel browser Ctrl D/Command D-sneltoetsen uit
// @name:pl      Wyłącz skróty Ctrl D/Command D w przeglądarce
// @name:pt-BR   Desativar atalhos Ctrl D/Command D do navegador
// @name:ro      Dezactivează scurtăturile Ctrl D/Command D din browser
// @name:ru      Отключить сочетания клавиш Ctrl D/Command D в браузере
// @name:sk      Zakázať klávesové skratky Ctrl D/Command D v prehliadači
// @name:sr      Onemogući prečice Ctrl D/Command D u pregledaču
// @name:sv      Inaktivera webbläsarens Ctrl D/Command D-genvägar
// @name:th      ปิดการใช้งานปุ่มลัด Ctrl D/Command D ของเบราว์เซอร์
// @name:tr      Tarayıcı Ctrl D/Command D kısayollarını devre dışı bırak
// @name:ug      توركۆرگۈچىنىڭ Ctrl D/Command D تېزلەتمە كۇنۇپكىلىرىنى چەكلەش
// @name:uk      Вимкнути комбінації клавіш Ctrl D/Command D у браузері
// @name:vi      Vô hiệu hóa phím tắt Ctrl D/Command D của trình duyệt
// @name:zh      禁用浏览器Ctrl D/Command D快捷键
// @name:zh-CN   禁用浏览器Ctrl D/Command D快捷键
// @name:zh-HK   停用瀏覽器Ctrl D/Command D快捷鍵
// @name:zh-SG   禁用浏览器Ctrl D/Command D快捷键
// @name:zh-TW   停用瀏覽器Ctrl D/Command D快捷鍵
// @description  Enable or disable website hotkeys using a MenuCommand
// @description:ar تمكين أو تعطيل مفاتيح الاختصار للموقع باستخدام MenuCommand
// @description:bg Активиране или деактивиране на горещи клавиши на уебсайта чрез MenuCommand
// @description:cs Povolit nebo zakázat klávesové zkratky webu pomocí MenuCommand
// @description:da Aktivér eller deaktivér hjemmesidens genvejstaster ved hjælp af en MenuCommand
// @description:de Website-Schnelltasten mit einem MenuCommand aktivieren oder deaktivieren
// @description:el Ενεργοποίηση ή απενεργοποίηση συντομεύσεων ιστότοπου χρησιμοποιώντας MenuCommand
// @description:en Enable or disable website hotkeys using a MenuCommand
// @description:eo Ebligi aŭ malŝalti retejajn klavkombinojn per MenuCommand
// @description:es Habilitar o deshabilitar teclas rápidas del sitio web usando un MenuCommand
// @description:fi Ota käyttöön tai poista käytöstä verkkosivuston pikanäppäimet MenuCommandilla
// @description:fr Activer ou désactiver les touches rapides du site web avec un MenuCommand
// @description:fr-CA Activer ou désactiver les touches rapides du site web avec un MenuCommand
// @description:he הפעל או השבת קיצורי מקשים של אתר באמצעות MenuCommand
// @description:hr Omogući ili onemogući prečace web stranice pomoću MenuCommand
// @description:hu Weboldal gyorsbillentyűk engedélyezése vagy letiltása MenuCommand használatával
// @description:id Aktifkan atau nonaktifkan tombol pintas situs web menggunakan MenuCommand
// @description:it Abilita o disabilita le scorciatoie del sito web usando un MenuCommand
// @description:ja MenuCommandを使用してウェブサイトのホットキーを有効または無効にする
// @description:ka ჩართე ან გამორთე ვებსაიტის მალსახმობები MenuCommand-ის გამოყენებით
// @description:ko MenuCommand를 사용하여 웹사이트 단축키를 활성화 또는 비활성화
// @description:nb Aktiver eller deaktiver nettstedets hurtigtaster ved hjelp av en MenuCommand
// @description:nl Schakel website-sneltoetsen in of uit met een MenuCommand
// @description:pl Włącz lub wyłącz skróty klawiszowe strony internetowej za pomocą MenuCommand
// @description:pt-BR Ativar ou desativar teclas de atalho do site usando um MenuCommand
// @description:ro Activează sau dezactivează tastele rapide ale site-ului folosind un MenuCommand
// @description:ru Включить или отключить горячие клавиши сайта с помощью MenuCommand
// @description:sk Povoliť alebo zakázať klávesové skratky webovej stránky pomocou MenuCommand
// @description:sr Omogući ili onemogući prečice veb sajta pomoću MenuCommand
// @description:sv Aktivera eller inaktivera webbplatsens genvägar med en MenuCommand
// @description:th เปิดหรือปิดการใช้งานปุ่มลัดของเว็บไซต์โดยใช้ MenuCommand
// @description:tr MenuCommand kullanarak web sitesi kısayol tuşlarını etkinleştir veya devre dışı bırak
// @description:ug MenuCommand ئىشلىتىپ تور بېكەتنىڭ تېزلەتمە كۇنۇپكىلىرىنى قوزغىتىش ياكى چەكلەش
// @description:uk Увімкнути або вимкнути гарячі клавіші вебсайту за допомогою MenuCommand
// @description:vi Bật hoặc tắt phím nóng của trang web bằng MenuCommand
// @description:zh 使用MenuCommand启用或禁用网站快捷键
// @description:zh-CN 使用MenuCommand启用或禁用网站快捷键
// @description:zh-HK 使用MenuCommand啟用或停用網站快捷鍵
// @description:zh-SG 使用MenuCommand启用或禁用网站快捷键
// @description:zh-TW 使用MenuCommand啟用或停用網站快捷鍵
// @namespace    http://tampermonkey.net/
// @version      0.1.2.1
// @author       aspen138
// @match        http://*/*
// @match        https://*/*
// @grant        GM_registerMenuCommand
// @grant        GM_getValue
// @grant        GM_setValue
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/485142/%E7%A6%81%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8ctrl%20Dcommand%20D%E5%BF%AB%E6%8D%B7%E9%94%AE.user.js
// @updateURL https://update.greasyfork.org/scripts/485142/%E7%A6%81%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8ctrl%20Dcommand%20D%E5%BF%AB%E6%8D%B7%E9%94%AE.meta.js
// ==/UserScript==

(function() {
    'use strict';

    // Retrieve hotkeysEnabled state from storage or default to true
    let hotkeysEnabled = GM_getValue('hotkeysEnabled', true);

    // Function to toggle the state of hotkeysEnabled
    function toggleHotkeys() {
        hotkeysEnabled = !hotkeysEnabled;
        GM_setValue('hotkeysEnabled', hotkeysEnabled); // Save the new state to storage
        console.log('Hotkeys are now ' + (hotkeysEnabled ? 'enabled' : 'disabled'));
        alert('Hotkeys are now ' + (hotkeysEnabled ? 'enabled' : 'disabled'));
    }

    // Add menu command to toggle hotkeys
    GM_registerMenuCommand("Toggle Hotkeys", toggleHotkeys, 't');

    // Event listener to catch keydown events and prevent them if hotkeys are disabled
    document.addEventListener('keydown', function(e) {
        if(!hotkeysEnabled) {
            // Prevent default action for Ctrl+D or Command+D
            if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'd') {
                e.preventDefault();  // Prevent the default action
                e.stopPropagation(); // Stop the event from propagating to other handlers
            }
        }
    }, true);
})();