// ==UserScript==
// @name         あがー
// @namespace	http://tampermonkey.net/
// @version		5.1.0
// @icon        https://i.imgur.com/pCHt43l.jpg
// @description	extend script for senpai clients
// @author		sus
// @match		http://caffe.senpai-agar.online/lwga/
// @match		http://senpai-agar.online/lwga/
// @grant		none
// @run-at		document-end
// @downloadURL https://update.greasyfork.org/scripts/498023/%E3%81%82%E3%81%8C%E3%83%BC.user.js
// @updateURL https://update.greasyfork.org/scripts/498023/%E3%81%82%E3%81%8C%E3%83%BC.meta.js
// ==/UserScript==
console.clear(),window.gVar={name:"",tag:"",code:"",skinUrl1:"",skinUrl2:"",camMaxX:0,camMinX:0,camMinY:0,camMaxY:0,tabcamMaxX:0,tabcamMinX:0,tabcamMinY:0,tabcamMaxY:0,playerXMulti:0,playerYMulti:0,tabXMulti:0,tabYMulti:0,Waves:[],conn1:{id:0,x:0,y:0,mass:0,isAlive:!1,isActive:!1,tab1:{x:0,y:0,mass:0,isAlive:!1},tab2:{x:0,y:0,mass:0,isAlive:!1}},conn2:{id:0,x:0,y:0,mass:0,isAlive:!1,isActive:!1,tab1:{x:0,y:0,mass:0,isAlive:!1},tab2:{x:0,y:0,mass:0,isAlive:!1}},tempX:0,tempY:0,stopMouse:!1,controlConn2:!1,conn1Feed:!1,conn2Feed:!1,SettingsMenu:!1,SkinsMenu:!1,massList:[]},PIXI=null;var t,e,n,i={},o=!1;jQuery.getScript("https://pixijs.download/v6.4.2/pixi-legacy.min.js").done(()=>{a(),l()});const r="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ$%",s=String.fromCharCode(64)+r[54]+r[4]+r[13]+r[15]+r[0]+r[8]+r[48]+r[14]+r[3]+"+",a=()=>{PIXI.utils.sayHello("WebGL 2"),e=new PIXI.TextStyle({fontFamily:"Overpass, Arial",lineJoin:"round",fontWeight:"bold",fill:16777215,fontSize:104,stroke:"#000000",strokeThickness:12}),PIXI.BitmapFont.from("GAMEPLAY_MASS",e,{chars:[...PIXI.BitmapFont.NUMERIC,".K"],resolution:1,textureWidth:1440,textureHeight:1440}),n=new PIXI.TextStyle({fontFamily:"Overpass, Arial",lineJoin:"round",fontSize:15,fill:16777215,stroke:"#000000",strokeThickness:1.25}),PIXI.BitmapFont.from("MINIMAP_MASS",n,{chars:[...PIXI.BitmapFont.NUMERIC,".K"],resolution:4})},l=()=>!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=40)}([function(n,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=o(1),s=o(3),a=o(2),l=(function(){function t(){this.procs=[]}t.prototype.Add=function(t){this.procs.push(t)},t.prototype.Fire=function(){this.procs.forEach((function(t){return t()}))}}(),function(){function t(){this.FieldSize=14e3,this.ShowDualSkinInputUi=a.AppConfigurator.instance.showDualSkinInputUi,this.ShowPartyCodeInputUi=a.AppConfigurator.instance.showPartyCodeInputUi,this.IsolateBlankTagPlayers=!0,this.NoskinFallbackUrl="https://i.imgur.com/2ys3Rga.png",this.MaxCellsNum=256,this.MaxPlayerUnitNum=120,this.MaxTeamNum=100,this.MaxClientsNum=100,this.ShowTeamRanking=a.AppConfigurator.instance.showTeamRanking,this.ShowAlwaysAllPlayersInMap=!1,this.ShowAlwaysAllPlayersSkin=!1}return t.prototype.UpdateFieldSize=function(t){this.FieldSize!=t&&(this.FieldSize=t)},t}());i.GameConfig=l;var c=function(){function t(){this.isMainPanelVisible=!0,this.isDeadSpectation=!1,this.isSkinFilterPanelVisible=!1,this.chatRoomSig="",this.playerDeadTimeStamp=0,this.enableTeamChatSeparationCurrent=null}return Object.defineProperty(t.prototype,"isRealtimeMode",{get:function(){return!this.isReplayMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRealtimeModePlaying",{get:function(){return this.isRealtimeMode&&this.isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpectate",{get:function(){return!this.isPlaying},enumerable:!0,configurable:!0}),t.prototype.setMainPanelVisible=function(t){this.isMainPanelVisible=t,this.mainPanelVisibleChangedProc()},t}();i.GameStates=c;var d=function(){this.clGameBackground=4282668424,this.clGameForeground=4294967295,this.clFieldBorder=4294967295,this.clFieldCoords=2298478591,this.clLeaderboardBack=1711276083,this.clLeaderboardHeader=4278255615,this.clMapBackground=2281701376,this.clChatBackground=2281701376,this.clOverlayBack=1140850688,this.clMainPanelBack=2281710216,this.clPanelForeground=4278255615,this.clPanelHeader=4278190148,this.clReplayBar=4278225151,this.clMenuButtons=4278225151,this.clMainButtons=4294901896,this.clUiSymbols=4294967295,this.clUiButtonActive=4278190335,this.clCursorLine=4294967295,this.clVirusOuterStroke=4278255360,this.clVirusInnerFill=2286175300,this.clVirusRangeHint=2286175300,this.clChatTimeString=4289374890,this.clChatSenderName=4278225151,this.clChatMessage=4294967295,this.clMarkerA=14483643,this.clMarkerB=16711680,this.clMarkerC=16737792,this.clMarkerD=16776960,this.clMarkerE=65535,this.clMarkerF=2003199,this.clMarkerG=2154272,this.clMarkerH=32e3,this.clMarkerRing=4282668424,this.clMarkerRing2=4282668424,this.clPellet=4282668424,this.clGardient1=4282668424,this.clGardient2=4282668424};i.ColorDefs=d;var h,p=function(){function t(){this.colorDefs=new d,this.cssColors={},this.changedProcs={},this.Load()}return t.prototype.RegisterChangedProc=function(t,e){this.changedProcs[t]||(this.changedProcs[t]=[]),this.changedProcs[t].push(e)},t.prototype.Load=function(){var t=localStorage.getItem("lwga11_color_defs");if(t){var e=JSON.parse(t);r.Objects.CopyObjectProps(this.colorDefs,e)}for(var n in this.colorDefs)this.UpdateDerivedColorDefs(n)},t.prototype.Save=function(){var t=JSON.stringify(this.colorDefs);localStorage.setItem("lwga11_color_defs",t)},t.prototype.UpdateDerivedColorDefs=function(t){var e=this.colorDefs[t],n=s.ColorHelper.ColorToCssColorString(e);this.cssColors[t]=n},t.prototype.GetCssColor=function(t){return this.cssColors[t]},t.prototype.GetColor=function(t){return this.colorDefs[t]},t.prototype.GetAlpha=function(t){return(this.colorDefs[t]>>24&255)/255},t.prototype.SetConfigColor=function(t,e){this.colorDefs[t]=e,this.UpdateDerivedColorDefs(t),this.changedProcs[t]&&this.changedProcs[t].forEach((function(t){return t()})),this.Save()},t}();i.ColorConfigModel=p,function(t){t[t.Shift=256]="Shift",t[t.Ctrl=512]="Ctrl",t[t.Alt=1024]="Alt"}(h=i.ModificationKeyCode||(i.ModificationKeyCode={}));var u=function(){function e(){this.ShowName=!0,this.ShowMass=!0,this.ShowTripKey=!1,this.ShowMapTripKey=!1,this.ShowUnichatTripKey=!1,this.ShowMapName=!1,this.ShowCursorLine=!0,this.ShowSkin=!0,this.ShowPelletSkin=0,this.ShowEnemySkin=!0,this.ShowEnemyHint=!0,this.ShowFood=!0,this.ShowSelfName=!0,this.ShowSelfSkin=!0,this.ShowReplayBar=!0,this.SimpleVirus=!0,this.VirusSplitHint=!0,this.VirusRangeHint=!1,this.ShowCoord=!0,this.GlowingBorder=!0,this.AniBorder=!1,this.SimplifiedMass=!1,this.AutoHideText=!0,this.GlowingCells=!1,this.GlowingNonPlayerCells=!1,this.ShowLeaderboard=!0,this.ShowMap=!0,this.MapOpaque=!1,this.ShowChatBox=!0,this.ShowClientStatus=!0,this.ShowServerStatus=!1,this.ShowDetailedScore=!1,this.ShowSpecAimCursor=!0,this.AffectZoomingOnReplay=!0,this.Antialias=!0,this.HDMode=!1,this.tab=!0,this.MapCheat=!0,this.useMouseSignal=!1,this.useSpawnSignal=!0,this.ExpendTab1Sight=!1,this.TopTab1Sight=!1,this.HideMenuAfterDeath=!0,this.ShowSplitIndicator=!1,this.ShowSplitCount=!1,this.ShowEatLimitMarker=!1,this.ShowSplitPrediction=!1,this.ShowOrderRing=!1,this.ShowOrderRing2=!1,this.ShowCellRing=!1,this.ShowAutoSplitAlert=!1,this.ShowMassMarker=!1,this.ShowPlayerLog=!0,this.OperationWithMouseButton=!1,this.SwapMouseButtons=!1,this.Debug_DisableSkinLoad=!1,this.ShowCircularName=!1,this.MarkerThin=!0,this.MarkerLight=!0,this.MarkerExtend=!0,this.ShowCellDirectionMarker=!1,this.TogglePlayerTransparentCells=!1,this.AnotherSectionCellsAlpha=.5,this.massBugLatency=.9,this.RenderOffset=.5,this.RenderQuality=1,this.CameraZoomSpeed=100,this.CameraMovementSpeed=0,this.InterpolationType=1,this.InterpolationSpeed=.5,this.QuickCaptureTimeOption=2,this.FrameRateOption=4,this.MarkerAlpha=1,this.MarkerThickness=5,this.CursorLineThickness=5,this.PlayerCellsAlpha=1,this.PelletCellsAlpha=.75,this.fieldBackImageUri=a.AppConfigurator.instance.defaultFieldBackImageUri,this.fieldBackImageAlpha="0.6",this.fieldBackImageDrawingMode2=!1,this.panelBackImageUri=a.AppConfigurator.instance.defaultPanelBackImageUri,this.panelBackImageAlpha="0.6",this.changedProcs={},this.changedProcsForViewModel={},this.acceptNewSkins=!0,this.toggleHotKeys={ShowName:78,ShowMass:-1,ShowCursorLine:-1,ShowSkin:-1,ShowPelletSkin:-1,ShowEnemySkin:-1,ShowEnemyHint:-1,ShowFood:-1,ShowSelfName:-1,ShowSelfSkin:-1,ShowSplitIndicator:-1,ShowSplitCount:-1,ShowEatLimitMarker:-1,ShowSplitPrediction:-1,ShowOrderRing:-1,ShowCellRing:-1,ShowAutoSplitAlert:-1,ShowMassMarker:-1,ShowCellDirectionMarker:-1,TogglePlayerTransparentCells:-1,GlowingCells:!1,GlowingNonPlayerCells:!1},this.holdHotKeys={ShowName:78,ShowMass:-1,ShowCursorLine:-1,ShowSkin:-1,ShowPelletSkin:-1,ShowEnemySkin:-1,ShowEnemyHint:-1,ShowFood:-1,ShowSelfName:-1,ShowSelfSkin:-1,ShowSplitIndicator:-1,ShowSplitCount:-1,ShowEatLimitMarker:-1,ShowSplitPrediction:-1,ShowOrderRing:-1,ShowCellRing:-1,ShowAutoSplitAlert:-1,ShowMassMarker:-1,ShowCellDirectionMarker:-1,TogglePlayerTransparentCells:-1,GlowingCells:!1,GlowingNonPlayerCells:!1},this.controlHotKeys={hkSplit:32,hkFeedOne:87,hkFeed:69,hkChangeUnit:9,hkDoubleSplit:84,hkTripleSplit:-1,hkQuadSplit:71,hkSuperQuadSplit:-1,hkInfernoSplit:-1,hk4xLineSplit:-1,hkSuspend:83,hkSuspendBoth:83,hkToggleSuspendBoth:83+h.Alt,hkToggleSuspend:83+h.Alt,hkStartNewGame:90,hkToggelSpectateTarget:81,hkQuickReplayCapture:-1,hkToggleReplayRecording:-1,hkPlaybackReplay:-1,hkTab:90,hkMassBug:65},this.RegisterChangedProc("ShowEnemyHint",()=>{i.gs.gconfig.ShowAlwaysAllPlayersSkin=!this.ShowEnemyHint,t.cells.forEach(t=>{t.edgeColor=-1})}),this.StoreDefaultConfig(),this.Load()}return e.prototype.RegisterChangedProc=function(t,e){this.changedProcs[t]=e},e.prototype.GetBgImageAlphaValue=function(t){var e=parseFloat(this[t]);return isNaN(e)?.5:e},e.prototype.SetValue=function(t,e){this[t]!=e&&(this[t]=e,this.Store(),this.changedProcs[t]&&this.changedProcs[t](t,e),this.changedProcsForViewModel[t]&&this.changedProcsForViewModel[t]())},e.prototype.SetControlHotKey=function(t,e){this.controlHotKeys[t]!=e&&(this.controlHotKeys[t]=e,this.Store())},e.prototype.SetToggleHotKey=function(t,e){this.toggleHotKeys[t]!=e&&(this.toggleHotKeys[t]=e,this.Store())},e.prototype.SetHoldHotKey=function(t,e){this.holdHotKeys[t]!=e&&(this.holdHotKeys[t]=e,this.Store())},e.prototype.SetAcceptNewSkins=function(t){this.acceptNewSkins=t,this.Store()},e.prototype.Load=function(){var t=localStorage.getItem(e.storage_key);t&&s.StorageHelper.LoadObjectProps(this,t)},e.prototype.Store=function(){var t=JSON.stringify(this);localStorage.setItem(e.storage_key,t)},e.prototype.StoreDefaultConfig=function(){e.default_config_json_text=JSON.stringify(this)},e.prototype.RecoverDefaultConfig=function(){s.StorageHelper.LoadObjectProps(this,e.default_config_json_text),this.Store(),this.resetListenerProc()},e.cellDisplayOptionPropNames=["ShowName","ShowMass","ShowSelfName","ShowSelfSkin","ShowSkin","ShowPelletSkin","ShowEnemySkin","ShowEnemyHint","ShowFood","ShowCursorLine","ShowMassMarker","ShowSplitPrediction","ShowOrderRing","ShowOrderRing2","ShowCellRing","ShowAutoSplitAlert","ShowSplitIndicator","ShowEatLimitMarker","ShowCellDirectionMarker","TogglePlayerTransparentCells","GlowingCells","GlowingNonPlayerCells"],e.gameDisplayOptionPropNames=["SimpleVirus","VirusSplitHint","ShowTripKey","ShowMapTripKey","ShowUnichatTripKey","MapCheat","useSpawnSignal","MapOpaque","ShowMapName","VirusRangeHint","ShowCoord","GlowingBorder","AniBorder","SimplifiedMass","AutoHideText","ShowReplayBar","ShowChatBox","ShowClientStatus","ShowServerStatus","ShowLeaderboard","ShowMap","ShowSpecAimCursor","ShowCircularName","MarkerThin","MarkerLight","MarkerExtend","ShowPlayerLog"],e.basicBehaviorPropNames=["tab","ExpendTab1Sight","TopTab1Sight","OperationWithMouseButton","SwapMouseButtons","AffectZoomingOnReplay","Antialias","HDMode","HideMenuAfterDeath"],e.controlPropNames=["hkTab","hkChangeUnit","hkSplit","hkFeedOne","hkFeed","hkDoubleSplit","hkTripleSplit","hkQuadSplit","hkSuperQuadSplit","hkInfernoSplit","hk4xLineSplit","hkSuspend","hkToggleSuspend","hkSuspendBoth","hkToggleSuspendBoth","hkStartNewGame","hkToggelSpectateTarget","hkQuickReplayCapture","hkToggleReplayRecording","hkPlaybackReplay","hkMassBug"],e.storage_key="lwga11_user_config",e}();i.UserConfig=u;var g=function(){function t(){this.renderQuality=800,this.isJapanese=a.AppConfigurator.instance.isJapanese,this.interpolationType=["Fast","Linear","Preceding"],this.renderQualityTextSourceJp=["低","中","高"],this.renderQualityTextSourceEn=["Low","Mid","High"],this.quickCaptureTimeSource=[10,20,30,40,50,60],this.frameRateSource=[10,15,20,30,60]}return Object.defineProperty(t.prototype,"RenderQualityText",{get:function(){const t=i.gs.uconfig.RenderQuality,n=200<<t;return this.renderQuality!=n&&(this.renderQuality=n,e.fontSize=.13*n>>0,e.strokeThickness=.015*n>>0,e.lineJoin="round",PIXI.BitmapFont.from("GAMEPLAY_MASS",e,{chars:[...PIXI.BitmapFont.NUMERIC],resolution:1,textureWidth:1440,textureHeight:1440})),(this.isJapanese?this.renderQualityTextSourceJp:this.renderQualityTextSourceEn)[t]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InterpolationTypeText",{get:function(){var t=i.gs.uconfig.InterpolationType;return this.interpolationType[t]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InterpolationSpeedText",{get:function(){var t=100*i.gs.uconfig.InterpolationSpeed-50;return parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InterpolationSpeedWidth",{get:function(){const t=i.gs.uconfig.InterpolationSpeed,e=Number(100*(t- -.5)/1.5);return`calc(${e}% + (${15-.15*e}px))`},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"QuickCaptureTimeSec",{get:function(){var t=i.gs.uconfig.QuickCaptureTimeOption;return this.quickCaptureTimeSource[t]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FrameRateText",{get:function(){return[16,25,33,50,100][i.gs.uconfig.FrameRateOption]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TargetFrameRate",{get:function(){var t=i.gs.uconfig.FrameRateOption;return this.frameRateSource[t]},enumerable:!0,configurable:!0}),t}();i.UserConfigSupport=g;var f=function(){function t(){}return t.texts_jp={clGameBackground:"ゲーム背景",clGameForeground:"ゲーム前景",clFieldBorder:"フィールド枠",clFieldCoords:"フィールド座標",clLeaderboardBack:"LB背景",clLeaderboardHeader:"LBヘッダ",clMapBackground:"マップ背景",clChatBackground:"チャット背景",clOverlayBack:"オーバーレイ背景",clMainPanelBack:"パネル背景",clPanelForeground:"パネル前景",clPanelHeader:"パネルヘッダ",clReplayBar:"リプレイバー",clMenuButtons:"メニューボタン",clMainButtons:"メインボタン",clUiSymbols:"シンボル",clUiButtonActive:"ボタン(アクティブ)",clCursorLine:"カーソルライン",clVirusOuterStroke:"棘枠",clVirusInnerFill:"棘塗り",clVirusRangeHint:"棘の射程ヒント",clChatSenderName:"チャット送信者名",clChatTimeString:"チャット時刻",clChatMessage:"チャットメッセージ",clMarkerA:"質量マーカー ロケパンと食われる",clMarkerB:"質量マーカー 飛ばれると食われる",clMarkerC:"質量マーカー 重なると食われる",clMarkerD:"質量マーカー 重なれる",clMarkerE:"質量マーカー 重なると食える",clMarkerF:"質量マーカー 分裂で重ねられる",clMarkerG:"質量マーカー 分裂で食える",clMarkerH:"質量マーカー ロケパンで食える",clMarkerRing:"操作中の細胞の色",clMarkerRing2:"操作中の細胞の色2",clPellet:"ペレットの色",clGardient1:"clGardient1",clGardient2:"clGardient2",OperationWithMouseButton:"マウス操作",SwapMouseButtons:"左右ボタンの機能を入れ替える",AffectZoomingOnReplay:"リプレイ中にズーム操作を再現",Antialias:"アンチエイリアス",HDMode:"HDモード(再ロードで反映)",HideMenuAfterDeath:"死後のメニューを隠す",ShowName:"名前",ShowMass:"質量",ShowSelfName:"自分の名前",ShowSelfSkin:"自分のスキン",ShowSkin:"スキン",ShowPelletSkin:"ペレットのスキン",ShowEnemySkin:"敵のスキン",ShowEnemyHint:"敵のヒント",ShowFood:"ペレット",ShowCursorLine:"カーソルライン",ShowMassMarker:"質量マーカー",ShowSplitPrediction:"分裂順序マーカー",ShowOrderRing:"ShowOrderRing(type1)",ShowOrderRing2:"ShowOrderRing(type2)",changehkTab:"changehkTab",hkMassBug:"Massbug",ShowCellRing:"ShowCellRing",ShowAutoSplitAlert:"自然分裂アラート",ShowSplitIndicator:"スプリットインジケータ",ShowEatLimitMarker:"捕食判定",ShowCellDirectionMarker:"移動方向マーカー",TogglePlayerTransparentCells:"細胞の透過",SimpleVirus:"円形棘",VirusSplitHint:"棘の分裂ヒント",VirusRangeHint:"棘の射程ヒント",ShowCoord:"フィールド座標",GlowingBorder:"フィールド枠の発光",AniBorder:"AniBorder(reflected on reload)",SimplifiedMass:"質量表示簡略化",AutoHideText:"名前/質量の自動非表示",GlowingCells:"細胞の発光",GlowingNonPlayerCells:"棘の発光",ShowTripKey:"トリップキーを表示",ShowMapTripKey:"トリップキーを表示(マップ)",ShowUnichatTripKey:"トリップキーを表示（チャット）",ShowMapName:"マップ上に名前を表示",ShowReplayBar:"リプレイバー",ShowChatBox:"チャット",ShowDetailedScore:"詳細なスコア",ShowClientStatus:"クライアントステータス",ShowServerStatus:"サーバステータス",ShowLeaderboard:"スコアボード",ShowMap:"マップ",MapOpaque:"細胞の不透過(ミニマップ)",ShowSpecAimCursor:"観戦ターゲットのカーソルを表示",ShowCircularName:"名前ラベルを円形に配置",ShowPlayerLog:"プレイヤーログ",MarkerThin:"マーカー薄くなること",MarkerLight:"マーカー軽量化",MarkerExtend:"マーカー拡張",MapCheat:"マップ拡張",useMouseSignal:"useMouseSignal",useSpawnSignal:"useSpawnSignal",ExpendTab1Sight:"ExpendTab1Sight",TopTab1Sight:"TopTab1Sight",tab:"追加Tab",hkTab:"タブ切り替え",hkMassBug:"massBug",hkSplit:"分裂",hkFeedOne:"餌単発",hkFeed:"餌連射",hkChangeUnit:"ユニット切り替え",hkDoubleSplit:"ダブル分裂",hkTripleSplit:"トリプル分裂",hkQuadSplit:"全分裂",hkSuperQuadSplit:"スーパー全分裂",hkInfernoSplit:"インフェルノ分裂",hk4xLineSplit:"直線全分裂モード",hkSuspend:"その場で停止",hkToggleSuspendBoth:"その場で停止(トグル)1+2",hkSuspendBoth:"その場で停止1+2",hkToggleSuspend:"その場で停止(トグル)",hkStartNewGame:"ゲーム開始",hkToggelSpectateTarget:"観戦モード",hkQuickReplayCapture:"クイックキャプチャ",hkToggleReplayRecording:"録画/停止",hkPlaybackReplay:"リプレイを再生",hdrConfiguration:"設定",hdrCellDisplay:"セル表示",hdrGameDisplay:"ゲーム表示",hdrBasicOperation:"基本動作",hdrControl:"操作",lbtResetConfig:"設定初期化",lbtOutputConfig:"OutputConfig",lbtInputConfig:"InputConfig",lbtCameraZoomSpeed:"カメラズーム速度",lbtCameraMovementSpeed:"カメラ移動速度",lbtInterpolationType:"補間タイプ",lbtInterpolationResponce:"補間応答速度",lbtMarkerOpacity:"マーカーAlpha",lbtCursorLineThickness:"カーソルラインの太さ",lbtMarkerThickness:"MarkerThickness",lbtPlayerCellsAlpha:"細胞の透明度",lbtPelletCellsAlpha:"ペレット細胞の透明度",lbtAnotherSectionCellsAlpha:"別セクションの細胞透明度（カフェ）",lbtRenderOffset:"RenderOffset",lbtmassBugLatency:"massBugLatency",lbtRenderQuality:"画質",lbtCaptureDuration:"キャプチャ時間",lbtFrameRate:"フレームレート",hdrTheme:"テーマ",hdrColor:"色",hdrWallpaper:"壁紙"},t.texts_zh={clGameBackground:"遊戲背景",clGameForeground:"遊戲前景",clFieldBorder:"場地外框",clFieldCoords:"場地座標",clLeaderboardBack:"排行榜背景",clLeaderboardHeader:"排行榜標題",clMapBackground:"小地圖背景",clChatBackground:"聊天室背景",clOverlayBack:"覆蓋背景",clMainPanelBack:"主選單背景",clPanelForeground:"主選單前景",clReplayBar:"重播條",clMenuButtons:"菜單按鈕",clMainButtons:"主頁按鈕",clUiSymbols:"界面符號",clUiButtonActive:"按鈕（啟用）",clCursorLine:"滑鼠指向線",clVirusOuterStroke:"刺球外框",clVirusInnerFill:"刺球填滿",clVirusRangeHint:"刺球射程填滿",clChatSenderName:"聊天室名稱",clChatTimeString:"聊天室時間",clChatMessage:"聊天室內容",clMarkerA:"質量標示可被雙拍",clMarkerB:"質量標示可被單拍",clMarkerC:"質量標示可被壓死",clMarkerD:"質量標示可被雙拍",clMarkerE:"質量標示可壓死",clMarkerF:"質量標示分裂可壓住",clMarkerG:"質量標示分裂可吃掉",clMarkerH:"質量標示可雙拍",clMarkerRing:"雙開環顏色",clMarkerRing2:"雙開環顏色2",clPellet:"點點顏色",clGardient1:"clGardient1",clGardient2:"clGardient2",OperationWithMouseButton:"啟用滑鼠操作",SwapMouseButtons:"交換滑鼠按鈕",AffectZoomingOnReplay:"在回放時自動縮放",Antialias:"反鋸齒",HDMode:"1.5x解析度（F5後生效）",HideMenuAfterDeath:"死亡後不顯示主選單",ShowName:"顯示名稱",ShowMass:"顯示質量",ShowSelfName:"顯示自身名稱",ShowSelfSkin:"顯示自身皮膚",ShowSkin:"顯示皮膚",ShowPelletSkin:"點點皮膚",ShowEnemySkin:"顯示敵人皮膚",ShowEnemyHint:"顯示敵人標記",ShowFood:"顯示點點",ShowCursorLine:"顯示滑鼠指向線",ShowMassMarker:"顯示質量標記",ShowSplitPrediction:"顯示分裂預測環",ShowAutoSplitAlert:"顯示自動分裂警告",ShowSplitIndicator:"顯示分裂指標",ShowOrderRing:"顯示雙開環（類型1）",ShowOrderRing2:"顯示雙開環（類型2）",changehkTab:"交換tab熱鍵",hkMassBug:"質量bug",ShowCellRing:"顯示細胞邊框",ShowEatLimitMarker:"顯示碰撞體",ShowCellDirectionMarker:"顯示方向",TogglePlayerTransparentCells:"切換細胞透明度",SimpleVirus:"簡易刺球",VirusSplitHint:"顯示刺球累積次數",VirusRangeHint:"顯示刺球射程",ShowCoord:"顯示區域",GlowingBorder:"場地外框光暈",AniBorder:"AniBorder(reflected on reload)",SimplifiedMass:"簡化質量顯示",AutoHideText:"自動隱藏質量/名稱",GlowingCells:"發光細胞",GlowingNonPlayerCells:"發光細胞（非玩家）",ShowTripKey:"顯示TripKey",ShowMapTripKey:"顯示小地圖TripKey",ShowUnichatTripKey:"顯示UnichatTripKey",ShowMapName:"顯示小地圖名稱",ShowReplayBar:"顯示回放條",ShowChatBox:"顯示聊天室",ShowClientStatus:"顯示用戶端資訊",ShowServerStatus:"顯示伺服器資訊",ShowLeaderboard:"顯示計分表",ShowMap:"顯示小地圖",MapOpaque:"地圖不透明",ShowSpecAimCursor:"顯示觀戰目標滑鼠指向線",ShowCircularName:"環狀顯示名稱",ShowPlayerLog:"顯示玩家紀錄",MarkerThin:"標記變薄",MarkerExtend:"標記擴展",MarkerLight:"標記輕量化",MapCheat:"顯示全地圖",useMouseSignal:"useMouseSignal",useSpawnSignal:"useSpawnSignal",ExpendTab1Sight:"擴充tab1視野（類型1）",TopTab1Sight:"擴充tab1視野（類型2）",tab:"額外分身",hkTab:"切換控制",hkSplit:"分裂",hkFeedOne:"單次餵",hkFeed:"持續餵",hkChangeUnit:"切換分身",hkDoubleSplit:"雙拍",hkTripleSplit:"三拍",hkQuadSplit:"完全分裂",hkSuperQuadSplit:"Super Quad Split",hkInfernoSplit:"Inferno Split",hk4xLineSplit:"4x Line Split Mode",hkSuspend:"停止細胞",hkToggleSuspend:"停止細胞（切換）",hkSuspendBoth:"停止細胞1+2",hkToggleSuspendBoth:"停止細胞（切換）1+2",hkStartNewGame:"快速開始",hkToggelSpectateTarget:"觀戰",hkQuickReplayCapture:"快速錄製",hkToggleReplayRecording:"開始/停止錄製",hkPlaybackReplay:"回放",Debug_DisableSkinLoad:"不載入皮膚(偵錯)",UseFastInterpolation:"Fast Interpolation",hdrConfiguration:"主要配置",hdrCellDisplay:"細胞顯示",hdrGameDisplay:"遊戲顯示",hdrBasicOperation:"基本設置",hdrControl:"快捷鍵設置",lbtResetConfig:"重設設定",lbtOutputConfig:"匯出設定",lbtInputConfig:"匯入設定",lbtCameraZoomSpeed:"視角縮放速度",lbtCameraMovementSpeed:"視角移動速度",lbtInterpolationType:"動畫插值類型",lbtInterpolationResponce:"動畫速度",lbtMarkerOpacity:"標記透明度",lbtCursorLineThickness:"滑鼠指向線粗細",lbtMarkerThickness:"標記粗細",lbtPlayerCellsAlpha:"玩家透明度",lbtPelletCellsAlpha:"點點透明度",lbtAnotherSectionCellsAlpha:"其他分區透明度（caffe）",lbtRenderOffset:"RenderOffset",lbtmassBugLatency:"質量bug延遲",lbtRenderQuality:"渲染質量",lbtCaptureDuration:"錄製時間",lbtFrameRate:"幀率",hdrTheme:"主題",hdrColor:"色彩",hdrWallpaper:"背景圖片"},t.texts_en={clGameBackground:"Game background",clGameForeground:"Game Foreground",clFieldBorder:"Field border",clFieldCoords:"field coordinates",clLeaderboardBack:"LB background",clLeaderboardHeader:"LB header",clMapBackground:"Map background",clChatBackground:"Chat Background",clOverlayBack:"Overlay Background",clMainPanelBack:"Panel Background",clPanelForeground:"Panel Foreground",clPanelHeader:"Panel Header",clReplayBar:"Replay Bar",clMenuButtons:"Menu Buttons",clMainButtons:"Main Buttons",clUiSymbols:"Symbols",clUiButtonActive:"Button (active)",clCursorLine:"Cursor Line",clVirusOuterStroke:"Spine Frame",clVirusInnerFill:"thorns",clVirusRangeHint:"Thorn range hint",clChatSenderName:"Chat sender name",clChatTimeString:"Chat time",clChatMessage:"Chat message",clMarkerA:"mass marker location pan and eaten",clMarkerB:"mass marker eats when flying",clMarkerC:"mass marker eats when overlapped",clMarkerD:"Mass Marker Overlapping",clMarkerE:"Mass marker eats when overlapped",clMarkerF:"Mass marker superimposed on split",clMarkerG:"mass marker can be eaten by fission",clMarkerH:"Mass Marker can be eaten on location bread",clMarkerRing:"Current cell color",clMarkerRing2:"Current cell color 2",clPellet:"Pellet color",clGardient1:"clGardient1",clGardient2:"clGardient2",OperationWithMouseButton:"mouse operation",SwapMouseButtons:"Swap left and right button functions",AffectZoomingOnReplay:"Affect zooming during replay",Antialias:"Antialias",HDMode:"HD mode (reflected on reload)",HideMenuAfterDeath:"Hide menu after death",ShowName:"Name",ShowMass:"Mass",ShowSelfName:"Your name",ShowSelfSkin:"My skin",ShowSkin:"Skin",ShowPelletSkin:"Pellet Skin",ShowEnemySkin:"Enemy Skin",ShowEnemyHint:"Enemy Hint",ShowFood:"Pellets",ShowCursorLine:"Cursor Line",ShowMassMarker:"Mass Marker",ShowSplitPrediction:"Split order marker",ShowOrderRing:"ShowOrderRing(type1)",ShowOrderRing2:"ShowOrderRing(type2)",changehkTab:"changehkTab",hkMassBug:"Massbug",ShowCellRing:"ShowCellRing",ShowAutoSplitAlert:"AutoSplit Alert",ShowSplitIndicator:"Split indicator",ShowEatLimitMarker:"Predation detection",ShowCellDirectionMarker:"Moving Direction Marker",TogglePlayerTransparentCells:"Transparent cells",SimpleVirus:"Circular spine",VirusSplitHint:"Spike Split Hint",VirusRangeHint:"Spike range hint",ShowCoord:"Field coordinates",GlowingBorder:"Glowing field border",AniBorder:"AniBorder(reflected on reload)",SimplifiedMass:"Simplified mass display",AutoHideText:"Autohide name/mass",GlowingCells:"Glowing Cells",GlowingNonPlayerCells:"Glowing Thorns",ShowTripKey:"Show Trip Key",ShowMapTripKey:"Show Trip Key (Map)",ShowUnichatTripKey:"Show Trip Key (Chat)",ShowMapName:"Show name on map",ShowReplayBar:"Replay Bar",ShowChatBox:"Chat",ShowDetailedScore:"Detailed Score",ShowClientStatus:"Client Status",ShowServerStatus:"Server status",ShowLeaderboard:"Scoreboard",ShowMap:"Map",MapOpaque:"MapOpaque",ShowSpecAimCursor:"Show SpecAim Cursor",ShowCircularName:"Arrange Name Labels Circularly",ShowPlayerLog:"Player Log",MarkerThin:"Marker thinning",MarkerLight:"Marker lightening",MarkerExtend:"Marker extension",MapCheat:"Map extension",useMouseSignal:"useMouseSignal",useSpawnSignal:"useSpawnSignal",ExpendTab1Sight:"ExpendTab1Sight",TopTab1Sight:"TopTab1Sight",tab:"Additional Tab",hkTab:"Switch tab",hkMassBug:"massBug",hkSplit:"Split",hkFeedOne:"One feed",hkFeed:"Feed barrage",hkChangeUnit:"Unit change",hkDoubleSplit:"Double split",hkTripleSplit:"Triple split",hkQuadSplit:"Full split",hkSuperQuadSplit:"Super QuadSplit",hkInfernoSplit:"Inferno Split",hk4xLineSplit:"Linear full split mode",hkSuspend:"Suspend now",hkToggleSuspendBoth:"Suspend in place (toggle) 1+2",hkSuspendBoth:"Suspend in place 1+2",hkToggleSuspend:"Suspend in place (toggle)",hkStartNewGame:"Game start",hkToggelSpectateTarget:"spectator mode",hkQuickReplayCapture:"Quick Capture",hkToggleReplayRecording:"Record/Stop",hkPlaybackReplay:"Play replay",hdrConfiguration:"Settings",hdrCellDisplay:"Cell display",hdrGameDisplay:"Game display",hdrBasicOperation:"Basic operation",hdrControl:"Control",lbtResetConfig:"Reset configuration",lbtOutputConfig:"OutputConfig",lbtInputConfig:"InputConfig",lbtCameraZoomSpeed:"Camera zoom speed",lbtCameraMovementSpeed:"Camera movement speed",lbtInterpolationType:"Interpolation type",lbtInterpolationResponce:"Interpolation response speed",lbtMarkerOpacity:"Marker Alpha",lbtCursorLineThickness:"Cursor line thickness",lbtMarkerThickness:"MarkerThickness",lbtPlayerCellsAlpha:"Cell transparency",lbtPelletCellsAlpha:"Transparency of pellet cells",lbtAnotherSectionCellsAlpha:"Another Section Cell Transparency (Cafe)",lbtRenderOffset:"",lbtmassBugLatency:"massBugLatency",lbtRenderQuality:"Quality",lbtCaptureDuration:"capture duration",lbtFrameRate:"Frame rate",hdrTheme:"Theme",hdrColor:"color",hdrWallpaper:"wallpaper"},t}(),m=function(){switch(this.gconfig=new l,this.gstates=new c,this.uconfig=new u,this.ucolors=new p,this.usupport=new g,navigator.language.slice(0,2)){case"jp":this.utexts=f.texts_jp;break;case"zh":this.utexts=f.texts_zh;break;default:this.utexts=f.texts_en}};i.GlobalObject=m,i.gs=new m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.Confirm=function(t){},t}();e.Utils=i;var o=function(){function t(){}return t.RandF=function(){return Math.random()},t.RandFD=function(){return 2*Math.random()-1},t.RandI=function(e){return t.RandF()*e>>0},t.InRange=function(t,e,n){return e<=t&&t<=n},t.Clamp=function(t,e,n){return Math.max(e,Math.min(t,n))},t.VMap=function(t,e,n,i,o,r){void 0===r&&(r=!1);var s=(t-e)*(o-i)/(n-e)+i;if(r){var a=Math.min(i,o),l=Math.max(i,o);return this.Clamp(s,a,l)}return s},t.MapTo=function(t,e,n){return t*(n-e)+e},t.Lerp=function(t,e,n){return(1-n)*t+n*e},t.EasyFilter=function(t,e,n){return n*t+(1-n)*e},t.HiLimit=function(t,e){return Math.min(t,e)},t.LoLimit=function(t,e){return Math.max(t,e)},t}();e.Nums=o;var r=function(){function t(){}return t.Remove=function(t,e){var n=t.indexOf(e);return n>=0&&(t.splice(n,1),!0)},t.Count=function(t,e){for(var n=0,i=0,o=t;i<o.length;i++)e(o[i])&&n++;return n},t.Exclude=function(t,e){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i];-1==e.indexOf(r)&&n.push(r)}return n},t.First=function(t,e){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(e(o))return o}return null},t}();e.Arrays=r;var s=function(){function t(){}return t.CopyObjectProps=function(t,e){for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n])},t}();e.Objects=s;var a=function(){function t(){}return t.FormatDate=function(t,e){function n(t){return("0"+t).slice(-2)}e||(e=new Date);var i={YYYY:e.getFullYear(),YY:n(e.getFullYear()),MM:n(e.getMonth()+1),DD:n(e.getDate()),hh:n(e.getHours()),mm:n(e.getMinutes()),ss:n(e.getSeconds())},o=t;for(var r in i)o=o.replace(r,i[r]);return o},t.GetCurrentTimeStamp=function(){return t.FormatDate("YY/MM/DD hh:mm:ss")},t.GetTodayString=function(){return t.FormatDate("YYMMDD")},t.GetHourMinutesString=function(){return t.FormatDate("hh:mm")},t.GetSystemTimeSec=function(){return Date.now()/1e3},t}();e.DateTimeHelper=a;var l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"Norm",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Angle",{get:function(){return Math.atan2(this.y,this.x)},enumerable:!0,configurable:!0}),t.prototype.Normalize=function(){var t=this.Norm;return t>=11754943e-45&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.Scale=function(t){return this.x*=t,this.y*=t,this},t.prototype.Add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.Set=function(t,e){return this.x=t,this.y=e,this},t.prototype.CopyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.Subtract=function(e,n){return new t(e.x-n.x,e.y-n.y)},t.prototype.ClampXY=function(t,e,n,i){return this.x=o.Clamp(this.x,t,n),this.y=o.Clamp(this.y,e,i),this},t.IsEqual=function(t,e){return t.x==e.x&&t.y==e.y},t.GetDist=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},t.GetAngle=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.atan2(i,n)},t.FromPolar=function(e,n){return new t(Math.cos(e)*n,Math.sin(e)*n)},t.prototype.AddPolar=function(t,e){this.x+=Math.cos(t)*e,this.y+=Math.sin(t)*e},t.prototype.MakeCopy=function(){return new t(this.x,this.y)},t.DotProduct=function(t,e){return t.x*e.x+t.y*e.y},t.CrossProduct=function(t,e){return t.x*e.y-t.y*e.x},t}();e.Vector=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=function(){function t(){this.MaxProfileNum=32,this.useUniChat=!1,this.gameServerAddress=null,this.showDualSkinInputUi=!1,this.showPartyCodeInputUi=!0,this.defaultFieldBackImageUri="",this.defaultPanelBackImageUri="",this.siteTitleString="",this.leaderboardHeaderText="Leaderboard",this.showTeamRanking=!1,this.useIxTrackerServer=!1,this.trackerServerUri=null,this.trackerServerTargetSite=null,this.showAllServers=!1,this.insertionContent=null,this.allowOnlyForJapaneseLangUser=!1,this.Setup()}return t.prototype.SetupUnichat=function(t,e,n,i){this.useUniChat=!0,this.uniChatServerAddress=t,this.uniChatSiteSignature=e,this.uniChatServerSignature=n,this.useTeamSeparatedChat=i},t.prototype.Setup=function(){this.isJapanese=navigator.language.startsWith("ja");var t="ws://chat2.ixagar.net:4590",e=gTargetSite;"sao"==e?(this.gameServerAddress="ws://sv-sao.senpai-agar.online:2525",this.SetupUnichat(t,"ix","EA-SAO1",!0),this.siteTitleString="SENPAI-AGAR.ONLINE",this.leaderboardHeaderText="S.A.O.",this.showTeamRanking=!0):"blank"==e?(this.gameServerAddress="ws://133.130.111.204:2527",this.SetupUnichat(t,"ix","EA-SAO-BC",!0),this.showPartyCodeInputUi=!0,this.leaderboardHeaderText="Leaderboard",this.showTeamRanking=!0):"caffe"==e?(this.gameServerAddress="ws://sv-caffe.senpai-agar.online:2520",this.SetupUnichat(t,"_caffe","caffe",!1),this.showTeamRanking=!0,this.leaderboardHeaderText="Caffe"):"caffe2"==e?(this.gameServerAddress="ws://sv-caffe2.senpai-agar.online:2521",this.SetupUnichat(t,"_caffe2","caffe2",!1),this.showTeamRanking=!0,this.leaderboardHeaderText="caffe2",this.allowOnlyForJapaneseLangUser=!0):"kouhaku"==e?(this.gameServerAddress="ws://sv-caffe2.senpai-agar.online:2521",this.showTeamRanking=!0,this.leaderboardHeaderText="紅白戦",this.allowOnlyForJapaneseLangUser=!0):"dad"==e?(this.gameServerAddress="ws://133.18.168.210:2521",this.SetupUnichat(t,"_dad","dad",!0),this.showTeamRanking=!0,this.leaderboardHeaderText="dad",this.showPartyCodeInputUi=!0):"ix"==e?(this.SetupUnichat(t,"ix","default",!0),this.showPartyCodeInputUi=!0,this.defaultFieldBackImageUri="http://ixagar.net/gr/ixagar_bg.png",this.defaultPanelBackImageUri="http://ixagar.net/gr/ixagar_fg.png",this.siteTitleString="IXAGAR.NET",this.leaderboardHeaderText="IX AGAR",this.showTeamRanking=!0,this.useIxTrackerServer=!0,this.trackerServerUri="http://hub.ixagar.net:4701",this.trackerServerTargetSite="ixagar"):"dual"==e?(this.showDualSkinInputUi=!0,this.useIxTrackerServer=!0,this.trackerServerUri="http://hub1.dual-agar.online:4703",this.trackerServerTargetSite="dual-agar",this.SetupUnichat(t,"_dual","_dual",!0)):"caffe_beta"==e||"dev"==e&&(this.gameServerAddress="ws://153.127.253.45:2520",this.SetupUnichat(t,"_dev","dev",!1)),this.targetSite=e;var n=i.AppHelper.GetQueryObject();if(n.target){var o=n.target;o.startsWith("localhost")&&(this.gameServerAddress="ws://"+o,this.useIxTrackerServer=!1)}n.showAll&&(this.showAllServers=!0)},t.instance=new t,t}();e.AppConfigurator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(){}return t.GenerateRandomUserEnvSig=function(e){for(var n="",i=t.CodeChars,o=0;o<e;o++)n+=i[Math.floor(Math.random()*i.length)];return n},t.GetUserEnironmentSignature=function(){var e=localStorage.getItem("UniChatUserSignature");return e||(e=t.GenerateRandomUserEnvSig(6),localStorage.setItem("UniChatUserSignature",e)),e},t.EmbedHyperlink=function(t){return t.replace(/(http:\/\/[\x21-\x7e]+)/gi,'<a href=$1 target="_blank">$1</a>')},t.GetQueryObject=function(){var t={};return location.search.replace("?","").split("&").forEach((function(e){var n=e.split("=");if(2==n.length){var i=n[0],o=n[1];t[i]=o}})),t},t.CodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t}();e.AppHelper=o;var r=function(){function t(){}return t.LoadObjectProps=function(t,e){try{var n=JSON.parse(e);for(var o in n)if(t.hasOwnProperty(o)){var r=t[o],s=n[o];r instanceof Object?i.Objects.CopyObjectProps(r,s):t[o]=s}}catch(t){}},t}();e.StorageHelper=r;var s=function(){function t(){}return t.ColorFromConfigColorString=function(t){if("#"!=t[0])return 0;var e=255,n=0,i=0,o=0;return 8==(t=t.slice(1,t.length)).length?(e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),o=parseInt(t.slice(6,8),16)):6==t.length?(n=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16)):4==t.length?(e=17*parseInt(t[0],16),n=17*parseInt(t[1],16),i=17*parseInt(t[2],16),o=17*parseInt(t[3],16)):3==t.length&&(n=17*parseInt(t[0],16),i=17*parseInt(t[1],16),o=17*parseInt(t[2],16)),isNaN(e)||isNaN(n)||isNaN(i)||isNaN(o)?0:e<<24|n<<16|i<<8|o},t.ColorToCssColorString=function(t){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+(t>>24&255)/255+")"},t.GetAlpha=function(t){return(t>>24&255)/255},t.FormatColorByte=function(t){var e=t.toString(16).toUpperCase();return 1==e.length&&(e="0"+e),e},t.invertColor=function(t){if(0===t.indexOf("#")&&(t=t.slice(1)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),6!==t.length)throw new Error("Invalid HEX color.");var e=(255-parseInt(t.slice(0,2),16)).toString(16),n=(255-parseInt(t.slice(2,4),16)).toString(16),i=(255-parseInt(t.slice(4,6),16)).toString(16);return"#"+this.padZero(e)+this.padZero(n)+this.padZero(i)},t.padZero=function(t,e){return e=e||2,(new Array(e).join("0")+t).slice(-e)},t.ColorToHtmlString=function(t){var e=t>>16&255,n=t>>8&255,i=255&t;return"#"+this.FormatColorByte(e)+this.FormatColorByte(n)+this.FormatColorByte(i)},t.ColorFromHtmlString=function(t){if(7!=t.length||"#"!=t[0])return 8947848;var e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return isNaN(e)||isNaN(n)||isNaN(i)?8947848:e<<16|n<<8|i},t.ColorFromHtmlStringInput=function(t,e){if(7!=t.length||"#"!=t[0])return-1;var n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return isNaN(n)||isNaN(i)||isNaN(o)?-1:e<<24||n<<16|i<<8|o},t.GetHSV=function(t){var e=(t>>16&255)/255,n=(t>>8&255)/255,i=(255&t)/255,o=Math.max(e,n,i),r=Math.min(e,n,i),s=0;if(o!=r){var a=o-r;(s=(e==o?(n-i)/a:n==o?2+(i-e)/a:4+(e-n)/a)/6)<0&&(s+=1)}return[s,(o-r)/o,o]},t.ColorFromHSVA=function(t,e,n,i){var o=(1-e)*n,r=n-o,s=6*t,a=0,l=0,c=0;return s<1?(a=n,l=s*r+o,c=o):s<2?(a=(2-s)*r+o,l=n,c=o):s<3?(a=o,l=n,c=(s-2)*r+o):s<4?(a=o,l=(4-s)*r+o,c=n):s<5?(a=(s-4)*r+o,l=o,c=n):(a=n,l=o,c=(6-s)*r+o),255*i>>0<<24|255*a>>0<<16|255*l>>0<<8|255*c>>0},t.ReplaceAlpha=function(t){var e=this.GetHSV(t);return this.ColorFromHSVA(e[0],e[1],e[2],0)},t}();e.ColorHelper=s;var a=function(){function t(){}return t.RadiusToMass=function(t){return t*t/100},t.MassToRadius=function(t){return Math.sqrt(100*t)},t.GenarateRandomColor=function(){var t=[255,i.Nums.RandI(100),i.Nums.RandI(256)].sort((function(){return i.Nums.RandFD()}));return t[0]<<16|t[1]<<8|t[2]},t.CheckIsInEatableSection=function(t,e){return t==e||"**"==t||"**"==e},t.DecodePlayerId=function(t){return[65534&t,1&t]},t.GetDist=function(t,e,n,i){var o=n-t,r=i-e;return Math.sqrt(o*o+r*r)},t.VectorDotProduct=function(t,e,n,i){return t*n+e*i},t.VectorCrossProduct=function(t,e,n,i){return t*i-e*n},t.GetLinePointDist=function(t,e,n,o,r,s){var a=new i.Vector(n-t,o-e),l=new i.Vector(r-t,s-e);if(i.Vector.DotProduct(a,l)<0)return l.Norm;var c=new i.Vector(t-n,e-o),d=new i.Vector(r-n,s-o);return i.Vector.DotProduct(c,d)<0?d.Norm:Math.abs(i.Vector.CrossProduct(a,l))/a.Norm},t.HitTestAABB=function(t,e,n,i,o){var r=n-t,s=i-i;return-o<=r&&r<=o&&-o<=s&&s<=o},t.TrimNameAndTeamName=function(t,e){if(t.length>15)t=t.substring(0,15),e="";else{var n=15-t.length;e.length>n&&(e=e.substring(0,n))}return[t,e]},t}();e.GameHelper=a;var l=function(){function t(){}return t.Start=function(e){t.sig=e,t.t0=performance.now()},t.Stop=function(){if(performance.now()-t.t0>50){var e=t.sig;console.log("long execution : "+e)}},t}();e.TimeChecker=l;var c=function(){function t(t,e){this.capacity=t,this.pool=new Array(t);for(var n=0;n<t;n++)this.pool[n]=e();this.genProc=e}return t.prototype.Gain=function(){return this.pool.length<=0?this.genProc():this.pool.pop()},t.prototype.Release=function(t){this.pool.push(t)},t.prototype.Maintain=function(){if(this.pool.length<=this.capacity/4)for(var t=0;t<8;t++)this.pool.push(this.genProc());else this.pool.length>=this.capacity&&this.pool.pop()},t}();e.ObjectPool=c;var d=function(){function t(){this.activeKeepTimeSec=180,this.deactivedTick=0,this.t0=0}return Object.defineProperty(t.prototype,"IsHidden",{get:function(){return document.hidden},enumerable:!0,configurable:!0}),t.prototype.Update=function(){var t=performance.now(),e=t-this.t0;this.t0=t,document.hasFocus()?this.deactivedTick=0:this.deactivedTick+=.001*e},Object.defineProperty(t.prototype,"IsActive",{get:function(){return this.deactivedTick<this.activeKeepTimeSec},enumerable:!0,configurable:!0}),t.Instance=new t,t}();e.PageHelper=d},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=n(38),a=n(37),l=n(13),c=n(36),d=n(35),h=n(34),p=n(0),u=n(2),g=n(33),f=n(3),m=n(13),y=n(31),v=n(30),b=n(4),S=n(29),x=(n(18),function(){this.avgDuration=0,this.avgRate=0,this.avgFps=0,this.numCellsRendered=0,this.replayBufferBytes=0,this.debugObj={}});e.GamePerformanceStateModel=x;var k=function(){function t(){var t=this;this.tick=0,this.seqUseInfoStrSent=null,this.perfModel=new x,this.serverUriCash=null,this.userEntryMan=new d.UserEntryManager,this.userEntryMan.Load(),this.uMan=new s.UserInfoManager,this.dataRecorder=new a.DataRecorder,this.nodeMan=new l.NodeManager(this),this.conn=new c.ConnectionBridge,this.sight=new h.SightCoord(this),this.benchDataFeeder=new y.PerfBenchDataFeeder(this),this.conn.packetHandlerProc=this.dataRecorder.PostPacketFromServer.bind(this.dataRecorder),this.conn.connectionOpenProc=function(e){t.conn.SendSessionInitialize(f.AppHelper.GenerateRandomUserEnvSig(6),e),t.SendSelfEntryInfoIfChanged(e),t.conn.SendRequestStartSpectate(e)},this.conn.connectionClosedProc=function(t,e){console.log("connection closed "+t),t=t.indexOf("serverMaxConnections (")>=0?"Server is full house. Please access after a while.</br>満員です。しばらく時間をおいてからアクセスしてください。":""};var e=u.AppConfigurator.instance;e.useUniChat&&(this.chatAppModel=new g.ChatAppModel,this.chatAppModel.SetUserEnvSig(f.AppHelper.GenerateRandomUserEnvSig(6)),this.chatAppModel.SetChatServerUri(e.uniChatServerAddress),this.chatAppModel.SetGameTeamChatSessionEnabled(e.useTeamSeparatedChat),this.chatAppModel.SetSiteSignature(e.uniChatSiteSignature),this.chatAppModel.SetServerSignature(e.uniChatServerSignature,!1),this.chatAppModel.gameChatMessageReceiverProc=this.nodeMan.PostExternalChatMessage.bind(this.nodeMan),window.chatAppModel=this.chatAppModel),e.useIxTrackerServer&&(this.serverListModel=new v.ServerListModel(this)),this.gameHudModel=new S.GameHudModel}return t.prototype.ShowDebugValue=function(t,e){this.perfModel.debugObj[t]=e},Object.defineProperty(t.prototype,"ReplayControllerModel",{get:function(){return this.dataRecorder},enumerable:!0,configurable:!0}),t.prototype.sendWaves=function(t,e,n,i,o,r){var s={x:t,y:e};s.time=Date.now(),s.color=n,s.wavelength=i,s.sender=o,s.moreAnimation=r,gVar.Waves.push(s)},t.prototype.SendSplitAction=function(t){p.gs.gstates.isSpectate||(this.gameHudModel.specTargetName=null,this.sight.splitting=!0,this.conn.SendPlayerAction(0,t))},t.prototype.StartPlay=function(){p.gs.gstates.isBenchmarkMode||(this.SendSelfEntryInfoIfChanged(),!gVar.conn1.isAlive&&(this.conn.SendSpecifySpecTarget(-1),this.conn.SendRequestStartPlay()),p.gs.uconfig.tab&&gVar.conn1.isAlive&&!gVar.conn2.isAlive&&(this.conn.SendSpecifySpecTarget(-1,2),this.conn.SendRequestStartPlay(2)),p.gs.gstates.isPlaying=!0,p.gs.gstates.isDeadSpectation=!1,this.gameHudModel.ResetMaxScore(),this.userEntryMan.SaveIfChanged(),p.gs.gstates.setMainPanelVisible(!1))},t.prototype.StartSpectate=function(){p.gs.gstates.isBenchmarkMode||(p.gs.gstates.isPlaying||(this.SendSelfEntryInfoIfChanged(),this.userEntryMan.SaveIfChanged(),p.gs.gstates.isDeadSpectation=!1),p.gs.gstates.setMainPanelVisible(!1)),!gVar.conn1.isAlive&&this.conn.SendRequestStartSpectate(),p.gs.uconfig.tab&&!gVar.conn2.isAlive&&this.conn.SendRequestStartSpectate(2),p.gs.uconfig.tab?!gVar.conn2.isAlive&&!gVar.conn1.isAlive&&(p.gs.gstates.isPlaying=!1,p.gs.gstates.isDeadSpectation=!1):!gVar.conn2.isAlive&&(p.gs.gstates.isPlaying=!1,p.gs.gstates.isDeadSpectation=!1)},t.prototype.ToggleBenchMarkMode=function(){p.gs.gstates.isBenchmarkMode?(p.gs.gstates.isBenchmarkMode=!1,this.benchDataFeeder.Stop(),p.gs.gstates.setMainPanelVisible(!0),this.ConnectToGameServer()):(p.gs.gstates.isBenchmarkMode=!0,this.CloseConnection(),this.nodeMan.OnEnterBenchMarkMode(),p.gs.gconfig.FieldSize,this.benchDataFeeder.Start(),p.gs.gstates.setMainPanelVisible(!1))},t.prototype.KeyboardInputHandler=function(t,e){if("INPUT"==document.activeElement.tagName)return!1;if(e&&27==t.keyCode&&(p.gs.gstates.setMainPanelVisible(!p.gs.gstates.isMainPanelVisible),gVar.SettingsMenu=!1,gVar.SkinsMenu=!1),!e&&9==t.KeyCode)return!0;if(this.sight.initDone&&!p.gs.gstates.isBenchmarkMode){var n=t.keyCode;t.ctrlKey&&(n+=p.ModificationKeyCode.Ctrl),t.shiftKey&&(n+=p.ModificationKeyCode.Shift),t.altKey&&(n+=p.ModificationKeyCode.Alt);var r=p.gs.uconfig.controlHotKeys;const d=()=>{const t=this.sight,e=(t.mouseX-t.scw/2)/t.eyeScale+t.eyeX,n=(t.mouseY-t.sch/2)/t.eyeScale+t.eyeY;this.conn.SendAimCursor(e,n),t.aimXSent=e,t.aimYSent=n};if(p.gs.gstates.isRealtimeMode){if(n==r.hkSuspendBoth)return o=0,this.conn.SendPlayerAction(5,e?0:1,1),this.conn.SendPlayerAction(5,e?0:1,2),!0;if(n==r.hkSuspend)return o=0,this.conn.SendPlayerAction(5,e?0:1),!0;if(n==r.hk4xLineSplit){let t=this.nodeMan.operationUnitIndex;const n=this.nodeMan.selfNodeIds[t];if(1!=n.length)return void(o=0);const r=this.sight,s=n[0],a=this.nodeMan.nodes.get(s),l=a.nx,c=a.ny;return l==r.aimXSent&&c==r.aimYSent||(this.conn.SendAimCursor(l,c),r.aimXSent=l>>0,r.aimYSent=c>>0),o=e,e?i=setInterval(()=>{1==n.length?a.nx==r.aimXSent&&a.ny==r.aimYSent&&(setTimeout(()=>{1==n.length&&(this.gameHudModel.specTargetName="4x Line Split is available",this.gameHudModel.SetSpecTargetScore(0))},1e3),clearInterval(i)):clearInterval(i)},35):(this.gameHudModel.specTargetName=null,clearInterval(i)),!0}if(e&&n==r.hkToggleSuspend&&(this.isSuspend=!this.isSuspend,this.conn.SendPlayerAction(5,this.isSuspend?0:1)),n==r.hkFeed)return o&&(o=0),this.conn.SendPlayerAction(4,e?1:0),!0;if(e&&n==r.hkToggleSuspendBoth)return this.isSuspend=!this.isSuspend,this.conn.SendPlayerAction(5,this.isSuspend?0:1,1),this.conn.SendPlayerAction(5,this.isSuspend?0:1,2),!0;if(n==r.hkDoubleSplit)return o=0,d(),o=e?1:0,e&&this.SendSplitAction(2),setTimeout(()=>o=0,600),!0;if(n==r.hkTripleSplit){d();const t=o;return o=e?1:0,this.conn.SendPlayerAction(5,e?0:1),e&&!t&&this.SendSplitAction(3),!0}if(n==r.hkSuperQuadSplit){d();const t=o;return o=e?1:0,this.conn.SendPlayerAction(5,e?0:1),e&&!t&&this.SendSplitAction(4),!0}}var s=!1,a=p.gs.uconfig;for(var l in a.holdHotKeys)if(n==a.holdHotKeys[l]){var c=a[l];a.SetValue(l,!c),s=!0}if(e){if(n==r.hkStartNewGame){if(p.gs.gstates.isBenchmarkMode)return!1;if(!p.gs.gstates.isPlaying)return this.StartPlay(),!0}if(n==r.hkToggelSpectateTarget)return this.conn.SendSpecifySpecTarget(0),this.conn.SendSpecifySpecTarget(0,2);if(n==r.hkQuickReplayCapture)return this.dataRecorder.DoInstantCapture(),!0;if(n==r.hkToggleReplayRecording)return this.dataRecorder.ToggleRecording(),!0;if(n==r.hkPlaybackReplay)return this.dataRecorder.isReplayMode?this.dataRecorder.EndReplayMode():this.dataRecorder.TogglePlayback(),!0;if(p.gs.gstates.isRealtimeModePlaying){if(n==r.hkMassBug){const t=this.sight,e=t.eyeX,n=t.eyeY;return this.SendSplitAction(1),setTimeout(()=>this.conn.SendPlayerAction(3,-1),b.gameCore.gameHudModel.latencyMs*p.gs.uconfig.massBugLatency),setTimeout(()=>this.SendSplitAction(4),b.gameCore.gameHudModel.latencyMs*p.gs.uconfig.massBugLatency),this.conn.SendAimCursor(e,n),setTimeout(()=>this.conn.SendPlayerAction(3,-1),200),o=0,!0}if(n==r.hkSplit)return o=0,d(),this.SendSplitAction(1),!0;if(n==r.hkChangeUnit)return i&&clearInterval(i),this.conn.SendPlayerAction(3,-1),d(),o=0,!0;if(n==r.hkFeedOne)return this.conn.SendPlayerAction(1,-1),o=0,!0;if(n==r.hkQuadSplit)return this.SendSplitAction(4),!0;if(n==r.hkInfernoSplit)return this.SendSplitAction(2),this.conn.SendPlayerAction(3,-1),d(),o=0,this.SendSplitAction(4),!0}if(n==r.hkTab)return this.conn.SendPlayerAction(4,0),gVar.controlConn2=!gVar.controlConn2,!gVar.conn2.isAlive&&this.conn.SendRequestStartPlay(2)&&(p.gs.gstates.isPlaying=!0,p.gs.gstates.isDeadSpectation=!1,console.log("Toggling connection 2 control: "+gVar.controlConn2),setTimeout(gVar.controlConn2=!0,500)),!gVar.conn1.isAlive&&(console.log("SendRequestStartPlay 1"),this.conn.SendRequestStartPlay(),p.gs.gstates.isPlaying=!0,p.gs.gstates.isDeadSpectation=!1,setTimeout(gVar.controlConn2=!1,500)),d(),!0;for(var l in a.toggleHotKeys)n==a.toggleHotKeys[l]&&(c=a[l],a.SetValue(l,!c),s=!0)}return!!s&&(this.gameHudModel.configUpdatedProc(),!0)}},t.prototype.MouseInputHandler=function(t,e){if(!p.gs.gstates.isBenchmarkMode){var n=p.gs.uconfig,i=0,o=2;if(e){if(t==o){var r=this.sight.ScreenToWorld(this.sight.mouseX,this.sight.mouseY),s=r[0],a=r[1],l=this.nodeMan.GetPlayerIdUnderCursor(s,a);this.conn.SendSpecifySpecTarget(l),this.conn.SendSpecifySpecTarget(l,2)}if(t==i){this.conn.SendSpecifySpecTarget(-1),this.isSuspend&&(this.isSuspend=!1,this.conn.SendPlayerAction(5,this.isSuspend?0:1));var c=this.sight.ScreenToWorld(this.sight.mouseX,this.sight.mouseY),d=c[0],h=c[1];if(p.gs.uconfig.useMouseSignal){this.sendWaves(d,h,"FFFFFF",500,"test",!0);let t=this.chatAppModel.curSession.sessionId,e="wave,"+parseInt(d).toString()+","+parseInt(h).toString();"sao"==gTargetSite&&this.chatAppModel.bridge.SendChatMessage(t,e)}}t==i&&p.gs.gstates.isBenchmarkMode,p.gs.gstates.isReplayMode&&(t==i&&this.dataRecorder.TogglePlayback(),t==o&&(this.dataRecorder.EndReplayMode(),this.dataRecorder.Notify()))}n.OperationWithMouseButton&&(n.SwapMouseButtons&&(i=2,o=0),p.gs.gstates.isRealtimeModePlaying&&(t==i&&e?this.SendSplitAction(1):t==o?this.conn.SendPlayerAction(4,e?1:0):1==t&&e&&this.SendSplitAction(4)))}},t.prototype.SelfUnitsDeadProc=function(t){gVar.controlConn2=!t;var e=this;o=0,this.gameHudModel.specTargetName=null,p.gs.gstates.isPlaying&&!this.dataRecorder.isLoading&&(p.gs.gstates.isDeadSpectation=!0,this.gameHudModel.ResetMaxScore(),p.gs.gstates.playerDeadCallbackProc(),p.gs.gstates.playerDeadTimeStamp=Date.now(),setTimeout((function(){return e.conn.SendRequestStartSpectate(t)}),100))},t.prototype.SendSelfEntryInfoIfChanged=function(t){var e=this.userEntryMan.curInfo,n=e.MakeSequenceString();if(this.seqUseInfoStrSent!=n){var i=e.code;p.gs.gconfig.IsolateBlankTagPlayers&&""==e.team&&(i=f.AppHelper.GetUserEnironmentSignature());var o=f.GameHelper.TrimNameAndTeamName(e.team,e.name),s=o[0],a=o[1],l=f.GameHelper.TrimNameAndTeamName(e.tabTeam,e.tabName),c=l[0],d=l[1];r.Utils.Confirm(s.length+a.length<=15),this.conn.SendUserEntryInfo(a,s,i,e.skinUrl,e.skinUrl2,1),p.gs.uconfig.tab&&this.conn.SendUserEntryInfo(d,c,e.tabCode,e.tabSkinUrl,e.tabSkinUrl2,2),this.chatAppModel&&this.chatAppModel.SetUserEntryInfo(a,s,i,e.skinUrl,e.profileIndex),this.seqUseInfoStrSent=n}},t.prototype.SendChatMessage=function(t){if(this.chatAppModel)this.chatAppModel.SendMessageOnGameChatSession(t);else{var e=this.uMan.selfUserId;this.conn.SendChatMessage(t,e)}},t.prototype.StatesUpdationProc=function(){setTimeout(this.StatesUpdationProc.bind(this),1e3),f.TimeChecker.Start("StatusUpdationProc"),this.nodeMan.RecordLatencyCheckStartTime(),this.conn.SendLatencyCheckRequest(),this.conn.SendLatencyCheckRequest(2),this.nodeMan.UpdateSelfScore(),this.perfModel.replayBufferBytes=this.dataRecorder.totalBytes,this.dataRecorder.DiscardUnnecessaryPackets(),this.perfModel.debugObj,m.TNodeData.Pool.capacity,m.TNodeData.Pool.pool.length,f.TimeChecker.Stop()},t.prototype.Initialize=function(){var t=this;this.dataRecorder.Initialize(this.nodeMan);var e=document.querySelector("#game_control_overlay");window.addEventListener("keydown",(function(e){e.repeat||t.KeyboardInputHandler(e,!0)&&e.preventDefault()})),window.addEventListener("keyup",(function(e){t.KeyboardInputHandler(e,!1)&&e.preventDefault()})),window.onmousedown=function(e){p.gs.gstates.isMainPanelVisible||t.MouseInputHandler(e.button,!0)},window.onmouseup=function(e){p.gs.gstates.isMainPanelVisible||t.MouseInputHandler(e.button,!1)},window.oncontextmenu=function(t){return t.preventDefault(),!1},window.onmousemove=function(e){t.sight.mouseX=e.clientX,t.sight.mouseY=e.clientY};var n=function(e){var n=e.wheelDelta/120*p.gs.uconfig.CameraZoomSpeed/100;p.gs.gstates.isBenchmarkMode||t.sight.ShiftScale(n)};navigator.userAgent.indexOf("Firefox")>=0?e.addEventListener("DOMMouseScroll",n,!1):e.onmousewheel=n,this.nodeMan.selfUnitsDeadCallback=this.SelfUnitsDeadProc.bind(this),this.StatesUpdationProc()},t.prototype.Reset=function(){this.seqUseInfoStrSent=null,this.isSuspend=!1},t.prototype.ConnectToGameServer=function(t){void 0===t&&(t=null),t||(t=this.serverUriCash||u.AppConfigurator.instance.gameServerAddress);var e=t.split("//")[1].split(":"),n=e[0],i=parseInt(e[1]);window.GameServerHost=n,window.GameServerPort=i,this.sight.initDone=!1,this.isSuspend=!1,this.gameHudModel.ClearChatMessages(),this.nodeMan.ResetToInitialiState(),this.dataRecorder.Reset(),this.uMan.Reset(),this.Reset(),this.conn.ConnectToGameServer(t),p.gs.uconfig.tab&&this.conn.ConnectToGameServer(t,2),this.serverUriCash=t},t.prototype.ConnectToGameServerEx=function(t,e){p.gs.gstates.chatRoomSig=e,this.ConnectToGameServer(t)},t.prototype.CloseConnection=function(){this.sight.initDone=!1,this.conn.CloseConnection()},t}();e.GameCore=k,console.log("gamecore 170127h"),e.gameCore=new k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){riot.observable(this)}return t.prototype.on=function(t,e){},t.prototype.one=function(t,e){},t.prototype.off=function(t){},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},t}();e.Observable=i;var o=function(){function t(){}return t.prototype.update=function(t){},t.prototype.unmount=function(t){},t.prototype.on=function(t,e){},t.prototype.one=function(t,e){},t.prototype.off=function(t){},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},t.prototype.mixin=function(t,e){},t.createElement=function(t){var e=this.prototype.tagName,n=document.createElement(e);return riot.mount(n,e,t),n},t}();function r(t){var n;if(void 0===t.prototype.template)throw"template property not specified";var i,o=t.prototype.template;o.indexOf("<")<0?void 0!==e.precompiledTags[o]?n=e.precompiledTags[o]:(o=function(t){var e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200==e.status)return e.responseText;throw e.responseText}(o),n=riot.compile(o,!0,{entities:!0})[0]):n=riot.compile(o,!0,{entities:!0})[0],t.prototype.tagName=(i=n,riot.tag2(i.tagName,i.html,i.css,i.attribs,(function(e){!function(t,e){var n=Object.keys(e.prototype).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e.prototype,n),t}),{});Object.defineProperties(t,n)}(this,t),t.apply(this,[e]),void 0!==t.prototype.mounted&&this.on("mount",this.mounted),void 0!==t.prototype.unmounted&&this.on("unmount",this.unmounted),void 0!==t.prototype.updating&&this.on("update",this.updating),void 0!==t.prototype.updated&&this.on("updated",this.updated)}),riot.settings.brackets),i.tagName)}e.Element=o,e.precompiledTags={},e.registerClass=r,e.template=function(t){return function(e){e.prototype.template=t,r(e)}}},function(t,e){t.exports=PIXI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),o=function(){function t(){}return t.SessionInitialize=function(t){var e=new i.DataFrameWriter;return e.WriteUint8(252),e.WriteStringEx("lwga-110"),e.WriteStringEx(t),e.ArrayBuffer},t.AimCursor=function(t,e){var n=new i.DataFrameWriter;return n.WriteUint8(16),n.WriteInt32(t>>0),n.WriteInt32(e>>0),n.ArrayBuffer},t.UserEntryInfo=function(t,e,n,o,r){var s=new i.DataFrameWriter;return s.WriteUint8(30),s.WriteStringEx(t),s.WriteStringEx(e),s.WriteStringEx(o),s.WriteStringEx(n),s.WriteStringEx(r),s.ArrayBuffer},t.RequestStartPlay=function(){var t=new i.DataFrameWriter;return t.WriteUint8(31),t.ArrayBuffer},t.RequestStartSpectate=function(){var t=new i.DataFrameWriter;return t.WriteUint8(1),t.ArrayBuffer},t.PlayerAction=function(t,e){var n=new i.DataFrameWriter;return n.WriteUint8(25),n.WriteUint8(t),n.WriteUint8(e),n.ArrayBuffer},t.ChatMessage=function(t,e){var n=new i.DataFrameWriter;return n.WriteUint8(128),n.WriteUint16(e),n.WriteStringEx(""),n.WriteStringEx(t),n.ArrayBuffer},t.LatencyCheckRequest=function(){var t=new i.DataFrameWriter;return t.WriteUint8(130),t.ArrayBuffer},t.SpecifySpecTarget=function(t){var e=new i.DataFrameWriter;return e.WriteUint8(27),e.WriteInt32(t),e.ArrayBuffer},t}();e.Packets=o;var r=function(){function t(){}return t.NodeRemoval=function(t){var e=new i.DataFrameWriter;return e.WriteUint8(161),e.WriteUint32(t),e.ArrayBuffer},t.UserEntryInfo=function(t,e,n,o,r,s){var a=new i.DataFrameWriter;return a.WriteUint8(162),a.WriteUint16(t),a.WriteStringEx(e),a.WriteStringEx(n),a.WriteUint16(o),a.WriteStringEx(r),a.WriteStringEx(s),a.ArrayBuffer},t.PlayerColor=function(t,e){var n=new i.DataFrameWriter;return n.WriteUint8(163),n.WriteUint16(t),n.WriteUint32(e),n.ArrayBuffer},t.TeamColor=function(t,e){var n=new i.DataFrameWriter;return n.WriteUint8(164),n.WriteUint16(t),n.WriteUint32(e),n.ArrayBuffer},t.MoveSightToward=function(t,e,n){var o=new i.DataFrameWriter;return o.WriteUint8(165),o.WriteInt32(t>>0),o.WriteInt32(e>>0),o.WriteFloat32(n),o.ArrayBuffer},t.SightState=function(t,e,n,o,r,s,a){var l=new i.DataFrameWriter;return l.WriteUint8(166),l.WriteInt32(t>>0),l.WriteInt32(e>>0),l.WriteFloat32(n),l.WriteInt32(o>>0),l.WriteInt32(r>>0),l.WriteUint8(s?1:0),l.WriteUint16(a),l.ArrayBuffer},t}();e.InternalPackets=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.bytes=new Uint8Array(t),this.pos=0}return Object.defineProperty(t.prototype,"Length",{get:function(){return this.bytes.length},enumerable:!0,configurable:!0}),t.prototype.ReadUint8=function(){return this.bytes[this.pos++]},t.prototype.ReadUint16=function(){return this.ReadUint8()|this.ReadUint8()<<8},t.prototype.ReadUint32=function(){var t=this.ReadUint8(),e=this.ReadUint8(),n=this.ReadUint8();return this.ReadUint8()<<24|n<<16|e<<8|t},t.prototype.ReadInt16=function(){var t=this.ReadUint16();return t>=32768&&(t-=65536),t},t.prototype.ReadInt32=function(){var t=this.ReadUint32();return t>=2147483648&&(t-=4294967295),t},t.prototype.ReadFloat32=function(){var t=this.ReadUint32(),e=new ArrayBuffer(4);return new Uint32Array(e)[0]=t,new Float32Array(e)[0]},t.prototype.ReadStringEx=function(){for(var t=this.ReadUint16(),e="",n=0;n<t;n++)e+=String.fromCharCode(this.ReadUint16());return e},t}();e.DataFrameReader=i;var o=function(){function t(){this.bytes=[]}return Object.defineProperty(t.prototype,"Buffer",{get:function(){return this.bytes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ArrayBuffer",{get:function(){return new Uint8Array(this.bytes).buffer},enumerable:!0,configurable:!0}),t.prototype.WriteUint8=function(t){this.bytes.push(t)},t.prototype.WriteUint16=function(t){this.bytes.push(255&t),this.bytes.push(t>>8&255)},t.prototype.WriteInt16=function(t){t<0&&(t+=65536),this.WriteUint16(t)},t.prototype.WriteUint32=function(t){this.bytes.push(255&t),this.bytes.push(t>>8&255),this.bytes.push(t>>16&255),this.bytes.push(t>>24&255)},t.prototype.WriteUint64=function(t){this.bytes.push(255&t),this.bytes.push(t>>8&255),this.bytes.push(t>>16&255),this.bytes.push(t>>24&255),this.bytes.push(t>>32&255),this.bytes.push(t>>40&255),this.bytes.push(t>>48&255),this.bytes.push(t>>56&255)},t.prototype.WriteInt32=function(t){t<0&&(t+=4294967295),this.WriteUint32(t)},t.prototype.WriteFloat32=function(t){var e=new ArrayBuffer(4);new Float32Array(e)[0]=t;var n=new Uint32Array(e)[0];this.WriteUint32(n)},t.prototype.WriteStringEx=function(t){this.WriteUint16(t.length);for(var e=0;e<t.length;e++)this.WriteUint16(t.charCodeAt(e))},t}();e.DataFrameWriter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(3),r=n(1),s=function(){function t(t,e,n){this.key=t,this.text=e,this.SetColor(n)}return t.prototype.SetColor=function(t,e){void 0===e&&(e=!1),this.color=t,this.htmlColor=o.ColorHelper.ColorToHtmlString(t),this.cssColor=o.ColorHelper.ColorToCssColorString(t),e&&i.gs.ucolors.SetConfigColor(this.key,t)},t}();e.ColorConfigEntry=s;var a=function(){function t(){this.SetColor(16711680)}return t.prototype.SetColor=function(t){var e;this.color=t,this.htmlColor=o.ColorHelper.ColorToHtmlString(t),e=o.ColorHelper.GetHSV(t),this.hue=e[0],this.sat=e[1],this.bri=e[2],this.alpha=o.ColorHelper.GetAlpha(t)},t.prototype.SetHue=function(t){var e=o.ColorHelper.ColorFromHSVA(t,this.sat,this.bri,this.alpha);this.SetColor(e),this.hue=t},t.prototype.SetAlpha=function(t){var e=this.hue,n=o.ColorHelper.ColorFromHSVA(this.hue,this.sat,this.bri,t);this.SetColor(n),this.hue=e},t.prototype.SetSV=function(t,e){var n=this.hue,i=o.ColorHelper.ColorFromHSVA(this.hue,t,e,this.alpha);this.SetColor(i),this.hue=n,this.sat=t},t.prototype.SetByHtmlColor=function(t){var e=o.ColorHelper.ColorFromHtmlStringInput(t,this.alpha);-1!=e&&this.SetColor(e)},t}();e.ColorEditModel=a;var l=function(){function t(){}return t.HotKeyToText=function(e){if(e<=0)return"";var n=255&e,o=e-n,r="";o>0&&(o&i.ModificationKeyCode.Shift&&(r="sft+"),o&i.ModificationKeyCode.Ctrl&&(r="ctl+"),o&i.ModificationKeyCode.Alt&&(r="alt+"));var s=t.keyCodeToTextTable[n];return s||(s=String.fromCharCode(n)),r+s},t.keyCodeToTextTable={32:"Space",13:"Enter",9:"Tab",37:"Left",38:"Up",39:"Right",40:"Down",96:"Num0",97:"Num1",98:"Num2",99:"Num3",100:"Num4",101:"Num5",102:"Num6",103:"Num7",104:"Num8",105:"Num9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",186:":",187:";",188:",",189:"-",190:".",191:"/",192:"@",219:"[",220:"\\",221:"]",222:"^",226:"\\"},t}(),c=function(){function t(t,e,n,o,r){this.key=t,this.text=e,this.value=n,this.toggleHotKey=o,this.holdHotKey=r,this.toggleHotKeyText=l.HotKeyToText(o),this.holdHotKeyText=l.HotKeyToText(r),i.gs.uconfig.changedProcsForViewModel[t]=this.UpdateState.bind(this)}return t.prototype.UpdateState=function(){this.value=i.gs.uconfig[this.key]},t.prototype.SetValue=function(t){this.value=t,i.gs.uconfig.SetValue(this.key,t)},t.prototype.SetToggleHotKey=function(t){this.toggleHotKey=t,this.toggleHotKeyText=l.HotKeyToText(t),i.gs.uconfig.SetToggleHotKey(this.key,t)},t.prototype.SetHoldHotKey=function(t){this.holdHotKey=t,this.holdHotKeyText=l.HotKeyToText(t),i.gs.uconfig.SetHoldHotKey(this.key,t)},t.prototype.PullModelState=function(){this.value=i.gs.uconfig[this.key],this.toggleHotKey=i.gs.uconfig.toggleHotKeys[this.key],this.holdHotKey=i.gs.uconfig.holdHotKeys[this.key],this.toggleHotKeyText=l.HotKeyToText(this.toggleHotKey),this.holdHotKeyText=l.HotKeyToText(this.holdHotKey)},t}();e.ConfigEntry=c;var d=function(){function t(t,e,n){this.key=t,this.text=e,this.hotKey=n,this.hotKeyText=l.HotKeyToText(n)}return t.prototype.SetHotKey=function(t){this.hotKey=t,this.hotKeyText=l.HotKeyToText(t),i.gs.uconfig.SetControlHotKey(this.key,t)},t.prototype.PullModelState=function(){this.hotKey=i.gs.uconfig.controlHotKeys[this.key],this.hotKeyText=l.HotKeyToText(this.hotKey)},t}();e.ControlHotkeyConfigEntry=d;var h=function(){function t(){var t=i.gs.ucolors.colorDefs;this.colorEntries=Object.keys(t).map((function(e){var n=i.gs.utexts[e],o=t[e];return new s(e,n,o)})),this.curColorEntry=this.colorEntries[0],this.cellDisplayEntries=i.UserConfig.cellDisplayOptionPropNames.map((function(t){var e=i.gs.utexts[t],n=i.gs.uconfig[t],o=i.gs.uconfig.toggleHotKeys[t],r=i.gs.uconfig.holdHotKeys[t];return new c(t,e,n,o,r)})),this.gameDisplayEntries=i.UserConfig.gameDisplayOptionPropNames.map((function(t){var e=i.gs.utexts[t],n=i.gs.uconfig[t],o=i.gs.uconfig.toggleHotKeys[t];return new c(t,e,n,o,-1)})),this.basicBehaviorEntries=i.UserConfig.basicBehaviorPropNames.map((function(t){var e=i.gs.utexts[t],n=i.gs.uconfig[t];return new c(t,e,n,-1,-1)})),this.controlEntries=i.UserConfig.controlPropNames.map((function(t){var e=i.gs.utexts[t],n=i.gs.uconfig.controlHotKeys[t];return new d(t,e,n)})),i.gs.uconfig.resetListenerProc=this.UpdateAll.bind(this)}return t.prototype.selectColorCard=function(t){var e=r.Arrays.First(this.colorEntries,(function(e){return e.key==t}));e&&(this.curColorEntry=e)},t.prototype.UpdateAll=function(){this.cellDisplayEntries.forEach((function(t){return t.PullModelState()})),this.gameDisplayEntries.forEach((function(t){return t.PullModelState()})),this.basicBehaviorEntries.forEach((function(t){return t.PullModelState()})),this.controlEntries.forEach((function(t){return t.PullModelState()}))},t.instance=new t,t}();e.ConfigHub=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=n(0),r=function(){function t(){this.bus=new i.EventBus,this.skins={}}return t.prototype.addSkinUrl=function(t){null==this.skins[t]&&(this.skins[t]=o.gs.uconfig.acceptNewSkins,this.bus.emit("render"))},t.prototype.removeSkinUrl=function(t){null!=this.skins[t]&&(delete this.skins[t],this.bus.emit("render"))},t.prototype.setImageAvailability=function(t,e){this.skins[t]=e},t.prototype.setImageAvailabilityAll=function(t){for(var e in this.skins)this.skins[e]=t},t.prototype.getSkinAvailability=function(t){return this.skins[t]},t.instance=new t,t}();e.SkinImageManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.procsOnSettled=[],this.loadPhase=0,this.TryToLoad(t,0)}return t.Initialize=function(){t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d")},t.prototype.OnImageLoaded=function(){var t=this.image,e=this.fname;this.isSettled=!0,t.width<=12e3&&t.height<=12e3||(console.log("image size too large: "+e+", "+t.width+"x"+t.height),this.image=this.GetFallBackImage()),this.FireSettled()},t.prototype.OnImageError=function(){if(0==this.loadPhase){var t="http://gr.ixagar.net:9400/?uri="+this.uri;this.TryToLoad(t,1)}else this.isSettled=!0,this.image=this.GetFallBackImage(),this.FireSettled()},t.prototype.TryToLoad=function(e,n){this.uri=e;var i=t.GetFileName(e);this.fname=i;var o=new Image;o.crossOrigin="Anonymous",o.onload=this.OnImageLoaded.bind(this),o.onerror=this.OnImageError.bind(this),this.loadPhase=n,this.image=o,o.src=e},t.GetFileName=function(t){const e=t.match(/.+\/(.*)$/);return e?e[1]:""},t.prototype.GetFallBackImage=function(){return document.querySelector("#img_no_image_fallback")},t.prototype.FireSettled=function(){var t=this;this.procsOnSettled.forEach((function(e){return e(t.image)})),this.procsOnSettled=[]},t.prototype.ExecAfterLoad=function(t){this.isSettled?t(this.image):this.procsOnSettled.push(t)},t.LoadImageThen=function(e,n){var i=t.cash.get(e);i||(i=new t(e),t.cash.set(e,i)),i.ExecAfterLoad(n)},t.cash=new Map,t}();e.ImageWrapper=i;var o=function(){function t(){this.imageCash=new Map}return t.prototype.LoadImageThen=function(t,e,n){if(t){var i=this.imageCash.get(t);i&&i.flagLoaded?n(i):i||((i=new Image).crossOrigin="Anonymous",this.imageCash.set(t,i),i.addEventListener("load",(function(){i.flagLoaded=!0,n(i)})),i.onerror=function(){console.log("failed to load "+t),n(null)},i.src=e?t:"http://gr.ixagar.net:9400/?uri="+t)}else n(null)},t.CheckIsValidImageUri=function(t){var e=t.match(/^http[s]?\:\/\/.*\.(png|jpg|gif|jpeg)$/);return e&&e.length>0},t.Instance=new t,t}();e.ImageLoader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(11),r=n(0),s=n(6),a=function(){function t(t){var n=this,a=new s.Container;this.box=a,this.baseSize=t?3200:200;var l=this.baseSize,c=l/5,d=r.gs.uconfig,h=r.gs.ucolors;if(t){var p=new s.Sprite;p.anchor.x=.5,p.anchor.y=.5,p.position.x=l/2,p.position.y=l/2,a.addChild(p);var u=new s.Graphics;u.beginFill(0),u.drawRect(0,0,l,l),u.endFill(),u.visible=!1,a.addChild(u);var g=function(){p.alpha=d.GetBgImageAlphaValue("fieldBackImageAlpha");var t=d.fieldBackImageUri;if(o.ImageLoader.CheckIsValidImageUri(t)){var e=d.fieldBackImageDrawingMode2;o.ImageLoader.Instance.LoadImageThen(t,!0,(function(t){if(t){t.width,t.height;var i=Math.min(t.width,t.height),o=n.baseSize/i*(e?2:1);p.scale.x=o,p.scale.y=o,p.texture=s.Texture.from(t.src),p.mask=e?null:u,p.visible=!0}}))}else p.visible=!1};g(),d.RegisterChangedProc("fieldBackImageUri",g),d.RegisterChangedProc("fieldBackImageAlpha",g),d.RegisterChangedProc("fieldBackImageDrawingMode2",g)}var f=new s.Container;a.addChild(f),this.gridContainer=f;var m=new s.Graphics;f.addChild(m);for(var y=[],v=0;v<25;v++){var b=v%5,S=v/5>>0,x=String.fromCharCode(65+S)+(b+1),k=new s.Text(x);k.style.fontSize=.09*this.baseSize>>0,k.style.fontFamily="Overpass, Arial",k.x=b*c+c/2-k.width/2,k.y=S*c+c/2-k.height/2,f.addChild(k),y.push(k)}var C=function(){var e,o;!function(){var e=h.GetColor("clFieldCoords");m.alpha=i.ColorHelper.GetAlpha(e),m.clear();var o=t?.002:.006,r=n.baseSize*o>>0,s=r/2;m.lineStyle(r,e);for(var a=0;a<6;a+=5){var d=a*c;m.moveTo(d,-s),m.lineTo(d,l+s),m.moveTo(-s,d),m.lineTo(l+s,d)}}(),e=h.GetColor("clFieldCoords"),o=i.ColorHelper.ColorToHtmlString(e),y.forEach((function(t){return t.style.fill=o})),f.alpha=h.GetAlpha("clFieldCoords")};setTimeout(C,1),h.RegisterChangedProc("clFieldCoords",C);var w=new s.Sprite;a.addChild(w),w.canvas=document.createElement("canvas"),w.texture=new s.Texture.from(w.canvas);let _=-w.canvas.width,M=-w.canvas.height;var I=function(){var t=.015*n.baseSize>>0,e=(n.baseSize,r.gs.uconfig.GlowingBorder?9*t:0),o=t+e;const s=h.GetColor("clFieldBorder"),a=i.ColorHelper.ColorToCssColorString(h.GetColor("clGardient1")),c=i.ColorHelper.ColorToCssColorString(h.GetColor("clGardient2"));w.alpha=i.ColorHelper.GetAlpha(s),w.position.set(-o);const d=w.canvas;d.width=d.height=l+2*t+2*e;const p=d.getContext("2d");requestAnimationFrame(I),p.clearRect(0,0,l+2*t+2*e,l+2*t+2*e),(_>=d.width||M>=d.height)&&(_=-d.width,M=-d.height),_+=10,M+=10;const u=p.createLinearGradient(_,M,d.width+_,d.height+M);u.addColorStop(0,a),u.addColorStop(.1,a),u.addColorStop(.5,c),u.addColorStop(.9,a),u.addColorStop(1,a),p.beginPath(),p.lineWidth=t,p.strokeStyle=u,p.globalAlpha=1,p.rect(t/2+e,t/2+e,l+t,l+t),p.stroke(),w.texture.update()},P=function(){var t=.015*n.baseSize>>0,e=(n.baseSize,r.gs.uconfig.GlowingBorder?9*t:0),o=t+e;const s=h.GetColor("clFieldBorder");w.alpha=i.ColorHelper.GetAlpha(s),w.position.set(-o);const a=w.canvas;a.width=a.height=l+2*t+2*e;const c=a.getContext("2d");c.clearRect(0,0,l+2*t+2*e,l+2*t+2*e),c.beginPath(),c.lineWidth=t,c.strokeStyle=i.ColorHelper.ColorToHtmlString(s),c.globalAlpha=1,c.shadowBlur=e,c.shadowColor=i.ColorHelper.ColorToHtmlString(s),c.rect(t/2+e,t/2+e,l+t,l+t),c.save(),c.clip(),c.shadowBlur=e/8,c.globalAlpha=1,c.stroke(),w.texture.update()};0==e&&(r.gs.uconfig.AniBorder?I():P(),w.blendMode=PIXI.BLEND_MODES.SCREEN,d.RegisterChangedProc("GlowingBorder",P),h.RegisterChangedProc("clFieldBorder",P),e++)}let e=0;return t.prototype.SetScale=function(t){this.box.scale.x=t,this.box.scale.y=t},t.prototype.SetCoordVisibility=function(t){this.gridContainer.visible=t},t}();e.FieldGraphics=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(1),r=n(8),s=n(7),a=n(14),l=n(3),c=n(0),d=n(2),h=function(){function t(){}return t.prototype.Initialize=function(t,e,n,o,r){this.nodeId=t,this.cellType=e,this.ownerPlayerId=n,this.color=o,this.ox=0,this.oy=0,this.or=0,this.x,this.y,this.r,this.nx=0,this.ny=0,this.nr=0,this.mass=0,this.updateStamp=r,this.motionAngle=0,this.motionSpeed=0,this.canEat=!1,this.canEaten=!1,this.splitNum=-1,this.splitOrderWeight=-1,this.canSplit=!1,this.showMark=!1,this.sizeLevel=-1,this.velocity=new i.Vector(0,0)},t.prototype.UpdateProps=function(t,e,n,i,o){var r=this.nx,s=this.ny;this.nx=t,this.ny=e,this.nr=l.GameHelper.MassToRadius(n),this.mass=n,this.motionAngle=i,this.motionSpeed=o,this.velocity.Set(t-r,e-s)},t.prototype.LinearUpdate=function(t){var e=(t-this.updateStamp)/i.Nums.MapTo(c.gs.uconfig.InterpolationSpeed,179,49);e=Math.max(Math.min(e,1),0),this.x=this.ox+(this.nx-this.ox)*e,this.y=this.oy+(this.ny-this.oy)*e,this.r=this.or+(this.nr-this.or)*e},t.Pool=new l.ObjectPool(c.gs.gconfig.MaxCellsNum,(function(){return new t})),t}();e.TNodeData=h;var p=function(t,e,n,i){this.eaterId=t,this.eatenId=e,this.limitRadius=n,this.canEat=i},u=function(){function t(){this.nodeId=-1}return t.prototype.SetTarget=function(t,e,n){this.nodeId=t,this.canEat=e,this.canPushAll=n},t}(),g=function(){function t(t){this.eatingLimitList=[],this.AimTargetData=new u,this.gameCore=t}return t.prototype.UpdateNodeAnalysisProps=function(){try{var t=this;if(!c.gs.gstates.isBenchmarkMode){var e=this.gameCore.nodeMan,n=e.tab1Nodes,r=e.operationUnitIndex,s=e.selfNodeIds[r].length,a=(e.tab2Nodes,e.taboperationUnitIndex),h=e.tabNodeIds[a].length;if(this.gameCore.gameHudModel.SetSplitNum(s+h),s>0||h>0){var m=[];gVar.controlConn2&&h>0?e.tabNodeIds[a].forEach(t=>m.push(e.nodes.get(t))):e.selfNodeIds[r].forEach(t=>m.push(e.nodes.get(t))),d=m[0],m.forEach((function(t){t.mass>d.mass&&(d=t)})),d;var y=m.slice(0).sort((function(t,e){return t.nodeId-e.nodeId}));u=y.length,g=16-u,f=0,y.forEach((function(t,e){var n=0;f<g?t.mass>=44?(n=0,f++,t.canSplit=!0):(n=1,t.canSplit=!1):(n=i.Nums.VMap(e,g,u-1,.4,1,!0),t.canSplit=!1),t.splitOrderWeight=n}));var v=this.gameCore.sight,b=e.GetNodeIdUnderCursor(v.aimCursorX,v.aimCursorY),S=e.nodes.get(b);S&&S.ownerPlayerId==e.activeSelfPlayerId&&(b=-1,S=null);var x=!1,k=!1;if(S){var C=2*S.mass*1.3;m.forEach((function(t){t.mass>C&&l.GameHelper.GetDist(t.nx,t.ny,S.nx,S.ny)<780+t.nr&&t.canSplit&&(x=!0)}));var w=m.length;if(w<8){var _;_=1==w?16:2==w?8:w<=4?4:2,this.gameCore.ShowDebugValue("div",_);var M=d.mass/_;S.mass>1.3*M&&(k=!0)}}this.AimTargetData.SetTarget(b,x,k),n.forEach((function(t){t.showMark=!1,t.canEat=!1,t.canEaten=!1,t.sizeLevel=-1})),n.forEach((function(t){var e=t.mass,n=4*(u=d.mass)*1.3,i=2*u*1.3,o=1.3*u,r=u/1.3,s=u/2*1.3,a=u/2/1.3,l=u/4/1.3,h=u/8*1.3,p=u/8/1.3,u=c.gs.uconfig.MarkerLight?l:p;c.gs.uconfig.MarkerExtend?t.sizeLevel=e>n?0:e>i?1:e>o?2:e>r?3:e>s?4:e>a?5:e>l?6:e>h?7:e>p?8:-1:t.sizeLevel=e>i?0:e>o?1:e>r?2:e>a?3:e>u?4:c.gs.uconfig.MarkerLight?-1:5})),m.forEach((function(e){var o=.5*e.mass*.77;n.forEach((function(n){if(!(m.indexOf(n)>=0)&&l.GameHelper.HitTestAABB(e.nx,e.ny,n.nx,n.ny,1200)){var r=t.gameCore.sight,s=new i.Vector(r.aimCursorX-e.nx,r.aimCursorY-e.ny);s.Normalize(),s.Scale(1200);var a=e.nx+s.x,c=e.ny+s.y;if(!(l.GameHelper.GetLinePointDist(e.nx,e.ny,a,c,n.nx,n.ny)>e.nr+n.nr)){n.showMark=!0;var h=l.GameHelper.GetDist(e.nx,e.ny,n.nx,n.ny);if(n.mass<o&&e.canSplit&&h<720+e.nr&&(n.canEat=!0),e==d&&h<720+e.nr){var p=2*e.mass*1.3;n.mass>p&&(n.canEaten=!0,n.showMark=!0)}}}}))})),m.forEach((function(t){return t.splitNum=m.length}))}this.eatingLimitList=[],n.forEach((function(e){0==e.cellType&&n.forEach((function(n){if(0==n.cellType&&e.ownerPlayerId!=n.ownerPlayerId&&l.GameHelper.HitTestAABB(e.nx,e.ny,n.nx,n.ny,e.nr+n.nr)){var i=e.nr>n.nr?e:n,r=e==i?n:e;if(l.GameHelper.GetDist(e.nx,e.ny,n.nx,n.ny)<i.nr){var s=i.mass>1.3*r.mass,a=i.nr-.41*r.nr,c=o.Arrays.First(t.eatingLimitList,(function(t){return t.eaterId==i.nodeId}));c?a>c.limitRadius&&(c.limitRadius=a,c.eatenId=r.nodeId):t.eatingLimitList.push(new p(i.nodeId,r.nodeId,a,s))}}}))}))}}catch(e){}},t}();e.NodeAnalyzer=g;var f=function(){function t(t){this.nodes=new Map,this.tab1Nodes=new Map,this.tab2Nodes=new Map,this.foodsNodes=new Map,this.foodsNodes1=new Map,this.selfNodeIds=[[],[]],this.tabNodeIds=[[],[]],this.activeSelfPlayerId=-1,this.gameCore=t,this.nodeAnalyzer=new g(t)}return Object.defineProperty(t.prototype,"uMan",{get:function(){return this.gameCore.uMan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameHud",{get:function(){return this.gameCore.gameHudModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataReceiver",{get:function(){return this.gameCore.dataRecorder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sight",{get:function(){return this.gameCore.sight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operationUnitIndex",{get:function(){return this.activeSelfPlayerId==this.uMan.selfUserId?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taboperationUnitIndex",{get:function(){return this.activeSelfPlayerId==gVar.conn2.id?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSelfNode",{get:function(){return this.selfNodeIds[0].length>0||this.selfNodeIds[1].length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasTabNode",{get:function(){return this.tabNodeIds[0].length>0||this.tabNodeIds[1].length>0},enumerable:!0,configurable:!0}),t.prototype.PostClearAllNodes=function(){this.selfNodeIds=[[],[]],this.tabNodeIds=[[],[]],this.nodes.forEach((function(t){h.Pool.Release(t)})),this.nodes.clear(),this.foodsNodes.clear(),this.foodsNodes1.clear(),this.tab1Nodes.clear(),this.tab2Nodes.clear()},t.prototype.PostClearAllNodes1=function(){this.tabNodeIds=[[],[]],this.foodsNodes.clear(),this.foodsNodes1.clear(),this.tab2Nodes.clear()},t.prototype.PostClearAllNodes2=function(){this.selfNodeIds=[[],[]],this.nodes.forEach((function(t){h.Pool.Release(t)})),this.nodes.clear(),this.foodsNodes.clear(),this.foodsNodes1.clear(),this.tab1Nodes.clear()},t.prototype.ResetToInitialiState=function(){this.uMan.ClearUserInfos(),this.PostClearAllNodes()},t.prototype.SyncGameViewToModel=function(){this.nodeAnalyzer.UpdateNodeAnalysisProps(),this.gameViewSyncNodesToListProc()},t.prototype.CalcurateCenterPointOfAllSelfCells=function(){for(var t=0,e=0,n=0,i=0,o=0,r=0,s=0;i<2;i++){if(gVar.conn1.isAlive)for(var a=0,l=this.selfNodeIds[i];a<l.length;a++){var c=l[a],d=this.nodes.get(c);t+=d.nx*d.mass,e+=d.ny*d.mass,n+=d.mass}if(gVar.conn2.isAlive)for(var h=0,p=this.tabNodeIds[i];h<p.length;h++){var u=p[h],g=this.nodes.get(u);o+=g.nx*g.mass,r+=g.ny*g.mass,s+=g.mass}}return gVar.conn1.isAlive&&gVar.conn2.isAlive&&(t+=o,e+=r,n+=s),!gVar.conn1.isAlive&&gVar.conn2.isAlive&&(t=o,e=r,n=s),[t/=n,e/=n]},t.prototype.CalcurateCenterPointOfEachSelfCells=function(){for(var t=0,e=0,n=0,i=0,o=this.selfNodeIds[0];i<o.length;i++){var r=o[i],s=this.nodes.get(r);t+=s.nx*s.mass,e+=s.ny*s.mass,n+=s.mass}for(var a=0,l=0,c=0,d=0,h=this.selfNodeIds[1];d<h.length;d++){var p=h[d],u=this.nodes.get(p);a+=u.nx*u.mass,l+=u.ny*u.mass,c+=u.mass}return[t/=n,e/=n,a/=c,l/=c]},t.prototype.CalcurateCenterPointOfEachTabCells=function(){for(var t=0,e=0,n=0,i=0,o=this.tabNodeIds[0];i<o.length;i++){var r=o[i],s=this.nodes.get(r);t+=s.nx*s.mass,e+=s.ny*s.mass,n+=s.mass}for(var a=0,l=0,c=0,d=0,h=this.tabNodeIds[1];d<h.length;d++){var p=h[d],u=this.nodes.get(p);a+=u.nx*u.mass,l+=u.ny*u.mass,c+=u.mass}return[t/=n,e/=n,a/=c,l/=c]},t.prototype.isInV=function(t){var e=this.nodes.get(t);if(e)return!(e.nx+e.mass<gVar.camMaxX||e.ny+e.mass<gVar.camMinY||e.nx-e.mass>gVar.camMaxX||e.ny-e.mass>gVar.camMaxY)},t.prototype.CalcurateMinMax=function(){var t=gVar.playerXMulti,e=gVar.playerYMulti;gVar.camMaxX=t,gVar.camMaxY=e,gVar.camMinX=t,gVar.camMinY=e,this.foodsNodes.forEach(n=>{var i=n.nx-n.mass,o=n.ny-n.mass;i>gVar.camMaxX&&(gVar.camMaxX=i),o>gVar.camMaxY&&(gVar.camMaxY=o),i<gVar.camMinX&&(gVar.camMinX=i),o<gVar.camMinY&&(gVar.camMinY=o),"caffe"==gTargetSite?(Math.abs(gVar.camMaxX-gVar.camMinX)<7900&&(gVar.camMinX=t-3950,gVar.camMaxX=t+3950),Math.abs(gVar.camMaxY-gVar.camMinY)<5900&&(gVar.camMinY=e-2950,gVar.camMaxY=e+2950)):(Math.abs(gVar.camMaxX-gVar.camMinX)<4200&&(gVar.camMinX=t-2100,gVar.camMaxX=t+2100),Math.abs(gVar.camMaxY-gVar.camMinY)<3200&&(gVar.camMinY=e-1600,gVar.camMaxY=e+1600))});t=gVar.tabXMulti,e=gVar.tabYMulti;gVar.tabcamMaxX=t,gVar.tabcamMaxY=e,gVar.tabcamMinX=t,gVar.tabcamMinY=e,this.foodsNodes1.forEach(n=>{var i=n.nx-n.mass,o=n.ny-n.mass;i>gVar.tabcamMaxX&&(gVar.tabcamMaxX=i),o>gVar.tabcamMaxY&&(gVar.tabcamMaxY=o),i<gVar.tabcamMinX&&(gVar.tabcamMinX=i),o<gVar.tabcamMinY&&(gVar.tabcamMinY=o),"caffe"==gTargetSite?(Math.abs(gVar.tabcamMaxX-gVar.tabcamMinX)<7900&&(gVar.tabcamMinX=t-3950,gVar.tabcamMaxX=t+3950),Math.abs(gVar.tabcamMaxY-gVar.tabcamMinY)<5900&&(gVar.tabcamMinY=e-2950,gVar.tabcamMaxU=e+2950)):(Math.abs(gVar.tabcamMaxX-gVar.tabcamMinX)<4200&&(gVar.tabcamMinX=t-2100,gVar.tabcamMaxX=t+2100),Math.abs(gVar.tabcamMaxY-gVar.tabcamMinY)<3200&&(gVar.tabcamMinY=e-1600,gVar.tabcamMaxU=e+1600))})},t.prototype.UpdateSelfScore=function(){var t=0;if(!c.gs.gstates.isBenchmarkMode)for(var e=0;e<2;e++)for(var n=0,i=this.selfNodeIds[e];n<i.length;n++){var o=i[n];t+=this.nodes.get(o).mass}this.gameHud.PostSelfScoreData(t)},t.prototype.PostNodeData=function(t,e,n,i,r,s,a,d,p,u,g){var f=this.nodes.get(t),m=!1,y=-1,v=this.nodes.has(t);if(!f&&(f=h.Pool.Gain(),o.Utils.Confirm(f),f.Initialize(t,e,s,a,u),!v&&this.nodes.set(t,f),1==f.cellType&&!g&&this.foodsNodes.set(t,f),1==f.cellType&&g&&this.foodsNodes1.set(t,f),!g&&this.tab1Nodes.set(t,f),g&&this.tab2Nodes.set(t,f),f.nx=f.ox=f.x=n,f.ny=f.oy=f.y=i,f.nr=f.or=f.r=l.GameHelper.MassToRadius(r),0==f.cellType)){var b=l.GameHelper.DecodePlayerId(s),S=b[0],x=b[1];S==this.uMan.selfUserId&&(0==this.selfNodeIds[x].length&&!gVar.conn1.isAlive&&(m=!0)&&(y=0),this.selfNodeIds[x].push(t),this.selfNodeIds[x].sort()),S==gVar.conn2.id&&(0==this.tabNodeIds[x].length&&!gVar.conn2.isAlive&&(m=!0)&&(y=1),this.tabNodeIds[x].push(t),this.tabNodeIds[x].sort()),this.tabNodeIds=[[...new Set(this.tabNodeIds[0])],[...new Set(this.tabNodeIds[1])]],this.selfNodeIds=[[...new Set(this.selfNodeIds[0])],[...new Set(this.selfNodeIds[1])]],gVar.conn1.isAlive=this.hasSelfNode,gVar.conn2.isAlive=this.hasTabNode,gVar.conn1.tab1.isAlive=this.selfNodeIds[0].length>0,gVar.conn1.tab2.isAlive=this.selfNodeIds[1].length>0,gVar.conn2.tab1.isAlive=this.tabNodeIds[0].length>0,gVar.conn2.tab2.isAlive=this.tabNodeIds[1].length>0}if(1==c.gs.uconfig.InterpolationType){const t=u;f.LinearUpdate(t),f.updateStamp=t,f.ox=f.x,f.oy=f.y,f.or=f.r}f.UpdateProps(n,i,r,d,p),m&&this.sight.SetSpawned(y)},t.prototype.PostNodeRemoval=function(t,e){var n=this.nodes.get(t),i=this.foodsNodes.get(t),r=this.tab1Nodes.get(t),s=this.foodsNodes1.get(t),a=this.tab2Nodes.get(t);!e&&r&&this.tab1Nodes.delete(t),e&&a&&this.tab2Nodes.delete(t),s&&this.foodsNodes1.delete(t),i&&this.foodsNodes.delete(t),n&&(this.nodes.delete(t),h.Pool.Release(n),(o.Arrays.Remove(this.selfNodeIds[0],t)||o.Arrays.Remove(this.selfNodeIds[1],t))&&0==this.selfNodeIds[0].length&&0==this.selfNodeIds[1].length&&gVar.conn1.isAlive&&this.selfUnitsDeadCallback&&this.selfUnitsDeadCallback(),(o.Arrays.Remove(this.tabNodeIds[0],t)||o.Arrays.Remove(this.tabNodeIds[1],t))&&0==this.tabNodeIds[0].length&&0==this.tabNodeIds[1].length&&gVar.conn1.isAlive&&gVar.conn2.isAlive&&this.selfUnitsDeadCallback&&this.selfUnitsDeadCallback(2))},t.prototype.RecordLatencyCheckStartTime=function(){this.latencyCheckStartTime=Date.now()},t.prototype.PostExternalChatMessage=function(t,e,n,i){new Date;var r=o.DateTimeHelper.GetHourMinutesString();this.gameHud.PostChatMessage(r,n,i,null,e,t)},t.prototype.OnEnterBenchMarkMode=function(){this.gameHud.PostLeaderboardData([]),this.gameHud.PostTeamRankingData([]),this.gameHud.PostMapData([]),this.PostClearAllNodes(),this.SyncGameViewToModel(),this.gameHud.PostServerStatusData(""),this.gameHud.PostLatencyData(0),this.gameHud.PostServerUserNumData(0,0,0,0)},t.prototype.GetPlayerIdUnderCursor=function(t,e){var n=-1;return this.nodes.forEach((function(i){-1==n&&0==i.cellType&&l.GameHelper.GetDist(i.nx,i.ny,t,e)<i.nr&&(n=i.ownerPlayerId)})),n},t.prototype.GetNodeIdUnderCursor=function(t,e){var n=-1;return this.nodes.forEach((function(i){-1==n&&0==i.cellType&&l.GameHelper.GetDist(i.nx,i.ny,t,e)<i.nr&&(n=i.nodeId)})),n},t.prototype.DecodeFrame=function(t,e,n,i){var h=new r.DataFrameReader(t);switch(h.ReadUint8()){case 43:var p=h.ReadUint16();!i&&this.uMan.PostSelfUserId(p),i?gVar.conn2.id=p:gVar.conn1.id=p;break;case 65:h.ReadFloat32(),h.ReadFloat32();var u=h.ReadFloat32();h.ReadFloat32(),c.gs.gconfig.UpdateFieldSize(u),this.sight.Init();break;case 42:for(var g=h.ReadUint16(),f=0;f<g;f++){var m=h.ReadUint16(),y=h.ReadStringEx(),v=h.ReadStringEx(),b=h.ReadStringEx(),S=h.ReadUint8()>0,x=h.ReadUint16(),k=h.ReadStringEx(),C=h.ReadStringEx();if(e){if((it=this.uMan.GetUserInfoById(m))!=this.uMan.fallbackUserInfo){var w=s.InternalPackets.UserEntryInfo(m,y,v,x,b,C);this.dataReceiver.PostInternalRecordingPacket(w)}it.clientId,this.uMan.selfUserId}this.uMan.PostUserInfoData(m,y,v,x,b,C,S,k)}break;case 45:for(g=h.ReadUint16(),f=0;f<g;f++){var _=h.ReadUint16();this.uMan.PostUserLeave(_)}break;case 39:for(g=h.ReadUint16(),f=0;f<g;f++){var M=h.ReadUint16(),I=(m=h.ReadUint16(),h.ReadUint8()),P=h.ReadUint8(),T=h.ReadUint8(),R=h.ReadUint8(),A=I<<16|P<<8|T;if(e&&(it=this.uMan.GetUserInfoById(M))!=this.uMan.fallbackUserInfo){var U=it.colors[1&R];this.dataReceiver.PostInternalRecordingPacket(s.InternalPackets.PlayerColor(M,U))}this.uMan.PostPlayerColorData(M,A)}break;case 36:for(g=h.ReadUint16(),f=0;f<g;f++){x=h.ReadUint16();var N=h.ReadStringEx(),O=h.ReadStringEx(),E=h.ReadStringEx();if(A=l.ColorHelper.ColorFromHtmlString(O),e&&(ot=this.uMan.GetTeamInfoById(x))!=this.uMan.fallbackTeamInfo){var F=ot.color;this.dataReceiver.PostInternalRecordingPacket(s.InternalPackets.TeamColor(x,F))}this.uMan.PostTeamInfoData(x,A,N,E)}break;case 35:for(g=h.ReadUint16(),f=0;f<g;f++)x=h.ReadUint16(),this.uMan.PostTeamInfoRemoval(x);break;case 18:i&&this.PostClearAllNodes1(),!i&&this.PostClearAllNodes2(),n||this.SyncGameViewToModel();break;case 15:this.CalcurateMinMax();gVar.camMaxX,gVar.camMinX,gVar.camMaxY,gVar.camMinY;var B=h.ReadFloat32(),H=h.ReadFloat32();if(h.ReadFloat32(),h.ReadFloat32(),this.sight.SetServerEyePos(B,H),!i&&(gVar.playerXMulti=B),!i&&(gVar.playerYMulti=H),i&&(gVar.tabXMulti=B),i&&(gVar.tabYMulti=H),h.ReadUint8()>0){M=h.ReadUint16();var D=h.ReadFloat32(),V=h.ReadFloat32(),G=h.ReadUint8(),L=h.ReadUint32(),z=(1&G)>0,j=(m=65534&M,c.gs.gstates);c.gs.uconfig.tab?(M!=gVar.conn1.id+1||gVar.controlConn2||(m!=gVar.conn2.id&&m!=gVar.conn2.id+1&&(this.sight.setAimCursorProps(M,D,V,z),this.sight.aimPlayerId=M,this.activeSelfPlayerId=M),!0,gVar.conn1.isActive=!0,gVar.conn2.isActive=!1),M==gVar.conn2.id+1&&gVar.controlConn2&&(m!=gVar.conn1.id&&m!=gVar.conn1.id+1&&(this.sight.setAimCursorProps(M,D,V,z),this.sight.aimPlayerId=M,this.activeSelfPlayerId=M),!0,gVar.conn1.isActive=!1,gVar.conn2.isActive=!0),M!=gVar.conn1.id||gVar.controlConn2||(m!=gVar.conn2.id&&m!=gVar.conn2.id+1&&(this.sight.setAimCursorProps(M,D,V,z),this.sight.aimPlayerId=M,this.activeSelfPlayerId=M),gVar.conn1.isActive=!0,gVar.conn2.isActive=!1),M==gVar.conn2.id&&gVar.controlConn2&&(m!=gVar.conn1.id&&m!=gVar.conn1.id+1&&(this.sight.setAimCursorProps(M,D,V,z),this.sight.aimPlayerId=M,this.activeSelfPlayerId=M),gVar.conn1.isActive=!1,gVar.conn2.isActive=!0),!i&&!gVar.conn1.isAlive&&!gVar.conn2.isAlive&&this.sight.setAimCursorProps(M,D,V,z),this.gameHud.SetSpecTargetScore(L)):(j.isRealtimeMode&&j.isSpectate&&D!=this.uMan.selfUserId?this.sight.setAimCursorProps(M,D,V,z):this.sight.aimPlayerId=M,m==this.uMan.selfUserId&&(this.activeSelfPlayerId=M),this.gameHud.SetSpecTargetScore(L))}else!gVar.conn1.isAlive&&!gVar.conn2.isAlive&&(this.sight.aimPlayerId=-1,this.activeSelfPlayerId=-1);var X=this.sight.aimPlayerId>0?65534&this.sight.aimPlayerId:-1;let t=performance.now();for(this.gameHud.SetAimPlayerClient(X);0!=(et=h.ReadUint32());){var K=h.ReadUint8(),W=h.ReadFloat32(),Y=h.ReadFloat32(),q=h.ReadUint16(),Q=(M=h.ReadUint16(),0);1==K&&(Q=h.ReadUint32());var J=0,$=0;h.ReadUint8()&&(J=h.ReadFloat32(),$=h.ReadFloat32()),e&&!this.nodes.has(et)&&(w=s.InternalPackets.NodeRemoval(et),this.dataReceiver.PostInternalRecordingPacket(w)),n&&($=0),this.PostNodeData(et,K,W,Y,q,M,Q,J,$,t,i)}var Z=[],tt=[];for(g=h.ReadUint16(),f=0;f<g;f++){var et=h.ReadUint32();i?tt.push(et):Z.push(et)}tt.forEach(t=>this.tab1Nodes.has(t)?Z.push(t):this.PostNodeRemoval(t,2)),Z.forEach(t=>!i&&this.PostNodeRemoval(t)),n||this.SyncGameViewToModel();break;case 47:if(n)break;g=h.ReadUint8();var nt=new Array;for(f=0;f<g;f++){M=h.ReadUint16(),q=h.ReadUint32();var it=this.uMan.GetUserInfoById(M),ot=this.uMan.GetTeamInfoById(it.teamId);nt.push(new a.TLeaderboardData(it.leaderBoardName,q,ot.colorStr,it.tripKey))}this.gameHud.PostLeaderboardData(nt);break;case 46:if(n)break;for(g=h.ReadUint8(),nt=new Array,f=0;f<g;f++){x=h.ReadUint16();var rt=h.ReadUint16(),st=this.uMan.GetTeamInfoById(x);nt.push(new a.TLeaderboardData(st.teamName,rt,st.colorStr))}this.gameHud.PostTeamRankingData(nt);break;case 41:if(n)break;g=h.ReadUint16();var at=new Array;for(f=0;f<g;f++)M=h.ReadUint16(),W=h.ReadInt16(),Y=h.ReadInt16(),q=h.ReadUint16(),at.push(new a.TMapData(M,W,Y,q));!i&&this.gameHud.PostMapData(at);break;case 128:m=h.ReadUint16(),h.ReadStringEx();var lt=h.ReadStringEx(),ct=(new Date,o.DateTimeHelper.GetHourMinutesString()),dt=(it=this.uMan.GetUserInfoById(m),ot=this.uMan.GetTeamInfoById(it.teamId),!0);d.AppConfigurator.instance.useTeamSeparatedChat&&ot!=this.uMan.selfTeamInfo&&(dt=!1),dt?this.gameHud.PostChatMessage(ct,it.fullName,lt,ot.colorStr):console.log("stray chat message: "+ct+" "+it.fullName+" "+lt);break;case 14:break;case 131:if(n)break;var ht=Date.now()-this.latencyCheckStartTime;this.gameHud.PostLatencyData(ht);break;case 133:var pt=h.ReadStringEx();console.log(pt);break;case 200:var ut=h.ReadStringEx(),gt=JSON.parse(ut);c.gs.gconfig.ShowAlwaysAllPlayersInMap=!gt.enableTeamMapSeparation,c.gs.gconfig.ShowAlwaysAllPlayersSkin=!gt.enableTeamSkinSeparation;var ft=this.gameCore.chatAppModel;ft&&ft.SetGameTeamChatSessionEnabled(gt.enableTeamChatSeparation);var mt=c.gs.gstates.enableTeamChatSeparationCurrent!=gt.enableTeamChatSeparation;c.gs.gstates.enableTeamChatSeparationCurrent=gt.enableTeamChatSeparation,ft&&ft.SetServerSignature(c.gs.gstates.chatRoomSig,mt);break;case 201:ut=h.ReadStringEx();break;case 202:pt=h.ReadStringEx(),this.gameHud.PostServerDisplayMessage(pt);break;case 203:if(n)break;ut=h.ReadStringEx(),this.gameHud.PostServerStatusData(ut);break;case 91:if(n)break;h.ReadUint16();var yt=h.ReadUint16(),vt=h.ReadUint16(),bt=h.ReadUint16(),St=h.ReadUint16();h.ReadStringEx(),h.ReadUint32(),this.gameHud.PostServerUserNumData(yt,bt,vt,St);break;case 161:et=h.ReadUint32(),this.PostNodeRemoval(et);break;case 162:m=h.ReadUint16();var xt=h.ReadStringEx();v=h.ReadStringEx(),x=h.ReadUint16(),b=h.ReadStringEx(),C=h.ReadStringEx(),this.uMan.PostUserInfoData(m,xt,v,x,b,C);break;case 163:M=h.ReadUint16(),A=h.ReadUint32(),this.uMan.PostPlayerColorData(M,A);break;case 164:x=h.ReadUint16(),A=h.ReadUint32(),this.uMan.PostTeamInfoData(x,A);break;case 166:var kt=h.ReadInt32(),Ct=h.ReadInt32(),wt=h.ReadFloat32(),_t=(D=h.ReadInt32(),V=h.ReadInt32(),z=h.ReadUint8()>0,h.ReadUint16());this.sight.FeedReplaySightState(kt,Ct,wt,D,V,z,_t);break;case 19:h.ReadUint8();var Mt=h.ReadInt32(),It=h.ReadInt32(),Pt=h.ReadInt32(),Tt=Date.now();this.sight.teamCircleX=Mt,this.sight.teamCircleY=It,this.sight.teamCircleRadius=Pt,this.sight.teamCircleTimeStamp=Tt}},t}();e.NodeManager=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.PermanentKeeped=[42,45,39,36,35,65],t.NotForRecord=[43,200,201,131,133,202],t}();e.OpcodeGroups=i;var o=function(t,e,n,i){this.playerId=t,this.nx=e,this.ny=n,this.mass=i};e.TMapData=o;var r=function(t,e,n,i){this.name=t,this.score=e,this.colorStr=n,this.trip=i};e.TLeaderboardData=r},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(10),l=n(0),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uconfig=l.gs.uconfig,e.skinMan=a.SkinImageManager.instance,e}return o(e,t),e.prototype.mounted=function(){this.skinMan.bus.on("render",this.update.bind(this)),window.ondragstart=function(){return!1}},e.prototype.onCellClick=function(t){var e=t.item.uri,n=t.item.allowed;this.skinMan.setImageAvailability(e,!n)},e.prototype.onButton=function(t){var e=t.target.dataset.sig;"acceptNewSkins"==e&&this.uconfig.SetAcceptNewSkins(!0),"declineNewSkins"==e&&this.uconfig.SetAcceptNewSkins(!1),"acceptAll"==e&&this.skinMan.setImageAvailabilityAll(!0),"declineAll"==e&&this.skinMan.setImageAvailabilityAll(!1)},r([s.template("\n<skin-filter-panel>\n\t<style>\n\t\t.skin_filter_panel_root{\n\t\t\twidth: 400px;z-index:21;\n\t\t\theight: 530px;\n\t\t\tbackground-color: #F0F6FF;\n\t\t\tposition: absolute;\n\t\t\ttop: 34px;\n\t\t\tright: 6px;\n\t\t\tborder: solid 1px #44A;\n\t\t\tborder-radius: 2px;\n\t\t\tcolor: #448;\n\t\t\tpadding: 8px;\n\t\t\tfont-size: 16px;\n\t\t}\n\n\t\t.sf_skinlistbox_outer{\n\t\t\theight: 400px;\n\t\t\toverflow-y: scroll;\n\t\t\tborder: solid 1px #CCE;\n\t\t}\n\n\t\t.sf_skinlistbox{\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\talign-items: flex-start;\n\t\t}\n\n\t\t.sf_skinlistbox > div{\n\t\t\twidth: 60px;\n\t\t\theight: 60px;\n\t\t\tdisplay: flex;\n\t\t\tborder: solid 1px #CCE;\n\t\t\tposition: relative;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.sf_skinlistbox > div > *{\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t}\n\t\t.sf_skinlistbox > div img{\n\t\t\tmax-width: 100%;\n\t\t\tmax-height: 100%;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\tmargin: auto;\n\t\t}\n\n\t\t.sf_skinlistbox > div > .cover{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\t}\n\n\t\t.sf_img_block{\n\t\t\topacity: 0.2;\n\t\t}\n\n\t\t.sf_box{\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\n\t\t.sfbt{\n\t\t\tdisplay: inline-block;\n\t\t\tbackground-color: #FFF;\n\t\t\tcolor: #008;\n\t\t\tborder-radius: 2px;\n\t\t\tpadding: 0 4px;\n\t\t\tcursor: pointer;\n\t\t\tborder: solid 1px #008;\n\t\t}\n\n\t\t.sfbt_active{\n\t\t\tbackground-color: #0CF;\n\t\t}\n\t</style>\n\n\t<div class='skin_filter_panel_root'>\n\t\t<div class='sf_box'>\n\t\t\tskin過濾器\n\t\t</div>\n\n\t\t<div class='sf_skinlistbox_outer sf_box'>\n\t\t\t<div class='sf_skinlistbox'>\n\t\t\t\t<div each={allowed, uri in skinMan.skins} onclick={onCellClick}>\n\t\t\t\t\t<img src={uri} />\n\t\t\t\t\t<div class='cover' show={!allowed}>\n\t\t\t\t\t\t<img src='gr/blocked.png' class='sf_img_block' />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class='sf_box'>\n\t\t\t<div class='sfbt' onclick={onButton} data-sig='acceptAll'>\n\t\t\t\t全部顯示\n\t\t\t</div>\n\n\t\t\t<div class='sfbt' onclick={onButton} data-sig='declineAll'>\n\t\t\t\t隱藏全部\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class='sf_box'>\n\t\t\t新skin預設顯示/隱藏:\n\n\t\t\t<div class={sfbt: true, sfbt_active: uconfig.acceptNewSkins} onclick={onButton} data-sig='acceptNewSkins'>\n\t\t\t\t顯示\n\t\t\t</div>\n\n\t\t\t<div class={sfbt: true, sfbt_active: !uconfig.acceptNewSkins} onclick={onButton} data-sig='declineNewSkins'>\n\t\t\t\t隱藏\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n</skin-filter-panel>\n")],e)}(s.Element);e.SkinFilterPanelTag=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(2),l=n(0),c=n(9),d=n(1),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uconfig=l.gs.uconfig,e.cssColors=l.gs.ucolors.cssColors,e.appConfig=a.AppConfigurator.instance,e.utexts=l.gs.utexts,e.isJapanese=a.AppConfigurator.instance.isJapanese,e.model=c.ConfigHub.instance,e.editModel=new c.ColorEditModel,e.windowMouseHandlerProc=null,e.pickerEndX=254,e}return o(e,t),e.prototype.mounted=function(){this.editModel.SetColor(this.model.curColorEntry.color),this.UpdateColorView(),window.addEventListener("mousemove",this.onWindowMouseMove.bind(this)),window.addEventListener("mouseup",this.onWindowMouseUp.bind(this))},e.prototype.onCardSelected=function(t){var e=t.currentTarget.value;this.model.selectColorCard(e),this.editModel.SetColor(this.model.curColorEntry.color)},e.prototype.onCardSelected2=function(t){this.UpdateColorView()},e.prototype.onMainCanvasClick=function(){},e.prototype.onWindowMouseMove=function(t){this.windowMouseHandlerProc&&this.windowMouseHandlerProc(t)},e.prototype.onWindowMouseUp=function(){this.windowMouseHandlerProc=null},e.prototype.ReflectEditModelColorToModel=function(){this.model.curColorEntry.SetColor(this.editModel.color,!0),this.UpdateColorView(),this.update(),this.appRoot.update()},e.prototype.removeFocusOnPage=function(){var t=document.activeElement;t&&t.blur(),window.getSelection().removeAllRanges()},e.prototype.onHueGaugeMouseDown=function(t){var e=this,n=t.target.getBoundingClientRect().left,i=function(t){var i=t.pageX-n,o=d.Nums.VMap(i,0,e.pickerEndX,0,.999,!0);e.editModel.SetHue(o),e.ReflectEditModelColorToModel(),e.update()};return i(t),this.windowMouseHandlerProc=i,t.preventDefault(),!1},e.prototype.onMainGaugeMouseDown=function(t){var e=this,n=t.target.getBoundingClientRect(),i=n.left,o=n.top,r=function(t){var n=t.pageX-i,r=t.pageY-o,s=d.Nums.VMap(n,0,e.pickerEndX,0,1,!0),a=d.Nums.VMap(r,0,e.pickerEndX,0,1,!0);e.editModel.SetSV(s,1-a),e.ReflectEditModelColorToModel()};return r(t),this.windowMouseHandlerProc=r,t.preventDefault(),!1},e.prototype.onAlphaGaugeMouseDown=function(t){var e=this,n=t.target.getBoundingClientRect().left,i=function(t){var i=t.pageX-n,o=d.Nums.VMap(i,0,e.pickerEndX,0,1,!0);e.editModel.SetAlpha(o),e.ReflectEditModelColorToModel()};return i(t),this.windowMouseHandlerProc=i,t.preventDefault(),!1},e.prototype.onColorTextInput=function(t){var e=t.target.value;this.editModel.SetByHtmlColor(e),this.ReflectEditModelColorToModel()},e.prototype.UpdateColorView=function(){this.drawAlphaCanvas(),this.drawMainCanvas();var t=this.pickerEndX;this.refs.knob_hue.style.left=this.editModel.hue*t+"px",this.refs.knob_alpha.style.left=this.editModel.alpha*t+"px",this.refs.knob_main.style.left=this.editModel.sat*t+"px",this.refs.knob_main.style.top=(1-this.editModel.bri)*t+"px"},e.prototype.drawMainCanvas=function(){var t=this.refs.picker_main_canvas,e=t.width,n=t.height,i=t.getContext("2d");i.clearRect(0,0,e,n);for(var o=360*this.editModel.hue,r=0;r<n;r++){var s=i.createLinearGradient(0,0,e,0),a="hsl("+o+",0%,"+d.Nums.VMap(r,0,n,100,0)+"%)",l="hsl("+o+",100%,"+d.Nums.VMap(r,0,n,50,0)+"%)";s.addColorStop(0,a),s.addColorStop(1,l),i.fillStyle=s,i.fillRect(0,r,e,1)}},e.prototype.drawAlphaCanvas=function(){var t=this.refs.picker_alpha_canvas,e=t.width,n=t.height,i=t.getContext("2d");i.clearRect(0,0,e,n),i.beginPath();var o=i.createLinearGradient(0,0,e,0),r=this.model.curColorEntry.color,s=r>>16&255,a=r>>8&255,l=255&r;o.addColorStop(0,"rgba("+s+","+a+","+l+",0.0)"),o.addColorStop(1,"rgba("+s+","+a+","+l+",1.0)"),i.fillStyle=o,i.rect(0,0,e,n),i.fill()},e.prototype.optionChanged=function(t,e){t.item.SetValue(e)},e.prototype.checkChanged=function(t){this.optionChanged(t,t.target.checked)},Object.defineProperty(e.prototype,"appRoot",{get:function(){return this.parent.parent},enumerable:!0,configurable:!0}),e.prototype.onConfigTextInput=function(t){l.gs.uconfig.SetValue(t.target.name,t.target.value)},e.prototype.onConfigCheckChanged=function(t){l.gs.uconfig.SetValue(t.target.name,t.target.checked)},r([s.template("\n<color-config-panel>\n\t<style>\n\t\t.panel_content_box{\n\t\t\theight: 632px;\n\t\t\t_overflow-y: scroll;\n\t\t\t_padding: 0 10px;\n\t\t}\n\n\t\t.header_box{\n\t\t\theight: 48px;\n\t\t\tfont-size: 24px;\n\t\t\tpadding-left: 12px;\n\t\t\tline-height: 48px;\n\t\t}\n\n\t\t.panel_content_inner{\n\t\t\twidth: 700px;\n\t\t\tmargin: 0 auto;\n\t\t\tmargin-top: 50px;\n\t\t}\n\n\t\t.box_frame{\n\t\t\tborder: solid 1px;\n\t\t\tborder-radius: 5px;\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\n\t\t.box_header{\n\t\t\twidth: 100%;\n\t\t\tpadding-top: 2px;\n\t\t\tpadding-left: 5px;\n\t\t\tborder-radius: 3px 3px 0 0;\n\t\t\tfont-size: 20px;\n\t\t}\n\n\t\t.box_content{\n\t\t\tpadding: 10px;\n\t\t}\n\n\t\t.ui_config{\n\t\t\theight: 28px;\n\t\t}\n\t\t\n\t\t.ui_checkbox{\n\t\t\twidth: 18px;\n\t\t\theight: 18px;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t\n\t\t.ui_color_text_input{\n\t\t\twidth: 100px;\n\t\t}\n\n\t\t.main_config_panel_root{\n\t\t}\n\n\t\t.color_edit_part{\n\t\t\theight: 320px;\n\t\t}\n\t\t.color_entries_outer{\n\t\t\tborder: solid 1px #AAA;\n\t\t\twidth: 380px;\n\t\t\theight: 100%;\n\t\t\toverflow-y: scroll;\n\t\t\tuser-select: none;\n\t\t\tcursor: default;\n\t\t\tfloat: left;\n\t\t}\n\n\t\t.color_entry_card{\n\t\t}\n\n\t\t.card_selected{\n\t\t\tbackground-color: #0BF;\n\t\t}\n\n\t\t.color_header{\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 335px;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\tvertical-align: middle;\n\t\t\tpadding-left: 8px;\n\t\t}\n\n\t\t.color_cell{\n\t\t\twidth: 14px;\n\t\t\theight: 14px;\n\t\t\tdisplay: inline-block;\n\t\t\tborder: solid 1px #000;\n\t\t\tvertical-align: middle;\n\t\t\tposition: relative;\n\t\t}\n\n\t\t.color_cell > *{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t}\n\n\t\t.color_picker_outer{\n\t\t\twidth: 280px;\n\t\t\theight: 100%;\n\t\t\t_border: solid 1px #AAA;\n\t\t\tfloat: left;\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t.color_picker_inner{\n\t\t\tmargin: auto auto;\n\t\t\twidth: 260px;\n\t\t\theight: 320px;\n\t\t}\n\n\t\t.color_text_input_outer{\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\n\t\tinput.color_text_input{\n\t\t\tborder: none;\n\t\t\twidth: 70px;\n\t\t\theight: 26px;\n\t\t\tpadding-left: 8px;\n\t\t}\n\n\t\t.gauge_box{\n\t\t\twidth: 260px;\n\t\t\t_border: solid 1px #AAA;\n\t\t\tuser-select: none;\n\t\t\tposition: relative;\n\t\t\tcursor: default;\n\t\t}\n\n\t\t.gauge_box_I{\n\t\t\theight: 30px; \n\t\t}\n\n\t\t.gauge_box_L{\n\t\t\theight: 260px;\n\t\t}\n\n\t\t.picker_main_canvas_outer{\n\t\t\t_border: solid 1px #AAA;\n\t\t\tuser-select: none;\n\t\t\tposition: relative;\n\t\t}\n\n\t\t.gauge_box > *{\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t}\n\n\t\t.bar_image{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n\t\t.gauge_cover{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n\t\t.knob{\n\t\t\tborder: solid 1px #000;\n\t\t\tposition: absolute;\n\t\t\tbackground-color: rgba(255, 255, 255, 1.0);\n\t\t}\n\n\t\t.knob_I{\n\t\t\twidth: 6px;\n\t\t\theight: 30px;\n\t\t}\n\n\t\t.knob_L{\n\t\t\twidth: 6px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t.config_box{}\n\t</style>\n\t<div class=\"main_config_panel_root\">\n\t\t<div class=\"header_box\">\n\t\t\t{utexts.hdrTheme}\n\t\t</div>\n\n\t\t<div class=\"panel_content_box\">\n\t\t\t<div class='panel_content_inner'>\n\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe90d</span><span>{utexts.hdrColor}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content' style='padding: 15px'>\n\n\t\t\t\t\t\t<div class='color_edit_part'>\n\t\t\t\t\t\t\t<div class='color_entries_outer' onmousedown={onCardSelected2}\n\t\t\t\t\t\t\t\tstyle='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t\t\t\t<virtual each={m in model.colorEntries}>\n\t\t\t\t\t\t\t\t\t<div class='color_entry_card' \n\t\t\t\t\t\t\t\t\t\tstyle='background: {m == model.curColorEntry ? cssColors.clUiButtonActive : \"none\"}'\n\t\t\t\t\t\t\t\t\t\tvalue={m.key} onmousedown={onCardSelected}>\n\t\t\t\t\t\t\t\t\t\t<div class='color_header'>\n\t\t\t\t\t\t\t\t\t\t\t{m.text}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='color_cell'>\n\t\t\t\t\t\t\t\t\t\t\t<img src='gr/checker_cell.png' />\n\t\t\t\t\t\t\t\t\t\t\t<div style='background: {m.cssColor}' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</virtual>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='color_picker_outer'>\n\t\t\t\t\t\t\t\t<div class='color_text_input_outer' if={false}>\n\t\t\t\t\t\t\t\t\t<input class='color_text_input' value={model.curColorEntry.htmlColor} oninput={onColorTextInput} />\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='color_picker_inner'>\n\t\t\t\t\t\t\t\t\t<div class='gauge_box gauge_box_I'>\n\t\t\t\t\t\t\t\t\t\t<img src='gr/huebar.png' class='bar_image' />\n\t\t\t\t\t\t\t\t\t\t<div class='knob knob_I' ref='knob_hue' />\n\t\t\t\t\t\t\t\t\t\t<div class='gauge_cover' onmousedown={onHueGaugeMouseDown} />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class='gauge_box gauge_box_L'>\n\t\t\t\t\t\t\t\t\t\t<canvas width='260' height='260' ref='picker_main_canvas' onclick={onMainCanvasClick}/>\n\t\t\t\t\t\t\t\t\t\t<div class='knob knob_L' ref='knob_main' />\n\t\t\t\t\t\t\t\t\t\t<div class='gauge_cover' onmousedown={onMainGaugeMouseDown} />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class='gauge_box gauge_box_I'>\n\t\t\t\t\t\t\t\t\t\t<img src='gr/checkbar.png' class='bar_image' />\n\t\t\t\t\t\t\t\t\t\t<canvas width='260' height='30' ref='picker_alpha_canvas' />\n\t\t\t\t\t\t\t\t\t\t<div class='knob knob_I' ref='knob_alpha' />\n\t\t\t\t\t\t\t\t\t\t<div class='gauge_cover' onmousedown={onAlphaGaugeMouseDown} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='clear_both' />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe90d</span><span>{utexts.hdrWallpaper}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content'>\n\n\t\t\t\t\t\t<div class='config_box'>\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{isJapanese ? '背景' : 'Field'}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config\" style=\"width:200px\" \n\t\t\t\t\t\t\t\t\t\t\tname=\"fieldBackImageUri\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={uconfig.fieldBackImageUri} onchange={onConfigTextInput} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td style=\"font-family: Overpass\">\n\t\t\t\t\t\t\t\t\t\t&#x03B1;\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config\" style=\"width:30px\" \n\t\t\t\t\t\t\t\t\t\t\tname=\"fieldBackImageAlpha\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={uconfig.fieldBackImageAlpha} oninput={onConfigTextInput} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\tL\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui_config ui_checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"fieldBackImageDrawingMode2\"\n\t\t\t\t\t\t\t\t\t\t\tchecked=\"{uconfig.fieldBackImageDrawingMode2}\" onchange={onConfigCheckChanged}/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{isJapanese ? '選單背景' : 'Panel'}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config\" style=\"width:200px\" \n\t\t\t\t\t\t\t\t\t\t\tname=\"panelBackImageUri\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={uconfig.panelBackImageUri} oninput={onConfigTextInput} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td style=\"font-family: Overpass\">\n\t\t\t\t\t\t\t\t\t\t&#x03B1;\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config\" style=\"width:30px\" \n\t\t\t\t\t\t\t\t\t\t\tname=\"panelBackImageAlpha\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={uconfig.panelBackImageAlpha} oninput={onConfigTextInput} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</color-config-panel>\n")],e)}(s.Element);e.ColorConfigPanelTag=h},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(4),l=n(2),c=n(0),d=n(9),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uconfig=c.gs.uconfig,e.userEntry=a.gameCore.userEntryMan,e.cssColors=c.gs.ucolors.cssColors,e.appConfig=l.AppConfigurator.instance,e.gstates=c.gs.gstates,e.usupport=c.gs.usupport,e.utexts=c.gs.utexts,e.configHub=d.ConfigHub.instance,e.isJapanese=l.AppConfigurator.instance.isJapanese,e}return o(e,t),e.prototype.optionChanged=function(t,e){t.item.m.SetValue(e)},e.prototype.checkChanged=function(t){this.optionChanged(t,t.target.checked)},e.prototype.colorChanged=function(t){return t.item.SetColor(t.target.value),this.appRoot.update(),!1},e.prototype.mounted=function(){a.gameCore.gameHudModel.configUpdatedProc=this.update.bind(this)},Object.defineProperty(e.prototype,"appRoot",{get:function(){return this.parent.parent},enumerable:!0,configurable:!0}),e.prototype.getHotKeyFromKeyEvent=function(t,e){if(void 0===e&&(e=!1),t.repated)return-2;var n=t.which;if(16==n||17==n||18==n||229==n)return-2;if(8==n||46==n)return-1;var i=t.keyCode;t.ctrlKey&&(i+=c.ModificationKeyCode.Ctrl),t.shiftKey&&(i+=c.ModificationKeyCode.Shift),t.altKey&&(i+=c.ModificationKeyCode.Alt);var o=this.configHub;return(e?o.controlEntries.every((function(t){return t.hotKey!=i}))&&o.gameDisplayEntries.every((function(t){return t.toggleHotKey!=i})):o.controlEntries.every((function(t){return t.hotKey!=i}))&&o.cellDisplayEntries.every((function(t){return t.toggleHotKey!=i&&t.holdHotKey!=i}))&&o.gameDisplayEntries.every((function(t){return t.toggleHotKey!=i})))?i:-2},e.prototype.setToggleHotKey_Cells=function(t){var e=this.getHotKeyFromKeyEvent(t,!0);return-2!=e&&t.item.m.SetToggleHotKey(e),t.preventDefault(),!1},e.prototype.setHoldHotKey_Cells=function(t){var e=this.getHotKeyFromKeyEvent(t,!0);return-2!=e&&t.item.m.SetHoldHotKey(e),t.preventDefault(),!1},e.prototype.setToggleHotKey_Game=function(t){var e=this.getHotKeyFromKeyEvent(t);return-2!=e&&t.item.m.SetToggleHotKey(e),t.preventDefault(),!1},e.prototype.setControlHotKey=function(t){var e=this.getHotKeyFromKeyEvent(t);return-2!=e&&t.item.m.SetHotKey(e),t.preventDefault(),!1},e.prototype.onConfigTextInput=function(t){c.gs.uconfig.SetValue(t.target.name,t.target.value)},e.prototype.onConfigCheckChanged=function(t){c.gs.uconfig.SetValue(t.target.name,t.target.checked)},e.prototype.rangeInputChanged=function(t){c.gs.uconfig.SetValue(t.target.name,t.target.value)},e.prototype.onResetButtonCliecked=function(){c.gs.uconfig.RecoverDefaultConfig()},r([s.template("\n<main-config-panel>\n\t<style>\n\t\t.panel_content_box{\n\t\t\theight: 632px;\n\t\t\toverflow-y: scroll;\n\t\t\tpadding: 10px;\n\t\t\tmargin-right: 4px;\n\t\t}\n\n\t\t.header_box{\n\t\t\theight: 48px;\n\t\t\tfont-size: 24px;\n\t\t\tpadding-left: 12px;\n\t\t\tline-height: 48px;\n\t\t}\n\n\t\t.content_column{\n\t\t\twidth: 380px;\n\t\t\tfloat: left;\n\t\t\tmargin: 0 8px;\n\t\t}\n\n\t\t.box_frame{\n\t\t\tborder: solid 1px;\n\t\t\tborder-radius: 5px;\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\n\t\t.box_header{\n\t\t\twidth: 100%;\n\t\t\tpadding-top: 2px;\n\t\t\tpadding-left: 5px;\n\t\t\tborder-radius: 3px 3px 0 0;\n\t\t\tfont-size: 20px;\n\t\t}\n\n\t\t.box_content{\n\t\t\tpadding: 5px 10px;\n\t\t}\n\n\t\t.td_text{\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.range_input{\n\t\t\twidth: 140px;\n\t\t\tvertical-align: top;\n\t\t}\n\n\t\ttd.centered{\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.ui_config{\n\t\t\theight: 28px;\n\t\t}\n\n\t\t.ui_checkbox{\n\t\t\twidth: 18px;\n\t\t\theight: 18px;\n\t\t\tvertical-align: middle;\n\t\t}\n\n\t\t.ui_hotkey_input{\n\t\t\twidth: 50px;\n\t\t\tborder: solid 1px #888;\n\t\t}\n\n\t\t.range_table td{\n\t\t\tpadding-right: 4px;\n\t\t\tfont-size: 15px;\n\t\t}\n\n\t\t.reset_button{\n\t\t\tfloat: right;\n\t\t\theight: 28px;\n\t\t\tpadding: 2px;\n\t\t\tfont-family: Overpass;\n\t\t\tcursor: pointer;\n\t\t}\n\t</style>\n\t<div class=\"main_config_panel_root\">\n\t\t<div class=\"header_box\">\n\t\t\t<span>{utexts.hdrConfiguration}</span>\n\t\t</div>\n\t\t<div class=\"panel_content_box\">\n\t\t\t<div class='content_column'>\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe994</span><span>{utexts.hdrCellDisplay}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content'>\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan='2'></td>\n\t\t\t\t\t\t\t\t<td class='centered'>key1</td>\n\t\t\t\t\t\t\t\t<td class='centered'>key2</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr each={m in configHub.cellDisplayEntries}>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui_config ui_checkbox\" checked={m.value} onchange={checkChanged}> \n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class='td_text' style='width:220px'>{m.text}</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config ui_hotkey_input\" value={m.toggleHotKeyText} onkeydown={setToggleHotKey_Cells} />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config ui_hotkey_input\" value={m.holdHotKeyText} onkeydown={setHoldHotKey_Cells} />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<div style='height:5px' />\n\t\t\t\t\t\t<div if={isJapanese}>\n\t\t\t\t\t\t\t<div>key1：按下鍵時切換開/關</div>\n\t\t\t\t\t\t\t<div>key2：按住鍵時切換開/關</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div if={!isJapanese}>\n\t\t\t\t\t\t\t<div>key1:Option inverted when key press</div>\n\t\t\t\t\t\t\t<div>key2:Option inverted while key hold</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe994</span><span>{utexts.hdrGameDisplay}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content'>\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan='2'></td>\n\t\t\t\t\t\t\t\t<td if={false}>key1</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr each={m in configHub.gameDisplayEntries}>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui_config ui_checkbox\" checked={m.value} onchange={checkChanged}> \n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class='td_text'>{m.text}</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td if={false}>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config ui_hotkey_input\" value={m.toggleHotKeyText} onkeydown={setToggleHotKey_Game} />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class='content_column'>\n\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe994</span><span>{utexts.hdrBasicOperation}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content'>\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr each={m in configHub.basicBehaviorEntries}>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui_config ui_checkbox\" checked={m.value} onchange={checkChanged}> \n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class='entry_text'>{m.text}</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t<table class='range_table'>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtCameraZoomSpeed}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='75' max='125' step='1' name='CameraZoomSpeed' value={uconfig.CameraZoomSpeed} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td style='width:60px'>{uconfig.CameraZoomSpeed}%</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtCameraMovementSpeed}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='-25' max='75' step='1' name='CameraMovementSpeed' value={uconfig.CameraMovementSpeed} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td style='width:60px'>{uconfig.CameraMovementSpeed}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtInterpolationType}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0.0' max='2.0' step='1.0' name='InterpolationType' value={uconfig.InterpolationType} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td style='width:60px'>{usupport.InterpolationTypeText}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtInterpolationResponce}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='-0.5' max='1.0' step='0.01' name='InterpolationSpeed' value={uconfig.InterpolationSpeed} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td style='width:60px'>{usupport.InterpolationSpeedText}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtMarkerOpacity}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0.0' max='1.0' step='0.01' name='MarkerAlpha' value={uconfig.MarkerAlpha} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{uconfig.MarkerAlpha * 100 >> 0}%</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<td>{utexts.lbtCursorLineThickness}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='1.0' max='30.0' step='1.0' name='CursorLineThickness' value={uconfig.CursorLineThickness} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{uconfig.CursorLineThickness}px</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr if={true}>\n\t\t\t\t\t\t\t<td>{utexts.lbtPlayerCellsAlpha}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0.25' max='1.0' step='0.05' name='PlayerCellsAlpha' value={uconfig.PlayerCellsAlpha} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{uconfig.PlayerCellsAlpha}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<td>{utexts.lbtPelletCellsAlpha}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0.25' max='1.0' step='0.05' name='PelletCellsAlpha' value={uconfig.PelletCellsAlpha} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{uconfig.PelletCellsAlpha}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<td>{utexts.lbtAnotherSectionCellsAlpha}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0' max='1.0' step='0.05' name='AnotherSectionCellsAlpha' value={uconfig.AnotherSectionCellsAlpha} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{uconfig.AnotherSectionCellsAlpha}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr if={true}>\n\t\t\t\t\t\t\t<td>{utexts.lbtRenderQuality}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0' max='2' step='1' name='RenderQuality' value={uconfig.RenderQuality} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{usupport.RenderQualityText}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtCaptureDuration}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0' max='5' step='1' name='QuickCaptureTimeOption' value={uconfig.QuickCaptureTimeOption} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{usupport.QuickCaptureTimeSec}{appConfig.isJapanese ? '秒' : 'sec'}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{utexts.lbtFrameRate}</td>\n\t\t\t\t\t\t\t\t<td><input type='range' class='range_input' min='0' max='4' step='1' name='FrameRateOption' value={uconfig.FrameRateOption} oninput={rangeInputChanged}/></td>\n\t\t\t\t\t\t\t\t<td>{usupport.FrameRateText}%</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='box_frame' style='border-color: {cssColors.clPanelForeground}'>\n\t\t\t\t\t<div class='box_header' style='background-color: {cssColors.clPanelForeground}; color:{cssColors.clPanelHeader}'>\n\t\t\t\t\t　<span style='font-family: Overpass'>&#xe994</span><span>{utexts.hdrControl}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='box_content'>\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr each={m in configHub.controlEntries}>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class='td_text' style='width:220px'>\n\t\t\t\t\t\t\t\t\t\t{m.text}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"ui_config ui_hotkey_input\" value={m.hotKeyText} onkeydown={setControlHotKey} />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<input type='button' class='reset_button' value='{utexts.lbtResetConfig}' onclick={onResetButtonCliecked} />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</main-config-panel>\n")],e)}(s.Element);e.MainConfigPanelTag=h},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});for(var s="",a=0;a<30;a++)s+=`<div class="display material-button" id="skin${a}" onclick={ChangeSkin} style="position: relative; overflow: hidden;">\n            <div class="skins">\n                <div class="skin one" style="background-image: url('{ userEntry.infos[${a}].skinUrl }')"></div>\n                <div class="skin two" style="background-image: url('{ userEntry.infos[${a}].tabSkinUrl }')"></div>\n            </div>\n            <div class="nicks">\n                <div class="nick one">{ userEntry.infos[${a}].name }</div>\n                <div class="nick two">{ userEntry.infos[${a}].tabName }</div>\n            </div>\n        </div>`;var l=n(5),c=n(4),d=(a=n(2),n(0)),h=n(9),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uconfig=d.gs.uconfig,e.configHub=h.ConfigHub.instance,e.gstates=d.gs.gstates,e.gconfig=d.gs.gconfig,e.cssColors=d.gs.ucolors.cssColors,e.editModel=new h.ColorEditModel,e.siteTitle=a.AppConfigurator.instance.siteTitleString,e.appConfig=a.AppConfigurator.instance,e.userEntry=c.gameCore.userEntryMan,e.selectedTabName="home",e.isJapanese=a.AppConfigurator.instance.isJapanese,e.usupport=d.gs.usupport,e.utexts=d.gs.utexts,e.ws=c.gameCore.conn,e.node=c.gameCore.nodeMan}return o(e,t),e.prototype.selectTab=function(t){this.selectedTabName=t},e.prototype.isActive=function(t){return t==this.selectedTabName},e.prototype.mounted=function(){this.userEntry.indexChangedProc=this.update.bind(this),this.userEntry.skinChangedProc=this.update.bind(this)},e.prototype.inputText=function(t){this.userEntry.SetProp(t.target.name,t.target.value)},e.prototype.startPlay=function(t){return d.gs.gstates.setMainPanelVisible(!1),c.gameCore.StartPlay()},e.prototype.startSpectate=function(t){return d.gs.gstates.setMainPanelVisible(!1),c.gameCore.StartSpectate()},e.prototype.ChangeSkin=function(t){c.gameCore.userEntryMan.ChangeIndex(parseInt(t.currentTarget.id.replace("skin",""),10)),gVar.SkinsMenu=!0,this.clickSkinsMenu()},e.prototype.clickSettingsMenu=function(){gVar.SettingsMenu?$("#settings-menu").hide().css("opacity","0").css("display","none")&&(gVar.SettingsMenu=!1):$("#settings-menu").show().css("opacity","1").css("display","flex")&&(gVar.SettingsMenu=!0)},e.prototype.clickSkinsMenu=function(){gVar.SkinsMenu?$("#profiles-catalogue").hide().css("opacity","0").css("display","none")&&(gVar.SkinsMenu=!1):$("#profiles-catalogue").show().css("opacity","1").css("display","flex")&&(gVar.SkinsMenu=!0)},e.prototype.getHotKeyFromKeyEvent=function(t,e){if(void 0===e&&(e=!1),t.repated)return-2;var n=t.which;if(16==n||17==n||18==n||229==n)return-2;if(8==n||46==n)return-1;var i=t.keyCode;t.ctrlKey&&(i+=l.ModificationKeyCode.Ctrl),t.shiftKey&&(i+=l.ModificationKeyCode.Shift),t.altKey&&(i+=l.ModificationKeyCode.Alt);var o=this.configHub;return(e?o.controlEntries.every((function(t){return t.hotKey!=i}))&&o.gameDisplayEntries.every((function(t){return t.toggleHotKey!=i})):o.controlEntries.every((function(t){return t.hotKey!=i}))&&o.cellDisplayEntries.every((function(t){return t.toggleHotKey!=i&&t.holdHotKey!=i}))&&o.gameDisplayEntries.every((function(t){return t.toggleHotKey!=i})))?i:-2},e.prototype.setControlHotKey=function(t){var e=this.getHotKeyFromKeyEvent(t);return-2!=e&&t.item.m.SetHotKey(e),t.preventDefault(),!1},e.prototype.onConfigTextInput=function(t){d.gs.uconfig.SetValue(t.target.name,t.target.value)},e.prototype.optionChanged=function(t,e){t.item.m.SetValue(e)},e.prototype.colorChanged=function(t){var e=parseInt(this.ColorFromHtmlString(t.target.value)),n=t.target.name;return this.configHub.selectColorCard(n),t.item.m.SetColor(e),this.configHub.curColorEntry.SetColor(e,!0),this.appRoot.update(),!1},e.prototype.onConfigCheckChanged=function(t){var e="#"+t.item.m.key;$(e).toggleClass("on");var n=$(e).hasClass("on");this.optionChanged(t,n)},e.prototype.rangeInputChanged=function(t){d.gs.uconfig.SetValue(t.target.name,t.target.value)},e.prototype.FormatColorByte=function(t){var e=t.toString(16).toUpperCase();return 1==e.length&&(e="0"+e),e},e.prototype.ColorToHtmlString=function(t){var e=t>>16&255,n=t>>8&255,i=255&t;return console.log("#"+this.FormatColorByte(e)+this.FormatColorByte(n)+this.FormatColorByte(i)),"#"+this.FormatColorByte(e)+this.FormatColorByte(n)+this.FormatColorByte(i)},e.prototype.ColorFromHtmlString=function(t){if("#"!=t[0])return 0;var e=255,n=0,i=0,o=0;return 8==(t=t.slice(1,t.length)).length?(e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),o=parseInt(t.slice(6,8),16)):6==t.length?(n=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16)):4==t.length?(e=17*parseInt(t[0],16),n=17*parseInt(t[1],16),i=17*parseInt(t[2],16),o=17*parseInt(t[3],16)):3==t.length&&(n=17*parseInt(t[0],16),i=17*parseInt(t[1],16),o=17*parseInt(t[2],16)),isNaN(e)||isNaN(n)||isNaN(i)||isNaN(o)?0:e<<24|n<<16|i<<8|o},e.prototype.onInputButtonCliecked=function(){const t=document.querySelector("#input-Button");var e={};t.addEventListener("change",t=>{const n=new FileReader;n.addEventListener("loadend",t=>{const n=t.srcElement.result;(e=JSON.parse(n)).lwga11_user_config&&localStorage.setItem("lwga11_user_config",e.lwga11_user_config),e.profileExData&&localStorage.setItem("profileExData",e.profileExData),e.lwga_user_entries&&localStorage.setItem("lwga_user_entries",e.lwga_user_entries),e.lwga11_color_defs&&localStorage.setItem("lwga11_color_defs",e.lwga11_color_defs)}),n.readAsText(t.target.files[0])})},e.prototype.onOutputButtonCliecked=function(){var t={lwga11_user_config:localStorage.getItem("lwga11_user_config")??"",profileExData:localStorage.getItem("profileExData")??"",lwga_user_entries:localStorage.getItem("lwga_user_entries")??"",lwga11_color_defs:localStorage.getItem("lwga11_color_defs")??""};let e=JSON.stringify(t),n="data:application/json;charset=utf-8,"+encodeURIComponent(e),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","lwga-config.json"),i.click()},Object.defineProperty(e.prototype,"appRoot",{get:function(){return this.parent},enumerable:!0,configurable:!0}),r([l.template(`<main-panel>\n    <style>\n        .ps {\n            overflow: hidden !important;\n            overflow-anchor: none;\n            -ms-overflow-style: none;\n            touch-action: auto;\n            -ms-touch-action: auto\n        }\n\n        .ps__rail-x {\n            display: none;\n            opacity: 0;\n            transition: background-color .2s linear, opacity .2s linear;\n            -webkit-transition: background-color .2s linear, opacity .2s linear;\n            height: 15px;\n            bottom: 0px;\n            position: absolute\n        }\n\n        .ps__rail-y {\n            display: none;\n            opacity: 0;\n            transition: background-color .2s linear, opacity .2s linear;\n            -webkit-transition: background-color .2s linear, opacity .2s linear;\n            width: 15px;\n            right: 0;\n            position: absolute\n        }\n\n        .ps--active-x>.ps__rail-x,\n        .ps--active-y>.ps__rail-y {\n            display: block;\n            background-color: transparent\n        }\n\n        .ps:hover>.ps__rail-x,\n        .ps:hover>.ps__rail-y,\n        .ps--focus>.ps__rail-x,\n        .ps--focus>.ps__rail-y,\n        .ps--scrolling-x>.ps__rail-x,\n        .ps--scrolling-y>.ps__rail-y {\n            opacity: 0.6\n        }\n\n        .ps .ps__rail-x:hover,\n        .ps .ps__rail-y:hover,\n        .ps .ps__rail-x:focus,\n        .ps .ps__rail-y:focus,\n        .ps .ps__rail-x.ps--clicking,\n        .ps .ps__rail-y.ps--clicking {\n            background-color: #eee;\n            opacity: 0.9\n        }\n\n        .ps__thumb-x {\n            background-color: #aaa;\n            border-radius: 6px;\n            transition: background-color .2s linear, height .2s ease-in-out;\n            -webkit-transition: background-color .2s linear, height .2s ease-in-out;\n            height: 6px;\n            bottom: 2px;\n            position: absolute\n        }\n\n        .ps__thumb-y {\n            background-color: #aaa;\n            border-radius: 6px;\n            transition: background-color .2s linear, width .2s ease-in-out;\n            -webkit-transition: background-color .2s linear, width .2s ease-in-out;\n            width: 6px;\n            right: 2px;\n            position: absolute\n        }\n\n        .ps__rail-x:hover>.ps__thumb-x,\n        .ps__rail-x:focus>.ps__thumb-x,\n        .ps__rail-x.ps--clicking .ps__thumb-x {\n            background-color: #999;\n            height: 11px\n        }\n\n        .ps__rail-y:hover>.ps__thumb-y,\n        .ps__rail-y:focus>.ps__thumb-y,\n        .ps__rail-y.ps--clicking .ps__thumb-y {\n            background-color: #999;\n            width: 11px\n        }\n\n        @supports (-ms-overflow-style: none) {\n            .ps {\n                overflow: auto !important\n            }\n        }\n\n        @media screen and (-ms-high-contrast: active),\n        (-ms-high-contrast: none) {\n            .ps {\n                overflow: auto !important\n            }\n        }\n\n\n        @keyframes rainbow_background {\n\n            100%,\n            0% {\n                background-color: #ff4242\n            }\n\n            8% {\n                background-color: #ffa74f\n            }\n\n            16% {\n                background-color: #ffff67\n            }\n\n            25% {\n                background-color: #a3ff48\n            }\n\n            33% {\n                background-color: #46ff46\n            }\n\n            41% {\n                background-color: #50fda6\n            }\n\n            50% {\n                background-color: #55fcfc\n            }\n\n            58% {\n                background-color: #4aa3fc\n            }\n\n            66% {\n                background-color: #4242ff\n            }\n\n            75% {\n                background-color: #a54dfd\n            }\n\n            83% {\n                background-color: #ff4dff\n            }\n\n            91% {\n                background-color: #ff4ba5\n            }\n        }\n.control-bar {\n    position: fixed;\n    top: 50%;\n    left: 0%;\n    transform: translateY(-50%);\n    width: 100%;\n    height: 100px;\n    background: #222222;\n    display: flex;\n    justify-content: center;\n    user-select: none\n}\n\n.control-bar .buttons {\n    display: flex;\n    flex-direction: row;\n    transform: scale(1.06)\n}\n\n.control-bar .buttons .button {\n    width: 130px;\n    height: 100px;\n    background: linear-gradient(90deg, #333, #333, #6442ca, #6442ca);\n    transform: skewX(-10deg) scaleX(1);\n    transition: transform 0.2s ease-out;\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 2px;\n    position: relative;\n    overflow: hidden\n}\n\n.control-bar .buttons .button .inner {\n    transform: skewX(10deg) scaleX(1);\n    transition: transform 0.2s ease-out;\n    color: #ffffff;\n    text-align: center;\n    text-shadow: 0px 1px 5px rgba(0, 0, 0, 0.5);\n    pointer-events: none\n}\n\n.control-bar .buttons .button .inner .icon i {\n    font-size: 36px\n}\n\n.control-bar .buttons .button .inner .label {\n    font-family: 'Noto Sans', sans-serif;\n    font-weight: 600;\n    font-size: 12px;\n    text-transform: uppercase\n}\n\n.control-bar .buttons .button.left {\n    margin-right: -20px;\n    z-index: 4;\n    transform-origin: right;\n    background: #333333;\n    box-shadow: -1px 0px 1px rgba(0, 0, 0, 0.5)\n}\n\n.control-bar .buttons .button.left .inner {\n    transform: skewX(10deg) scaleX(1) translateX(-6px)\n}\n\n.control-bar .buttons .button.left:hover {\n    transform: skewX(-10deg) scaleX(1.15)\n}\n\n.control-bar .buttons .button.left:hover .inner {\n    transform: skewX(10deg) scaleX(0.87) translateX(-8px)\n}\n\n.control-bar .buttons .button.dummy {\n    width: 120px;\n    z-index: 4\n}\n\n.control-bar .buttons .button.right {\n    margin-left: -10px;\n    transform-origin: left;\n    box-shadow: 4px 0px 4px rgba(0, 0, 0, 0.2)\n}\n\n.control-bar .buttons .button.right .inner {\n    transform: skewX(10deg) scaleX(1) translateX(2px)\n}\n\n.control-bar .buttons .button.right:hover {\n    transform: skewX(-10deg) scaleX(1.15)\n}\n\n.control-bar .buttons .button.right:hover .inner {\n    transform: skewX(10deg) scaleX(0.87) translateX(3px)\n}\n\n.control-bar .buttons .button.right.one {\n    z-index: 4;\n    /* background:#6442ca; */\n    background: linear-gradient(90deg, #6442ca, #9C27B0);\n}\n\n.control-bar .buttons .button.right.one:hover~.button.right.two,\n.control-bar .buttons .button.right.one:hover~.button.right.three,\n.control-bar .buttons .button.right.one:hover~.button.right.four {\n    transform: skewX(-10deg) translateX(7px)\n}\n\n.control-bar .buttons .button.right.two {\n    z-index: 3;\n    /* background:#ef9010 */\n    background: linear-gradient(50deg, #ecef10, #ffa730);\n}\n\n.control-bar .buttons .button.right.two:hover~.button.right.three,\n.control-bar .buttons .button.right.two:hover~.button.right.four {\n    transform: skewX(-10deg) translateX(14px)\n}\n\n.control-bar .buttons .button.right.three {\n    z-index: 2;\n    /* background:#8fd80d; */\n    background: linear-gradient(45deg, #8fd80d, #00d81e);\n}\n\n.control-bar .buttons .button.right.three:hover~.button.right.four {\n    transform: skewX(-10deg) translateX(20px)\n}\n\n.control-bar .buttons .button.right.four {\n    z-index: 1;\n    /* background:#EC3098 */\n    background: linear-gradient(45deg, #EC3098, #dc0);\n}\n\n.control-bar .buttons .button.right.four .icon.on {\n    display: none\n}\n\n.control-bar .buttons .button.right.four .icon.off {\n    display: block\n}\n\n.control-bar .skin-preview-circle {\n    position: absolute;\n    left: 50%;\n    z-index: 10;\n    width: 100px;\n    height: 100px;\n    margin-left: -50px;\n    background: rgba(255, 255, 255, 0.3);\n    border-radius: 50%;\n    transform: translateX(-195px) scale(1.5);\n    transition: all 0.3s;\n    cursor: pointer\n}\n\n.control-bar .skin-preview-circle .container {\n    width: 92px;\n    height: 92px;\n    margin: 4px;\n    border-radius: 50%;\n    background-color: #ffffff;\n    display: flex;\n    padding: 3px;\n    box-sizing: border-box;\n    position: relative\n}\n\n.control-bar .skin-preview-circle .container .preview {\n    background-size: cover\n}\n\n.control-bar .skin-preview-circle .container #skin-preview-1 {\n    width: 86px;\n    height: 86px;\n    background-color: #999999;\n    border-radius: 42px;\n    animation: rainbow_background 20s infinite;\n    background-position-x: left\n}\n\n.control-bar .skin-preview-circle .container .divider {\n    width: 2px;\n    position: absolute;\n    left: 45px;\n    transform: scaleY(1.05);\n    height: 86px;\n    background-color: #ffffff;\n    opacity: 0;\n    z-index: 1;\n    transition: all 0.5s\n}\n\n.control-bar .skin-preview-circle .container #skin-preview-2 {\n    width: 43px;\n    position: absolute;\n    right: 3px;\n    height: 86px;\n    background-color: #999999;\n    border-radius: 0px 42px 42px 0px;\n    animation: rainbow_background 20s infinite;\n    background-position-x: right;\n    opacity: 0;\n    transition: all 0.5s\n}\n\n.control-bar .skin-preview-circle:hover {\n    transform: translateX(-195px) scale(1.6)\n}\n\n.control-bar[multibox=on] .buttons .button.right.four .inner .icon.on {\n    display: block\n}\n\n.control-bar[multibox=on] .buttons .button.right.four .inner .icon.off {\n    display: none\n}\n\n.control-bar[multibox=on] .skin-preview-circle .container .divider,\n.control-bar[multibox=on] .skin-preview-circle .container #skin-preview-2 {\n    opacity: 1\n}\n        .player-data-box {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            padding: 15px;\n            background-color: #151515;\n            transform: translate(-50%, 80px);\n            border-radius: 2px;\n            user-select: none\n        }\n\n        .player-data-box .input-row {\n            display: flex;\n            margin-bottom: 5px\n        }\n\n        .player-data-box .input-row .input-field {\n        caret-color: transparent;\n            border: none;\n            outline: none;\n            font-family: 'Overpass';\n            font-weight: 500;\n            background-color: #222222;\n            color: #ffffff;\n            height: 32px;\n            padding: 9px 7px;\n            box-sizing: border-box;\n            box-shadow: 0px 0px 1px #000000\n        }\n\n        .player-data-box #tag {\n            width: 75px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #code {\n            width: 50%;\n            margin-left: 5px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #Signature1 {\n            width: 75px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #nick1 {\n            width: 100px;\n            margin-left: 5px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #nick2 {\n            width:100px;\n            margin-left: 5px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #skin1 {\n            width: 50%;\n            margin-left: 5px;\n            transition: all 0.5s\n        }\n\n        .player-data-box #skin2 {\n            width: 50%;\n            margin-left: 5px;\n            transition: all 0.5s\n        }\n\n\n        .player-data-box .room-type-box {\n            display: flex;\n            margin-top: 4px\n        }\n\n        .player-data-box .room-type-box .dropdown {\n            width: 100px;\n            display: flex;\n            flex-direction: row;\n            font-family: 'Overpass';\n            background: #151515;\n            color: #ffffff;\n            padding: 4px;\n            height: 32px;\n            box-sizing: border-box;\n            padding-left: 10px;\n            position: relative;\n            cursor: pointer;\n            user-select: none\n        }\n\n        .player-data-box .room-type-box .dropdown .selected {\n            font-size: 13px;\n            font-weight: 500;\n            line-height: 24px;\n            vertical-align: middle;\n            flex-grow: 1;\n            overflow: hidden\n        }\n\n        .player-data-box .room-type-box .dropdown .arrow {\n            vertical-align: middle\n        }\n\n        .player-data-box .room-type-box .dropdown .arrow i {\n            font-size: 20px;\n            line-height: 24px\n        }\n\n        .player-data-box .room-type-box .dropdown .list {\n            position: absolute;\n            top: 32px;\n            left: 0px;\n            min-width: 100%;\n            max-height: 85px;\n            overflow: hidden;\n            display: none;\n            background-color: #333333\n        }\n\n        .player-data-box .room-type-box .dropdown .list .item {\n            font-size: 12px;\n            font-weight: 500;\n            font-family: 'Overpass';\n            padding: 5px 10px\n        }\n\n        .player-data-box .room-type-box .dropdown .list .item:hover {\n            background-color: #444444\n        }\n\n        .player-data-box .room-type-box .dropdown:hover .list {\n            display: block\n        }\n\n        .player-data-box #gamemode {\n            width: 85px\n        }\n\n        .player-data-box #region {\n            width: 195px;\n            margin-left: 5px\n        }\n\n        .player-data-box .decorator {\n            width: 100%;\n            height: 72px;\n            position: absolute;\n            bottom: 0px;\n            left: 0px;\n            background-color: #222222;\n            border-radius: 0px 0px 2px 2px;\n            z-index: -1\n        }\n\n        #profiles-catalogue {\n            position: absolute;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%;\n            display: none;\n            align-items: center;\n            justify-content: center;\n            opacity: 0;\n            transition: opacity 0.5s;\n            background-color: rgba(0, 0, 0, 0.5)\n        }\n\n        #profiles-catalogue #close-profiles-catalogue {\n            color: #ffffff;\n            position: absolute;\n            right: 20px;\n            top: 60px;\n            cursor: pointer;\n            user-select: none\n        }\n\n        #profiles-catalogue #close-profiles-catalogue i {\n            font-size: 48px;\n            background-color: rgba(255, 255, 255, 0);\n            transition: all 0.5s\n        }\n\n        #profiles-catalogue #close-profiles-catalogue i:hover {\n            background-color: rgba(255, 255, 255, 0.12)\n        }\n\n\n        #profiles-catalogue .container {\n            display: flex;\n            flex-direction: row;\n            flex-wrap: wrap;\n            width: 680px;\n            height: 680px;\n            overflow:auto\n        }\n\n        #profiles-catalogue .container .display {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            width: 200px;\n            height: 200px;\n            margin: 10px;\n            background-color: rgba(255, 255, 255, 0);\n            transition: all 0.5s;\n            user-select: none;\n            cursor: pointer\n        }\n\n        #profiles-catalogue .container .display .skins {\n            display: flex;\n            flex-direction: row;\n            pointer-events: none;\n            justify-content: center\n        }\n\n        #profiles-catalogue .container .display .skins .skin {\n            background-image: url(https://i.imgur.com/ISgELNX.png);\n            background-size: cover;\n            width: 86px;\n            height: 86px;\n            margin: 5px;\n            border-radius: 50%;\n            border: 1px solid #ffffff;\n            background-color: rgba(255, 255, 255, 0.5);\n            animation: rainbow_background 20s infinite\n        }\n\n        #profiles-catalogue .container .display .skins .skin.one {\n            display: none\n        }\n\n        #profiles-catalogue .container .display .skins .skin.two {\n            display: none\n        }\n\n        #profiles-catalogue .container .display .nicks {\n            display: flex;\n            flex-direction: row;\n            pointer-events: none;\n            margin-top: 10px;\n            height: 23px\n        }\n\n        #profiles-catalogue .container .display .nicks .nick {\n            flex-grow: 1;\n            color: #ffffff;\n            font-family: 'Overpass';\n            font-weight: 500;\n            text-align: center;\n            white-space: nowrap;\n            pointer-events: none;\n            overflow: hidden\n        }\n\n        #profiles-catalogue .container .display .nicks .nick.one {\n            display: none\n        }\n\n        #profiles-catalogue .container .display .nicks .nick.two {\n            display: none\n        }\n\n        #profiles-catalogue .container .display:hover {\n            background-color: rgba(255, 255, 255, 0.12)\n        }\n\n        #profiles-catalogue[multibox=on] .container .display .skins .skin.one {\n            display: block\n        }\n\n        #profiles-catalogue[multibox=on] .container .display .skins .skin.two {\n            display: block\n        }\n\n        #profiles-catalogue[multibox=on] .container .display .nicks .nick {\n            max-width: 50%\n        }\n\n        #profiles-catalogue[multibox=on] .container .display .nicks .nick.one {\n            display: block\n        }\n\n        #profiles-catalogue[multibox=on] .container .display .nicks .nick.two {\n            display: block\n        }\n\n        #profiles-catalogue[multibox=off][primary=facebook] .container .display .skins .skin.one {\n            width: 120px;\n            height: 120px;\n            display: block\n        }\n\n        #profiles-catalogue[multibox=off][primary=facebook] .container .display .nicks .nick.one {\n            display: block\n        }\n\n        #profiles-catalogue[multibox=off][primary=google-plus] .container .display .skins .skin.two {\n            width: 120px;\n            height: 120px;\n            display: block\n        }\n\n        #profiles-catalogue[multibox=off][primary=google-plus] .container .display .nicks .nick.two {\n            display: block\n        }\n\n        #settings-menu {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            width: 500px;\n            height: 550px;\n            background: #090909;\n            box-shadow: 0px 0px 10px #000;\n            border-radius: 2px;\n            transform: translate(-50%, -50%);\n            display: none;\n            flex-direction: row;\n            opacity: 0;\n            transition: opacity 0.5s;\n            user-select: none\n        }\n\n        #settings-menu #close-settings-menu {\n            color: #909090;\n            position: absolute;\n            z-index: 500;\n            right: 0px;\n            top: -24px;\n            background: #090909;\n            padding: 2px 24px;\n            display: flex;\n            cursor: pointer;\n        }\n\n        #settings-menu #close-settings-menu i {\n            pointer-events: none;\n            font-size: 20px\n        }\n\n        #settings-menu .navigation {\n            display: flex;\n            flex-grow: 0;\n            flex-basis: 140px;\n            flex-direction: column\n        }\n\n        #settings-menu .navigation .tab {\n            display: flex;\n            padding: 9px 18px;\n            font-size: 15px;\n            font-family: 'Overpass';\n            text-transform: uppercase;\n            color: #e0e0e0;\n            background-color: #090909;\n            cursor: pointer;\n            transition: all 0.5s\n        }\n\n        #settings-menu .navigation .tab i {\n            font-size: 18px;\n            margin-right: 5px;\n            pointer-events: none;\n            line-height: 22px\n        }\n\n        #settings-menu .navigation .tab:first-child {\n            margin-top: 8px\n        }\n\n        #settings-menu .navigation .tab:hover {\n            background-color: #191919\n        }\n\n        #settings-menu .navigation .tab.active {\n            background-color: #191919\n        }\n\n        #settings-menu .options-list {\n            flex-grow: 0;\n            flex-basis: 360px;\n            display: flex;\n            flex-direction: column;\n            background-color: #222222;\n            position: relative;\n            overflow: auto;\n        }\n\n        #settings-menu .options-list::-webkit-scrollbar {\n            width: 12px;\n            background-color: #222222;\n        }\n\n        #settings-menu .options-list::-webkit-scrollbar-thumb {\n            border-radius: 10px;\n            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);\n            background-color: #555;\n        }\n\n        #settings-menu .options-list::-webkit-scrollbar-track {\n            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n            border-radius: 10px;\n            background-color: #222222;\n        }\n        #profiles-catalogue .container::-webkit-scrollbar {\n            width: 12px;\n            background-color: #222222;\n        }\n\n        #profiles-catalogue .container::-webkit-scrollbar-thumb {\n            border-radius: 10px;\n            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);\n            background-color: #555;\n        }\n\n        #profiles-catalogue .container::-webkit-scrollbar-track {\n            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n            border-radius: 10px;\n            background-color: #222222;\n        }\n\n        #settings-menu .options-list .ps__rail-y {\n            background-color: #090909;\n            width: 6px;\n            opacity: 1\n        }\n\n        #settings-menu .options-list .ps__rail-y .ps__thumb-y {\n            background-color: #555555;\n            width: 6px;\n            right: 0px;\n            border-radius: 0px\n        }\n\n        #settings-menu .options-list div[category] {\n            display: none\n        }\n\n        #settings-menu .options-list div[category].active {\n            display: block\n        }\n\n        #settings-menu .options-list .seperator {\n            background: #090909;\n            height: 4px;\n            width: 100%\n        }\n\n        #settings-menu .options-list .option {\n            display: flex;\n            flex-direction: row;\n            padding: 10px 12px;\n            transition: all 0.4s;\n        }\n\n        #settings-menu .options-list .option .name {\n            flex-grow: 1;\n            font-family: 'Overpass';\n            font-weight: 500;\n            font-size: 14px;\n            line-height: 20px;\n            color: #ffffff\n        }\n\n        #settings-menu .options-list .option .ud-button {\n            flex-grow: 1;\n            margin: 2px;\n            display: flex;\n            flex-direction: row;\n            background: linear-gradient(145deg, #f46b45, #eea849);\n            outline: none;\n            border: none;\n            color: #ffffff;\n            justify-content: center;\n            align-items: center;\n            font-size: 12px;\n            font-family: 'Overpass';\n            font-weight: 600;\n            text-transform: uppercase;\n            border-radius: 2px;\n            padding: 8px;\n            cursor: pointer\n        }\n\n        #settings-menu .options-list .option .ud-button i {\n            pointer-events: none;\n            line-height: 17px;\n            font-size: 18px;\n            margin-right: 4px\n        }\n\n        #settings-menu .options-list .option:hover {\n            background-color: #111111\n        }\n\n        #settings-menu .options-list .toggle .box {\n            width: 40px;\n            height: 20px;\n            padding: 3px;\n            box-sizing: border-box;\n            border-radius: 10px;\n            transition: all 0.4s;\n            background-color: #444444;\n            cursor: pointer\n        }\n\n        #settings-menu .options-list .toggle .box .ball {\n            background-color: #222222;\n            width: 14px;\n            height: 14px;\n            margin-left: 0px;\n            border-radius: 50%;\n            transition: all 0.4s\n        }\n\n        #settings-menu .options-list .toggle.on .box {\n            background-color: #ff8b09\n        }\n\n        #settings-menu .options-list .toggle.on .box .ball {\n            background-color: #ffffff;\n            margin-left: 20px\n        }\n\n        #settings-menu .options-list .range {\n            flex-wrap: wrap\n        }\n\n        #settings-menu .options-list .range .value {\n            margin-left: 8px;\n            padding: 0px 6px;\n            font-family: 'Overpass';\n            font-weight: 400;\n            text-transform: uppercase;\n            font-size: 14px;\n            line-height: 20px;\n            color: #dddddd;\n            background-color: #555555;\n            border-radius: 9px\n        }\n\n        #settings-menu .options-list .range .box {\n            display: flex;\n            margin-top: 5px;\n            width: 100%;\n            position: relative\n        }\n\n        #settings-menu .options-list .range .box input[type=range] {\n            width: 100%;\n            height: 20px;\n            background: transparent;\n            margin: 0px;\n            z-index: 1;\n            -webkit-appearance: none\n        }\n\n        #settings-menu .options-list .range .box input[type=range]:focus {\n            outline: none\n        }\n\n        #settings-menu .options-list .range .box input[type=range]::-webkit-slider-runnable-track {\n            width: 100%;\n            height: 0px;\n            cursor: pointer;\n            background: transparent;\n            border-radius: 5px\n        }\n\n        #settings-menu .options-list .range .box input[type=range]::-webkit-slider-thumb {\n            box-shadow: 0px 0px 1px #000000;\n            height: 20px;\n            width: 20px;\n            border-radius: 10px;\n            background: #ffffff;\n            cursor: pointer;\n            -webkit-appearance: none;\n            margin-top: -10px\n        }\n\n        #settings-menu .options-list .range .box .progress-bar {\n            position: absolute;\n            width: 100%;\n            height: 10px;\n            margin-top: 5px;\n            border-radius: 5px;\n            background-color: #444444;\n            display: flex;\n            flex-direction: row;\n            overflow: hidden;\n            padding: 0px 10px;\n            box-sizing: border-box\n        }\n\n        #settings-menu .options-list .range .box .progress-bar .fill {\n            width: 40%;\n            height: 100%;\n            margin-left:-10px;\n            background: #ff8b0a\n        }\n\n        #settings-menu .options-list .drop-down {\n            justify-content: center\n        }\n\n        #settings-menu .options-list .drop-down .box {\n            display: flex;\n            flex-direction: row;\n            color: #ffffff;\n            position: relative;\n            cursor: pointer\n        }\n\n        #settings-menu .options-list .drop-down .box .selected {\n            flex-grow: 1;\n            line-height: 20px;\n            font-family: 'Overpass';\n            font-weight: 400;\n            font-size: 14px\n        }\n\n        #settings-menu .options-list .drop-down .box .arrow {\n            display: flex;\n            justify-content: center\n        }\n\n        #settings-menu .options-list .drop-down .box .arrow i {\n            line-height: 20px\n        }\n\n        #settings-menu .options-list .drop-down .box .list {\n            position: absolute;\n            top: 20px;\n            right: 0px;\n            background-color: #555555;\n            display: none;\n            z-index: 10;\n            box-shadow: 0px 0px 5px #111111\n        }\n\n        #settings-menu .options-list .drop-down .box .list .item {\n            padding: 8px;\n            font-family: 'Overpass' font-weight: 400;\n            font-size: 14px;\n            white-space: nowrap;\n            transition: all 0.4s\n        }\n\n        #settings-menu .options-list .drop-down .box .list .item:hover {\n            background-color: #444444\n        }\n\n        #settings-menu .options-list .drop-down .box:hover .list {\n            display: block\n        }\n\n        #settings-menu .options-list .input {\n            display: flex;\n            flex-direction: column\n        }\n\n        #settings-menu .options-list .input input {\n            margin-top: 5px;\n            outline: none;\n            border: none;\n            border-radius: 2px;\n            background-color: #444444;\n            color: #ffffff;\n            padding: 6px;\n            font-family: 'Overpass';\n            font-weight: 400;\n            font-size: 14px\n        }\n\n        #settings-menu .options-list .colorpicker {\n            align-content: center\n        }\n\n        #settings-menu .options-list .colorpicker .name {\n            line-height: 29px\n        }\n\n        #settings-menu .options-list .colorpicker input {\n            width: 60px;\n            outline: none;\n            border: none;\n            border-radius: 2px 0px 0px 2px;\n            background-color: #444444;\n            color: #ffffff;\n            padding: 5px;\n            font-family: 'Overpass';\n            font-weight: 400;\n            font-size: 14px;\n            align-self: center\n        }\n\n        #settings-menu .options-list .colorpicker .color-preview {\n            width: 29px;\n            height: 29px;\n            background-color: #ffaa00;\n            border: 6px solid #383838;\n            border-radius: 0px 2px 2px 0px;\n            box-sizing: border-box;\n            cursor: pointer\n        }\n\n        #settings-menu .options-list .hotkey {\n            align-content: center\n        }\n\n        #settings-menu .options-list .hotkey input {\n            width: 70px;\n            outline: none;\n            border: 2px solid #444;\n            border-radius: 1px;\n            background-color: #333333;\n            color: transparent;\n            text-shadow: 0 0 0 #999999;\n            font-family: 'Overpass' font-weight: 400;\n            font-size: 14px;\n            text-align: center;\n            cursor: pointer;\n            user-select: none;\n            transition: all 0.4s\n        }\n\n        #settings-menu .options-list .hotkey input:focus {\n            border: 2px solid #888888\n        }\n\n        #settings-menu .options-list.ps--active-y .option {\n            margin-right: 6px\n        }\n\n        #menu {\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%;\n            opacity: 1;\n            transition: opacity 0.5s;\n        }\n\n\n        .material-ripple {\n            background-color: #ffffff;\n            border-radius: 50%;\n            width: 100px;\n            height: 100px;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            pointer-events: none;\n            opacity: 0.35;\n            transform: scale(0);\n            transition: all 1.25s ease-out\n        }\n\n        body {\n            margin: 0px;\n            padding: 0px;\n            overflow: hidden;\n            background: #000000\n        }\n\n        #screen {\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%\n        }\n\n\n\n        #backOverlay {\n            background-color: rgba(0, 0, 0, 0.5);\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            z-index: 900;\n            display: none;\n        }\n\n        #rbbLoader {\n            height: 140px;\n            width: 700px;\n            text-align: center;\n            line-height: 140px;\n            margin: auto;\n            font-size: 27px;\n            color: white;\n            background: rgb(44, 44, 44);\n            border-radius: 5px;\n            z-index: 1000;\n            position: absolute;\n            left: 0;\n            right: 0;\n            display: none;\n            top: 0;\n            bottom: 0;\n            margin: auto;\n        }\n.gradient-border {\n  --borderWidth: 3px;\n  background: #1D1F20;\n  position: relative;\n  border-radius: var(--borderWidth);\n}\n.gradient-border:after {\n  content: '';\n  position: absolute;\n  top: calc(-1 * var(--borderWidth));\n  left: calc(-1 * var(--borderWidth));\n  height: calc(100% + var(--borderWidth) * 2);\n  width: calc(100% + var(--borderWidth) * 2);\n  background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);\n  border-radius: calc(2 * var(--borderWidth));\n  z-index: -1;\n  animation: animatedgradient 3s ease alternate infinite;\n  background-size: 300% 300%;\n}\n    @keyframes animatedgradient {\n\t0% {\n\t\tbackground-position: 0% 50%;\n\t}\n\t50% {\n\t\tbackground-position: 100% 50%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 50%;\n\t}\n}\n        #player-count-hud {\n            position: fixed;\n            right: 10px;\n            top: 240px;\n            color: #ffffff;\n            background-color: rgba(10, 10, 10, 0.8);\n            font-size: 12px;\n            font-family: 'Overpass';\n            padding: 4px 8px;\n            border-radius: 2px;\n            white-space: pre;\n            display: none;\n            align-items: center;\n            transform-origin: top right;\n            user-select: none;\n            opacity: 1;\n        }\n    </style>\n    <div class="main_panel_root" style="color: {cssColors.clPanelForeground}">\n    <div show={gstates.isMainPanelVisible} id="menu" style="opacity: 1; display: block;">\n        <div class="control-bar" multibox="on" style="\n    width: 100%;\n">\n            <div class="buttons">\n                <div class="button left" id="open-settings-menu" onclick={clickSettingsMenu}>\n                    <div class="inner">\n                        <div class="icon"><i class="material-icons md-36">settings_applications</i></div>\n                        <div class="label">Settings</div>\n                    </div>\n                </div>\n                <div class="button left" multibox="on" id="open-profiles-catalogue" onclick={clickSkinsMenu} style="width: 275px;transform: none;background: none;height: 166%;margin-top: -35px;box-shadow: none;z-index: 10;margin-right: -20px;margin-left: -15px;">\n                    <div class="skin-preview-circle" style="margin-left: 90px;z-index: 11;">\n                        <div class="container">\n                            <div class="preview" id="skin-preview-1" style="background-image: url({userEntry.curInfo.skinUrl})"></div>\n                        </div>\n                    </div>\n                    <div class="skin-preview-circle" style="margin-left: 200px;">\n                        <div class="container">\n                            <div class="preview" id="skin-preview-1" style="background-image: url({userEntry.curInfo.tabSkinUrl})"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="button right one gradient-border" id="play" onclick={startPlay}>\n                    <div class="inner">\n                        <div class="icon"><i class="material-icons">play_circle_filled</i></div>\n                        <div class="label">Play</div>\n                    </div>\n                </div>\n                <div class="button right two" id="spectate" onclick={startSpectate}>\n                    <div class="inner">\n                        <div class="icon"><i class="material-icons">camera</i></div>\n                        <div class="label">Spectate</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="player-data-box" style="z-index:-1;position: absolute;top: 50%;width: 530px;left: 49%;padding-top: 60px;padding-right: 15px;padding-left: 15px;padding-bottom: 5px;background-color: #151515e0;transform: translate(-50%, 33%) skewX(-10deg) scaleX(1);height: 165px;">\n            <div class="decorator" style="position: absolute;left: 0px;height: 120%;width: 100%;padding-top: 15px;padding-right: 15px;padding-left: 15px;padding-bottom: 15px;bottom: 100%;background-color: #51595ba1;background: linear-gradient(180deg, #51595ba1 60%, #151515e0 40%);">\n                <div class="input-row">\n                    <div class="input-row">\n                        <div style="transform: skewX(10deg) scaleX(1);font-Size: 26px;width: 410px;height: 48px;">SenpaiMod+</div>\n                    </div><input class="input-field" id="Signature1" placeholder="Sig 1" maxlength="10" name="usig" value="{userEntry.curInfo.usig}" oninput={inputText} style="margin-top: 15px;"> </div>\n            </div>\n            <div class="input-row" style="margin-bottom: 15px;"><input class="input-field" id="tag" placeholder="Tag" maxlength="10" name="team" oninput={inputText} value={userEntry.curInfo.team} style=" width: 65px; "> <input class="input-field" id="code" placeholder="Code" maxlength="10" name="code" oninput={inputText} value="{userEntry.curInfo.code}" style=" width: 75px; "><input class="input-field" id="nick1" placeholder="Nick 1" maxlength="14" name="name" oninput={inputText} value={userEntry.curInfo.name} style=" width: 40%; "> <input class="input-field" id="skin1" placeholder="Skin URL 1" name="skinUrl" oninput={inputText} value={userEntry.curInfo.skinUrl}></div>\n            <div class="input-row" style="margin-bottom: 18px;"><input class="input-field" id="tag" placeholder="Tag 2" maxlength="10" name="tabTeam" oninput={inputText} value={userEntry.curInfo.tabTeam} style=" width: 65px; "> <input class="input-field" id="code" placeholder="Code2" maxlength="10" name="tabCode" oninput={inputText} value="{userEntry.curInfo.tabCode}" style=" width: 75px; "><input class="input-field" id="nick2" placeholder="Nick 2" maxlength="14" name="tabName" oninput={inputText} value={userEntry.curInfo.tabName} style=" width: 40%; "> <input class="input-field" id="skin2" placeholder="Skin URL 2" name="tabSkinUrl" oninput={inputText} value={userEntry.curInfo.tabSkinUrl} style=" width: 50%; "></div>\n        </div>\n    </div>\n        <div id="settings-menu" show={gstates.isMainPanelVisible} style="display: none; opacity: 0;">\n            <div id="settings-menu" style="opacity: 1; display: flex;">\n                <div id="close-settings-menu" onclick={clickSettingsMenu}><i class="material-icons">close</i></div>\n                <div class="navigation">\n                    <div onclick="$('.active').removeClass('active');$(this).toggleClass('active');$('#cell').toggleClass('active');" class="tab material-button active" category="cell" style="position: relative; overflow: hidden;"><i class="material-icons">radio_button_unchecked</i> cell</div>\n                    <div onclick="$('.active').removeClass('active');$(this).toggleClass('active');$('#game').toggleClass('active');" class="tab material-button" category="game" style="position: relative; overflow: hidden;"><i class="material-icons">games</i> game</div>\n                    <div onclick="$('.active').removeClass('active'),$(this).toggleClass('active'),$('#basic').toggleClass('active')" class="tab material-button" category="basic" style="position: relative; overflow: hidden;"><i class="material-icons">data_object</i> basic</div>\n                    <div onclick="$('.active').removeClass('active');$(this).toggleClass('active');$('#controls').toggleClass('active');" class="tab material-button" category="controls" style="position: relative; overflow: hidden;"><i class="material-icons">keyboard</i> controls</div>\n                    <div onclick="$('.active').removeClass('active');$(this).toggleClass('active');$('#colors').toggleClass('active');" class="tab material-button" category="colors" style="position: relative; overflow: hidden;"><i class="material-icons">palette</i> colors</div>\n                </div>\n                <div class="options-list">\n                    <div id="cell" category="cell" class="active">\n                        <div class='box_content'>\n                            <div each={m in configHub.cellDisplayEntries} id="{m.key}" class="option toggle {m.value && " on "}" onclick={onConfigCheckChanged}>\n                                <div class="name">{m.text}</div>\n                                <div class="box">\n                                    <div class="ball"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="game" category="game">\n                        <div class='box_content'>\n                            <div each={m in configHub.gameDisplayEntries} id="{m.key}" class="option toggle {m.value && " on "}" onclick={onConfigCheckChanged}>\n                                <div class="name">{m.text}</div>\n                                <div class="box">\n                                    <div class="ball"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="basic" category="basic">\n                        <div class='box_content'>\n                            <div each={m in configHub.basicBehaviorEntries} id="{m.key}" class="option toggle {m.value && " on "}" onclick={onConfigCheckChanged}>\n                                <div class="name">{m.text}</div>\n                                <div class="box">\n                                    <div class="ball"></div>\n                                </div>\n                            </div>\n                            <div class="option range">\n                                <div class="name">{utexts.lbtInterpolationResponce}</div>\n                                <div class="value">{usupport.InterpolationSpeedText}</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div id="fill" class="fill" style="width: {usupport.InterpolationSpeedWidth};"></div>\n                                    </div><input type='range' id="Interpolation" class='range_input' min='-0.5' max='1.0' step='0.01' name='InterpolationSpeed' value={uconfig.InterpolationSpeed} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtInterpolationType}</div>\n                                <div class="value">{usupport.InterpolationTypeText}</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.InterpolationType*50}%;"></div>\n                                    </div><input type='range' class='range_input' min='0.0' max='2.0' step='1.0' name='InterpolationType' value={uconfig.InterpolationType} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtMarkerOpacity}</div>\n                                <div class="value">{uconfig.MarkerAlpha * 100 >> 0}%</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.MarkerAlpha * 100+5}%;"></div>\n                                    </div><input type='range' class='range_input' min='0.0' max='1.0' step='0.1' name='MarkerAlpha' value={uconfig.MarkerAlpha} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtPlayerCellsAlpha}</div>\n                                <div class="value">{uconfig.PlayerCellsAlpha * 100 >> 0}%</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.PlayerCellsAlpha * 100}%;"></div>\n                                    </div><input type='range' class='range_input' min='0.0' max='1.0' step='0.01' name='PlayerCellsAlpha' value={uconfig.PlayerCellsAlpha} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtCursorLineThickness}</div>\n                                <div class="value">{uconfig.CursorLineThickness}px</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.CursorLineThickness*5}%;"></div>\n                                    </div><input type='range' class='range_input' min='1.0' max='20.0' step='1.0' name='CursorLineThickness' value={uconfig.CursorLineThickness} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtMarkerThickness}</div>\n                                <div class="value">{uconfig.MarkerThickness}px</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.MarkerThickness*5}%;"></div>\n                                    </div><input type='range' class='range_input' min='1.0' max='20.0' step='1.0' name='MarkerThickness' value={uconfig.MarkerThickness} oninput={rangeInputChanged}/></div>\n                            </div>\n\n                            <div class="option range">\n                                <div class="name">{utexts.lbtAnotherSectionCellsAlpha}</div>\n                                <div class="value">{uconfig.AnotherSectionCellsAlpha}</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.AnotherSectionCellsAlpha*100}%;"></div>\n                                    </div><input type='range' class='range_input' min='0' max='1.0' step='0.05' name='AnotherSectionCellsAlpha' value={uconfig.AnotherSectionCellsAlpha} oninput={rangeInputChanged}/></div>\n                            </div>\n                            <div class="option range">\n                                <div class="name">{utexts.lbtmassBugLatency}</div>\n                                <div class="value">{uconfig.massBugLatency}</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.massBugLatency*25}%;"></div>\n                                    </div><input type='range' class='range_input' min='0' max='4.0' step='0.01' name='massBugLatency' value={uconfig.massBugLatency} oninput={rangeInputChanged}/></div>\n                            </div>\n                            <div class="option range">\n                                <div class="name">{utexts.lbtRenderOffset}</div>\n                                <div class="value">{uconfig.RenderOffset}</div>\n                                <div class="box">\n                                    <div class="progress-bar">\n                                        <div class="fill" style="width: {uconfig.RenderOffset*100}%;"></div>\n                                    </div><input type='range' class='range_input' min='0' max='1.0' step='0.01' name='RenderOffset' value={uconfig.RenderOffset} oninput={rangeInputChanged}/></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="controls" category="controls">\n                        <div class='box_content'>\n                            <div each={m in configHub.controlEntries} class="option hotkey">\n                                <div class="name">{m.text}</div><input type=text value={m.hotKeyText} onkeydown={setControlHotKey}></div>\n                        </div>\n                    </div>\n                    <div id="colors" category="colors">\n                        <div class='box_content'>\n                            <div each={m in configHub.colorEntries} class="option colorpicker">\n                                <div class="name">{m.text}</div><input value={m.htmlColor} name={m.key} oninput={colorChanged}>\n                                <div class="color-preview" style="background-color: {m.htmlColor};"></div>\n                            </div>\n                            <div class="option colorpicker"><div class="name">Background</div><input type=text style="width: 70%;" name="fieldBackImageUri"value={uconfig.fieldBackImageUri} onchange={onConfigTextInput}/></div>\n                            <div class="option colorpicker"><div class="name">{utexts.lbtInputConfig}</div><input type='file' class='input_button' id="input-Button" onclick={onInputButtonCliecked} data-target="file-uploader" accept="application/JSON"/></div>\n                            <div class="option colorpicker"><div class="name">{utexts.lbtOutputConfig}</div><input type='button' class='output_button' value='{utexts.lbtOutputConfig}' onclick={onOutputButtonCliecked}/></div>\n                            <div class="option colorpicker"><div class="name">{utexts.lbtResetConfig}</div><input type='button' class='reset_button' value='{utexts.lbtResetConfig}' onclick={onResetButtonCliecked}/></div>\n                        </div>\n                    </div>\n                    <div class="ps__rail-x" style="left: 0px; bottom: 0px;">\n                        <div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div>\n                    </div>\n                    <div class="ps__rail-y" style="top: 0px; right: 0px;">\n                        <div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="profiles-catalogue" multibox="on" primary="facebook" show={gstates.isMainPanelVisible} style="display: none; opacity: 0;">\n        <div id="close-profiles-catalogue" onclick={clickSkinsMenu}><i class="material-icons material-button" style="position: relative; overflow: hidden;">close</i></div>\n        <div class="container">\n            ${s}\n        </div>\n    </div>\n</main-panel>`)],e)}(l.Element);e.MainPanelTag=p},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(4),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=a.gameCore.serverListModel,e}return o(e,t),e.prototype.mounted=function(){this.model.Notify=this.update.bind(this)},e.prototype.onServerEntryClicked=function(t){this.model.ConnectToServer(t.item.info)},r([s.template("\n<server-list-root>\n\t<style>\n\t\tul, li{\n\t\t\tlist-style:none;\n\t\t}\n\t\t\n\t\t.base{\n\t\t\twidth: 210px;\n\t\t\theight: 470px;\n\t\t\toverflow-y: scroll;\n\t\t\toverflow-x: hidden;\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t\n\t\t.inner{\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\tpadding: 6px;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t\n\t\t.card0{\n\t\t\tborder: solid 2px #F60;\n\t\t\tbackground-color: #F7A;\n\t\t\tborder-color: #F39;\n\t\t\twidth: 190px;\n\t\t\theight: 62px;\n\t\t\tmargin-bottom: 4px;\n\t\t\tposition: relative;\n\t\t\tcolor: #FFF;\n\t\t\tfont-family: Overpass;\n\t\t}\n\n\t\t.card_selected{\n\t\t\tbackground-color: #F06;\n\t\t\tborder-color: #D04;\n\t\t}\n\t\t\n\t\t.cover{\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.cover:hover{\n\t\t\tbackground-color: rgba(255, 0, 128, 0.2);\n\t\t}\n\t\t\n\t\t.serverName{\n\t\t\tfont-size: 26px;\n\t\t\tline-height: 26px;\n\t\t}\n\n\t\t.infoPart{\n\t\t\tfont-size: 18px;\n\t\t\toverflow: none;\n\t\t}\n\n\t\t.info_region{\n\t\t\tfloat: left;\n\t\t\twidth: 100px;\n\t\t}\n\t\t\n\t\t.info_users{\n\t\t\tfloat: right;\n\t\t}\n\t</style>\n\n\t<div class=\"base\">\n\t\t<ul>\n\t\t\t<li each = {info in model.serverInfos} >\n\t\t\t\t<div class= {card0: true, card_selected: info && info.address == model.currentServerUri } \n\t\t\t\t\tonclick= {onServerEntryClicked}>\n\t\t\t\t\t<div class='inner'>\n\t\t\t\t\t\t<div class='serverName'>\n\t\t\t\t\t\t\t{info.modName}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='infoPart'>\n\t\t\t\t\t\t\t<div class='info_region'>\n\t\t\t\t\t\t\t\t{info.region}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='info_users'>\n\t\t\t\t\t\t\t{info.numClients} / {info.numMaxClients}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='clear_both'></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='cover'></div>\n\t\t\t</li>\n\t\t</ul>\n\t<div />\n</server-list-root>\n")],e)}(s.Element);e.ServerListRootTag=l},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(0),l=n(4),c=n(2),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uconfig=a.gs.uconfig,e.userEntry=l.gameCore.userEntryMan,e.cssColors=a.gs.ucolors.cssColors,e.appConfig=c.AppConfigurator.instance,e}return o(e,t),Object.defineProperty(e.prototype,"isDualUi",{get:function(){return a.gs.gconfig.ShowDualSkinInputUi},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.userEntry.indexChangedProc=this.update.bind(this)},e.prototype.inputText=function(t){this.userEntry.SetProp(t.target.name,t.target.value)},e.prototype.startPlay=function(){l.gameCore.StartPlay()},e.prototype.startSpectate=function(){l.gameCore.StartSpectate()},r([s.template('<user-entry-panel><style>.main_ui_area{width: 300px;margin: 0 auto;}.ui_main_button{_background-color: #F08;_color: #FFF;border-radius: 4px;border: none;margin: 2px 0;position: relative;cursor: pointer;width: 147px;float: left;vertical-align: middle;}.ui_main_button > .button_symbol{font-family: \'Overpass\';text-align: center;font-size: 24px;line-height: 38px;display: inline-block;}.ui_main_button > .button_text{font-family: \'Overpass\';font-size: 22px;display: inline-block;line-height: 38px;vertical-align: top;}.ui_text_box{margin: 2px 0;}.ui_full_width{width: 300px;}.ui_team_input{width: 90px;float: left;}.ui_name_input{width: 206px;}.player_entry_info_area{}.main_buttons_area{padding: 4px 0;}.center_ad_area{width: 300px;height: 250px;margin: 0 auto;background-color: white;margin-top: 15px;}</style><div class="panel_tab_content"><div><div style=\'height: 25px\' /><div class="main_ui_area"><div class="player_entry_info_area"><div><input type="text" class="ui_common ui_text_box ui_team_input"ref="ui_text_team" name="team" placeholder="team" value="{userEntry.curInfo.team}" oninput={inputText}><div style="width:4px; height: 1px; float: left" /><input type="text" class="ui_common ui_text_box ui_name_input" ref="ui_text_name"name="name" placeholder="name" value={userEntry.curInfo.name} oninput={inputText}><div class="clear_both"></div><input type="text" class="ui_common ui_text_box ui_full_width" ref="ui_text_skin_url" name="skinUrl" placeholder="skin url" value={userEntry.curInfo.skinUrl} onchange={inputText}><input type="text" class="ui_common ui_text_box ui_full_width" ref="ui_text_skin_url2"name="skinUrl2" placeholder="skin url 2" value={userEntry.curInfo.skinUrl2} onchange={inputText} show={isDualUi}><hr style="margin-top: 5px; margin-bottom: 5px"><input type="text" class="ui_common ui_text_box ui_team_input" ref="ui_text_tab_team" name="tabTeam" placeholder="tab team" value="{userEntry.curInfo.tabTeam}" oninput={inputText}><div style="width:4px; height: 1px; float: left" /><input type="text" class="ui_common ui_text_box ui_name_input" ref="ui_text_name" name="tabName" placeholder="tab name" value={userEntry.curInfo.tabName} oninput={inputText}><input type="text" class="ui_common ui_text_box ui_full_width" ref="ui_text_tab_skin_url" name="tabSkinUrl" placeholder="tab skin url" value={userEntry.curInfo.tabSkinUrl} onchange={inputText}><input type="text" class="ui_common ui_text_box ui_full_width" ref="ui_text_tab_skin_url2"name="tabSkinUrl2" placeholder="tab skin url 2" value={userEntry.curInfo.tabSkinUrl2} onchange={inputText} show={isDualUi}></div></div><div class="clear_both"></div><div class="main_buttons_area"><button class="ui_common ui_main_button ui_half_width" id="ui_button_play" onclick={startPlay} style="background-color: {cssColors.clMainButtons}; color:{cssColors.clUiSymbols}" ><div class="button_symbol">&#xe9a5;</div><div class="button_text">PLAY</div></button><div style="width:6px; height: 1px; float: left" /><button class="ui_common ui_main_button ui_half_width" id="ui_button_spec" onclick={startSpectate} style="background-color: {cssColors.clMainButtons}; color:{cssColors.clUiSymbols}""><div class="button_symbol">&#xe985;</div><div class="button_text">SPEC</div></button><div class="clear_both"></div></div></div></div></div></user-entry-panel>')],e)}(s.Element);t.UserEntryPanelTag=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),l=n(0),c=n(4),d=n(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;const n=JSON.parse(localStorage.getItem("hideInfo"));return n instanceof Array?(i.HidePartyCode=n[0],i.HideUserSig=n[1]):localStorage.setItem("hideInfo",JSON.stringify([0,0])),e.gconfig=l.gs.gconfig,e.userEntry=c.gameCore.userEntryMan,e.uconfig=l.gs.uconfig,e.cssColors=l.gs.ucolors.cssColors,e.appConfig=d.AppConfigurator.instance,e}return r(e,t),Object.defineProperty(e.prototype,"isDualUi",{get:function(){return l.gs.gconfig.ShowDualSkinInputUi},enumerable:!0,configurable:!0}),e.prototype.tcfg=i,e.prototype.mounted=function(){this.userEntry.skinChangedProc=this.update.bind(this)},e.prototype.inputText=function(t){this.userEntry.SetProp(t.target.name,t.target.value)},e.prototype.hideCode=function(){var t=document.getElementsByClassName("code_cover")[0];const e=""==t.style.display;t.style.display=e?"none":"",i.HidePartyCode=!e,localStorage.setItem("hideInfo",JSON.stringify([i.HidePartyCode,i.HideUserSig]))},e.prototype.hideUsig=function(){var t=document.getElementsByClassName("usig_cover")[0];const e=""==t.style.display;t.style.display=e?"none":"",i.HideUserSig=!e,localStorage.setItem("hideInfo",JSON.stringify([i.HidePartyCode,i.HideUserSig]))},e.prototype.onArrowButton=function(t){var e="arrow_left"==t.target.id?-1:1;c.gameCore.userEntryMan.ShiftIndex(e)},e.prototype.onBenchButton=function(){c.gameCore.ToggleBenchMarkMode()},e.prototype.changeUserSig=function(t){localStorage.setItem("UniChatUserSignature",t.target.value)},s([a.template('<left-config-panel><style>.left_config_panel_root{padding: 5px 10px;height: 100%;position: relative;}.left_input_ui_outer{width: 168px;margin: 0 auto;}.bottom_box{position: absolute;left: 15px;bottom: 5px;}.side_ad_area{width: 200px;height: 200px;background-color: white;margin: 10px 0;}.skin_preview_box{position: relative;width: 100px;height: 100px;margin: 10px auto;}.skin_cell{position: absolute;width: 100%;height: 100%;background-size: cover;background-position: center center;border-radius: 50%;}.code_text_box_outer{width: 100px;margin: 0 auto;position: relative;}.code_cover{width: 100%;height: 100%;background-color: #666;position: absolute;top: 0;line-height: 36px;padding-left: 6px;}#ui_text_code{width: 100%;}.arrows{font-family: \'Overpass\';_margin: 0 15px;margin-top: 30px;font-size: 28px;cursor: pointer;user-select: none;}.arrow_left{float: left;}.arrow_right{float: right;}.bench_button{font-family: Overpass;width: 44px;height: 36px;line-height: 36px;font-size: 28px;border-radius: 4px;text-align: center;cursor: pointer;display: inline-block;}.version_str{font-family: Overpass;font-size: 22px;display: inline-block;vertical-align: middle;margin-left: 30px;margin-bottom: 12px;}a{color: white;}a:visited{color: white;}.lbar_notes{font-size: 12px;margin-bottom: 20px;}</style><div class="left_config_panel_root"><div style="height:20px" show={!isDualUi} /><div class="left_input_ui_outer"><div class="arrows arrow_left" id="arrow_left" onmousedown={onArrowButton}>◀</div><div class="arrows arrow_right" id="arrow_right" onmousedown={onArrowButton}>▶</div><div class="skin_preview_box"><div class="skin_cell" style="background-image: url(\'gr/checker2.png\')" /><div class="skin_cell" style="background-image: url({userEntry.curInfo.skinUrl})" /></div><div class="clear_both" /><div class="skin_preview_box" show={!isDualUi}><div class="skin_cell" style="background-image: url(\'gr/checker2.png\')" /><div class="skin_cell" style="background-image: url({userEntry.curInfo.tabSkinUrl})" /></div><div class="code_text_box_outer" show={gconfig.ShowPartyCodeInputUi}><input type="text" class="ui_common ui_text_box" id="ui_text_code" name="code" placeholder="code" value="{userEntry.curInfo.code}" oninput={inputText}><input type="text" class="ui_common ui_text_box" id="ui_text_code" name="tabCode" placeholder="tab code" value="{userEntry.curInfo.tabCode}" oninput={inputText}><hr style="margin-top: 5px; margin-bottom: 5px"><input type="text" class="ui_common ui_text_box" id="ui_text_code" name="userSig" placeholder="user sig" value="{userEntry.curInfo.usig}" oninput={changeUserSig}><div class="code_cover" show={uconfig.HidePartyCode}>&#x1F512;</div></div><div show={appConfig.targetSite == \'ix\'}><div style="height: 20px" /><a href="http://ixagar.net/classic">old version</a></div></div><div class="bottom_box" show={!1}><div class=\'lbar_notes\'><div style="padding: 8px" if={appConfig.isJapanese}>note: スキンがエラーで表示されない場合、imgurを使ってください。また、スキンの縦横のピクセル数を1000x1000以下にしてください。gyazoの画像は非対応になりました。</div><div style="padding: 8px" if={appConfig.isJapanese}>注意: 若你的skin無法正常顯示，請使用上傳到imgur的skin，而且skin大小亦應細於1000x1000。</div><div style="padding: 8px" if={!appConfig.isJapanese && !appConfig.isJapanese}>note: please use imgur if your skin is not shown by error. Also it noted that the pixel size of skins should be less than 1000x1000.</div></div><div class="bench_button" style="background-color: {cssColors.clMainButtons}; color: {cssColors.clUiSymbols}"onclick={onBenchButton}>&#xe90f;</div><div class="version_str">LWGA-1.1</div></div></div></left-config-panel>')],e)}(a.Element);e.LeftConfigPanelTag=h},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(0),l=n(4),c=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}o(e,t),e.prototype.mounted=function(){this.root.innerHTML=this.opts.content},e=r([s.template("<raw><div></div></raw>")],e)}(s.Element),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=l.gameCore.gameHudModel,e.perfModel=l.gameCore.perfModel,e.ws=l.gameCore.conn,e.node=l.gameCore.nodeMan,e.gconfig=a.gs.gconfig,e.uconfig=a.gs.uconfig,e.chatAppModel=l.gameCore.chatAppModel,e.gstates=a.gs.gstates,e.cssColors=a.gs.ucolors.cssColors,e.chatInputBoxVisible=!1,e.hasNewPrivateMessage=!1,e.prevChatMessagesCount=-1,e.userEntry=l.gameCore.userEntryMan,e}return o(e,t),e.prototype.mounted=function(){var t=this,e=this.refs.lb_chart_outer,n=this.refs.lb_chart_canvas;n.width=160,n.height=160,e.style.width="160px",e.style.height="160px";var i=this.refs.map_outer,o=this.refs.map_canvas,r=300;o.width=r,o.height=r,i.style.width=r+"px",i.style.height=r+"px",window.addEventListener("keydown",(function(e){if(!e.repeat&&13==e.keyCode){var n=t.refs.chat_input_text_box;if(t.chatInputBoxVisible){var i=n.value;n.value="",t.chatInputBoxVisible=!1,i?l.gameCore.SendChatMessage(i):t.update()}else{var o=document.activeElement;if(o&&"INPUT"==o.tagName)return void o.blur();t.chatInputBoxVisible=!0,t.update(),n.focus()}}})),setInterval(this.UpdationProc.bind(this),17);var s=this.refs.overlay_base,a=(r=this.refs.chat_view,this.refs.chat_input_box),c=!1;function d(t){r.style.userSelect=t?"text":"none"}r.onmouseenter=function(){c=!0},r.onmouseleave=function(){c=!1};var h=!1;a.onmouseenter=function(){h=!0},a.onmouseleave=function(){h=!1},s.onmousedown=function(){c&&d(!0)},s.onmouseup=function(){c||h||(window.getSelection().removeAllRanges(),d(!1))}},e.prototype.refreshTab=function(t){var e=this.ws.ws.url;this.ws.CloseConnection(),this.ws.ConnectToGameServer(e),console.log(this.ws.ws.readyState),gVar.controlConn2=!0},e.prototype.refreshTab2=function(t){var e=this.ws.ws.url;this.ws.CloseConnection(2),this.uconfig.tab&&this.ws.ConnectToGameServer(e,2),a.gs.gstates.isDeadSpectation=!1,gVar.controlConn2=!1},e.prototype.refreshTab3=function(t){var e=this.ws.ws.url;this.ws.CloseConnection(3),this.ws.ConnectToGameServer(e,3)},e.prototype.refreshView=function(t){this.node.PostClearAllNodes()},e.prototype.UpdationProc=function(){this.model.isHudUpdated&&(this.model.isHudUpdated=!1,this.update(),this.model.chatMessages.length!=this.prevChatMessagesCount&&(this.prevChatMessagesCount=this.model.chatMessages.length,this.scrollChatViewToEnd()))},e.prototype.onSkinFilterButton=function(t){console.log(t),this.gstates.isSkinFilterPanelVisible=!this.gstates.isSkinFilterPanelVisible,t.stopPropagation()},e.prototype.scrollChatViewToEnd=function(){var t=this.refs.chat_view;t.scrollTop=t.scrollHeight},r([s.template('\'\n<game-overlay>\n\n  <style>\n    .overlay_base {\n    _user-select: none;\n    }\n    .game_control_overlay {\n    _user-select: none;\n    }\n    .chat_view {\n    width: 300px;\n    height: 250px;\n    background-color: rgba(255, 255, 255, 0.3);\n    border-radius: 4px;\n    position: absolute;\n    top: 50px;\n    left: 10px;\n    overflow-y: scroll;\n    overflow-x: none;\n    font-size: 14px;\n    resize: both;\n    padding: 3px;\n    word-wrap: break-word;\n    user-select: text;\n    }\n    .chat_view::-webkit-scrollbar {\n    width: 9px;\n    /*background: rgba(224,224,224, 0.5);*/\n    }\n    .chat_view::-webkit-scrollbar-thumb {\n    background-color: rgba(128, 128, 128, 0.5);\n    }\n    .chat_view::-webkit-scrollbar-corner {\n    background-color: none;\n    }\n    .chat_view::-webkit-resizer {\n    background-color: rgba(64, 64, 64, 0.5);\n    resize: vertical;\n    min-width: 270px;\n    }\n    .message_time_stamp {\n    color: #AAA;\n    font-size: 13px;\n    }\n    .message_sender_name {\n    color: #FF0;\n    }\n    .bottom_area {\n    width: 100%;\n    position: absolute;\n    bottom: 0;\n    }\n    .chat_input_area {\n    width: 360px;\n    height: 40px;\n    background-color: rgba(200, 200, 200, 0.5);\n    border-radius: 4px;\n    margin: 0 auto 50px;\n    }\n    #chat_input_text_box {\n    width: 100%;\n    height: 100%;\n    background-color: none;\n    border: none;\n    font-size: 16px;\n    padding-left: 6px;\n    }\n    #chat_input_text_box:focus {\n    outline: 0;\n    }\n    .server_client_status_area {\n    position: absolute;\n    left: 10px;\n    bottom: 6px;\n    font-size: 14px;\n    }\n    #server_user_num_text {\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n       text-align:center;\n    font-size: 15px;\n    }\n    .self_state_info {\n    position: absolute;\n    top: 40px;\n    left: 10px;\n    font-size: 22px;\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    }\n    .self_state_info>div {\n    display: inline-block;\n    margin-right: 10px;\n    }\n    .num_text{\n        font-size:14px;\n    }\n    #self_score_text {}\n    #server_display_message {\n    position: absolute;\n    top: 50px;\n    width: 100%;\n    font-size: 15px;\n    text-align: center;\n    color: #FF0;\n    font-size: 32px;\n    }\n    .benchmark_mode_message_outer {\n    position: absolute;\n    top: 70px;\n    width: 100%;\n    }\n    .benchmark_mode_message {\n    margin: 0 auto;\n    width: 600px;\n    font-size: 15px;\n    text-align: center;\n    font-size: 32px;\n    color: #0F0;\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    background-color: rgba(0, 0, 0, 0.7);\n    padding: 5px;\n    }\n    .leaderboard_outer {\n    position: absolute;\n    top: 0px;\n    right: 10px;\n    }\n    .leaderboard_inner {\n    display: flex;\n    flex-direction: column;\n    width: 300px;\n    padding: 8px;\n    border-radius: 4px;\n    }\n\n    .leaderboard_team {\n    display: flex;\n    flex-direction: column;\n    width: 210px;\n    padding: 8px;\n    border-radius: 4px;\n    }\n     .leaderboard_mass {\n    display: flex;\n    flex-direction: column;\n    width: 210px;\n    padding: 8px;\n    border-radius: 4px;\n    }\n\n    .lb_header {\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    font-size: 22px;\n    text-align: center;\n    }\n    .lb_header_large {\n    font-size: 26px;\n    }\n\n    .lb_detail {}\n    .lb_entry2 {\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    font-size: 15px;\n    height: 20px;\n    overflow: hidden;\n    text-align: center;\n    }\n    .lb_entry {\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    font-size: 15px;\n    height: 20px;\n    overflow: hidden;\n    text-align: left;\n    }\n    #lb_chart_outer {\n    margin: 5px auto 0;\n    }\n    #lb_chart_canvas {\n    opacity: 0.8;\n    }\n    #map_outer {\n    z-index: 1;\n    border: solid 1px white;\n    position: absolute;\n    right: 10px;\n    bottom: 10px;\n    }\n    #teamInfo {\n    position: absolute;\n    right: 370px;\n    bottom: 10px;\n    display: flex;\n    flex-direction: column;\n    }\n    #map_canvas {\n    _background-color: rgba(0, 0, 0, 0.3);\n    }\n    hr {\n    height: 8px;\n    border: none;\n    }\n    .spec_target_info {\n    position: absolute;\n    top: 120px;\n    width: 100%;\n    font-size: 22px;\n    text-align: center;\n    font-family: \'Overpass\', \'Noto Sans\', Meiryo, sans-serif;\n    }\n    @keyframes rainbow_background {\n    100%,\n    0% {\n    background-color: #ff4242\n    }\n    8% {\n    background-color: #ffa74f\n    }\n    16% {\n    background-color: #ffff67\n    }\n    25% {\n    background-color: #a3ff48\n    }\n    33% {\n    background-color: #46ff46\n    }\n    41% {\n    background-color: #50fda6\n    }\n    50% {\n    background-color: #55fcfc\n    }\n    58% {\n    background-color: #4aa3fc\n    }\n    66% {\n    background-color: #4242ff\n    }\n    75% {\n    background-color: #a54dfd\n    }\n    83% {\n    background-color: #ff4dff\n    }\n    91% {\n    background-color: #ff4ba5\n    }\n    }\n    #notify_log::-webkit-scrollbar {\n    width: 8px;\n    }\n    #notify_log::-webkit-scrollbar-thumb {\n    background-color: rgba(128, 128, 128, 0.5);\n    }\n    #notify_log::-webkit-scrollbar-corner {\n    background-color: none;\n    }\n    #notify_log.click {\n    top: 307px;\n    left: 10px;\n    height: 300px;\n    width: 300px;\n    font-size: 14px;\n    position: absolute;\n    overflow-y: scroll;\n    }\n    #notify_log {\n    top: 307px;\n    left: 10px;\n    height: 30px;\n    width: 300px;\n    font-size: 14px;\n    position: absolute;\n    overflow: hidden;\n    border-radius:4px;\n    }\n    .divs {\n    background-color: #999999;\n    animation: rainbow_background 20s infinite;\n    }\n    .top-bar {\n    position: fixed;\n    transform: translateX(-50%);\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    color: #ffffff;\n    background-color: #111111;\n    padding: 5px;\n    z-index: 1;\n    right: 220px;\n    bottom: 310px;\n    align-items: center;\n    }\n    .top-bar .reconnect {\n    border: none;\n    outline: none;\n    background-color: #222222;\n    color: #888888;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    font-size: 14px;\n    font-family: \'Overpass\', Noto Sans, Meiryo, sans-serif;\n    font-weight: 600;\n    border-radius: 2px;\n    transition: all 0.4s;\n    cursor: pointer\n    }\n    .top-bar .reconnect i {\n    font-size: 14px;\n    line-height: 20px;\n    pointer-events: none;\n    margin-right: 1px\n    }\n    .top-bar .reconnect[owner="1"] {\n    margin-left: 5px;\n    margin-right: 5px\n    }\n    .top-bar .reconnect.disconnected {\n    background-color: #ffffff;\n    color: #555555\n    }\n    .leaderboard{\n    display: flex;\n    flex-direction: column;\n    }\n    .top-bar #socket-ip {\n    border: none;\n    outline: none;\n    background-color: #222222;\n    color: #888888;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    font-size: 14px;\n    font-family: \'Overpass\', Noto Sans, Meiryo, sans-serif;\n    font-weight: 600;\n    padding: 0px 5px;\n    border-radius: 1px\n    }\n    .top-bar #socket-ip i {\n    font-size: 14px;\n    line-height: 20px;\n    pointer-events: none;\n    margin-right: 2px\n    }\n    .top-bar[multibox=off] .reconnect {\n    display: none\n    }\n    .mapBar{\n    font-size: 14px;\n    }\n  </style>\n\n  <div class=\'overlay_base\' ref=\'overlay_base\'>\n\n    <div id="self_score_text" ref="self_score_text"></div>\n\n    <div id="server_display_message" ref="server_display_message">{model.serverDisplayMessageText}</div>\n\n    <div class="spec_target_info" show={model.specTargetName !=null}>{model.specTargetName} -- {(model.specTargetScore/1000).toFixed(1)}k</div>\n\n    <div class="benchmark_mode_message_outer" show={gstates.isBenchmarkMode}>\n      <div class="benchmark_mode_message">benchmark mode (score: {perfModel.numCellsRendered})</div>\n    </div>\n\n    <div class="server_client_status_area">\n      <div show={uconfig.ShowClientStatus}>\n        <div style="display:flex;align-items: center;font-family: \'Overpass\',Noto Sans, Meiryo,sans-serif;"> <i class="material-icons" style="margin-right:2px;font-size:14px">monitor</i>{perfModel.avgFps.toFixed(0)} fps </div>\n        <div id="server_status_text" ref="server_status_text" show={uconfig.ShowServerStatus}> </div>\n        <div style="display:flex;align-items: center;font-family: \'Overpass\',Noto Sans, Meiryo,sans-serif;"> <i class="material-icons" style="margin-right:2px;font-size:14px">cloud_sync</i>{model.serverStatusText}</div>\n        </div>\n        <div id="latency_text" style="display:flex;align-items: center;font-family: \'Overpass\', Noto Sans, Meiryo,sans-serif;"> <i class="material-icons" style="margin-right:2px;font-size:14px">signal_cellular_alt</i>{model.latencyMs} ms </div>\n      </div>\n\n      <div class="leaderboard_outer" show={uconfig.ShowLeaderboard}>\n          <div class="leaderboard">\n              <div class="leaderboard_inner" style="background: {cssColors.clLeaderboardBack};">\n          <div class="lb_header lb_header_large" style="color: {cssColors.clLeaderboardHeader};">{model.leaderboardHeaderText}</div>\n        <div class="lb_detail">\n          <div each={model.leaderboardEntries} class="lb_entry" style="color: {color}; height: 24px;" show={active}>\n            <div style="width: 60px; float: right; text-align: right; margin-left:3px;">({trip})</div>\n            <div style="width: 50px; float: right; text-align: right;">{score}</div>\n            <div style="width: 170px; float: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden">{index + 1}.{text} </div>\n          </div>\n        </div>\n\n        <hr style="background-color: {cssColors.clLeaderboardHeader};height: 2px;margin-top:10px;margin-bottom:10px;"/>\n\n        <div id="server_user_num_text" style="color:{cssColors.clChatMessage};" ref="server_user_num_text"><div style="display:flex;justify-content: space-evenly;">\n          <div class = "num_text">{model.cp} / {model.mp}</div>\n          <div><i class="material-icons num_text">person_add</i> {model.p}</div>\n          <div><i class="material-icons num_text">visibility</i> {model.sp}</div>\n          <div><i class="material-icons num_text">smart_toy</i> {model.rp}</div>\n        </div>\n      </div>\n    </div>\n       <div class="user_info" show={uconfig.ShowLeaderboard} style="\nmargin-top:8px;\n    z-index:20;\n">  <div style="\n        display: flex;\n        flex-direction: column;\n        width: 300px;\n        padding: 8px;\n        border-radius: 4px;\n        background: {cssColors.clLeaderboardBack};\n"><div style="\n    display: flex;align-items: center;\n">\n<div style="color: white;"></div>\n    <div class="divs" style="\n    border-radius: 15px;\n">\n        <div style="\n    width: 30px;\n    height: 30px;\n    border-radius: 15px;\n    background-image: url({userEntry.curInfo.skinUrl});\n    background-size: cover;\n    background-position-x: left;\n">\n        </div>\n    </div>\n    <div style="font-size: 14px;color: white;width: 80px;overflow:hidden;margin-left: 10px;">{userEntry.curInfo.name}</div>\n        <div id="mass1" style="font-size: 14px;color: white;margin: auto;">0.0k</div>\n    <div id="pos1" style="font-size: 14px;color: white;margin: auto;">NaN</div>\n<div style="font-size: 16px;\n    margin: auto;" onclick={refreshTab}>\n    <i class="material-icons">sync</i></div>\n    </div><div style="\n    display: flex;align-items: center;margin-top: 5px;\n">\n<div style="color: white;"></div>\n    <div class="divs" style="\n    border-radius: 15px;\n">\n        <div style="\n    width: 30px;\n    height: 30px;\n    border-radius: 15px;\n    background-image: url({userEntry.curInfo.tabSkinUrl});\n    background-size: cover;\n    background-position-x: left;\n">\n        </div>\n    </div>\n    <div style="font-size: 14px;color: white;width:80px;overflow:hidden;margin-left: 10px;">{userEntry.curInfo.tabName}</div>\n        <div id="mass2" style="font-size: 14px;color: white;margin: auto;">0.0k</div>\n    <div id="pos2" style="font-size: 14px;color: white;margin: auto;">NaN</div>\n<div style="font-size: 16px;\n    margin: auto;" name="2" onclick={refreshTab2}>\n    <i class="material-icons">sync</i></div></div></div></div>\n    <div class="leaderboard_team" style="background-color: {cssColors.clLeaderboardBack}; margin-top: 8px; margin-left: 90px;" show={gconfig.ShowTeamRanking}>\n    <div class="lb_header" style="color: {cssColors.clLeaderboardHeader};">Team Ranking</div>\n    <div class="lb_detail">\n          <div each={model.teamRankingEntries} class="lb_entry" style="color: {color}; height: 24px;" show={active}>\n            <div style="width: 25px; float: right; text-align: right; margin-left: 8px;">{trip}</div>\n            <div style="width: 50px; float: right; text-align: right;">{score}</div>\n            <div style="width: 110px; float: left; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{index + 1}.{text}</div>\n          </div>\n        </div>\n      <div id="lb_chart_outer" ref="lb_chart_outer" show={!1}>\n        <canvas id="lb_chart_canvas" ref="lb_chart_canvas"></canvas>\n      </div>\n    </div>\n    <div class="leaderboard_mass" style="background: {cssColors.clLeaderboardBack};  margin-top: 10px; margin-left: 90px;">\n      <div class="lb_header" style="color: {cssColors.clLeaderboardHeader};">Self Mass</div>\n        <div class="lb_detail">\n          <div class="self_state_info_Score" style="color: {color}; height: 24px;">\n            <div style="width: 70px; float: left; text-align: left; margin-left: 8px;">Score: </div>\n            <div style="width: 90px; float: right; text-align: right; margin-right: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"> {(model.selfScore * 0.001).toFixed(2)} k</div>\n          </div>\n          <div class="chatTagcolor" style="height: 24px;">\n            <div style="width: 70px; float: left; text-align: left; margin-left: 8px;">Max: </div>\n            <div style="width: 90px; float: right; text-align: right; margin-right: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"> {(model.maxScore * 0.001).toFixed(2)} k</div>\n          </div>\n        </div>\n      <hr style="background-color: {cssColors.clLeaderboardHeader}; height: 2px; margin-top:2px; margin-bottom:10px"/>\n      <div class="elf_state_info_Split" style="height: 24px; color:{cssColors.clChatMessage}; height: 24px;">\n        <div style="width: 70px; float: left; text-align: left; margin-left: 8px;">Split:</div>\n        <div style="width: 90px; float: right; text-align: right; margin-right: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{model.splitNum}/16</div>\n      </div>\n\n    </div>\n          </div>\n\n  </div>\n\n\n  <div id="map_outer" ref="map_outer" style="background-color: {cssColors.clMapBackground}" show={uconfig.ShowMap}>\n  <canvas id="map_canvas" ref="map_canvas"></canvas>\n\n    <div class="mapBar" style="display: flex; position: absolute; bottom: 305px; width: 300px; height: 30px; justify-content: end; background-color:{cssColors.clMapBackground}; border-radius:4px;align-items: center;">\n      <div style="color: {cssColors.clLeaderboardHeader}; display: flex; margin-left:5px; margin-right:10px; font-family: \'Overpass\';" id="time-hud" show={uconfig.ShowMap}">\n      </div>\n    </div>\n\n  </div>\n\n\n  <div id="game_control_overlay" class=\'game_control_overlay\' ref=\'game_control_overlay\' />\n    <div class="chat_view" id="chat_view" ref="chat_view" onclick="$(\'.tripKey\').toggle();" style="background-color: {cssColors.clChatBackground}; max-width:300px" show={uconfig.ShowChatBox}>\n      <div each={model.chatMessages} style="margin-top:3px;display: flex;flex-direction: column;margin-bottom:20px;">\n        <div style="display: flex;align-items: inherit;">\n          <div class="divs" style="border-radius: 15px;width: 30px;height: 30px;">\n          <div style="width: 30px;height: 30px;border-radius: 15px;background-image: url({skinUrl});background-size: cover;background-position-x: left;"></div>\n        </div>\n\n        <div style="margin-top:5px;">\n          <span class="message_time_stamp" style="color: {cssColors.clChatTimeString};margin-left: 5px;">{timeStamp}</span>\n          <span class="tripKey" show={!1} style="color: {cssColors.clChatSenderName};margin-left: 5px;">{tripKey}</span>\n          <span style="color: {cssColors.clChatSenderName};margin-left: 5px;">{senderName}:</span>\n        </div>\n      </div>\n\n      <div style="margin-left: 35px;word-break: break-all" ;>\n        <span style="color: {cssColors.clChatMessage};">{message}</span>\n      </div>\n    </div>\n  </div>\n\n\n  <div id="notify_log" style="font-family: \'Overpass\',Noto Sans,Meiryo,sans-serif; background-color: {cssColors.clChatBackground};" onclick="$(this).toggleClass(\'click\');$(this).scrollTop(3000);" show={uconfig.ShowPlayerLog}></div>\n  <div class="bottom_area">\n    <div class="chat_input_area" show={chatInputBoxVisible} ref="chat_input_box">\n      <input type="text" id="chat_input_text_box" ref="chat_input_text_box" /></div>\n    </div>\n  </div>\n  <skin-filter-panel show={gstates.isSkinFilterPanelVisible} />\n</game-overlay>\n\'')],e)}(s.Element));e.GameOverlayTag=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(0),l=n(4),c=n(1),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=l.gameCore.ReplayControllerModel,e.cssColors=a.gs.ucolors.cssColors,e.replayUiMessage="",e.elementIdToReplayOperationDict={bt_flash:2,bt_record:1,bt_stop:3,bt_play:4,bt_reel_prev:5,bt_reel_next:6,bt_cont:7,bt_tick_prev:8,bt_tick_next:9,bt_reel_delete:10,bt_speed_down:12,bt_speed_up:13},e}return o(e,t),e.prototype.mounted=function(){var t=this;this.model.SetStateChangedProc((function(e){t.update()})),this.update(),this.model.captureNotificationProc=function(){t.replayUiMessage="captured!",setTimeout((function(){t.replayUiMessage="",t.update()}),500)}},e.prototype.onTrackKnobMouseDown=function(t){var e=this;if(!a.gs.gstates.isBenchmarkMode){var n=this.refs.gauge_rail.getBoundingClientRect().left,i=function(t){var i=t.pageX-n,o=c.Nums.VMap(i,5,295,0,1,!0);return e.model.SeekReplayPosTo(o,!0),e.update(),!1},o=function(t){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),i(t),t.stopPropagation()}},e.prototype.onButtonClick=function(t){if(!a.gs.gstates.isBenchmarkMode){var e=t.currentTarget.id,n=this.elementIdToReplayOperationDict[e];n&&this.model.HandleReplayOperation(n),t.stopPropagation()}},r([s.template('\n<replay-control-bar>\n\t<style>\n\t\t.replay_bar_area{\n\t\t\twidth: 660px;\n\t\t\theight: 45px;\n\t\t\tmargin: 0 auto;\n\t\t\tborder-radius:4px;\n\t\t\tmargin-top: 30px;\n\t\t\tposition: relative;\n\t\t\tpadding: 4px;\n\t\t\tpadding-left: 10px;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t.ui_row > div{\n\t\t\tfloat: left;\n\t\t\tmargin: 0 2px;\n\t\t}\n\n\t\t.ui_row2 > *{\n\t\t\tfloat: left;\n\t\t\tmargin: 0 2px;\n\t\t}\n\n\t\t.replay_main_button_group{\n\t\t\tmargin-top: 2px !important;\n\t\t}\n\t\t\n\t\t.control_button_back{\n\t\t\tborder-radius: 5px;\n\t\t}\n\n\t\t.control_button{\n\t\t\twidth: 34px;\n\t\t\theight: 34px;\n\t\t\tborder: solid 1px #FFF;\n\t\t\tborder-radius: 3px;\n\t\t\tline-height: 34px;\n\t\t\tfont-family: \'Overpass\';\n\t\t\tfont-size: 15px;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.middle_button{\n\t\t\twidth: 32px;\n\t\t\theight: 28px;\n\t\t\tline-height: 28px;\n\t\t\tfont-size: 12px;\n\t\t\tborder-radius: 2px;\n\t\t}\n\n\t\t.reel_info_area{\n\t\t\tline-height: 28px;\n\t\t\tfont-size: 14px;\n\t\t\tmargin: 0 0px !important;\n\t\t\twidth: 50px;\n\t\t}\n\n\t\t.small_button{\n\t\t\twidth: 22px;\n\t\t\theight: 18px;\n\t\t\tline-height: 18px;\n\t\t\tfont-size: 11px;\n\t\t\tborder-radius: 1px;\n\t\t}\n\n\t\t.control_button:hover{\n\t\t\tbackground-color: rgba(255,255,255,0.2);\n\t\t}\n\n\t\t.is_on{\n\t\t\tbackground-color: #00F;\n\t\t} \n\n\t\t.gauge_area{\n\t\t\twidth: 300px;\n\t\t\theight: 38px;\n\t\t\tposition: relative;\n\t\t\tmargin: 0 8px !important;\n\t\t}\n\n\t\t.gauge_box{\n\t\t\tposition: absolute;\n\t\t\tbottom: 0;\n\t\t}\n\n\t\t.gauge{\n\t\t\twidth: 300px;\n\t\t\theight: 16px;\n\t\t\tposition: relative;\n\t\t}\n\n\t\t.gauge_rail{\n\t\t\twidth: 300px;\n\t\t\theight: 10px;\n\t\t\tborder: solid 1px #FFF;\n\t\t\tposition: absolute;\n\t\t\ttop: 3px;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.gauge_knob{\n\t\t\twidth: 10px;\n\t\t\theight: 16px;\n\t\t\tborder: solid 1px #FFF;\n\t\t\tposition: absolute;\n\t\t\tleft: 0px;\n\t\t\tbackground-color: #08F;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.time_position_text{\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tfont-size: 14px;\n\t\t}\n\n\t\t.replay_speed_text{\n\t\t\twidth: 35px;\n\t\t\tfont-size: 14px;\n\t\t}\n\n\t\t.part_reel_control{\n\t\t\tmargin-top: 5px !important;\n\t\t}\n\n\t\t.second_bar_area{\n\t\t\twidth: 660px;\n\t\t\tmargin: 0 auto;\n\t\t\tposition: relative;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t.replay_ui_message{\n\t\t\tfont-family: Overpass;\n\t\t\tfont-size: 24px;\n\t\t\ttext-align: left;\n\t\t}\n\t</style>\n\t<div>\n\t\t<div class="replay_bar_area ui_row" style="background-color: {cssColors.clReplayBar}; color: {cssColors.clUiSymbols}">\n\t\t\t<div class="replay_main_button_group ui_row">\n\t\t\t\t<div class="control_button" id="bt_flash" onmousedown={onButtonClick}\n\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}; border-color: {cssColors.clUiSymbols}"">&#xe9b5</div>\n\n\t\t\t\t<div class="control_button_back"\n\t\t\t\t\tstyle="background-color: {model.isRecording ? cssColors.clUiButtonActive : \'\'}">\n\t\t\t\t\t<div class="control_button" id="bt_record" onmousedown={onButtonClick} style="border-color: {cssColors.clUiSymbols}">\n\t\t\t\t\t\t\t&#xe914\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div style="width: 2px; height: 1px" />\n\n\t\t\t\t<div class="control_button" id="bt_stop" onmousedown={onButtonClick} \n\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xea1e</div>\n\n\t\t\t\t<div class="control_button_back"\n\t\t\t\t\tstyle="background-color: {model.isPlayback ? cssColors.clUiButtonActive : \'\'}">\n\t\t\t\t\t<div class="control_button" id="bt_play" onmousedown={onButtonClick} style="border-color: {cssColors.clUiSymbols}">\n\t\t\t\t\t\t&#xe902\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<div class="gauge_area">\n\n\t\t\t\t<div class="ui_row2" style="margin-left:-2px">\n\t\t\t\t\t<div class="control_button small_button" id="bt_tick_prev" onmousedown={onButtonClick} \n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xf177</div>\n\t\t\t\t\t<div class="control_button small_button" id="bt_tick_next" onmousedown={onButtonClick} \n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xf178</div>\n\n\t\t\t\t\t<div style="width:4px; height: 1px" />\n\n\t\t\t\t\t<div class="control_button small_button" id="bt_speed_down" onmousedown={onButtonClick} \n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xf068</div>\n\t\t\t\t\t<div class="control_button small_button" id="bt_speed_up" onmousedown={onButtonClick} \n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xf067</div>\n\t\t\t\t\t<div class="replay_speed_text">\n\t\t\t\t\t\tx{model.replaySpeedRate.toFixed(2)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style="width:4px; height: 1px" />\n\n\t\t\t\t\t<div class="{control_button_back: true, is_on: model.isAutoShiftToNextReel}">\n\t\t\t\t\t\t<div class="control_button small_button" id="bt_cont" onmousedown={onButtonClick} style="border-color: {cssColors.clUiSymbols}">\n\t\t\t\t\t\t\t&#xe90a\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="time_position_text">\n\t\t\t\t\t{model.trackPosText}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="gauge_box">\n\t\t\t\t\t<div class="gauge" onmousedown={onTrackKnobMouseDown}>\n\t\t\t\t\t\t<div class="gauge_rail" id="gauge_rail" ref="gauge_rail" style="border-color: {cssColors.clUiSymbols}"/>\n\t\t\t\t\t\t<div class="gauge_knob" id="gauge_knob" \n\t\t\t\t\t\t\tstyle="left: {~~(model.trackPos * 290) + \'px\'}; background-color: {cssColors.clReplayBar}; border-color: {cssColors.clUiSymbols}"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="part_reel_control">\n\t\t\t\t<div class="ui_row">\n\t\t\t\t\t<div class="control_button middle_button" id="bt_reel_prev" onmousedown={onButtonClick}\n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xe912</div>\n\n\t\t\t\t\t<div class="control_button middle_button" id="bt_reel_next" onmousedown={onButtonClick}\n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xe913</div>\n\n\t\t\t\t\t<div class="reel_info_area">\n\t\t\t\t\t\t<div>{model.numReels > 0 ? model.curReelIndex + 1 : 0}/{model.numReels}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="control_button middle_button" id="bt_reel_delete" onmousedown={onButtonClick}\n\t\t\t\t\t\tstyle="border-color: {cssColors.clUiSymbols}">&#xe9ad</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="second_bar_area">\n\t\t\t<div class="replay_ui_message">\n\t\t\t\t{replayUiMessage}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</replay-control-bar>\n')],e)}(s.Element);e.ReplayControlBarTag=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.listeners=new Map}return t.prototype.emit=function(t,e){var n=this.listeners.get(t);if(n)for(var i=0,o=n;i<o.length;i++)(0,o[i])(e)},t.prototype.on=function(t,e){this.listeners.get(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)},t}();e.EventBus=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.values=[0],this.maxCount=t}return t.prototype.Push=function(t){this.values.length>this.maxCount&&this.values.shift(),this.values.push(t)},t.prototype.GetAverageValue=function(){return this.values.reduce((function(t,e){return t+e}),0)/this.values.length},t}();e.PerformanceCheckQueue=i},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),r=i(3),s=i(0),a=i(4),l=a.gameCore.nodeMan,c=i(11),d=i(12),h=i(1),p=i(25),u=i(10),g=i(6);!function(e){var n=function(){function t(t){this.holdTick=0,this.gameView=t,this.box=new g.Container,this.gr=new g.Graphics,this.box.addChild(this.gr),this.box.zIndex=1e3,this.elCursorOuter=document.querySelector("#psudo_cursor"),this.elCursorImageOn=document.querySelector("#psudo_cursor_img_on"),this.elCursorOuter.style.webkitUserSelect="none"}return t.prototype.SetPsudoCursor=function(t,e,n,i){var o=this.elCursorOuter;o.style.display=t?"block":"none",o.style.left=n+"px",o.style.top=i+"px",e&&(this.holdTick=7),this.holdTick>0&&this.holdTick--,this.elCursorImageOn.style.display=this.holdTick>0?"block":"none"},t.prototype.Update=function(){this.gr.clear(),s.gs.gstates.isBenchmarkMode||(this.UpdateCursor(),this.UpdateEatingLimitMarker(),this.UpdateCellDirectionMarker(),this.UpdateTeamCircle())},t.prototype.DrawCrossPoint=function(t,e,n){var i=this.gr;i.moveTo(t-n,e),i.lineTo(t+n,e),i.moveTo(t,e-n),i.lineTo(t,e+n)},t.prototype.UpdateTeamCircle=function(){var t=Date.now(),e=a.gameCore.sight,n=this.gr;if(t-e.teamCircleTimeStamp<500){var i=e.teamCircleX,o=e.teamCircleY,r=e.teamCircleRadius;n.lineStyle(10,16777215,1),n.drawCircle(i,o,r)}},t.prototype.UpdateCellDirectionMarker=function(){var t=this.gr;s.gs.uconfig.ShowCellDirectionMarker&&this.gameView.cells.forEach((function(e){if(e.isPlayerCell){var n=e.node;if(0!=n.velocity.x||0!=n.velocity.y){var i=Math.atan2(n.velocity.y,n.velocity.x),r=n.nx,s=n.ny,a=e.baseSize/2*e.scale*.8,l=e.baseSize/2*e.scale*1.05,c=r+Math.cos(i)*a,d=s+Math.sin(i)*a,h=r+Math.cos(i)*l,p=s+Math.sin(i)*l,u=e.labelColor;t.lineStyle(10,u,1);var g=.05*n.nr;g=o.Nums.LoLimit(g,15),t.lineWidth=g,t.moveTo(c,d),t.lineTo(h,p)}}}))},t.prototype.UpdateEatingLimitMarker=function(){var t=this;s.gs.uconfig.ShowEatLimitMarker&&a.gameCore.nodeMan.nodeAnalyzer.eatingLimitList.forEach((function(e){var n=t.gameView.cells.get(e.eaterId),i=t.gameView.cells.get(e.eatenId),o=e.canEat?65535:11184810;t.gr.lineStyle(10,o,1),t.DrawCrossPoint(n.x,n.y,100),t.DrawCrossPoint(i.x,i.y,100),t.gr.drawCircle(n.x,n.y,e.limitRadius)}))},t.prototype.UpdateCursor=function(){var t=this,e=a.gameCore.sight;if((s.gs.gstates.isPlaying?s.gs.uconfig.ShowCursorLine:s.gs.uconfig.ShowSpecAimCursor)&&e.aimPlayerId>0){var n=e.aimCursorX,i=e.aimCursorY,o=this.gr,l=s.gs.ucolors.GetColor("clCursorLine");o.alpha=r.ColorHelper.GetAlpha(l);var c=s.gs.uconfig.CursorLineThickness;c*=.2/e.eyeScale,o.lineStyle(c,l);var d=e.aimPlayerId,h=0;a.gameCore.nodeMan.nodes.forEach((function(e){if(e.ownerPlayerId==d&&0==e.cellType){var r=t.gameView.cells.get(e.nodeId);o.moveTo(r.x,r.y),o.lineTo(n,i),h++}}));var p=e.WorldToScreen(n,i),u=p[0],g=p[1];this.SetPsudoCursor(!s.gs.gstates.isRealtimeModePlaying&&h>0,e.splitting,u,g),e.splitting=!1}else this.SetPsudoCursor(!1,!1,0,0)},t}(),i=function(){function t(){this.cardSize=250,this.sharpness=10,this.glowDist=100}return t.prototype.Initialize=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.cardSize+2*this.glowDist,this.texture=g.Texture.from(this.canvas),this.UpdateDrawing_Canvas(),s.gs.uconfig.RegisterChangedProc("SimpleVirus",this.UpdateDrawing_Canvas.bind(this)),s.gs.uconfig.RegisterChangedProc("GlowingNonPlayerCells",this.UpdateDrawing_Canvas.bind(this)),s.gs.ucolors.RegisterChangedProc("clVirusInnerFill",this.UpdateDrawing_Canvas.bind(this)),s.gs.ucolors.RegisterChangedProc("clVirusOuterStroke",this.UpdateDrawing_Canvas.bind(this))},t.prototype.UpdateDrawing_Canvas=function(){const t=s.gs.uconfig.GlowingNonPlayerCells;var e=(h=this.cardSize)/2,n=e+this.glowDist,i=this.canvas.getContext("2d"),o=s.gs.ucolors.GetColor("clVirusInnerFill"),a=s.gs.ucolors.GetAlpha("clVirusInnerFill"),l=s.gs.ucolors.GetColor("clVirusOuterStroke"),c=s.gs.ucolors.GetAlpha("clVirusOuterStroke");if(i.clearRect(0,0,2*n,2*n),i.shadowColor=r.ColorHelper.ColorToHtmlString(l),s.gs.uconfig.SimpleVirus){i.beginPath();var d=.01*this.cardSize*4;i.arc(n,n,e,0,2*Math.PI,!1),i.arc(n,n,this.cardSize/2-d/2,0,2*Math.PI,!1),i.lineWidth=d,i.strokeStyle=r.ColorHelper.ColorToHtmlString(l),i.globalAlpha=c,i.shadowBlur=t?this.glowDist:0,i.stroke(),i.stroke(),i.shadowBlur/=2,i.stroke(),i.stroke(),i.globalAlpha/=2,i.stroke(),i.stroke(),i.shadowBlur/=1.5,i.stroke(),i.stroke(),i.fillStyle=r.ColorHelper.ColorToHtmlString(o),i.globalAlpha=a,i.fill(),i.shadowBlur=t?.1*e:0,i.globalAlpha=c,i.stroke(),i.globalAlpha/=2,i.stroke(),i.globalAlpha=1}else{i.beginPath();const s=24,d=360/s/180*Math.PI,p=d/2,u=e+this.sharpness,g=e-this.sharpness;for(var h=0;h<=s;h++)i.lineTo(Math.cos(h*d)*u+n,-Math.sin(h*d)*u+n),i.lineTo(Math.cos(h*d+p)*g+n,-Math.sin(h*d+p)*g+n);i.lineWidth=.01*this.cardSize*3.25,i.strokeStyle=r.ColorHelper.ColorToHtmlString(l),i.lineJoin="round",i.globalAlpha=c,i.shadowBlur=t?this.glowDist:0,i.stroke(),i.stroke(),i.shadowBlur/=2,i.stroke(),i.stroke(),i.globalAlpha/=2,i.stroke(),i.stroke(),i.shadowBlur/=1.5,i.stroke(),i.stroke(),i.fillStyle=r.ColorHelper.ColorToHtmlString(o),i.globalAlpha=a,i.fill(),i.shadowBlur=t?.1*e:0,i.globalAlpha=c,i.stroke(),i.globalAlpha/=2,i.stroke(),i.globalAlpha=1}this.texture.update()},t.instance=new t,t}(),f=function(){function t(){}return t.prototype.GetSequenceString=function(){var t=this;return""+t.skinUrl+t.nameText+t.skinAlpha+t.renderQuality+t.baseColor+t.teamColor+t.showEnemyOverlay+t.insertRenderName},t}(),m=function(){function t(){}return t.GetConfigCardSizeFromRenderQuality=function(e){return t.CardSizeSource[e]},Object.defineProperty(t,"CurrentConfigCardSize",{get:function(){return t.GetConfigCardSizeFromRenderQuality(s.gs.uconfig.RenderQuality)},enumerable:!0,configurable:!0}),t.CardSizeSource=[200,400,800],t}(),y=function(){function t(t){this.drawingProps=new f,this.playerId=t,this.drawingProps.renderQuality=s.gs.uconfig.RenderQuality}return t.ResizeInterCanvasIfNeed=function(e){var n=t.interCanvas;n.height<e&&(n.width=e,n.height=e)},t.prototype.ResizeCanvasIfNeed=function(t){if(this.canvas||(this.canvas=document.createElement("canvas"),this.canvasCapacitySize=10,this.canvas.width=10,this.canvas.height=10),this.canvasCapacitySize!=t){this.canvasCapacitySize=t,this.canvas.height<t&&(this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=t,this.baseTexture=g.BaseTexture.from(this.canvas));var e=new g.Rectangle(0,0,t,t);this.texture=new g.Texture(this.baseTexture,e)}},t.prototype.StringToCharArrayU=function(t){return t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]},t.prototype.DrawTextCircular=function(t,e,n,i,o,r,s,a){t.save(),t.translate(n,i);for(var l=s,c=this.StringToCharArrayU(e),d=0;d<c.length;d++){var h=c[d];t.save(),t.rotate(l);var p=t.measureText(h).width,u=-p/2,g=o*a;t.strokeText(h,u,g),t.fillText(h,u,g),t.restore();var f=.4*p+.2*r,m=Math.sqrt(o*o-f*f);l-=2*Math.atan2(f,m)}t.restore()},t.prototype.RenderCellCanvas=function(){this.playerId==l.activeSelfPlayerId&&(this.self=!0);var e=this.drawingProps,n=m.GetConfigCardSizeFromRenderQuality(e.renderQuality);this.cardSize=n;const i=parseInt(n/22);var o=n/2,a=s.gs.uconfig.GlowingCells?i:0,c=o+a,d=2*c,h=2*(o+i);this.ResizeCanvasIfNeed(d);var p=this.canvas.getContext("2d");if(p.save(),p.clearRect(0,0,h,h),p.beginPath(),p.arc(c,c,o,0,2*Math.PI,!1),p.closePath(),this.skinVisible=this.skinImage&&e.skinAlpha>0,this.skinVisible){p.shadowBlur=a,p.shadowColor=p.fillStyle=r.ColorHelper.ColorToHtmlString(e.baseColor),p.fill(),p.clip();var u=this.skinImage,g=u.width,f=u.height,y=0,v=0,b=0,S=n;if(!this.self||s.gs.uconfig.ShowSelfSkin)if(g>f?(y=(g-(b=f))/2,v=0):(y=0,v=(f-(b=g))/2),p.globalAlpha=e.skinAlpha,S/b<.5){t.ResizeInterCanvasIfNeed(d);var x=t.interCanvas,k=x.getContext("2d");k.clearRect(0,0,h,h),k.drawImage(u,y,v,b,b,a,a,S,S),p.drawImage(x,a,a,S,S,a,a,S,S)}else p.drawImage(u,y,v,b,b,a,a,S,S);p.globalAlpha=1,p.shadowBlur=0}var C=r.ColorHelper.ColorToHtmlString(e.teamColor);if(e.showEnemyOverlay){var w=2*Math.PI,_=6*(P=.01*n),M=7*P,I=n/2;p.strokeStyle=C,p.lineWidth=_,p.globalAlpha=.3,p.fillStyle="#000",p.save(),p.arc(c,c,o,0,2*Math.PI,!1),p.clip(),p.fillRect(a,a,n+a,n+a),p.restore(),p.globalAlpha=.8,p.beginPath(),p.arc(c,c,I-M,0,w,!1),p.stroke();d=.707*I-M;p.beginPath(),p.moveTo(a+I+d,a+I-d),p.lineTo(a+I-d,a+I+d),p.stroke(),p.globalAlpha=1}if(e.insertRenderName){var P,T=10*(P=.01*n)>>0;p.font="bold "+T+"px Meiryo, Arial",p.strokeStyle="#000",p.fillStyle=C,p.lineWidth=1.3*P>>0,this.DrawTextCircular(p,e.nameText,n,n,.8*o,T,1.5,1)}p.restore(),this.texture.update()},t.prototype.Update=function(){var t=this,e=this.drawingProps,n=e.GetSequenceString(),i=e.skinUrl,o=a.gameCore.uMan,l=65535&this.playerId,d=1&this.playerId,h=o.GetUserInfoById(l),p=o.GetTeamInfoById(h.teamId),g=l==o.selfUserId,f=s.gs.gstates.isPlaying||s.gs.gstates.isDeadSpectation,m=h.skinUrls[d],y=p==o.selfTeamInfo,v=r.GameHelper.CheckIsInEatableSection(p.section,o.selfTeamInfo.section),b=!h.isBot&&""==m;b&&(m=s.gs.gconfig.NoskinFallbackUrl);var S=1,x=!0;f&&!y&&(s.gs.uconfig.ShowEnemySkin?S=.6:x=!1),b&&g&&(x=!1),"dead"==h.name&&(x=!1),s.gs.gconfig.ShowAlwaysAllPlayersSkin&&(x=!0,S=1),this.skinImage&&0==u.SkinImageManager.instance.getSkinAvailability(this.skinImage.src)&&(x=!1),s.gs.uconfig.ShowSkin||(x=!1),x||(S=0),e.baseColor=h.colors[d],e.skinUrl=m,e.nameText=h.fullName,e.teamColor=p.color,e.renderQuality=s.gs.uconfig.RenderQuality,e.insertRenderName=s.gs.uconfig.ShowCircularName&&s.gs.uconfig.ShowName&&!(!s.gs.uconfig.ShowSelfName&&g),e.skinAlpha=S,e.showEnemyOverlay=s.gs.uconfig.ShowEnemySkin&&f&&!h.isBot&&!y&&v&&S>0,s.gs.gconfig.ShowAlwaysAllPlayersSkin&&(e.showEnemyOverlay=!1),this.glow!=s.gs.uconfig.GlowingCells&&(this.glow=s.gs.uconfig.GlowingCells,this.reqRenderCellCanvasOnNextFrame=!0),(this.self||g)&&this.sv!=s.gs.uconfig.ShowSelfSkin&&(this.sv,s.gs.uconfig.ShowSelfSkin,this.reqRenderCellCanvasOnNextFrame=!0),e.GetSequenceString()!=n&&(e.skinUrl!=i?(this.skinImage=null,this.reqRenderCellCanvasOnNextFrame=!0,e.skinUrl&&c.ImageWrapper.LoadImageThen(e.skinUrl,(function(e){e&&u.SkinImageManager.instance.addSkinUrl(e.src),t.skinImage=e,t.reqRenderCellCanvasLazy=!0}))):this.reqRenderCellCanvasLazy=!0)},t.prototype.Purge=function(){this.skinImage&&this.skinImage.src&&u.SkinImageManager.instance.removeSkinUrl(this.skinImage.src)},t.interCanvas=document.createElement("canvas"),t}(),v=function(){function t(){this.cellCards=new Map}return t.prototype.GetCellCard=function(t,e){void 0===e&&(e=!1);var n=this.cellCards.get(t);return!n&&e&&(n=new y(t),this.cellCards.set(t,n)),h.Utils.Confirm(n),n},t.prototype.OnUserLeaved=function(t){var e=this.cellCards.get(t);e&&e.Purge(),this.cellCards.delete(t),this.cellCards.delete(t+1)},t.prototype.UpdateCardDrawingQueue=function(){var t=!1;this.cellCards.forEach((function(e){e.reqRenderCellCanvasOnNextFrame&&(e.RenderCellCanvas(),e.reqRenderCellCanvasOnNextFrame=!1,t=!0)})),this.cellCards.forEach((function(e){!t&&e.reqRenderCellCanvasLazy&&(e.RenderCellCanvas(),e.reqRenderCellCanvasLazy=!1,t=!0)}))},t.instance=new t,t}(),b=function(){function t(){this.box=new g.Container,this.baseShape=new g.Sprite,this.baseShape.anchor.set(.5),this.baseSprite=new g.Sprite,this.baseSprite.anchor.set(.5),this.overShape=new g.Graphics,this.nameLabel=new g.Text,this.massLabel=new g.BitmapText("",{fontName:"GAMEPLAY_MASS"}),this.box.addChild(this.baseShape),this.box.addChild(this.baseSprite),this.box.addChild(this.overShape)}return t.Gain=function(){return t.pool.Gain()},t.Maintain=function(){t.pool.Maintain()},t.prototype.Release=function(){this.box.removeChild(this.nameLabel),this.box.removeChild(this.massLabel),t.pool.Release(this)},Object.defineProperty(t.prototype,"isPlayerCell",{get:function(){return 0==this.node.cellType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVirus",{get:function(){return 2==this.node.cellType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPellet",{get:function(){return 1==this.node.cellType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFood",{get:function(){return 3==this.node.cellType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFunnel",{get:function(){return 4==this.node.cellType},enumerable:!0,configurable:!0}),t.prototype.SetupLabel=function(t){t.style&&(t.style.fontFamily="Meiryo, Arial",t.style.fontWeight="bold",t.style.stroke="#000000",t.style.lineJoin="round",t.style.fontSize=.13*this.baseSize>>0,t.style.strokeThickness=.015*this.baseSize>>0)},t.prototype.Initialize=function(t){this.node=t,t.entity=this,this.glow=this.cellCard=this.baseSize=null,this.isPlayerCell?this.cellCard=v.instance.GetCellCard(t.ownerPlayerId):this.isVirus&&(this.cellCard=i.instance),this.UpdateBaseShape(),this.cellCard&&(this.box.addChild(this.nameLabel),this.box.addChild(this.massLabel)),this.SetupLabel(this.nameLabel),this.SetupLabel(this.massLabel),this.baseColor=-1,this.labelColor=-1,this.edgeColor=-1,this.edgeColor2=-1,this.ringColor=-1,this.frameTick=0,this.x=0,this.y=0,this.scale=1,this.x0=0,this.y0=0,this.scale0=1,this.x1=0,this.y1=0,this.scale1=0,this.angle=0,this.speed=0,this.speedApplyTime=0,this.time=0,this.mass=0,this.isInEatableSection=!1},t.prototype.UpdateProps=function(t){this.node=t,t.entity=this,0!=this.mass&&this.isPellet||this.UpdatePosRadius()},t.prototype.UpdateLabels=function(t,e,n){var i=null!=t,o=e>=0;if((i||o)&&this.labelColor!=n){this.labelColor=n;var l=r.ColorHelper.ColorToHtmlString(n);this.nameLabel.style.fill=l,this.massLabel.tint=n}if(i&&(h=this.nameLabel).text!=t&&(h.text=t,h.x=-h.width/2,h.y=-h.height/2),o){var c=e.toString();if(this.massLabel.text!=c){var d,h=this.massLabel,p=2;let e;this.isVirus?(p=1.9,s.gs.uconfig.VirusSplitHint?(c=5-(c-100)/16,d=4):d=2.5):d=1,h.scale.x=d,h.scale.y=d,e=c<1e3?c:s.gs.uconfig.SimplifiedMass?(c/100>>0)/10+"K":c,h.text=e,h.x=-h.width/2,h.y=-h.height/p,i&&t&&(h.y+=.2*this.baseSize)}}this.nameLabel.visible=i,this.massLabel.visible=o;let u=!s.gs.uconfig.AutoHideText||a.gameCore.sight.eyeScale*this.node.r>27;this.nameLabel.visible=i&&u,this.massLabel.visible=o&&u},t.prototype.UpdateBaseShape=function(){const t=m.CurrentConfigCardSize;if(this.isPellet||this.isFood){const e=!1;if(this.baseSize!=t||this.glow!=e){this.baseSize=t,this.glow=e,this.massLabel.fontSize=.13*this.baseSize>>0,this.baseShape.blendMode=e?PIXI.BLEND_MODES.SCREEN:PIXI.BLEND_MODES.NORMAL;const n=e?"GP_GLOWING_PELLET":"GP_BASE_LOW";this.baseShape.texture=PIXI.utils.TextureCache[n]}return void(0==this.node.ownerPlayerId?s.gs.uconfig.ShowFood?this.box.visible=!0:this.box.visible=!1:(s.gs.uconfig.ShowPelletSkin&&(this.cellCard=v.instance.GetCellCard(this.node.ownerPlayerId)),this.box.visible=!0))}this.box.visible=!0;const e=s.gs.uconfig.GlowingCells;if(this.baseSize!=t||this.glow!=e)if(this.baseSize=t,this.glow=e,this.massLabel.fontSize=.13*this.baseSize>>0,this.baseShape.blendMode=PIXI.BLEND_MODES.NORMAL,200==this.baseSize){const t=e?"GP_GLOWING_LOW":"GP_BASE_LOW";this.baseShape.texture=PIXI.utils.TextureCache[t]}else if(400==this.baseSize){const t=e?"GP_GLOWING_MEDIUM":"GP_BASE_MEDIUM";this.baseShape.texture=PIXI.utils.TextureCache[t]}else{const t=e?"GP_GLOWING_HIGH":"GP_BASE_HIGH";this.baseShape.texture=PIXI.utils.TextureCache[t]}},t.prototype.UpdateDrawing=function(t,e,n,i,o){var l=this.baseSize/2,c=this.baseSize/200,d=e>=0||i>=0||o>=0;if(this.isVirus&&s.gs.uconfig.VirusRangeHint){d=!0,(u=this.overShape).clear(),u.alpha=1;let t=r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clVirusRangeHint")),e=s.gs.ucolors.GetAlpha("clVirusRangeHint");u.beginFill(t,e),u.drawCircle(0,0,880/this.scale),u.endFill()}if(d&&(this.edgeColor!=e||this.edgeColor2!=i||this.ringColor!=o)){this.node.ownerPlayerId,a.gameCore.nodeMan.activeSelfPlayerId;if(this.edgeColor=e,this.edgeColor2=i,this.ringColor=o,(u=this.overShape).clear(),u.alpha=1,e>=0){var h=s.gs.uconfig.MarkerThickness*c;if(u.lineStyle(h,e),u.drawCircle(0,0,l-h/2),n){var p=.707*l;u.moveTo(p,-p),u.lineTo(-p,p)}}i>=0&&(h=this.mass>2e4?8.75*c:6.25*c,u.lineStyle(h,i),u.drawCircle(0,0,l-h/2)),o>=0&&(h=5*c,u.lineStyle(h,o),u.drawCircle(0,0,l+10*c))}this.overShape.visible=d,this.overShape.alpha=s.gs.uconfig.MarkerAlpha;var u,g=t>=0;g&&this.baseColor!=t&&(this.baseColor=t,this.baseShape.tint=t),this.baseShape.visible=g},t.prototype.UpdateGraphicsForFrame=function(){var t=this.baseSize;this.baseSize=m.CurrentConfigCardSize;var e=this.baseSize!=t,n=this.node,i=a.gameCore.nodeMan,l=a.gameCore.uMan,c=r.GameHelper.DecodePlayerId(n.ownerPlayerId),d=c[0],p=c[1],u=l.GetUserInfoById(d),g=l.GetTeamInfoById(u.teamId),f=u.isBot,y=g==l.selfTeamInfo,v=l.selfTeamInfo.section,b=[gVar.conn1.id,gVar.conn2.id,gVar.conn1.id+1,gVar.conn2.id+1],S=(this.isPlayerCell||this.isFood)&&!r.GameHelper.CheckIsInEatableSection(g.section,v);this.isInEatableSection=S;var x=s.gs.gstates.isPlaying&&S;this.box.alpha=x?s.gs.uconfig.AnotherSectionCellsAlpha:1;var k=this.isPlayerCell&&(65534&n.ownerPlayerId)==l.selfUserId,C=this.isPlayerCell&&n.ownerPlayerId==i.activeSelfPlayerId;e&&(this.SetupLabel(this.nameLabel),this.SetupLabel(this.massLabel));var w=this.isPlayerCell&&!s.gs.uconfig.ShowCircularName&&s.gs.uconfig.ShowName&&!(!s.gs.uconfig.ShowSelfName&&k)&&""!=u.fullName,_=s.gs.uconfig.ShowMass&&(this.isPlayerCell||this.isVirus),M=w&&u.fullName?u.fullName:null,I=_?n.mass:-1,P=this.isVirus?16777215:g.color;this.UpdateLabels(M,I,P);var T=-1,R=-1,A=-1,U=-1,N=!1;if(this.isPlayerCell||this.isFood||this.isFunnel?T=u.colors[p]:this.isPellet&&(T=r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clPellet"))),this.isPlayerCell){if(gVar.ring=C,s.gs.uconfig.ShowSplitPrediction&&C){var O=n.splitOrderWeight,E=o.Nums.MapTo(O,.9,.58);R=16777215&r.ColorHelper.ColorFromHSVA(E,1,1,1)}if(s.gs.uconfig.ShowOrderRing2&&b.includes(d)&&(R=C?r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerRing")):r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerRing2"))),s.gs.uconfig.ShowOrderRing&&C&&(R=r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerRing"))),s.gs.uconfig.ShowCellRing){var F=r.ColorHelper.invertColor(r.ColorHelper.ColorToHtmlString(u.colors[p]));R=r.ColorHelper.ColorFromHtmlString(F)}if(s.gs.uconfig.ShowMassMarker&&!C){var B=n.sizeLevel,H=s.gs.uconfig.MarkerExtend?[r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerA")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerB")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerC")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerD")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerE")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerF")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerG")),r.ColorHelper.ReplaceAlpha(s.gs.ucolors.GetColor("clMarkerH")),204]:[16711680,16737792,16776960,56831,43520,204];if(-1!=B){var D=H[B];s.gs.uconfig.ShowSkin&&(s.gs.uconfig.ShowEnemySkin||y)?(R=D,N=!f&&!y,s.gs.gconfig.ShowAlwaysAllPlayersSkin&&(N=!1)):T=D}}if(s.gs.uconfig.ShowSplitIndicator&&s.gs.gstates.isPlaying&&!k&&n.showMark&&(U=n.canEat?65280:11184810),s.gs.uconfig.ShowAutoSplitAlert&&!s.gs.gstates.isBenchmarkMode&&n.mass>=17325){var V=this.frameTick/25*.5%1;(V*=2)>1&&(V=2-V),E=n.mass>2e4?o.Nums.MapTo(V,0,.33):o.Nums.MapTo(V,.2875,.725),A=16777215&r.ColorHelper.ColorFromHSVA(E,1,1,1)}}let G=this.isPlayerCell||this.isFood;if(this.cellCard,G||h.Utils.Confirm(-1==R&&-1==A&&-1==U),G&&this.cellCard&&this.cellCard.skinVisible&&(T=-1),this.UpdateDrawing(T,R,N,A,U),this.cellCard&&this.cellCard.texture){this.baseSprite.texture=this.cellCard.texture;var L=this.baseSize/this.cellCard.cardSize;this.baseSprite.scale.x=L,this.baseSprite.scale.y=L}this.UpdateBaseShape(),this.baseSprite.visible=null!=this.cellCard},t.prototype.UpdateInterpolation=function(t,e){this.frameTick++;const n=s.gs.uconfig;if(2==n.InterpolationType){var i=o.Nums.MapTo(n.InterpolationSpeed,.9,.5);this.x=o.Nums.EasyFilter(this.x,this.x1,i),this.y=o.Nums.EasyFilter(this.y,this.y1,i),this.scale=o.Nums.EasyFilter(this.scale,this.scale1,i),this.speedApplyTime-=t,this.speedApplyTime<=0&&(this.speed=0);var a=1*r.GameHelper.MassToRadius(this.mass),l=s.gs.gconfig.FieldSize;o.Nums.InRange(this.x1,a,l-a)&&o.Nums.InRange(this.y1,a,l-a)||(this.speed=0),this.x1+=Math.cos(this.angle)*this.speed,this.y1+=Math.sin(this.angle)*this.speed}else if(1==n.InterpolationType){const t=this.node,i=this.isFood&&(!n.ShowPelletSkin||!this.cellCard)||this.isPellet?200:this.baseSize,o=e;t.LinearUpdate(o),this.x=t.x,this.y=t.y,this.scale=2*t.r/i}else{var c=performance.now(),d=o.Nums.MapTo(n.InterpolationSpeed,120,40),h=o.Nums.Clamp((c-this.time)/d,0,1);this.x=o.Nums.Lerp(this.x0,this.x1,h),this.y=o.Nums.Lerp(this.y0,this.y1,h),this.scale=o.Nums.Lerp(this.scale0,this.scale1,h)}this.box.x=this.x,this.box.y=this.y,this.box.scale.x=this.scale,this.box.scale.y=this.scale,this.box.zIndex=this.scale*(this.isPlayerCell||this.isVirus?1:200/this.baseSize)+1e-8*this.node.nodeId+(this.isInEatableSection?100:0)},t.prototype.UpdatePosRadius=function(){this.time=performance.now();const t=this.isFood&&(!s.gs.uconfig.Show||!this.cellCard)||this.isPellet?200:this.baseSize;var e=0==this.mass,n=this.node.nx,i=this.node.ny,o=this.node.mass,a=2*r.GameHelper.MassToRadius(o)/t,l=this.node.motionAngle,c=this.node.motionSpeed;2==s.gs.uconfig.InterpolationType?(this.speed=25*c/60*.6,this.speedApplyTime=50):this.speed=0,e?(this.x0=n,this.y0=i,this.scale0=a,this.x=n,this.y=i,this.scale=a):(this.x0=this.x,this.y0=this.y,this.scale0=this.scale),this.x1=n,this.y1=i,this.scale1=a,this.angle=l,this.mass=o},t.pool=new r.ObjectPool(s.gs.gconfig.MaxCellsNum,(function(){return new t})),t}(),S=function(){function e(){this.delta=0,this.cells=new Map,this.time0=Date.now(),this.checkQueue_interval=new p.PerformanceCheckQueue(60),this.checkQueue_duration=new p.PerformanceCheckQueue(60),this.frameIndex=0}return e.prototype.Initialize=function(){var e=this,o=document.querySelector("#game_canvas_layer_main"),r={width:o.width,height:o.hight,view:o,antialias:s.gs.uconfig.Antialias,transparent:!0,resolution:s.gs.uconfig.HDMode+1,autoDensity:s.gs.uconfig.HDMode,powerPreference:"high-performance"};(t=g.autoDetectRenderer(r)).cells=this.cells,this.renderer=t,this.drawingRoot=new g.Container,this.stage=new g.Container,this.drawingRoot.addChild(this.stage),this.fieldGraphics=new d.FieldGraphics(!0),this.stage.addChild(this.fieldGraphics.box);var l=function(){e.fieldGraphics.SetCoordVisibility(s.gs.uconfig.ShowCoord)};s.gs.uconfig.RegisterChangedProc("ShowCoord",l),l(),this.cellsBox=new g.Container,this.stage.addChild(this.cellsBox),i.instance.Initialize(),this.gfs=new n(this),this.stage.addChild(this.gfs.box),a.gameCore.nodeMan.gameViewSyncNodesToListProc=this.SyncNodeListToModel.bind(this),a.gameCore.uMan.userLeavedProc=function(t){v.instance.OnUserLeaved(t)};var c=function(){var t=window.innerWidth,n=window.innerHeight;e.renderer.resize(t,n),a.gameCore.sight.SetScreenSize(t,n)};c(),window.onresize=c;const h=(t,e,n)=>{n=n||1;const i=document.createElement("canvas"),o=t+(e?400:0);i.width=i.height=2*o;const r=i.getContext("2d");r.beginPath(),r.fillStyle="#ffffff",r.shadowColor="#ffffff",r.shadowBlur=e,r.arc(o,o,t,0,2*Math.PI);for(var s=0;s<n;s++)r.fill(),r.globalAlpha/=2;return PIXI.Texture.from(i)};(()=>{const t=document.createElement("canvas"),e=t.getContext("2d");var n=150;t.width=300,t.height=300;const i=e.createRadialGradient(n,n,112.5,n,n,n);i.addColorStop(0,"transparent"),i.addColorStop(1,"white"),e.fillStyle=i,e.beginPath(),e.arc(n,n,n,0,2*Math.PI,!1),e.fill();let o=PIXI.Texture.from(t);o.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,PIXI.Texture.addToCache(o,"Waves")})();const p=h(100),u=h(200),f=h(400),m=h(100,50,1),y=h(200,100,1),b=h(400,200,1);p.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,u.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,f.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,m.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,y.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,b.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,PIXI.Texture.addToCache(p,"GP_BASE_LOW"),PIXI.Texture.addToCache(u,"GP_BASE_MEDIUM"),PIXI.Texture.addToCache(f,"GP_BASE_HIGH"),PIXI.Texture.addToCache(m,"GP_GLOWING_LOW"),PIXI.Texture.addToCache(y,"GP_GLOWING_MEDIUM"),PIXI.Texture.addToCache(b,"GP_GLOWING_HIGH");const S=()=>{const t=document.createElement("canvas"),e=500;t.width=t.height=1e3;const n=t.getContext("2d"),i=s.gs.uconfig.PelletCellsAlpha;n.beginPath(),n.fillStyle="#ffffff",n.shadowColor="#ffffff",n.shadowBlur=2e3,n.arc(e,e,100,0,2*Math.PI),n.fill(),n.globalAlpha=i/2+.125,n.fill(),n.save(),n.clip(),n.clearRect(0,0,1e3,1e3),n.restore(),n.shadowBlur=0,n.globalAlpha=i,n.fill();let o=PIXI.Texture.from(t);o.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,PIXI.Texture.addToCache(o,"GP_GLOWING_PELLET")};S(),s.gs.uconfig.RegisterChangedProc("PelletCellsAlpha",S)},e.prototype.StartAnimation=function(){var t=this,e=function(){requestAnimationFrame(e),r.TimeChecker.Start("FrameProc"),t.FrameProc(),r.TimeChecker.Stop(),t.updateWaves()};e(),this.UpdatePerf(),this.TimeHud(),this.wave_Sprite=new g.Sprite,this.wave_Sprite.anchor.x=.5,this.wave_Sprite.anchor.y=.5,t.stage.addChild(this.wave_Sprite),this.wave_Sprite.texture=PIXI.utils.TextureCache.Waves,this.wave_Sprite.visible=!1},e.prototype.FrameProc=function(){this.frameIndex++;var t=s.gs.usupport.TargetFrameRate;s.gs.gstates.isBenchmarkMode&&(t=60);var e=60/t;if(this.frameIndex%e==0&&(r.PageHelper.Instance.Update(),r.PageHelper.Instance.IsActive)){s.gs.gstates.isBenchmarkMode&&a.gameCore.benchDataFeeder.FrameUpdateProc(),a.gameCore.sight.UpdateFrame();var n=performance.now();v.instance.UpdateCardDrawingQueue(),b.Maintain();var i=performance.now(),o=i-this.time0;this.time0=i;let t=this.delta*s.gs.uconfig.RenderOffset;this.cells.forEach((function(e){e.UpdateInterpolation(o,i+t),e.UpdateGraphicsForFrame(),s.gs.uconfig.TogglePlayerTransparentCells&&e.isPlayerCell?(e.baseSprite.alpha=s.gs.uconfig.PlayerCellsAlpha,e.baseShape.alpha=s.gs.uconfig.PlayerCellsAlpha,e.overShape.fillAlpha=0):s.gs.uconfig.GlowingNonPlayerCells||!e.isFood&&!e.isPellet?(e.baseSprite.alpha=1,e.baseShape.alpha=1,e.overShape.fillAlpha=1):(e.baseSprite.alpha=s.gs.uconfig.PelletCellsAlpha,e.baseShape.alpha=s.gs.uconfig.PelletCellsAlpha,e.overShape.fillAlpha=0)})),this.gfs.Update(),this.checkQueue_interval.Push(o),this.cellsBox.sortChildren(),this.UpdateStagePlacement(),this.fieldGraphics.SetScale(s.gs.gconfig.FieldSize/this.fieldGraphics.baseSize),this.renderer.render(this.drawingRoot);var l=performance.now()-n;this.delta=(this.delta+performance.now()-i)/2,this.checkQueue_duration.Push(l)}},e.prototype.UpdatePerf=function(){setTimeout(this.UpdatePerf.bind(this),500),r.TimeChecker.Start("UpdatePerf");var t=a.gameCore.perfModel,e=this.checkQueue_duration.GetAverageValue();t.avgDuration=e,t.avgRate=e/17;var n=this.checkQueue_interval.GetAverageValue();t.avgFps=1e3/n,t.numCellsRendered=this.cells.size,r.TimeChecker.Stop()},e.prototype.TimeHud=function(){var t=new Date;var e;setTimeout(this.TimeHud.bind(this),1e3),$("#time-hud").text((e=t).getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())},e.prototype.updateWaves=function(){let t=gVar.Waves;for(let e=t.length-1;e>=0;e--){this.wave_Sprite.visible=!0;let n=(Date.now()-t[e].time)/2;this.wave_Sprite.position.x=t[e].x,this.wave_Sprite.position.y=t[e].y,this.wave_Sprite.scale.set(1+.01*n),this.wave_Sprite.alpha-=1e-4*n/5,n>t[e].wavelength&&(gVar.Waves.splice(e,1),this.wave_Sprite.visible=!1,this.wave_Sprite.alpha=1)}},e.prototype.UpdateStagePlacement=function(){var t=this.stage,e=a.gameCore.sight,n=e.scw/2-e.eyeX*e.eyeScale,i=e.sch/2-e.eyeY*e.eyeScale;t.position.x=n,t.position.y=i,t.scale.x=e.eyeScale,t.scale.y=e.eyeScale},e.prototype.SyncNodeListToModel=function(){var t=this,e=a.gameCore.nodeMan,n=new Set(this.cells.keys()),i=new Set;e.nodes.forEach((function(t){0==t.cellType&&(a.gameCore.uMan.GetUserInfoById(t.ownerPlayerId),i.add(t.ownerPlayerId))})),i.forEach((function(t){v.instance.GetCellCard(t,!0).Update()})),e.nodes.forEach((function(e){var i=e.nodeId,o=t.cells.get(i);o||((o=b.Gain()).Initialize(e),t.cells.set(i,o),t.cellsBox.addChild(o.box)),o.UpdateProps(e),n.delete(i)})),n.forEach((function(e){var n=t.cells.get(e);t.cellsBox.removeChild(n.box),t.cells.delete(e),n.Release()}))},e}();e.GameView=S}(n.GameViewDomain2||(n.GameViewDomain2={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4),r=function(){function t(){}return t.prototype.Initialize=function(t){this.ctx=t.getContext("2d"),this.sz=t.width,o.gameCore.gameHudModel.chartDataHandlerProc=this.PostTeamRankingData.bind(this)},t.prototype.NormAngleToChartAngle=function(t){var e=Math.PI;return.5*-e+t*e*2},t.prototype.PostTeamRankingData=function(t){if(i.gs.uconfig.ShowLeaderboard||!i.gs.gconfig.ShowTeamRanking){var e=this.ctx,n=this.sz/2,o=this.sz/2,r=Math.PI;e.font="16px Overpass, メイリオ, Arial",e.fillStyle="#CCC",e.clearRect(0,0,this.sz,this.sz),e.beginPath(),e.arc(n,n,o,0,2*r,!1),e.fill();for(var s=0,a=0,l=t;a<l.length;a++){var c=(m=l[a]).name,d=m.colorStr,h=1e-4*m.score;e.fillStyle=d,e.beginPath();var p=this.NormAngleToChartAngle(s),u=this.NormAngleToChartAngle(s+h);e.moveTo(n,n),e.lineTo(n+Math.cos(p)*o,n+Math.sin(p)*o),e.arc(n,n,o,p,u,!1),e.lineTo(n,n),e.stroke(),e.fill(),s+=h}e.beginPath(),e.arc(n,n,o,0,2*r,!1),e.stroke(),s=0;for(var g=0,f=t;g<f.length;g++){var m;if(c=(m=f[g]).name,h=1e-4*m.score,p=this.NormAngleToChartAngle(s),u=this.NormAngleToChartAngle(s+h),h>.07){var y=(p+u)/2,v=e.measureText(c).width;e.fillStyle="black";var b=.6*o;e.fillText(c,n+Math.cos(y)*b-v/2,n+Math.sin(y)*b+4)}s+=h}}},t}();e.TeamRankingChartView=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=100,o=(new PIXI.Graphics).beginFill(16777215,1).drawCircle(0,0,50).endFill().generateCanvasTexture(1,2),r=(new PIXI.Graphics).lineStyle(18,16777215).drawCircle(0,0,38).generateCanvasTexture(1,2),s=(new PIXI.Graphics).beginFill(16777215,1).drawCircle(0,0,50).endFill().lineStyle(8,16777215).drawCircle(0,0,66).generateCanvasTexture();o.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,r.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,s.baseTexture.mipmap=PIXI.MIPMAP_MODES.ON,PIXI.Texture.addToCache(o,"MM_BASE"),PIXI.Texture.addToCache(r,"MM_ENEMY"),PIXI.Texture.addToCache(s,"MM_SELF");var a=n(1),l=n(3),c=n(0),d=n(4),h=n(12),p=n(6),u=function(){function t(){this.box=new p.Container,this.box2=new p.Container,this.box.addChild(this.box2),this.baseShape=new p.Sprite,this.baseShape.anchor.set(.5),this.box2.addChild(this.baseShape),this.box2.alpha=1,this.nameLabel=new p.Text,this.massLabel=new p.BitmapText("",{fontName:"MINIMAP_MASS"}),this.SetupLabel(this.nameLabel,0),this.box.addChild(this.nameLabel),this.box.addChild(this.massLabel)}return t.Gain=function(){return t.pool.Gain()},t.prototype.Release=function(){t.pool.Release(this)},t.prototype.Initialize=function(t,e){this.playerId=t,this.isBot=e,this.name=null,this.shortName=null,this.color=0,this.mass=0,this.x=0,this.y=0,this.scale=0,this.x1=0,this.y1=0,this.scale1=0,this.updated=!0,this.isSelfNode=!0,this.isTeammate=!1,this.nameLabel.style.fill="#FFFFFF",this.nameLabel.text=null,this.massLabel.text=this.mass,this.nameLabel.visible=!e},t.prototype.SetupLabel=function(t){t.style.fontFamily="Meiryo, Arial",t.style.fontSize=13,t.style.fill="#FFFFFF"},t.prototype.SetBasicProps=function(t,e,n,i){if(this.nameLabel&&this.name!=t){var o=this.nameLabel;o.text=t,o.x=-o.width/2,o.y=-o.height/2,this.name=t}this.shortName=i,this.teamId=n,this.nameLabel.visible=!this.isBot&&!e},t.prototype.UpdateBotDynamicProps=function(t,e){var n=this.massLabel;if(n.x=n.width/2,n.y=n.height/2,this.nameLabel&&this.name!=e){var i=this.nameLabel;i.text=e,i.x=-i.width/2,i.y=-i.height/2,this.name=e}this.isBot=t,this.nameLabel.visible=!this.isBot&&!this.isSelfNode},t.prototype.SetVariableProps=function(t,e,n){this.isTeammate=e;const i=c.gs.gstates;if(this.color!=t||this.isSelfNode!=n){this.isSelfNode=n,this.baseShape.tint=this.color=t;var o=l.ColorHelper.ColorToHtmlString(t);this.nameLabel&&(this.nameLabel.style.fill=o)}i.isSpectate&&!i.isDeadSpectation?(this.isSelfNode?this.baseShape.texture=PIXI.utils.TextureCache.MM_SELF:this.baseShape.texture=PIXI.utils.TextureCache.MM_BASE,this.baseShape.alpha=1,this.nameLabel.alpha=1):(this.isSelfNode?this.baseShape.texture=PIXI.utils.TextureCache.MM_SELF:(this.isTeammate||this.isBot)&&(this.baseShape.texture=PIXI.utils.TextureCache.MM_BASE),c.gs.uconfig.MapOpaque?(this.baseShape.alpha=1,this.nameLabel.alpha=1):(this.baseShape.alpha=this.isBot?.75:this.isTeammate?1:.375,this.nameLabel.alpha=this.isTeammate?1:.75)),this.box.visible=this.isBot||e||i.isSpectate&&!i.isDeadSpectation||c.gs.gconfig.ShowAlwaysAllPlayersInMap||!i.isSpectate&&c.gs.uconfig.MapCheat},t.prototype.UpdateInterpolation=function(){(this.x=a.Nums.EasyFilter(this.x,this.x1,.99),this.y=a.Nums.EasyFilter(this.y,this.y1,.99),this.box.x=this.x,this.box.y=this.y,this.box2.scale.x=this.scale,this.box2.scale.y=this.scale,this.scale=a.Nums.EasyFilter(this.scale,this.scale1,.99),this.nameLabel)&&((t=this.nameLabel).y=-t.height-40*this.scale);if(this.massLabel){var t=this.massLabel;const e=this.mass;t.alpha=e>5600?this.isTeammate?0:Math.min(e/12500+.2,.95):0,t.y=-t.height/1.5,t.x=-t.width/2}},t.prototype.SetPosRadius=function(e,n,i){var o=t.mapCoordScale;e*=o,n*=o;var r=0==this.mass;this.mass=i,this.box._zIndex=i,this.massLabel.text=(i/100>>0)/10+"K";var s=l.GameHelper.MassToRadius(i);s*=o,s*=.75,this.isSelfNode&&s<4&&(s=4);var a=2*s/t.CellBaseSize;this.x1=e,this.y1=n,this.scale1=a,r&&(this.x=e,this.y=n,this.scale=a,this.box.x=e,this.box.y=n,this.box2.scale.x=a,this.box2.scale.y=a)},t.mapCoordScale=.01,t.CellBaseSize=i,t.pool=new l.ObjectPool(c.gs.gconfig.MaxPlayerUnitNum,(function(){return new t})),t}(),g=function(){function t(){this.box=new p.Container,this.gr=new p.Graphics,this.gr1=new p.Graphics,this.box.addChild(this.gr),this.box.addChild(this.gr1),this.box.zIndex=100}return t.prototype.Update=function(){var t=d.gameCore.sight,e=this.gr,n=this.gr1,i=u.mapCoordScale;if(e.clear(),n.clear(),c.gs.gstates.isRealtimeMode){var o=c.gs.ucolors.colorDefs.clGameForeground;e.lineStyle(1,o),n.lineStyle(1,o);var r=t.eyeX*i,s=t.eyeY*i,a=c.gs.gconfig.FieldSize*i;e.alpha=.6,e.moveTo(r,0),e.lineTo(r,a),e.moveTo(0,s),e.lineTo(a,s);t.ScreenToWorld(0,0);var l=gVar.camMinX,h=gVar.camMinY,p=(t.ScreenToWorld(window.innerWidth,window.innerHeight),gVar.camMaxX),g=gVar.camMaxY;l*=i,h*=i,p*=i,g*=i;t.ScreenToWorld(0,0);var f=gVar.tabcamMinX,m=gVar.tabcamMinY,y=(t.ScreenToWorld(window.innerWidth,window.innerHeight),gVar.tabcamMaxX),v=gVar.tabcamMaxY;f*=i,m*=i,y*=i,v*=i,e.moveTo(l,h),e.lineTo(p,h),e.lineTo(p,g),e.lineTo(l,g),e.lineTo(l,h),c.gs.gstates.isSpectate||(n.alpha=.6,n.moveTo(f,m),n.lineTo(y,m),n.lineTo(y,v),n.lineTo(f,v),n.lineTo(f,m))}},t}(),f=function(){function t(){this.nodes=new Map,this.mapFrontScreen=new g}return t.prototype.Initialize=function(t){var e=this;this.z=c.gs.uconfig,this.zz=c.gs.gconfig,this.uMan=d.gameCore.uMan,this.sz=t.width,this.px,this.py;var n={width:t.width,height:t.height,view:t,antialias:c.gs.uconfig.Antialias,transparent:!0,resolution:c.gs.uconfig.HDMode+1,autoDensity:c.gs.uconfig.HDMode,powerPreference:"high-performance"};this.renderer=p.autoDetectRenderer(n),this.drawingRoot=new p.Container;var i=new h.FieldGraphics(!1);this.drawingRoot.addChild(i.box),i.SetScale(this.sz/i.baseSize),this.stage=new p.Container,this.stage.addChild(this.mapFrontScreen.box),this.drawingRoot.addChild(this.stage);var o=function(){requestAnimationFrame(o),c.gs.uconfig.ShowMap&&e.FrameProc()};o(),d.gameCore.gameHudModel.mapDataHandlerProc=this.PostMapData.bind(this)},t.prototype.FrameProc=function(){l.PageHelper.Instance.IsActive&&(u.mapCoordScale=this.sz/c.gs.gconfig.FieldSize,this.mapFrontScreen.Update(),this.nodes.forEach((function(t){return t.UpdateInterpolation()})),this.renderer.render(this.drawingRoot))},t.prototype.isInV=function(t,e,n){return!(t+n<gVar.camMaxX||e+n<gVar.camMinY||t-n>gVar.camMaxX||e-n>gVar.camMaxY)},t.prototype.PostMapData=function(t){var e=[],n=this;t.forEach((function(t){var i=n.uMan.GetUserInfoById(t.playerId);e.push(i)}));const i=[...new Set(e)].reduce((t,e)=>(e.team in t?t[e.team]++:t[e.team]=1,t),{});gVar.datas=i,gVar.massList=t,gVar.massList.sort((function(t,e){return e.mass-t.mass}));var o=this;this.nodes.forEach((function(t){return t.updated=!1}));for(var r=0,s=t;r<s.length;r++){var a=s[r],l=a.playerId,c=this.nodes.get(l);if(!c){var h=this.uMan.GetUserInfoById(l);if(-1==h.clientId)continue;g=h.miniMapName,f=h.isBot,(c=u.Gain()).Initialize(l,f);var p=(65534&l)==this.uMan.selfUserId;c.SetBasicProps(g,p,h.teamId,h.name),this.stage.addChild(c.box),this.nodes.set(l,c)}var m=this.uMan.GetTeamInfoForUser(l),y=m==this.uMan.selfTeamInfo,v=l==d.gameCore.nodeMan.activeSelfPlayerId;c.SetVariableProps(m.color,y,v),c.SetPosRadius(a.nx,a.ny,a.mass),c.updated=!0,a.playerId==this.uMan.selfUserId&&(this.px=a.nx,this.py=a.ny);var b=this.zz.FieldSize/5,S=["A","B","C","D","E","X"];if(a.playerId==gVar.conn1.id||a.playerId==gVar.conn1.id+1){var x=""+S[Math.floor(a.ny/b)]+(Math.floor(a.nx/b)+1);$("#pos1").text(x),$("#mass1").text((a.mass/1e3).toFixed(1)+"k")}if(a.playerId==gVar.conn2.id||a.playerId==gVar.conn2.id+1){var k=""+S[Math.floor(a.ny/b)]+(Math.floor(a.nx/b)+1);$("#pos2").text(k),$("#mass2").text((a.mass/1e3).toFixed(1)+"k")}var C=this.uMan.GetUserInfoById(l);if(-1!=C.clientId){var w=C.miniMapName,_=C.isBot;c.name==w&&c.isBot==_||c.UpdateBotDynamicProps(_,w)}}if(this.z.TopTab1Sight)for(var M=0;M<gVar.massList.length;M++){var I=Math.sqrt(Math.pow(gVar.massList[M].nx-this.px,2)+Math.pow(gVar.massList[M].ny-this.py,2));if(this.uMan.GetTeamInfoForUser(gVar.massList[M].playerId).teamId!=this.uMan.selfTeamInfo.teamId&&!this.isInV(gVar.massList[M].nx,gVar.massList[M].ny,gVar.massList[M].mass)&&I<gVar.camMaxX-gVar.camMinX&&I>gVar.camMaxY-gVar.camMinY){gVar.conn1.isAlive&&d.gameCore.conn.SendSpecifySpecTarget(gVar.massList[M].playerId,2);break}}var P=new Array;this.nodes.forEach((function(t){return!t.updated&&P.push(t)})),P.forEach((function(t){o.stage.removeChild(t.box),o.nodes.delete(t.playerId),t.Release()})),o.stage.sortChildren()},t}();e.MapView=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(3),r=(n(2),n(4)),s=function(t,e,n,i,o,r){this.senderName=t,this.message=e,this.timeStamp=n,this.nameColor=i,this.skinUrl=o,this.tripKey=r};e.ChatMessage=s;var a=function(){function t(t){this.text="",this.color="",this.score="",this.active=!1,this.index=t}return t.prototype.setData=function(t,e,n,i){this.text=t,this.color=e,this.score=n,this.active=!0,this.trip=i},t.prototype.setNoData=function(){this.active=!1},t}();e.LeaderboardEntry=a;var l=function(){function t(){this.leaderboardEntries=[],this.teamRankingEntries=[],this.chatMessages=[],this.selfScore=0,this.maxScore=0,this.leaderboardHeaderText="",this.cp=0,this.mp=0,this.rp=0,this.sp=0,this.p=0}return t.prototype.insertStubChatMessages=function(){for(var t=0;t<2;t++)this.PostChatMessage("テスト"+t,"テスト","0:00",null)},t.prototype.insertStubData=function(){},t.prototype.Initialize=function(){this.leaderboardHeaderText="暇つぶしアガリオ";for(var t=0;t<10;t++)(e=new a(t)).setNoData(),this.leaderboardEntries.push(e);for(t=0;t<4;t++){var e;(e=new a(t)).setNoData(),this.teamRankingEntries.push(e)}this.insertStubData()},t.prototype.SetAimPlayerClient=function(t){if(this.specTargetUserId!=t&&t!=gVar.conn1.id&&t!=gVar.conn2.id){if(this.specTargetUserId=t,t>=0&&t!=r.gameCore.uMan.selfUserId){var e=r.gameCore.uMan.GetUserInfoById(t);this.specTargetName=e.fullName}else this.specTargetName=null;this.isHudUpdated=!0}},t.prototype.SetSpecTargetScore=function(t){this.specTargetScore=t,this.isHudUpdated=!0},t.prototype.PostServerStatusData=function(t){o.PageHelper.Instance.IsActive&&(this.serverStatusText=t.split(/\r?\n/)[2].split(":")[1].split(/\r?\n/),this.isHudUpdated=!0)},t.prototype.PostLatencyData=function(t){this.latencyMs=t,this.isHudUpdated=!0},t.prototype.PostServerUserNumData=function(t,e,n,i){this.cp=t+e,this.mp=i,this.rp=n,this.sp=e,this.p=t,this.isHudUpdated=!0},t.prototype.PostLeaderboardData=function(t){if(o.PageHelper.Instance.IsActive&&i.gs.uconfig.ShowLeaderboard){for(var e=0;e<this.leaderboardEntries.length;e++){var n=this.leaderboardEntries[e];if(e<t.length){var r=t[e];n.setData(r.name,r.colorStr,(.001*r.score).toFixed(1)+"k",r.trip)}else n.setNoData()}this.isHudUpdated=!0}},t.prototype.PostTeamRankingData=function(t){if(o.PageHelper.Instance.IsActive){if(i.gs.uconfig.ShowLeaderboard){for(var e=0;e<this.teamRankingEntries.length;e++){var n=this.teamRankingEntries[e];if(e<t.length){var r=t[e];n.setData(r.name,r.colorStr,(.01*r.score).toFixed(1)+"%",gVar.datas[r.name])}else n.setNoData()}this.isHudUpdated=!0}this.chartDataHandlerProc(t)}},t.prototype.PostMapData=function(t){i.gs.uconfig.ShowMap&&this.mapDataHandlerProc(t)},t.prototype.ClearChatMessages=function(){this.chatMessages=[],this.isHudUpdated=!0},t.prototype.PostChatMessage=function(t,e,n,i,o,r){i||(i="#0CF");var a=new s(e,n,t,i,o,r);this.chatMessages.push(a),this.isHudUpdated=!0},t.prototype.PostServerDisplayMessage=function(t){this.serverDisplayMessageText=t,this.isHudUpdated=!0},t.prototype.ResetMaxScore=function(){this.maxScore=0,this.selfScore=0},t.prototype.PostSelfScoreData=function(t){this.selfScore=t,this.maxScore=Math.max(this.maxScore,t),this.isHudUpdated=!0},t.prototype.SetSplitNum=function(t){this.splitNum=t,this.isHudUpdated=!0},t}();e.GameHudModel=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(3),r=n(0),s=function(){};e.ServerInfo=s;var a=function(){function t(t){this.gameCore=t;var e=o.AppHelper.GetQueryObject();this.showAll=1==e.showall}return t.prototype.Start=function(){this.langCode=navigator.language.slice(0,2),this.UpdateList()},t.prototype.ConnectToServer=function(t){if(Date.now()-r.gs.gstates.playerDeadTimeStamp<2e3)console.log("server selection cancelled");else{var e=t.address;this.currentServerUri=e,localStorage.setItem("connTargetUri",e);var n=t.modName;this.gameCore.ConnectToGameServerEx("ws://"+e,n)}},t.prototype.FilterServers=function(t){var e=this;if(t.forEach((function(t){t.modName=t.name,t.numClients=t.numPlayers+t.numSpectors,t.order+=t.mirrorIndex,-1!=t.mirrorIndex&&(t.modName+=t.mirrorIndex),t.langCode&&e.langCode!=t.langCode&&(t.visible=!1)})),!this.showAll){for(var n={},i=0,o=t;i<o.length;i++)n[(a=o[i]).name+a.mirrorIndex]=a;for(var r=0,s=t;r<s.length;r++){var a,l=a=s[r],c=n[a.name+(a.mirrorIndex-1)];c&&(c.numClients>c.numMaxClients-25||l.numClients>10||(l.visible=!1))}}return t.filter((function(t){return t.visible})).sort((function(t,e){return t.order-e.order}))},t.prototype.UpdateList=function(){var t=this,e=i.AppConfigurator.instance.trackerServerUri,n=i.AppConfigurator.instance.trackerServerTargetSite;$.ajax({type:"GET",url:e+"/list",data:{targetSite:n},success:function(e){if(t.serverInfos=t.FilterServers(e),null==t.currentServerUri&&t.serverInfos.length>0){var n=localStorage.getItem("connTargetUri"),i=null;if(n)for(var o=0,r=t.serverInfos;o<r.length;o++){var s=r[o];if(s.address==n){i=s;break}}i||(i=t.serverInfos[0]),t.ConnectToServer(i)}t.Notify()}}),setTimeout(this.UpdateList.bind(this),5e3)},t}();e.ServerListModel=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(3),s=function(){function t(){}return t.AllocatePool=function(){null==this.pool&&(this.pool=new r.ObjectPool(1e3,(function(){return new t})))},t.prototype.Initialize=function(e){this.nodeId=t.seqId++,this.ownerPlayerId=e,this.counter=0;var n=o.gs.gconfig.FieldSize;this.x=i.Nums.RandF()*n,this.y=i.Nums.RandF()*n;var s=i.Nums.RandF();this.mass=i.Nums.MapTo(s*s*s,500,22500)>>0,this.color=r.GameHelper.GenarateRandomColor(),this.m_angle=i.Nums.RandF()*Math.PI*2,this.speed=i.Nums.MapTo(i.Nums.RandF(),20,80),this.nr=r.GameHelper.MassToRadius(this.mass)},t.prototype.Update=function(){this.x+=Math.cos(this.m_angle)*this.speed,this.y+=Math.sin(this.m_angle)*this.speed,this.counter++%4==0&&(this.mass+=100*Math.random()-50,this.mass=Math.max(Math.min(this.mass>>0,22500),500));var t=1.1*this.nr,e=o.gs.gconfig.FieldSize;i.Nums.InRange(this.x,t,e-t)||(this.m_angle=Math.PI-this.m_angle),i.Nums.InRange(this.y,t,e-t)||(this.m_angle=-this.m_angle)},t.seqId=0,t}(),a=function(){function t(t){this.nodes=[],this.tick=0,this.gameCore=t}return t.prototype.Start=function(){this.playerIds=this.gameCore.uMan.GetPlayerIdsAvailable(),s.AllocatePool(),this.averageFps=60,this.t0=performance.now();for(var t=0;t<700;t++);},t.prototype.AddNode=function(){var t=i.Nums.RandI(this.playerIds.length),e=this.playerIds[t],n=s.pool.Gain();n.Initialize(e),this.nodes.push(n)},t.prototype.RemoveNode=function(){var t=this.nodes.shift();t&&(s.pool.Release(t),this.gameCore.nodeMan.PostNodeRemoval(t.nodeId))},t.prototype.ClearNodes=function(){for(var t=0,e=this.nodes;t<e.length;t++){var n=e[t];s.pool.Release(n),this.gameCore.nodeMan.PostNodeRemoval(n.nodeId)}this.nodes=[]},t.prototype.FrameUpdateProc=function(){var t=performance.now(),e=1e3/(t-this.t0);this.t0=t,this.averageFps=i.Nums.EasyFilter(this.averageFps,e,.95),this.tick++,this.tick%2==0&&(this.averageFps>55?this.AddNode():this.RemoveNode());var n=this.gameCore.nodeMan;this.nodes.forEach((function(t){t.Update(),n.PostNodeData(t.nodeId,0,t.x,t.y,t.mass,t.ownerPlayerId,t.color,t.m_angle,t.speed)})),n.SyncGameViewToModel()},t.prototype.Stop=function(){this.ClearNodes()},t}();e.PerfBenchDataFeeder=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.ar=new Array,t&&(t instanceof Array?this.AddRange(t):this.Add(t))}return Object.defineProperty(t.prototype,"array",{get:function(){return this.ar},enumerable:!0,configurable:!0}),t.prototype.Count=function(t){if(t){var e=0;return this.ar.forEach((function(n){t(n)&&e++})),e}return this.ar.length},t.prototype.Add=function(t){this.ar.push(t)},t.prototype.AddUnique=function(t){this.Contains(t)||this.ar.push(t)},t.prototype.AddRange=function(t){var e;(e=this.ar).push.apply(e,t)},t.prototype.Clear=function(){this.ar.splice(0,this.ar.length)},t.prototype.RemoveAt=function(t){this.ar.splice(t,1)},t.prototype.Remove=function(t){var e=this.ar.indexOf(t);e>=0&&this.ar.splice(e,1)},t.prototype.RemoveAll=function(t){var e=this;this.ar.filter((function(e){return t(e)})).forEach((function(t){return e.Remove(t)}))},t.prototype.Contains=function(t){return this.ar.indexOf(t)>=0},t.prototype.First=function(t){return 0==this.ar.length?null:t?this.ar.filter(t)[0]:this.ar[0]},t.prototype.FirstOrDefault=function(t,e){return 0==this.ar.length?e:t?this.ar.filter(t)[0]:this.ar[0]},t.prototype.Product=function(e){return new t(this.ar.filter((function(t){return e.Contains(t)})))},t.prototype.Except=function(e){return new t(this.ar.filter((function(t){return e.ar.every((function(e){return t!=e}))})))},t.prototype.Concat=function(e){return new t(this.ar.concat(e.ar))},t.prototype.Distinct=function(){var e=new t;return this.ar.forEach((function(t){e.Contains(t)||e.Add(t)})),e},t.prototype.Union=function(t){var e=this.ToList();return t.ar.forEach((function(t){e.Contains(t)||e.Add(t)})),e},t.prototype.ForEach=function(t){for(var e=0;e<this.ar.length;e++)t(this.ar[e])},t.prototype.Where=function(e){return new t(this.ar.filter(e))},t.prototype.Select=function(e){return new t(this.ar.map(e))},t.prototype.LimitCount=function(e){return e<this.ar.length?new t(this.ar.slice(0,e)):this},t.prototype.Sort=function(e){return new t(this.ar.sort(e))},t.prototype.GroupBy=function(e){var n={};this.ar.forEach((function(i){var o=e(i);n[o]||(n[o]=new t),n[o].Add(i)}));var i=new t;for(var o in n)i.ar.push(n[o]);return i},t.prototype.Take=function(e){return new t(e>0?this.ar.slice(0,e):this.ar.slice(e))},t.prototype.TakeNFromTail=function(e){return new t(this.ar.slice(-e))},t.prototype.Skip=function(e){return e>this.ar.length?new t:new t(this.ar.slice(e))},t.prototype.All=function(t){for(var e=0,n=this.ar;e<n.length;e++)if(!t(n[e]))return!1;return!0},t.prototype.Any=function(t){for(var e=0,n=this.ar;e<n.length;e++)if(t(n[e]))return!0;return!1},t.prototype.ToArray=function(){return this.ar.slice(0)},t.prototype.ToList=function(){return new t(this.ar.slice(0))},t.prototype.Min=function(t){var e=t?this.ar.map(t):this;return Math.min.apply(Math,e)},t.prototype.Max=function(t){var e=t?this.ar.map(t):this;return Math.max.apply(Math,e)},t.prototype.Sum=function(t){return 0==this.Count()?0:(t?this.ar.map(t):this).reduce((function(t,e){return t+e}))},t.prototype.SafeSum=function(t){return this.Sum(t)},t.prototype.Average=function(t){return 0==this.Count()?0:this.Sum(t)/this.ar.length},t.prototype.OrderBy=function(e){var n=this.ar.slice(0);return n.sort((function(t,n){return e(t)-e(n)})),new t(n)},t.prototype.OrderByDescending=function(e){var n=this.ar.slice(0);return n.sort((function(t,n){return e(n)-e(t)})),new t(n)},t.prototype.SelectMany=function(e){var n=new t;return this.ar.forEach((function(t){var i=e(t);n.AddRange(i.ar)})),n},t.prototype.IndicesOf=function(e){for(var n=[],i=0;i<this.ar.length;i++)this.ar[i]==e&&n.push(i);return new t(n)},t.prototype.SafeTake=function(t){return this.Take(Math.min(t,this.ar.length))},t.prototype.Reverse=function(){return new t(this.ar.reverse())},t.prototype.Shift=function(){return this.ar.shift()},t}();e.List=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(32),a=n(1),l=n(3),c=new function(){this.ChatAppCoreVersion="ChatAppCore B100",this.MessageMaxLength=140,this.ProfileCommentMaxLength=60},d=function(){this.Sessions="Session",this.TeamMembers="Team Members",this.AllUsers="All Users",this.Online="Online",this.Offline="Offline",this.Advertisement="AD",this.Name="Name",this.Skin="Skin",this.Comment="Comment",this.ShowTripKey="Show Trip Key",this.Blocked="Blocked",this.BlockedMessageNotification="You are blocked by the peer. This message has not been sent.",this.DeleteMessage="Delete Message",this.BlockUnblock="Block/Unblock",this.AppInstruction0="An advanced chat system designed for agar private servers. There are server-wide chat, team-specific chat, and private chat between two users. Server administator has no concern in private chat.",this.AppInstruction1="Name and skin url are set on the main game window. Either server-wide chat or team-specific chat is synchronized to the chat on game screen (depends on the setting of game server)."},h=function(){this.Sessions="セッション",this.TeamMembers="チームメンバー",this.AllUsers="すべてのユーザー",this.Online="オンライン",this.Offline="オフライン",this.Advertisement="広告",this.Name="名前",this.Skin="スキン",this.Comment="コメント",this.ShowTripKey="トリップキーを表示",this.Blocked="ブロック中",this.BlockedMessageNotification="ブロックされています。この発言は相手に届いていません。",this.DeleteMessage="メッセージを削除",this.BlockUnblock="ブロック/解除",this.AppInstruction0="agarのプライベートサーバ向けに設計されたチャットシステムです。サーバ全体での会話,チーム毎の会話,ユーザ間での個別の会話があります。サーバ管理者はユーザ同士の個別の会話の内容には関知しません。",this.AppInstruction1="名前とスキンURLはゲーム画面で設定したものが使われます。全体の会話またはチームの会話がゲーム内でのチャットと同期しています(ゲームサーバの設定により異なります)。"},p=navigator.language.startsWith("ja")?new h:new d,u=n(0).gs.uconfig,g=function(){function t(t){this.userId=t}return Object.defineProperty(t.prototype,"FullName",{get:function(){return u.ShowUnichatTripKey?this.name+"("+this.fullTrip.split("#")[0].substr(2,4)+")":this.team+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GameFullName",{get:function(){return""+this.team+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ChatName",{get:function(){return""+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ChatTrip",{get:function(){return"("+this.fullTrip.split("#")[0].substr(2,4)+")"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ChatFullName",{get:function(){return u.ShowUnichatTripKey?this.team+this.name+"("+this.fullTrip.split("#")[0].substr(2,4)+")":this.team+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTripKey",{get:function(){return!!u.ShowUnichatTripKey||this._showTripKey},enumerable:!0,configurable:!0}),t.prototype.SetProps=function(t){this.siteSig=t.siteSig,this.serverSig=t.serverSig,this.name=t.name,this.team=t.team,this.code=t.code,this.skinUrl=t.skinUrl,this.skinUrlSmall=t.skinUrlSmall,this.fullTrip=t.fullTrip;const e=t.fullTrip.split("#"),n=e[0],i=e[1],o=t.showTripKey?"Public":"Private";this.shortTrip=n+"|"+i+"|"+(((t,e)=>{let n=[];for(let i=0,o=t.length;i<o;i+=e)n.push(t.slice(i,i+e));return n})(n.split("").map(t=>r.indexOf(t).toString(2).padStart(6,"0")).join("").slice(4),8).map(t=>parseInt(t,2).toString()).join(".")+"|")+o,""==this.skinUrl&&(this.skinUrl="gr/noimage.gif"),""==this.skinUrlSmall&&(this.skinUrlSmall="gr/noimage.gif"),this.profileComment=t.profileComment,this._showTripKey=t.showTripKey,this.isPlaying=t.isPlaying,this.serverRoomSig=this.siteSig+"."+this.serverSig,this.teamRoomSig=this.siteSig+"."+this.serverSig+"."+this.team+"."+this.code},t}();e.ChatUser=g;var f=function(){function t(t,e,n){this.text=e,this.messageId=n,t&&(this.icon=t.skinUrlSmall,this.userId=t.userId,this.userName=t.GameFullName,this.timeStamp=a.DateTimeHelper.GetHourMinutesString())}return t.prototype.MakeCopy=function(){var e=new t(null,"",0);return e.icon=this.icon,e.text=this.text,e.messageId=this.messageId,e.userId=this.userId,e.userName=this.userName,e.timeStamp=this.timeStamp,e},t}(),m=function(){function t(t){this.sessionId=t,this.messages=new o.List,this.isClosed=!1}return Object.defineProperty(t.prototype,"IsGroup",{get:function(){return 20!=this.category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsPrivate",{get:function(){return 20==this.category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HeaderName",{get:function(){return 12==this.category&&""==this.title?"no-tag":this.IsGroup?this.title:this.peer.GameFullName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HeaderIcon",{get:function(){return 20==this.category?this.peer.skinUrl:12==this.category?"gr/team5a.png":11==this.category?"gr/web1b.png":void 0},enumerable:!0,configurable:!0}),t.prototype.InitAsGroupSession=function(t,e,n){this.category=t,this.roomSig=e,this.title=n,this.peer=null},t.prototype.InitAsPrivateSession=function(t){this.category=20,this.roomSig="",this.title="",this.peer=t},t.prototype.AddMessage=function(t){this.messages.Add(t),this.reqScroll=!0},t.prototype.RemoveMessage=function(t,e){var n=this.messages.First((function(e){return e.messageId==t}));if(n&&(this.messages.Remove(n),e)){var i=n.MakeCopy();i.text=p.BlockedMessageNotification,this.messages.Add(i)}},t}(),y=function(){function t(){this.siteSig="",this.serverSig="",this.name="",this.team="",this.code="",this.skinUrl="",this.envSig="",this.profileComment="",this.showTripKey=!1}return t.prototype.GetSequentialSignature=function(){return this.siteSig+"_"+this.serverSig+"_"+this.name+"_"+this.team+"_"+this.code+"_"+this.skinUrl+"_"+this.profileComment+"_"+this.showTripKey+"_"+this.envSig},t}(),v=function(){function t(t){this.receiver=t}return Object.defineProperty(t.prototype,"IsConnected",{get:function(){return null!=this.ws},enumerable:!0,configurable:!0}),t.prototype.SendPacket=function(t){this.ws&&this.ws.readyState==WebSocket.OPEN&&this.ws.send(t)},t.prototype.ConnectToChatServer=function(){console.log("connecting to chat server"),this.ws=new WebSocket(c.ChatServerUri),this.ws.onmessage=this.OnWsMessage.bind(this),this.ws.onopen=this.OnWsOpen.bind(this),this.ws.onerror=this.OnWsError.bind(this),this.ws.onclose=this.OnWsClose.bind(this)},t.prototype.Close=function(){this.ws&&(this.ws.close(),this.ws=null)},t.prototype.OnWsOpen=function(){this.SendPacket(JSON.stringify({op:"JoinToServer"}))},t.prototype.OnWsClose=function(t){t.reason&&console.log("connection to chat server closed: "+t.reason),this.receiver.SetAvailability(!1),this.receiver.FireChanged()},t.prototype.OnWsError=function(t){console.log(t)},t.prototype.OnWsMessage=function(t){l.TimeChecker.Start("OnWsMessage@ExChatAppModel");var e=JSON.parse(t.data),n=e.op;"SelfUserId"==n?(this.selfUserId=e.userId,this.selfUserId,this.pendingUserInfo&&(this.SendSelfEntryInfoCore(this.pendingUserInfo),this.pendingUserInfo=null),this.receiver.SetAvailability(!0)):"UpdateUserInfos"==n?this.receiver.UserInfosUpdated(e.infos):"UpdateFixedGroupSessions"==n?this.receiver.UpdateFixedGroupSessionInfos(e.infos):"UpdatePrivateSession"==n?this.receiver.UpdatePrivateSessionInfo(e.info):"ChatMessage"==n?this.receiver.HandleReceivedMessage(e.data):"MessageRemoval"==n&&this.receiver.HandleMessageRemoval(e.data),this.receiver.FireChanged(),l.TimeChecker.Stop()},t.prototype.SendSelfEntryInfoCore=function(t){var e=JSON.stringify({op:"UpdateUserInfo",userId:this.selfUserId,data:t});this.SendPacket(e)},t.prototype.SendSelfEntryInfo=function(t,e){this.ws?this.SendSelfEntryInfoCore(t):(this.pendingUserInfo=t,e&&this.ConnectToChatServer())},t.prototype.RequestStartNewPrivateSession=function(t){this.SendPacket(JSON.stringify({op:"NewPrivateSession",userId:this.selfUserId,peerUserId:t}))},t.prototype.SendChatMessage=function(t,e){var n=c.MessageMaxLength;e.length>n&&(e=e.substr(0,n));var i={sessionId:t,userId:this.selfUserId,text:e};this.SendPacket(JSON.stringify({op:"ChatMessage",userId:this.selfUserId,data:i})),this.selfUserId},t.prototype.SendMessageRemoval=function(t,e,n){var i={sessionId:t,messageId:e,isBlocked:n};this.SendPacket(JSON.stringify({op:"MessageRemoval",userId:this.selfUserId,data:i}))},t}(),b=function(){this.profileComment="",this.showTripKey=!1},S=function(){function t(){}return t.prototype.Init=function(){var t=i.AppConfigurator.instance.MaxProfileNum;this.profileExData=Array(t);for(var e=0;e<t;e++)this.profileExData[e]=new b;var n=localStorage.getItem("profileExData");if(n){var o=JSON.parse(n);if(o&&o.length>0)for(var r=Math.min(t,o.length),s=0;s<r;s++)a.Objects.CopyObjectProps(this.profileExData[s],o[s])}else this.SaveProfileExData();var l=localStorage.getItem("isUserActive");l?(this.isUserActive="1"==l,this.SaveIsActive()):this.isUserActive=!0;var c=localStorage.getItem("blockedUserTrips");c?this.blockedUserTrips=JSON.parse(c):(this.blockedUserTrips=[],this.SaveBlockedUserTrips())},t.prototype.SaveProfileExData=function(){var t=JSON.stringify(this.profileExData);localStorage.setItem("profileExData",t)},t.prototype.SaveIsActive=function(){localStorage.setItem("isUserActive",this.isUserActive?"1":"0")},t.prototype.SaveBlockedUserTrips=function(){var t=JSON.stringify(this.blockedUserTrips);localStorage.setItem("blockedUserTrips",t)},t.prototype.SetUserBlockState=function(t,e){if(e&&-1==this.blockedUserTrips.indexOf(t))this.blockedUserTrips.push(t),this.SaveBlockedUserTrips();else if(!e&&this.blockedUserTrips.indexOf(t)>=0){var n=this.blockedUserTrips.indexOf(t);this.blockedUserTrips.splice(n,1),this.SaveBlockedUserTrips()}},t}(),x=function(){function t(){this.entryInfo=new y,this.entrySeqSig="",this.allUsers=new o.List,this.allSessions=new o.List,this.tmpSession=new m(0),this.sessionInitialMessage=null,this.loadedProfileIndex=0,this.storage=new S,this.ShowVersion(),this.bridge=new v(this)}return Object.defineProperty(t.prototype,"Texts",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsUserActive",{get:function(){return this.storage.isUserActive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selfUserId",{get:function(){return this.bridge?this.bridge.selfUserId:0},enumerable:!0,configurable:!0}),t.prototype.SetUserEnvSig=function(t){this.entryInfo.envSig=t+s},t.prototype.ShowVersion=function(){console.log(c.ChatAppCoreVersion)},t.prototype.FireChanged=function(){this.procOnChanged&&this.procOnChanged()},t.prototype.SetAvailability=function(t){this.isAvailable=t,console.log("unichat availability: "+t)},t.prototype.DiscardCurrentSessions=function(){this.allSessions.Clear(),this.allUsers.Clear(),this.selfUser=null,this.gameChatSession=null,this.curSession=null},t.prototype.SetUserActive=function(t){this.storage.isUserActive!=t&&(this.bridge.IsConnected&&!t?(this.DiscardCurrentSessions(),this.bridge.Close()):!this.bridge.IsConnected&&t&&this.bridge.SendSelfEntryInfo(this.selfInfoCash,!0),this.storage.isUserActive=t,this.storage.SaveIsActive())},t.prototype.ChatWindowOpenStateChanged=function(t){this.isWindowOpen=t,t&&(this.chatNotificationBadgeProc&&this.chatNotificationBadgeProc(!1),this.chatNotificationTitleProc&&this.chatNotificationTitleProc(!1))},t.prototype.SetGameTeamChatSessionEnabled=function(t){c.GameChatSessionCategory=t?12:11},t.prototype.SetChatServerUri=function(t){c.ChatServerUri=t},t.prototype.SetSiteSignature=function(t){this.entryInfo.siteSig=t},t.prototype.SetServerSignature=function(t,e){(t!=this.entryInfo.serverSig||e)&&(this.ClearAllUsersAndSessions(),this.entryInfo.serverSig=t,e&&this.SendUserEntryIfChanged(!0))},t.prototype.SetUserEntryInfo=function(t,e,n,o,r){var s=i.AppConfigurator.instance.MaxProfileNum;if(0<=r&&r<s){null==r&&(r=0),this.entryInfo.name=t,this.entryInfo.team=e,this.entryInfo.code=n,this.entryInfo.skinUrl=o,this.storage.profileExData||this.storage.Init();var a=this.storage.profileExData[r];this.entryInfo.profileComment=a.profileComment,this.entryInfo.showTripKey=a.showTripKey,this.loadedProfileIndex=r,this.SendUserEntryIfChanged()}},t.prototype.ClearAllUsersAndSessions=function(){var t=this;this.curSession=null,this.allSessions.Clear(),this.allUsers.Where((function(e){return e!=t.selfUser})).ForEach((function(e){return t.RemoveUser(e)}))},t.prototype.SendUserEntryIfChanged=function(t){void 0===t&&(t=!1);var e=this.entryInfo.GetSequentialSignature();(e!=this.entrySeqSig||t)&&(this.IsUserActive&&this.bridge.SendSelfEntryInfo(this.entryInfo,!0),this.selfInfoCash=this.entryInfo,this.entrySeqSig=e)},t.prototype.UpdateSelfProfileDetail=function(t,e){var n=c.ProfileCommentMaxLength;e.length>n&&(e=e.substr(0,n));var i=this.storage.profileExData[this.loadedProfileIndex];i.profileComment=e,i.showTripKey=t,this.storage.SaveProfileExData(),this.entryInfo.profileComment=e,this.entryInfo.showTripKey=t,this.SendUserEntryIfChanged()},t.prototype.GetUserById=function(t){return this.allUsers.FirstOrDefault((function(e){return e.userId==t}),null)},t.prototype.GetSessionById=function(t){return this.allSessions.FirstOrDefault((function(e){return e.sessionId==t}),null)},t.prototype.RequestStartNewSession=function(t){this.bridge.RequestStartNewPrivateSession(t.userId)},t.prototype.CheckValidName=function(){return""!=this.selfUser.name},t.prototype.SendMessageOnCurrentSession=function(t){this.CheckValidName()&&(this.curSession==this.tmpSession?(this.sessionInitialMessage=t,this.RequestStartNewSession(this.tmpSession.peer)):this.bridge.SendChatMessage(this.curSession.sessionId,t))},t.prototype.SendMessageOnGameChatSession=function(t){this.CheckValidName()&&this.gameChatSession&&this.bridge.SendChatMessage(this.gameChatSession.sessionId,t)},t.prototype.SetUserBlockState=function(t,e){t.fullTrip!=this.selfUser.fullTrip&&(t.isBlocked=e,this.storage.SetUserBlockState(t.fullTrip,e))},t.prototype.AddNewUser=function(t){var e=new g(t.userId);return e.SetProps(t),this.storage.blockedUserTrips.indexOf(e.fullTrip)>=0&&(e.isBlocked=!0),t.userId==this.selfUserId&&(this.selfUser=e),this.allUsers.Add(e),this.UserLogOutput(t,"+ "),e},t.prototype.RemoveUser=function(t){var e=this;this.allUsers.Remove(t),t.userId==this.selfUserId?(this.allSessions.RemoveAll((function(t){return t.IsPrivate})),this.SelectSession(this.gameChatSession)):this.allSessions.Where((function(e){return e.peer==t})).ForEach((function(t){t.hasNewMessage?t.isClosed=!0:e.allSessions.Remove(t)}))},t.prototype.UserInfosUpdated=function(t){var e=this;t.forEach((function(t){if(0==t.isAlive)e.UserLogOutput(t,"- "),(n=e.GetUserById(t.userId))&&e.RemoveUser(n);else{var n=e.GetUserById(t.userId);t.userId==e.selfUserId&&(t.name,t.team),n?n.serverSig==t.serverSig&&n.name==t.name&&n.team==t.team?n.SetProps(t):(e.RemoveUser(n),e.AddNewUser(t)):e.AddNewUser(t)}}))},t.prototype.UpdateFixedGroupSessionInfos=function(t){var e=this;t.forEach((function(t){var n=e.GetSessionById(t.sessionId);n||((n=new m(t.sessionId)).InitAsGroupSession(t.category,t.roomSig,t.title),e.allSessions.Add(n)),t.category==c.GameChatSessionCategory&&(e.gameChatSession=n,e.gameChatSession.sessionId,e.gameChatSession.HeaderName)})),$("#chatTag").text(e.gameChatSession.HeaderName),null==this.curSession&&(this.curSession=this.gameChatSession);var n=t.map((function(t){return t.sessionId}));this.allSessions.Where((function(t){return t.IsGroup&&-1==n.indexOf(t.sessionId)})).ForEach((function(t){return e.allSessions.Remove(t)}))},t.prototype.UpdatePrivateSessionInfo=function(t){var e=this.GetSessionById(t.sessionId);if(!e){e=new m(t.sessionId);var n=t.userIds[0]==this.selfUserId?t.userIds[1]:t.userIds[0],i=this.GetUserById(n);e.InitAsPrivateSession(i),this.allSessions.Add(e),this.tmpSession&&this.curSession==this.tmpSession&&t.userIds[0]==this.tmpSession.peer.userId&&(this.curSession=e)}null!=this.sessionInitialMessage&&(this.curSession=e,this.SendMessageOnCurrentSession(this.sessionInitialMessage),this.sessionInitialMessage=null)},t.prototype.HandleReceivedMessage=function(t){var e=this.GetSessionById(t.sessionId),n=this.GetUserById(t.userId);if(n&&e){if(n.isBlocked)return void(e.IsPrivate&&this.bridge.SendMessageRemoval(e.sessionId,t.messageId,!0));if(e.AddMessage(new f(n,t.text,t.messageId)),e!=this.curSession&&(e.hasNewMessage=!0),!e.IsGroup&&!this.isWindowOpen){var i=t.text,o=n.skinUrl;this.chatNotificationBadgeProc&&this.chatNotificationBadgeProc(!0,o,i),this.chatNotificationTitleProc&&this.chatNotificationTitleProc(!0)}e==this.gameChatSession&&this.gameChatMessageReceiverProc&&this.gameChatMessageReceiverProc(n.ChatTrip,n.skinUrl,n.ChatName,t.text)}},t.prototype.HandleMessageRemoval=function(t){var e=this.GetSessionById(t.sessionId);e&&e.RemoveMessage(t.messageId,t.isBlocked)},t.prototype.SelectUser=function(t){var e=this.allSessions.First((function(e){return e.peer==t}));e?(this.curSession=e,e.reqScroll=!0,this.FireChanged()):(this.tmpSession.InitAsPrivateSession(t),this.curSession=this.tmpSession),this.curUser=t},t.prototype.SelectSelfUser=function(){this.curUser=this.selfUser,this.curSession=null},t.prototype.SelectUserById=function(t){var e=this.GetUserById(t);e&&this.SelectUser(e)},t.prototype.RemoveCurrentSessionIfClosed=function(){this.curSession&&this.curSession.isClosed&&this.allSessions.Remove(this.curSession)},t.prototype.SelectSession=function(t){this.curSession!=t&&(this.RemoveCurrentSessionIfClosed(),this.curSession=t,t.reqScroll=!0,t.hasNewMessage=!1,this.curUser=t.IsPrivate?t.peer:null,this.FireChanged())},t.prototype.SelectMessage=function(t){this.curMessage=this.GetMessageById(t)},t.prototype.GetMessageById=function(t){return this.curSession.messages.First((function(e){return e.messageId==t}))},t.prototype.DeleteCurrentMessage=function(){this.curMessage.userId==this.selfUserId&&this.bridge.SendMessageRemoval(this.curSession.sessionId,this.curMessage.messageId,!1)},t.prototype.UserLogOutput=function(t,e){var n="+ "==e,i=this.GetUserById(t.userId),o=i.fullTrip.split("#")[1].split("@")[1],r="";if(i){r=o?`<div style="\n    display: flex;align-items: center;\n">\n<div style="color: #39CCCC;margin-left: ${n?"5px":"8px"};">${e}</div>\n    <div class="divs" style="\n    border-radius: 15px;\n    margin-left: 10px;\n">\n        <div style="\n    width: 30px;\n    height: 30px;\n    border-radius: 15px;\n    background-image: url(${i.skinUrl});\n    background-size: cover;\n    background-position-x: left;\n">\n        </div>\n    </div>\n    <div style="color: #39CCCC;margin-left: 10px;">${i.GameFullName}</div>\n    <div style="color: #39CCCC;margin-left: 10px;">${"("+i.fullTrip.split("#")[0]+")"}</div>\n</div>`:`<div style="\n    display: flex;align-items: center;\n">\n<div style="color: white;margin-left: ${n?"5px":"8px"};">${e}</div>\n    <div class="divs" style="\n    border-radius: 15px;\n    margin-left: 10px;\n">\n        <div style="\n    width: 30px;\n    height: 30px;\n    border-radius: 15px;\n    background-image: url(${i.skinUrl});\n    background-size: cover;\n    background-position-x: left;\n">\n        </div>\n    </div>\n    <div style="color: white;margin-left: 10px;">${i.GameFullName}</div>\n    <div style="color: white;margin-left: 10px;">${"("+i.fullTrip.split("#")[0]+")"}</div>\n</div>`;var s=$("#notify_log");s.append(r),s.children().length>50&&s.find("div:first").remove(),s.scrollTop(3e3)}},t}();e.ChatAppModel=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(7),a=function(){function t(t){this.initDone=!1,this.tick=0,this.jumpDurationMs=2e3,this.teamCircleTimeStamp=0,this.teamCircleX=0,this.teamCircleY=0,this.teamCircleRadius=0,this.gameCore=t}return t.prototype.Init=function(){if(!this.initDone){var t=r.gs.gconfig.FieldSize/2;this.eyeX=t,this.eyeY=t,this.eyeX1=t,this.eyeY1=t,this.eyeScale=.08,this.eyeScale1=.08,this.gravityX=t,this.gravityY=t,this.aimCursorX=t,this.aimCursorY=t,this.localAimX=t,this.localAimY=t,this.initDone=!0,i.Utils.Confirm(this.scw),this.mouseX=this.scw/2,this.mouseY=this.sch/2,this.aimPlayerId=-1}},t.prototype.SetScreenSize=function(t,e){this.scw=t,this.sch=e},t.prototype.sendWaves=function(t,e,n,i,o,r){var s={x:t,y:e};s.time=Date.now(),s.color=n,s.wavelength=i,s.sender=o,s.moreAnimation=r,gVar.Waves.push(s)},t.prototype.ScreenToWorld=function(t,e){return[(t-this.scw/2)/this.eyeScale+this.eyeX,(e-this.sch/2)/this.eyeScale+this.eyeY]},t.prototype.WorldToScreen=function(t,e){return[(t-this.eyeX)*this.eyeScale+this.scw/2,(e-this.eyeY)*this.eyeScale+this.sch/2]},t.prototype.SetServerEyePos=function(t,e){this.serverEyePosX=t,this.serverEyePosY=e},t.prototype.ShiftScale=function(t){var e=1+.13*t,n=this.eyeScale1*e;this.eyeScale1=i.Nums.Clamp(n,.005,1.5)},t.prototype.SendSelfAimPosition=function(){if(!o){var t=this.ScreenToWorld(this.mouseX,this.mouseY),e=t[0],n=t[1];if(e!=this.aimXSent||n!=this.aimYSent){var i=this.gameCore.conn;i&&i.SendAimCursor(e,n),this.aimXSent=e,this.aimYSent=n}}},t.prototype.RecordStatePacket=function(){var t=this,e=s.InternalPackets.SightState(t.eyeX,t.eyeY,t.eyeScale,t.aimCursorX,t.aimCursorY,t.splitting,t.aimPlayerId);this.gameCore.dataRecorder.PostInternalRecordingPacket(e)},t.prototype.UpdateFrame=function(){this.UpdateCurrentPosScale();var t=r.gs.gconfig.FieldSize;if(this.eyeX=i.Nums.Clamp(this.eyeX,0,t),this.eyeY=i.Nums.Clamp(this.eyeY,0,t),r.gs.gstates.isPlaying){var e=this.ScreenToWorld(this.mouseX,this.mouseY),n=e[0],o=e[1];this.aimCursorX=n,this.aimCursorY=o}r.gs.gstates.isRealtimeMode&&this.tick%2==0&&(this.SendSelfAimPosition(),this.RecordStatePacket()),this.tick++},t.prototype.UpdateCurrentPosScale=function(){var t,e,n,o=r.gs.gstates,s=this.gameCore.nodeMan;if(o.isBenchmarkMode){var a=r.gs.gconfig.FieldSize/2;this.eyeX=a,this.eyeY=a,this.eyeScale=.05}else if(o.isReplayMode){var l=.6;this.eyeX=i.Nums.EasyFilter(this.eyeX,this.eyeX1,l),this.eyeY=i.Nums.EasyFilter(this.eyeY,this.eyeY1,l),this.eyeScale=i.Nums.EasyFilter(this.eyeScale,this.eyeScale1,l)}else if(o.isRealtimeMode){var c=this.ScreenToWorld(this.mouseX,this.mouseY),d=c[0],h=c[1],p=void 0,u=void 0;if(l=.985-5e-4*r.gs.uconfig.CameraMovementSpeed,s.hasSelfNode||s.hasTabNode){var g=s.CalcurateCenterPointOfAllSelfCells(),f=g[0],m=g[1],y=s.CalcurateCenterPointOfEachSelfCells(),v=y[0],b=y[1],S=y[2],x=y[3],k=s.CalcurateCenterPointOfEachTabCells(),C=k[0],w=k[1],_=k[2],M=k[3];if(this.spawned&&(r.gs.uconfig.useSpawnSignal&&(0==this.spawnflag&&(s.activeSelfPlayerId==gVar.conn1.id&&this.sendWaves(v,b,"FFFFFF",500,"spawn",!0),s.activeSelfPlayerId==gVar.conn1.id+1&&this.sendWaves(S,x,"FFFFFF",500,"spawn",!0)),1==this.spawnflag&&(s.activeSelfPlayerId==gVar.conn2.id&&this.sendWaves(C,w,"FFFFFF",500,"spawn",!0),s.activeSelfPlayerId==gVar.conn2.id+1&&this.sendWaves(_,M,"FFFFFF",500,"spawn",!0))),this.jumpTick=this.jumpDurationMs,this.eyeX2=f,this.eyeY2=m,this.spawned=!1),this.jumpTick>0){this.jumpTick-=17;var I=i.Nums.VMap(this.jumpTick,this.jumpDurationMs,0,0,1,!0);p=i.Nums.Lerp(this.eyeX2,f,I),u=i.Nums.Lerp(this.eyeY2,m,I),l=i.Nums.Lerp(.94,.986,I)}else p=(t=[f,m])[0],u=t[1]}else-1!=this.aimPlayerId&&(65534&this.aimPlayerId)!=gVar.conn1.id&&(65534&this.aimPlayerId)!=gVar.conn2.id?(p=(e=[this.serverEyePosX,this.serverEyePosY])[0],u=e[1]):(p=(n=[d,h])[0],u=n[1]);this.eyeX=i.Nums.EasyFilter(this.eyeX,p,l),this.eyeY=i.Nums.EasyFilter(this.eyeY,u,l),this.eyeScale=i.Nums.EasyFilter(this.eyeScale,this.eyeScale1,.86)}},t.prototype.SetSpawned=function(t){this.spawned=!0,this.spawnflag=t},t.prototype.OnPlayerDead=function(){var t=this.gravityX,e=this.gravityY,n=this.aimCursorX,o=this.aimCursorY,r=i.Nums.Lerp(t,n,.3),s=i.Nums.Lerp(e,o,.3);this.localAimX=r,this.localAimY=s},t.prototype.UpdateInterpolation=function(){},t.prototype.FeedReplaySightState=function(t,e,n,i,o,s,a){this.eyeX1=t,this.eyeY1=e,r.gs.uconfig.AffectZoomingOnReplay&&(this.eyeScale1=n),this.aimCursorX=i,this.aimCursorY=o,this.splitting=s,this.aimPlayerId=a},t.prototype.setAimCursorProps=function(t,e,n,i){this.aimPlayerId=t,this.aimCursorX=e,this.aimCursorY=n,this.splitting=i},t}();e.SightCoord=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(2),r=n(3),s=function(){function t(e){this.name="Profile"+(e+1),this.team="",this.code="";var n=e;n>=t.skinUrlSources.length&&(n=0),this.skinUrl=t.skinUrlSources[n],this.skinUrl2=t.skinUrlSources[n],this.tabName="Tab"+(e+1),this.tabTeam="",this.tabCode="",this.tabSkinUrl=t.skinUrlSources[n],this.tabSkinUrl2=t.skinUrlSources[n],this.profileIndex=e}return t.prototype.MakeSequenceString=function(){return this.name+"/"+this.team+"/"+this.code+"/"+this.skinUrl+"/"+this.skinUrl2},t.skinUrlSources=["http://ixagar.net/skins/ring.png","http://ixagar.net/skins/k461.png","http://ixagar.net/skins/wolf.png","http://ixagar.net/skins/rabbit.png","http://ixagar.net/skins/dragon.png","http://ixagar.net/skins/magic_circle.png","http://ixagar.net/skins/ghost.png","http://ixagar.net/skins/daemon.png","http://ixagar.net/skins/bat.png","http://ixagar.net/skins/skull.png"],t}();e.UserEntryInfo=s;var a=function(){function t(){this.curIndex=0,this.modified=!1,this.infos=[];for(var t=0;t<o.AppConfigurator.instance.MaxProfileNum;t++)this.infos[t]=new s(t)}return Object.defineProperty(t.prototype,"curInfo",{get:function(){return this.infos[this.curIndex]},enumerable:!0,configurable:!0}),t.prototype.Load=function(){var t=localStorage.getItem("lwga_user_entries");if(t){var e=JSON.parse(t);if(e instanceof Array)for(var n=Math.min(this.infos.length,e.length),o=0;o<n;o++){const t=this.infos[o];i.Objects.CopyObjectProps(t,e[o]),t.usig=r.AppHelper.GetUserEnironmentSignature()}}var s=parseInt(localStorage.getItem("lwga_user_sel_index"));isNaN(s)||(this.curIndex=i.Nums.Clamp(s,0,this.infos.length-1))},t.prototype.ShiftIndex=function(t){this.curIndex=(this.curIndex+t+this.infos.length)%this.infos.length,this.indexChangedProc(),this.SaveIfChanged()},t.prototype.ChangeIndex=function(t){this.curIndex=t},t.prototype.SaveIfChanged=function(){this.modified&&(localStorage.setItem("lwga_user_entries",JSON.stringify(this.infos)),this.modified=!1),localStorage.setItem("lwga_user_sel_index",this.curIndex.toString())},t.prototype.SetProp=function(t,e){this.curInfo[t]!=e&&(this.curInfo[t]=e,this.infos[this.curInfo.profileIndex][t]=e,"skinUrl"!=t&&"skinUrl2"!=t||this.skinChangedProc(),this.modified=!0)},t}();e.UserEntryManager=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=(n(0),function(){function t(){}return t.prototype.SendPacket=function(t,e){e&&1!==e?2===e&&this.ws2&&this.ws2.readyState==WebSocket.OPEN&&this.ws2.send(t):this.ws&&this.ws.readyState==WebSocket.OPEN&&this.ws.send(t)},t.prototype.CloseConnection=function(t){t?this.ws2&&(this.ws2.onopen=null,this.ws2.onmessage=null,this.ws2.onclose=null,this.ws2.onerror=null,this.ws2.close(),this.ws2=null):this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null,this.ws.close(),this.ws=null)},t.prototype.SendSessionInitialize=function(t,e){console.log("SendSessionInitialize "+e||1),this.SendPacket(i.Packets.SessionInitialize(t),e)},t.prototype.SendUserEntryInfo=function(t,e,n,o,r,s){console.log("SendUserEntryInfo "+s),1===s&&(gVar.name=t,gVar.tag=e,gVar.code=n,gVar.skinUrl1=o,gVar.skinUrl2=r),2===s&&(gVar.tabName=t,gVar.tabTag=e,gVar.tabCode=n,gVar.tabSkinUrl1=o,gVar.tabSkinUrl2=r),1===s&&this.SendPacket(i.Packets.UserEntryInfo(t,e,n,o,r),1),2===s&&this.SendPacket(i.Packets.UserEntryInfo(t,e,n,o,r),2)},t.prototype.SendRequestStartPlay=function(t){!t&&this.SendPacket(i.Packets.UserEntryInfo(gVar.name,gVar.tag,gVar.code,gVar.skinUrl1,gVar.skinUrl2)),!t&&(console.log("SendRequestStartPlay 1"),this.SendPacket(i.Packets.RequestStartPlay()),setTimeout(gVar.controlConn2=!1,500)),!gVar.conn2.isAlive&&gVar.conn1.isAlive&&n(0).gs.uconfig.tab&&this.SendPacket(i.Packets.UserEntryInfo(gVar.tabName,gVar.tabTag,gVar.tabCode,gVar.tabSkinUrl1,gVar.tabSkinUrl2),2),!gVar.conn2.isAlive&&gVar.conn1.isAlive&&n(0).gs.uconfig.tab&&(console.log("SendRequestStartPlay 2"),this.SendPacket(i.Packets.RequestStartPlay(),2),setTimeout(gVar.controlConn2=!0,500))},t.prototype.SendRequestStartSpectate=function(t){console.log("SendRequestStartSpectate "+(t||1)),this.SendPacket(i.Packets.RequestStartSpectate(),t)},t.prototype.SendAimCursor=function(t,e){var o=n(4).gameCore,r=o.nodeMan.CalcurateCenterPointOfAllSelfCells(),s=r[0],a=r[1],l=t-s,c=e-a,d=Math.atan2(c,l),h=Math.sqrt(Math.pow(o.sight.eyeX1-s,2)+Math.pow(o.sight.eyeY1-a,2))/1.5;Math.round(180*d/Math.PI)%15==0&&(gVar.tempX=s+h*Math.cos(d),gVar.tempY=a+h*Math.sin(d));const p=n(0).gs.uconfig.tab&&gVar.controlConn2?2:void 0;!gVar.stopMouse&&this.SendPacket(i.Packets.AimCursor(t,e),p),n(0).gs.uconfig.ExpendTab1Sight&&!gVar.conn2.isAlive&&!gVar.stopMouse&&this.SendPacket(i.Packets.AimCursor(gVar.tempX,gVar.tempY),2),!n(0).gs.uconfig.ExpendTab1Sight&&!gVar.conn2.isAlive&&!gVar.stopMouse&&this.SendPacket(i.Packets.AimCursor(t,e),2),!gVar.conn1.isAlive&&!gVar.stopMouse&&this.SendPacket(i.Packets.AimCursor(t,e))},t.prototype.SendPlayerAction=function(t,e,n){const o=n||(gVar.controlConn2?2:void 0);this.SendPacket(i.Packets.PlayerAction(t,e),o)},t.prototype.SendChatMessage=function(t,e,n){this.SendPacket(i.Packets.ChatMessage(t,e),n)},t.prototype.SendLatencyCheckRequest=function(t){this.SendPacket(i.Packets.LatencyCheckRequest(),t)},t.prototype.SendSpecifySpecTarget=function(t,e){this.SendPacket(i.Packets.SpecifySpecTarget(t),e)},t.prototype.ConnectToGameServer=function(t,e){var n=this,i=t;e||(this.ws&&this.CloseConnection(),console.log("connecting to gameserver 1"),this.ws=new WebSocket(t),this.ws.binaryType="arraybuffer",this.ws.onopen=function(){console.log("socket opened"),n.connectionOpenProc(1)},this.ws.onerror=function(t){console.log("socket error, "+t)},this.ws.onclose=function(t){var e=t.reason||"";console.log("socket closed, "+e),n.connectionClosedProc(e),n.ConnectToGameServer(i)},this.ws.onmessage=function(t){n.packetHandlerProc(t.data,e)}),e&&(this.ws2&&this.CloseConnection(2),console.log("connecting to gameserver 2"),this.ws2=new WebSocket(t),this.ws2.binaryType="arraybuffer",this.ws2.onopen=function(){console.log("socket opened 2"),n.connectionOpenProc(2)},this.ws2.onerror=function(t){console.log("socket error 2, "+t)},this.ws2.onclose=function(t){var e=t.reason||"";console.log("socket closed 2, "+e),n.connectionClosedProc(e,2),n.ConnectToGameServer(i,2)},this.ws2.onmessage=function(t){n.packetHandlerProc(t.data,e)})},t}());e.ConnectionBridge=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(8),r=n(14),s=n(0),a=n(3),l=function(t,e,n,i){this.timeStamp=t,this.opcode=e,this.keep=n,this.buffer=i},c=function(){function t(t,e,n){this.packets=t,this.headIndex=e,this.tailIndex=n}return Object.defineProperty(t.prototype,"headTimeStamp",{get:function(){return this.packets[this.headIndex].timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationMs",{get:function(){return i.Utils.Confirm(this.tailIndex<this.packets.length),this.packets[this.tailIndex].timeStamp-this.packets[this.headIndex].timeStamp},enumerable:!0,configurable:!0}),t}(),d=function(){function t(){this.totalBytes=0,this.packets=[],this.isRecording=!1,this.isPlayback=!1,this.isLoading=!1,this.trackPos=0,this.reels=[],this.curReelIndex=0,this.trackPosText="",this.isAutoShiftToNextReel=!1,this.cleanIdx=0,this.reqMainPanelShownAfterPlayback=!1,this.replaySpeedRateExp=0,this.replaySpeedRate=1}return t.prototype.Reset=function(){this.totalBytes=0,this.packets=[],this.isRecording=!1,this.isPlayback=!1,this.isLoading=!1,this.trackPos=0,this.recordHeadIndex=0,this.replayIndex=0,this.reels=[],this.curReelIndex=0,this.trackPosText="",this.cleanIdx=0,this.reqMainPanelShownAfterPlayback=!1,this.Notify()},Object.defineProperty(t.prototype,"curReel",{get:function(){return this.reels[this.curReelIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReplayMode",{get:function(){return s.gs.gstates.isReplayMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numReels",{get:function(){return this.reels.length},enumerable:!0,configurable:!0}),t.prototype.Initialize=function(t){this.nodeMan=t,this.UpdateTrackPosText(),this.startTimeStamp=Date.now()},t.prototype.SetStateChangedProc=function(t){this.notificationProc=t},t.prototype.Notify=function(t){void 0===t&&(t=null),this.notificationProc(t)},t.prototype.AddReel=function(t,e){for(var n=t;n<=e;n++)this.packets[n].keep=!0;var i=new c(this.packets,t,e);this.reels.push(i),this.curReelIndex=this.reels.length-1},t.prototype.DeleteCurrentReel=function(){this.reels.length>0&&(this.reels.splice(this.curReelIndex,1),this.ShiftCurrentReel(0),this.UpdateTrackPosText())},t.prototype.ShiftCurrentReel=function(t,e){if(void 0===e&&(e=!1),0!=this.reels.length){var n=(this.curReelIndex+t+this.reels.length)%this.reels.length;this.curReelIndex=i.Nums.Clamp(n,0,this.reels.length-1),this.StartReplayMode(e),e||(this.ShiftTrackPositionLittle(1),this.ShiftTrackPositionLittle(-1))}},t.prototype.ShiftReplaySpeed=function(t){this.replaySpeedRateExp=i.Nums.Clamp(this.replaySpeedRateExp+t,-1,2),this.replaySpeedRate=Math.pow(2,this.replaySpeedRateExp)},t.prototype.HandleReplayOperation=function(t){switch(t){case 1:this.ToggleRecording();break;case 4:this.TogglePlayback();break;case 3:this.EndReplayMode();break;case 2:this.DoInstantCapture();break;case 5:this.ShiftCurrentReel(-1);break;case 6:this.ShiftCurrentReel(1);break;case 8:this.ShiftTrackPositionLittle(-1);break;case 9:this.ShiftTrackPositionLittle(1);break;case 10:this.DeleteCurrentReel();break;case 7:this.isAutoShiftToNextReel=!this.isAutoShiftToNextReel;break;case 12:this.ShiftReplaySpeed(-1);break;case 13:this.ShiftReplaySpeed(1)}this.Notify()},t.prototype.DiscardUnnecessaryPackets=function(){for(var t=Date.now()-1e3*s.gs.usupport.QuickCaptureTimeSec;this.cleanIdx<this.packets.length;){var e=this.packets[this.cleanIdx];if(e){if(e.timeStamp>=t)break;e.keep||(this.packets[this.cleanIdx]=null,this.totalBytes-=e.buffer.byteLength)}this.cleanIdx++}},t.prototype.RecordPacket=function(t){var e=new o.DataFrameReader(t).ReadUint8();if(!(r.OpcodeGroups.NotForRecord.indexOf(e)>=0)){var n=Date.now(),i=r.OpcodeGroups.PermanentKeeped.indexOf(e)>=0;this.isRecording&&(i=!0);var s=new l(n,e,i,t);this.packets.push(s),this.totalBytes+=t.byteLength}},t.prototype.PostInternalRecordingPacket=function(t){this.RecordPacket(t)},t.prototype.PostPacketFromServer=function(t,e){a.TimeChecker.Start("PostPacketFromServer"),this.isReplayMode||this.nodeMan.DecodeFrame(t,!0,!1,e),this.RecordPacket(t),a.TimeChecker.Stop()},t.prototype.ToggleRecording=function(){this.isPlayback||(this.isRecording?(this.isRecording=!1,this.AddReel(this.recordHeadIndex,this.packets.length-1)):(this.isRecording=!0,this.recordHeadIndex=this.packets.length),this.Notify())},t.prototype.DoInstantCapture=function(){if(!this.isPlayback){var t=Date.now()-this.startTimeStamp,e=1e3*s.gs.usupport.QuickCaptureTimeSec;e>t&&(e=t);var n=Date.now()-e,i=0;for(i=this.packets.length-1;i>0;i--){var o=this.packets[i];if(o&&o.timeStamp<n)break}this.AddReel(i,this.packets.length-1),this.captureNotificationProc(),this.Notify()}},t.prototype.ToDigits2=function(t){var e=t.toString();return e.length<=1?"0"+e:e},t.prototype.GetTimeDurationString=function(t,e){var n=t/1e3>>0,i=n/3600>>0,o=(n-=3600*i)/60>>0,r=(n-=60*o)>>0,s=t%1e3/100>>0,a=(this.ToDigits2(i),this.ToDigits2(o)),l=this.ToDigits2(r),c=null;return c=i>0?i+":"+a+":"+l:o+":"+l,e&&(c+="."+s),c},t.prototype.UpdateTrackPosText=function(){var t=0,e=0;this.curReel&&(t=i.Nums.MapTo(this.trackPos,0,this.curReel.durationMs),e=this.curReel.durationMs);var n=this.GetTimeDurationString(t,!0),o=this.GetTimeDurationString(e,!0);this.trackPosText=n+" / "+o},t.prototype.SeekReplayPosTo=function(t,e){if(this.curReel){var n=this.curReel.headTimeStamp,o=this.curReel.headTimeStamp+this.curReel.durationMs,r=i.Nums.MapTo(t,n,o);if(t>=this.trackPos)for(;this.replayIndex<this.curReel.tailIndex;){if(s=this.packets[this.replayIndex]){if(s.timeStamp>=r)break;this.nodeMan.DecodeFrame(s.buffer,!1,e)}this.replayIndex++}else for(;this.replayIndex>this.curReel.headIndex;){var s;if(s=this.packets[this.replayIndex]){if(s.timeStamp<=r)break;this.nodeMan.DecodeFrame(s.buffer,!1,e)}this.replayIndex--}e&&this.nodeMan.SyncGameViewToModel(),this.trackPos=t,this.UpdateTrackPosText()}},t.prototype.ShiftTrackPositionLittle=function(t){if(this.curReel){var e=100*t/this.curReel.durationMs,n=i.Nums.Clamp(this.trackPos+e,0,1);this.SeekReplayPosTo(n,!1)}},t.prototype.StartReplayMode=function(t){s.gs.gstates.isReplayMode=!0,this.trackPos=0,this.replayIndex=this.curReel.headIndex,this.FeedStoredPackets(0,this.curReel.headIndex),t&&(this.isPlayback=!0,this.ReplayLoopProc())},t.prototype.EndReplayMode=function(){this.FeedStoredPackets(0,this.packets.length),this.isPlayback=!1,this.trackPos=0,s.gs.gstates.isReplayMode=!1,this.UpdateTrackPosText(),this.reqMainPanelShownAfterPlayback&&(s.gs.gstates.setMainPanelVisible(!0),this.reqMainPanelShownAfterPlayback=!1)},t.prototype.ReplayLoopProc=function(){if(this.curReel){var t=17/this.curReel.durationMs*this.replaySpeedRate;this.SeekReplayPosTo(this.trackPos+t,!1),this.trackPos<1?this.isPlayback&&setTimeout(this.ReplayLoopProc.bind(this),17):this.isAutoShiftToNextReel&&this.curReelIndex<this.reels.length-1?this.ShiftCurrentReel(1,!0):this.EndReplayMode(),this.Notify()}},t.prototype.FeedStoredPackets=function(t,e){this.isLoading=!0,0==t&&this.nodeMan.ResetToInitialiState();for(var n=r.OpcodeGroups.PermanentKeeped,i=t;i<e;i++){var o=this.packets[i];o&&(o.opcode,n.indexOf(o.opcode)>=0&&this.nodeMan.DecodeFrame(o.buffer,!1,!0))}this.isLoading=!1},t.prototype.TogglePause=function(){this.isReplayMode&&(this.isPlayback=!this.isPlayback,this.isPlayback&&this.ReplayLoopProc())},t.prototype.TogglePlayback=function(){null!=this.curReel&&(this.isRecording||(this.isReplayMode?this.TogglePause():(this.reqMainPanelShownAfterPlayback=s.gs.gstates.isMainPanelVisible,this.StartReplayMode(!0),s.gs.gstates.setMainPanelVisible(!1))))},t}();e.DataRecorder=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(3),r=n(4),s=n(0).gs.uconfig,a=(n(0).gs.uconfig,function(){function t(){this.colors=[0,0],this.skinUrls=["",""]}return Object.defineProperty(t.prototype,"fullName",{get:function(){return s.ShowTripKey&&this.tripKey&&"aaaa"!=this.tripKey?this.team+this.name+"("+this.tripKey+")":this.team+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leaderBoardName",{get:function(){return this.team+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miniMapName",{get:function(){return s.ShowMapTripKey&&s.ShowMapName&&this.tripKey&&"aaaa"!=this.tripKey?this.team+this.name+"("+this.tripKey+")":s.ShowMapTripKey||s.ShowMapName?s.ShowMapTripKey&&!s.ShowMapName?"("+this.tripKey+")":this.team+this.name:""},enumerable:!0,configurable:!0}),t.prototype.Initialize=function(t,e,n){this.clientId=t,this.isBot=e,this.tripKey=n,this.name="",this.team="",this.teamId=0;for(var i=0;i<2;i++)this.colors[i]=0,this.skinUrls[i]=""},t.prototype.SetProps=function(t,e,n,i,o){this.name=t,this.team=e,this.teamId=n,this.skinUrls[0]=i,this.skinUrls[1]=o},t.prototype.SetColor=function(t,e){this.colors[t]=e},t}());e.TUserInfoData=a;var l=function(){function t(){}return t.prototype.Initialize=function(t,e,n){this.teamId=t,this.teamName=e,this.section=n,this.color=0,this.colorStr="#000"},t.prototype.SetColor=function(t){this.color=t,this.colorStr=o.ColorHelper.ColorToHtmlString(t)},t}();e.TTeamInfoData=l;var c=function(){function t(){this.userInfos=new Map,this.teamInfos=new Map,this.fallbackTeamInfo=new l,this.fallbackTeamInfo.Initialize(-1,"","**"),this.fallbackTeamInfo.SetColor(4456448),this.fallbackUserInfo=new a,this.fallbackUserInfo.Initialize(-1,!1,"ERR"),this.fallbackUserInfo.SetProps("ERR","ERR",-1,"",""),this.fallbackUserInfo.SetColor(0,4456448),this.fallbackUserInfo.SetColor(1,4456448),this.selfTeamInfo=this.fallbackTeamInfo}return t.prototype.Reset=function(){this.selfUserId=0,this.selfTeamInfo=this.fallbackTeamInfo,this.userInfos.clear(),this.teamInfos.clear()},t.prototype.PostSelfUserId=function(t){this.selfUserId=t},t.prototype.PostUserInfoData=function(t,e,n,o,s,l,c,d){var h=r.gameCore,p=h.nodeMan.CalcurateCenterPointOfAllSelfCells(),u=p[0],g=p[1],f=Math.sqrt(Math.pow(h.sight.eyeX1-u,2)+Math.pow(h.sight.eyeY1-g,2));Math.abs(u),Math.abs(g);void 0===c&&(c=null),void 0===d&&(d=null);var m=this.userInfos.get(t);m||(i.Utils.Confirm(null!=c&&null!=d),(m=new a).Initialize(t,c,d),this.userInfos.set(t,m)),m.SetProps(e,n,o,s,l),m.isBot=c,m.clientId==this.selfUserId&&(this.selfTeamInfo=this.GetTeamInfoById(m.teamId)),"#440000"!=this.selfTeamInfo.colorStr&&$("#chatTag").css("color",this.selfTeamInfo.colorStr)},t.prototype.PostUserLeave=function(t){this.userInfos.delete(t),this.userLeavedProc&&this.userLeavedProc(t)},t.prototype.PostPlayerColorData=function(t,e){var n=o.GameHelper.DecodePlayerId(t),i=n[0],r=n[1],s=this.userInfos.get(i);s&&s.SetColor(r,e)},t.prototype.PostTeamInfoData=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var r=this.teamInfos.get(t);r||(i.Utils.Confirm(null!=n&&null!=o),(r=new l).Initialize(t,n,o),this.teamInfos.set(t,r)),r.SetColor(e)},t.prototype.PostTeamInfoRemoval=function(t){this.teamInfos.delete(t)},t.prototype.ClearUserInfos=function(){this.userInfos.clear()},t.prototype.GetUserInfoById=function(t){return t&=65534,this.userInfos.get(t)||this.fallbackUserInfo},t.prototype.GetTeamInfoById=function(t){return this.teamInfos.get(t)||this.fallbackTeamInfo},t.prototype.GetCellColorForPlayer=function(t){var e=1&t;return this.GetUserInfoById(t).colors[e]},t.prototype.GetSkinUrlForPlayer=function(t){var e=1&t;return this.GetUserInfoById(t).skinUrls[e]},t.prototype.GetTeamInfoForUser=function(t){t&=65534;var e=this.GetUserInfoById(t);return this.GetTeamInfoById(e.teamId)},t.prototype.GetPlayerIdsAvailable=function(){var t=[];return this.userInfos.forEach((function(e){!e.isBot&&"dead"!=e.name&&e.skinUrls[0]&&e.colors[0]&&t.push(e.clientId)})),t},t}();e.UserInfoManager=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=n(4),l=n(0),c=n(2),d=n(28),h=n(27),p=n(26),u=n(23),g=n(22),f=(n(21),n(20),n(19),n(18));n(17),n(16);u.ReplayControlBarTag,g.GameOverlayTag,f.MainPanelTag,n(15).SkinFilterPanelTag;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gstates=l.gs.gstates,e.uconfig=l.gs.uconfig,e.cconfig=l.gs.ucolors,e.appConfig=c.AppConfigurator.instance,e.hasNewPrivateMessage=!1,e.newPrivateMessageSkinUrl="",e.newPrivateMessageText="",e.cssColors=l.gs.ucolors.cssColors,e}return o(e,t),e.prototype.onChatIconClicked=function(t){window.open("unichat/chat.html","uni-chat","width=800, height=600, menubar=no, toolbar=no, scrollbars=no"),t.stopPropagation()},e.prototype.onSkinFilterButton=function(t){this.gstates.isSkinFilterPanelVisible=!this.gstates.isSkinFilterPanelVisible,t.stopPropagation()},e.prototype.mounted=function(){setTimeout(this.InitializeAfterAllMounted.bind(this),1)},e.prototype.InitializeAfterAllMounted=function(){var t=this;l.gs.gstates.mainPanelVisibleChangedProc=this.update.bind(this),l.gs.uconfig.RegisterChangedProc("ShowReplayBar",this.update.bind(this));var e=new p.GameViewDomain2.GameView;a.gameCore.Initialize(),e.Initialize(),a.gameCore.serverListModel?a.gameCore.serverListModel.Start():(l.gs.gstates.chatRoomSig=c.AppConfigurator.instance.uniChatServerSignature,a.gameCore.ConnectToGameServer());var n=new d.MapView,i=new h.TeamRankingChartView;n.Initialize(this.refs.game_overlay.refs.map_canvas),i.Initialize(this.refs.game_overlay.refs.lb_chart_canvas),a.gameCore.gameHudModel.Initialize(),e.StartAnimation(),a.gameCore.chatAppModel&&(a.gameCore.chatAppModel.chatNotificationBadgeProc=function(e,n,i){t.hasNewPrivateMessage=e,i?(t.newPrivateMessageSkinUrl=n,t.newPrivateMessageText=i):(t.newPrivateMessageSkinUrl="",t.newPrivateMessageText=""),t.update()}),l.gs.gstates.playerDeadCallbackProc=function(){!l.gs.uconfig.HideMenuAfterDeath&&l.gs.gstates.setMainPanelVisible(!0)}},r([s.template('\'\n\n<app-root>\n   \n\t\n   <style>\n\t\t*{\n\t\t\tbox-sizing: border-box;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\t\t\n\t\tapp-root{\n\t\t\tfont-family: \'Meiryo\', \'Arial\';\n\t\t\tfont-size: 18px;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t@font-face{\n\t\t\tfont-family: \'Overpass\';\n\t\t\tsrc: url(\'gr/Xolonium-Regular.ttf\') format(\'truetype\');\n\t\t}\n\n\t\t@font-face{\n\t\t\tfont-family: \'Overpass\';\n\t\t\tsrc: url(\'gr/ReFormation Sans Regular.ttf\') format(\'truetype\');\n\t\t}\n\n\t\t@font-face{\n\t\t\tfont-family: \'Overpass\';\n\t\t\tsrc: url(\'gr/icomoon.ttf\') format(\'truetype\');\n\t\t}\n\n\t\t.clear_both{\n\t\t\tclear: both;\n\t\t}\n\n\t\t.page_root{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: fixed;\n\t\t}\n\n\t\t#game_control_overlay{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t}\n\n\t\t.replay_bar_area_outer{\n\t\t\tposition: absolute;\n\t\t\ttop: 30px;\n\t\t\twidth: 100%;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t#psudo_cursor{\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t#psudo_cursor > img{\n\t\t\tposition: absolute;\n\t\t}\n\n\t\t#game_front_control_overlay{\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\t_background-color: #F00;\n\t\t}\n\n\t\t.ex_chat_icon_box{\n\t\t\tposition: absolute;\n\t\t\ttop: 6px;\n\t\t\tleft: 10px;\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t#ex_chat_icon{\n\t\t\tbackground-color: rgba(255,255,255,1);\n\t\t\twidth: 45px;\n\t\t\theight: 30px;\n\t\t\tborder-radius: 2px;\n\t\t\tborder: solid 1px #08F;\n\t\t\tcursor: pointer;\n\t\t\tcolor: #444;\n\t\t\ttext-align: center;\n\t\t\tline-height: 24px;\n\t\t\tpadding: 1px;\n\t\t\tz-index: 300;\n\t\t}\n\n\t\t#ex_chat_badge{\n\t\t\tposition: absolute;\n\t\t\twidth:16px;\n\t\t\theight:16px;\n\t\t\tleft: 36px;\n\t\t\ttop: -10px;\n\t\t\tz-index: 301;\n\t\t\tdisplay: visible;\n\t\t}\n\n\t\t.skin_filter_button{\n\t\t\tposition: absolute;\n\t\t\ttop: 6px;\n\t\t\tright: 6px;\n\t\t\tborder-radius: 2px;\n\t\t\tbackground-color: #FFF;\n\t\t\tborder: solid 1px #F0A;\n\t\t\tcolor: #F0A;\n\t\t\twidth: 24px;\n\t\t\theight: 24px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tcursor: pointer;\n\t\t\tfont-family: Overpass;\n\t\t}\n\n\t\t.ex_chat_new_message_outer{\n\t\t\tposition: absolute;\n\t\t\twidth:200px;\n\t\t\theight:50px;\n\t\t\tleft: 60px;\n\t\t\ttop: 6px;\n\t\t\tz-index: 302;\n\t\t\tdisplay: visible;\n\t\t\tbackground-color: #FFF0F0;\n\t\t\tborder: solid 1px #F44;\n\t\t\tcolor: #666;\n\t\t\tfont-size: 13px;\n\t\t\tpadding: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.ex_chat_new_message{\n\t\t\tposition: relative;\n\t\t}\n\n\t\t.ex_chat_new_message > *{\n\t\t\tposition: absolute;\n\t\t}\n\n\t\t.ex_chat_new_message > img{\n\t\t\twidth: 30px;\n\t\t\theight: 30px;\n\t\t\tborder-radius: 4px;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t}\n\n\t\t.ex_chat_new_message  > div.textpart{\n\t\t\twidth: calc(100% - 40px);\n\t\t\toverflow: hidden;\n\t\t\ttop: 0;\n\t\t\tleft: 34px;\n\t\t}\n\n\n\n\t</style>\n   \n\t<div class="page_root" spellcheck="false"\n\t\tstyle="background-color: {cconfig.cssColors.clGameBackground}; color: {cconfig.cssColors.clGameForeground};">\n\t\t\n   <div id="game_canvas_layer">\n      \n\t\t\t\n      <canvas id="game_canvas_layer_main" ref="game_canvas_layer_main"/>\n      \n\t\t\n   </div>\n   \n\t\t\n   <div id="game_hud_layer">\n      \n\t\t\t\n      <game-overlay id="game_overlay" ref="game_overlay"/>\n      \n\n\t\t\t\n      <div id="psudo_cursor">\n\t\t\t\t<img src="gr/cursor.png" id="psudo_cursor_img_off" />\n\t\t\t\t<img src="gr/cursor_red.png" id="psudo_cursor_img_on" />\n\t\t\t</div>\n      \n\t\t\n   </div>\n   \n\n\t\t\n   <main-panel id="main_panel" ref="main_panel" />\n   \n\n\t\t\n   <div class="replay_bar_area_outer" show={uconfig.ShowReplayBar}>\n      \n\t\t\t\n      <replay-control-bar />\n      \n\t\t\n   </div>\n   \n\n\t\t\n   <div class="ex_chat_icon_box" style="background-color:{cssColors.clChatBackground};margin-top:5px;border-radius:4px;width: 300px;" show={appConfig.useUniChat}>\n   <div onclick = {onChatIconClicked}><i style="margin-left: 5px;margin-top: 3px;" class="material-icons num_text">message</i></i></div>\n   <div style="display:flex;margin:auto;">\n   <div id="chatTag" style="margin-top:-4px;"></div>\n      </div>\n     </div>\n   \n\n\t\t\n   <div class=\'ex_chat_new_message_outer\' onmousedown={onChatIconClicked} show={hasNewPrivateMessage}>\n      \n\t\t\t\n      <div class=\'ex_chat_new_message\'>\n         \n\t\t\t\t<img src={newPrivateMessageSkinUrl} />\n\t\t\t\t\n         <div class=\'textpart\'>\n\t\t\t\t\t{newPrivateMessageText}\n\t\t\t\t</div>\n         \n\t\t\t\n      </div>\n      \n\t\t\n   </div>\n   \n\n\t\t\n   \n\t\t\t\n\t\t\n   \n\t\n\t\t<img src="gr/error.png" id="img_no_image_fallback" style="display:none" />\n\n</app-root>\n\n\'')],e)}(s.Element);e.AppRootTag=m,e.InitializeView=function(){var t=m.createElement();document.body.appendChild(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),o=n(2);window.onload=function(){$("head").append('<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Overpass&display=swap" rel="stylesheet">'),console.log("LWGA-R A121a0 180618");var t="ja"==navigator.language.slice(0,2);o.AppConfigurator.instance.allowOnlyForJapaneseLangUser&&!t?document.body.innerHTML="このページは現在国内ユーザ向けに提供しています。日本語環境以外ではページが表示されないようになっています。":i.InitializeView()}}])