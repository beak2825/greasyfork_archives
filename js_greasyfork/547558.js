// ==UserScript==
// @name        中键跳转 Blabla link
// @namespace   Violentmonkey Scripts
// @match       https://nikke.work/*
// @grant       none
// @version     1.0
// @author      zunpiau
// @run-at      document-end
// @license     MIT
// @description 中键点击角色列表中的头像，自动打开blablalink图鉴链接
// @downloadURL https://update.greasyfork.org/scripts/547558/%E4%B8%AD%E9%94%AE%E8%B7%B3%E8%BD%AC%20Blabla%20link.user.js
// @updateURL https://update.greasyfork.org/scripts/547558/%E4%B8%AD%E9%94%AE%E8%B7%B3%E8%BD%AC%20Blabla%20link.meta.js
// ==/UserScript==

const idMap = {
"伊莱格: BOOM 与惊吓": "502",
"桃乐丝: 机缘巧遇": "234",
"贝伊 +": "550",
"托比 +": "192",
"尤莉亚 +": "150",
"银华: 战术升级": "095",
"贝斯蒂: 战术升级": "094",
"艾玛：战术升级": "093",
"波莉 +": "030",
"海伦 +": "352",
"特蕾娜": "412",
"阿妮斯": "012",
"豺狼": "111",
"桑迪": "080",
"鲁玛妮": "240",
"爱蜜莉雅": "821",
"诺雅": "232",
"帕斯卡": "812",
"梅登: 冰玫瑰": "183",
"德雷克 +": "101",
"德雷克": "101",
"梅登": "181",
"尼恩": "011",
"诺亚尔": "271",
"佩珀": "131",
"产品 23": "307",
"索达: 闪亮兔女郎": "314",
"舒格": "140",
"毒蛇 +": "112",
"毒蛇": "112",
"拉普拉斯 +": "100",
"米卡: 雪地伙伴": "062",
"茨瓦伊": "390",
"尼希利斯塔": "261",
"阿尔卡娜": "581",
"A2": "811",
"拉普拉斯": "100",
"长发公主": "221",
"格拉维": "514",
"红莲": "222",
"安克": "351",
"安克: 天真的女仆": "355",
"安妮: 奇迹仙女": "121",
"贝伊": "550",
"饼干": "381",
"克劳斯特": "521",
"iDoll 花": "304",
"iDoll 太阳": "308",
"米卡": "061",
"诺伊斯": "430",
"帕瓦": "801",
"基里": "033",
"蒂亚": "451",
"贝斯蒂": "091",
"玛娜": "290",
"阿妮斯: 闪耀夏日": "015",
"红莲: 暗影": "225",
"哈兰": "230",
"普丽瓦蒂: 不友善的女仆": "313",
"艾瑟尔": "291",
"吉尔提": "400",
"伊莎贝尔": "231",
"莱昂纳": "382",
"玛律恰那": "321",
"梅里": "130",
"娜嘉": "450",
"尼夫": "193",
"波莉": "030",
"士兵FA": "301",
"克拉乌": "110",
"坎西": "402",
"索林": "071",
"明日香": "830",
"白雪公主": "220",
"爱德": "310",
"米哈拉": "161",
"牡丹": "281",
"潘托姆": "580",
"零 (暂称)": "834",
"银华": "092",
"姬野": "802",
"露姬": "272",
"鲁德米拉": "190",
"坎西: 逃生女王": "403",
"樱花: 夏日绽放": "284",
"爱因": "391",
"西格娜": "060",
"N102": "120",
"杨": "201",
"尤妮": "160",
"布蕾德": "520",
"可可": "311",
"D: 杀手妻子": "043",
"朵拉": "202",
"艾可希雅 +": "210",
"艾可希雅": "210",
"海伦": "352",
"真理": "832",
"麦斯威尔": "102",
"米尔克 +": "141",
"米尔克": "141",
"产品 08": "302",
"拉姆": "822",
"长发公主：纯洁恩典": "226",
"小红帽": "470",
"特罗尼": "501",
"尤尔夏": "171",
"艾德米": "172",
"樱花": "282",
"德尔塔": "020",
"普琳玛 +": "142",
"普琳玛": "142",
"梅里: 海湾女神": "132",
"海伦: 海蓝宝石": "353",
"2B": "810",
"布兰儿": "270",
"布丽德": "070",
"桃乐丝": "233",
"富克旺": "242",
"吉萝婷: 冬日杀手": "182",
"尤莉亚": "150",
"莫莉": "590",
"普丽瓦蒂": "170",
"拉毗": "010",
"罗珊娜: 高雅海洋": "283",
"露菲": "200",
"露菲: 冬日购物狂": "203",
"森": "401",
"士兵 EG": "300",
"托比": "192",
"小美人鱼": "513",
"爱丽丝: 仙境兔女郎": "195",
"克雷伊": "551",
"D": "040",
"艾菲涅尔": "241",
"iDoll 海": "305",
"丽塔": "082",
"玛奇玛": "800",
"马斯特": "350",
"米兰达 +": "032",
"米兰达": "032",
"美里": "833",
"尼罗": "380",
"诺薇儿": "212",
"莱伊": "392",
"樱": "836",
"西格娜": "022",
"士兵 OW": "306",
"沃伦姆": "431",
"神罚": "260",
"爱丽丝": "191",
"米哈拉: 羁绊锁链": "162",
"灰姑娘": "511",
"明日香: WILLE": "835",
"鲁德米拉：冬日之主": "194",
"阿莉亚": "432",
"皇冠": "330",
"迪塞尔 +": "072",
"迪塞尔": "072",
"伊莱格": "500",
"艾玛": "090",
"芙罗拉": "411",
"吉萝婷": "180",
"吉洛": "361",
"马斯特: 浪漫的女仆": "354",
"尼恩: 蓝色海洋": "014",
"产品 12": "303",
"拉毗：小红帽": "016",
"零": "831",
"蕾姆": "820",
"罗珊娜": "280",
"索达": "312",
"白雪公主: 纯真时代": "224",
"伊芙": "850",
"K": "041",
"百合": "852",
"渡鸦": "851",
"索拉": "532"
}

const id = setInterval(() => {
  const elem = document.querySelector('.character-list')
  if (!elem) {
    return
  }
  clearInterval(id)
  elem.addEventListener('auxclick', e => {
    if (e.which !== 2) {
      return
    }
    if (e.target.localName !== 'img') {
      return
    }
    const name = e.target.alt
    if (!name) {
      return
    }
    if (idMap[name]) {
      open('https://www.blablalink.com/shiftyspad/nikke?from=list&nikke=' + idMap[name])
    }
  })
}, 200)
