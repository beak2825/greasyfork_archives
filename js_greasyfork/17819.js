// ==UserScript==
// @name         More Emoticons V2
// @namespace  Matrix
// @description Add more Emoticons on KAT
// @include     *kat.cr/*
// @version      0.02
// @grant       none
// @downloadURL https://update.greasyfork.org/scripts/17819/More%20Emoticons%20V2.user.js
// @updateURL https://update.greasyfork.org/scripts/17819/More%20Emoticons%20V2.meta.js
// ==/UserScript==


$(window).load(function(){
  
	$('.bbedit-smileybar').append('<img title="Smoking" class="cusSmile" alt="smoke" href src="http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif" />');
	$('.bbedit-smileybar').append('<img title="Laughing" class="cusSmile" alt="bigsmile" src="http://www.skype-emoticons.com/images/emoticon-00102-bigsmile.gif" />');
	$('.bbedit-smileybar').append('<img title="Crying" class="cusSmile" alt="crying" src="http://www.skype-emoticons.com/images/emoticon-00106-crying.gif" />');
	$('.bbedit-smileybar').append('<img title="Wondering" class="cusSmile" alt="wondering" src="http://www.skype-emoticons.com/images/emoticon-00112-wondering.gif" />');
	$('.bbedit-smileybar').append('<img title="Talking" class="cusSmile" alt="talking" src="http://www.skype-emoticons.com/images/emoticon-00117-talking.gif" />');
    $('.bbedit-smileybar').append('<img title="Puking" class="cusSmile" alt="puke" src="http://www.skype-emoticons.com/images/emoticon-00119-puke.gif" />');
    $('.bbedit-smileybar').append('<img title="Boom" class="cusSmile" alt="angry" src="http://www.skype-emoticons.com/images/emoticon-00121-angry.gif" />');
    $('.bbedit-smileybar').append('<img title="Party" class="cusSmile" alt="party" src="http://www.skype-emoticons.com/images/emoticon-00123-party.gif" />');
    $('.bbedit-smileybar').append('<img title="Calling" class="cusSmile" alt="call" src="http://www.skype-emoticons.com/images/emoticon-00129-call.gif" />');
    $('.bbedit-smileybar').append('<img title="Devil" class="cusSmile" alt="devil" src="http://static.skaip.org/img/emoticons/v2/ffffff/devil.gif" />');
    $('.bbedit-smileybar').append('<img title="Envy" class="cusSmile" alt="envy" src="http://static.skaip.org/img/emoticons/v2/ffffff/envy.gif" />');
    $('.bbedit-smileybar').append('<img title="Makeup" class="cusSmile" alt="makeup" src="http://www.skype-emoticons.com/images/emoticon-00135-makeup.gif" />');
    $('.bbedit-smileybar').append('<img title="Whew" class="cusSmile" alt="whew" src="http://www.skype-emoticons.com/images/emoticon-00141-whew.gif"  />');
	$('.bbedit-smileybar').append('<img title="Sweating" class="cusSmile" alt="sweat" src="http://www.skype-emoticons.com/images/emoticon-00107-sweating.gif" />');
    $('.bbedit-smileybar').append('<img title="Speechless" class="cusSmile" alt="speechless" src="http://www.skype-emoticons.com/images/emoticon-00108-speechless.gif" />');
    $('.bbedit-smileybar').append('<img title="Tongue Out" class="cusSmile" alt="tongue" src="http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif" />');
    $('.bbedit-smileybar').append('<img title="Worried" class="cusSmile" alt="worried" src="http://www.skype-emoticons.com/images/emoticon-00124-worried.gif" />');
    $('.bbedit-smileybar').append('<img title="Mmm" class="cusSmile" alt="mmm" src="http://www.skype-emoticons.com/images/emoticon-00125-mmm.gif" />');
    $('.bbedit-smileybar').append('<img title="Angel" class="cusSmile" alt="angel" src="http://static.skaip.org/img/emoticons/v2/ffffff/angel.gif" />');
    $('.bbedit-smileybar').append('<img title="Eyebrows" class="cusSmile" alt="happy" src="http://www.skype-emoticons.com/images/emoticon-00142-happy.gif" />');
    $('.bbedit-smileybar').append('<img title="Wasntme" class="cusSmile" alt="itwasntme" src="http://www.skype-emoticons.com/images/emoticon-00122-itwasntme.gif" />');
    $('.bbedit-smileybar').append('<img title="Emo" class="cusSmile" alt="emo" src="http://www.skype-emoticons.com/images/emoticon-00147-emo.gif" />');
    $('.bbedit-smileybar').append('<img title="Handshake" class="cusSmile" alt="handshake" src="http://www.skype-emoticons.com/images/emoticon-00150-handshake.gif" />');
    $('.bbedit-smileybar').append('<img title="Muscle" class="cusSmile" alt="muscle" src="http://www.skype-emoticons.com/images/emoticon-00165-muscle.gif" />');
    $('.bbedit-smileybar').append('<img title="Highfive" class="cusSmile" alt="highfive" src="https://multi-cheats.com/smilie/Skype/highfive.gif" />');
    $('.bbedit-smileybar').append('<img title="Bucky" class="cusSmile" alt="bucky" src="http://static.skaip.org/img/emoticons/v2/ffffff/bucky.gif" />');
    $('.bbedit-smileybar').append('<img title="Captain" class="cusSmile" alt="captain" src="http://static.skaip.org/img/emoticons/v2/ffffff/captain.gif" />');
    $('.bbedit-smileybar').append('<img title="Lmao" class="cusSmile" alt="lmao" src="http://static.skaip.org/img/emoticons/v2/ffffff/cwl.gif" />');
    $('.bbedit-smileybar').append('<img title="Oliver" class="cusSmile" alt="oliver" src="http://media2.giga.de/2016/04/hidden-skype-emoticon-oliver.gif" />');
        $('.bbedit-smileybar').append('<img title="Ignore" class="cusSmile" alt="donttalktome" src="http://static.skaip.org/img/emoticons/v2/ffffff/donttalktome.gif" />');
        $('.bbedit-smileybar').append('<img title="Crossed" class="cusSmile" alt="fingerscrossed" src="http://static.skaip.org/img/emoticons/v2/ffffff/fingerscrossed.gif" />');
        $('.bbedit-smileybar').append('<img title="Idea" class="cusSmile" alt="idea" src="http://static.skaip.org/img/emoticons/v2/ffffff/idea.gif" />');
        $('.bbedit-smileybar').append('<img title="Hangover" class="cusSmile" alt="hungover" src="http://static.skaip.org/img/emoticons/v2/ffffff/hungover.gif" />');
        $('.bbedit-smileybar').append('<img title="Movember" class="cusSmile" alt="movember" src="http://static.skaip.org/img/emoticons/v2/ffffff/movember.gif" />');
        $('.bbedit-smileybar').append('<img title="Fury" class="cusSmile" alt="nickfury" src="http://static.skaip.org/img/emoticons/v2/ffffff/nickfury.gif" />');
        $('.bbedit-smileybar').append('<img title="Whistle" class="cusSmile" alt="whistle" src="http://static.skaip.org/img/emoticons/v2/ffffff/whistle.gif" />');
        $('.bbedit-smileybar').append('<img title="Vampire" class="cusSmile" alt="vampire" src="http://static.skaip.org/img/emoticons/v2/ffffff/vampire.gif" />');
        $('.bbedit-smileybar').append('<img title="Hand" class="cusSmile" alt="talktothehand" src="http://static.skaip.org/img/emoticons/v2/ffffff/talktothehand.gif" />');
        $('.bbedit-smileybar').append('<img title="Surprised" class="cusSmile" alt="surprised" src="http://static.skaip.org/img/emoticons/v2/ffffff/surprised.gif" />');
        $('.bbedit-smileybar').append('<img title="Slap" class="cusSmile" alt="slap" src="http://static.skaip.org/img/emoticons/v2/ffffff/slap.gif" />');
        $('.bbedit-smileybar').append('<img title="Poop" class="cusSmile" alt="poop" src="http://static.skaip.org/img/emoticons/v2/ffffff/poop.gif" />');
    
jQuery.fn.extend({
insertAtCaret: function(myValue){
  return this.each(function(i) {
    if (document.selection) {
      //For browsers like Internet Explorer
      this.focus();
      var sel = document.selection.createRange();
      sel.text = myValue;
      this.focus();
    }
    else if (this.selectionStart || this.selectionStart == '0') {
      //For browsers like Firefox and Webkit based
      var startPos = this.selectionStart;
      var endPos = this.selectionEnd;
      var scrollTop = this.scrollTop;
      this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
      this.focus();
      this.selectionStart = startPos + myValue.length;
      this.selectionEnd = startPos + myValue.length;
      this.scrollTop = scrollTop;
    } else {
      this.value += myValue;
      this.focus();
    }
  });
}
});

	$('.cusSmile').click(function(){ $('textarea',$(this).closest('form')).insertAtCaret( '[img]'+ $(this).attr('src') +'[/img]' );})
  
});