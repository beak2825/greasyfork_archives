// ==UserScript==
// @name         ABB: Goodreads link
// @namespace    http://tampermonkey.net/
// @version      0.6
// @description  Add goodreads search link to headers
// @author       openam
// @include      /^https?://audiobookbay\.(nl|fi|li).*$/
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/39168/ABB%3A%20Goodreads%20link.user.js
// @updateURL https://update.greasyfork.org/scripts/39168/ABB%3A%20Goodreads%20link.meta.js
// ==/UserScript==

(function() {
    'use strict';

    $('.postTitle').each((index, div) => {
        const $div = $(div);
        const $header = $($div.find('h1,h2'));
        const text = $header.text();
        const img = '<img style="height: 24px; vertical-align: bottom;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTM5jWRgMAAAAVdEVYdENyZWF0aW9uIFRpbWUAMjcvMy8wOeispIwAAAQRdEVYdFhNTDpjb20uYWRvYmUueG1wADw/eHBhY2tldCBiZWdpbj0iICAgIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM0IDQ2LjI3Mjk3NiwgU2F0IEphbiAyNyAyMDA3IDIyOjExOjQxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eGFwOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzM8L3hhcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhhcDpDcmVhdGVEYXRlPjIwMDktMDMtMjdUMTU6Mjg6MzFaPC94YXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhhcDpNb2RpZnlEYXRlPjIwMDktMDktMDhUMjM6MTM6MDFaPC94YXA6TW9kaWZ5RGF0ZT4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIKUQFf8AAAitSURBVGjenVpbb5TnEfZP6A8okXpXKaW3TUjvSNOQSk3UhqYKiSrSBsoNESVIXNROoE1RSKMcGlBTkiaVEhDhImmxwAZsAzZ412uvD/XZYPABm/Wej14DYTozu/N5vtn327WK9Oyc551n33e/g0XTqVMfNxGmJofe+O9I33w0eg0GBYPX/dIXq/p1zOoerrn9rjW0dPQfGQnPT04MviFz88fYaKQDAXfu3IJiIQv31koe1taKdW3rI11g40F5Oj/QVy5CoZCBxcVZGMVZx8f6O5jA5MRQy8hwGPK5FJRXC7BayiGJjA+lYrZGWp/2W19QXpCuc7V/tZTnGXPZJAwP9cLEeLSlaWQ4NL+8PMeBUpEK0ixFb2Rbv/U1ynH1LlZ9to+AdmNx4SYep9B802C0h7/1SnIKZZpBuuD/scUXlKv9Nr/eDCRXS1ko5FMQxdmZADEqoqNE3wCxRF3bQf6N2LaHzguCrdU+Ac0cHUACxIKOTyGf9DHWNuliu/J0TMOVUw9BvV1+mjk60I0E8GOtXHAOEbR4EKF6JOvlBMVdX4jofgJoFCmQS7AUXSA+7de29evajSBo7Xq9ynhF8giUV/PIKoGX0rhPukAxgcvvym8Utz11XlANXXgGBq76CdQUbGAo1yLDkW449nYzHD/awiC9p7O17lD1vgjXekSAd2Cg/ypuRw7y2RUGDS0Qn/gb5bR9cxKe3fIoPPvEo/Dmvlfh7389zHj9dy/A1h9ugq2bN8G/jh/16oYjV+Gx732npp+WQTpdSml23AEigNfVHA0RY5Autuga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">';

        $(`<a target="_blank" href="https://anonymz.com/?https://www.goodreads.com/search?q=${ encodeURIComponent(text) }"> ${ img }</a>`).appendTo($header);
    });
})();