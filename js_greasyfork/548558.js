// ==UserScript==
// @name         Invidious: Remove ALL CAPS + $ + MrBeast + Keyword + Channel Filter (with exclusions) + Redirect
// @namespace    local
// @version      4.7
// @license      MIT
// @description  Hides search results with ALL CAPS, $ signs, blocked keywords and emojis, or blacklisted channels. Redirects feeds, and allows safe acronyms like NVIDIA or NASA.
// @match        https://yewtu.be/*
// @match        https://inv.nadeko.net/*
// @match        https://invidious.nerdvpn.de/*
// @match        https://inv.perditum.com/*
// @match        https://*/watch*
// @match        https://*/feed/popular*
// @match        https://*/feed/trending*
// @grant        none
// @run-at       document-start
// @downloadURL https://update.greasyfork.org/scripts/548558/Invidious%3A%20Remove%20ALL%20CAPS%20%2B%20%24%20%2B%20MrBeast%20%2B%20Keyword%20%2B%20Channel%20Filter%20%28with%20exclusions%29%20%2B%20Redirect.user.js
// @updateURL https://update.greasyfork.org/scripts/548558/Invidious%3A%20Remove%20ALL%20CAPS%20%2B%20%24%20%2B%20MrBeast%20%2B%20Keyword%20%2B%20Channel%20Filter%20%28with%20exclusions%29%20%2B%20Redirect.meta.js
// ==/UserScript==

(function () {
    'use strict';

    // Redirect feed pages to search
    /*
         */
    const path = window.location.pathname;
    if (path === '/feed/popular' || path === '/feed/trending') {
        const base = window.location.origin;
        window.location.replace(`${base}/search`);
        return;
    }
    /*
        */

    // Allowed words (whitelisted acronyms, companies, etc.) that cancels out blockedKeywords and all CAPS filter; emoji filtering still applies.
    const allowedAllCapsPatterns = [
        /^opening(s)?$/i,
        /^ending(s)?$/i,
        /^ost$/i,
        /^amv$/i,
        /^viz$/i,
        /^fanmade$/i,
        /^sleep$/i,
    ];

    const whitelistedChannels = [
        'mariah carey',
        // add your trusted channels here
    ];

    function isAllCapsWord(word) {
        const clean = word.replace(/[^\p{L}]/gu, ''); // keep letters only
        if (allowedAllCapsPatterns.some(pattern => pattern.test(clean))) return false;
        return clean.length > 2 && clean === clean.toUpperCase();
    }

    // === EARLY HIDE (only UI clutter, not videos!) ===
    function injectEarlyHideCSS() {
        const style = document.createElement('style');
        style.textContent = `
            a[href*="/shorts"],
            .user-field,
            .flex-right > .video-data,
            .pure-u-lg-1-5.pure-u-1:nth-of-type(3),
            .feed-menu,
            footer,
            a[href*="/login?"] {
                display: none !important;
            }
        `;
        document.documentElement.appendChild(style);
    }
    injectEarlyHideCSS();

    const futureYearRegex = /(201[5-9]|202\d|203\d|21\d{2})/; // Year clickbait crap. Example, "First Stream of 2026" etc. Covers 2015-2199 (Pretty sure YouTube will be dead before 2100.)

    const blockedKeywords = [
        "%",
        "'s terrible",
        "can't escape",
        "can't make money",
        "canâ€™t escape",
        "couldn't hide it",
        "didn't go as planned",
        "didn't go to plan",
        "doesn't make sense",
        "don't tell you",
        "don't watch this",
        "dream desk",
        "every day for",
        "he's facing",
        "here's why",
        "heâ€™s facing",
        "i can't live",
        "i canâ€™t",
        "i couldn't lose",
        "i couldnâ€™t lose",
        "i don't",
        "i'll tell you why",
        "i'm back",
        "i'm broke",
        "i'm building",
        "i'm buying",
        "i'm changing",
        "i'm cleaning",
        "i'm creating",
        "i'm dead",
        "i'm done",
        "i'm dying",
        "i'm giving away",
        "i'm going to",
        "i'm helping",
        "i'm hiring",
        "i'm leaving",
        "i'm losing",
        "i'm making",
        "i'm not",
        "i'm opening",
        "i'm poor",
        "i'm quitting",
        "i'm reacting",
        "i'm rebuilding",
        "i'm recreating",
        "i'm repairing",
        "i'm restoring",
        "i'm selling",
        "i'm spending",
        "i'm starting",
        "i'm testing",
        "i'm tired of",
        "i'm tired",
        "i'm transforming",
        "i'm trapped",
        "i'm trying",
        "i'm turning",
        "i'm using",
        "i'm winning",
        "i'm working",
        "i'm",
        "i've bought",
        "i've built",
        "i've changed",
        "i've created",
        "i've done",
        "i've ever",
        "i've failed",
        "i've fixed",
        "i've found",
        "i've given",
        "i've got",
        "i've grown",
        "i've learned",
        "i've lost",
        "i've made",
        "i've met",
        "i've never",
        "i've opened",
        "i've paid",
        "i've quit",
        "i've realized",
        "i've repaired",
        "i've replaced",
        "i've seen",
        "i've spent",
        "i've survived",
        "i've tested",
        "i've tried",
        "i've used",
        "i've won",
        "i've",
        "id never",
        "id quit",
        "id spend",
        "id try",
        "ill build",
        "ill buy",
        "ill change",
        "ill create",
        "ill do",
        "ill fix",
        "ill make",
        "ill never",
        "ill pay",
        "ill spend",
        "ill try",
        "ill win",
        "im back",
        "im broke",
        "im building",
        "im buying",
        "im changing",
        "im cleaning",
        "im creating",
        "im done",
        "im dying",
        "im giving away",
        "im going to",
        "im helping",
        "im hiring",
        "im leaving",
        "im losing",
        "im making",
        "im not",
        "im opening",
        "im poor",
        "im quitting",
        "im reacting",
        "im rebuilding",
        "im recreating",
        "im repairing",
        "im restoring",
        "im selling",
        "im spending",
        "im starting",
        "im testing",
        "im tired",
        "im transforming",
        "im trapped",
        "im trying",
        "im turning",
        "im using",
        "im winning",
        "im working",
        "influencer's career",
        "isn't getting",
        "isn't working",
        "it's happening",
        "it's over",
        "ive bought",
        "ive built",
        "ive changed",
        "ive created",
        "ive done",
        "ive failed",
        "ive fixed",
        "ive found",
        "ive given",
        "ive got",
        "ive grown",
        "ive learned",
        "ive lost",
        "ive made",
        "ive met",
        "ive never",
        "ive opened",
        "ive paid",
        "ive quit",
        "ive realized",
        "ive repaired",
        "ive replaced",
        "ive seen",
        "ive spent",
        "ive survived",
        "ive tested",
        "ive tried",
        "ive used",
        "ive won",
        "iâ€™d never",
        "iâ€™d quit",
        "iâ€™d spend",
        "iâ€™d try",
        "iâ€™ll build",
        "iâ€™ll buy",
        "iâ€™ll change",
        "iâ€™ll create",
        "iâ€™ll do",
        "iâ€™ll fix",
        "iâ€™ll make",
        "iâ€™ll never",
        "iâ€™ll pay",
        "iâ€™ll spend",
        "iâ€™ll try",
        "iâ€™ll win",
        "iâ€™m",
        "iâ€™ve",
        "just won't stop",
        "let's talk",
        "letâ€™s talk",
        "my channel",
        "she's facing",
        "sheâ€™s facing",
        "shouldn't have been",
        "shouldnâ€™t have been",
        "the world's",
        "they couldn't",
        "they don't tell",
        "wasn't enough",
        "we're not",
        "we're so",
        "won't fail",
        "you don't look",
        "you're being",
        "youâ€™re being watched",
        "youâ€™re not ready",
        ' ai',
        '!',
        '#',
        '*',
        '.',
        '..',
        '1,000,000 women go',
        ':',
        '?',
        'a broke man',
        'a dark secret',
        'a lie',
        'a loser',
        'a menace',
        'a mistake',
        'a.i',
        'aaron clarey',
        'aaronclarey',
        'about to burst',
        'absolutely hilarious',
        'accepting my',
        'actually real',
        'actually works',
        'adin',
        'ai ',
        'ai: ',
        'alarming trend',
        'algorithm suck',
        'aliexpress products are',
        'alinity',
        'allegation',
        'almost lost it',
        'alternate universe',
        'amouranth',
        'ancient aliens',
        'anti-delulu post',
        'are a scam',
        'are crazy',
        'are fighting',
        'are out of control',
        'are ruining',
        'are scary',
        'are taking over',
        'around the world in',
        'arrest',
        'artificial intelligence',
        'as you think',
        'asmondgold',
        'awful',
        'awkward',
        'backstabbed',
        'bad news for fruit',
        'bank collapse',
        'be like',
        'beautiful free',
        'before itâ€™s too late',
        'behind',
        'belle delphine',
        'big announcement',
        'big ed',
        'biggest mistake',
        'bizarre',
        'blocked me',
        'blows my mind',
        'brainrot',
        'breaks the internet',
        'bringing ideas',
        'bullied a',
        'bullies a',
        'but eating',
        'buy me',
        'buy now pay later',
        'buy now pay',
        'buy now pay',
        'buying my',
        'by creep',
        'called me out',
        'called me',
        'called out',
        'came to visit',
        'cancel culture',
        'canceled',
        'cancelled',
        'cant make money',
        'case of',
        'caught on camera',
        'challenge',
        'charlie kirk',
        'chat',
        'chatgpt destroys',
        'chatgpt',
        'cheating',
        'check out',
        'claps back',
        'commentary',
        'company loyalty in',
        'consent',
        'content creat',
        'controversial',
        'cooked',
        'cost of kicking',
        'could ruin everything',
        'craziest',
        'cringe',
        'cult',
        'cure your delulu',
        'cursed video',
        'daily dose',
        'dangerous trend',
        'dangerous world',
        'dangerously exciting',
        'dangers of dating',
        'dark secret',
        'dark side of betterhelp',
        'dark side of',
        'dark world',
        'darkest',
        'dating a broke',
        'dating horror stories',
        'defend',
        'degenerate',
        'deletes a random',
        'deserved end',
        'deserves',
        'destroy',
        'destroyed by',
        'destroyed generation',
        'destroyed my',
        'dhar mann',
        'did not go as planned',
        'did not go to plan',
        'did something about it',
        'did you know',
        'diddy',
        'dilemma',
        'dirty',
        'disaster',
        'discover',
        'disney',
        'disturbing reason',
        'disturbing',
        'dj cook',
        'dj toenail',
        'do destruction',
        'do not mock',
        'do this now',
        'donald trump',
        'donâ€™t miss this',
        'donâ€™t watch this',
        'downfall of',
        'drama',
        'dressing up',
        'dropping',
        'drowning themselves',
        'dumb post',
        'elon musk warns',
        'elon',
        'embarass',
        'embarrass',
        'emiru',
        'ended an influencer',
        'ended horribly',
        'entire generation',
        'epic',
        'epstein',
        'euros',
        'even worse',
        'every parent knew',
        'everyone hates',
        'everyone is talking about',
        'everyone lied',
        'everyone wants this',
        'everything is about',
        'everything is falling apart',
        'everything that',
        'explained',
        'exploiting',
        'expose',
        'exposed online',
        'exposed',
        'exposing',
        'face off',
        'fail',
        'faked being',
        'falling apart',
        'faze clan',
        'fazeclan',
        'feel the same anymore',
        'femininity coaches are',
        'files',
        'final warning',
        'final year',
        'finally did it',
        'finally happened',
        'financial regrets people',
        'finished',
        'fixing a',
        'fixing her',
        'fixing his',
        'fooled people',
        'for strangers',
        'for this',
        'forbidden knowledge',
        'forcing',
        'fortnite',
        'freakiest',
        'from a bedroom',
        'fruit crisis',
        'fruit industry secret',
        'fruit is a disaster',
        'funniest',
        'funny',
        'gambled my',
        'gambling experience',
        'gambling my',
        'game changer',
        'gamers nexus',
        'gamersnexus',
        'gaming on a',
        'get the best of me',
        'gets destroyed',
        'gets scammed',
        'getting crazy',
        'getting fillers in',
        'getting worse',
        'giveaway',
        'giving strangers',
        'goes wrong',
        'going broke while',
        'gone horribly wrong',
        'gone too far',
        'gone wrong',
        'gonna change',
        'got arrested',
        'got away with',
        'got caught',
        'got confirm',
        'got even worse',
        'got the best of me',
        'got worse',
        'greatest trick',
        'h3',
        'had to see this',
        'happy endings at',
        'has arrived',
        'has died',
        'has lost it',
        'hasan',
        'have to be ugly',
        'he deserve',
        'he got',
        'he lost it',
        'he ruin',
        'he said',
        'he speed',
        'he tried',
        'her life',
        'her new',
        'her reaction was priceless',
        'here is why',
        'hidden cost of',
        'hidden danger',
        'high end',
        'high maintenance isnâ€™t',
        'hilarious',
        'his life',
        'his new',
        'hit a wall',
        'honest review',
        'horrible',
        'horrifying',
        'horror stories',
        'hot topic',
        'how a',
        'how crime works',
        'how i',
        'how one',
        'how this person',
        'how to',
        'huge change',
        'hyperinflation warning',
        'i (legally)',
        'i 3d printed',
        'i accidentally',
        'i adopted',
        'i almost died',
        'i almost died',
        'i almost',
        'i am already',
        'i am dead',
        'i am running',
        'i amazed',
        'i analyze',
        'i answered',
        'i asked',
        'i ate',
        'i attempt',
        'i beat',
        'i became',
        'i became',
        'i bought',
        'i bought',
        'i box',
        'i broke',
        'i brought',
        'i built',
        'i built',
        'i can\'t believe',
        'i canâ€™t believe',
        'i canâ€™t live',
        'i cast',
        'i caught',
        'i challenged',
        'i changed',
        'i cleaned',
        'i cloned',
        'i confront',
        'i control',
        'i convinced',
        'i crashed',
        'i create',
        'i create',
        'i created',
        'i cried',
        'i cut',
        'i deliver',
        'i did',
        'i discovered',
        'i dj',
        'i donate',
        'i donated',
        'i double',
        'i download',
        'i earned',
        'i enter',
        'i escaped',
        'i experienced',
        'i explored',
        'i exposed',
        'i failed',
        'i fake',
        'i fell for a',
        'i fell into',
        'i fell into',
        'i fixed',
        'i flew',
        'i flew',
        'i found',
        'i gambled',
        'i gaslit',
        'i gave',
        'i got',
        'i got',
        'i grew',
        'i guessed',
        'i hacked',
        'i hacked',
        'i had',
        'i hatch',
        'i hate',
        'i have hidden',
        'i have no',
        'i have no',
        'i have to',
        'i have to',
        'i help',
        'i help',
        'i hire',
        'i hired',
        'i hit',
        'i hung',
        'i invested',
        'i investigated',
        'i joined',
        'i launch',
        'i learned',
        'i left',
        'i legally',
        'i let greed',
        'i let greed',
        'i lied',
        'i lived',
        'i lose',
        'i lost my',
        'i lost my',
        'i lost',
        'i made',
        'i made',
        'i met',
        'i moved',
        'i never thought',
        'i never thought',
        'i only ate',
        'i opened',
        'i ordered',
        'i paid',
        'i perform',
        'i picked',
        'i played',
        'i played',
        'i predicted',
        'i pretended',
        'i print',
        'i proved',
        'i put',
        'i put',
        'i quit',
        'i reacted',
        'i realized',
        'i recorded',
        'i recreate',
        'i repaired',
        'i replaced',
        'i responded',
        'i revealed',
        'i ruined',
        'i sail',
        'i saved',
        'i saved',
        'i saw',
        'i sent',
        'i serve',
        'i set up',
        'i shared',
        'i shocked',
        'i should',
        'i showed',
        'i shred',
        'i snuck',
        'i solved',
        'i spent',
        'i stole',
        'i studied',
        'i sue',
        'i surprised',
        'i survived',
        'i swipe',
        'i switched',
        'i taught',
        'i technically',
        'i tested',
        'i tested',
        'i threw',
        'i told',
        'i took',
        'i traded',
        'i trained',
        'i trained',
        'i transform',
        'i travel',
        'i trick',
        'i tried to',
        'i tried',
        'i tried',
        'i turned',
        'i turned',
        'i uncovered',
        'i used to',
        'i used',
        'i used',
        'i visited',
        'i want to',
        'i warned',
        'i warned',
        'i was a',
        'i was forced',
        'i was forced',
        'i was mention',
        'i was on',
        'i went',
        'i went',
        'i woke up',
        'i won',
        'i wore',
        'i wore',
        'i worked for',
        'i wrote',
        'i\'m in this',
        'im releas',
        'immortal rise',
        'impossible',
        'in trouble',
        'inappropriate',
        'influencer marketing is',
        'influencer',
        'insane',
        'inside the mind',
        'inspired by',
        'insufferable',
        'insulting',
        'internet hate',
        'internet is furious',
        'internet new epidemic',
        'into a panic',
        'into madness',
        'is advancing',
        'is all over',
        'is bleak',
        'is brutal',
        'is crazy',
        'is dead',
        'is desperate',
        'is diabolic',
        'is disgust',
        'is doomed',
        'is dying',
        'is easy',
        'is free',
        'is going to be true',
        'is going',
        'is hard',
        'is on life support',
        'is out of control',
        'is over',
        'is pathetic',
        'is real',
        'is scary',
        'is spineless',
        'is stuck',
        'is taking over',
        'is terrible',
        'is the worst',
        'is this the end',
        'is toxic',
        'is weird',
        'is... easy',
        'isnt a theory anymore',
        'isnâ€™t a theory anymore',
        'isâ€¦ easy',
        'it die',
        'it\'s finally over',
        'it\'s time to',
        'its happening',
        'its trash',
        'itâ€™s happening',
        'jack doherty',
        'job security is',
        'just change',
        'just dropped',
        'just lost',
        'keep you broke',
        'keeps getting',
        'kicking kids out',
        'kids out too',
        'killed',
        'l nerd',
        'last chance',
        'laughs at',
        'leaked',
        'left me',
        'legendary',
        'life changing',
        'linus sebastian',
        'linus tech tips',
        'linus',
        'linustechtips',
        'linux vs windows',
        'linuxâ€™s big moment',
        'live stream',
        'lost her',
        'lost his',
        'ludwig',
        'made for me',
        'made me',
        'make your videos',
        'making luxury',
        'making',
        'marvel',
        'massive leak',
        'meme',
        'might be real',
        'mind blowing',
        'minecraft',
        'mizkif',
        'more powerful',
        'most anticipated',
        'most hated',
        'most irresponsible',
        'most mysterious',
        'most toxic',
        'mr beast',
        'mr best',
        'mr. beast',
        'mr. best',
        'mr.beast',
        'mrbeast',
        'musk',
        'must watch',
        'my cat is',
        'my current',
        'my dumb',
        'my event',
        'my experience',
        'my first',
        'my friend',
        'my game',
        'my girlfriend',
        'my greatest',
        'my league',
        'my life is over',
        'my losses',
        'my mental',
        'my money',
        'my paycheck',
        'my problem',
        'my relationship',
        'my response',
        'my tough',
        'my tweet',
        'my valuable',
        'my value',
        'my video',
        'my youtube',
        'mystery solved',
        'name',
        'natureâ€™s mistake',
        'never ending chaos',
        'new epidemic',
        'new scam',
        'next level',
        'nightmare',
        'nina lin',
        'no backbone',
        'no longer a theory',
        'no longer alive',
        'no rules',
        'nobody ask',
        'nobody talks about',
        'nortorious',
        'not a theory anymore',
        'not going well',
        'not in jail',
        'notorious',
        'now!',
        'nyjah huston',
        'of our',
        'of your life',
        'official trailer',
        'only eating',
        'openai secret',
        'organizing my life',
        'oscura verdad',
        'our big',
        'our dream',
        'our fault',
        'our friend',
        'our relationship',
        'overconsumption is',
        'own fault',
        'owned',
        'pastry that',
        'pay for stranger',
        'pay later gets',
        'perfectly balanced',
        'poison',
        'pokimane',
        'portrait video nanny canon',
        'prank',
        'pregnancy horror stories',
        'prettier you wake',
        'prison affairs why',
        'prison affairs',
        'protecting their kids',
        'proved everyone',
        'psychotic',
        'qtcinderella',
        'quitting youtube',
        'racist',
        'random system32',
        'rant',
        'rapid rise',
        'rate my',
        'rates',
        'rating',
        'react',
        'reacting',
        'reaction',
        'reacts',
        'reality',
        'really dark',
        'reasons i hate',
        'reasons why',
        'reddit stories',
        'reddit story',
        'reddit',
        'remove my',
        'replied',
        'reply',
        'respond',
        'responding to the allegation',
        'review the',
        'rhinoplasty regrets what',
        'rhinoplasty regrets',
        'richer than',
        'riding with',
        'right now!',
        'risking your eyes',
        'robert pg',
        'roblox',
        'ronaldo',
        'ruin your',
        'ruined by',
        'ruined her',
        'ruined his',
        'ruining her',
        'ruining his',
        'ruining our lives',
        'ruining your',
        'rules for life',
        'running out of seeds',
        'satisfying',
        'saved lives',
        'saves life',
        'saves lives',
        'scammed their way',
        'scammers out-dumb themselves',
        'secret history of',
        'seedless fruit',
        'sent adults into',
        'shakeup',
        'shane dawson',
        'shannon sharpe',
        'she deserve',
        'she faked being',
        'she got',
        'she ruin',
        'she said',
        'she tried',
        'shocking inflation',
        'shocking',
        'shorts',
        'should not',
        'sick secret',
        'silent disaster',
        'skin bleaching and',
        'skynet moment',
        'so much money',
        'social media',
        'sora 1',
        'sora 2',
        'sponsor',
        'squid game',
        'stalking',
        'starbucks bear cups',
        'still panic',
        'stopped',
        'stream highlight',
        'streamer',
        'streetsmart',
        'subscribe',
        'sucks now',
        'switch from',
        'switched back',
        'switched to',
        'switching back',
        'switching from',
        'switching to',
        'sydney sweeney',
        'take down',
        'taken over',
        'talking',
        'tattoo regret the',
        'tattoo regret',
        'taylor swift',
        'teach you about',
        'tech is doomed',
        'terrify',
        'test my',
        'tested my',
        'testing my',
        'than you think',
        'thank you all',
        'thank you for everything',
        'thank you guys',
        'that got me',
        'that made me',
        'that you have',
        'that you never',
        'the absolute',
        'the ai uprising',
        'the alarming',
        'the best way',
        'the best',
        'the biggest',
        'the bubble will burst',
        'the coolest',
        'the creepiest',
        'the dark truth',
        'the death of',
        'the dumbest',
        'the end of',
        'the fake',
        'the fall of',
        'the fight for',
        'the first person',
        'the future',
        'the hidden',
        'the horrors',
        'the market is crashing',
        'the most dangerous',
        'the most',
        'the problem',
        'the reason',
        'the ridiculous',
        'the scariest',
        'the toxic',
        'the truth about',
        'the victim',
        'the worst',
        'they wanted',
        'this broke me',
        'this canâ€™t be real',
        'this changes everything',
        'this explains everything',
        'this has to be',
        'this is a problem',
        'this is for',
        'this is horrible',
        'this is how',
        'this is not a drill',
        'this is the best',
        'this is what happens',
        'this is why',
        'this video',
        'this viewer',
        'this wonâ€™t last long',
        'threat to nature',
        'tik tok',
        'tiktok banned',
        'tiktok exposed',
        'tiktok',
        'tim pool',
        'times worse',
        'too far',
        'top ',
        'top 10',
        'top 5',
        'torment',
        'trap house braiders',
        'tried ruin',
        'tried to ruin',
        'truly massive',
        'trust me',
        'trÃ¡iler oficial',
        'turn violent',
        'turned on',
        'turning a free',
        'turning free',
        'turning free',
        'turning salvaged',
        'twitch',
        'uglier you sleep',
        'ultimate',
        'unbelievable',
        'undeniable proof',
        'under the knife',
        'unpaid',
        'unusual',
        'viral',
        'wait for it',
        'waiting to happen',
        'want you to',
        'wants you to',
        'warning for everyone',
        'was a joke',
        'was a tragedy',
        'was absolute',
        'was scary',
        'watch me',
        'watch this before',
        'watch until the end',
        'we built',
        'we design',
        'we found',
        'we got this instead',
        'we hate',
        'we laugh',
        'we need to talk',
        'we need to',
        'we play',
        'we thought',
        'we took',
        'we tried',
        'we turn',
        'we watch',
        'we were wrong about',
        'wedding nightmares and',
        'weeks pregnant',
        'weird encounter',
        'weird things',
        'weirdest',
        'went all in',
        'what actually happen',
        'what happens if',
        'what if',
        'what life look',
        'what no one tells you',
        'what really happened',
        'what they donâ€™t teach you',
        'why i',
        'why seedless',
        'why this',
        'why we are',
        'why we feel',
        'why we quit',
        'why we',
        'why women date',
        'wild dating horror',
        'will be hated',
        'will end',
        'wish every parent',
        'with no exploits',
        'without a',
        'women date prisoners',
        'women go under',
        'won\'t save us',
        'won\'t save you',
        'working hard and',
        'worse now',
        'worse than i',
        'worse than we',
        'worst crime',
        'worst idea',
        'worst video',
        'worst',
        'yall are going',
        'yall are gonna',
        'years in',
        'yes really',
        'you are not safe',
        'you have to see',
        'you laugh',
        'you must know',
        'you need for',
        'you need to',
        'you should',
        'you wake up',
        'you won\'t believe',
        'you wonâ€™t believe',
        'you wonâ€™t survive this',
        'your brain',
        'your money',
        'your stream',
        'youtube drama',
        'youtube earn',
        'youtube suck',
        'youtube took down',
        'youtuber',
        'youâ€™ll go broke',
        'Â£',
        'â€¦',

        // Additions to filter mainstream ragebait / geopolitical drama
        'china',
        'dubai',
        'russia',
        'gaza',
        'trump',
        'putin',
        'north korea',
        'iran',
        'netanyahu',
        'ukraine',
        'syria',
        'venezuela',
        'india',
        'turkey',
        'israel',
        'palestine',
        'brazil',
        'myanmar',
        'africa',
    ];


    const blockedChannels = [
        "it's blanko",
        "it'sagundam",
        "kat 'n chat",
        "kent's tech world",
        "sam o'nella academy",
        "terror tedâ€™s tales",
        "we're in hell",
        "zach's tech turf",
        '5-minute crafts',
        'a life after layoff',
        'aaronclarey',
        'according to nicole',
        'acheeto',
        'action retro',
        'actual jake',
        'adam conover',
        'adam savage\â€™s tested ',
        'adam something',
        'ahoy',
        'airrack',
        'alan becker',
        'alinity',
        'all time',
        'alphasniper97',
        'alphastein',
        'answer in progress',
        'apple',
        'arcas: the man of style',
        'asmongold',
        'augusttheduck',
        'austin evans',
        'barely sociable',
        'beam in serie',
        'beast',
        'belle delphine',
        'belyves',
        'ben azelart',
        'ben eater',
        'ben shapiro',
        'benijugoso',
        'berleezy',
        'best fails',
        'better bachelor',
        'big a',
        'bigclivedotcom',
        'blake the snake',
        'boffy',
        'boy boy',
        'brent rivera',
        'brentech',
        'brick technology',
        'bright side',
        'britec09',
        'brodie robertson',
        'buzzfeedvideo',
        'camilla araujo',
        'captain disillusion',
        'carrerita',
        'caseoh',
        'casey neistat',
        'cashblox',
        'casually explained',
        'caylusblox',
        'celebrity drama',
        'cerostv',
        'cgp grey',
        'chasing chano',
        'chris heria',
        'chris stuckmann',
        'chris titus tech',
        'christophe',
        'christopher flannigan',
        'chubbyemu',
        'chud logic',
        'cinemassacre',
        'circletoonshd',
        'ciÃªncia todo dia',
        'cleo abram',
        'clownfish tv',
        'clutch gaming highlights',
        'cnet',
        'cocomelon',
        'code bullet',
        'codyslab',
        'coffeezilla',
        'coldfusion',
        'cole hastings',
        'collins key',
        'computerphile',
        'connor is lost',
        'corridor crew',
        'coryxkenshin',
        'crashcourse',
        'crazy pranks 24/7',
        'critical role',
        'cybercpu tech',
        'dafuq!?boom!',
        'daily dose of internet',
        'daily dose',
        'daily fails',
        'dakotatalks',
        'dani',
        'dankpods',
        'danny duncan',
        'danny gonzalez',
        'dareen younes',
        'dave2d',
        'david bombal',
        'david dobrik',
        'dead air vhs',
        'decoding the unknown',
        'defunctland',
        'dhar mann',
        'dhruv rathee',
        'diamondbolt',
        'distrotube',
        'dobre brothers',
        'doing it with briggs',
        'dom brack',
        'dominican geek 360',
        'donald j trump',
        'donpanchis',
        'dougdoug',
        'dougdougdoug',
        'drama alert',
        'dream',
        'drew gooden',
        'drossrotzank',
        'drunken intelligence',
        'dude perfect',
        'dumpy',
        'dw documentary',
        'eckhartsladder',
        'el robot de platÃ³n',
        'electroboom',
        'emergency awesome',
        'emiru',
        'emkay',
        'emma thorne',
        'emplemon',
        'engween',
        'epic gamer moments',
        'eric murphy',
        'eroxblox',
        'eta prime',
        'explainingcomputers',
        'extreme pranksters',
        'exurb1a',
        'fabiano',
        'facebook',
        'failarmy',
        'faister gaming',
        'faze clan',
        'faze rug',
        'faze',
        'fern',
        'fgteev',
        'fifa',
        'fireship',
        'folding ideas',
        'foltyn',
        'fortnite battle clips',
        'fredrik knudsen',
        'gadget unboxings',
        'gameranx',
        'gamers nexus',
        'gamestar',
        'gaming nexus',
        'garbage time',
        'gardiner bryant',
        'garrett crespo',
        'geeks + gamers',
        'gigguk',
        'gnca - gamersnexus consumer advocacy',
        'google',
        'greatscott!',
        'grizzy',
        'guava juice',
        'h3h3 productions',
        'half as interesting',
        'hamedloco spielt',
        'hasan',
        'hay day',
        'hbomberguy',
        'holy baam',
        'hoots hootman',
        'huebi',
        'i did a thing',
        'ibaitv',
        'imallexx',
        'incognito mode',
        'infinite',
        'influencers in the wild',
        'inquisitormaster',
        'insider',
        'internet gossip',
        'internet historian',
        'is gogeth',
        'itsfunneh',
        'itsjanke',
        'j aubrey',
        'jack clips',
        'jack doherty',
        'jacksepticeye',
        'jacob geller',
        'jake paul',
        'james julier art tutorials',
        'janky rondo',
        'jason mcbason',
        'jay foreman',
        'jaystation',
        'jayztwocents',
        'jcs - criminal psychology',
        'jeff geerling',
        'jehxtp',
        'jelly',
        'jev',
        'jim browning',
        'jimmy donaldson',
        'jimmy robins',
        'jimmythegiant',
        'joe bart games',
        'joe bartolozzi',
        'joe fazer',
        'joe scott',
        'john hammond',
        'johnny harris',
        'jontronshow',
        'jordan b peterson',
        'jordan matter',
        'josh johnson',
        'joxy',
        'jozhi7',
        'judelow',
        'kajudyt',
        'kamswy',
        'karl jobst',
        'katliente',
        'keepittechie',
        'killianthecrafter',
        'kitboga',
        'ksi',
        'kurtis conner',
        'kurzgesagt â€“ in a nutshell',
        'kyle hill',
        'lankybox',
        'lastweektonight',
        'latte asmr',
        'lawful masses with leonard french',
        'lazarbeam',
        'leah ashe',
        'learn linux tv',
        'legaleagle',
        'lemmino',
        'lexi rivera',
        'lgr',
        'life hack master',
        'linus tech tips',
        'liquid marshall',
        'liron segev',
        'lisbug',
        'liuss',
        'live',
        'llm',
        'lmg clips',
        'logan paul',
        'lol esports vods espaÃ±ol casteos ibai',
        'lol esports',
        'louaista',
        'louis rossmann',
        'low level',
        'lta espaÃ±ol',
        'lucrew',
        'ludwig',
        'ludwin',
        'luka levi',
        'luke smith',
        'lyna',
        'macrumors',
        'mandjtv extra',
        'mando',
        'mark rober',
        'markiplier',
        'marques brownlee',
        'max fosh',
        'meatcanyon',
        'memes daily',
        'mental outlaw',
        'metaphysical',
        'michael horn',
        'michael mjd',
        'michael reeves',
        'microsoft',
        'milliethepig',
        'millietwopig',
        'minecraft best moments',
        'minutephysics',
        'mizkif',
        'modern vintage gamer',
        'moist69giraffe',
        'moon',
        'more perfect union',
        'morecaseoh',
        'morgz',
        'mouzakrobat',
        'mr. geil',
        'mrbeast',
        'mrwhosetheboss',
        'mujin',
        'mumbo jumbo',
        'mysterious remote',
        'nakeyjakey',
        'naomi brockwell tv',
        'neko and tora',
        'netflix',
        'networkchuck',
        'nexpo',
        'nick digiovanni',
        'nick jackson',
        'nilered',
        'nina lin',
        'no text to speech',
        'nocturn',
        'noel miller',
        'not just bikes',
        'noway4u',
        'numberphile',
        'ompaville',
        'ontan',
        'optimum',
        'orangepeanut',
        'overeasy',
        'oversimplified',
        'paluten',
        'papaplatte gaming',
        'papaplatte uncut',
        'patrick cc',
        'pbs eons',
        'pbs space time',
        'pc security channel',
        'pelicomic',
        'penguinz0',
        'pewdiepie highlights',
        'pewdiepie',
        'pexto',
        'philosophy tube',
        'pierson',
        'pietsmiet',
        'pka clips',
        'podcast',
        'pokimane',
        'poly matter',
        'polymatter',
        'powerfuljre',
        'practical engineering',
        'prank wars',
        'preston',
        'project farm',
        'pubg highlights daily',
        'pursuit of wonder',
        'qtcinderella',
        'quick tech tips',
        'rajo end',
        'reaction memes',
        'reaction time',
        'real engineering',
        'reallifelore',
        'reddit',
        'ricegum',
        'rob braxman tech',
        'roblox',
        'rocky rakoon',
        'rtgame',
        'ryan pictures',
        'ryan trahan',
        'sabine hossenfelder',
        'sagan hawkes',
        'samtime',
        'savvynik',
        'scambaiters vs. scammers',
        'scammer payback',
        'scary videos 24/7',
        'scishow',
        'scott shafer',
        'scott the woz',
        'screen culture',
        'sebastian lague',
        'second thought',
        'seeytonic',
        'seynotic (alias)',
        'seynotic',
        'seyonic',
        'seyonictypo',
        'seythonic',
        'seytonic',
        'seyttonic',
        'seyytonic',
        'shane dawson',
        'shortcircuit',
        'side scrollers',
        'silvio gamer',
        'simfinity',
        'skipperynmi',
        'smartereveryday',
        'smii7yplus',
        'smosh pit',
        'sniperwolf',
        'somber',
        'someordinarygamers',
        'spatnz',
        'spill',
        'spreen plus',
        'sseth tzeentach',
        'ssethtzeentach',
        'sssniperwolf',
        'ssundee',
        'stan browney',
        'stand-up maths',
        'steve mould',
        'stevencrowder',
        'stokes twins',
        'stuff made here',
        'styropyro',
        'summoning salt',
        'sunnyv2',
        'sunraybee',
        'super eyepatch wolf',
        'surfshark academy',
        'surveillance report',
        'switched to linux',
        'sydney sweeney',
        'sypherpk',
        'sysHack',
        't3rr0r',
        'taylor lorenz',
        'taylor swift',
        'taylorswift',
        'tcnick',
        'team futurism',
        'tech hacks daily',
        'techaltar',
        'techhut',
        'techlinked',
        'techlore',
        'techmoan',
        'technical sagar',
        'technology connections',
        'techquickie',
        'ted-ed',
        'tested',
        'the b1m',
        'the backlogs',
        'the critical drinker',
        'the hated one',
        'the infographics show',
        'the linux experiment',
        'the odd1sout',
        'the sitdown',
        'the slow mo guys',
        'the thought emporium',
        'the try guys',
        'thebackyardscientist',
        'theburntpeanut',
        'theekwah',
        'theodd1sout',
        'theprimetime',
        'thequartering',
        'thiojoe',
        'tierzoo',
        'tik tok compilation',
        'tiktok central',
        'tim pool',
        'timcast irl',
        'timcast',
        'tom scott',
        'tomdark',
        'top 10 countdowns',
        'total os today',
        'trap lore ross',
        'trash',
        'trend hacks',
        'trending gossip',
        'trending shorts',
        'trendy top 10s',
        'tri-line',
        'triáº¿t tÃ¢m',
        'troom troom',
        'try',
        'trymacs',
        'tulas 47',
        'turbo xtra',
        'turboblox',
        'turkey tom',
        'tuv',
        'twitter',
        'two minute papers',
        'tyler oliveira',
        'ufd tech',
        'ukriblox',
        'unspeakable',
        'upper echelon',
        'valkyrae',
        'valorant',
        'vanessa wingÃ¥rdh',
        'vaush',
        'vegas matt',
        'veritas',
        'veritasium',
        'vex',
        'videogamedunkey',
        'videogamersvault',
        'villainee',
        'viral hacks',
        'viral reaction',
        'viral trending',
        'visual venture',
        'voidzilla',
        'vox',
        'vsauce',
        'wavywebsurf',
        'wendover productions',
        'werlyb',
        'whirow',
        'wifies',
        'will tennyson',
        'william kitten',
        'windows',
        'wolfgang\'s channel',
        'woofer',
        'xqc',
        'yms highlights',
        'zach king',
        'zack telander',
        'zcrexpy',
        'zhc',
        'Ð±ÑƒÐ»Ð´Ð¶Ð°Ñ‚ÑŒ',
        'Ð²Ð»Ð°Ð´ÑƒÑ',

        // ðŸŸ Fake Animal Rescue / Nature Slop
        'animal angels',
        'animal planet clips',
        'animal rescue tv',
        'animal universe',
        'animal white',
        'animals love 365',
        'capybara friends',
        'cute animals compilation',
        'cute pet vids',
        'fresh sea cooling',
        'life before',
        'moya - animal rescues',
        'ocean life 360',
        'ocean update',
        'pet rescue 24/7',
        'sea grace',
        'wildlife clips daily',
        'wildlife diary',
        'wildlife warriors',
        'wildlife wonders tv',
        'world of animals',

        // ðŸŒŒ Fake Space / Science Facts
        'astroexplorers',
        'cosmic wonders tv',
        'cosmos discovery',
        'galactic discoveries',
        'galactic facts hub',
        'infinity wonders',
        'science daily facts',
        'science fact central',
        'space fact zone',
        'space infinity',
        'space mysteries uncovered',
        'universe explorer',

        // ðŸ¤– AI History / Documentary Spam
        'ancient uncovered',
        'dark universe',
        'historic discovery',
        'mystery recap',
        'world history archive',

        // ðŸ•¹ï¸ Fake Gaming & Meme Slop
        'ai plays',
        'fortnite clips daily',
        'gaming recap',
        'minecraft facts',

        // ðŸ¤– AI-Generated / AI Slop Channels
        'ai deepfake zone',
        'ai explained daily',
        'ai fact hub',
        'ai for humans',
        'ai news daily',
        'ai video creator',
        'auto creator ai',
        'autovoice ai',
        'block legends 90s',
        'courtroom consequences',
        'deep fake news',
        'deepfake channel',
        'deepfake clips',
        'digital drift ai',
        'discover ai',
        'foot tech today',
        'hard fork',
        'made vision',
        'roboreview',
        'synthesized reality',
        'thatai coach',
        'the ai grid',
        'the ai-telier',
        'twisted truth',
        'virtual historian ai',
        'wes roth',

        // ðŸ¤– Popular AI-Focused / AI Commentary Channels
        '1littlecoder',
        '3blue1brown',
        'ai explained',
        'andrej karpathy',
        'bycloud',
        'clever programmer',
        'code_your_own_ai',
        'dave shapiro',
        'deeplearningai',
        'dr alan thompson',
        'dylan_curious',
        'jordan harrod',
        'julia mccoy',
        'ken jee',
        'krish naik',
        'langchain',
        'lex fridman',
        'matt wolfe',
        'matthew berman',
        'mattvidproai',
        'openai',
        'rob miles',
        'sentdex',
        'statquest with josh starmer',
        'yannic kilcher',

        // ðŸ§© Common Slop / Farm Keywords

        '/\bai\b/i', // AI wildcard filter
        'analysis',
        'archive',
        'breakdown',
        'central',
        'channel',
        'clips',
        'compilation',
        'compilations',
        'courtroom',
        'daily',
        'discover',
        'docu',
        'documentary',
        'explained',
        'explorer',
        'facts daily',
        'facts',
        'footage',
        'games',
        'gaming',
        'generated',
        'highlights',
        'hub',
        'insider',
        'media',
        'moments',
        'mysteries',
        'network',
        'news daily',
        'official',
        'plays',
        'playz',
        'reaction',
        'reactions',
        'reacts',
        'recap',
        'reddit stories',
        'reddit',
        'science facts',
        'secrets',
        'shorts',
        'stock',
        'stories',
        'story',
        'studio',
        'tech news',
        'trending',
        'tv',
        'uncovered',
        'unknown',
        'unseen',
        'updates',
        'viral',
        'voice',
        'world',
        'zone',
    ];

    // Robust emoji detection
    const emojiRegex = /\p{Extended_Pictographic}/gu;

    function shouldFilterTitle(title) {
        const words = title.split(/[^\p{L}]+/gu); // split on letters
        const lower = title.toLowerCase();

        // ðŸ”´ FUTURE YEAR CLICKBAIT FILTER
        if (futureYearRegex.test(title)) {
            return true;
        }

        // Check allowed ALL-CAPS patterns
        const hasAllowedAllCapsWord = words.some(word =>
                                                 allowedAllCapsPatterns.some(pattern => pattern.test(word))
                                                );
        if (hasAllowedAllCapsWord) return false;

        // Filter ALL-CAPS words outside whitelist
        if (words.filter(isAllCapsWord).length > 0) return true;

        // Blocked keywords
        if (blockedKeywords.some(keyword => lower.includes(keyword))) return true;

        // Emoji check
        if (emojiRegex.test(title)) return true;

        // Filter $ signs
        if (title.includes('$')) return true;

        return false;
    }

    function normalizeName(name) {
        return name
            .trim()                 // remove leading/trailing spaces
            .replace(/\s+/g, ' ')   // normalize multiple spaces
            .toLowerCase();         // lowercase for comparison
    }

    function shouldFilterChannel(channel) {
        const normChannel = normalizeName(channel);
        return blockedChannels.some(name => normChannel.includes(normalizeName(name)));
    }

    function isWhitelistedChannel(channel) {
        const normChannel = normalizeName(channel);
        return whitelistedChannels.some(name =>
                                        normChannel.includes(normalizeName(name))
                                       );
    }

    function normalize(str) {
        return str.replace(/â€™/g, "'").toLowerCase();
    }

    function filterResults() {
        const boxes = document.querySelectorAll('.h-box');
        if (!boxes.length) return false;

        let filteredCount = 0;

        boxes.forEach(box => {
            const titleEl = box.querySelector('.video-card-row > a > p');
            const channelEl = box.querySelector('.channel-name');

            const title = titleEl?.textContent.trim() || '';
            const channel = channelEl?.textContent.trim() || '';

            const isWhitelisted = isWhitelistedChannel(channel);

            // Always allow channel blocking to win
            if (shouldFilterChannel(channel) && !isWhitelisted) {
                console.log('[Filtered: channel]', channel);
                box.closest('.pure-u-1')?.remove();
                filteredCount++;
                return;
            }

            // If channel is whitelisted, skip ALL title-based filtering
            if (!isWhitelisted && shouldFilterTitle(title)) {
                console.log('[Filtered: title]', title);
                box.closest('.pure-u-1')?.remove();
                filteredCount++;
            }

        });

        return filteredCount > 0;
    }

    // === TARGETED ANTI-FLICKER OVERLAY ===
    function addAntiFlickerOverlay() {
        const columns = document.querySelectorAll('div.pure-u-md-1-4.pure-u-1');
        columns.forEach(col => {
            const overlay = document.createElement('div');
            overlay.className = 'antiFlickerOverlay';
            overlay.style.cssText = `
                position: absolute;
                inset: 0;
                background: #0f0f0f;
                z-index: 9999;
                pointer-events: none;
                opacity: 1;
                transition: opacity 0.25s ease-out;
            `;

            // Ensure column is relative for absolute overlay
            if (getComputedStyle(col).position === 'static') col.style.position = 'relative';

            // Insert overlay as first child
            col.insertBefore(overlay, col.firstChild);
        });
    }

    function removeAntiFlickerOverlay() {
        document.querySelectorAll('.antiFlickerOverlay').forEach(el => {
            requestAnimationFrame(() => el.style.opacity = '0');
            el.addEventListener('transitionend', () => el.remove());
        });
    }

    // Add overlays immediately
    const initOverlay = () => {
        const cols = document.querySelectorAll('div.pure-u-md-1-4.pure-u-1');
        if (!cols.length) {
            requestAnimationFrame(initOverlay); // wait until columns exist
            return;
        }
        addAntiFlickerOverlay();
    };
    initOverlay();

    // Run filtering
    let tries = 0;
    const maxTries = 20;
    const interval = setInterval(() => {
        tries++;
        const hasFiltered = filterResults();

        if (tries >= maxTries || !hasFiltered) {
            clearInterval(interval);
            removeAntiFlickerOverlay();
            console.log('[Invidious Filter] Finished filtering.');
        }
    }, 250);

})();