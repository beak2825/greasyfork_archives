// ==UserScript==
// @name         Invidious: Remove ALL CAPS + $ + MrBeast + Keyword + Channel Filter (with exclusions) + Redirect
// @namespace    local
// @version      4.7
// @license      MIT
// @description  Hides search results with ALL CAPS, $ signs, blocked keywords and emojis, or blacklisted channels. Redirects feeds, and allows safe acronyms like NVIDIA or NASA.
// @match        https://yewtu.be/*
// @match        https://inv.nadeko.net/*
// @match        https://invidious.nerdvpn.de/*
// @match        https://inv.perditum.com/*
// @match        https://invidious.f5.si/*
// @match        https://*/watch*
// @match        https://*/feed/popular*
// @match        https://*/feed/trending*
// @grant        none
// @run-at       document-start
// @downloadURL https://update.greasyfork.org/scripts/548558/Invidious%3A%20Remove%20ALL%20CAPS%20%2B%20%24%20%2B%20MrBeast%20%2B%20Keyword%20%2B%20Channel%20Filter%20%28with%20exclusions%29%20%2B%20Redirect.user.js
// @updateURL https://update.greasyfork.org/scripts/548558/Invidious%3A%20Remove%20ALL%20CAPS%20%2B%20%24%20%2B%20MrBeast%20%2B%20Keyword%20%2B%20Channel%20Filter%20%28with%20exclusions%29%20%2B%20Redirect.meta.js
// ==/UserScript==

(function () {
    'use strict';

    // Redirect feed pages to search
    /*
        */
    const path = window.location.pathname;
    if (path === '/feed/popular' || path === '/feed/trending') {
        const base = window.location.origin;
        window.location.replace(`${base}/search`);
        return;
    }
    /*
        */

    // Allowed words (whitelisted acronyms, companies, etc.) that cancels out blockedKeywords and all CAPS filter; emoji filtering still applies.
    const allowedAllCapsPatterns = [
        /^opening(s)?$/i,
        /^ending(s)?$/i,
        /^ost$/i,
        /^amv$/i,
        /^viz$/i,
        /^fanmade$/i,
        /^sleep$/i,
    ];

    const whitelistedChannels = [
        'mariah carey',
        // add your trusted channels here
    ];

    function isAllCapsWord(word) {
        const clean = word.replace(/[^\p{L}]/gu, ''); // keep letters only
        if (allowedAllCapsPatterns.some(pattern => pattern.test(clean))) return false;
        return clean.length > 2 && clean === clean.toUpperCase();
    }

    // === EARLY HIDE (only UI clutter, not videos!) ===
    function injectEarlyHideCSS() {
        const style = document.createElement('style');
        style.textContent = `
            a[href*="/shorts"],
            .user-field,
            .flex-right > .video-data,
            .pure-u-lg-1-5.pure-u-1:nth-of-type(3),
            .feed-menu,
            footer,
            a[href*="/login?"] {
                display: none !important;
            }
        `;
        document.documentElement.appendChild(style);
    }
    injectEarlyHideCSS();

    const futureYearRegex = /(201[5-9]|202\d|203\d|21\d{2})/; // Year clickbait crap. Example, "First Stream of 2026" etc. Covers 2015-2199 (Pretty sure YouTube will be dead before 2100.)

    const blockedKeywords = [
        "%",
        '!',
        '#',
        '*',
        '.',
        '..',
        ':',
        '?',
        'â€¦',
        'Â£',
        '1,000,000 women go',
        'aaron clarey',
        'aaronclarey',
        'about to burst',
        'a broke man',
        'absolutely hilarious',
        'accepting my',
        'actually real',
        'actually works',
        'a dark secret',
        'adin',
        ' ai',
        'a.i',
        'ai ',
        'ai: ',
        'alarming trend',
        'algorithm suck',
        'a lie',
        'aliexpress products are',
        'alinity',
        'allegation',
        'almost lost it',
        'a loser',
        'alternate universe',
        'a menace',
        'a mistake',
        'amouranth',
        'ancient aliens',
        'anti-delulu post',
        'are a scam',
        'are crazy',
        'are fighting',
        'are out of control',
        'are ruining',
        'are scary',
        'are taking over',
        'around the world in',
        'arrest',
        'artificial intelligence',
        'asmondgold',
        'as you think',
        'awful',
        'awkward',
        'backstabbed',
        'bad news for fruit',
        'bank collapse',
        'beautiful free',
        'before itâ€™s too late',
        'behind',
        'be like',
        'belle delphine',
        'big announcement',
        'big ed',
        'biggest mistake',
        'bizarre',
        'blocked me',
        'blows my mind',
        'brainrot',
        'breaks the internet',
        'bringing ideas',
        'bullied a',
        'bullies a',
        'but eating',
        'buying my',
        'buy me',
        'buy now pay',
        'buy now pay later',
        'by creep',
        'called me',
        'called me out',
        'called out',
        'came to visit',
        'cancel culture',
        'canceled',
        'cancelled',
        "can't escape",
        "canâ€™t escape",
        "can't make money",
        'cant make money',
        'case of',
        'caught on camera',
        'challenge',
        'charlie kirk',
        'chat',
        'chatgpt',
        'chatgpt destroys',
        'cheating',
        'check out',
        'claps back',
        'commentary',
        'company loyalty in',
        'consent',
        'content creat',
        'controversial',
        'cooked',
        'cost of kicking',
        "couldn't hide it",
        'could ruin everything',
        'craziest',
        'cringe',
        'cult',
        'cure your delulu',
        'cursed video',
        'daily dose',
        'dangerously exciting',
        'dangerous trend',
        'dangerous world',
        'dangers of dating',
        'darkest',
        'dark secret',
        'dark side of',
        'dark side of betterhelp',
        'dark world',
        'dating a broke',
        'dating horror stories',
        'defend',
        'degenerate',
        'deletes a random',
        'deserved end',
        'deserves',
        'destroy',
        'destroyed by',
        'destroyed generation',
        'destroyed my',
        'dhar mann',
        'diddy',
        'did not go as planned',
        'did not go to plan',
        "didn't go as planned",
        "didn't go to plan",
        'did something about it',
        'did you know',
        'dilemma',
        'dirty',
        'disaster',
        'discover',
        'disney',
        'disturbing',
        'disturbing reason',
        'dj cook',
        'dj toenail',
        'do destruction',
        "doesn't make sense",
        'donald trump',
        'do not mock',
        'donâ€™t miss this',
        "don't tell you",
        "don't watch this",
        'donâ€™t watch this',
        'do this now',
        'downfall of',
        'drama',
        "dream desk",
        'dressing up',
        'dropping',
        'drowning themselves',
        'dumb post',
        'elon',
        'elon musk warns',
        'embarass',
        'embarrass',
        'emiru',
        'ended an influencer',
        'ended horribly',
        'entire generation',
        'epic',
        'epstein',
        'euros',
        'even worse',
        "every day for",
        'everyone hates',
        'everyone is talking about',
        'everyone lied',
        'everyone wants this',
        'every parent knew',
        'everything is about',
        'everything is falling apart',
        'everything that',
        'explained',
        'exploiting',
        'expose',
        'exposed',
        'exposed online',
        'exposing',
        'face off',
        'fail',
        'faked being',
        'falling apart',
        'faze clan',
        'fazeclan',
        'feel the same anymore',
        'femininity coaches are',
        'files',
        'finally did it',
        'finally happened',
        'final warning',
        'final year',
        'financial regrets people',
        'finished',
        'fixing a',
        'fixing her',
        'fixing his',
        'fooled people',
        'forbidden knowledge',
        'forcing',
        'for strangers',
        'for this',
        'fortnite',
        'freakiest',
        'from a bedroom',
        'fruit crisis',
        'fruit industry secret',
        'fruit is a disaster',
        'funniest',
        'funny',
        'gambled my',
        'gambling experience',
        'gambling my',
        'game changer',
        'gamers nexus',
        'gamersnexus',
        'gaming on a',
        'gets destroyed',
        'gets scammed',
        'get the best of me',
        'getting crazy',
        'getting fillers in',
        'getting worse',
        'giveaway',
        'giving strangers',
        'goes wrong',
        'going broke while',
        'gone horribly wrong',
        'gone too far',
        'gone wrong',
        'gonna change',
        'got arrested',
        'got away with',
        'got caught',
        'got confirm',
        'got even worse',
        'got the best of me',
        'got worse',
        'greatest trick',
        'h3',
        'had to see this',
        'happy endings at',
        'hasan',
        'has arrived',
        'has died',
        'has lost it',
        'have to be ugly',
        'he deserve',
        'he got',
        'he lost it',
        'here is why',
        "here's why",
        'her life',
        'her new',
        'her reaction was priceless',
        'he ruin',
        'he said',
        "he's facing",
        "heâ€™s facing",
        'he speed',
        'he tried',
        'hidden cost of',
        'hidden danger',
        'high end',
        'high maintenance isnâ€™t',
        'hilarious',
        'his life',
        'his new',
        'hit a wall',
        'honest review',
        'horrible',
        'horrifying',
        'horror stories',
        'hot topic',
        'how a',
        'how crime works',
        'how i',
        'how one',
        'how this person',
        'how to',
        'huge change',
        'hyperinflation warning',
        'i 3d printed',
        'i abandoned',
        'i abused',
        'i accidentally',
        'i achieved',
        'i acquired',
        'i adopted',
        'i almost',
        'i almost died',
        'i am already',
        'i amazed',
        'i am dead',
        'i am running',
        'i analyze',
        'i analyzed',
        'i angered',
        'i answered',
        'i asked',
        'i ate',
        'i attempt',
        'i attempted to',
        'i audited',
        'i awakened',
        'i babysat',
        'i banned',
        'i bargained',
        'i beat',
        'i became',
        'i blackmailed',
        'i blamed',
        'i bought',
        'i box',
        'i broke',
        'i brought',
        'i built',
        'i burned',
        'i butchered',
        'i calculated',
        'i cancelled',
        "i canâ€™t",
        'i can\'t believe',
        'i canâ€™t believe',
        "i can't live",
        'i canâ€™t live',
        'i captured',
        'i cast',
        'i caught',
        'i challenged',
        'i changed',
        'i cheated',
        'i cleaned',
        'i cloned',
        'i collapsed',
        'i competed',
        'i confessed',
        'i confront',
        'i conquered',
        'i control',
        'i convinced',
        'i copied',
        'i corrupted',
        "i couldn't lose",
        "i couldnâ€™t lose",
        'i crashed',
        'i create',
        'i created',
        'i cried',
        'i crossed',
        'i cut',
        'i deliver',
        'i destroyed',
        'i did',
        'i disappeared',
        'i discovered',
        'i disguised',
        'i disqualified',
        'i dj',
        "iâ€™d never",
        "id never",
        'i dominated',
        'i donate',
        'i donated',
        "i don't",
        'i double',
        'i download',
        "iâ€™d quit",
        "id quit",
        'i drained',
        "iâ€™d spend",
        "id spend",
        "iâ€™d try",
        "id try",
        'i earned',
        'i eliminated',
        'i endured',
        'i engineered',
        'i enraged',
        'i enter',
        'i escaped',
        'i experienced',
        'i experimented',
        'i exploited',
        'i explored',
        'i exposed',
        'i exposed myself',
        'i failed',
        'i failed to',
        'i fake',
        'i fasted',
        'i fell for a',
        'i fell into',
        'i fixed',
        'i flew',
        'i fooled',
        'i forced',
        'i forgave',
        'i found',
        'i froze',
        'i gambled',
        'i gaslit',
        'i gave',
        'i got',
        'i got banned',
        'i got fired',
        'i got hacked',
        'i got scammed',
        'i got trapped',
        'i grew',
        'i guessed',
        'i hacked',
        'i had',
        'i hatch',
        'i hate',
        'i have hidden',
        'i have no',
        'i have to',
        'i help',
        'i hire',
        'i hired',
        'i hit',
        'i hung',
        'i hunted',
        'i ignored',
        'i imprisoned',
        'i infiltrated',
        'i inherited',
        'i interrupted',
        'i invaded',
        'i invested',
        'i investigated',
        'i isolated',
        'i joined',
        'i kidnapped',
        'i killed',
        'i launch',
        'i learned',
        'i learned the truth',
        'i left',
        'i (legally)',
        'i legally',
        'i let greed',
        'i lied',
        'i lived',
        "iâ€™ll build",
        "ill build",
        "iâ€™ll buy",
        "ill buy",
        "iâ€™ll change",
        "ill change",
        "iâ€™ll create",
        "ill create",
        "iâ€™ll do",
        "ill do",
        "iâ€™ll fix",
        "ill fix",
        "iâ€™ll make",
        "ill make",
        "iâ€™ll never",
        "ill never",
        "iâ€™ll pay",
        "ill pay",
        "iâ€™ll spend",
        "ill spend",
        "i'll tell you why",
        "iâ€™ll try",
        "ill try",
        "iâ€™ll win",
        "ill win",
        'i lose',
        'i lost',
        'i lost my',
        "i'm",
        "iâ€™m",
        'i made',
        'i manipulated',
        'i mastered',
        "i'm back",
        "im back",
        "i'm broke",
        "im broke",
        "i'm building",
        "im building",
        "i'm buying",
        "im buying",
        "i'm changing",
        "im changing",
        "i'm cleaning",
        "im cleaning",
        "i'm creating",
        "im creating",
        "i'm dead",
        "i'm done",
        "im done",
        "i'm dying",
        "im dying",
        'i messed up',
        'i met',
        "i'm giving away",
        "im giving away",
        "i'm going to",
        "im going to",
        "i'm helping",
        "im helping",
        "i'm hiring",
        "im hiring",
        'i\'m in this',
        "i'm leaving",
        "im leaving",
        "i'm losing",
        "im losing",
        "i'm making",
        "im making",
        'immortal rise',
        "i'm not",
        "im not",
        'i monitored',
        "i'm opening",
        "im opening",
        'i moved',
        "i'm poor",
        "im poor",
        'impossible',
        "i'm quitting",
        "im quitting",
        "i'm reacting",
        "im reacting",
        "i'm rebuilding",
        "im rebuilding",
        "i'm recreating",
        "im recreating",
        'im releas',
        "i'm repairing",
        "im repairing",
        "i'm restoring",
        "im restoring",
        "i'm selling",
        "im selling",
        "i'm spending",
        "im spending",
        "i'm starting",
        "im starting",
        "i'm testing",
        "im testing",
        "i'm tired",
        "im tired",
        "i'm tired of",
        "i'm transforming",
        "im transforming",
        "i'm trapped",
        "im trapped",
        "i'm trying",
        "im trying",
        "i'm turning",
        "im turning",
        "i'm using",
        "im using",
        "i'm winning",
        "im winning",
        "i'm working",
        "im working",
        'inappropriate',
        'i nearly died',
        'i never thought',
        'influencer',
        'influencer marketing is',
        "influencer's career",
        'insane',
        'inside the mind',
        'inspired by',
        'insufferable',
        'insulting',
        'internet hate',
        'internet is furious',
        'internet new epidemic',
        'into a panic',
        'into madness',
        'in trouble',
        'i only ate',
        'i opened',
        'i ordered',
        'i outsmarted',
        'i overdosed',
        'i overworked',
        'i paid',
        'i panicked',
        'i perform',
        'i picked',
        'i played',
        'i pranked',
        'i predicted',
        'i pretended',
        'i print',
        'i profited',
        'i proved',
        'i punished',
        'i put',
        'i questioned',
        'i quit',
        'i rage quit',
        'i reacted',
        'i realized',
        'i rebuilt',
        'i recorded',
        'i recreate',
        'i rejected',
        'i removed',
        'i repaired',
        'i replaced',
        'i reset',
        'i responded',
        'i resurrected',
        'i revealed',
        'i risked',
        'i ruined',
        'i sabotaged',
        'i sacrificed',
        'is advancing',
        'i sail',
        'is all over',
        'i saved',
        'i saw',
        'is bleak',
        'is brutal',
        'i scammed',
        'is crazy',
        'is dead',
        'is desperate',
        'is diabolic',
        'is disgust',
        'is doomed',
        'is dying',
        'is easy',
        'is... easy',
        'isâ€¦ easy',
        'i sent',
        'i serve',
        'i set up',
        'is free',
        'is going',
        'is going to be true',
        'is hard',
        'i shared',
        'i shocked',
        'i should',
        'i showed',
        'i shred',
        'i simulated',
        'i slept',
        'isnâ€™t a theory anymore',
        'isnt a theory anymore',
        "isn't getting",
        "isn't working",
        'i snuck',
        'i sold',
        'i solved',
        'is on life support',
        'is out of control',
        'is over',
        'is pathetic',
        'i spent',
        'is real',
        'is scary',
        'is spineless',
        'is stuck',
        'is taking over',
        'i stalked',
        'i started',
        'i starved',
        'is terrible',
        'is the worst',
        'is this the end',
        'i stole',
        'is toxic',
        'i studied',
        'i sue',
        'i summoned',
        'i surpassed',
        'i surprised',
        'i survived',
        'i survived on',
        'i suspended',
        'is weird',
        'i swipe',
        'i switched',
        'i taught',
        'it die',
        'i technically',
        'i tested',
        'i tested if',
        'i threatened',
        'i threw',
        'i told',
        'i took',
        'i tortured',
        'i traded',
        'i trained',
        'i transform',
        'i trapped',
        'i travel',
        'i trick',
        'i tried',
        'i tried to',
        'i trusted',
        'it\'s finally over',
        "it's happening",
        'itâ€™s happening',
        'its happening',
        "it's over",
        'it\'s time to',
        'its trash',
        'i turned',
        'i uncovered',
        'i unleashed',
        'i unlocked',
        'i uprooted',
        'i used',
        'i used to',
        'i vandalized',
        "i've",
        "iâ€™ve",
        "i've bought",
        "ive bought",
        "i've built",
        "ive built",
        "i've changed",
        "ive changed",
        "i've created",
        "ive created",
        "i've done",
        "ive done",
        "i've ever",
        "i've failed",
        "ive failed",
        "i've fixed",
        "ive fixed",
        "i've found",
        "ive found",
        "i've given",
        "ive given",
        "i've got",
        "ive got",
        "i've grown",
        "ive grown",
        "i've learned",
        "ive learned",
        "i've lost",
        "ive lost",
        "i've made",
        "ive made",
        "i've met",
        "ive met",
        "i've never",
        "ive never",
        "i've opened",
        "ive opened",
        "i've paid",
        "ive paid",
        "i've quit",
        "ive quit",
        "i've realized",
        "ive realized",
        "i've repaired",
        "ive repaired",
        "i've replaced",
        "ive replaced",
        "i've seen",
        "ive seen",
        "i've spent",
        "ive spent",
        "i've survived",
        "ive survived",
        "i've tested",
        "ive tested",
        "i've tried",
        "ive tried",
        "i've used",
        "ive used",
        "i've won",
        "ive won",
        'i violated',
        'i visited',
        'i waited',
        'i want to',
        'i warned',
        'i was',
        'i was a',
        'i was forced',
        'i was mention',
        'i was on',
        'i went',
        'i wiped',
        'i witnessed',
        'i woke up',
        'i won',
        'i wore',
        'i worked for',
        'i wrecked',
        'i wrote',
        'i yelled',
        'jack doherty',
        'job security is',
        'just change',
        'just dropped',
        'just lost',
        "just won't stop",
        'keeps getting',
        'keep you broke',
        'kicking kids out',
        'kids out too',
        'killed',
        'last chance',
        'laughs at',
        'leaked',
        'left me',
        'legendary',
        "let's talk",
        "letâ€™s talk",
        'life changing',
        'linus',
        'linus sebastian',
        'linus tech tips',
        'linustechtips',
        'linuxâ€™s big moment',
        'linux vs windows',
        'live stream',
        'l nerd',
        'lost her',
        'lost his',
        'ludwig',
        'made for me',
        'made me',
        'make your videos',
        'making',
        'making luxury',
        'marvel',
        'massive leak',
        'meme',
        'might be real',
        'mind blowing',
        'minecraft',
        'mizkif',
        'more powerful',
        'most anticipated',
        'most hated',
        'most irresponsible',
        'most mysterious',
        'most toxic',
        'mr beast',
        'mr. beast',
        'mr.beast',
        'mrbeast',
        'mr best',
        'mr. best',
        'musk',
        'must watch',
        'my cat is',
        "my channel",
        'my current',
        'my dumb',
        'my event',
        'my experience',
        'my first',
        'my friend',
        'my game',
        'my girlfriend',
        'my greatest',
        'my league',
        'my life is over',
        'my losses',
        'my mental',
        'my money',
        'my paycheck',
        'my problem',
        'my relationship',
        'my response',
        'mystery solved',
        'my tough',
        'my tweet',
        'my valuable',
        'my value',
        'my video',
        'my youtube',
        'name',
        'natureâ€™s mistake',
        'never ending chaos',
        'new epidemic',
        'new scam',
        'next level',
        'nightmare',
        'nina lin',
        'no backbone',
        'nobody ask',
        'nobody talks about',
        'no longer alive',
        'no longer a theory',
        'nortorious',
        'no rules',
        'not a theory anymore',
        'not going well',
        'not in jail',
        'notorious',
        'now!',
        'nyjah huston',
        'official trailer',
        'of our',
        'of your life',
        'only eating',
        'openai secret',
        'organizing my life',
        'oscura verdad',
        'our big',
        'our dream',
        'our fault',
        'our friend',
        'our relationship',
        'overconsumption is',
        'owned',
        'own fault',
        'pastry that',
        'pay for stranger',
        'pay later gets',
        'perfectly balanced',
        'poison',
        'pokimane',
        'portrait video nanny canon',
        'prank',
        'pregnancy horror stories',
        'prettier you wake',
        'prison affairs',
        'prison affairs why',
        'protecting their kids',
        'proved everyone',
        'psychotic',
        'qtcinderella',
        'quitting youtube',
        'racist',
        'random system32',
        'rant',
        'rapid rise',
        'rate my',
        'rates',
        'rating',
        'react',
        'reacting',
        'reaction',
        'reacts',
        'reality',
        'really dark',
        'reasons i hate',
        'reasons why',
        'reddit',
        'reddit stories',
        'reddit story',
        'remove my',
        'replied',
        'reply',
        'respond',
        'responding to the allegation',
        'review the',
        'rhinoplasty regrets',
        'rhinoplasty regrets what',
        'richer than',
        'riding with',
        'right now!',
        'risking your eyes',
        'robert pg',
        'roblox',
        'ronaldo',
        'ruined by',
        'ruined her',
        'ruined his',
        'ruining her',
        'ruining his',
        'ruining our lives',
        'ruining your',
        'ruin your',
        'rules for life',
        'running out of seeds',
        'satisfying',
        'saved lives',
        'saves life',
        'saves lives',
        'scammed their way',
        'scammers out-dumb themselves',
        'secret history of',
        'seedless fruit',
        'sent adults into',
        'shakeup',
        'shane dawson',
        'shannon sharpe',
        'she deserve',
        'she faked being',
        'she got',
        'she ruin',
        'she said',
        "she's facing",
        "sheâ€™s facing",
        'she tried',
        'shocking',
        'shocking inflation',
        'shorts',
        'should not',
        "shouldn't have been",
        "shouldnâ€™t have been",
        'sick secret',
        'silent disaster',
        'skin bleaching and',
        'skynet moment',
        'social media',
        'so much money',
        'sora 1',
        'sora 2',
        'sponsor',
        'squid game',
        'stalking',
        'starbucks bear cups',
        "'s terrible",
        'still panic',
        'stopped',
        'streamer',
        'stream highlight',
        'streetsmart',
        'subscribe',
        'sucks now',
        'switched back',
        'switched to',
        'switch from',
        'switching back',
        'switching from',
        'switching to',
        'sydney sweeney',
        'take down',
        'taken over',
        'talking',
        'tattoo regret',
        'tattoo regret the',
        'taylor swift',
        'teach you about',
        'tech is doomed',
        'terrify',
        'tested my',
        'testing my',
        'test my',
        'thank you all',
        'thank you for everything',
        'thank you guys',
        'than you think',
        'that got me',
        'that made me',
        'that you have',
        'that you never',
        'the absolute',
        'the ai uprising',
        'the alarming',
        'the best',
        'the best way',
        'the biggest',
        'the bubble will burst',
        'the coolest',
        'the creepiest',
        'the dark truth',
        'the death of',
        'the dumbest',
        'the end of',
        'the fake',
        'the fall of',
        'the fight for',
        'the first person',
        'the future',
        'the hidden',
        'the horrors',
        'the market is crashing',
        'the most',
        'the most dangerous',
        'the problem',
        'the reason',
        'the ridiculous',
        'the scariest',
        'the toxic',
        'the truth about',
        'the victim',
        "the world's",
        'the worst',
        "they couldn't",
        "they don't tell",
        'they wanted',
        'this broke me',
        'this canâ€™t be real',
        'this changes everything',
        'this explains everything',
        'this has to be',
        'this is a problem',
        'this is for',
        'this is horrible',
        'this is how',
        'this is not a drill',
        'this is the best',
        'this is what happens',
        'this is why',
        'this video',
        'this viewer',
        'this wonâ€™t last long',
        'threat to nature',
        'tik tok',
        'tiktok',
        'tiktok banned',
        'tiktok exposed',
        'times worse',
        'tim pool',
        'too far',
        'top ',
        'top 10',
        'top 5',
        'torment',
        'trÃ¡iler oficial',
        'trap house braiders',
        'tried ruin',
        'tried to ruin',
        'truly massive',
        'trust me',
        'turned on',
        'turning a free',
        'turning free',
        'turning salvaged',
        'turn violent',
        'twitch',
        'uglier you sleep',
        'ultimate',
        'unbelievable',
        'undeniable proof',
        'under the knife',
        'unpaid',
        'unusual',
        'viral',
        'wait for it',
        'waiting to happen',
        'wants you to',
        'want you to',
        'warning for everyone',
        'was absolute',
        'was a joke',
        'was a tragedy',
        "wasn't enough",
        'was scary',
        'watch me',
        'watch this before',
        'watch until the end',
        'we built',
        'wedding nightmares and',
        'we design',
        'weeks pregnant',
        'we found',
        'we got this instead',
        'we hate',
        'weird encounter',
        'weirdest',
        'weird things',
        'we laugh',
        'we need to',
        'we need to talk',
        'went all in',
        'we play',
        "we're not",
        "we're so",
        'we thought',
        'we took',
        'we tried',
        'we turn',
        'we watch',
        'we were wrong about',
        'what actually happen',
        'what happens if',
        'what if',
        'what life look',
        'what no one tells you',
        'what really happened',
        'what they donâ€™t teach you',
        'why i',
        'why seedless',
        'why this',
        'why we',
        'why women date',
        'wild dating horror',
        'will be hated',
        'will end',
        'wish every parent',
        'with no exploits',
        'without a',
        'women date prisoners',
        'women go under',
        "won't fail",
        'won\'t save us',
        'won\'t save you',
        'working hard and',
        'worse now',
        'worse than i',
        'worse than we',
        'worst',
        'worst crime',
        'worst idea',
        'worst video',
        'yall are going',
        'yall are gonna',
        'years in',
        'yes really',
        'you are not safe',
        "you don't look",
        'you have to see',
        'you laugh',
        'youâ€™ll go broke',
        'you must know',
        'you need for',
        'you need to',
        'your brain',
        "you're being",
        "youâ€™re not ready",
        'your money',
        'your stream',
        'you should',
        'youtube drama',
        'youtube earn',
        'youtuber',
        'youtube suck',
        'youtube took down',
        'you wake up',
        'you won\'t believe',
        'you wonâ€™t believe',
        'you wonâ€™t survive this',

        // Additions to filter mainstream ragebait / geopolitical drama
        'china',
        'dubai',
        'russia',
        'gaza',
        'trump',
        'putin',
        'north korea',
        'iran',
        'netanyahu',
        'ukraine',
        'syria',
        'venezuela',
        'india',
        'turkey',
        'israel',
        'palestine',
        'brazil',
        'myanmar',
        'africa',
    ];


    const blockedChannels = [
        "it's blanko",
        "it'sagundam",
        "kat 'n chat",
        "kent's tech world",
        "sam o'nella academy",
        "terror tedâ€™s tales",
        "we're in hell",
        "zach's tech turf",
        '5-minute crafts',
        'a life after layoff',
        'aaronclarey',
        'according to nicole',
        'acheeto',
        'action retro',
        'actual jake',
        'adam conover',
        'adam savage\â€™s tested ',
        'adam something',
        'ahoy',
        'airrack',
        'alan becker',
        'alinity',
        'all time',
        'alphasniper97',
        'alphastein',
        'amd',
        'answer in progress',
        'apple',
        'arcas: the man of style',
        'asmongold',
        'augusttheduck',
        'austin evans',
        'barely sociable',
        'beam in serie',
        'beast',
        'belle delphine',
        'belyves',
        'ben azelart',
        'ben eater',
        'ben shapiro',
        'benijugoso',
        'berleezy',
        'best fails',
        'better bachelor',
        'big a',
        'bigclivedotcom',
        'blake the snake',
        'boffy',
        'boy boy',
        'brent rivera',
        'brentech',
        'brick technology',
        'bright side',
        'britec09',
        'brodie robertson',
        'buzzfeedvideo',
        'camilla araujo',
        'captain disillusion',
        'carrerita',
        'caseoh',
        'casey neistat',
        'cashblox',
        'casually explained',
        'caylusblox',
        'celebrity drama',
        'cerostv',
        'cgp grey',
        'chasing chano',
        'chris heria',
        'chris stuckmann',
        'chris titus tech',
        'christophe',
        'christopher flannigan',
        'chubbyemu',
        'chud logic',
        'cinemassacre',
        'circletoonshd',
        'ciÃªncia todo dia',
        'cleo abram',
        'clownfish tv',
        'clutch gaming highlights',
        'cnet',
        'cocomelon',
        'code bullet',
        'codyslab',
        'coffeezilla',
        'coldfusion',
        'cole hastings',
        'collins key',
        'computerphile',
        'connor is lost',
        'corridor crew',
        'coryxkenshin',
        'crashcourse',
        'crazy pranks 24/7',
        'critical role',
        'cybercpu tech',
        'dafuq!?boom!',
        'daily dose of internet',
        'daily dose',
        'daily fails',
        'dakotatalks',
        'dani',
        'dankpods',
        'danny duncan',
        'danny gonzalez',
        'dareen younes',
        'dave2d',
        'david bombal',
        'david dobrik',
        'dead air vhs',
        'deadwingdork',
        'decoding the unknown',
        'deep dive with',
        'defunctland',
        'dhar mann',
        'dhruv rathee',
        'diamondbolt',
        'distrotube',
        'diy perks',
        'dobre brothers',
        'doctor mike',
        'doing it with briggs',
        'dom brack',
        'dominican geek 360',
        'donald j trump',
        'donpanchis',
        'doodle and arkey',
        'dougdoug',
        'dougdougdoug',
        'drama alert',
        'dream',
        'drew gooden',
        'drossrotzank',
        'drunken intelligence',
        'dude perfect',
        'dumpy',
        'dw documentary',
        'eckhartsladder',
        'el robot de platÃ³n',
        'electroboom',
        'emergency awesome',
        'emiru',
        'emkay',
        'emma thorne',
        'emplemon',
        'engween',
        'epic gamer moments',
        'eric murphy',
        'eroxblox',
        'eta prime',
        'explainingcomputers',
        'extreme pranksters',
        'exurb1a',
        'fabiano',
        'facebook',
        'failarmy',
        'faister gaming',
        'faze clan',
        'faze rug',
        'faze',
        'fern',
        'fgteev',
        'fifa',
        'fireship',
        'folding ideas',
        'foltyn',
        'fortnite battle clips',
        'fredrik knudsen',
        'gadget unboxings',
        'gameranx',
        'gamers nexus',
        'gamestar',
        'gaming nexus',
        'garbage time',
        'gardiner bryant',
        'garrett crespo',
        'geeks + gamers',
        'gigguk',
        'gnca - gamersnexus consumer advocacy',
        'google',
        'greatscott!',
        'grizzy',
        'guava juice',
        'h3h3 productions',
        'half as interesting',
        'hamedloco spielt',
        'hasan',
        'hay day',
        'hbomberguy',
        'holy baam',
        'hoots hootman',
        'huebi',
        'i did a thing',
        'ibaitv',
        'imallexx',
        'incognito mode',
        'infinite',
        'influencers in the wild',
        'inquisitormaster',
        'insider',
        'intel',
        'internet gossip',
        'internet historian',
        'is gogeth',
        'itsfunneh',
        'itsjanke',
        'j aubrey',
        'jack clips',
        'jack doherty',
        'jacksepticeye',
        'jacob geller',
        'jake paul',
        'james julier art tutorials',
        'janky rondo',
        'jason mcbason',
        'jay foreman',
        'jaystation',
        'jayztwocents',
        'jcs - criminal psychology',
        'jeff geerling',
        'jehxtp',
        'jelly',
        'jev',
        'jim browning',
        'jimmy donaldson',
        'jimmy robins',
        'jimmythegiant',
        'joe bart games',
        'joe bartolozzi',
        'joe fazer',
        'joe scott',
        'john hammond',
        'johnny harris',
        'jontronshow',
        'jordan b peterson',
        'jordan matter',
        'josh johnson',
        'joxy',
        'jozhi7',
        'judelow',
        'kajudyt',
        'kamswy',
        'karl jobst',
        'katliente',
        'keepittechie',
        'killianthecrafter',
        'kitboga',
        'ksi',
        'kurtis conner',
        'kurzgesagt â€“ in a nutshell',
        'kyle hill',
        'lankybox',
        'lastweektonight',
        'latte asmr',
        'lawful masses with leonard french',
        'lazarbeam',
        'leah ashe',
        'learn linux tv',
        'legaleagle',
        'lemmino',
        'lexi rivera',
        'lgr',
        'life hack master',
        'linus tech tips',
        'liquid marshall',
        'liron segev',
        'lisbug',
        'liuss',
        'live',
        'llm',
        'lmg clips',
        'logan paul',
        'lol esports vods espaÃ±ol casteos ibai',
        'lol esports',
        'louaista',
        'louis rossmann',
        'low level',
        'lta espaÃ±ol',
        'lucrew',
        'ludwig',
        'ludwin',
        'luka levi',
        'luke smith',
        'lyna',
        'macrumors',
        'mandjtv extra',
        'mando',
        'mark rober',
        'mark tilbury',
        'markiplier',
        'marques brownlee',
        'max fosh',
        'meatcanyon',
        'memes daily',
        'mental outlaw',
        'metaphysical',
        'michael horn',
        'michael mjd',
        'michael reeves',
        'microsoft',
        'milliethepig',
        'millietwopig',
        'minecraft best moments',
        'minutephysics',
        'mizkif',
        'modern vintage gamer',
        'moist69giraffe',
        'moon',
        'more perfect union',
        'morecaseoh',
        'morgz',
        'mouzakrobat',
        'mr. geil',
        'mrbeast',
        'mrwhosetheboss',
        'mujin',
        'mumbo jumbo',
        'mysterious remote',
        'nakeyjakey',
        'naomi brockwell tv',
        'neko and tora',
        'nelonline',
        'netflix',
        'networkchuck',
        'nexpo',
        'nick digiovanni',
        'nick jackson',
        'nilered',
        'nina lin',
        'no text to speech',
        'nocturn',
        'noel miller',
        'not just bikes',
        'noway4u',
        'numberphile',
        'nvidia',
        'ompaville',
        'ontan',
        'optimum',
        'orangepeanut',
        'overeasy',
        'oversimplified',
        'paluten',
        'papaplatte gaming',
        'papaplatte uncut',
        'patrick cc',
        'pbs eons',
        'pbs space time',
        'pc security channel',
        'pelicomic',
        'penguinz0',
        'pewdiepie',
        'pexto',
        'philosophy tube',
        'pierson',
        'pietsmiet',
        'pka clips',
        'podcast',
        'pokimane',
        'poly matter',
        'polymatter',
        'powerfuljre',
        'practical engineering',
        'prank wars',
        'preston',
        'project farm',
        'pubg highlights daily',
        'pursuit of wonder',
        'qtcinderella',
        'quick tech tips',
        'rajo end',
        'reaction memes',
        'reaction time',
        'real engineering',
        'reallifelore',
        'reddit',
        'ricegum',
        'rob braxman tech',
        'roblox',
        'rocky rakoon',
        'rtgame',
        'ryan pictures',
        'ryan trahan',
        'sabine hossenfelder',
        'sagan hawkes',
        'samtime',
        'savvynik',
        'scambaiters vs. scammers',
        'scammer payback',
        'scary videos 24/7',
        'scishow',
        'scott shafer',
        'scott the woz',
        'screen culture',
        'sebastian lague',
        'second thought',
        'seeytonic',
        'seynotic',
        'seyonic',
        'seyonictypo',
        'seythonic',
        'seytonic',
        'seyttonic',
        'seyytonic',
        'shane dawson',
        'shortcircuit',
        'side scrollers',
        'silvio gamer',
        'simfinity',
        'skipperynmi',
        'smartereveryday',
        'smii7yplus',
        'smosh pit',
        'sniperwolf',
        'somber',
        'someordinarygamers',
        'spatnz',
        'spill',
        'spreen plus',
        'sseth tzeentach',
        'ssethtzeentach',
        'sssniperwolf',
        'ssundee',
        'stan browney',
        'stand-up maths',
        'steve mould',
        'stevencrowder',
        'stokes twins',
        'stuff made here',
        'styropyro',
        'summoning salt',
        'sunnyv2',
        'sunraybee',
        'super eyepatch wolf',
        'surfshark academy',
        'surveillance report',
        'switched to linux',
        'sydney sweeney',
        'sypherpk',
        'sysHack',
        't3rr0r',
        'taylor lorenz',
        'taylor swift',
        'taylorswift',
        'tcnick',
        'team futurism',
        'tech hacks daily',
        'techaltar',
        'techhut',
        'techlinked',
        'techlore',
        'techmoan',
        'technical sagar',
        'technology connections',
        'techquickie',
        'ted-ed',
        'tested',
        'the b1m',
        'the backlogs',
        'the critical drinker',
        'the hated one',
        'the infographics show',
        'the linux experiment',
        'the odd1sout',
        'the sitdown',
        'the slow mo guys',
        'the thought emporium',
        'the try guys',
        'theautobharat',
        'thebackyardscientist',
        'theburntpeanut',
        'theekwah',
        'theodd1sout',
        'theprimetime',
        'thequartering',
        'thiojoe',
        'tierzoo',
        'tik tok compilation',
        'tiktok central',
        'tim pool',
        'timcast irl',
        'timcast',
        'tom scott',
        'tomdark',
        'top 10 countdowns',
        'total os today',
        'trap lore ross',
        'trash',
        'trend hacks',
        'trending gossip',
        'trending shorts',
        'trendy top 10s',
        'tri-line',
        'triáº¿t tÃ¢m',
        'troom troom',
        'try',
        'trymacs',
        'tulas 47',
        'turbo xtra',
        'turboblox',
        'turkey tom',
        'tuv',
        'twitter',
        'two minute papers',
        'tyler oliveira',
        'ufd tech',
        'ukriblox',
        'unspeakable',
        'upper echelon',
        'valkyrae',
        'valorant',
        'vanessa wingÃ¥rdh',
        'vaush',
        'vegas matt',
        'veritas',
        'veritasium',
        'vex',
        'videogamedunkey',
        'videogamersvault',
        'villainee',
        'viral hacks',
        'viral reaction',
        'viral trending',
        'visual venture',
        'voidzilla',
        'vox',
        'vsauce',
        'wavywebsurf',
        'wendover productions',
        'werlyb',
        'whirow',
        'wifies',
        'will tennyson',
        'william kitten',
        'windows',
        'wolfgang\'s channel',
        'woofer',
        'xqc',
        'yms highlights',
        'zach king',
        'zack telander',
        'zcrexpy',
        'zhc',
        'Ð±ÑƒÐ»Ð´Ð¶Ð°Ñ‚ÑŒ',
        'Ð²Ð»Ð°Ð´ÑƒÑ',

        // ðŸŸ Fake Animal Rescue / Nature Slop
        'animal angels',
        'animal planet clips',
        'animal rescue tv',
        'animal universe',
        'animal white',
        'animals love 365',
        'capybara friends',
        'cute animals compilation',
        'cute pet vids',
        'fresh sea cooling',
        'life before',
        'moya - animal rescues',
        'ocean life 360',
        'ocean update',
        'pet rescue 24/7',
        'sea grace',
        'wildlife clips daily',
        'wildlife diary',
        'wildlife warriors',
        'wildlife wonders tv',
        'world of animals',

        // ðŸŒŒ Fake Space / Science Facts
        'astroexplorers',
        'cosmic wonders tv',
        'cosmos discovery',
        'galactic discoveries',
        'galactic facts hub',
        'infinity wonders',
        'science daily facts',
        'science fact central',
        'space fact zone',
        'space infinity',
        'space mysteries uncovered',
        'universe explorer',

        // ðŸ¤– AI History / Documentary Spam
        'ancient uncovered',
        'dark universe',
        'historic discovery',
        'mystery recap',
        'world history archive',

        // ðŸ•¹ï¸ Fake Gaming & Meme Slop
        'ai plays',
        'fortnite clips daily',
        'gaming recap',
        'minecraft facts',

        // ðŸ¤– AI-Generated / AI Slop Channels
        'ai deepfake zone',
        'ai explained daily',
        'ai fact hub',
        'ai for humans',
        'ai news daily',
        'ai video creator',
        'auto creator ai',
        'autovoice ai',
        'block legends 90s',
        'courtroom consequences',
        'deep fake news',
        'deepfake channel',
        'deepfake clips',
        'digital drift ai',
        'discover ai',
        'foot tech today',
        'hard fork',
        'made vision',
        'roboreview',
        'synthesized reality',
        'thatai coach',
        'the ai grid',
        'the ai-telier',
        'twisted truth',
        'virtual historian ai',
        'wes roth',

        // ðŸ¤– Popular AI-Focused / AI Commentary Channels
        '1littlecoder',
        '3blue1brown',
        'ai explained',
        'andrej karpathy',
        'bycloud',
        'clever programmer',
        'code_your_own_ai',
        'dave shapiro',
        'deeplearningai',
        'dr alan thompson',
        'dylan_curious',
        'jordan harrod',
        'julia mccoy',
        'ken jee',
        'krish naik',
        'langchain',
        'lex fridman',
        'matt wolfe',
        'matthew berman',
        'mattvidproai',
        'openai',
        'rob miles',
        'sentdex',
        'statquest with josh starmer',
        'yannic kilcher',

        // ðŸ§© Common Slop / Farm Keywords

        '/\bai\b/i', // AI wildcard filter
        'analysis',
        'archive',
        'breakdown',
        'central',
        'channel',
        'clips',
        'compilation',
        'compilations',
        'courtroom',
        'daily',
        'discover',
        'docu',
        'documentary',
        'explained',
        'explorer',
        'facts daily',
        'facts',
        'footage',
        'games',
        'gaming',
        'generated',
        'highlights',
        'hub',
        'insider',
        'media',
        'moments',
        'mysteries',
        'network',
        'news daily',
        'official',
        'plays',
        'playz',
        'reaction',
        'reactions',
        'reacts',
        'recap',
        'reddit stories',
        'reddit',
        'science facts',
        'secrets',
        'shorts',
        'stock',
        'stories',
        'story',
        'studio',
        'tech news',
        'trending',
        'tv',
        'uncovered',
        'unknown',
        'unseen',
        'updates',
        'viral',
        'voice',
        'world',
        'zone',
    ];

    // Robust emoji detection
    const emojiRegex = /\p{Extended_Pictographic}/gu;

    function shouldFilterTitle(title) {
        const words = title.split(/[^\p{L}]+/gu); // split on letters
        const lower = title.toLowerCase();

        // ðŸ”´ FUTURE YEAR CLICKBAIT FILTER
        if (futureYearRegex.test(title)) {
            return true;
        }

        // Check allowed ALL-CAPS patterns
        const hasAllowedAllCapsWord = words.some(word =>
                                                 allowedAllCapsPatterns.some(pattern => pattern.test(word))
                                                );
        if (hasAllowedAllCapsWord) return false;

        // Filter ALL-CAPS words outside whitelist
        if (words.filter(isAllCapsWord).length > 0) return true;

        // Blocked keywords
        if (blockedKeywords.some(keyword => lower.includes(keyword))) return true;

        // Emoji check
        if (emojiRegex.test(title)) return true;

        // Filter $ signs
        if (title.includes('$')) return true;

        return false;
    }

    function normalizeName(name) {
        return name
            .trim()                 // remove leading/trailing spaces
            .replace(/\s+/g, ' ')   // normalize multiple spaces
            .toLowerCase();         // lowercase for comparison
    }

    function shouldFilterChannel(channel) {
        const normChannel = normalizeName(channel);
        return blockedChannels.some(name => normChannel.includes(normalizeName(name)));
    }

    function isWhitelistedChannel(channel) {
        const normChannel = normalizeName(channel);
        return whitelistedChannels.some(name =>
                                        normChannel.includes(normalizeName(name))
                                       );
    }

    function normalize(str) {
        return str.replace(/â€™/g, "'").toLowerCase();
    }

    function filterResults() {
        const boxes = document.querySelectorAll('.h-box');
        if (!boxes.length) return false;

        let filteredCount = 0;

        boxes.forEach(box => {
            const titleEl = box.querySelector('.video-card-row > a > p');
            const channelEl = box.querySelector('.channel-name');

            const title = titleEl?.textContent.trim() || '';
            const channel = channelEl?.textContent.trim() || '';

            const isWhitelisted = isWhitelistedChannel(channel);

            // Always allow channel blocking to win
            if (shouldFilterChannel(channel) && !isWhitelisted) {
                console.log('[Filtered: channel]', channel);
                box.closest('.pure-u-1')?.remove();
                filteredCount++;
                return;
            }

            // If channel is whitelisted, skip ALL title-based filtering
            if (!isWhitelisted && shouldFilterTitle(title)) {
                console.log('[Filtered: title]', title);
                box.closest('.pure-u-1')?.remove();
                filteredCount++;
            }

        });

        return filteredCount > 0;
    }

    // === TARGETED ANTI-FLICKER OVERLAY ===
    function addAntiFlickerOverlay() {
        const columns = document.querySelectorAll('div.pure-u-md-1-4.pure-u-1');
        columns.forEach(col => {
            const overlay = document.createElement('div');
            overlay.className = 'antiFlickerOverlay';
            overlay.style.cssText = `
                position: absolute;
                inset: 0;
                background: #0f0f0f;
                z-index: 9999;
                pointer-events: none;
                opacity: 1;
                transition: opacity 0.25s ease-out;
            `;

            // Ensure column is relative for absolute overlay
            if (getComputedStyle(col).position === 'static') col.style.position = 'relative';

            // Insert overlay as first child
            col.insertBefore(overlay, col.firstChild);
        });
    }

function removeAntiFlickerOverlay() {
    document.querySelectorAll('.antiFlickerOverlay').forEach(el => {
        requestAnimationFrame(() => el.style.opacity = '0');
        el.addEventListener('transitionend', () => el.remove());
    });
}

// Add overlays immediately
const initOverlay = () => {
    const cols = document.querySelectorAll('div.pure-u-md-1-4.pure-u-1');
    if (!cols.length) {
        requestAnimationFrame(initOverlay); // wait until columns exist
        return;
    }
    addAntiFlickerOverlay();
};
initOverlay();

// Run filtering
let tries = 0;
const maxTries = 20;
const interval = setInterval(() => {
    tries++;
    const hasFiltered = filterResults();

    if (tries >= maxTries || !hasFiltered) {
        clearInterval(interval);
        removeAntiFlickerOverlay();
        console.log('[Invidious Filter] Finished filtering.');
    }
}, 250);

})();