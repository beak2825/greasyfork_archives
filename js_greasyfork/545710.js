// ==UserScript==
// @name         SploMod Clean ++
// @description  Autobreak, Smart AutoPush, Autoheal, macros, mobile menu button, performance tweaks
// @version      4.0.0
// @author       refactor-by-chatgpt
// @match        *://sploop.io/*
// @run-at       document-start
// @require      https://code.jquery.com/jquery-3.3.1.min.js
// @require      https://code.jquery.com/ui/1.12.0/jquery-ui.min.js
// @grant        none
// @namespace https://greasyfork.org/users/1406718
// @downloadURL https://update.greasyfork.org/scripts/545710/SploMod%20Clean%20%2B%2B.user.js
// @updateURL https://update.greasyfork.org/scripts/545710/SploMod%20Clean%20%2B%2B.meta.js
// ==/UserScript==

(function(){
const {log}=console;let wsPushing=false,Game,Entity=[],Canvas,Context,ctx,keyDown=[],user={},tribe=[],enemy,encoder=new TextEncoder(),decoder=new TextDecoder(),teammates=[];let Config={update:t=>{Config[t]+=1,setTimeout(()=>Config[t]-=1,1e3)},serverUpdate:1e3/9,breaking:false,pushing:false,rate:1e3,pps:0,weapon:0,cps:0,tps:0,fps:0,ping:0,enemiesNear:[],freeze:{send:true,pps:true,message:false,setup:false},angle:0,move:0,messages:new Array([],[]),counter:0,resolver:function(){},last:Date.now(),chat:["If you're a lover","you should know","The lonely moments","just get lonelier","The longer you're in love","Than if you were alone","Memories turn into daydreams","Become a taboooo","I don't want to be afraid","The deeper that I go","It takes my breath away","Soft hearts electric souls","Heart to heart","Eyes to eyes","Is this taboo?","Baby we built this house","Baby we built this house","On memories","Take my picture now","Shake it til you see it","And when your fantasies","Become your legacy","Promise me a place","In your house of memories","I think of you from time to time","More than I thought I would","You were just too kind","And I was too young to know","That's all that really matters","I was a fool..","Baby we built this house","On memories","Take my picture now","Shake it til you see it","And when your fantasies","Become your legacy","Promise me a place","In your house of memories","Those thoughts of past lovers","They'll always haunt me","I wish I could believe","You'd never wrong me","Then will you remember","Me in the same way","As I remember you","Baby we built this house","On memories","Take my picture now","Shake it til you see it","And when your fantasies","Become your legacy","Promise me a place","In your house of memories","Baby we built this house","On memories","Take my picture now","Shake it til you see it","And when your fantasies","Become your legacy","Promise me a place","In your house of memories","Woah Woah,","Woah Woah","Promise me a place","In your house of memories.. ðŸ’”"],isJson:t=>{try{JSON.parse(t)}catch(e){return false}return true},WS:null};Config.tick=()=>new Promise(e=>Config.resolver=e);let Toggle={UI:true,autoBreak:true,autoPush:true,autoPlace:true,autoSync:true,autoRespawn:false,autoChat:false,tracers:true,autoHeal:true,optHeal:false};class Macro{constructor(e,t,a,o,i){this.advanced=e,this.spike=t,this.trap=a,this.mill=o,this.food=i}update(){setTimeout(()=>{keyDown[this.spike]&&Sploop.newPlace(4);keyDown[this.trap]&&Sploop.newPlace(7);keyDown[this.mill]&&Sploop.newPlace(5);keyDown[this.food]&&Sploop.newPlace(2)},14)}}let Placer=new Macro(true,86,70,78,81);class Sploop{static place(e,t=Config.angle){Config.update("cps"),Sploop.take(e),Sploop.hit(t),Sploop.take(Config.weapon)}static newPlace(e,t=Config.angle){let a=Math.PI/8,o=Math.PI/4;this.place(e,t,true);for(let i=0;i<o;i+=a)Sploop.place(e,t-i),Sploop.place(e,t+i);Sploop.take(Config.weapon)}static quad(e,t=0){for(let a=0;a<Math.PI*2;a+=Math.PI/8){let o=Config.serverUpdate/4*(a/(Math.PI/8));setTimeout(()=>Sploop.place(7,t+a),o)}}static heal(e){for(let t=0;t<=e;t++)Sploop.place(2)}static equip(e){user.skin!=e&&Game.send(new Uint8Array([5,e]))}static walk(e=Config.move){if("number"!=typeof e)return Game.send(new Uint8Array([1,0]));e=65535*(e+Math.PI)/(2*Math.PI),Game.send(new Uint8Array([1,255&e,e>>8&255]))}static take(e){Game.send(new Uint8Array([0,e]))}static chat(e){e=encoder.encode(e),Game.send(new Uint8Array([7,...e]))}static hit(e){e=65535*(e+Math.PI)/(2*Math.PI),Game.send(new Uint8Array([19,255&e,e>>8&255])),Game.send(new Uint8Array([18]))}static watch(e){e=65535*(e+Math.PI)/(2*Math.PI),Game.send(new Uint8Array([13,255&e,e>>8&255]))}static offensive(){let e=()=>{let t=enemy?getDistance(enemy,user):0;return user.y<=9e3&&user.y>=8e3?9:enemy&&t<=300?false&&t<=150?6:5:7};Sploop.equip(e())}static healthChange(e,t){t>e&&(user.hitDate=Config.counter),user.health=e}static update(){Config.counter+=1,Config.resolver(),Config.last=Date.now();if(user.alive){if(user.health<100&&Toggle.autoHeal){setTimeout(()=>{Sploop.heal(1)},Toggle.optHeal?Config.serverUpdate-20-Config.ping+parseInt(document.querySelector('[data-speed="addms"]').value):parseInt(document.querySelector('[data-speed="heal"]').value))}let e=Entity.find(c=>c&&getDistance(c,user)<=50&&6==c.type&&!teammates.includes(c.id2)&&user.id2!==c.id2),t=Config.breaking;Config.breaking=false;if(e&&Toggle.autoBreak){let a=getAngle(e,user);Config.breaking=true,Sploop.chat("Autobreaking"),Sploop.hit(a),Sploop.equip(6),t||Sploop.quad(7,a)}else t&&(Sploop.chat("Broken"),Sploop.offensive());let a=Config.pushing;Config.pushing=false;if(enemy&&!e&&user.alive){let o=getDistance(enemy,user);if(Toggle.autoPush&&o<=300){let i=SploopSmartPush.selectTarget(enemy,Entity,user);if(wsPushing&&!i){wsPushing=false,Sploop.walk("stop")}if(i){let r=SploopSmartPush.computeChasePoint(enemy,i,user),n=getDistance(r,user),s=()=>{wsPushing=true;if(n>110)return getAngle(r,user);let l=Math.abs(getAngle(i.spike,r)-getAngle(i.spike,user));Sploop.chat("SmartPush:"+ (l/(Math.PI/180)).toFixed(1)),getAngle(enemy,user);return getAngle(enemy,user)};Config.pushing=true,Sploop.walk(s())}}o=getDistance(enemy,user);if(Toggle.autoPlace&&o<=200){let d=Entity.find(c=>c&&6==c.type&&enemy.id!==c.id&&getDistance(c,enemy)<=50),u={x:enemy.x+enemy.xVel,y:enemy.y+enemy.yVel},p={x:user.x+user.xVel,y:user.y+user.yVel};o=getDistance(u,p);let h=getAngle(u,p),m=28*2+50;if(d){h=getAngle(d,p),setTimeout(()=>{Sploop.place(4,h+50*Math.PI/180)},14)}else{if(Toggle.autoSync&&o<250){let g=Entity.find(c=>c&&[2,7,17].includes(c.type)&&c.id!==enemy.id&&getDistance(c,u)<=60);if(g){Sploop.equip(2),Sploop.take(0),Sploop.hit(h),setTimeout(()=>Sploop.offensive(),2e3)}if(enemy.health<=(2==enemy.skin?78:85)&&5==user.skin&&user.health<=70){Sploop.equip(2),Sploop.take(0),Sploop.hit(h),setTimeout(()=>Sploop.offensive(),2e3)}}m>=o&&setTimeout(()=>{Sploop.place(7,h)},14)}}}a&&!Config.pushing&&Sploop.walk("Stop")}updateInfo()}}

class SploopSmartPush{static predict(e,t=150){return{x:e.x+e.xVel*t/1000,y:e.y+e.yVel*t/1000}}static scoreSetup(e,t,a){if(!t.trap||!t.spike)return-1;let o=getDistance(e,t.trap),i=getDistance(t.spike,t.trap);if(o>220||i>150)return-1;let r=0;r+=Math.max(0,200-o);r+=Math.max(0,130-i);r+=a.health>60?30:0;return r}static selectTarget(e,t,a){if(a.health<30)return null;let o=this.predict(e,220);let i=[];for(let r=0;r<t.length;r++){let n=t[r];if(!n)continue}let traps=t.filter(c=>c&&6==c.type&&c.id!==e.id);let spikes=t.filter(c=>c&&[2,7,17].includes(c.type)&&c.id!==e.id);if(!traps.length||!spikes.length)return null;let pairs=[];for(let tr of traps){let nearest=spikes.filter(s=>getDistance(s,tr)<=160).sort((x,y)=>getDistance(x,tr)-getDistance(y,tr))[0];if(nearest)pairs.push({trap:tr,spike:nearest})}if(!pairs.length)return null;pairs=pairs.sort((A,B)=>this.scoreSetup(o,A,a)-this.scoreSetup(o,B,a)).reverse();let best=pairs[0];if(this.scoreSetup(o,best,a)<0)return null;return{trap:best.trap,spike:best.spike}}static computeChasePoint(e,t,a){let s=t.spike,l=getAngle(e,l?l:s),d=getDistance(e,s)+70;return{x:s.x+d*Math.cos(getAngle(e,s)),y:s.y+d*Math.sin(getAngle(e,s))}}}

class Script{setup(){this.run()}send(e){if(this.ws&&1===this.ws.readyState){if(Config.pps>=400)return;this.ws.send(e),Config.update("pps")}}message(e){let t=e.data,a="string"==typeof t,o=a?JSON.parse(t):new Uint8Array(t),i=o.length,r=Number(o[0]),n=Config.messages[Number(a)].find(s=>s&&s.id==r);if(!n)return!Config.freeze.message&&Game.log("WebSocket","â¬‰",`${o} | ${a}`,"#c7cc51");switch(o[0]){case 20:Config.enemiesNear=[],enemy=null;for(let s=1;s<i;s+=19){let l=o[s],d=o[s+1],u=o[s+2]|o[s+3]<<8,p=o[s+4]|o[s+5]<<8,h=o[s+6]|o[s+7]<<8,f=o[s+8],m=o[s+11],g=o[s+12],y=o[s+13]/255*100,w=o[s+8];let v=Entity[u]||{};2&&f&&(Entity[u]=null);if(!l&&2==f)v={};else{v.type=l,v.id=u,v.health=y,v.xVel=v.x-p,v.yVel=v.y-h,v.speed=Math.hypot(h-v.y,p-v.x),v.move=Math.atan2(h-v.y,p-v.x),v.x=p,v.y=h,v.id2=d,v.skin=m,v.team=g,v.clown=Boolean(w),Config.enemiesNear.push(v),Entity[u]=v}if(v.id===user.id){Sploop.healthChange(v.health,user.health),Object.assign(user,v)}else if(!v.type&&(!user.team||v.team!=user.team)){let b=Math.hypot(user.y-v.y,user.x-v.x),k=enemy?Math.hypot(user.y-enemy.y,user.x-enemy.x):null;if(enemy){b<k&&(enemy=v)}else enemy=v}}Config.update("tps"),Sploop.update();break;case 35:user.id=o[1],user.alive=true,user.spawnDate=Date.now(),user.health=100,Config.weapon=0;break;case 19:user.health=0,user.speed=0,user.alive=false,Toggle.autoRespawn&&setTimeout(()=>{Game.send(Config.respawnPacket)},200);break;case 28:Sploop.chat("DESTROYED");break;case 24:teammates=[...t.slice(3,t.length)];break;case 16:teammates=[...t.slice(2,t.length)];break;case 27:teammates=[];break}Placer.update()}log(e,t,a,o){return log(`%c[${e}] %c${t}`,`color:${o};font-weight:bold`,`color:${o}`,a)}run(e){let t=0;setInterval(()=>{Toggle.autoChat&&(t==Config.chat.length?t=0:user.alive&&Toggle.autoChat&&(t++,Sploop.chat(Config.chat[t])) )},1e3);let a=[1,2,4,8],o=0;setInterval(()=>{if(Toggle.antiAFK){o++,Game.send(new Uint8Array([1,a[o-1]])),setTimeout(()=>{Game.send(new Uint8Array([1,0]))},200),o==a.length&&(o=0)}},5e3);!Config.freeze.setup&&Game.log("Hijacked Iframe","âœ”",e.url,"#0f0");let i=`<div class="notifications-holder"></div><style>.box span{font-size:20px;white-space:nowrap}.box{width:max-content;height:40px;display:flex;align-items:center;padding-top:3.5px;padding-left:7px;padding-right:7px;border-radius:7px;background-color:rgb(40 45 34 / 60%);border:4px solid #141414;margin-bottom:5px;color:white;letter-spacing:1px;font-weight:bold;box-shadow:inset 0 -3px 0 #333}.notifications-holder{position:absolute;left:20px;top:20px;display:flex;flex-direction:column;z-index:5}</style>`;$("body").append(i),addNotifications("The script is running!","#5c4ce6"),this.ws=e,setInterval(()=>{!Config.freeze.pps&&this.log("PPS","â¬",Config.pps,"#516ecc")},Config.rate),Config.width=Canvas.clientWidth,Config.height=Canvas.clientHeight,$(window).resize(()=>{Config.width=Canvas.clientWidth,Config.height=Canvas.clientHeight}),Canvas.addEventListener("mousemove",s=>{Config.mouseX=s.clientX,Config.mouseY=s.clientY,Config.angle=Math.atan2(Config.mouseY-Config.height/2,Config.mouseX-Config.width/2)})}constructor(){this.ws=null}}

const Setup=()=>{Game=new Script,Game.log("Setup","â¦¿","","#000000");let e=Config.messages;e[0][1]={name:"Player update",string:false},e[0][2]={name:"Verify",string:false},e[0][5]={name:"Choose",string:false},e[0][7]={name:"Hit",string:false},e[0][14]={name:"Resource update",string:false},e[0][16]={name:"Projectile Hit",string:false},e[0][18]={name:"Chat",string:false},e[0][19]={name:"Choose x3",string:true},e[0][20]={name:"Choose x2",string:false},e[0][22]={name:"Ping update",string:false},e[0][23]={name:"Ping update",string:false},e[0][24]={name:"Create clan",string:false},e[0][25]={name:"Leave clan",string:false},e[0][26]={name:"Create clan",string:false},e[0][27]={name:"Leave clan",string:false},e[0][30]={name:"Place",string:false},e[1][2]={name:"Spawn",string:true},e[1][8]={name:"Player setup",string:true},e[1][9]={name:"Leaderboard update",string:true},e[1][11]={name:"Text",string:true},e[1][13]={name:"Death",string:true},e[1][19]={name:"Choose",string:true},e[1][35]={name:"new Verify",string:true};for(let t=0;t<=1;t++){let a=e[t].length;for(let o=0;o<a;o++)e[t][o]&&(e[t][o].id=o)}};Setup();

WebSocket.prototype.unmodifiedSend=WebSocket.prototype.send;WebSocket.prototype.send=function(arguments){this.unmodifiedSend(arguments);if(window.ws!==this){this.addEventListener("message",e=>Game.message(e)),this.classic=this.send,window.ws=this,Game.run(this),Config.WS=this.url}}

let blockReact=["clan-menu-clan-name-input","nickname","chat"];const keyChange=(e,t)=>{if(blockReact.includes(document.activeElement.id.toLowerCase()))return"Blocked key change.";keyDown[e.keyCode]=t;let a=[49,97].includes(e.keyCode),o=[50,98].includes(e.keyCode);"KeyY"==e.code&&[1,12,9,19,20,15,8,17,16].forEach(i=>Game.send(new Uint8Array([14,i])));t&&(a||o)&&(Config.weapon=Number(o));switch(e.code){case"ShiftLeft":Sploop.take(Config.weapon);break;case document.querySelector('[data-key="instakill"]').value:break;case document.querySelector('[data-key="crystalgear"]').value:Sploop.equip(4);break;case document.querySelector('[data-key="boosthat"]').value:Sploop.equip(7);break;case document.querySelector('[data-key="berserkergear"]').value:Sploop.equip(2);break;case document.querySelector('[data-key="spikegear"]').value:Sploop.equip(5);break;case document.querySelector('[data-key="Demolist"]').value:Sploop.equip(11);break}Placer.update()};setInterval(Placer.update,75),document.addEventListener("keydown",e=>keyChange(e,true)),document.addEventListener("keyup",e=>keyChange(e,false));const getDistance=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),getAngle=(e,t)=>Math.atan2(e.y-t.y,e.x-t.x);const ReqFrame=requestAnimationFrame;window.requestAnimationFrame=function(){Config.update("fps"),ReqFrame.apply(this,arguments)};let updateInfo=()=>{if(user&&user.alive){let e="",t=a=>{e+=a+"<br/>"};t(`health: ${Math.round(user.health)}/100`),t(`push: o${Config.pushing?"n":"ff"}line`),t(`stuck: ${Config.breaking?"yes":"no"}`),t(`speed: ${Math.round(user.speed)}`),t(),t(`cps: ${Config.cps}`),t(`pps: ${Config.pps}`),t(`tps: ${Config.tps}`),t(`fps: ${Config.fps}`),Toggle.UI||(e=""),$("#info-content").html(e)}};var ctx2d;const gctx=CanvasRenderingContext2D.prototype.clearRect;CanvasRenderingContext2D.prototype.clearRect=function(){if("game-canvas"===this.canvas.id){Canvas=this.canvas,Context=Canvas.getContext("2d"),ctx2d=this}return gctx.apply(this,arguments)};let dlo=0,dlod=Date.now();function tracer(e,t,a,o,i){Context.save(),Context.lineCap="round",Context.lineWidth=5,Context.globalAlpha=.5,Context.beginPath(),Context.lineDashOffset=-dlo,Context.strokeStyle=i,Context.moveTo(a,o),Context.lineTo(e,t),Context.stroke(),Context.restore()}let tracerX=0,tracerY=0,tracermX=0,tracermY=0;const{fillRect}=CanvasRenderingContext2D.prototype;CanvasRenderingContext2D.prototype.fillRect=function(e,t,a,o){let i=tracerX>0&&tracerY>0&&tracermX>0&&tracermY>0;(!dlod||Date.now()-dlod>=10)&&(dlo++,dlod=Date.now());"#a4cc4f"===this.fillStyle?(tracermX=e+50,tracermY=t-70,fillRect.call(this,e,t,a,o)):"#cc5151"===this.fillStyle?(tracerX=e+50,tracerY=t-70,fillRect.call(this,e,t,a,o)):0,user.alive&&i&&Toggle.tracers&&tracer(tracerX,tracerY,tracermX,tracermY,"#cc5151"),fillRect.call(this,e,t,a,o);return fillRect.apply(this,arguments)};const{fillText}=CanvasRenderingContext2D.prototype;CanvasRenderingContext2D.prototype.fillText=function(e,t,a){if(e==user.name&&e.length>1||"string"==typeof e&&e.startsWith(String.fromCharCode(0))){let o=0,i=360/user.name.length;for(let r of e)this.fillStyle=`hsl(${o}, 100%, 50%)`,fillText.call(this,r,t,a),t+=this.measureText(r).width,o=(o+i)%360;return}return fillText.apply(this,arguments)};

let settingMenu=`<div id="settingMenu" class="pop-box"><div class="menu-title"><div class="pop-title text-shadowed-4">Settings</div><div class="pop-close-button"><img id="setting-menu-close-button" class="pop-close" draggable="false" src="https://sploop.io/img/ui/close.png"></div></div><div class="navbar"><div class="nb-btn text-shadowed-3" id="hack" style="margin-right:10px;">Hack</div><div class="nb-btn text-shadowed-3" id="control">Control</div></div><div class="select pop-list-content scrollbar text-shadowed-3 content subcontent-bg" id="hat_menu_content" data-menu="1"></div><div class="select pop-list-content scrollbar text-shadowed-3 content subcontent-bg" id="hat_menu_content" data-menu="2" style="display:none;"><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">HealSpeed</p><input id="control-key" data-speed="heal" class="input text-shadowed-3" placeholder="Enter speed..." value="100"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">AddHealMS</p><input id="control-key" data-speed="addms" class="input text-shadowed-3" placeholder="Enter speed..." value="0"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">InstaKill</p><input id="control-key" data-key="instakill" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyR"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">CrystalGear</p><input id="control-key" data-key="crystalgear" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyT"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">BerserkerGear</p><input id="control-key" data-key="berserkergear" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyC"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">SpikeGear</p><input id="control-key" data-key="spikegear" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyG"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">Demolist</p><input id="control-key" data-key="Demolist" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyG"></div><div class="control-box"><p style="font-size:20px;font-weight:bold;color:white;">BoostHat</p><input id="control-key" data-key="boosthat" onKeyPress=SupressInput(event); class="input text-shadowed-3" placeholder="Enter key..." value="KeyB"></div></div></div><style>.control-box{padding:10px;display:flex;justify-content:space-between;width:100%;align-items:center}#control-key{width:180px;text-align:left;text-indent:16px;color:white;line-height:70px;height:40px;font-weight:600}.navbar{display:flex}.nb-btn{margin-top:5px;width:150px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 -3px 0 #333;border-radius:7px;background-color:rgb(40 45 34 / 60%);border:4px solid #141414;cursor:url(https://sploop.io/img/ui/cursor-pointer.png) 6 0, pointer}#hat_menu_content{padding:8px 0 0 0;margin-bottom:0px;margin-top:2.5px}.togglerButton{margin-left:auto;outline:none;border:4px solid #141414;padding:7px;font-size:16px;margin-right:5px;cursor:url(https://sploop.io/img/ui/cursor-pointer.png) 6 0, pointer;margin-top:auto;margin-bottom:auto;color:#fff;border-radius:10px;background-color:#96b943;box-shadow:inset 0 -5px 0 #809836}.togglerButton:hover{background-color:#b5de53;box-shadow:inset 0 -5px 0 #95af44}.name-desc{display:flex;flex-direction:column;padding-left:10px;margin-bottom:5px}.item-container{width:100%;display:flex;align-items:center;border-bottom:3px solid #141414;flex-direction:row;justify-content:space-between;padding-bottom:5px}.menu-title{width:100%;display:flex;justify-content:space-between;align-items:center}#settingMenu{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:367px;width:500px;display:none;opacity:1;background:rgba(40,45,34,.6);color:#fff}</style><script>function SupressInput($event){$event.preventDefault()}</script>`;

const __TOGGLERS__=[{name:"AutoHeal",desc:"Auto heals you",id:"autoheal",active:true,last:false},{name:"Optimized Heal",desc:"Optimizes autoheal in some cases",id:"optheal",active:false,last:false},{name:"AutoPush",desc:"Automatically pushes enemies into spikes",id:"autopush",active:true,last:false},{name:"AutoPlace",desc:"Optimizes and automates spike and trap placement",id:"autoplace",active:true,last:false},{name:"AutoSync",desc:"Optimized attacking & Auto hat switching",id:"autosync",active:true,last:false},{name:"AutoBreak",desc:"Automatically breaks out of traps",id:"autobreak",active:true,last:false},{name:"AutoRespawn",desc:"Auto respawn you",id:"autorespawn",active:false,last:false},{name:"UI",desc:"visibility of the UI",id:"ui",active:true,last:false},{name:"AutoChat",desc:"Sing cool song",id:"autochat",active:false,last:false},{name:"Tracers",desc:"Draw tracers to enemies",id:"tracers",active:true,last:false},{name:"AntiAFK",desc:"move every 5 seconds",id:"antiAFK",active:false,last:true}];

function __TOGGLER__(e,t,a,o,i){return`<div class="item-container" style="margin-top:4px; ${i?"border-bottom: none;":"border-bottom: 3px solid #141414;"}"><div class="name-desc"><p style="font-size:16px;font-weight:bold;color:white;">${e}</p><p style="font-size:14px;color:#d2c396;">${t}</p></div><button class="togglerButton text-shadowed-3" id="${a}" style="${o?"outline:none;":"background:#b94343;box-shadow:inset 0 -5px 0 #983636"}">${o?"Enabled":"Disabled"}</button></div>`}

function genTogglers(){__TOGGLERS__.forEach(t=>{$('[data-menu="1"]').append(__TOGGLER__(t.name,t.desc,t.id,t.active,t.last))})}

function addNotifications(e,t="#fff"){let a=(()=>"notification-"+~~(1e4*Math.random())+1)(),o=`<div class="box text-shadowed-3" id="${a}" style="display:block;opacity:0;"><span style="color:${t};">${e}</span></div>`;$(".notifications-holder").prepend(o),$("#"+a).show().animate({opacity:1},750),setTimeout(()=>{$("#"+a).animate({opacity:0},750,()=>{$("#"+a).remove()})},3e3)}

window.rContextMenu=()=>{let e=document.getElementsByTagName('*');for(let t=0;t<e.length;++t)e[t].oncontextmenu=null};

function cEl(e,t,a){addNotifications(`${a} <span style='color:${t?"#8ecc51":"#cc5151"}'>${t?"enabled":"disabled"}</span>`),$(e).css("background",!t?"#b94343":"#96b943"),$(e).css("box-shadow",!t?"inset 0 -5px 0 #983636":"inset 0 -5px 0 #809836"),$(e).text(!t?"Disabled":"Enabled"),$(e).hover(()=>{$(e).css("background",!t?"#de5353":"#b5de53"),$(e).css("box-shadow",!t?"inset 0 -5px 0 #af4444":"inset 0 -5px 0 #95af44")},function(){$(e).css("background",!t?"#b94343":"#96b943"),$(e).css("box-shadow",!t?"inset 0 -5px 0 #983636":"inset 0 -5px 0 #809836")})}

let changeLogMenu=`<div class="centerMenu"><div class="pop-box popup-fade-in" id="script-changelog" style="display:flex;"><div class="pop-top"><div class="pop-title text-shadowed-4" style="display:flex;align-items:center;"><a class="pointer" style="margin-right:5px;" href="https://discord.gg/EETcmmFgAt" target="_blank"><img class="pointer" draggable="false" src="img/ui/discord.png"></a>SploMod Clean ++</div><div class="pop-close-button"><img class="pop-close" id="close-script-cl" draggable="false" src="img/ui/close.png"></div></div><div class="pop-list-content scrollbar text-shadowed-3" id="changeLog-s"></div></div></div><style>.centerMenu{position:absolute;top:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background:rgb(39 66 35 / 60%);z-index:100;transform-origin:center}#script-changelog{width:615px;height:475px}</style>`;

let __CHANGELOGS__=[{version:"4.0.0",date:"2025-08-13",added:true,remove:false,fixed:true,addedContent:["Smart AutoPush with prediction and scoring","Mobile top-right menu button","Packet cap protection","Minor UI polish"],removedContent:[],fixedContent:["General stability and performance"]}];

function __CHANGELOG__(e,t,a,o,i,r,n,s){let l="",d="",u="",p='<li class="subcontent-subtitle">Added</li>',h='<li class="subcontent-subtitle">Removed</li>',m='<li class="subcontent-subtitle">Fixed</li>',g=()=>{let y="";for(let w=0;w<r.length;w++)y+=`<li>- ${r[w]}</li>`;return y},f=()=>{let y="";for(let w=0;w<n.length;w++)y+=`<li>- ${n[w]}</li>`;return y},v=()=>{let y="";for(let w=0;w<s.length;w++)y+=`<li>- ${s[w]}</li>`;return y};a&&(l=`<ul>${g()}<br></ul>`),o&&(d=`<ul>${f()}<br></ul>`),i&&(u=`<ul>${v()}<br></ul>`);return`<ul class="subcontent-bg"><li class="subcontent-title">[${e}] - ${t}</li><ol>${a?p+l:""}${o?h+d:""}${i?m+u:""}</ol></ul>`}

function genChangeLogs(){__CHANGELOGS__.forEach(cl=>{$("#changeLog-s").append(__CHANGELOG__(cl.version,cl.date,cl.added,cl.remove,cl.fixed,cl.addedContent,cl.removedContent,cl.fixedContent))})}

let changeLog=true;function controlSaver(){let e=["bha","sga","bga","cga","ika","dem"],t=["boosthat","spikegear","berserkergear","crystalgear","instakill","Demolist"];for(let a=0;a<t.length;a++)document.querySelector(`[data-key="${t[a]}"]`).value=localStorage.getItem(e[a])||document.querySelector(`[data-key="${t[a]}"]`).value;document.querySelector('[data-speed="heal"]').value=localStorage.getItem("heal")||document.querySelector('[data-speed="heal"]').value,document.querySelector('[data-speed="addms"]').value=localStorage.getItem("addms")||document.querySelector('[data-speed="addms"]').value}

document.addEventListener("DOMContentLoaded",()=>{$("body").append(settingMenu),$("body").append(changeLogMenu),$("#close-script-cl").click(()=>$(".centerMenu").css("display","none"));let e=[false,document.querySelector('[data-key="boosthat"]')],t=[false,document.querySelector('[data-key="Demolist"]')],a=[false,document.querySelector('[data-key="spikegear"]')],o=[false,document.querySelector('[data-key="berserkergear"]')],i=[false,document.querySelector('[data-key="crystalgear"]')],r=[false,document.querySelector('[data-key="instakill"]')];document.querySelector('[data-speed="heal"]').oninput=s=>(s.target.value=s.target.value.replace(/\D/g,''),localStorage.setItem("heal",document.querySelector('[data-speed="heal"]').value));document.querySelector('[data-speed="addms"]').oninput=s=>(s.target.value=s.target.value.replace(/\D/g,''),localStorage.setItem("addms",document.querySelector('[data-speed="addms"]').value));e[1].onclick=()=> (e[1].value="...",e[0]=true);t[1].onclick=()=> (t[1].value="...",t[0]=true);a[1].onclick=()=> (a[1].value="...",a[0]=true);o[1].onclick=()=> (o[1].value="...",o[0]=true);i[1].onclick=()=> (i[1].value="...",i[0]=true);r[1].onclick=()=> (r[1].value="...",r[0]=true);document.addEventListener("keydown",s=>{e[0]&&(e[0]=false,e[1].value=s.code,localStorage.setItem("bha",s.code));t[0]&&(t[0]=false,t[1].value=s.code,localStorage.setItem("dem",s.code));a[0]&&(a[0]=false,a[1].value=s.code,localStorage.setItem("sga",s.code));o[0]&&(o[0]=false,o[1].value=s.code,localStorage.setItem("bga",s.code));i[0]&&(i[0]=false,i[1].value=s.code,localStorage.setItem("cga",s.code));r[0]&&(r[0]=false,r[1].value=s.code,localStorage.setItem("ika",s.code))});genChangeLogs(),controlSaver(),changeLog&&($(".centerMenu").css("display","flex"),changeLog=false),genTogglers(),$("#autoheal").click(()=> (Toggle.autoHeal=!Toggle.autoHeal,cEl("#autoheal",Toggle.autoHeal,"AutoHeal"))),$("#autopush").click(()=> (Toggle.autoPush=!Toggle.autoPush,cEl("#autopush",Toggle.autoPush,"AutoPush"))),$("#autosync").click(()=> (Toggle.autoSync=!Toggle.autoSync,cEl("#autosync",Toggle.autoSync,"AutoSync"))),$("#autoplace").click(()=> (Toggle.autoPlace=!Toggle.autoPlace,cEl("#autoplace",Toggle.autoPlace,"AutoPlace"))),$("#autobreak").click(()=> (Toggle.autoBreak=!Toggle.autoBreak,cEl("#autobreak",Toggle.autoBreak,"AutoBreak"))),$("#autochat").click(()=> (Toggle.autoChat=!Toggle.autoChat,cEl("#autochat",Toggle.autoChat,"AutoChat"))),$("#tracers").click(()=> (Toggle.tracers=!Toggle.tracers,cEl("#tracers",Toggle.tracers,"Tracers"))),$("#autorespawn").click(()=> (Toggle.autoRespawn=!Toggle.autoRespawn,cEl("#autorespawn",Toggle.autoRespawn,"AutoRespawn"))),$("#optheal").click(()=> (Toggle.optHeal=!Toggle.optHeal,cEl("#optheal",Toggle.optHeal,"OptimizedAutoheal"))),$("#ui").click(()=> (Toggle.UI=!Toggle.UI,cEl("#ui",Toggle.UI,"UI"))),$("#antiAFK").click(()=> (Toggle.antiAFK=!Toggle.antiAFK,cEl("#antiAFK",Toggle.antiAFK,"antiAFK"))),$("#setting-menu-close-button").click(()=>{$("#settingMenu").css("display","none")}),$("#hack").click(()=>{$('[data-menu="1"]').css("display","block"),$('[data-menu="2"]').css("display","none")}),$("#control").click(()=>{$('[data-menu="1"]').css("display","none"),$('[data-menu="2"]').css("display","block")}),document.addEventListener("keydown",s=>{"Escape"==s.code&&("flex"==$("#settingMenu").css("display")?$("#settingMenu").css("display","none"):($("#settingMenu").css("display","flex"),$("#clan-menu").css("display","none"),$("#hat-menu").css("display","none")))}),setInterval(()=>{"block"==$("#clan-menu").css("display")||"flex"==$("#hat-menu").css("display")?$("#settingMenu").css("display","none"):0,"flex"==$("#homepage").css("display")?$("#settingMenu").css("display","none"):0},500);

const mobileMenuBtn=document.createElement("button");mobileMenuBtn.textContent="â˜°";Object.assign(mobileMenuBtn.style,{position:"absolute",top:"10px",right:"10px",background:"white",border:"2px solid #000",borderRadius:"50%",width:"40px",height:"40px",zIndex:"10000",fontSize:"20px",cursor:"pointer",lineHeight:"36px",textAlign:"center"});mobileMenuBtn.addEventListener("click",()=>{const m=document.getElementById("settingMenu");m.style.display="flex"===m.style.display?"none":"flex"});document.body.appendChild(mobileMenuBtn);
});
})();
