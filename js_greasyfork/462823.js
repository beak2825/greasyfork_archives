// ==UserScript==
// @name         Auto Task Config Demo
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAFyklEQVR4nO2dS2hdRRiAv5vbSsREDK3FlagYDTSlYkVw0aK4lqpJtLZa0zR0W+1KLVhBqETQrQsfTVoffQgqdFuU6kYRpTVKHyiC0GLaxIpdVNPcuJh7Md6c3jv/nHmdnPng36Snc/4z353HmfOqUD5WAeuBfqAPuAvoAW4CuurbXAYuAX8Ap4FTwI/AceCC53yXJOuAN4AfgBowbxg14GS9rHu9HsESoBvYBUxiLqBdTALP81/LSmTQA+wBpnEnojkuAi+jur1EnQqwFfgdfyKaYxrYUc+l1NyOGnBDiWiOL4DbnB5xxGwEZggvoTn+BIYcHnd0VIAxwld8q6gBeylBF1YF3iF8hevGfmC5k5qIgOXAZ4SvZGl8Cixrd3BFa0oVYBw1m8rDX8CXqInAJHAWdQZ+uf7vXcDNQC+wBnVmvx51bpOHcWAEJWhJkGfMqAFHgQGg02DfncBgvYw8Z/uvGew7Sh7HvBIOAqst5tIPHDLMpQY8ajGXINyBWuiTHvxp4EGHeT1U34c0rxkKfJ5Sweykbz9+1pi6gAMG+X1O8cZwAIaRdwmvBMhzJ/KxZUuAPHPRA0yhf4BzwGiQTBU7kEk5D9wYJFND9iD7xW0Pk+b/eAFZzrvDpCmnG/kS+rtAR4hkm5CMKReAG8KkKWMX8oEyFildyGZfz4VJU8ZJzITMA+8RXsoG9MeTyUA5arMOcxkxtZTD6Od7T6ActXiT/EJikNKPfit5PVCOWuTprmKTcvQaeTXH96ESbMcq8i3exTamDGnmOAesDJRjSwawKyN0S+lELffr5PhY6EEvi35H5Y6grjL6PuYrwFea266OUcjdDsveBryNfynHNbfrc5qFId/ipssK2X09opnXNx5z0uZX3AvxLaVPM6dfPOUjwuctoL5mXys084nyzvq/8SfEl5TrNHO54jgPI/7BrxAfUgotxOTaeexSCt1l/UYYIfO4G+i1B/UYz0POBdz3CG7OU3o1t7sYo5CfA+/fhRTd1YczSUg2tqVs0NzulKX9WWUj4cYQF2PK9QgWF3Puywkrsb/8HnL2Vfjld4CfCC/CVkvRvUD1nWH5XthLeAk2pKxBv7WPCcv2yn2EF2BDyhFB2WsF5Xqn8VBLjKEr5WFBmSdk1eOXbagBLnTF55HSDZwRlLfToJ68UAQZOlLeF5QzRaS3kg5THBmNyJoS7xaW8WKOOnNGEWVktZRRZOdQ58j/IKl1iixjoZTtBsex2UL9WeVZii/DNI5ZqD+rbAKuEr5iQkR0D32WWUZ0j0Vvpbzd1Dzwav4qtEeZW8Y86lG3aB6FfoZyy/gEjZfP+GITMEv4SgkVE0T0eiZpyzCd08cYNdSYEU039SSylrFwKaJI61pZcQn19qBoeBpZy8haFxoV/P+Y4hhwq3HNOUDaMvaxWEYFeEtQRgxxHjWtj6aLAnnLyJLRgWoxoStYN6aAl4hwoXAL8clwOQ6dQF1civJ6hlTGONky9gnKaBezqIH1TtRLYb4m3/R7DnV3yBiOroHb6us2o14YVtXcfgJ13by24G8dqCnvsKWcrgJPAR83/b0LeAC4H3XPbS9wC+pVUI1feuNzFTMs/lzFtKX8nPEEsl/dRywW14FqMbZaRkNG6UgyIiLJiAgTGc0La0mGJYaQyThIkuEMGzKqJBlWsCVjQlBGqyg1sckotRDpQuEBFs+mqqgTR1syZl0caBEYRCbjEO5bRmnHjCQjImzJsNlNJRmakWQ4JMmIiEFkb+JxLaPUDBCXjFILkXZTWau2VeADQRntorTnGWBHxoeCMnRkRHU/k290K+ow2d2UyfeXrhWlHcAXkmRERpIRGa0q6ghJhneSjMiQyJC8oSDJMMSXjIQmvlpGQpOFMpofu7LZTSU0aSXD5nJIQpOsbmoZ5t8Lz4pSr01JyZIh+f6ejoxSr03lwXY3laa2OUgyIiMtoUeG9KphahkeyCslyXCAqZQkwwL/Ag+tV8ginTZwAAAAAElFTkSuQmCC
// @namespace    https://github.com/giveme0101/
// @version      3.1.3
// @description  自动任务配置文件示例
// @author       Kevin xiajun94@foxmail.com
// @require      https://greasyfork.org/scripts/462822-auto-task-framework/code/AutoTaskFramework.js
// @include      https://cn.bing.com/*
// @include      https://note.youdao.com/*
// @include      https://www.dqzboy.com/*.html
// @include      https://www.json.cn/*
// @include      https://www.sojson.com/*
// @include      https://www.zhihu.com/*
// @include      https://zhuanlan.zhihu.com/*
// @include      https://blog.csdn.net/*
// @include      https://www.processon.com/*
// @include      https://blog.csdn.net/*
// @run-at       document-idles
// @noframes
// @downloadURL https://update.greasyfork.org/scripts/462823/Auto%20Task%20Config%20Demo.user.js
// @updateURL https://update.greasyfork.org/scripts/462823/Auto%20Task%20Config%20Demo.meta.js
// ==/UserScript==

autoTask.run([
    {
        "name": "fuck dqzboy",
        "desc": "remove block image",
        "host" : "www.dqzboy.com",
        "test": true,
        "param": {},
        "action": function(param){
            document.querySelectorAll(".wp-block-image").forEach(e => e.classList.remove("wp-block-image"))
        }
    },
    {
        "name": "fuck note.youdao",
        "desc": "remove ads",
        "host" : "note.youdao.com",
        "test": true,
        "param": {},
        "action": function(param){
            let cnt = 1, scanInterval = setInterval(function(){
                const adComponent = document.querySelector("ad-component");
                const adCount = adComponent ? adComponent.childElementCount : 0;
                const listContainer = document.querySelector(".list-bd");
                if ((adCount > 0 && listContainer) || cnt++ >= 100){
                    adCount > 0 && (adComponent.remove(), listContainer.style.setProperty('top', '110px', 'important'));
                    clearInterval(scanInterval);
                }
            }, 30);
        }
    },{
        "name": "Clear Bing",
        "desc": "去除cn.bing国内版搜索广告、小冰侧边栏和首页的热门资讯",
        "host" : "cn.bing.com",
        "test": true,
        "param": {},
        "action": function(param){
              setTimeout(function(){

                  // 去广告Ⅰ
                  var ads = document.querySelectorAll('.b_ad');
                  ads = Array.prototype.slice.apply(ads);
                  ads.map(function (ad) {
                      ad.remove();
                  });

                  // 去广告Ⅱ
                  const adList = document.querySelectorAll(".b_caption");
                  for (let idx = 0; idx < adList.length; idx++){
                      try {
                          let adEle = adList[idx].children[1];
                          let adBgUrl = window.getComputedStyle(adEle, '::before').getPropertyValue("content");
                          if (adBgUrl !== 'none'){
                              adList[idx].parentNode.remove();
                          }
                      } catch(e) {}
                  }

                  // 去小冰
                  const bing = document.querySelector("#ev_talkbox_wrapper");
                  bing && bing.remove();

                  // 去除热门资讯
                  t2lKit.eleHide("fluent-design-system-provider");

                  // 去除下载app
                  t2lKit.eleHide("#id_qrcode");

                  // outlook移出来
                  document.querySelector("#video").querySelector("a").setAttribute("href", "//outlook.com/?WT.mc_id=O16_BingHP");
                  document.querySelector("#video").querySelector("a").innerText = "Outlook";
                  new MutationObserver(function(mutationsList, observer) {
                      for (const mutation of mutationsList) {
                         if ((mutation.type === 'childList' || mutation.type === 'characterData') && mutation.target.innerText != "Outlook"){
                              mutation.target.innerText = "Outlook";
                          }
                      }
                  }).observe(document.querySelector("#video").querySelector("a"), { childList: true, subtree: true, characterData: true })

                   // 英文
                  new MutationObserver(function(mutationsList, observer) {
                      for (const mutation of mutationsList) {
                           if ((mutation.type === 'characterData'|| mutation.type === 'childList') && mutation.target.innerHTML != 'Domestic'){
                                   mutation.target.innerHTML = "Domestic";
                                   document.querySelector("#est_en").innerHTML = "International";

                           }
                      }
                  }).observe(document.getElementById('est_cn'), { childList: true, subtree: true, characterData: true })
                  document.querySelector("#est_cn").innerHTML = "Domestic";
                  document.querySelector("#est_en").innerHTML = "International";

              }, 800);
        }
    },{
       "name" : "json.cn",
       "desc" : "去广告",
       "host" : "www.json.cn",
       "test" : true,
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".footer-gg-b-addr");
           t2lKit.eleHide(".show-hide-adv");
           t2lKit.eleHide(document.querySelector("main").querySelector("ul"));
       }
   },{
       "name" : "sojson.com",
       "desc" : "去广告",
       "host" : "www.sojson.com",
       "test" : true,
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".banner-container");
       }
   },{
       "name" : "zhihu.com",
       "desc" : "去登录",
       "host" : ["zhuanlan.zhihu.com","zhihu.com"],
       "test" : true,
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".Modal-wrapper", function(){
               document.querySelector("html").style = "";
           });
           t2lKit.eleHide(".css-1wq6v87");
       }
   },{
       "name" : "csdn.net",
       "desc" : "去登录",
       "host" : "blog.csdn.net",
       "test" :  true,
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".passport-login-container");
           t2lKit.eleHide(".passport-login-tip-container");
           t2lKit.eleHide(".csdn-side-toolbar");
       }
   },{
       "name" : "processOn",
       "desc" : "去广告",
       "host" : "www.processon.com",
       "test" : true,
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".upgradate-btn");
           t2lKit.eleHide(".advert-child");
           t2lKit.eleHide(".btns");
           t2lKit.eleHide(".carsouselBox");
       }
   },{
       "name" : "csdn",
       "desc" : "免关注",
       "host" : "blog.csdn.net",
       "test" : function(){
           return document.querySelector(".hide-article-box");
       },
       "param": {},
       "action": function(param){
           t2lKit.eleHide(".hide-article-box");
           setTimeout(function(){
               document.querySelector("#article_content").setAttribute('style', 'overflow:hidden');
           }, 400);
       }
   }
]);