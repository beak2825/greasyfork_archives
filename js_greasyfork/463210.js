// ==UserScript==
// @name           宜搭工具箱
// @namespace      yida-plugin-yiye
// @version        2.1.4.4
// @author         页一(原创)
// @description:0  宜搭组件ieldId接口代码快捷复制图片压缩一键配置表格列一键插入远程数据源,优化宜搭体验
// @license        MIT
// @icon           https://img.alicdn.com/imgextra/i3/O1CN01Bqjz5u1tuBe2IKv8V_!!6000000005961-73-tps-128-128.ico
// @match          https://*.aliwork.com/*
// @match          https://card.dingtalk.com/editor*
// @grant          GM_addStyle
// @grant          unsafeWindow
// @description 宜搭组件\fieldId\接口\代码快捷复制\图片压缩\一键配置表格列\一键插入远程数据源,优化宜搭体验
// @downloadURL https://update.greasyfork.org/scripts/463210/%E5%AE%9C%E6%90%AD%E5%B7%A5%E5%85%B7%E7%AE%B1.user.js
// @updateURL https://update.greasyfork.org/scripts/463210/%E5%AE%9C%E6%90%AD%E5%B7%A5%E5%85%B7%E7%AE%B1.meta.js
// ==/UserScript==

(function (p) {
	'use strict';

	var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&s(e,n,t[n]);return e},c=(e,i)=>t(e,n(i)),d=(e,t,n)=>new Promise(((i,r)=>{var o=e=>{try{s(n.next(e));}catch(t){r(t);}},a=e=>{try{s(n.throw(e));}catch(t){r(t);}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);s((n=n.apply(e,t)).next());}));var u,m,h=(u={"main-744b539d.js"(e){function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={exports:{}},i={},r=p,o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,n){var i,r={},a=null,l=null;for(i in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,i)&&!m.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return {$$typeof:o,type:e,key:a,ref:l,props:r,_owner:u.current}}i.Fragment=a,i.jsx=h,i.jsxs=h,n.exports=i;var f=n.exports,g=(()=>"undefined"!=typeof GM_addStyle?GM_addStyle:void 0)(),y=(()=>"undefined"!=typeof unsafeWindow?unsafeWindow:void 0)();const{Icon:x}=y.Deep||{};let v;x&&(v=x.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/c/font_4414352_vo25wbhv3np.js"}));const{Deep:w={},AliLowCodeEngine:b}=y,j=b,{Message:F}=w,T=e=>new Promise(((t,n)=>{const i=document.createElement("script");i.src=e,i.type="text/javascript",i.onload=()=>{t(i);},i.onerror=t=>{n(new Error(`Failed to load script ${e}: ${t}`));},document.head.appendChild(i);})),I={fc(e,t,n=1e3){F.show({type:t,duration:n,title:e});},success(e){this.fc(e,"success");},error(e,t){this.fc(e,"error",t);},notice(e,t){this.fc(e,"notice",t);}};function C(){const{skeleton:e}=j,t=e.getPanel("yeyiTools");t&&t.hide();}const S=function(e,t=!0,n=""){navigator.clipboard.writeText(e).then((function(){I.success((n&&n+" ")+"复制成功"),t&&C();}),(function(){I.error("复制失败");}));},D=(e,t)=>{y.localStorage.setItem(e,t);},E=e=>y.localStorage.getItem(e),O={padding:"10px",margin:"10px",borderStyle:"solid",borderWidth:"1px",borderColor:"rgba(31,56,88,0.2)",borderRadius:"8px",overflowY:"auto",maxHeight:"calc(100vh - 150px)"},k=e=>{const t=[{name:"图片压缩",code:'{"type":"nodeSchema","componentsMap":{},"componentsTree":[{"componentName":"Jsx","props":{"render":{"type":"js","compiled":"function main(){\\n    \\n    \\"use strict\\";\\n\\nvar __compiledFunc__ = function render() {\\n  var _this = this;\\n\\n  //{id=a100001}//\\n  //$$\\nvar setting={\\"quality\\":0.8,\\"maxHeight\\":1200,\\"maxWidth\\":1000};\\n//$$\\n  /*** 压缩组件 by 页一*/\\n  window.Compressor = function () {\\n    \\"use strict\\";\\n    function t(t, e) {\\n      var r,\\n          i = Object.keys(t);return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function (e) {\\n        return Object.getOwnPropertyDescriptor(t, e).enumerable;\\n      })), i.push.apply(i, r)), i;\\n    }function a(i) {\\n      for (var e = 1; e < arguments.length; e++) {\\n        var a = null != arguments[e] ? arguments[e] : {};e % 2 ? t(Object(a), !0).forEach(function (e) {\\n          var t, r;t = i, e = a[r = e], r in t ? Object.defineProperty(t, r, { value: e, enumerable: !0, configurable: !0, writable: !0 }) : t[r] = e;\\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(a)) : t(Object(a)).forEach(function (e) {\\n          Object.defineProperty(i, e, Object.getOwnPropertyDescriptor(a, e));\\n        });\\n      }return i;\\n    }function n(e, t) {\\n      for (var r = 0; r < t.length; r++) {\\n        var i = t[r];i.enumerable = i.enumerable || !1, i.configurable = !0, \\"value\\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\\n      }\\n    }function s() {\\n      return (s = Object.assign || function (e) {\\n        for (var t = 1; t < arguments.length; t++) {\\n          var r,\\n              i = arguments[t];for (r in i) {\\n            Object.prototype.hasOwnProperty.call(i, r) && (e[r] = i[r]);\\n          }\\n        }return e;\\n      }).apply(this, arguments);\\n    }var e,\\n        r,\\n        o,\\n        l,\\n        c,\\n        h,\\n        u,\\n        f,\\n        i = { exports: {} };e = i, \\"undefined\\" != typeof window && (o = (r = window).HTMLCanvasElement && r.HTMLCanvasElement.prototype, l = r.Blob && function () {\\n      try {\\n        return Boolean(new Blob());\\n      } catch (e) {\\n        return !1;\\n      }\\n    }(), c = l && r.Uint8Array && function () {\\n      try {\\n        return 100 === new Blob([new Uint8Array(100)]).size;\\n      } catch (e) {\\n        return !1;\\n      }\\n    }(), h = r.BlobBuilder || r.WebKitBlobBuilder || r.MozBlobBuilder || r.MSBlobBuilder, u = /^data:((.*?)(;charset=.*?)?)(;base64)?,/, f = (l || h) && r.atob && r.ArrayBuffer && r.Uint8Array && function (e) {\\n      var t,\\n          r,\\n          i,\\n          a,\\n          n,\\n          o = e.match(u);if (!o) throw new Error(\\"invalid data URI\\");for (t = o[2] ? o[1] : \\"text/plain\\" + (o[3] || \\";charset=US-ASCII\\"), i = !!o[4], o = e.slice(o[0].length), r = (i ? atob : decodeURIComponent)(o), i = new ArrayBuffer(r.length), a = new Uint8Array(i), n = 0; n < r.length; n += 1) {\\n        a[n] = r.charCodeAt(n);\\n      }return l ? new Blob([c ? a : i], { type: t }) : ((o = new h()).append(i), o.getBlob(t));\\n    }, r.HTMLCanvasElement && !o.toBlob && (o.mozGetAsFile ? o.toBlob = function (e, t, r) {\\n      var i = this;setTimeout(function () {\\n        r && o.toDataURL && f ? e(f(i.toDataURL(t, r))) : e(i.mozGetAsFile(\\"blob\\", t));\\n      });\\n    } : o.toDataURL && f && (o.msToBlob ? o.toBlob = function (e, t, r) {\\n      var i = this;setTimeout(function () {\\n        (t && \\"image/png\\" !== t || r) && o.toDataURL && f ? e(f(i.toDataURL(t, r))) : e(i.msToBlob(t));\\n      });\\n    } : o.toBlob = function (e, t, r) {\\n      var i = this;setTimeout(function () {\\n        e(f(i.toDataURL(t, r)));\\n      });\\n    })), e.exports ? e.exports = f : r.dataURLtoBlob = f);function j(e) {\\n      return 0 < e && e < 1 / 0;\\n    }var T = i.exports,\\n        d = { strict: !0, checkOrientation: !0, maxWidth: 1 / 0, maxHeight: 1 / 0, minWidth: 0, minHeight: 0, width: void 0, height: void 0, resize: \\"none\\", quality: .8, mimeType: \\"auto\\", convertTypes: [\\"image/png\\"], convertSize: 5e6, beforeDraw: null, drew: null, success: null, error: null },\\n        m = \\"undefined\\" != typeof window && void 0 !== window.document ? window : {},\\n        p = Array.prototype.slice;var b = /^image\\\\/.+$/;function R(e) {\\n      return b.test(e);\\n    }var g = String.fromCharCode;var y = m.btoa;function w(e, t) {\\n      for (var r, i = [], a = new Uint8Array(e); 0 < a.length;) {\\n        i.push(g.apply(null, (r = a.subarray(0, 8192), Array.from ? Array.from(r) : p.call(r)))), a = a.subarray(8192);\\n      }return \\"data:\\".concat(t, \\";base64,\\").concat(y(i.join(\\"\\")));\\n    }function v(e) {\\n      var t,\\n          r,\\n          i,\\n          a,\\n          n,\\n          o,\\n          s,\\n          l = new DataView(e);try {\\n        if (255 === l.getUint8(0) && 216 === l.getUint8(1)) for (var c = l.byteLength, h = 2; h + 1 < c;) {\\n          if (255 === l.getUint8(h) && 225 === l.getUint8(h + 1)) {\\n            r = h;break;\\n          }h += 1;\\n        }if (r && (a = r + 10, \\"Exif\\" === function (e, t, r) {\\n          var i,\\n              a = \\"\\";for (r += t, i = t; i < r; i += 1) {\\n            a += g(e.getUint8(i));\\n          }return a;\\n        }(l, r + 4, 4) && (!(s = 18761 === (n = l.getUint16(a))) && 19789 !== n || 42 !== l.getUint16(a + 2, s) || 8 <= (o = l.getUint32(a + 4, s)) && (i = a + o))), i) for (var u, f = l.getUint16(i, s), d = 0; d < f; d += 1) {\\n          if (u = i + 12 * d + 2, 274 === l.getUint16(u, s)) {\\n            u += 8, t = l.getUint16(u, s), l.setUint16(u, 1, s);break;\\n          }\\n        }\\n      } catch (e) {\\n        t = 1;\\n      }return t;\\n    }var U = /\\\\.\\\\d*(?:0|9){12}\\\\d*$/;function k(e, t) {\\n      t = 1 < arguments.length && void 0 !== t ? t : 1e11;return U.test(e) ? Math.round(e * t) / t : e;\\n    }function x(e, t) {\\n      var r = e.aspectRatio,\\n          i = e.height,\\n          a = e.width,\\n          n = 1 < arguments.length && void 0 !== t ? t : \\"none\\",\\n          o = j(a),\\n          e = j(i);return o && e ? (t = i * r, (\\"contain\\" === n || \\"none\\" === n) && a < t || \\"cover\\" === n && t < a ? i = a / r : a = i * r) : o ? i = a / r : e && (a = i * r), { width: a, height: i };\\n    }var O = m.ArrayBuffer,\\n        B = m.FileReader,\\n        A = m.URL || m.webkitURL,\\n        M = /\\\\.\\\\w+$/,\\n        D = m.Compressor;return function () {\\n      function r(e, t) {\\n        !function (e, t) {\\n          if (!(e instanceof t)) throw new TypeError(\\"Cannot call a class as a function\\");\\n        }(this, r), this.file = e, this.image = new Image(), this.options = a(a({}, d), t), this.aborted = !1, this.result = null, this.init();\\n      }var e, t, i;return e = r, i = [{ key: \\"noConflict\\", value: function value() {\\n          return window.Compressor = D, r;\\n        } }, { key: \\"setDefaults\\", value: function value(e) {\\n          s(d, e);\\n        } }], (t = [{ key: \\"init\\", value: function value() {\\n          var i,\\n              e,\\n              a,\\n              n = this,\\n              o = this.file,\\n              t = this.options;e = o, \\"undefined\\" != typeof Blob && (e instanceof Blob || \\"[object Blob]\\" === Object.prototype.toString.call(e)) ? R(i = o.type) ? A && B ? (O || (t.checkOrientation = !1), A && !t.checkOrientation ? this.load({ url: A.createObjectURL(o) }) : (e = new B(), a = t.checkOrientation && \\"image/jpeg\\" === i, (this.reader = e).onload = function (e) {\\n            var t = e.target.result,\\n                r = {};a ? 1 < (e = v(t)) || !A ? (r.url = w(t, i), 1 < e && s(r, function (e) {\\n              var t = 0,\\n                  r = 1,\\n                  i = 1;switch (e) {case 2:\\n                  r = -1;break;case 3:\\n                  t = -180;break;case 4:\\n                  i = -1;break;case 5:\\n                  t = 90, i = -1;break;case 6:\\n                  t = 90;break;case 7:\\n                  t = 90, r = -1;break;case 8:\\n                  t = -90;}return { rotate: t, scaleX: r, scaleY: i };\\n            }(e))) : r.url = A.createObjectURL(o) : r.url = t, n.load(r);\\n          }, e.onabort = function () {\\n            n.fail(new Error(\\"Aborted to read the image with FileReader.\\"));\\n          }, e.onerror = function () {\\n            n.fail(new Error(\\"Failed to read the image with FileReader.\\"));\\n          }, e.onloadend = function () {\\n            n.reader = null;\\n          }, a ? e.readAsArrayBuffer(o) : e.readAsDataURL(o))) : this.fail(new Error(\\"The current browser does not support image compression.\\")) : this.fail(new Error(\\"The first argument must be an image File or Blob object.\\")) : this.fail(new Error(\\"The first argument must be a File or Blob object.\\"));\\n        } }, { key: \\"load\\", value: function value(e) {\\n          var t = this,\\n              r = this.file,\\n              i = this.image;i.onload = function () {\\n            t.draw(a(a({}, e), {}, { naturalWidth: i.naturalWidth, naturalHeight: i.naturalHeight }));\\n          }, i.onabort = function () {\\n            t.fail(new Error(\\"Aborted to load the image.\\"));\\n          }, i.onerror = function () {\\n            t.fail(new Error(\\"Failed to load the image.\\"));\\n          }, m.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent) && (i.crossOrigin = \\"anonymous\\"), i.alt = r.name, i.src = e.url;\\n        } }, { key: \\"draw\\", value: function value(e) {\\n          var t = this,\\n              r = e.naturalWidth,\\n              i = e.naturalHeight,\\n              a = e.rotate,\\n              n = void 0 === a ? 0 : a,\\n              o = e.scaleX,\\n              s = void 0 === o ? 1 : o,\\n              l = e.scaleY,\\n              c = void 0 === l ? 1 : l,\\n              h = this.file,\\n              u = this.image,\\n              f = this.options,\\n              d = document.createElement(\\"canvas\\"),\\n              m = d.getContext(\\"2d\\"),\\n              p = Math.abs(n) % 180 == 90,\\n              b = (\\"contain\\" === f.resize || \\"cover\\" === f.resize) && j(f.width) && j(f.height),\\n              g = Math.max(f.maxWidth, 0) || 1 / 0,\\n              y = Math.max(f.maxHeight, 0) || 1 / 0,\\n              w = Math.max(f.minWidth, 0) || 0,\\n              a = Math.max(f.minHeight, 0) || 0,\\n              o = r / i,\\n              e = f.width,\\n              l = f.height;p && (g = (v = [y, g])[0], y = v[1], w = (v = [a, w])[0], a = v[1], e = (v = [l, e])[0], l = v[1]);var v = x({ aspectRatio: o = b ? e / l : o, width: g, height: y }, \\"contain\\");g = v.width, y = v.height;v = x({ aspectRatio: o, width: w, height: a }, \\"cover\\");w = v.width, a = v.height, l = b ? (e = (v = x({ aspectRatio: o, width: e, height: l }, f.resize)).width, v.height) : (e = void 0 === (O = (U = x({ aspectRatio: o, width: e, height: l })).width) ? r : O, void 0 === (O = U.height) ? i : O);var U = -(e = Math.floor(k(Math.min(Math.max(e, w), g)))) / 2,\\n              O = -(l = Math.floor(k(Math.min(Math.max(l, a), y)))) / 2,\\n              w = e,\\n              g = l,\\n              a = [];b && (y = (o = x({ aspectRatio: o, width: y = r, height: b = i }, { contain: \\"cover\\", cover: \\"contain\\" }[f.resize])).width, b = o.height, a.push((r - y) / 2, (i - b) / 2, y, b)), a.push(U, O, w, g), p && (e = (B = [l, e])[0], l = B[1]), d.width = e, d.height = l, R(f.mimeType) || (f.mimeType = h.type);var B = \\"transparent\\";h.size > f.convertSize && 0 <= f.convertTypes.indexOf(f.mimeType) && (f.mimeType = \\"image/jpeg\\"), \\"image/jpeg\\" === f.mimeType && (B = \\"#fff\\"), m.fillStyle = B, m.fillRect(0, 0, e, l), f.beforeDraw && f.beforeDraw.call(this, m, d), this.aborted || (m.save(), m.translate(e / 2, l / 2), m.rotate(n * Math.PI / 180), m.scale(s, c), m.drawImage.apply(m, [u].concat(a)), m.restore(), f.drew && f.drew.call(this, m, d), this.aborted || (m = function m(e) {\\n            t.aborted || t.done({ naturalWidth: r, naturalHeight: i, result: e });\\n          }, d.toBlob ? d.toBlob(m, f.mimeType, f.quality) : m(T(d.toDataURL(f.mimeType, f.quality)))));\\n        } }, { key: \\"done\\", value: function value(e) {\\n          var t = e.naturalWidth,\\n              r = e.naturalHeight,\\n              i = e.result,\\n              a = this.file,\\n              n = this.image,\\n              e = this.options;A && !e.checkOrientation && A.revokeObjectURL(n.src), !i || e.strict && i.size > a.size && e.mimeType === a.type && !(e.width > t || e.height > r || e.minWidth > t || e.minHeight > r || e.maxWidth < t || e.maxHeight < r) ? i = a : (r = new Date(), i.lastModified = r.getTime(), i.lastModifiedDate = r, i.name = a.name, i.name && i.type !== a.type && (i.name = i.name.replace(M, (a = R(a = i.type) ? a.substr(6) : \\"\\", \\".\\".concat(a = \\"jpeg\\" === a ? \\"jpg\\" : a))))), this.result = i, e.success && e.success.call(this, i);\\n        } }, { key: \\"fail\\", value: function value(e) {\\n          var t = this.options;if (!t.error) throw e;t.error.call(this, e);\\n        } }, { key: \\"abort\\", value: function value() {\\n          this.aborted || (this.aborted = !0, this.reader ? this.reader.abort() : this.image.complete ? this.fail(new Error(\\"The compression process has been aborted.\\")) : (this.image.onload = null, this.image.onabort()));\\n        } }]) && n(e.prototype, t), i && n(e, i), r;\\n    }();\\n  }();\\n  var quality = setting.quality,\\n      maxWidth = setting.maxWidth,\\n      maxHeight = setting.maxHeight;\\n  var closeLoading = void 0;this.showLoading = function (title_str, s) {\\n    closeLoading = _this.utils.toast({ title: title_str, type: \'loading\', size: \'large\' });if (s !== 0) {\\n      setTimeout(function () {\\n        _this.hideLoading();\\n      }, s * 1000);\\n    }\\n  };this.hideLoading = function () {\\n    closeLoading && closeLoading();\\n  };this.compressImage = function (imageFile) {\\n    return new Promise(function (resolve, reject) {\\n      new Compressor(imageFile, { quality: quality, maxWidth: maxWidth, maxHeight: maxHeight, mimeType: \'image/jpeg\', success: function success(result) {\\n          if (result.size >= imageFile.size) {\\n            resolve(imageFile);\\n          }var newImageFile = new File([result], imageFile.name, { type: result.type });newImageFile.uid = imageFile.uid;resolve(newImageFile);\\n        },\\n        error: function error(err) {\\n          resolve(imageFile);\\n        }\\n      });\\n    });\\n  };this.batchCompression = function (selectedFiles, allFiles, imageFiledId) {\\n    var _this2 = this;\\n\\n    if (!window.Compressor) {\\n      return this.utils.toast(\'缺少压缩插件\');\\n    };this.showLoading(\'正在压缩图片\', 20);var selectedFD = this.$(imageFiledId);var compressPromises = selectedFiles.map(function (item) {\\n      return _this2.compressImage(item.originFileObj);\\n    });Promise.all(compressPromises).then(function (compressedFiles) {\\n      allFiles.forEach(function (rawFile) {\\n        var file = compressedFiles.find(function (compressFile) {\\n          return compressFile.uid === rawFile.uid;\\n        });if (file && file.type.split(\'/\')[0] === \'image\') {\\n          rawFile.name = file.name.replace(/.[^.]+$/, \\".\\" + file.type.split(\'/\')[1]);rawFile.size = file.size;rawFile.originFileObj = file;rawFile.type = file.type;\\n        }\\n      });selectedFD.setValue(allFiles);_this2.hideLoading();selectedFD.startUpload();\\n    }).catch(function (err) {\\n      console.error(err);\\n    });\\n  };return React.createElement(\\n    \\"div\\",\\n    { style: { display: \'none\' } },\\n    \\" \\\\u538B\\\\u7F29\\\\u7EC4\\\\u4EF6\\"\\n  );\\n};\\n    return __compiledFunc__.apply(this, arguments);\\n  }","source":"function render() {\\n  //{id=a100001}//\\n  //$$\\nvar setting={\\"quality\\":0.8,\\"maxHeight\\":1200,\\"maxWidth\\":1000};\\n//$$\\n  /*** 压缩组件 by 页一*/\\n  window.Compressor = (function () { \\"use strict\\"; function t(t, e) { var r, i = Object.keys(t); return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable })), i.push.apply(i, r)), i } function a(i) { for (var e = 1; e < arguments.length; e++) { var a = null != arguments[e] ? arguments[e] : {}; e % 2 ? t(Object(a), !0).forEach(function (e) { var t, r; t = i, e = a[r = e], r in t ? Object.defineProperty(t, r, { value: e, enumerable: !0, configurable: !0, writable: !0 }) : t[r] = e }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(a)) : t(Object(a)).forEach(function (e) { Object.defineProperty(i, e, Object.getOwnPropertyDescriptor(a, e)) }) } return i } function n(e, t) { for (var r = 0; r < t.length; r++) { var i = t[r]; i.enumerable = i.enumerable || !1, i.configurable = !0, \\"value\\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } function s() { return (s = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var r, i = arguments[t]; for (r in i) Object.prototype.hasOwnProperty.call(i, r) && (e[r] = i[r]) } return e }).apply(this, arguments) } var e, r, o, l, c, h, u, f, i = { exports: {} }; e = i, \\"undefined\\" != typeof window && (o = (r = window).HTMLCanvasElement && r.HTMLCanvasElement.prototype, l = r.Blob && function () { try { return Boolean(new Blob) } catch (e) { return !1 } }(), c = l && r.Uint8Array && function () { try { return 100 === new Blob([new Uint8Array(100)]).size } catch (e) { return !1 } }(), h = r.BlobBuilder || r.WebKitBlobBuilder || r.MozBlobBuilder || r.MSBlobBuilder, u = /^data:((.*?)(;charset=.*?)?)(;base64)?,/, f = (l || h) && r.atob && r.ArrayBuffer && r.Uint8Array && function (e) { var t, r, i, a, n, o = e.match(u); if (!o) throw new Error(\\"invalid data URI\\"); for (t = o[2] ? o[1] : \\"text/plain\\" + (o[3] || \\";charset=US-ASCII\\"), i = !!o[4], o = e.slice(o[0].length), r = (i ? atob : decodeURIComponent)(o), i = new ArrayBuffer(r.length), a = new Uint8Array(i), n = 0; n < r.length; n += 1)a[n] = r.charCodeAt(n); return l ? new Blob([c ? a : i], { type: t }) : ((o = new h).append(i), o.getBlob(t)) }, r.HTMLCanvasElement && !o.toBlob && (o.mozGetAsFile ? o.toBlob = function (e, t, r) { var i = this; setTimeout(function () { r && o.toDataURL && f ? e(f(i.toDataURL(t, r))) : e(i.mozGetAsFile(\\"blob\\", t)) }) } : o.toDataURL && f && (o.msToBlob ? o.toBlob = function (e, t, r) { var i = this; setTimeout(function () { (t && \\"image/png\\" !== t || r) && o.toDataURL && f ? e(f(i.toDataURL(t, r))) : e(i.msToBlob(t)) }) } : o.toBlob = function (e, t, r) { var i = this; setTimeout(function () { e(f(i.toDataURL(t, r))) }) })), e.exports ? e.exports = f : r.dataURLtoBlob = f); function j(e) { return 0 < e && e < 1 / 0 } var T = i.exports, d = { strict: !0, checkOrientation: !0, maxWidth: 1 / 0, maxHeight: 1 / 0, minWidth: 0, minHeight: 0, width: void 0, height: void 0, resize: \\"none\\", quality: .8, mimeType: \\"auto\\", convertTypes: [\\"image/png\\"], convertSize: 5e6, beforeDraw: null, drew: null, success: null, error: null }, m = \\"undefined\\" != typeof window && void 0 !== window.document ? window : {}, p = Array.prototype.slice; var b = /^image\\\\/.+$/; function R(e) { return b.test(e) } var g = String.fromCharCode; var y = m.btoa; function w(e, t) { for (var r, i = [], a = new Uint8Array(e); 0 < a.length;)i.push(g.apply(null, (r = a.subarray(0, 8192), Array.from ? Array.from(r) : p.call(r)))), a = a.subarray(8192); return \\"data:\\".concat(t, \\";base64,\\").concat(y(i.join(\\"\\"))) } function v(e) { var t, r, i, a, n, o, s, l = new DataView(e); try { if (255 === l.getUint8(0) && 216 === l.getUint8(1)) for (var c = l.byteLength, h = 2; h + 1 < c;) { if (255 === l.getUint8(h) && 225 === l.getUint8(h + 1)) { r = h; break } h += 1 } if (r && (a = r + 10, \\"Exif\\" === function (e, t, r) { var i, a = \\"\\"; for (r += t, i = t; i < r; i += 1)a += g(e.getUint8(i)); return a }(l, r + 4, 4) && (!(s = 18761 === (n = l.getUint16(a))) && 19789 !== n || 42 !== l.getUint16(a + 2, s) || 8 <= (o = l.getUint32(a + 4, s)) && (i = a + o))), i) for (var u, f = l.getUint16(i, s), d = 0; d < f; d += 1)if (u = i + 12 * d + 2, 274 === l.getUint16(u, s)) { u += 8, t = l.getUint16(u, s), l.setUint16(u, 1, s); break } } catch (e) { t = 1 } return t } var U = /\\\\.\\\\d*(?:0|9){12}\\\\d*$/; function k(e, t) { t = 1 < arguments.length && void 0 !== t ? t : 1e11; return U.test(e) ? Math.round(e * t) / t : e } function x(e, t) { var r = e.aspectRatio, i = e.height, a = e.width, n = 1 < arguments.length && void 0 !== t ? t : \\"none\\", o = j(a), e = j(i); return o && e ? (t = i * r, (\\"contain\\" === n || \\"none\\" === n) && a < t || \\"cover\\" === n && t < a ? i = a / r : a = i * r) : o ? i = a / r : e && (a = i * r), { width: a, height: i } } var O = m.ArrayBuffer, B = m.FileReader, A = m.URL || m.webkitURL, M = /\\\\.\\\\w+$/, D = m.Compressor; return function () { function r(e, t) { !function (e, t) { if (!(e instanceof t)) throw new TypeError(\\"Cannot call a class as a function\\") }(this, r), this.file = e, this.image = new Image, this.options = a(a({}, d), t), this.aborted = !1, this.result = null, this.init() } var e, t, i; return e = r, i = [{ key: \\"noConflict\\", value: function () { return window.Compressor = D, r } }, { key: \\"setDefaults\\", value: function (e) { s(d, e) } }], (t = [{ key: \\"init\\", value: function () { var i, e, a, n = this, o = this.file, t = this.options; e = o, \\"undefined\\" != typeof Blob && (e instanceof Blob || \\"[object Blob]\\" === Object.prototype.toString.call(e)) ? R(i = o.type) ? A && B ? (O || (t.checkOrientation = !1), A && !t.checkOrientation ? this.load({ url: A.createObjectURL(o) }) : (e = new B, a = t.checkOrientation && \\"image/jpeg\\" === i, (this.reader = e).onload = function (e) { var t = e.target.result, r = {}; a ? 1 < (e = v(t)) || !A ? (r.url = w(t, i), 1 < e && s(r, function (e) { var t = 0, r = 1, i = 1; switch (e) { case 2: r = -1; break; case 3: t = -180; break; case 4: i = -1; break; case 5: t = 90, i = -1; break; case 6: t = 90; break; case 7: t = 90, r = -1; break; case 8: t = -90 }return { rotate: t, scaleX: r, scaleY: i } }(e))) : r.url = A.createObjectURL(o) : r.url = t, n.load(r) }, e.onabort = function () { n.fail(new Error(\\"Aborted to read the image with FileReader.\\")) }, e.onerror = function () { n.fail(new Error(\\"Failed to read the image with FileReader.\\")) }, e.onloadend = function () { n.reader = null }, a ? e.readAsArrayBuffer(o) : e.readAsDataURL(o))) : this.fail(new Error(\\"The current browser does not support image compression.\\")) : this.fail(new Error(\\"The first argument must be an image File or Blob object.\\")) : this.fail(new Error(\\"The first argument must be a File or Blob object.\\")) } }, { key: \\"load\\", value: function (e) { var t = this, r = this.file, i = this.image; i.onload = function () { t.draw(a(a({}, e), {}, { naturalWidth: i.naturalWidth, naturalHeight: i.naturalHeight })) }, i.onabort = function () { t.fail(new Error(\\"Aborted to load the image.\\")) }, i.onerror = function () { t.fail(new Error(\\"Failed to load the image.\\")) }, m.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent) && (i.crossOrigin = \\"anonymous\\"), i.alt = r.name, i.src = e.url } }, { key: \\"draw\\", value: function (e) { var t = this, r = e.naturalWidth, i = e.naturalHeight, a = e.rotate, n = void 0 === a ? 0 : a, o = e.scaleX, s = void 0 === o ? 1 : o, l = e.scaleY, c = void 0 === l ? 1 : l, h = this.file, u = this.image, f = this.options, d = document.createElement(\\"canvas\\"), m = d.getContext(\\"2d\\"), p = Math.abs(n) % 180 == 90, b = (\\"contain\\" === f.resize || \\"cover\\" === f.resize) && j(f.width) && j(f.height), g = Math.max(f.maxWidth, 0) || 1 / 0, y = Math.max(f.maxHeight, 0) || 1 / 0, w = Math.max(f.minWidth, 0) || 0, a = Math.max(f.minHeight, 0) || 0, o = r / i, e = f.width, l = f.height; p && (g = (v = [y, g])[0], y = v[1], w = (v = [a, w])[0], a = v[1], e = (v = [l, e])[0], l = v[1]); var v = x({ aspectRatio: o = b ? e / l : o, width: g, height: y }, \\"contain\\"); g = v.width, y = v.height; v = x({ aspectRatio: o, width: w, height: a }, \\"cover\\"); w = v.width, a = v.height, l = b ? (e = (v = x({ aspectRatio: o, width: e, height: l }, f.resize)).width, v.height) : (e = void 0 === (O = (U = x({ aspectRatio: o, width: e, height: l })).width) ? r : O, void 0 === (O = U.height) ? i : O); var U = -(e = Math.floor(k(Math.min(Math.max(e, w), g)))) / 2, O = -(l = Math.floor(k(Math.min(Math.max(l, a), y)))) / 2, w = e, g = l, a = []; b && (y = (o = x({ aspectRatio: o, width: y = r, height: b = i }, { contain: \\"cover\\", cover: \\"contain\\" }[f.resize])).width, b = o.height, a.push((r - y) / 2, (i - b) / 2, y, b)), a.push(U, O, w, g), p && (e = (B = [l, e])[0], l = B[1]), d.width = e, d.height = l, R(f.mimeType) || (f.mimeType = h.type); var B = \\"transparent\\"; h.size > f.convertSize && 0 <= f.convertTypes.indexOf(f.mimeType) && (f.mimeType = \\"image/jpeg\\"), \\"image/jpeg\\" === f.mimeType && (B = \\"#fff\\"), m.fillStyle = B, m.fillRect(0, 0, e, l), f.beforeDraw && f.beforeDraw.call(this, m, d), this.aborted || (m.save(), m.translate(e / 2, l / 2), m.rotate(n * Math.PI / 180), m.scale(s, c), m.drawImage.apply(m, [u].concat(a)), m.restore(), f.drew && f.drew.call(this, m, d), this.aborted || (m = function (e) { t.aborted || t.done({ naturalWidth: r, naturalHeight: i, result: e }) }, d.toBlob ? d.toBlob(m, f.mimeType, f.quality) : m(T(d.toDataURL(f.mimeType, f.quality))))) } }, { key: \\"done\\", value: function (e) { var t = e.naturalWidth, r = e.naturalHeight, i = e.result, a = this.file, n = this.image, e = this.options; A && !e.checkOrientation && A.revokeObjectURL(n.src), !i || e.strict && i.size > a.size && e.mimeType === a.type && !(e.width > t || e.height > r || e.minWidth > t || e.minHeight > r || e.maxWidth < t || e.maxHeight < r) ? i = a : (r = new Date, i.lastModified = r.getTime(), i.lastModifiedDate = r, i.name = a.name, i.name && i.type !== a.type && (i.name = i.name.replace(M, (a = R(a = i.type) ? a.substr(6) : \\"\\", \\".\\".concat(a = \\"jpeg\\" === a ? \\"jpg\\" : a))))), this.result = i, e.success && e.success.call(this, i) } }, { key: \\"fail\\", value: function (e) { var t = this.options; if (!t.error) throw e; t.error.call(this, e) } }, { key: \\"abort\\", value: function () { this.aborted || (this.aborted = !0, this.reader ? this.reader.abort() : this.image.complete ? this.fail(new Error(\\"The compression process has been aborted.\\")) : (this.image.onload = null, this.image.onabort())) } }]) && n(e.prototype, t), i && n(e, i), r }() })();\\nconst { quality, maxWidth, maxHeight } = setting;let closeLoading;this.showLoading = (title_str, s) => {closeLoading = this.utils.toast({title: title_str, type: \'loading\', size:\'large\'});if (s !== 0) { setTimeout(() => { this.hideLoading(); }, s * 1000); }};this.hideLoading = () => {closeLoading && closeLoading();};this.compressImage = (imageFile) => {return new Promise((resolve, reject) => {new Compressor(imageFile, {quality,maxWidth,maxHeight,mimeType: \'image/jpeg\',success(result) {if (result.size >= imageFile.size) {resolve(imageFile);}const newImageFile = new File([result], imageFile.name, { type: result.type });newImageFile.uid = imageFile.uid;resolve(newImageFile);},error(err) { resolve(imageFile);}})})};this.batchCompression = function (selectedFiles, allFiles, imageFiledId) {if (!window.Compressor) { return this.utils.toast(\'缺少压缩插件\'); };this.showLoading(\'正在压缩图片\', 20);const selectedFD = this.$(imageFiledId);const compressPromises = selectedFiles.map(item => this.compressImage(item.originFileObj));Promise.all(compressPromises).then(compressedFiles => {allFiles.forEach(rawFile => {const file = compressedFiles.find(compressFile => compressFile.uid === rawFile.uid);if (file && file.type.split(\'/\')[0] === \'image\') {rawFile.name = file.name.replace(/.[^.]+$/, `.${file.type.split(\'/\')[1]}`);rawFile.size = file.size;rawFile.originFileObj = file;rawFile.type = file.type;}});selectedFD.setValue(allFiles);this.hideLoading();selectedFD.startUpload();}).catch(err => { console.error(err); })};return (<div style={{ display: \'none\' }}> 压缩组件</div>);}\\n","error":{}},"__style__":{},"fieldId":"jsx_lygst2ac"},"condition":true,"hidden":false,"title":"","isLocked":false,"conditionGroup":""}]}',icon:"icon-compress",tutorial:"https://v.douyin.com/i6caVkSp/！"}],{Button:n,Input:i,Form:r,Radio:o,ResponsiveGrid:a,Checkbox:s,Balloon:d}=y.Deep,p=r.Item,u=o.Group,{Cell:m}=a,h=[{name:"按钮",code:'{ "componentsTree": [{ "componentName": "Button" }] } ',icon:"icon-button"},{name:"容器",code:'{ "componentsTree": [{ "componentName": "Div" }] } ',icon:"icon-div"},{name:"文本",code:'{ "componentsTree": [{ "componentName": "Text" }] } ',icon:"icon-text"},{name:"选项卡",code:'{ "componentsTree": [{ "componentName": "TabsLayout" }] } ',icon:"icon-tab"},{name:"折叠面板",code:'{ "componentsTree": [{ "componentName": "Collapse" }] } ',icon:"icon-collapse"},{name:"对话框",code:'{ "componentsTree": [{ "componentName": "Dialog" }] } ',icon:"icon-dialog"},{name:"HTML 组件",code:'{"componentsTree":[{"componentName":"Html"}]}',icon:"icon-html"},{name:"JSX 组件",code:'{ "componentsTree": [{ "componentName": "Jsx" }] } ',icon:"icon-jsx"},{name:"抽屉",code:'{ "componentsTree": [{ "componentName": "Drawer" }] } ',icon:"icon-chouti"},{name:"连接块",code:'{ "componentsTree": [{ "componentName": "LinkBlock" }] } ',icon:"icon-fujian"},{name:"内嵌网页",code:'{ "componentsTree": [{ "componentName": "Iframe" }] } ',icon:"icon-iframe"}],g={border:"1px solid #ddd",borderColor:"#ddd",boxShadow:"rgba(31, 56, 88, 0.2) 1px 1px 4px 0px",borderRadius:"5px"},x={margin:"5px 2px 5px 2px"},w=e=>{const{complist:t}=e;return f.jsx("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:t.map(((e,t)=>{const i=f.jsxs(n,{style:{width:"30%",height:"35px",padding:"5px",margin:"5px"},onClick:()=>{if(e.hasOwnProperty("code"))return S(e.code,!0,e.name)},children:[f.jsx(v,{type:e.icon,style:{marginRight:"10px"}}),e.name]},t);return e.tutorial?f.jsx(d,{v2:!0,trigger:i,triggerType:"hover",title:"",children:f.jsx("a",{target:"_blank",href:e.tutorial,children:"点击查看使用方法"})},t):i}))})};return f.jsx("div",{style:O,children:f.jsxs(a,{gap:10,device:"desktop",children:[f.jsx(m,{style:g,colSpan:12,children:f.jsx(w,{complist:h})}),f.jsxs(m,{style:c(l({},g),{background:"#CCCCFF"}),colSpan:12,children:[f.jsx("span",{style:{color:"#eecb97",margin:"5px 5px 0 5px",padding:"2px",background:"#171a1d",cursor:"pointer",display:"inline-block",borderRadius:"5px",fontWeight:"normal"},children:"高级低代码组件"}),f.jsx(w,{complist:t})]}),f.jsx(m,{style:g,colSpan:12,children:f.jsxs(r,{labelAlign:"left",inline:!1,size:"small",style:{padding:"5px",width:"100%"},children:[f.jsxs("div",{children:[f.jsx(p,{name:"yeyiAPPKEY",required:!0,requiredMessage:"APPKEY必填",style:x,children:f.jsx(i,{placeholder:"应用APPKEY",size:"small",label:"APPKEY:",defaultValue:y.pageConfig.appType||y.g_config.appKey})}),f.jsx(p,{name:"yeyiFormUuid",required:!0,requiredMessage:"formUuid必填",style:x,children:f.jsx(i,{placeholder:"表单FormUuid",size:"small",label:"FormUuid:"})}),f.jsx(p,{name:"yeyiDataType",required:!0,requiredMessage:"请选择表单类型",style:x,children:f.jsxs(u,{"aria-labelledby":"groupId",label:"表单类型",defaultValue:"formData",children:[f.jsx(o,{id:"formData",value:"formData",children:"普通表单"}),f.jsx(o,{id:"data",value:"data",children:"流程表单"})]})}),f.jsx(p,{name:"onlyFieldId",label:"",colon:!1,style:x,children:f.jsx(s,{children:"只保留fieldId - (去掉数据字段的formData.\\data.)"})})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around",width:"100%"},children:[f.jsx(r.Submit,{type:"primary",validate:!0,onClick:(e,t)=>{if(t)return;const{yeyiDataType:n,yeyiAPPKEY:i,yeyiFormUuid:r,onlyFieldId:o}=e;if(!n||!i||!r)return I.error("缺少参数",3e3);fetch(`/${i}/query/formdesign/getLatestFormWithNavNew.json?formUuid=${r}`).then((e=>e.json())).then((({content:{pages:e}})=>{const t=e[0].componentsTree[0].children[1].children[0].children;let i={type:"nodeSchema",componentsMap:{},componentsTree:[{componentName:"TablePc",props:{columns:[]}}]};const r=["TextField","TextareaField","NumberField","RateField","RadioField","CheckboxField","DateField","CascadeDateField","AttachmentField","EmployeeField","ImageField","SelectField","MultiSelectField","CascadeSelectField","PageSection","CountrySelectField","DepartmentSelectField","AddressField","LocationField","AssociationFormField","DigitalSignatureField","SerialNumberField","CompanyField"],a={AssociationFormField:"_id"},s={DateField:"timestamp",EmployeeField:"custom",DepartmentSelectField:"custom"},l={type:"js",source:"/**\n * 表格列自定义渲染\n * @param value 当前列的数据\n * @param index 当前行所在的行号\n * @param rowData 当前行的数据\n */\nfunction renderCell(value, index, rowData) {\n  return <span>{value!==undefined && value.toString()}</span>;\n}",compiled:'function main(){\n    \n    "use strict";\n\nvar __compiledFunc__ = /**\n                       * 表格列自定义渲染\n                       * @param value 当前列的数据\n                       * @param index 当前行所在的行号\n                       * @param rowData 当前行的数据\n                       */\nfunction renderCell(value, index, rowData) {\n  return React.createElement(\n    "span",\n    null,\n    value !== undefined && value.toString()\n  );\n};\n    return __compiledFunc__.apply(this, arguments);\n  }',error:{},params:{}},c={EmployeeField:l,DepartmentSelectField:l};!function e(t){if("object"==typeof t){if(t.hasOwnProperty("componentName")){if(r.includes(t.componentName))try{i.componentsTree[0].props.columns.push({dataKey:(o?"":n+".")+t.props.fieldId+(a[t.componentName]||""),title:{zh_CN:t.props.label.zh_CN,en_US:"",type:"i18n",use:"zh_CN"},width:100,dataType:s[t.componentName]||"text",timeFormatter:"YYYY-MM-DD",render:c[t.componentName]||null});}catch(l){}if("TableField"===t.componentName)return}for(let n in t)t.hasOwnProperty(n)&&e(t[n]);}}(t),S(JSON.stringify(i),!0,"带列表格");}));},style:{marginRight:8},children:"生成带列表格"}),f.jsx(r.Submit,{type:"primary",validate:!0,warning:!0,onClick:(e,t)=>{if(t)return;const{yeyiDataType:n,yeyiAPPKEY:i,yeyiFormUuid:r,onlyFieldId:o}=e;if(!n||!i||!r)return I.error("缺少参数",3e3);y.open(`/alibaba/web/${i}/design/pageDesigner?formUuid=${r}&__debug`);},style:{marginRight:8},children:"解决页面卡死"})]})]})})]})})},{Deep:_={},React:P}=y,{Icon:B={},Radio:R={},Button:M={},Dialog:U}=_;R.Group;const A=()=>f.jsxs("div",{style:{display:"flex",margin:"5px",justifyContent:"space-between",alignItems:"flex-end"},children:[f.jsxs("div",{style:{display:"flex",margin:"5px"},children:[f.jsx("h4",{children:"宜搭 Tools 2.0"}),f.jsx("div",{style:{backgroundColor:"#FF5F55",marginLeft:"10px",cursor:"pointer",display:"inline-block",padding:"4px 8px",borderRadius:"5px",color:"#ffffff",fontWeight:"normal"},onClick:()=>{T("https://g.alicdn.com/code/lib/qrcodejs/1.0.0/qrcode.min.js").then((e=>{U.show({footer:!1,title:"请 页一 喝杯咖啡",closeMode:["esc","close"],content:f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[f.jsx("div",{id:"qrCodeDiv1",style:{position:"relative",width:"128px",height:"128px",marginRight:"20px"},children:f.jsxs("svg",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30px",height:"30px"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{width:"100%",height:"100%",fill:"white"}),f.jsx("path",{d:"M436.314353 632.771765c-68.517647 36.321882-78.667294-20.389647-78.667294-20.389647l-85.835294-190.524236c-33.039059-90.533647 28.581647-40.839529 28.581647-40.839529s52.856471 38.038588 93.003294 61.229176c40.086588 23.190588 85.835294 6.806588 85.835294 6.806589l561.212235-246.362353C936.899765 80.112941 765.891765 0 572.235294 0 256.180706 0 0 213.232941 0 476.310588c0 151.311059 84.811294 285.967059 216.937412 373.248l-23.792941 130.288941s-11.625412 38.038588 28.611764 20.389647c27.437176-12.047059 97.370353-55.115294 138.992941-81.347764 65.445647 21.684706 136.734118 33.731765 211.486118 33.731764 316.024471 0 572.235294-213.232941 572.235294-476.310588 0-76.197647-21.594353-148.178824-59.843764-212.028235-178.808471 102.309647-594.733176 340.118588-648.312471 368.489412z",fill:"#43C93E","p-id":"7629","data-spm-anchor-id":"a313x.search_index.0.i13.59253a81yXP5Ph",class:"selected"})]})}),f.jsx("div",{id:"qrCodeDiv2",style:{position:"relative",width:"128px",height:"128px"},children:f.jsxs("svg",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30px",height:"30px"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{width:"100%",height:"100%",fill:"white"}),f.jsx("path",{d:"M230.771014 576.556522c-12.614493 9.646377-25.228986 23.744928-28.93913 42.295652-5.194203 24.486957-0.742029 55.652174 22.26087 80.13913 28.93913 28.93913 72.718841 37.101449 92.011594 38.585508 51.2 3.710145 106.110145-22.26087 147.663768-50.457971 16.324638-11.130435 43.77971-34.133333 70.492754-69.750725-59.362319-30.423188-133.565217-64.556522-212.22029-61.588406-41.553623 1.484058-70.492754 9.646377-91.269566 20.776812zM983.188406 712.347826c25.971014-61.588406 40.811594-129.113043 40.811594-200.347826 0-281.971014-230.028986-512-512-512S0 230.028986 0 512s230.028986 512 512 512c170.666667 0 321.298551-83.849275 414.794203-212.22029C838.492754 768.742029 693.797101 696.023188 604.011594 652.985507c-42.295652 48.973913-105.368116 97.205797-176.602898 117.982609-44.521739 13.356522-85.333333 18.550725-126.886957 9.646377-42.295652-8.904348-72.718841-28.197101-90.527536-47.489855-8.904348-10.388406-19.292754-22.26087-27.455073-37.843479 0.742029 0.742029 0.742029 2.226087 0.742029 2.968116 0 0-4.452174-7.42029-7.420289-19.292753-1.484058-5.936232-2.968116-11.872464-3.710145-17.808696-0.742029-4.452174-0.742029-8.904348 0-12.614493-0.742029-7.42029 0-15.582609 1.484058-23.744927 4.452174-20.776812 12.614493-43.77971 35.617391-65.298551 48.973913-48.231884 115.014493-50.457971 149.147826-50.457971 50.457971 0.742029 138.017391 22.26087 212.22029 48.973913 20.776812-43.77971 34.133333-89.785507 42.295652-121.692754H304.973913v-33.391304h158.052174v-66.782609H272.324638v-34.133333h190.701449v-66.782609c0-8.904348 2.226087-16.324638 16.324638-16.324637h74.944927v83.107246h207.026087v33.391304H554.295652v66.782609H719.768116S702.701449 494.933333 651.501449 586.202899c115.014493 40.811594 277.518841 104.626087 331.686957 126.144927z m0 0",fill:"#06B4FD","p-id":"12000"})]})})]})}),new QRCode(document.getElementById("qrCodeDiv1"),{text:"wxp://f2f0f5l3vU2Z9kkzT_t4Yt3i_6BYIgE6P2FXUoiUXPF94gM",width:128,height:128}),new QRCode(document.getElementById("qrCodeDiv2"),{text:"https://qr.alipay.com/fkx11594xnr8dlcy1qk4j74",width:128,height:128});}));},children:"打赏鼓励作者"})]}),f.jsx(B,{type:"close",size:"small",style:{margin:"5px",cursor:"pointer"},onClick:C})]}),{Deep:N,AliLowCodeEngine:L}=y,z=()=>{const{List:e,Collapse:t,Balloon:n,Icon:i,Input:r,Button:o,Avatar:a,Tab:s}=N,l=n.Tooltip;t.Panel;let c="`/${ window.pageConfig.appType || window.g_config.appKey }";const d=[{title:"新增表单实例",requestType:"POST",desc:"/v1/form/saveFormData.json",copyInfo:c+"/v1/form/saveFormData.json`",showExp:'{\n\t//表单ID\n\tformUuid:"FORM-NJYJZELV8...",\n\n\t//写入字段参数\n\tformDataJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件写入格式\n\t\t"employeeField_jcos0sar": ["70001"],\n\t}),\n}',copyParams:'{\n\tformUuid:"FORM-NJYJZELV8...",\n\tformDataJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"],\n\t}),\n}',formType:0},{title:"更新表单实例",requestType:"POST",desc:"/v1/form/updateFormData.json",copyInfo:c+"/v1/form/updateFormData.json`",showExp:'{\n\t//表单实例id\n\tformInstId:\'FINST-NJYJZELVZRVG...\',\n\n\t//要更新的字段参数\n\tupdateFormDataJson:JSON.stringify({\n\t\t//成员组件更新格式\n\t\t"employeeField_jcpm5gy2": ["70001","70002"],\n\t}),\n\n\t//使用最新的表单版本进行更新 y | n\n\tuseLatestVersion:\'y\',\n}',copyParams:'{\n\tformInstId:\'FINST-NJYJZELVZRVG...\',\n\tupdateFormDataJson:JSON.stringify({\n\t\t"employeeField_jcpm5gy2": ["70001","70002"],\n\t}),\n\tuseLatestVersion:\'y\',\n}',formType:0},{title:"删除表单实例",requestType:"POST",desc:"/v1/form/deleteFormData.json",copyInfo:c+"/v1/form/deleteFormData.json`",showExp:"{\n\t//要删除的表单数据ID\n\tformInstId:'FINST-NJYJZELVVYZ...',\n}",copyParams:"{\n\tformInstId:'FINST-NJYJZELVVYZ...',\n}",formType:0},{title:"条件搜索表单实例列表",requestType:"GET",desc:"/v1/form/searchFormDatas.json",copyInfo:c+"/v1/form/searchFormDatas.json`",showExp:'{\n\t//表单ID\n\tformUuid:"FORM-EF6Y4G8WO...",\n\n\t//要查询的字段参数\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件查询格式\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\n\t//当前页\n\tcurrentPage:1,\n\t//每页记录数\n\tpageSize:10,\n\t//表单实例创建人userId\n\toriginatorId:"70441",\n\t//表单实例创建开始时间\n\tcreateFrom:"2023-04-11",\n\t//表单实例创建结束时间\n\tcreateTo:"2023-04-11",\n\t//表单实例修改开始时间\n\tmodifiedFrom:"2023-04-11",\n\t//表单实例修改结束时间\n\tmodifiedTo:"2023-04-11",\n\t//指定排序字段 +升序 -降序\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',copyParams:'{\n\tformUuid:"FORM-EF6Y4G8WO...",\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\tcurrentPage:1,\n\tpageSize:10,\n\toriginatorId:"70441",\n\tcreateFrom:"2023-04-11",\n\tcreateTo:"2023-04-11",\n\tmodifiedFrom:"2023-04-11",\n\tmodifiedTo:"2023-04-11",\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',formType:0},{title:"条件搜索表单ID列表",requestType:"GET",desc:"/v1/form/searchFormDataIds.json",copyInfo:c+"/v1/form/searchFormDataIds.json`",showExp:'{\n\t//表单ID\n\tformUuid:"FORM-EF6Y4G8WO...",\n\n\t//要查询的字段参数\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件查询格式\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\n\t//当前页\n\tcurrentPage:1,\n\t//每页记录数\n\tpageSize:10,\n\t//表单实例创建人userId\n\toriginatorId:"70441",\n\t//表单实例创建开始时间\n\tcreateFrom:"2023-04-11",\n\t//表单实例创建结束时间\n\tcreateTo:"2023-04-11",\n\t//表单实例修改开始时间\n\tmodifiedFrom:"2023-04-11",\n\t//表单实例修改结束时间\n\tmodifiedTo:"2023-04-11",\n\t//指定排序字段 +升序 -降序\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',copyParams:'{\n\tformUuid:"FORM-EF6Y4G8WO...",\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\tcurrentPage:1,\n\tpageSize:10,\n\toriginatorId:"70441",\n\tcreateFrom:"2023-04-11",\n\tcreateTo:"2023-04-11",\n\tmodifiedFrom:"2023-04-11",\n\tmodifiedTo:"2023-04-11",\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',formType:0},{title:"ID搜索表单实例",requestType:"GET",desc:"/v1/form/getFormDataById.json",copyInfo:c+"/v1/form/getFormDataById.json`",showExp:"{\n\t//要查询的表单实例ID\n\tformInstId:'FINST-NJYJZELVVYZ...',\n}",copyParams:"{\n\tformInstId:'FINST-NJYJZELVVYZ...',\n}",formType:0},{title:"流程发起",requestType:"POST",desc:"/v1/process/startInstance.json",copyInfo:c+"/v1/process/startInstance.json`",showExp:'{\n\t//流程 code::单独发起页链接上可查\n\tprocessCode:"TPROC--EF6Y4G8WO2FN0...",\n\t//流程表单ID::单独发起页链接上可查\n\tformUuid:"FORM-EF6Y4G8WO2F...",\n\n\t//添加字段参数\n\tformDataJson:JSON.stringify({\n\t\t//单行输入框格式\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件查询格式\n\t\t"employeeField_jcos0sar": ["70001"],\n\t}),\n\n\t//发起人所在部门号 (不填，默认发起人主职部门)\n\tdeptId:"18888",\n}',copyParams:'{\n\tprocessCode:"TPROC--EF6Y4G8WO2FN0...",\n\tformUuid:"FORM-EF6Y4G8WO2F...",\n\tformDataJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"],\n\t}),\n\tdeptId:"18888",\n}',formType:1},{title:"流程实例更新",requestType:"POST",desc:"/v1/process/updateInstance.json",copyInfo:c+"/v1/process/updateInstance.json`",showExp:'{\n\t//流程实例ID\n\tprocessInstanceId:"8c124808-82e7-473...",\n\n\t//更新流程字段\n\tupdateFormDataJson:JSON.stringify({\n\t//单行输入框格式\n\t"textField_jcpm6agt": "页一",\n\t//成员组件查询格式\n\t"employeeField_jcos0sar": ["70001"],\n\t}),\n}',copyParams:'{\n\tprocessInstanceId:"8c124808-82e7-473...",\n\tupdateFormDataJson:JSON.stringify({\n\t"textField_jcpm6agt": "页一",\n\t"employeeField_jcos0sar": ["70001"],\n\t}),\n}',formType:1},{title:"删除流程实例",requestType:"POST",desc:"/v1/process/deleteInstance.json",copyInfo:c+"/v1/process/deleteInstance.json`",showExp:'{\n\t//流程实例ID\n\tprocessInstanceId:"8c124808-82e7-473...",\n}',copyParams:'{\n\tprocessInstanceId:"8c124808-82e7-473...",\n}',formType:1},{title:"条件搜索流程实例列表",requestType:"GET",desc:"/v1/process/getInstances.json",copyInfo:c+"/v1/process/getInstances.json`",showExp:'{\n\t//流程表单ID\n\tformUuid:"FORM-EF6Y4G8WO...",\n\n\t//要查询的字段参数\n\tsearchFieldJson:JSON.stringify({\n\t\t//单行文本输入框\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件查询格式\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\n\t//流程实例状态 RUNNING | TERMINATED | COMPLETED | ERROR\n\t//分别代表：运行中，已终止，已完成，异常\n\tinstanceStatus:"RUNNING",\n\t//流程审批结果 agree | disagree  同意 | 拒绝\n\tapprovedResult:"agree",\n\t//当前页\n\tcurrentPage:1,\n\t//每页记录数\n\tpageSize:10,\n\t//表单实例创建人userId\n\toriginatorId:"70441",\n\t//表单实例创建开始时间\n\tcreateFrom:"2023-04-11",\n\t//表单实例创建结束时间\n\tcreateTo:"2023-04-11",\n\t//表单实例修改开始时间\n\tmodifiedFrom:"2023-04-11",\n\t//表单实例修改结束时间\n\tmodifiedTo:"2023-04-11",\n\t//指定排序字段 +升序 -降序\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',copyParams:'{\n\tformUuid:"FORM-EF6Y4G8WO...",\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\tinstanceStatus:"RUNNING",\n\tapprovedResult:"agree",\n\tcurrentPage:1,\n\tpageSize:10,\n\toriginatorId:"70441",\n\tcreateFrom:"2023-04-11",\n\tcreateTo:"2023-04-11",\n\tmodifiedFrom:"2023-04-11",\n\tmodifiedTo:"2023-04-11",\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',formType:1},{title:"条件搜索流程ID列表",requestType:"GET",desc:"/v1/process/getInstanceIds.json",copyInfo:c+"/v1/process/getInstanceIds.json`",showExp:'{\n\t//流程表单ID\n\tformUuid:"FORM-EF6Y4G8WO...",\n\n\t//要查询的字段参数\n\tsearchFieldJson:JSON.stringify({\n\t\t//单行文本输入框\n\t\t"textField_jcpm6agt": "页一",\n\t\t//成员组件查询格式\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\n\t//流程实例状态 RUNNING | TERMINATED | COMPLETED | ERROR\n\t//分别代表：运行中，已终止，已完成，异常\n\tinstanceStatus:"RUNNING",\n\t//流程审批结果 agree | disagree  同意 | 拒绝\n\tapprovedResult:"agree",\n\t//当前页\n\tcurrentPage:1,\n\t//每页记录数\n\tpageSize:10,\n\t//表单实例创建人userId\n\toriginatorId:"70441",\n\t//表单实例创建开始时间\n\tcreateFrom:"2023-04-11",\n\t//表单实例创建结束时间\n\tcreateTo:"2023-04-11",\n\t//表单实例修改开始时间\n\tmodifiedFrom:"2023-04-11",\n\t//表单实例修改结束时间\n\tmodifiedTo:"2023-04-11",\n\t//指定排序字段 +升序 -降序\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',copyParams:'{\n\tformUuid:"FORM-EF6Y4G8WO...",\n\tsearchFieldJson:JSON.stringify({\n\t\t"textField_jcpm6agt": "页一",\n\t\t"employeeField_jcos0sar": ["70001"]\n\t}),\n\tinstanceStatus:"RUNNING",\n\tapprovedResult:"agree",\n\tcurrentPage:1,\n\tpageSize:10,\n\toriginatorId:"70441",\n\tcreateFrom:"2023-04-11",\n\tcreateTo:"2023-04-11",\n\tmodifiedFrom:"2023-04-11",\n\tmodifiedTo:"2023-04-11",\n\tdynamicOrder:JSON.stringify({"numberField_1ac":"+"}),\n}',formType:1},{title:"ID搜索流程实例",requestType:"GET",desc:"/v1/process/getInstanceById.json",copyInfo:c+"/v1/process/getInstanceById.json`",showExp:'{\n\t//流程实例ID\n\tprocessInstanceId:"f30233fb-72e1-44...",\n}',copyParams:'{\n\tprocessInstanceId:"f30233fb-72e1-44...",\n}',formType:1}],p=(e,t,n,i,r,o)=>({id:"",name:t,description:n,formUuid:y.pageConfig.formUuid,protocal:"REMOTE",options:{shouldFetch:!0,method:i,params:r?{type:"variable",variable:r,value:[]}:e&&{}||[],isSync:!1,url:o?{type:"variable",variable:o,value:"yeyi"}:{},loadType:""},isInit:!1,dpType:"REMOTE",type:"legao",requestHandler:{type:"JSExpression",value:"this.utils.legaoBuiltin.dataSourceHandler"},dataHandler:{type:"js",source:`function(data, err) { this.setState({${t}: data}); return data; }`,compiled:`function(data, err) { this.setState({${t}: data}); return data; }`}}),u={color:"#66CCCC",cursor:"pointer",margin:"5px"},m=t=>f.jsx("div",{style:{width:"100%"},children:f.jsx(e,{size:"small",dataSource:d.filter((e=>e.formType===t)),renderItem:(t,s)=>f.jsx(e.Item,{extra:f.jsxs("div",{children:[f.jsx(l,{v2:!0,trigger:f.jsx(i,{style:u,size:"large",type:"success-filling",onClick:()=>{const{project:e,skeleton:n}=L,i=e.getSchema(),r=p(!0,t.desc.match(/\/([^\/.]+)\./)[1],t.title,t.requestType,t.copyParams,t.copyInfo);i.componentsTree[0].dataSource.list.push(r),i.componentsTree[0].dataSource.online.push(r),e.setSchema(i);const o=n.getPanel("datapool");o.parent.remove(o),setTimeout((function(){o.parent.add(o);}),10),I.success(`${t.title} 接口(带参数)添加成功`);}}),align:"t",children:"向数据源插入接口和参数"}),f.jsx(l,{v2:!0,trigger:f.jsx(i,{style:u,size:"large",type:"success",onClick:()=>{const{project:e,skeleton:n}=L,i=e.getSchema(),r=p(!0,t.desc.match(/\/([^\/.]+)\./)[1],t.title,t.requestType,null,t.copyInfo),o=p(!1,t.desc.match(/\/([^\/.]+)\./)[1],t.title,t.requestType,null,t.copyInfo);i.componentsTree[0].dataSource.list.push(r),i.componentsTree[0].dataSource.online.push(o),e.setSchema(i);const a=n.getPanel("datapool");a.parent.remove(a),setTimeout((function(){a.parent.add(a);}),10),I.success(`${t.title} 接口添加成功`);}}),align:"t",children:"只向数据源插入接口"})]}),title:f.jsx("span",{style:{padding:"0 0 0 10px",fontSize:"14px"},children:t.title}),media:f.jsx(a,{style:{color:"while",backgroundColor:"POST"===t.requestType?"#FF6666":"#3399CC"},children:t.requestType}),children:f.jsxs(n,{v2:!0,trigger:f.jsx("p",{style:{color:"#0099CC",cursor:"pointer"},children:t.desc}),title:"参数详解",triggerType:"hover",children:[f.jsxs("div",{children:[f.jsx(o,{onClick:e=>{S(t.copyInfo);},type:"primary",text:!0,children:"复制接口"})," ",f.jsx(o,{onClick:()=>{S(t.copyParams);},type:"primary",text:!0,children:"复制参数"})," ",f.jsx(o,{onClick:()=>{S(t.showExp);},type:"primary",text:!0,children:"复制参数(带注释)"})]}),f.jsx(r.TextArea,{style:{width:"300px"},autoHeight:{minRows:2,maxRows:30},readOnly:!0,defaultValue:t.showExp,placeholder:"TextArea","aria-label":"TextArea"}),f.jsx("p",{style:{color:"#FF6666",margin:"5px"},children:"跨应用获取数据请修改接口的appKey"})]})},s)})});return f.jsx("div",{style:O,children:f.jsxs(s,{size:"small",shape:"wrapped",style:{minHeight:"400px"},children:[f.jsx(s.Item,{title:"普通表单",children:m(0)},0),f.jsx(s.Item,{title:"流程表单",children:m(1)},1)]})})},q=[{title:"Utils工具代码",children:[{title:"提示框",desc:"短暂停留的弹框",showExp:"this.utils.toast({\n  title: '页一',//标题\n  type: 'success',//success,warning,error,notice,help,loading\n  size: 'large',\n  duration: 2000, //显示时长,type 为 loding 时无效\n})"},{title:"对话框",desc:"需要手动关闭的弹窗",showExp:"this.utils.dialog({\n  type: 'confirm',//弹窗类型 'alert', 'confirm', 'show'\n  title: 'title', //标题\n  content: 'content', //内容,支持jsx语法嵌入复杂布局\n  hasMask: true,  //是否有遮罩 true , false\n  footer: true,  //是否有底部操作按钮 true , false\n  footerAlign: 'left',//底部操作对齐方向'left', 'center', 'right'  'right'  \n  //底部操作类型和顺序 ['cancel','ok'], ['ok','cancel'], ['ok'], ['cancel']\n  footerActions: ['ok', 'cancel'],\n  onOk: () => { }, //点击确定的回调函数\n  onCancel: () => { },//点击取消的回调函数\n})"},{title:"加载JS",desc:"加载远程js脚本库",showExp:'//加载远程脚本  这是一个加载二维码模块的例子\nthis.utils.loadScript(\'https://g.alicdn.com/code/lib/qrcodejs/1.0.0/qrcode.min.js\').then(() => {\n  //加载完成后执行下方代码\n  //在页面中查找id为qrcode元素,把二维码数据渲染上去\n  var qrcode = new QRCode(document.getElementById(\'qrcode\'), {\n    //二维码参数\n    text: "http://jindo.dev.naver.com/collie",\n    width: 128,\n    height: 128,\n    colorDark: "#000000",\n    colorLight: "#ffffff",\n    correctLevel: QRCode.CorrectLevel.H\n  });\n});'},{title:"预览图片",desc:"全屏预览图片",showExp:"//注意参数格式为 {current:图片地址}\nthis.utils.previewImage({ current: 'https://img.alicdn.com/tfs/TB1JUnZ2GL7gK0jSZFBXXXZZpXa-260-192.png_.webp' });"},{title:"页面跳转",desc:"2种页面跳转方式",showExp:"/**\n * 参数1:完整url\n * 参数2:携带跳转参数\n * 参数3:是否新页面打开 true  false\n * 参数4:是否是网址\n */\nthis.utils.router.push('https://yeyi...', {}, true, true); \n/**\n * 参数1:表单页面ID,必须是同一个应用内\n * 参数2:携带跳转参数\n * 参数3:是否新页面打开 true  false\n */\nthis.utils.router.push('FORM-WC96669...', {}, true);"}]},{title:"格式化函数",showExp:"",children:[{title:"日期",desc:"将日期格式化为指定字符串",showExp:"this.utils.formatter('date', dateValue, 'YYYY-MM-DD')"},{title:"金额",desc:"金额格式化",showExp:"this.utils.formatter('money', money)"},{title:"手机号",desc:"手机号格式化",showExp:"this.utils.formatter('cnmobile', mobile, ' ')"},{title:"卡号",desc:"卡号格式化",showExp:"this.utils.formatter('card', card, ' ')"}]},{title:"登录者信息",showExp:"",children:[{title:"userId",desc:"当前登录者",showExp:"window.loginUser.userId"},{title:"姓名",desc:"当前登录者",showExp:"window.loginUser.userName"},{title:"工号",desc:"当前登录者",showExp:"window.loginUser.businessWorkNo"}]},{title:"页面判类型判断",children:[{title:"移动端",desc:"如果是移动端返回 true",showExp:"this.utils.isMobile()"},{title:"提交页",desc:"如果是 提交页 返回 true",showExp:"this.utils.isSubmissionPage()"},{title:"预览页",desc:"如果是 预览页 返回 true (不包含流程进行中)",showExp:"export function isViewPage() {\n const { flowData = {} } = this.utils.getFormInstanceData();\n const { editMode, viewMode } = flowData;\n if (viewMode && editMode === false) return true;\n return false;\n}"},{title:"编辑页",desc:"如果是 编辑页 返回 true (不包含流程进行中)",showExp:"export function isEditPage() {\n const { flowData = {} } = this.utils.getFormInstanceData();\n const { editMode, viewMode } = flowData;\n if (editMode && viewMode === false) return true;\n return false;\n}"},{title:"全页面类型判断",desc:"精确区分各种页面状态",showExp:"export function getPageMode() { \n const { flowData = {} } = this.utils.getFormInstanceData();\n const { editMode, viewMode } = flowData;\n if (this.utils.isSubmissionPage()) return '提交页';\n if (viewMode && editMode === false) return '预览页'; \nif (editMode && viewMode === false) return '编辑页';\n return '流程中';}"}]},{title:"常用代码",children:[{title:"组件预览状态自定义渲染",desc:"修改宜搭某组件预览状态",showExp:"if (!this.utils.isSubmissionPage()) {\n// 红色的文字 \n this.$('textField_lbam5p6w').set('renderView', (value) => {\n return <span style={{ color: 'red' }}>{value}</span>;\n});\n}"},{title:"控制子表单组件",desc:"设置子表各组件属性",showExp:"if (!this.utils.isSubmissionPage()) {\n  const tableField = this.$('tableField_lfhnlfkf'); // 获取子表单定义\n const items = tableField.getItems(); // 获取子表单行标识\n items.forEach((item, index) => {\n// 访问网址 - 子表单\n tableField.setComponentProps(item, 'textField_lfhnlfkg', {\n renderView: (value) => {\n return <a href={value} target=\"_blank\" rel=\"noreferrer\">{value}</a>;\n},\n});\n});\n}"},{title:"代码触发公式/数据联动",desc:"js给组件赋值,触发公式或者数据联动",showExp:"this.$('组件一id').getProps().onChange({value:  'newValue'}); //触发组件一参与的公式计算"},{title:"数据循环请求",desc:"循环请求远程数据源所有数据",showExp:"//延时\nfunction sleep(ms) {\nreturn new Promise(resolve => setTimeout(resolve, ms));\n}\n\n /* -----------调用方法------------\n  this.getAllData(\n    'searchFormDatas', //数据源名称\n    'FORM-0C3DBD9C6F5649D3B0DB13F468F2C39DSDNI', //要查询的表单id\n    100, //一次请求多少条数据\n    {\"radioField_lqgawnyl\": \"页一\",}, //字段查询条件\n    200, //延迟多少毫秒\n  ).then(res => {\n    console.log(res); //请求成功 \n })\n----------------------------------*/\n\n/**\n * @param {string} requestName 数据源名称\n * @param {string} formUuid 要查询的表单id\n * @param {integer} pageSize 一次请求多少条数据\n * @param {object} searchFieldJson 字段查询条件\n * @param {integer} dealy 每条查询之间延迟多少毫秒\n */\nexport function getAllData(requestName = '', formUuid = '', pageSize = 100, searchFieldJson = {}, dealy = 200) {\nreturn new Promise(async (resolve, reject) => {\nif (requestName === '') return reject('缺少查询方法 requestName数据源名称 参数!');\nif (formUuid === '') return reject('缺少查询方法 formUuid 参数!');\ntry {\nlet dataList = [];\nconst count = await this.dataSourceMap[requestName].load({\nformUuid,\nsearchFieldJson: JSON.stringify(searchFieldJson),\npageSize,\n}).then(res => {\nres.data.forEach(parent => {\ndataList.push(parent.formData||parent.data);\n})\nreturn Math.ceil(res.totalCount / pageSize);\n})\n\nlet promises = [];\n\nif (count > 1) {\nfor (let n = 1; n < count; n++) {\npromises.push(\nthis.dataSourceMap[requestName].load({\nformUuid,\nsearchFieldJson: JSON.stringify(searchFieldJson),\ncurrentPage: n + 1,\npageSize,\n}).then(res => res.data)\n);\nawait sleep(dealy);\n}\n\nawait Promise.all(promises).then(res => {\nres.forEach(child => {\nchild.forEach(parent => {\ndataList.push(parent.formData||parent.data);\n})\n})\n})\n}\nresolve(dataList);\n}\ncatch (err) {\nreject(err.message);\n}\n})\n}\n"},{title:"await sleep 等待 ",desc:"异步转同步",showExp:"/**\n * 调用 await sleep(200);等待200毫秒执行后面的语句\n * 必须配合 async 使用 调用例子 \n * async function func(){\n *    await sleep(200);\n *    console.log('页一'); \n * }\n */\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}"},{title:"loading 加载",desc:"打开/关闭加载提示框",showExp:"/**\n * this.poptoastLoading('数据加载中...',20); //显示loading\n * this.onCloseLoading(); //隐藏loading\n */\nlet closeLoading;\n\nexport function poptoastLoading(title_str, s) {\n  closeLoading = this.utils.toast({\n    title: title_str,\n    type: 'loading',\n    size: \"large\"\n  });\n  if (s != 0) {\n    setTimeout(() => {\n      this.onCloseLoading();\n    }, s * 1000);\n  }\n}\n\nexport function onCloseLoading() {\n  if (closeLoading) {\n    closeLoading();\n  }\n}"},{title:"setTimeout 定时器(单次)",desc:"延迟执行代码",showExp:'// 设置一个2秒的定时器\nsetTimeout(function() {\n    //这里写2秒后需要执行的代码\n    console.log("2秒后打印页一");\n}, 2000);'},{title:"setInterval 定时器(反复)",desc:"循环定时执行代码",showExp:'// 设置一个计数器\nlet count = 0;\n\n// 设置一个每隔1秒执行的间隔ID\nconst intervalId = setInterval(function() {\n  // 每次调用打印计数器的值\n  console.log(++count);\n\n  // 当计数器达到5时，清除间隔ID并打印“页一”消息\n  if (count === 5) {\n    clearInterval(intervalId);\n    console.log("页一");\n  }\n}, 1000);'},{title:"查询组件代码(祛除前缀,格式校准)",desc:"快速实现组件查询组件功能",showExp:"function formatSearchData(searchData) {\n\tconst prefixStr = ['yeyi_', 'sxx'];  //需要剔除的前缀列表 \n\t//对特殊字段的值进行处理 key 处理要处理的字段,value 传入需要处理的值执行处理方法 \n\tconst customRule = [\n\t\t{\n\t\t\t//成员组件处理方法\n\t\t\tfieldIds: [\"employeeField_lzqfc4pg\"],\n\t\t\tformatFun: (value) => [value].flat().map(({ value }) => value),\n\t\t}, {\n\t\t\t//日期区间组件处理方法\n\t\t\tfieldIds: [\"dateField_lzqkqo5x\"],\n\t\t\tformatFun: (value) => Object.values(value),\n\t\t}\n\t]\n\treturn Object.entries(searchData || {}).reduce((acc, [key, value]) => {\n\t\tif (!_.isEmpty(value)) {\n\t\t\tlet newKey = key;\n\t\t\t//去掉前缀\n\t\t\tconst needSubstr = prefixStr.find(prefix => key.startsWith(prefix));\n\t\t\tneedSubstr && (newKey = key.substring(needSubstr.length));\n\t\t\tacc[newKey] = value;\n\t\t\t//对特殊字段的值进行处理\n\t\t\tcustomRule.forEach(item => {\n\t\t\t\titem.fieldIds.includes(newKey) && (acc[newKey] = item.formatFun(value));\n\t\t\t})\n\t\t}\n\t\treturn acc;\n\t}, {});\n}"}]},{title:"常用公式",showExp:"",children:[{title:"当天日期时分秒归零",desc:"返回时间戳(只保留年月日)",showExp:'{"text":"DAYBEGIN(TIMESTAMP(TODAY()))","marks":[],"isCmData":true}'},{title:"当天开始日期",desc:"返回指定格式字符串",showExp:'{"text":"TEXT(DATE(DAYBEGIN(TIMESTAMP(TODAY()))),\\"yyyy-MM-dd HH:mm:ss\\")","marks":[],"isCmData":true}'},{title:"当天结束日期",desc:"返回指定格式字符串",showExp:'{"text":"TEXT(DATE(DAYEND(TIMESTAMP(TODAY()))),\\"yyyy-MM-dd HH:mm:ss\\")","marks":[],"isCmData":true}'},{title:"获取提交人的userid",desc:"供集成自动化使用",showExp:'{"text":"TRIM(REPLACE(REPLACE(​表单触发人​,1,2,\\" \\"),LEN(​表单触发人​)-2,2,\\" \\"))","marks":[{"from":{"line":0,"ch":21,"sticky":null},"to":{"line":0,"ch":28,"sticky":null},"value":"form_inst_modifier","invalid":false},{"from":{"line":0,"ch":42,"sticky":null},"to":{"line":0,"ch":49,"sticky":null},"value":"form_inst_modifier","invalid":false}],"isCmData":true}'},{title:"拼接修改字段",desc:"集成自动化中连接器修改数据使用",showExp:'{"text":"CONCATENATE(\\"{\'radioField_ljdxxl92\':\'已完成\',\'dateField_ljdyq1ib\':\'\\",TIMESTAMP(TODAY()),\\"\'}\\")","marks":[],"isCmData":true}'},{title:"关联表单字段赋值",desc:"集成自动化中关联表单赋值使用",showExp:'{"text":"CONCATENATE(\\"[{\\\\\\"appType\\\\\\": \\\\\\"(替换)APPKEY\\\\\\", \\\\\\"formUuid\\\\\\": \\\\\\"(替换)表单formUuid\\\\\\",\\\\\\"formType\\\\\\": \\\\\\"receipt\\\\\\", \\\\\\"instanceId\\\\\\": \\\\\\"\\", (替换)表单instid字段, \\"\\\\\\", \\\\\\"title\\\\\\": \\\\\\"\\", (替换)标题字段, \\"\\\\\\", \\\\\\"subTitle\\\\\\": \\\\\\"\\", (替换)副标题字段, \\"\\\\\\"}]\\")","marks":[],"isCmData":true}'}]}],{Deep:H}=y,J=()=>{const{Tab:e,List:t,Button:n,Balloon:i}=H,r=i.Tooltip,o=(e,t)=>{S(e,!0,t);};return f.jsx("div",{style:O,children:f.jsx(e,{shape:"wrapped",tabPosition:"left",size:"small",style:{minHeight:"400px",height:"500px",maxHeight:"85vh",overflowY:"auto"},className:"yeyiTab",children:q.map(((i,a)=>f.jsx(e.Item,{title:i.title,children:f.jsx(t,{size:"small",dataSource:i.children,renderItem:(e,i)=>f.jsx(t.Item,{style:{padding:"0 0 0 5px"},title:f.jsx(r,{v2:!0,trigger:f.jsx(n,{type:"primary",text:!0,style:{padding:"4px 5px",fontSize:"15px"},onClick:o.bind(null,e.showExp,e.title),children:e.title}),align:"r",children:"点击复制"}),children:f.jsx("span",{style:{padding:"0 0 0 10px",fontSize:"12px"},children:e.desc})},i)})},a)))})})},{Deep:Y}=y,$=()=>{const{Card:e,Button:t,Timeline:n}=Y,i=n.Item,r={subTitle:f.jsx(t,{text:!0,type:"primary",onClick:()=>{y.open("https://jinhuayanshi.cn");},children:"点击查看-高阶完整版工具箱"}),extra:f.jsx(t,{text:!0,type:"primary",onClick:()=>{y.open("dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=yidaadmin");},children:"金华岩石信息技术"})};return f.jsx("div",{style:O,children:f.jsxs(e,{free:!0,style:{width:"100%"},children:[f.jsx(e.Header,l({title:"宜搭工具箱"},r)),f.jsx(e.Content,{children:f.jsx(n,{children:[{title:"202412",ev:["·标签加上特征,缩短标题","·重复标签计数提醒(for 黄鹏)","·解决页面卡死","·隐藏组件自动提交(for 张鹏程)","·集成url转换为钉钉端内打开","·添加一些常用公式","·代码智能提示(for 沈成杰)"]},{title:"202401",ev:["·新增中文变量翻译成英文"]},{title:"202308",ev:["·添加一键导出带列表格","·添加多选快速复制组件fieldId","·添加一键插入数据源"]},{title:"202305",ev:["·添加低代码压缩组件","·增加常用接口快速复制","·增加常用代码快速复制"]},{title:"202304",ev:["·可快速复制自定义页面组件到表单页面","·修正JS面板查询遮挡退出按钮","·可移动机器人到左下角","·默认开发schema开关","·快速复制组件fielId"]}].map(((e,t)=>f.jsx(i,{title:e.title,time:f.jsx("div",{children:e.ev.map(((e,t)=>{const n=e.match(/\(.*?\)/);return n&&n[0]?f.jsxs("div",{children:[e.replace(n[0],""),f.jsx("span",{style:{color:"#FF5733"},children:"　"+n[0]})]},t):f.jsx("div",{children:e},t)}))}),state:"process"},t)))})})]})})},{useState:W,useEffect:V}=y.React,G={width:"98%",margin:"5px"},K=()=>{const{Input:{TextArea:e},Radio:t,Button:n,Tag:i,Radio:{Group:r}}=y.Deep,[o,a]=W("https://"),[s,l]=W("1"),[c,d]=W(""),[p,u]=W("");V((()=>{m();}),[c,s,o]);const m=()=>{const e=c.trim();if(e){const t=-1===e.indexOf("?")?"?":"&",n=h(e);"1"===s?u(`dingtalk://dingtalkclient/page/link?url=${encodeURIComponent(n+t+"ddtab=true")}`):"2"===s&&u(`dingtalk://dingtalkclient/page/link?url=${encodeURIComponent(n)}&pc_slide=true`);}},h=e=>(/^https?:\/\//i.test(e)||(e=o+e),e);return f.jsxs("div",{children:[f.jsx(i,{type:"normal",color:"#2db7f5",style:{margin:"5px 5px 0 5px"},children:"(钉钉链接拼接)"}),f.jsx(e,{placeholder:"请输入基础链接",style:G,rows:2,showLimitHint:!0,"aria-label":"input max length 100",onChange:e=>{d(e),m();}}),f.jsxs(r,{defaultValue:"https://",onChange:e=>{a(e),m();},children:[f.jsx(t,{style:{margin:"5px"},value:"https://",children:" https"}),f.jsx(t,{style:{margin:"5px"},value:"http://",children:" http"})]}),f.jsxs(r,{defaultValue:"1",onChange:e=>{l(e),m();},children:[f.jsx(t,{style:{margin:"5px"},value:"1",children:"钉钉浏览器打开"}),f.jsx(t,{style:{margin:"5px"},value:"2",children:"钉钉侧边栏打开"})]}),f.jsx(e,{placeholder:"拼接后的链接",style:G,rows:2,value:p,readOnly:!0}),f.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[" ",f.jsx(n,{type:"primary",style:{margin:"5px"},onClick:()=>{S(p);},children:"复制拼接后的链接"}),f.jsx(n,{type:"primary",style:{margin:"5px"},onClick:()=>{y.open(p);},children:"调用钉钉客户端打开"})]})]})},Z=()=>{const[e,t]=W(!0);V((()=>{t("false"!==E("yyShortTitile"));}),[]);const{Input:n,ResponsiveGrid:i,Checkbox:r,Tag:o,Switch:a}=y.Deep,{Cell:s}=i,l={border:"1px solid #ddd",borderColor:"#ddd",boxShadow:"rgba(31, 56, 88, 0.2) 1px 1px 4px 0px",borderRadius:"5px"};return f.jsxs("div",{style:O,children:[f.jsx(i,{gap:10,device:"desktop",style:{marginBottom:"5px"},children:f.jsx(s,{style:l,colSpan:12,children:f.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",width:"100%",margin:"5px 5px 0 5px"},children:[f.jsx(o,{type:"normal",color:"#2db7f5",children:"(变量翻译:选中翻译:Ctrl+B 粘贴翻译:Ctrl+V)"}),f.jsx(r,{defaultChecked:"false"!==E("yyBadiduHump"),onChange:e=>{D("yyBadiduHump",e);},children:"驼峰翻译"})]}),f.jsx(n,{defaultValue:E("yyBaiduAppid")||"",style:G,placeholder:"百度翻译appid",size:"small",label:"百度翻译Appid:",onChange:e=>{D("yyBaiduAppid",e);}}),f.jsx(n,{defaultValue:E("yyBaiduKey")||"",style:G,placeholder:"百度翻译key",size:"small",label:"百度翻译KEY:",onChange:e=>{D("yyBaiduKey",e);}}),f.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:f.jsx("p",{style:{margin:"5px",cursor:"pointer",color:"#0099CC"},onClick:()=>{y.open("https://blog.csdn.net/dydn120w/article/details/135648666?spm=1001.2014.3001.5502","_blank");},children:"点击查看百度翻译秘钥申请教程"})})]})})}),f.jsx(i,{gap:10,device:"desktop",children:f.jsx(s,{style:l,colSpan:12,children:f.jsx(K,{})})}),f.jsx(o,{type:"normal",color:"#2db7f5",style:{margin:"5px 5px 5px 5px"},children:"其它设置"}),f.jsx(i,{gap:10,device:"desktop",children:f.jsx(s,{style:l,colSpan:12,children:f.jsx(a,{autoWidth:!0,checkedChildren:"已启用短标题",unCheckedChildren:"已关闭短标题",checked:e,onChange:e=>{D("yyShortTitile",e?"true":"false"),t(e);},style:{margin:"10px"}})})})]})};var X,Q,ee={exports:{}},te={exports:{}};X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&Q.rotl(e,8)|4278255360&Q.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=Q.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],r=0;r<4;r++)8*n+6*r<=8*e.length?t.push(X.charAt(i>>>6*(3-r)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&t.push((X.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|X.indexOf(e.charAt(n))>>>6-2*i);return t}},te.exports=Q;var ne,ie,re,oe,ae,se=te.exports,le={utf8:{stringToBytes:function(e){return le.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(le.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},ce=le,de=function(e){return null!=e&&(pe(e)||function(e){return "function"==typeof e.readFloatLE&&"function"==typeof e.slice&&pe(e.slice(0,0))}(e)||!!e._isBuffer)};function pe(e){return !!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}ne=se,ie=ce.utf8,re=de,oe=ce.bin,(ae=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?oe.stringToBytes(e):ie.stringToBytes(e):re(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=ne.bytesToWords(e),i=8*e.length,r=1732584193,o=-271733879,a=-1732584194,s=271733878,l=0;l<n.length;l++)n[l]=16711935&(n[l]<<8|n[l]>>>24)|4278255360&(n[l]<<24|n[l]>>>8);n[i>>>5]|=128<<i%32,n[14+(i+64>>>9<<4)]=i;var c=ae._ff,d=ae._gg,p=ae._hh,u=ae._ii;for(l=0;l<n.length;l+=16){var m=r,h=o,f=a,g=s;r=c(r,o,a,s,n[l+0],7,-680876936),s=c(s,r,o,a,n[l+1],12,-389564586),a=c(a,s,r,o,n[l+2],17,606105819),o=c(o,a,s,r,n[l+3],22,-1044525330),r=c(r,o,a,s,n[l+4],7,-176418897),s=c(s,r,o,a,n[l+5],12,1200080426),a=c(a,s,r,o,n[l+6],17,-1473231341),o=c(o,a,s,r,n[l+7],22,-45705983),r=c(r,o,a,s,n[l+8],7,1770035416),s=c(s,r,o,a,n[l+9],12,-1958414417),a=c(a,s,r,o,n[l+10],17,-42063),o=c(o,a,s,r,n[l+11],22,-1990404162),r=c(r,o,a,s,n[l+12],7,1804603682),s=c(s,r,o,a,n[l+13],12,-40341101),a=c(a,s,r,o,n[l+14],17,-1502002290),r=d(r,o=c(o,a,s,r,n[l+15],22,1236535329),a,s,n[l+1],5,-165796510),s=d(s,r,o,a,n[l+6],9,-1069501632),a=d(a,s,r,o,n[l+11],14,643717713),o=d(o,a,s,r,n[l+0],20,-373897302),r=d(r,o,a,s,n[l+5],5,-701558691),s=d(s,r,o,a,n[l+10],9,38016083),a=d(a,s,r,o,n[l+15],14,-660478335),o=d(o,a,s,r,n[l+4],20,-405537848),r=d(r,o,a,s,n[l+9],5,568446438),s=d(s,r,o,a,n[l+14],9,-1019803690),a=d(a,s,r,o,n[l+3],14,-187363961),o=d(o,a,s,r,n[l+8],20,1163531501),r=d(r,o,a,s,n[l+13],5,-1444681467),s=d(s,r,o,a,n[l+2],9,-51403784),a=d(a,s,r,o,n[l+7],14,1735328473),r=p(r,o=d(o,a,s,r,n[l+12],20,-1926607734),a,s,n[l+5],4,-378558),s=p(s,r,o,a,n[l+8],11,-2022574463),a=p(a,s,r,o,n[l+11],16,1839030562),o=p(o,a,s,r,n[l+14],23,-35309556),r=p(r,o,a,s,n[l+1],4,-1530992060),s=p(s,r,o,a,n[l+4],11,1272893353),a=p(a,s,r,o,n[l+7],16,-155497632),o=p(o,a,s,r,n[l+10],23,-1094730640),r=p(r,o,a,s,n[l+13],4,681279174),s=p(s,r,o,a,n[l+0],11,-358537222),a=p(a,s,r,o,n[l+3],16,-722521979),o=p(o,a,s,r,n[l+6],23,76029189),r=p(r,o,a,s,n[l+9],4,-640364487),s=p(s,r,o,a,n[l+12],11,-421815835),a=p(a,s,r,o,n[l+15],16,530742520),r=u(r,o=p(o,a,s,r,n[l+2],23,-995338651),a,s,n[l+0],6,-198630844),s=u(s,r,o,a,n[l+7],10,1126891415),a=u(a,s,r,o,n[l+14],15,-1416354905),o=u(o,a,s,r,n[l+5],21,-57434055),r=u(r,o,a,s,n[l+12],6,1700485571),s=u(s,r,o,a,n[l+3],10,-1894986606),a=u(a,s,r,o,n[l+10],15,-1051523),o=u(o,a,s,r,n[l+1],21,-2054922799),r=u(r,o,a,s,n[l+8],6,1873313359),s=u(s,r,o,a,n[l+15],10,-30611744),a=u(a,s,r,o,n[l+6],15,-1560198380),o=u(o,a,s,r,n[l+13],21,1309151649),r=u(r,o,a,s,n[l+4],6,-145523070),s=u(s,r,o,a,n[l+11],10,-1120210379),a=u(a,s,r,o,n[l+2],15,718787259),o=u(o,a,s,r,n[l+9],21,-343485551),r=r+m>>>0,o=o+h>>>0,a=a+f>>>0,s=s+g>>>0;}return ne.endian([r,o,a,s])})._ff=function(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+(r>>>0)+a;return (s<<o|s>>>32-o)+t},ae._gg=function(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+(r>>>0)+a;return (s<<o|s>>>32-o)+t},ae._hh=function(e,t,n,i,r,o,a){var s=e+(t^n^i)+(r>>>0)+a;return (s<<o|s>>>32-o)+t},ae._ii=function(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+(r>>>0)+a;return (s<<o|s>>>32-o)+t},ae._blocksize=16,ae._digestsize=16,ee.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=ne.wordsToBytes(ae(e,t));return t&&t.asBytes?n:t&&t.asString?oe.bytesToString(n):ne.bytesToHex(n)};const ue=t(ee.exports);function me(){return d(this,null,(function*(){const e=setInterval((()=>{const{monaco:t,editor:n}=y;t&&n&&(clearInterval(e),t.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(e,n){const i=e.getLineContent(n.lineNumber);return e.getWordUntilPosition(n),i.substring(0,n.column-1).trim().endsWith("_")?{suggestions:q.reduce(((e,n)=>("常用公式"!==n.title&&n.children.forEach((n=>{e.push({label:`_${n.title}  yy:${n.desc}`,kind:t.languages.CompletionItemKind.Function,insertText:n.showExp,documentation:n.desc});})),e)),[])}:{suggestions:[]}}}),n.addAction({id:"customReplaceCommand",label:"生成英文变量名",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_B],precondition:"editorLangId == 'javascript'",contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){const t=e.getSelection(),n=e.getModel().getValueInRange(t);if(""!==n.trim())return r(n).then((n=>{e.executeEdits("customReplaceCommand",[{range:t,text:n,forceMoveMarkers:!0}]);})),!1}}));}),1e3),t=y.AliLowCodeEngine,{React:n,Deep:i}=y;D("yeyiTestEnable",!1),g("\n        \n        .next-tabs-tabpane { outline: none!important; outline-offset: none !important; -webkit-box-shadow:none; box-shadow: none;}\n        \n        .lc-left-area-bottom div:last-child{ display: block }\n        .editor-widget.find-widget.visible{ right: 30px !important }\n        .vs-link-options path{ fill: black!important }\n        .helper-entry{ right: unset!important; bottom:10%; }\n        .yeyiTab .next-tabs-bar {position: -webkit-sticky; position: sticky;  top: 0 ;}\n    "),y.yeyiVariable={};const r=e=>{if(!e)return Promise.reject(new Error("Source string is required."));const t=E("yyBaiduAppid"),n=E("yyBaiduKey");if(!t||!n)return I.error("请先输入百度翻译appid和key"),Promise.reject(new Error("Please enter your Baidu translation appid and key."));const i=(new Date).getTime(),r=e,o=ue(`${t}${r}${i}${n}`),a=`https://api.fanyi.baidu.com/api/trans/vip/translate?q=${encodeURIComponent(r)}&appid=${t}&salt=${i}&from=zh&to=en&sign=${o}`;return new Promise(((e,t)=>{!function(e,t){var n="jsonp_callback_"+Math.round(1e5*Math.random());y[n]=function(e){delete y[n],document.body.removeChild(i),t(e);};var i=document.createElement("script");i.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,document.body.appendChild(i);}(a,(n=>{if(n&&n.error_code)t(new Error(n.error_msg));else {const t=n.trans_result[0].dst,i="false"===E("yyBadiduHump")?t:function(e){let t=e.split(" ");for(let n=0;n<t.length;n++)t[n]=0===n?t[n].charAt(0).toLowerCase()+t[n].substring(1):t[n].charAt(0).toUpperCase()+t[n].substring(1);return t.join("").replace(/\s+/g,"")}(t);e(i);}}));}))},o=[{id:"a100001",name:"图片压缩配置",editCode:e=>{const{AliLowCodeEngine:t}=y,{id:n,jsxSet:r,jsxComp:o,yeyi:a}=e,{quality:s,maxHeight:d,maxWidth:p}=r,{Grid:u,Card:m,Button:h,NumberPicker:g,Form:x,Select:v}=i,w=x.Item;function b(e){}return f.jsx("div",{className:"site-card-wrapper",children:f.jsxs(u.Row,{gutter:16,children:[f.jsxs(u.Col,{span:14,children:[f.jsx(m,{title:"1.上传组件复制",contentHeight:"400px",children:f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-around",height:"130px",width:"260px"},children:[f.jsx(h,{type:"normal",style:{margin:"0 5px 0 5px"},onClick:()=>{S('{"type":"nodeSchema","componentsMap":{},"componentsTree":[{"componentName":"ImageField","props":{"autoUpload":false,"onSelect":{"type":"JSExpression","value":"this.utils.legaoBuiltin.execEventFlow.bind(this, [function x(){this.params={\\"fieldId\\":\\"\\"};}, this.onSelectYeYi])","events":[{"id":"onSelectYeYi","name":"onSelectYeYi","params":{"fieldId":""},"type":"actionRef"}]}}}]}'),a.dialog.hide();},children:"图片上传组件[压缩]"}),f.jsx(h,{type:"normal",style:{margin:"0 5px 0 5px"},onClick:()=>{S('{"type":"nodeSchema","componentsMap":{},"componentsTree":[{"componentName":"AttachmentField","props":{"autoUpload":false,"onSelect":{"type":"JSExpression","value":"this.utils.legaoBuiltin.execEventFlow.bind(this, [function x(){this.params={\\"fieldId\\":\\"\\"};}, this.onSelectYeYi])","events":[{"id":"onSelectYeYi","name":"onSelectYeYi","params":{"fieldId":""},"type":"actionRef"}]}}}]}'),a.dialog.hide();},children:"附件上传组件[压缩]"})]})}),f.jsx(m,{title:"2.粘贴到JS面板(必要)",contentHeight:"400px",children:f.jsx(h,{type:"normal",onClick:()=>{navigator.clipboard.writeText("export function onSelectYeYi() {\nconst { fieldId } = this.params;\nif (!fieldId) { return this.utils.toast('缺少组件fieldId参数'); }\nthis.batchCompression(...arguments, fieldId);\n}").then((function(){i.Message.show("复制成功"),a.dialog.hide();}));},children:"复制代码(首次)"})})]}),f.jsx(u.Col,{span:10,children:f.jsx(m,{title:"压缩参数设置",contentHeight:"400px",children:f.jsxs(x,c(l({},{labelCol:{fixedSpan:8},wrapperCol:{span:14}}),{colon:!0,children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-around"},children:[f.jsx(w,{name:"quality",label:"压缩率",required:!0,requiredMessage:"压缩率越高,尺寸越大",children:f.jsx(g,{onCorrect:b,defaultValue:s,min:.6,max:.9,step:.1,precision:1})}),f.jsx(w,{name:"maxHeight",label:"输出图片最大高度",required:!0,requiredMessage:"尺寸越大,图片越大,体积越大",children:f.jsx(g,{onCorrect:b,defaultValue:d,min:100,max:1400,step:100})}),f.jsx(w,{name:"maxWidth",label:"输出图片最大宽度",required:!0,requiredMessage:"尺寸越大,图片越大,体积越大",children:f.jsx(g,{onCorrect:b,defaultValue:p,min:100,max:1800,step:100})})]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",width:"100%"},children:f.jsx(x.Submit,{type:"primary",validate:!0,onClick:(e,n)=>{let i="//$$$$\nvar setting="+JSON.stringify(e)+";\n//$$$$",r=t.selection.getNodes()[0],o=r.export();o.props.render.source=o.props.render.source.replace(/(\/\/\$\$)[\s\S]*?(\/\/\$\$)/,i),o.props.render.compiled=o.props.render.compiled.replace(/(\/\/\$\$)[\s\S]*?(\/\/\$\$)/,i),r.import(o),a.dialog.hide();},style:{marginRight:8},children:"保存配置"})})]}))})})]})})}}];function a(){const{Tab:e}=y.Deep;return f.jsxs("div",{children:[f.jsx(A,{}),f.jsxs(e,{excessMode:"dropdown",children:[f.jsx(e.Item,{title:"组件市场",children:f.jsx(k,{jsxComps:o})},"1"),f.jsx(e.Item,{title:"常用接口",children:f.jsx(z,{})},"2"),f.jsx(e.Item,{title:"常用代码",children:f.jsx(J,{})},"3"),f.jsx(e.Item,{title:"其它",children:f.jsx(Z,{})},"4"),f.jsx(e.Item,{title:"关于",children:f.jsx($,{})},"5")]})]})}const s=()=>f.jsx("svg",{viewBox:"0 0 600 600",children:f.jsxs("g",{transform:"translate(-14.755)",children:[f.jsx("circle",{cx:"300",cy:"300",r:"284.5",fill:"#fff",stroke:"#000","stroke-width":"10"}),f.jsx("circle",{cx:"300",cy:"300",r:"201",fill:"#fff",stroke:"#000","stroke-width":"10"}),f.jsx("path",{d:"M65.253 436.09a150 150 0 0 0 252.176-53.218l-3.17-15.49a70 70 0 0 1-77.32-93.924l-18.66-12.32c24.51 72.452-74.055 221.734-153.026 174.952m473.01-.938A150 150 0 0 0 366.087 243.37l-11.83 10.49a70 70 0 0 1-42.68 113.923l-1.34 22.32c50.49-57.451 229.055-46.733 228.026 45.049M301 26a150 150 0 0 0-80 245l15 5a70 70 0 0 1 120-20l20-10c-75-15-155-175-75-220",style:{fill:"#000"}})]})});t.skeleton.add({area:"leftArea",type:"PanelDock",name:"yeyiTools",content:f.jsx(a,{}),props:{align:"left",icon:f.jsx(s,{}),description:"宜搭 Tools"},panelProps:{floatable:!0,hidenameBar:!1,name:"宜搭 Tools",width:500,enableDrag:!0,hideTitleBar:!0}}),t.designerCabin.addBuiltinComponentAction({name:"yida-jsx",content:{icon:f.jsx(v,{type:"icon-setting"}),title:"压缩配置",action:e=>d(this,null,(function*(){const t=e.propsData.render.source,n=t.match(/\/\/{id=(.*?)}\/\//);let r=n?n[1]:null;if(!r)return;r=String(r.replace(/\s/g,""));const a=t.match(new RegExp("\\/\\/\\$\\$(.*?)\\/\\/\\$\\$","s")),s=a?a[1]:null;let l={},c=s.indexOf("{"),d=s.lastIndexOf("}"),p=s.substring(c,d+1);l=JSON.parse(p);let u,m=o.filter((e=>e.id===r))[0]||null,h="true"===E("yeyiTestEnable")&&E("yeyiEditCode")||m&&m.editCode;h&&(u=i.Dialog.show({footer:!1,title:(m&&m.name||"测试模式")+" 配置:",closeMode:["esc","close"],content:h({id:r,jsxSet:l,currentJsx:m,yeyi:y.yeyiVariable})}),y.yeyiVariable.dialog=u);}))},important:!0,condition:e=>{var t,n;if((null==(n=null==(t=null==e?void 0:e.propsData)?void 0:t.onSelect)?void 0:n.events)&&e.propsData.onSelect.events.some((t=>{if(t.id.includes("onSelectYeYi"))return t.params.fieldId=e.schema.props.fieldId,!0}))&&(e.propsData.onSelect.value=e.propsData.onSelect.value.replace(/("fieldId":")[^"]*"/g,`"fieldId":"${e.schema.props.fieldId}"`)),!e.propsData||!e.propsData.render||!e.propsData.render.source)return !1;const i=e.propsData.render.source.match(/\/\/{id=(.*?)}\/\//);return !(!i||!i[1])}}),t.designerCabin.addBuiltinComponentAction({name:"复制组件自动追加前缀",content:{icon:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",class:"icon",viewBox:"0 0 1024 1024",children:f.jsx("path",{fill:"#fff",d:"M925.919 461.983 537.58 237.774c-45.497-26.268-82.722-4.776-82.722 47.76v169.503H63.676v119.93h391.182v158.985c0 52.535 37.225 74.027 82.722 47.76l388.339-224.209c45.496-26.269 45.496-69.253 0-95.52zm-149.516 82.056H674.01v102.916h-58.512V544.039H513.105V485.53h102.393V382.614h58.512V485.53h102.394v58.509z"})}),title:f.jsxs("div",{children:[f.jsx("div",{children:"<复制组件>"}),f.jsx("div",{children:"fieldId追加前缀"})]}),action(e){let n;i.Dialog.show({footer:!0,title:"输入需要拼接的前缀",closeMode:["esc","close"],content:f.jsxs("div",{children:[f.jsx("div",{children:"必须以字母开头,不宜过长"}),f.jsx("div",{children:"例-拼接后: 前缀textField_lypv96ut"}),f.jsx(i.Input,{autoFocus:!0,onChange:e=>{n=e;}})]}),onOk:()=>{const e=t.designer.currentSelection._selected;S(JSON.stringify(e.reduce(((e,i,r)=>{const o=t.project.currentDocument.getNode(i).export();return o.props.fieldId=(n||"")+(o.props.fieldId||""),e.componentsTree.push(o),e}),{type:"nodeSchema",componentsMap:{},componentsTree:[]})));}});}},important:!0,condition:!0});let p=[];t.designerCabin.addBuiltinComponentAction({name:"复制组件fieldId",content:{icon:f.jsx(s,{}),title:"复制组件fieldId",action(e){const n=t.designer.currentSelection._selected;if(1===n.length){const t=(null==(null==e?void 0:e.propsData)?void 0:e.propsData.fieldId)||e.id;S(t,!1,t);}else S(n.reduce(((e,n,i)=>{const r=t.project.currentDocument.getNode(n).propsData;return e+`{title: "${r.label&&r.label.zh_CN||"无名"}", fieldId: "${r.fieldId}"},\n`}),"[\n")+"]",!1,"ID批量");}},important:!0,condition:e=>{if(!p.includes(e.id)&&void 0!==e.propsData.submittable){let t=function(...t){const[{key:i,newValue:r}]=t;"behavior"===i&&"HIDDEN"===r&&(e.setPropValue("submittable","ALWAYS"),I.notice("该组件已自动设置始终提交")),n(...t);};const n=e.emitter._events.propChange;e.emitter._events.propChange=t,p.push(e.id);}return !0}}),t.designerCabin.addBuiltinComponentAction({name:"循环渲染",content:{icon:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",class:"icon",viewBox:"0 0 1024 1024",children:[f.jsx("path",{fill:"#fff",d:"m681.946 687.009.114-91.814S561.576 747.65 561.576 809.541c0 61.835 120.484 214.402 120.484 214.402l-.114-91.586h120.257a82.996 82.996 0 0 0 72.813-42.664l148.927-265.03a120.94 120.94 0 0 1-105.978 62.29H681.889h.057zm68.15-612.944A95.397 95.397 0 0 0 667.61 25.03c-33.96 0-65.476 19.113-82.143 49.49 0 0-27.703 48.979-55.577 98.81l56.203 99.835-78.161 44.94s188.86 30.946 241.195-.114c52.107-30.889 120.598-214.345 120.598-214.345l-77.365 46.02s-30.15-54.155-42.266-75.658z"}),f.jsx("path",{fill:"#fff",d:"M1004.09 612.375c17.066-30.49 16.838-67.637-.455-97.9L896.462 323.907 689.57 446.61l120.598 214.345h111.04a94.317 94.317 0 0 0 82.883-48.58zm-719.775-49.889 77.364 46.02s-68.262-183.513-120.597-214.402c-52.164-30.889-241.082 0-241.082 0l77.535 45.68L17.35 546.843a87.32 87.32 0 0 0-.455 86.01l148.927 264.918a127.993 127.993 0 0 1 .512-125.377l117.98-209.908z"}),f.jsx("path",{fill:"#fff",d:"M186.244 886.28c17.009 30.32 48.75 48.921 82.712 48.694h214.459V689.683h-241.31c-27.873 49.718-55.52 98.81-55.634 98.924a99.322 99.322 0 0 0-.227 97.616zm-13.596-619.827 207.633 123.1S536.148 112.065 564.534 61.892C586.321 23.323 624.833 0 668.35 0H370.44c-31.003 0-57.227 17.919-72.302 43.233C271.8 87.15 172.648 266.51 172.648 266.51z"})]}),title:"绑定循环变量",action(e){const{AliLowCodeEngine:t}=y;let n,r=t.selection.getNodes()[0],o=r.export(),{variable:a=""}=o.loop||{};i.Dialog.show({footer:!0,title:"循环渲染-绑定变量",closeMode:["esc","close"],content:f.jsxs("div",{children:[f.jsx("div",{children:"例如:state.arr"}),f.jsx("div",{children:"state 就是数据源"}),f.jsx("div",{children:"arr就是其中的变量"}),f.jsx(i.Input,{autoFocus:!0,defaultValue:a,onChange:e=>{n=e;}})]}),onOk:()=>{void 0!==n&&a!==n&&(n?o.loop={type:"variable",value:"[]",variable:n}:delete o.loop,r.import(o));}});}},important:!0,condition:e=>["Text","LinkBlock","PageSection","ColumnsLayout","Button","Div"].includes(e.componentName)}),t.designerCabin.addBuiltinComponentAction({name:"fieldId重命名",content:{icon:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",class:"icon",viewBox:"0 0 1024 1024",children:f.jsx("path",{fill:"#fff",d:"M64.7 772.6v186h186l548.8-548.7-186.1-186.1zM943.4 266c9.3-9.3 14.5-21.9 14.5-35.1 0-13.1-5.2-25.7-14.5-35l-116.1-116c-9.3-9.3-21.9-14.6-35-14.6-13.2 0-25.7 5.2-35 14.6l-90.8 90.7 186.1 186.1 90.8-90.7zm-245 616.4H549.3c-20.6 0-37.3 16.7-37.3 37.3 0 20.6 16.7 37.3 37.3 37.3h149.1c20.6 0 37.3-16.7 37.3-37.3 0-20.6-16.7-37.3-37.3-37.3zm223.7 0h-74.6c-20.6 0-37.3 16.7-37.3 37.3 0 20.6 16.7 37.3 37.3 37.3h74.6c20.6 0 37.3-16.7 37.3-37.3-.1-20.6-16.8-37.3-37.3-37.3z",class:"selected","data-spm-anchor-id":"a313x.search_index.0.i7.2b643a81vEN2yw"})}),title:"fieldId重命名",action(e){const{AliLowCodeEngine:t}=y;let n,r=t.selection.getNodes()[0],o=r.export(),{fieldId:a=""}=o.props||{};i.Dialog.show({footer:!0,title:"fieldId重命名",closeMode:["esc","close"],content:f.jsx("div",{children:f.jsx(i.Input,{autoFocus:!0,defaultValue:a,onChange:e=>{n=e;}})}),onOk:()=>{void 0!==n&&a!==n&&""!==n&&(o.props.fieldId=n,r.import(o));}});}},important:!0,condition:!0}),t.skeleton.add({area:"topArea",type:"Widget",name:"logo",content:f.jsx(y.Next.Button,{children:"提交数据"}),contentProps:{onClick:function(){y.open(`${y.origin}/${y.pageConfig.appType}/submission/${y.pageConfig.formUuid}`);}},props:{align:"right",width:100}});}))}(()=>{if(y.self!==y.top)return;const e=y.location.href;window.yyChannel=new BroadcastChannel("myCommunicationChannel"),window.yyRandomNum=Math.random();const t={randomNum:window.yyRandomNum,requestHref:!0};let n;window.yyHrefCount=1,window.yyChannel.postMessage(t);let i=!1;window.yyChannel.addEventListener("message",(t=>{if(t.data.randomNum===window.yyRandomNum&&t.data.href)return e===t.data.href&&(window.yyHrefCount=window.yyHrefCount+1),i=!0,clearTimeout(n),void(n=setTimeout((()=>{he();}),200));if(t.data.requestHref){const e={randomNum:t.data.randomNum,href:window.location.href};window.yyChannel.postMessage(e);}})),setTimeout((()=>{i||he();}),300);})(),(()=>{const e=y.location.href;e.includes("newDesigner")&&e.includes("processCode")&&g(".variable-input-wrapper .message-formula-editor.link {height:auto} .variable-input-wrapper .message-formula-editor.link .formula-pane {height: 120px}.helper-entry{right:unset!important;bottom:10%;}");})();const he=()=>d(e,null,(function*(){if(null===E("yyShortTitile")&&D("yyShortTitile","true"),"true"===E("yyShortTitile")){const i={"卡片设计":{titleClass:".nav-brandPageTitle-container",icon:"icon-icon_daqiasiji"},"流程设置":{titleClass:".nav-brandPageTitle-container",icon:"icon-liucheng-copy"},"集成自动化设置":{titleClass:".nav-brandPageTitle-container",icon:"icon-formula-sync"},"应用设置":{titleClass:".nav-brandTitle-container",icon:"icon-shezhi"},"表单设置":{titleClass:".nav-brandPageTitle-container",icon:"icon-shezhi"},"集成自动化":{titleClass:".nav-brandTitle-container",icon:"icon-shezhizhongxin-"},"自定义页面设计":{titleClass:".nav-brandPageTitle-container",icon:"icon-zidingyiyemian"},"普通表单页面设计":{titleClass:".nav-brandPageTitle-container",icon:"icon-liebiao-putongbiaodan-copy"},"流程表单页面设计":{titleClass:".nav-brandPageTitle-container",icon:"icon-liuchengbiaodan_liuchengbiaodan-copy"},"报表设计":{titleClass:".nav-brandPageTitle-container",icon:"icon-baobiao"},"设计器主页":{titleClass:".nav-brandTitle-container",icon:"icon-shouye"},"自定义页":{titleClass:"pre",icon:"icon-zidingyiyemian-copy"},"普通表单":{titleClass:"sub",icon:"icon-liebiao-putongbiaodan"},"流程表单":{titleClass:"sub",icon:"icon-liuchengbiaodan_liuchengbiaodan"},"报表":{titleClass:"pre",icon:"icon-baobiao-copy"},"聚合表设计页":{titleClass:".nav-brandPageTitle-container",icon:"icon-juhebiao"},"表单详情页":{titleClass:"formdet",icon:"icon-xiangqing"},"流程详情页":{titleClass:"porcdet",icon:"icon-xiangqing"},"其他页面":{}},r=(()=>{const{formType:e}=y.pageConfig||{},{href:t}=y.location;if(t.includes("card.dingtalk.com/editor"))return "卡片设计";if(t.includes("design/newDesigner?processCode"))return "流程设置";if(t.includes("design/newDesigner.html"))return "集成自动化设置";if(/https:\/\/.*\.aliwork\.com\/APP_\w+\/admin\/appSetting\/.*/.test(t))return "应用设置";if(/^https:\/\/.*\.aliwork\.com\/APP_\w+\/admin\/FORM-\w+\/settings\/.*/.test(t)||t.includes("settings/permission"))return "表单设置";if(/https:\/\/.*\.aliwork\.com\/APP_\w+\/admin\/logicFlow/.test(t))return "集成自动化";if(t.includes("design/pageDesigner")){if("display"===e)return "自定义页面设计";if("receipt"===e)return "普通表单页面设计";if("process"===e)return "流程表单页面设计"}if(t.includes("report/vigoDesigner"))return "报表设计";if(/https:\/\/.*\.aliwork\.com\/APP_\w+\/admin\/(?!logicFlow|appSetting\/).*/.test(t))return "设计器主页";if(t.includes("submission")||t.includes("preview")||t.includes("custom")){if("display"===e)return "自定义页";if("receipt"===e)return "普通表单";if("process"===e)return "流程表单";if("report"===e)return "报表"}return t.includes("formDetail")?"表单详情页":t.includes("processDetail")?"流程详情页":t.includes("design/virtualViewDesigner.html")?"聚合表设计页":"其他页面"})(),{titleClass:o,icon:a}=i[r];if(a){let i="";if("pre"===o||"sub"===o||"formdet"===o||"porcdet"===o){let e="";yield new Promise((t=>{const n=setInterval((()=>{if(e=y.document.querySelector("title").textContent,e)if("formdet"===o||"porcdet"===o){const r=y.document.querySelector(".detail-title").textContent;r&&(i=e.split("|")["formdet"===o?1:0],i&&(i=i.replace(/\s+/g,"")+" "+r.split("发起")[0].replace(/\s+/g,"")),clearInterval(n),t(!0));}else i=e.split("|")[0],clearInterval(n),t(!0);}),200);setTimeout((()=>{clearInterval(n);}),5e3);}));}else i=yield(n=o,new Promise(((e,t)=>{const i=setInterval((()=>{const t=y.document.querySelector(n);if(t){clearInterval(i);const n=t.querySelector("span"),r=n.textContent||n.innerText;return e(r)}}),500);setTimeout((()=>{clearInterval(i);}),3e4);})));yield T("//at.alicdn.com/t/c/font_4780297_mx91adw1on.js"),((e,t)=>{const n=(new DOMParser).parseFromString(e,"image/svg+xml").getElementById(t);if(n){let e=(new XMLSerializer).serializeToString(n);e=e.replace(/<symbol\s+[^>]*>/g,'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="128" height="128">'),e=e.replace(/<\/symbol>/g,"</svg>");const t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(t),r=new Image;r.onload=()=>{const e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0);const t=e.toDataURL("image/png");let n=document.querySelector("link[rel='icon']"),o=document.querySelector("link[rel='shortcut icon']");n&&(n.type="image/png",n.href=t),o&&(o.type="image/png",o.href=t),URL.revokeObjectURL(i);},r.onerror=()=>{},r.src=i;}})(y._iconfont_svg_string_4780297,a),i&&(t=(1===window.yyHrefCount?"":window.yyHrefCount)+i,d(e,null,(function*(){y.document.querySelector("title").textContent=t;})));}}var t,n;}));let fe=null;(()=>{function e(){fe=setTimeout((()=>{clearTimeout(fe);const e={randomNum:window.yyRandomNum,requestHref:!0};window.yyHrefCount=1,window.yyChannel&&window.yyChannel.postMessage(e);}),200);}window.addEventListener("popstate",e),window.addEventListener("hashchange",e),function(t){var n=t.pushState;t.pushState=function(e,i,r){return "function"==typeof t.onpushstate&&t.onpushstate({state:e,title:i,url:r}),n.apply(t,arguments)};var i=t.replaceState;t.replaceState=function(e,n,r){return "function"==typeof t.onreplacestate&&t.onreplacestate({state:e,title:n,url:r}),i.apply(t,arguments)},t.onpushstate=e,t.onreplacestate=e;}(y.history);})();const ge=/^https:\/\/[^.]+\.aliwork\.com\/(alibaba|dingtalk)\/web\/[^\/]+\/design\/.*/;if(ye=y.location.href,ge.test(ye)){let e=0;const t=setInterval((()=>{if(20===e)return clearInterval(t);e++,y.LeGao&&y.AliLowCodeEngine&&y.__VcDeepYidaUtils__&&y.React&&(me(),clearInterval(t));}),200);}var ye;}},function(){return m||(0, u[i(u)[0]])((m={exports:{}}).exports,m),m.exports});h();

})(unsafeWindow.React);