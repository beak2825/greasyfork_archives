// ==UserScript==
// @name         YouTube PiP
// @namespace    https://github.com/dmitroderkach/youtube-pip
// @version      1.0.3
// @description  Smart Picture-in-Picture mode with all YouTube controls and functions
// @author       Dmytro Derkach
// @match        https://www.youtube.com/*
// @grant        none
// @homepageURL  https://github.com/dmitroderkach/youtube-pip
// @supportURL   https://github.com/dmitroderkach/youtube-pip/issues
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/564173/YouTube%20PiP.user.js
// @updateURL https://update.greasyfork.org/scripts/564173/YouTube%20PiP.meta.js
// ==/UserScript==


!function(){"use strict";const e=5e3,t=100,n=480,i=270,r=600,o={MINIPLAYER_KEY:"i",KEY_CODE:73,WHICH:73},s=-1,a=1,l="LIKE",c="DISLIKE",d="INDIFFERENT",u="WEB_PAGE_TYPE_WATCH";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p={exports:{}};p.exports=function(){var e=1e3,t=6e4,n=36e5,i="millisecond",r="second",o="minute",s="hour",a="day",l="week",c="month",d="quarter",u="year",h="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},f=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},w={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+f(i,2,"0")+":"+f(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(i,c),o=n-r<0,s=t.clone().add(i+(o?-1:1),c);return+(-(i+(n-r)/(o?r-s:s-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:l,d:a,D:h,h:s,m:o,s:r,ms:i,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",v={};v[b]=m;var P="$isDayjsObject",M=function(e){return e instanceof x||!(!e||!e[P])},S=function e(t,n,i){var r;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();v[o]&&(r=o),n&&(v[o]=n,r=o);var s=t.split("-");if(!r&&s.length>1)return e(s[0])}else{var a=t.name;v[a]=t,r=a}return!i&&r&&(b=r),r||!i&&b},$=function(e,t){if(M(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new x(n)},E=w;E.l=S,E.i=M,E.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var x=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[P]=!0}var f=m.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(y);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return E},f.isValid=function(){return!(this.$d.toString()===p)},f.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return $(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<$(e)},f.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var n=this,i=!!E.u(t)||t,d=E.p(e),p=function(e,t){var r=E.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?r:r.endOf(a)},y=function(e,t){return E.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,f=this.$D,w="set"+(this.$u?"UTC":"");switch(d){case u:return i?p(1,0):p(31,11);case c:return i?p(1,m):p(0,m+1);case l:var b=this.$locale().weekStart||0,v=(g<b?g+7:g)-b;return p(i?f-v:f+(6-v),m);case a:case h:return y(w+"Hours",0);case s:return y(w+"Minutes",1);case o:return y(w+"Seconds",2);case r:return y(w+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var n,l=E.p(e),d="set"+(this.$u?"UTC":""),p=(n={},n[a]=d+"Date",n[h]=d+"Date",n[c]=d+"Month",n[u]=d+"FullYear",n[s]=d+"Hours",n[o]=d+"Minutes",n[r]=d+"Seconds",n[i]=d+"Milliseconds",n)[l],y=l===a?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(h,1);g.$d[p](y),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](y);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[E.p(e)]()},f.add=function(i,d){var h,p=this;i=Number(i);var y=E.p(d),g=function(e){var t=$(p);return E.w(t.date(t.date()+Math.round(e*i)),p)};if(y===c)return this.set(c,this.$M+i);if(y===u)return this.set(u,this.$y+i);if(y===a)return g(1);if(y===l)return g(7);var m=(h={},h[o]=t,h[s]=n,h[r]=e,h)[y]||1,f=this.$d.getTime()+i*m;return E.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=E.z(this),o=this.$H,s=this.$m,a=this.$M,l=n.weekdays,c=n.months,d=n.meridiem,u=function(e,n,r,o){return e&&(e[n]||e(t,i))||r[n].slice(0,o)},h=function(e){return E.s(o%12||12,e,"0")},y=d||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(g,function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return a+1;case"MM":return E.s(a+1,2,"0");case"MMM":return u(n.monthsShort,a,c,3);case"MMMM":return u(c,a);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,l,2);case"ddd":return u(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return E.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return y(o,s,!0);case"A":return y(o,s,!1);case"m":return String(s);case"mm":return E.s(s,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(i,h,p){var y,g=this,m=E.p(h),f=$(i),w=(f.utcOffset()-this.utcOffset())*t,b=this-f,v=function(){return E.m(g,f)};switch(m){case u:y=v()/12;break;case c:y=v();break;case d:y=v()/3;break;case l:y=(b-w)/6048e5;break;case a:y=(b-w)/864e5;break;case s:y=b/n;break;case o:y=b/t;break;case r:y=b/e;break;default:y=b}return p?y:E.a(y)},f.daysInMonth=function(){return this.endOf(c).$D},f.$locale=function(){return v[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=S(e,t,!0);return i&&(n.$L=i),n},f.clone=function(){return E.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},m}(),W=x.prototype;return $.prototype=W,[["$ms",i],["$s",r],["$m",o],["$H",s],["$W",a],["$M",c],["$y",u],["$D",h]].forEach(function(e){W[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),$.extend=function(e,t){return e.$i||(e(t,x,$),e.$i=!0),$},$.locale=S,$.isDayjs=M,$.unix=function(e){return $(1e3*e)},$.en=v[b],$.Ls=v,$.p={},$}();const y=h(p.exports),g=class e{constructor(e){this.scope=e}static getInstance(t){e.storageListenerAdded||(e.enabled=e.checkDebugFlag(),window.addEventListener("storage",()=>{e.enabled=e.checkDebugFlag()}),e.storageListenerAdded=!0);let n=e.instances.get(t);return n||(n=new e(t),e.instances.set(t,n)),n}static checkDebugFlag(){try{return"true"===localStorage.getItem("YOUTUBE_PIP_DEBUG")}catch{return!1}}styled(e,t,n,i){const r=y().format("YYYY-MM-DD:HH:mm:ss.SSS"),o=n.replace(/%/g,"%%");var s;e(`%c${r}%c [YouTube PiP]%c${s=this.scope,`[${s}]`}%c ${o}`,"color: #3b82f6; font-weight: 500;","color: #6366f1; font-weight: 600;","color: #f59e0b; font-weight: 500;",t,...void 0!==i?[i]:[])}log(t,n){e.enabled&&this.styled(console.log.bind(console),"color: #86efac;",t,n)}warn(t,n){e.enabled&&this.styled(console.warn.bind(console),"color: #fde047;",t,n)}error(e,t){this.styled(console.error.bind(console),"color: #f87171;",e,t)}debug(t,n){e.enabled&&this.styled(console.debug.bind(console),"color: #a1a1aa;",t,n)}};g.instances=new Map,g.enabled=!1,g.storageListenerAdded=!1;let m=g;const f="ytd-miniplayer",w="ytd-miniplayer-player-container",b=".ytdMiniplayerComponentHost.ytdMiniplayerComponentVisible",v="#movie_player",P="ytd-app",M="yt-draggable",S=".html5-video-player",$=".ytp-popup.ytp-contextmenu",E=".ytp-contextmenu",x=".yt-spec-button-shape-next[aria-expanded]",W=".ytdMiniplayerComponentPlaylistPanel",C=".ytp-progress-bar",D="ytd-slim-metadata-toggle-button-renderer",O=".yt-spec-button-shape-next",k=".yt-simple-endpoint",I="button",H='style, link[rel="stylesheet"]',T=m.getInstance("MiniPlayerController");class z{isVisible(){const e=!!document.querySelector(b);return T.debug(`Mini player visible: ${e}`),e}toggle(e=!1){const t=this.isVisible();if(e&&t)return void T.debug("Mini player already visible, skipping toggle");T.debug(`Toggling mini player (forceShow: ${e})`);const n={key:o.MINIPLAYER_KEY,code:`Key${o.MINIPLAYER_KEY.toUpperCase()}`,keyCode:o.KEY_CODE,which:o.WHICH,bubbles:!0,cancelable:!0,composed:!0},i=document.querySelector(v)||document;try{i.dispatchEvent(new KeyboardEvent("keydown",n)),i.dispatchEvent(new KeyboardEvent("keyup",n)),T.debug("Mini player toggle events dispatched")}catch(r){T.error("Error toggling mini player:",r)}}show(){this.isVisible()||this.toggle(!0)}hide(){this.isVisible()&&this.toggle(!1)}}const A=m.getInstance("DOMUtils");class L{static createPlaceholder(e){return document.createComment(e)}static insertPlaceholderBefore(e,t){const n=e.parentNode;return n?(n.insertBefore(t,e),A.debug("Placeholder inserted"),!0):(A.warn("insertPlaceholderBefore: element has no parent"),!1)}static restoreElementFromPlaceholder(e,t){const n=t.parentNode;n?(n.insertBefore(e,t),t.remove(),A.debug("Element restored from placeholder")):A.warn("restoreElementFromPlaceholder: placeholder has no parent")}static copyAttributes(e,t){if(e&&t)try{Array.from(e.attributes).forEach(e=>{try{t.setAttribute(e.nodeName,e.nodeValue||"")}catch(n){A.warn(`Failed to copy attribute ${e.nodeName}:`,n)}}),A.debug("Attributes copied successfully")}catch(n){A.error("Error copying attributes:",n)}else A.warn("copyAttributes: source or target is null")}static unwrap(e){if(!e)return void A.warn("unwrap: wrapper is null");const t=e.parentNode;if(t)try{for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),A.debug("Element unwrapped successfully")}catch(n){A.error("Error unwrapping element:",n)}else A.warn("unwrap: Element has no parent node")}static waitForElementSelector(t,n=document,i=e,r){return new Promise((e,o)=>{const s=n.querySelector(t);if(s)return A.debug(`Element found immediately: ${t}`),e(s);A.debug(`Waiting for element: ${t}`);const a=new MutationObserver((i,r)=>{const o=n.querySelector(t);o&&(A.debug(`Element appeared: ${t}`),r.disconnect(),e(o))}),l=n===document?document.body:n;l?(a.observe(l,{childList:!0,subtree:!0}),i>0&&setTimeout(()=>{a.disconnect(),o(new Error(`Timeout: ${t} not found`))},i),0===i&&r&&!r.closed&&r.addEventListener("pagehide",()=>{a.disconnect(),o(new Error("Wait aborted: target window closed"))},{once:!0})):o(new Error(`Target element not found for selector: ${t}`))})}}const _=m.getInstance("PlayerManager");class F{constructor(){this.wasPlaying=!1}getPlayerState(e){return e?e.getPlayerState():s}isPlaying(e){return this.getPlayerState(e)===a}savePlayingState(e){this.wasPlaying=this.isPlaying(e),_.debug(`Player state saved: wasPlaying = ${this.wasPlaying}`)}async restorePlayingState(e){if(this.wasPlaying&&e)try{"function"==typeof e.playVideo&&(e.playVideo(),_.log("Playback restored after return to main window"))}catch(t){_.error("Error restoring playback:",t)}else _.debug("No need to restore playing state")}getVideoData(e){return e&&"function"==typeof e.getVideoData&&e.getVideoData()||null}async waitForMainPlayer(){try{const t=await L.waitForElementSelector(v,document,e);return _.debug("Main player is ready"),t}catch(t){return _.error("Error waiting for main player:",t),null}}resetState(){this.wasPlaying=!1,_.debug("Player state reset")}}const Y=m.getInstance("NavigationHandler");class N{constructor(){this.pipWindow=null}initialize(e){this.pipWindow=e,this.setupClickHandler(),Y.debug("Navigation handler initialized")}setupClickHandler(){this.pipWindow?this.pipWindow.document.addEventListener("click",e=>{var t,n;const i=this.pipWindow.document.querySelector(S);i&&"focus"in i&&"function"==typeof i.focus&&i.focus();const r=null==(t=e.target)?void 0:t.closest(k);if((null==(n=e.target)?void 0:n.closest(I))||!r)return;const o=r.href;if(o){Y.log("Navigation click detected");try{const t=new URL(o),n=Object.fromEntries(t.searchParams);e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const i={endpoint:{commandMetadata:{webCommandMetadata:{url:o,webPageType:u,rootVe:3832}},watchEndpoint:{videoId:n.v,playlistId:n.list||null,index:n.index?parseInt(n.index)-1:0,params:"OAE%3D",playerParams:n.pp}},entryTime:performance.now()};Y.log(`SPA navigation via yt-navigate: ${o}`),window.dispatchEvent(new PopStateEvent("popstate",{state:i}))}catch(s){Y.error("Error handling navigation:",s)}}},!0):Y.error("PiP window not available for navigation handler")}cleanup(){this.pipWindow=null,Y.debug("Navigation handler cleaned up")}}const B=m.getInstance("StyleUtils");class R{static copyStyles(e,t){try{const n=e.querySelectorAll(H);B.debug(`Copying ${n.length} style elements`),n.forEach(e=>{try{t.head.appendChild(e.cloneNode(!0))}catch(n){B.warn("Failed to copy style node:",n)}}),B.debug("Styles copied successfully")}catch(n){B.error("Error copying styles:",n)}}static injectCSSFixes(e){try{const t=e.createElement("style");t.textContent="/**\n * CSS styles for PiP window fixes and customizations\n */\nytd-miniplayer {\n  left: 0 !important;\n  right: 0 !important;\n  top: 0 !important;\n  bottom: 0 !important;\n  width: 100% !important;\n  height: 100% !important;\n  max-height: 100% !important;\n  display: flex !important;\n}\n\nytd-miniplayer-player-container {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.html5-video-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.html5-video-container .html5-main-video {\n  width: 100% !important;\n  height: 100% !important;\n  object-fit: contain;\n}\n\nvideo {\n  left: 0 !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n}\n\n.ytDraggableComponentHost.ytdMiniplayerComponentDraggable {\n  pointer-events: auto !important;\n}\n\n.ytp-miniplayer-expand-watch-page-button,\n.ytp-miniplayer-close-button,\n#header-contents,\n.ytdMiniplayerComponentResizers {\n  display: none !important;\n}\n\n/* Stretch progress bar to full width */\n.ytp-progress-bar-container,\n.ytp-progress-bar {\n  width: 100% !important;\n}\n\n.ytp-prev-button,\n.ytp-next-button {\n  display: inline-flex !important;\n}\n",e.head.appendChild(t),B.debug("CSS fixes injected successfully")}catch(t){B.error("Error injecting CSS fixes:",t)}}}const q=m.getInstance("PiPManager");class V{constructor(e,t,n,i){this.pipWindow=null,this.miniplayer=null,this.miniPlayerContainer=null,this.placeholder=null,this.wasMiniPlayerActiveBeforePiP=!1,this.onBeforeReturn=null,this.miniPlayerController=e,this.playerManager=t,this.navigationHandler=n,this.onWindowReady=i}isOpen(){return null!==this.pipWindow&&!this.pipWindow.closed}getWindow(){return this.pipWindow}async open(){if(this.isOpen())q.warn("PiP window already open");else{q.log("Opening PiP window");try{if(await this.movePlayerToPIP(),this.pipWindow&&this.miniplayer){this.pipWindow.addEventListener("pagehide",()=>this.returnPlayerToMain()),this.navigationHandler.initialize(this.pipWindow);const e=await this.onWindowReady(this.pipWindow,this.miniplayer);"function"==typeof e&&(this.onBeforeReturn=e)}}catch(e){throw q.error("Error opening PiP:",e),e}}}async movePlayerToPIP(){var e,t;if(this.miniplayer=document.querySelector(f),!this.miniplayer)throw new Error("Mini player element not found");this.wasMiniPlayerActiveBeforePiP=this.miniPlayerController.isVisible(),this.miniPlayerController.toggle(!0),await L.waitForElementSelector(w),q.debug("Mini player container ready");const r=this.miniplayer.offsetWidth||n,o=this.miniplayer.offsetHeight||i;q.debug(`Requesting PiP window: ${r}x${o}`);const s=window.documentPictureInPicture;if(!s)throw new Error("Document Picture-in-Picture API not available");this.pipWindow=await s.requestWindow({width:r,height:o}),q.log("PiP window opened");const a=this.pipWindow.document;L.copyAttributes(document.documentElement,a.documentElement),L.copyAttributes(document.body,a.body),R.copyStyles(document,a),R.injectCSSFixes(a);const l=(null==(t=null==(e=window.navigator.mediaSession)?void 0:e.metadata)?void 0:t.title)||"";this.setWindowsTitle(l);const c=document.querySelector(P);if(c&&this.pipWindow){const e=a.createElement("ytd-app");L.copyAttributes(c,e),a.body.appendChild(e)}this.miniPlayerContainer=document.querySelector(w),this.placeholder=L.createPlaceholder("mini_player_placeholder"),L.insertPlaceholderBefore(this.miniplayer,this.placeholder);const d=this.pipWindow.document.querySelector(P);d&&this.miniplayer&&d.appendChild(this.miniplayer);const u=a.querySelector(M);u&&this.miniPlayerContainer&&u.prepend(this.miniPlayerContainer),L.unwrap(u);const h=a.querySelector(S);h&&"focus"in h&&"function"==typeof h.focus&&h.focus()}async returnPlayerToMain(){if(q.log("Returning player to main window"),this.placeholder&&this.miniplayer){if(this.onBeforeReturn){try{await this.onBeforeReturn()}catch(e){q.error("Error in onBeforeReturn:",e)}this.onBeforeReturn=null}await this.movePlayerToMain(),this.pipWindow=null,this.navigationHandler.cleanup()}else q.warn("Placeholder or miniplayer not found")}async movePlayerToMain(){if(!this.placeholder||!this.miniplayer)return;const e=this.miniplayer.querySelector(v);this.playerManager.savePlayingState(e),L.restoreElementFromPlaceholder(this.miniplayer,this.placeholder),this.placeholder=null;const n=document.querySelector(M);n&&this.miniPlayerContainer&&n.prepend(this.miniPlayerContainer),this.miniPlayerController.toggle(!0),await this.playerManager.waitForMainPlayer();const i=document.querySelector(w);i&&i.remove(),setTimeout(async()=>{if(await this.playerManager.restorePlayingState(e),this.wasMiniPlayerActiveBeforePiP){let e=0;for(;e<5;){q.debug(`Attempting to switch to miniplayer mode, attempt ${e+1}`),this.miniPlayerController.toggle(!0);if(await L.waitForElementSelector(b,document,t).catch(()=>null)){q.debug("Miniplayer mode restored");break}e++,5===e&&q.error("Failed to switch to miniplayer mode after all attempts")}}})}setWindowsTitle(e){const t=`${e} - YouTube`;this.pipWindow&&(document.title=t,this.pipWindow.document.title=t,q.debug(`Title synced from MediaSession: ${e}`))}updateTitle(e){this.setWindowsTitle(e)}}const j=m.getInstance("ResizeTracker");class K{constructor(){this.observer=null}start(e,t){if("undefined"==typeof ResizeObserver)return void j.error("ResizeObserver not available");j.debug("Starting resize tracking");const n=t.document;this.observer=new ResizeObserver(e=>{var t;for(const i of e){const e=i.contentRect.width;j.debug(`New size: ${e}px`);const r=n.querySelector(v);r&&("function"==typeof r.setInternalSize&&(r.setInternalSize(),null==(t=r.setSize)||t.call(r)),r.dispatchEvent(new Event("resize",{bubbles:!0})),j.debug("Player size updated"))}}),this.observer.observe(e),t.addEventListener("pagehide",()=>this.stop(),{once:!0})}stop(){this.observer&&(this.observer.disconnect(),this.observer=null,j.debug("Resize tracking stopped"))}}const U=m.getInstance("MenuObserver");class J{constructor(){this.observer=null,this.removalObserver=null}async start(e){await this.runObservation(e)}async runObservation(e){if(e.closed)return void U.debug("PiP window already closed, skipping menu observation");let t;try{t=await L.waitForElementSelector(x,e.document,0,e)}catch(n){return void U.warn("Wait for menu button aborted",n)}U.debug("Starting menu observation"),this.observer=new MutationObserver(n=>{for(const i of n)if("aria-expanded"===i.attributeName){const n="true"===t.getAttribute("aria-expanded"),i=e.document.querySelector(W),o=e.outerHeight;U.debug(`Menu state changed: expanded = ${n}`),n?(o<r&&(e.resizeTo(e.outerWidth,r),U.debug("PiP window expanded")),i&&(i.style.display="block")):i&&(i.style.display="none")}}),this.observer.observe(t,{attributes:!0,attributeFilter:["aria-expanded"]}),this.removalObserver=new MutationObserver(()=>{var n,i;t.isConnected||(null==(n=this.observer)||n.disconnect(),null==(i=this.removalObserver)||i.disconnect(),this.observer=null,this.removalObserver=null,U.debug("Menu button removed from DOM, re-waiting"),this.runObservation(e))}),this.removalObserver.observe(e.document.body,{childList:!0,subtree:!0})}stop(){this.observer&&(this.observer.disconnect(),this.observer=null),this.removalObserver&&(this.removalObserver.disconnect(),this.removalObserver=null),U.debug("Menu observation stopped")}}const Z=m.getInstance("ContextMenuHandler");class G{constructor(){this.visibilityObserver=null,this.pipWindow=null,this.contextMenu=null,this.contextMenuPlaceholder=null}async initialize(e){this.pipWindow=e,this.contextMenuPlaceholder=L.createPlaceholder("context_menu_placeholder");try{this.contextMenu=await L.waitForElementSelector($,document,0,e),Z.log("Context menu element found, starting visibility monitoring"),this.startMonitoring(),this.setupDismissalHandler()}catch(t){Z.warn("Error initializing context menu handler:",t)}}startMonitoring(){this.contextMenu&&this.pipWindow&&(this.visibilityObserver=new MutationObserver(()=>{var e;if(!this.contextMenu||!this.pipWindow)return;const t="none"!==this.contextMenu.style.display,n=this.contextMenu.parentNode!==this.pipWindow.document.body;t&&n?(Z.log("Context menu opened in main window. Intercepting..."),this.contextMenuPlaceholder&&L.insertPlaceholderBefore(this.contextMenu,this.contextMenuPlaceholder),this.pipWindow.document.body.appendChild(this.contextMenu)):t||this.contextMenu.parentNode!==this.pipWindow.document.body||(null==(e=this.contextMenuPlaceholder)?void 0:e.parentNode)&&(Z.log("Context menu closed in PiP window. Returning to main..."),L.restoreElementFromPlaceholder(this.contextMenu,this.contextMenuPlaceholder),this.simulateMainContextMenu())}),this.visibilityObserver.observe(this.contextMenu,{attributes:!0,attributeFilter:["style"]}),"none"!==this.contextMenu.style.display&&(this.contextMenuPlaceholder&&L.insertPlaceholderBefore(this.contextMenu,this.contextMenuPlaceholder),this.pipWindow.document.body.appendChild(this.contextMenu)))}setupDismissalHandler(){if(!this.pipWindow)return;const e=e=>{var t;const n=this.pipWindow.document.querySelector($);n&&"none"!==n.style.display&&!(null==(t=e.target)?void 0:t.closest(E))&&(e.stopPropagation(),n.style.display="none",Z.debug("Context menu dismissed"))};this.pipWindow.document.addEventListener("click",e,!0),this.pipWindow.document.addEventListener("contextmenu",e,!0)}simulateMainContextMenu(){const e=document.querySelector(P);if(!e)return;const t=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:0,clientY:0,button:2});e.dispatchEvent(t),Z.debug("Synthetic contextmenu event sent to main window")}stop(){var e;this.visibilityObserver&&(this.visibilityObserver.disconnect(),this.visibilityObserver=null),this.contextMenu&&this.pipWindow&&this.contextMenu.parentNode===this.pipWindow.document.body&&(null==(e=this.contextMenuPlaceholder)?void 0:e.parentNode)&&(Z.log("Returning context menu to main window"),L.restoreElementFromPlaceholder(this.contextMenu,this.contextMenuPlaceholder),this.simulateMainContextMenu()),this.pipWindow=null,Z.debug("Context menu handler stopped")}}const X=m.getInstance("SeekHandler");class Q{constructor(){this.pipWindow=null}initialize(e){this.pipWindow=e,this.setupSeekHandler(),X.debug("Seek handler initialized")}setupSeekHandler(){if(!this.pipWindow)return;const e=this.pipWindow.document;e.addEventListener("mousedown",t=>{var n;const i=null==(n=t.target)?void 0:n.closest(C);if(!i)return;const r=e.querySelector(v);if(!r)return;X.debug("Progress bar clicked, initiating seek"),t.preventDefault(),t.stopPropagation();const o=e=>{const t=i.getBoundingClientRect(),n=e.clientX-t.left,o=Math.max(0,Math.min(1,n/t.width)),s=r.getDuration();if(s){const e=o*s;r.seekTo(e,!0),X.debug(`Seeking to ${e.toFixed(2)}s (${(100*o).toFixed(1)}%)`)}};o(t);const s=e=>o(e),a=()=>{e.removeEventListener("mousemove",s),e.removeEventListener("mouseup",a),X.debug("Seek drag ended")};e.addEventListener("mousemove",s),e.addEventListener("mouseup",a)},!0)}cleanup(){this.pipWindow=null,X.debug("Seek handler cleaned up")}}const ee=m.getInstance("YtActionSender");class te{constructor(e){this.pipWindow=e}send(e){if(!this.pipWindow)return;const t=this.pipWindow.document.querySelector(v);if(!t||"function"!=typeof t.getVideoData)return void ee.warn("Player or getVideoData not available");const n=t.getVideoData(),i=null==n?void 0:n.video_id;if(!i)return void ee.warn("Video ID not found");const r=document.querySelector(P);if(!r||"function"!=typeof r.resolveCommand)return void ee.error("Failed to find resolveCommand in main window");const o={likeEndpoint:{status:{[l]:"LIKE",[c]:"DISLIKE",[d]:"INDIFFERENT"}[e],target:{videoId:i}}};try{r.resolveCommand(o),ee.log(`Sent ${e} for video ${i}`)}catch(s){ee.error("Error sending YouTube action:",s)}}}const ne=m.getInstance("LikeButtonHandler");class ie{constructor(){this.pipWindow=null,this.ytActionSender=null}initialize(e){this.pipWindow=e,this.ytActionSender=new te(e),this.setupClickHandler(),ne.debug("Like button handler initialized")}setupClickHandler(){this.pipWindow&&this.pipWindow.document.addEventListener("click",e=>{var t,n,i;const r=null==(t=e.target)?void 0:t.closest(D);if(!r)return;const o=r.parentElement;if(!o)return;const s=o.childNodes[0]===r,a=o.childNodes[1]===r;if(!s&&!a)return;const u=null==(n=e.target)?void 0:n.closest(O);if(!u)return;const h="true"===u.getAttribute("aria-pressed"),p=h?d:s?l:c;ne.log(`${p} button clicked (currently pressed: ${h})`),null==(i=this.ytActionSender)||i.send(p)},!0)}cleanup(){this.pipWindow=null,this.ytActionSender=null,ne.debug("Like button handler cleaned up")}}const re=m.getInstance("MediaSessionHandler");class oe{constructor(e){this.pipManager=e}initialize(){"mediaSession"in navigator?(this.registerActionHandler(),this.setupTitleSync(),re.debug("Media session handler initialized")):re.warn("Media Session API not available")}registerActionHandler(){if("mediaSession"in navigator)try{navigator.mediaSession.setActionHandler("enterpictureinpicture",()=>{re.log("Media session enterpictureinpicture action triggered"),this.pipManager.open().catch(e=>{re.error("Error opening PiP from media session:",e)})}),re.debug("Media session action handler registered")}catch(e){re.error("Error registering media session action handler:",e)}}setupTitleSync(){if("mediaSession"in navigator)try{const e=Object.getPrototypeOf(navigator.mediaSession),t=Object.getOwnPropertyDescriptor(e,"metadata");if(!t||!t.get||!t.set)return void re.warn("Could not get original metadata descriptor");Object.defineProperty(navigator.mediaSession,"metadata",{get:()=>t.get.call(navigator.mediaSession),set:e=>{t.set.call(navigator.mediaSession,e),e&&e.title&&this.pipManager.updateTitle(e.title)},configurable:!0,enumerable:!0}),re.debug("Media session title sync configured")}catch(e){re.error("Error setting up title sync:",e)}}}const se=m.getInstance("Main");class ae{constructor(){this.miniPlayerController=new z,this.playerManager=new F,this.navigationHandler=new N,this.resizeTracker=new K,this.menuObserver=new J,this.contextMenuHandler=new G,this.seekHandler=new Q,this.likeButtonHandler=new ie,this.pipManager=new V(this.miniPlayerController,this.playerManager,this.navigationHandler,(e,t)=>this.createPiPWindowCallback(e,t)),this.mediaSessionHandler=new oe(this.pipManager)}async createPiPWindowCallback(e,t){return await this.initializePiPWindowHandlers(e,t),()=>{this.seekHandler.cleanup(),this.likeButtonHandler.cleanup(),this.contextMenuHandler.stop()}}async initialize(){se.log("Initializing YouTube PiP application"),this.mediaSessionHandler.initialize(),se.log("YouTube PiP application initialized")}async initializePiPWindowHandlers(e,t){se.debug("Initializing PiP window handlers"),this.resizeTracker.start(t,e),this.menuObserver.start(e),this.contextMenuHandler.initialize(e),this.seekHandler.initialize(e),this.likeButtonHandler.initialize(e),se.debug("All PiP window handlers initialized")}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{(new ae).initialize().catch(e=>{m.getInstance("Main").error("Error initializing application:",e)})});else{(new ae).initialize().catch(e=>{m.getInstance("Main").error("Error initializing application:",e)})}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlcnNjcmlwdC5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL2NvbnN0YW50cy50cyIsIi4uL25vZGVfbW9kdWxlcy9kYXlqcy9kYXlqcy5taW4uanMiLCIuLi9zcmMvbG9nZ2VyLnRzIiwiLi4vc3JjL3NlbGVjdG9ycy50cyIsIi4uL3NyYy91aS9NaW5pUGxheWVyQ29udHJvbGxlci50cyIsIi4uL3NyYy91dGlscy9ET01VdGlscy50cyIsIi4uL3NyYy9jb3JlL1BsYXllck1hbmFnZXIudHMiLCIuLi9zcmMvY29yZS9OYXZpZ2F0aW9uSGFuZGxlci50cyIsIi4uL3NyYy9zdHlsZXMuY3NzP3JhdyIsIi4uL3NyYy91dGlscy9TdHlsZVV0aWxzLnRzIiwiLi4vc3JjL2NvcmUvUGlQTWFuYWdlci50cyIsIi4uL3NyYy91aS9SZXNpemVUcmFja2VyLnRzIiwiLi4vc3JjL3VpL01lbnVPYnNlcnZlci50cyIsIi4uL3NyYy91aS9Db250ZXh0TWVudUhhbmRsZXIudHMiLCIuLi9zcmMvaGFuZGxlcnMvU2Vla0hhbmRsZXIudHMiLCIuLi9zcmMvY29yZS9ZdEFjdGlvblNlbmRlci50cyIsIi4uL3NyYy9oYW5kbGVycy9MaWtlQnV0dG9uSGFuZGxlci50cyIsIi4uL3NyYy9oYW5kbGVycy9NZWRpYVNlc3Npb25IYW5kbGVyLnRzIiwiLi4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBcHBsaWNhdGlvbiBjb25zdGFudHNcbiAqL1xuXG4vLyBMb2NhbFN0b3JhZ2UgZmxhZyBmb3IgZW5hYmxpbmcgZGVidWcgbG9nc1xuZXhwb3J0IGNvbnN0IERFQlVHX0ZMQUcgPSAnWU9VVFVCRV9QSVBfREVCVUcnO1xuXG4vLyBUaW1lb3V0IHZhbHVlcyAoaW4gbWlsbGlzZWNvbmRzKVxuZXhwb3J0IGNvbnN0IFRJTUVPVVRTID0ge1xuICBFTEVNRU5UX1dBSVQ6IDUwMDAsXG4gIEVMRU1FTlRfV0FJVF9JTkZJTklURTogMCxcbiAgTUVOVV9SRVRSWV9ERUxBWTogMTAwLFxufSBhcyBjb25zdDtcblxuLy8gUmV0cnkgY291bnRzXG5leHBvcnQgY29uc3QgUkVUUllfTElNSVRTID0ge1xuICBNSU5JUExBWUVSX1NXSVRDSDogNSxcbn0gYXMgY29uc3Q7XG5cbi8vIERlZmF1bHQgZGltZW5zaW9uc1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRElNRU5TSU9OUyA9IHtcbiAgUElQX1dJRFRIOiA0ODAsXG4gIFBJUF9IRUlHSFQ6IDI3MCxcbiAgUElQX0VYUEFOREVEX0hFSUdIVDogNjAwLFxufSBhcyBjb25zdDtcblxuLy8gS2V5Ym9hcmQgZXZlbnQgY29kZXNcbmV4cG9ydCBjb25zdCBLRVlCT0FSRCA9IHtcbiAgTUlOSVBMQVlFUl9LRVk6ICdpJyxcbiAgS0VZX0NPREU6IDczLFxuICBXSElDSDogNzMsXG59IGFzIGNvbnN0O1xuXG4vLyBZb3VUdWJlIHBsYXllciBzdGF0ZXNcbmV4cG9ydCBjb25zdCBQTEFZRVJfU1RBVEVTID0ge1xuICBVTlNUQVJURUQ6IC0xLFxuICBFTkRFRDogMCxcbiAgUExBWUlORzogMSxcbiAgUEFVU0VEOiAyLFxuICBCVUZGRVJJTkc6IDMsXG4gIENVRUQ6IDUsXG59IGFzIGNvbnN0O1xuXG4vLyBZb3VUdWJlIGFjdGlvbiB0eXBlc1xuZXhwb3J0IGNvbnN0IFlUX0FDVElPTlMgPSB7XG4gIExJS0U6ICdMSUtFJyxcbiAgRElTTElLRTogJ0RJU0xJS0UnLFxuICBSRU1PVkU6ICdJTkRJRkZFUkVOVCcsXG59IGFzIGNvbnN0O1xuXG4vLyBZb3VUdWJlIHdlYiBwYWdlIHR5cGVzXG5leHBvcnQgY29uc3QgV0VCX1BBR0VfVFlQRVMgPSB7XG4gIFdBVENIOiAnV0VCX1BBR0VfVFlQRV9XQVRDSCcsXG59IGFzIGNvbnN0O1xuXG4vLyBZb3VUdWJlIHJvb3QgVkVcbmV4cG9ydCBjb25zdCBST09UX1ZFID0gMzgzMjtcbiIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOih0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6dHx8c2VsZikuZGF5anM9ZSgpfSh0aGlzLChmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PTFlMyxlPTZlNCxuPTM2ZTUscj1cIm1pbGxpc2Vjb25kXCIsaT1cInNlY29uZFwiLHM9XCJtaW51dGVcIix1PVwiaG91clwiLGE9XCJkYXlcIixvPVwid2Vla1wiLGM9XCJtb250aFwiLGY9XCJxdWFydGVyXCIsaD1cInllYXJcIixkPVwiZGF0ZVwiLGw9XCJJbnZhbGlkIERhdGVcIiwkPS9eKFxcZHs0fSlbLS9dPyhcXGR7MSwyfSk/Wy0vXT8oXFxkezAsMn0pW1R0XFxzXSooXFxkezEsMn0pPzo/KFxcZHsxLDJ9KT86PyhcXGR7MSwyfSk/Wy46XT8oXFxkKyk/JC8seT0vXFxbKFteXFxdXSspXXxZezEsNH18TXsxLDR9fER7MSwyfXxkezEsNH18SHsxLDJ9fGh7MSwyfXxhfEF8bXsxLDJ9fHN7MSwyfXxaezEsMn18U1NTL2csTT17bmFtZTpcImVuXCIsd2Vla2RheXM6XCJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheVwiLnNwbGl0KFwiX1wiKSxtb250aHM6XCJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyXCIuc3BsaXQoXCJfXCIpLG9yZGluYWw6ZnVuY3Rpb24odCl7dmFyIGU9W1widGhcIixcInN0XCIsXCJuZFwiLFwicmRcIl0sbj10JTEwMDtyZXR1cm5cIltcIit0KyhlWyhuLTIwKSUxMF18fGVbbl18fGVbMF0pK1wiXVwifX0sbT1mdW5jdGlvbih0LGUsbil7dmFyIHI9U3RyaW5nKHQpO3JldHVybiFyfHxyLmxlbmd0aD49ZT90OlwiXCIrQXJyYXkoZSsxLXIubGVuZ3RoKS5qb2luKG4pK3R9LHY9e3M6bSx6OmZ1bmN0aW9uKHQpe3ZhciBlPS10LnV0Y09mZnNldCgpLG49TWF0aC5hYnMoZSkscj1NYXRoLmZsb29yKG4vNjApLGk9biU2MDtyZXR1cm4oZTw9MD9cIitcIjpcIi1cIikrbShyLDIsXCIwXCIpK1wiOlwiK20oaSwyLFwiMFwiKX0sbTpmdW5jdGlvbiB0KGUsbil7aWYoZS5kYXRlKCk8bi5kYXRlKCkpcmV0dXJuLXQobixlKTt2YXIgcj0xMioobi55ZWFyKCktZS55ZWFyKCkpKyhuLm1vbnRoKCktZS5tb250aCgpKSxpPWUuY2xvbmUoKS5hZGQocixjKSxzPW4taTwwLHU9ZS5jbG9uZSgpLmFkZChyKyhzPy0xOjEpLGMpO3JldHVybisoLShyKyhuLWkpLyhzP2ktdTp1LWkpKXx8MCl9LGE6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MD9NYXRoLmNlaWwodCl8fDA6TWF0aC5mbG9vcih0KX0scDpmdW5jdGlvbih0KXtyZXR1cm57TTpjLHk6aCx3Om8sZDphLEQ6ZCxoOnUsbTpzLHM6aSxtczpyLFE6Zn1bdF18fFN0cmluZyh0fHxcIlwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL3MkLyxcIlwiKX0sdTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH19LGc9XCJlblwiLEQ9e307RFtnXT1NO3ZhciBwPVwiJGlzRGF5anNPYmplY3RcIixTPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgX3x8ISghdHx8IXRbcF0pfSx3PWZ1bmN0aW9uIHQoZSxuLHIpe3ZhciBpO2lmKCFlKXJldHVybiBnO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgcz1lLnRvTG93ZXJDYXNlKCk7RFtzXSYmKGk9cyksbiYmKERbc109bixpPXMpO3ZhciB1PWUuc3BsaXQoXCItXCIpO2lmKCFpJiZ1Lmxlbmd0aD4xKXJldHVybiB0KHVbMF0pfWVsc2V7dmFyIGE9ZS5uYW1lO0RbYV09ZSxpPWF9cmV0dXJuIXImJmkmJihnPWkpLGl8fCFyJiZnfSxPPWZ1bmN0aW9uKHQsZSl7aWYoUyh0KSlyZXR1cm4gdC5jbG9uZSgpO3ZhciBuPVwib2JqZWN0XCI9PXR5cGVvZiBlP2U6e307cmV0dXJuIG4uZGF0ZT10LG4uYXJncz1hcmd1bWVudHMsbmV3IF8obil9LGI9djtiLmw9dyxiLmk9UyxiLnc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTyh0LHtsb2NhbGU6ZS4kTCx1dGM6ZS4kdSx4OmUuJHgsJG9mZnNldDplLiRvZmZzZXR9KX07dmFyIF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBNKHQpe3RoaXMuJEw9dyh0LmxvY2FsZSxudWxsLCEwKSx0aGlzLnBhcnNlKHQpLHRoaXMuJHg9dGhpcy4keHx8dC54fHx7fSx0aGlzW3BdPSEwfXZhciBtPU0ucHJvdG90eXBlO3JldHVybiBtLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuJGQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRlLG49dC51dGM7aWYobnVsbD09PWUpcmV0dXJuIG5ldyBEYXRlKE5hTik7aWYoYi51KGUpKXJldHVybiBuZXcgRGF0ZTtpZihlIGluc3RhbmNlb2YgRGF0ZSlyZXR1cm4gbmV3IERhdGUoZSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJiEvWiQvaS50ZXN0KGUpKXt2YXIgcj1lLm1hdGNoKCQpO2lmKHIpe3ZhciBpPXJbMl0tMXx8MCxzPShyWzddfHxcIjBcIikuc3Vic3RyaW5nKDAsMyk7cmV0dXJuIG4/bmV3IERhdGUoRGF0ZS5VVEMoclsxXSxpLHJbM118fDEscls0XXx8MCxyWzVdfHwwLHJbNl18fDAscykpOm5ldyBEYXRlKHJbMV0saSxyWzNdfHwxLHJbNF18fDAscls1XXx8MCxyWzZdfHwwLHMpfX1yZXR1cm4gbmV3IERhdGUoZSl9KHQpLHRoaXMuaW5pdCgpfSxtLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRkO3RoaXMuJHk9dC5nZXRGdWxsWWVhcigpLHRoaXMuJE09dC5nZXRNb250aCgpLHRoaXMuJEQ9dC5nZXREYXRlKCksdGhpcy4kVz10LmdldERheSgpLHRoaXMuJEg9dC5nZXRIb3VycygpLHRoaXMuJG09dC5nZXRNaW51dGVzKCksdGhpcy4kcz10LmdldFNlY29uZHMoKSx0aGlzLiRtcz10LmdldE1pbGxpc2Vjb25kcygpfSxtLiR1dGlscz1mdW5jdGlvbigpe3JldHVybiBifSxtLmlzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuJGQudG9TdHJpbmcoKT09PWwpfSxtLmlzU2FtZT1mdW5jdGlvbih0LGUpe3ZhciBuPU8odCk7cmV0dXJuIHRoaXMuc3RhcnRPZihlKTw9biYmbjw9dGhpcy5lbmRPZihlKX0sbS5pc0FmdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE8odCk8dGhpcy5zdGFydE9mKGUpfSxtLmlzQmVmb3JlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZW5kT2YoZSk8Tyh0KX0sbS4kZz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGIudSh0KT90aGlzW2VdOnRoaXMuc2V0KG4sdCl9LG0udW5peD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKHRoaXMudmFsdWVPZigpLzFlMyl9LG0udmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRkLmdldFRpbWUoKX0sbS5zdGFydE9mPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPSEhYi51KGUpfHxlLGY9Yi5wKHQpLGw9ZnVuY3Rpb24odCxlKXt2YXIgaT1iLncobi4kdT9EYXRlLlVUQyhuLiR5LGUsdCk6bmV3IERhdGUobi4keSxlLHQpLG4pO3JldHVybiByP2k6aS5lbmRPZihhKX0sJD1mdW5jdGlvbih0LGUpe3JldHVybiBiLncobi50b0RhdGUoKVt0XS5hcHBseShuLnRvRGF0ZShcInNcIiksKHI/WzAsMCwwLDBdOlsyMyw1OSw1OSw5OTldKS5zbGljZShlKSksbil9LHk9dGhpcy4kVyxNPXRoaXMuJE0sbT10aGlzLiRELHY9XCJzZXRcIisodGhpcy4kdT9cIlVUQ1wiOlwiXCIpO3N3aXRjaChmKXtjYXNlIGg6cmV0dXJuIHI/bCgxLDApOmwoMzEsMTEpO2Nhc2UgYzpyZXR1cm4gcj9sKDEsTSk6bCgwLE0rMSk7Y2FzZSBvOnZhciBnPXRoaXMuJGxvY2FsZSgpLndlZWtTdGFydHx8MCxEPSh5PGc/eSs3OnkpLWc7cmV0dXJuIGwocj9tLUQ6bSsoNi1EKSxNKTtjYXNlIGE6Y2FzZSBkOnJldHVybiAkKHYrXCJIb3Vyc1wiLDApO2Nhc2UgdTpyZXR1cm4gJCh2K1wiTWludXRlc1wiLDEpO2Nhc2UgczpyZXR1cm4gJCh2K1wiU2Vjb25kc1wiLDIpO2Nhc2UgaTpyZXR1cm4gJCh2K1wiTWlsbGlzZWNvbmRzXCIsMyk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jbG9uZSgpfX0sbS5lbmRPZj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGFydE9mKHQsITEpfSxtLiRzZXQ9ZnVuY3Rpb24odCxlKXt2YXIgbixvPWIucCh0KSxmPVwic2V0XCIrKHRoaXMuJHU/XCJVVENcIjpcIlwiKSxsPShuPXt9LG5bYV09ZitcIkRhdGVcIixuW2RdPWYrXCJEYXRlXCIsbltjXT1mK1wiTW9udGhcIixuW2hdPWYrXCJGdWxsWWVhclwiLG5bdV09ZitcIkhvdXJzXCIsbltzXT1mK1wiTWludXRlc1wiLG5baV09ZitcIlNlY29uZHNcIixuW3JdPWYrXCJNaWxsaXNlY29uZHNcIixuKVtvXSwkPW89PT1hP3RoaXMuJEQrKGUtdGhpcy4kVyk6ZTtpZihvPT09Y3x8bz09PWgpe3ZhciB5PXRoaXMuY2xvbmUoKS5zZXQoZCwxKTt5LiRkW2xdKCQpLHkuaW5pdCgpLHRoaXMuJGQ9eS5zZXQoZCxNYXRoLm1pbih0aGlzLiRELHkuZGF5c0luTW9udGgoKSkpLiRkfWVsc2UgbCYmdGhpcy4kZFtsXSgkKTtyZXR1cm4gdGhpcy5pbml0KCksdGhpc30sbS5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jbG9uZSgpLiRzZXQodCxlKX0sbS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbYi5wKHQpXSgpfSxtLmFkZD1mdW5jdGlvbihyLGYpe3ZhciBkLGw9dGhpcztyPU51bWJlcihyKTt2YXIgJD1iLnAoZikseT1mdW5jdGlvbih0KXt2YXIgZT1PKGwpO3JldHVybiBiLncoZS5kYXRlKGUuZGF0ZSgpK01hdGgucm91bmQodCpyKSksbCl9O2lmKCQ9PT1jKXJldHVybiB0aGlzLnNldChjLHRoaXMuJE0rcik7aWYoJD09PWgpcmV0dXJuIHRoaXMuc2V0KGgsdGhpcy4keStyKTtpZigkPT09YSlyZXR1cm4geSgxKTtpZigkPT09bylyZXR1cm4geSg3KTt2YXIgTT0oZD17fSxkW3NdPWUsZFt1XT1uLGRbaV09dCxkKVskXXx8MSxtPXRoaXMuJGQuZ2V0VGltZSgpK3IqTTtyZXR1cm4gYi53KG0sdGhpcyl9LG0uc3VidHJhY3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hZGQoLTEqdCxlKX0sbS5mb3JtYXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuJGxvY2FsZSgpO2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbi5pbnZhbGlkRGF0ZXx8bDt2YXIgcj10fHxcIllZWVktTU0tRERUSEg6bW06c3NaXCIsaT1iLnoodGhpcykscz10aGlzLiRILHU9dGhpcy4kbSxhPXRoaXMuJE0sbz1uLndlZWtkYXlzLGM9bi5tb250aHMsZj1uLm1lcmlkaWVtLGg9ZnVuY3Rpb24odCxuLGkscyl7cmV0dXJuIHQmJih0W25dfHx0KGUscikpfHxpW25dLnNsaWNlKDAscyl9LGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGIucyhzJTEyfHwxMix0LFwiMFwiKX0sJD1mfHxmdW5jdGlvbih0LGUsbil7dmFyIHI9dDwxMj9cIkFNXCI6XCJQTVwiO3JldHVybiBuP3IudG9Mb3dlckNhc2UoKTpyfTtyZXR1cm4gci5yZXBsYWNlKHksKGZ1bmN0aW9uKHQscil7cmV0dXJuIHJ8fGZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJZWVwiOnJldHVybiBTdHJpbmcoZS4keSkuc2xpY2UoLTIpO2Nhc2VcIllZWVlcIjpyZXR1cm4gYi5zKGUuJHksNCxcIjBcIik7Y2FzZVwiTVwiOnJldHVybiBhKzE7Y2FzZVwiTU1cIjpyZXR1cm4gYi5zKGErMSwyLFwiMFwiKTtjYXNlXCJNTU1cIjpyZXR1cm4gaChuLm1vbnRoc1Nob3J0LGEsYywzKTtjYXNlXCJNTU1NXCI6cmV0dXJuIGgoYyxhKTtjYXNlXCJEXCI6cmV0dXJuIGUuJEQ7Y2FzZVwiRERcIjpyZXR1cm4gYi5zKGUuJEQsMixcIjBcIik7Y2FzZVwiZFwiOnJldHVybiBTdHJpbmcoZS4kVyk7Y2FzZVwiZGRcIjpyZXR1cm4gaChuLndlZWtkYXlzTWluLGUuJFcsbywyKTtjYXNlXCJkZGRcIjpyZXR1cm4gaChuLndlZWtkYXlzU2hvcnQsZS4kVyxvLDMpO2Nhc2VcImRkZGRcIjpyZXR1cm4gb1tlLiRXXTtjYXNlXCJIXCI6cmV0dXJuIFN0cmluZyhzKTtjYXNlXCJISFwiOnJldHVybiBiLnMocywyLFwiMFwiKTtjYXNlXCJoXCI6cmV0dXJuIGQoMSk7Y2FzZVwiaGhcIjpyZXR1cm4gZCgyKTtjYXNlXCJhXCI6cmV0dXJuICQocyx1LCEwKTtjYXNlXCJBXCI6cmV0dXJuICQocyx1LCExKTtjYXNlXCJtXCI6cmV0dXJuIFN0cmluZyh1KTtjYXNlXCJtbVwiOnJldHVybiBiLnModSwyLFwiMFwiKTtjYXNlXCJzXCI6cmV0dXJuIFN0cmluZyhlLiRzKTtjYXNlXCJzc1wiOnJldHVybiBiLnMoZS4kcywyLFwiMFwiKTtjYXNlXCJTU1NcIjpyZXR1cm4gYi5zKGUuJG1zLDMsXCIwXCIpO2Nhc2VcIlpcIjpyZXR1cm4gaX1yZXR1cm4gbnVsbH0odCl8fGkucmVwbGFjZShcIjpcIixcIlwiKX0pKX0sbS51dGNPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMTUqLU1hdGgucm91bmQodGhpcy4kZC5nZXRUaW1lem9uZU9mZnNldCgpLzE1KX0sbS5kaWZmPWZ1bmN0aW9uKHIsZCxsKXt2YXIgJCx5PXRoaXMsTT1iLnAoZCksbT1PKHIpLHY9KG0udXRjT2Zmc2V0KCktdGhpcy51dGNPZmZzZXQoKSkqZSxnPXRoaXMtbSxEPWZ1bmN0aW9uKCl7cmV0dXJuIGIubSh5LG0pfTtzd2l0Y2goTSl7Y2FzZSBoOiQ9RCgpLzEyO2JyZWFrO2Nhc2UgYzokPUQoKTticmVhaztjYXNlIGY6JD1EKCkvMzticmVhaztjYXNlIG86JD0oZy12KS82MDQ4ZTU7YnJlYWs7Y2FzZSBhOiQ9KGctdikvODY0ZTU7YnJlYWs7Y2FzZSB1OiQ9Zy9uO2JyZWFrO2Nhc2UgczokPWcvZTticmVhaztjYXNlIGk6JD1nL3Q7YnJlYWs7ZGVmYXVsdDokPWd9cmV0dXJuIGw/JDpiLmEoJCl9LG0uZGF5c0luTW9udGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRPZihjKS4kRH0sbS4kbG9jYWxlPWZ1bmN0aW9uKCl7cmV0dXJuIERbdGhpcy4kTF19LG0ubG9jYWxlPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIHRoaXMuJEw7dmFyIG49dGhpcy5jbG9uZSgpLHI9dyh0LGUsITApO3JldHVybiByJiYobi4kTD1yKSxufSxtLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGIudyh0aGlzLiRkLHRoaXMpfSxtLnRvRGF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSl9LG0udG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMudG9JU09TdHJpbmcoKTpudWxsfSxtLnRvSVNPU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGQudG9JU09TdHJpbmcoKX0sbS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRkLnRvVVRDU3RyaW5nKCl9LE19KCksaz1fLnByb3RvdHlwZTtyZXR1cm4gTy5wcm90b3R5cGU9ayxbW1wiJG1zXCIscl0sW1wiJHNcIixpXSxbXCIkbVwiLHNdLFtcIiRIXCIsdV0sW1wiJFdcIixhXSxbXCIkTVwiLGNdLFtcIiR5XCIsaF0sW1wiJERcIixkXV0uZm9yRWFjaCgoZnVuY3Rpb24odCl7a1t0WzFdXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kZyhlLHRbMF0sdFsxXSl9fSkpLE8uZXh0ZW5kPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuJGl8fCh0KGUsXyxPKSx0LiRpPSEwKSxPfSxPLmxvY2FsZT13LE8uaXNEYXlqcz1TLE8udW5peD1mdW5jdGlvbih0KXtyZXR1cm4gTygxZTMqdCl9LE8uZW49RFtnXSxPLkxzPUQsTy5wPXt9LE99KSk7IiwiaW1wb3J0IHsgREVCVUdfRkxBRyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XG5cbmNvbnN0IEZPUk1BVF9USU1FU1RBTVAgPSAnWVlZWS1NTS1ERDpISDptbTpzcy5TU1MnO1xuXG5jb25zdCBQUkVGSVhfQlJBTkQgPSAnW1lvdVR1YmUgUGlQXSc7XG5jb25zdCBQUkVGSVhfU0NPUEUgPSAoc2NvcGU6IHN0cmluZykgPT4gYFske3Njb3BlfV1gIGFzIGNvbnN0O1xuXG4vKiogVGltZXN0YW1wIFlZWVktTU0tREQ6SEg6bW06c3MuU1NTIOKAkyBibHVlICovXG5jb25zdCBTVFlMRV9USU1FU1RBTVAgPSAnY29sb3I6ICMzYjgyZjY7IGZvbnQtd2VpZ2h0OiA1MDA7Jztcbi8qKiBbWW91VHViZSBQaVBdIOKAkyBpbmRpZ28sIGJvbGQgKi9cbmNvbnN0IFNUWUxFX0JSQU5EID0gJ2NvbG9yOiAjNjM2NmYxOyBmb250LXdlaWdodDogNjAwOyc7XG4vKiogW3Njb3BlXSDigJMgYW1iZXIgKi9cbmNvbnN0IFNUWUxFX1NDT1BFID0gJ2NvbG9yOiAjZjU5ZTBiOyBmb250LXdlaWdodDogNTAwOyc7XG4vKiogSW5mbyAobG9nKSBtZXNzYWdlIOKAkyBsaWdodCBncmVlbiAqL1xuY29uc3QgU1RZTEVfTVNHX0lORk8gPSAnY29sb3I6ICM4NmVmYWM7Jztcbi8qKiBXYXJuIG1lc3NhZ2Ug4oCTIGxpZ2h0IHllbGxvdyAqL1xuY29uc3QgU1RZTEVfTVNHX1dBUk4gPSAnY29sb3I6ICNmZGUwNDc7Jztcbi8qKiBFcnJvciBtZXNzYWdlIOKAkyBsaWdodCByZWQgKi9cbmNvbnN0IFNUWUxFX01TR19FUlJPUiA9ICdjb2xvcjogI2Y4NzE3MTsnO1xuLyoqIERlYnVnIG1lc3NhZ2Ug4oCTIG11dGVkIGdyYXkgKi9cbmNvbnN0IFNUWUxFX01TR19ERUJVRyA9ICdjb2xvcjogI2ExYTFhYTsnO1xuXG4vKipcbiAqIExvZ2dlciBjbGFzcyBmb3IgY29uZGl0aW9uYWwgY29uc29sZSBsb2dnaW5nIHdpdGggbW9kdWxlIHNjb3BlLlxuICogT25seSBsb2dzIHdoZW4gREVCVUdfRkxBRyBpcyBzZXQgaW4gbG9jYWxTdG9yYWdlIChleGNlcHQgZXJyb3IsIGFsd2F5cyBsb2dnZWQpLlxuICogVXNlcyAlYyBzdHlsaW5nOiBbWW91VHViZSBQaVBdIC8gW3Njb3BlXSAvIG1lc3NhZ2UgaW4gc2VwYXJhdGUgY29sb3JzLlxuICogTWVzc2FnZSBhbmQgb3B0aW9uYWwgbWV0YWRhdGEgYXJlIHBhc3NlZCB0byBjb25zb2xlIGFzLWlzIChvYmplY3RzIHN0YXkgZXhwYW5kYWJsZSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgTG9nZ2VyPigpO1xuICBwcml2YXRlIHN0YXRpYyBlbmFibGVkID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhdGljIHN0b3JhZ2VMaXN0ZW5lckFkZGVkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBzY29wZTogc3RyaW5nO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3Ioc2NvcGU6IHN0cmluZykge1xuICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbG9nZ2VyIGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gbW9kdWxlIHNjb3BlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZShzY29wZTogc3RyaW5nKTogTG9nZ2VyIHtcbiAgICBpZiAoIUxvZ2dlci5zdG9yYWdlTGlzdGVuZXJBZGRlZCkge1xuICAgICAgTG9nZ2VyLmVuYWJsZWQgPSBMb2dnZXIuY2hlY2tEZWJ1Z0ZsYWcoKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKCkgPT4ge1xuICAgICAgICBMb2dnZXIuZW5hYmxlZCA9IExvZ2dlci5jaGVja0RlYnVnRmxhZygpO1xuICAgICAgfSk7XG4gICAgICBMb2dnZXIuc3RvcmFnZUxpc3RlbmVyQWRkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGxldCBpbnN0YW5jZSA9IExvZ2dlci5pbnN0YW5jZXMuZ2V0KHNjb3BlKTtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBMb2dnZXIoc2NvcGUpO1xuICAgICAgTG9nZ2VyLmluc3RhbmNlcy5zZXQoc2NvcGUsIGluc3RhbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY2hlY2tEZWJ1Z0ZsYWcoKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShERUJVR19GTEFHKSA9PT0gJ3RydWUnO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3R5bGVkKFxuICAgIGZuOiAodGVtcGxhdGU6IHN0cmluZywgLi4ucmVzdDogdW5rbm93bltdKSA9PiB2b2lkLFxuICAgIG1zZ1N0eWxlOiBzdHJpbmcsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIG1ldGE/OiB1bmtub3duXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHRzID0gZGF5anMoKS5mb3JtYXQoRk9STUFUX1RJTUVTVEFNUCk7XG4gICAgY29uc3QgZXNjYXBlZCA9IG1lc3NhZ2UucmVwbGFjZSgvJS9nLCAnJSUnKTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGAlYyR7dHN9JWMgJHtQUkVGSVhfQlJBTkR9JWMke1BSRUZJWF9TQ09QRSh0aGlzLnNjb3BlKX0lYyAke2VzY2FwZWR9YDtcbiAgICBmbihcbiAgICAgIHRlbXBsYXRlLFxuICAgICAgU1RZTEVfVElNRVNUQU1QLFxuICAgICAgU1RZTEVfQlJBTkQsXG4gICAgICBTVFlMRV9TQ09QRSxcbiAgICAgIG1zZ1N0eWxlLFxuICAgICAgLi4uKG1ldGEgIT09IHVuZGVmaW5lZCA/IFttZXRhXSA6IFtdKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTG9nIG1lc3NhZ2UgaWYgZGVidWcgaXMgZW5hYmxlZC4gSW5mbyBsZXZlbCDigJMgbGlnaHQgZ3JlZW4uIE9wdGlvbmFsIG1ldGFkYXRhIGFzIHNlY29uZCBhcmcuXG4gICAqL1xuICBwdWJsaWMgbG9nKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IHVua25vd24pOiB2b2lkIHtcbiAgICBpZiAoTG9nZ2VyLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3R5bGVkKGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksIFNUWUxFX01TR19JTkZPLCBtZXNzYWdlLCBtZXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHdhcm5pbmcgaWYgZGVidWcgaXMgZW5hYmxlZC4gT3B0aW9uYWwgbWV0YWRhdGEgYXMgc2Vjb25kIGFyZy5cbiAgICovXG4gIHB1YmxpYyB3YXJuKG1lc3NhZ2U6IHN0cmluZywgbWV0YT86IHVua25vd24pOiB2b2lkIHtcbiAgICBpZiAoTG9nZ2VyLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3R5bGVkKGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLCBTVFlMRV9NU0dfV0FSTiwgbWVzc2FnZSwgbWV0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBlcnJvciAoYWx3YXlzIGxvZ2dlZCwgcmVnYXJkbGVzcyBvZiBkZWJ1ZyBmbGFnKS4gT3B0aW9uYWwgbWV0YWRhdGEgYXMgc2Vjb25kIGFyZy5cbiAgICovXG4gIHB1YmxpYyBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIG1ldGE/OiB1bmtub3duKTogdm9pZCB7XG4gICAgdGhpcy5zdHlsZWQoY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpLCBTVFlMRV9NU0dfRVJST1IsIG1lc3NhZ2UsIG1ldGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBkZWJ1ZyBtZXNzYWdlIGlmIGRlYnVnIGlzIGVuYWJsZWQuIE9wdGlvbmFsIG1ldGFkYXRhIGFzIHNlY29uZCBhcmcuXG4gICAqL1xuICBwdWJsaWMgZGVidWcobWVzc2FnZTogc3RyaW5nLCBtZXRhPzogdW5rbm93bik6IHZvaWQge1xuICAgIGlmIChMb2dnZXIuZW5hYmxlZCkge1xuICAgICAgdGhpcy5zdHlsZWQoY29uc29sZS5kZWJ1Zy5iaW5kKGNvbnNvbGUpLCBTVFlMRV9NU0dfREVCVUcsIG1lc3NhZ2UsIG1ldGEpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBET00gc2VsZWN0b3JzIOKAkyBzaW5nbGUgc291cmNlIG9mIHRydXRoXG4gKi9cblxuZXhwb3J0IGNvbnN0IFNFTEVDVE9SUyA9IHtcbiAgTUlOSVBMQVlFUjogJ3l0ZC1taW5pcGxheWVyJyxcbiAgTUlOSVBMQVlFUl9DT05UQUlORVI6ICd5dGQtbWluaXBsYXllci1wbGF5ZXItY29udGFpbmVyJyxcbiAgTUlOSVBMQVlFUl9IT1NUOiAnLnl0ZE1pbmlwbGF5ZXJDb21wb25lbnRIb3N0Lnl0ZE1pbmlwbGF5ZXJDb21wb25lbnRWaXNpYmxlJyxcbiAgTU9WSUVfUExBWUVSOiAnI21vdmllX3BsYXllcicsXG4gIFlURF9BUFA6ICd5dGQtYXBwJyxcbiAgWVRfRFJBR0dBQkxFOiAneXQtZHJhZ2dhYmxlJyxcbiAgSFRNTDVfVklERU9fUExBWUVSOiAnLmh0bWw1LXZpZGVvLXBsYXllcicsXG4gIENPTlRFWFRfTUVOVTogJy55dHAtcG9wdXAueXRwLWNvbnRleHRtZW51JyxcbiAgQ09OVEVYVF9NRU5VX0NPTlRBSU5FUjogJy55dHAtY29udGV4dG1lbnUnLFxuICBNRU5VX0JVVFRPTjogJy55dC1zcGVjLWJ1dHRvbi1zaGFwZS1uZXh0W2FyaWEtZXhwYW5kZWRdJyxcbiAgUExBWUxJU1RfUEFORUw6ICcueXRkTWluaXBsYXllckNvbXBvbmVudFBsYXlsaXN0UGFuZWwnLFxuICBQUk9HUkVTU19CQVI6ICcueXRwLXByb2dyZXNzLWJhcicsXG4gIExJS0VfQlVUVE9OOiAneXRkLXNsaW0tbWV0YWRhdGEtdG9nZ2xlLWJ1dHRvbi1yZW5kZXJlcicsXG4gIEJVVFRPTl9TSEFQRTogJy55dC1zcGVjLWJ1dHRvbi1zaGFwZS1uZXh0JyxcbiAgU0lNUExFX0VORFBPSU5UOiAnLnl0LXNpbXBsZS1lbmRwb2ludCcsXG4gIEJVVFRPTjogJ2J1dHRvbicsXG4gIFNUWUxFU0hFRVRTOiAnc3R5bGUsIGxpbmtbcmVsPVwic3R5bGVzaGVldFwiXScsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBTZWxlY3RvciA9ICh0eXBlb2YgU0VMRUNUT1JTKVtrZXlvZiB0eXBlb2YgU0VMRUNUT1JTXTtcbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBLRVlCT0FSRCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTRUxFQ1RPUlMgfSBmcm9tICcuLi9zZWxlY3RvcnMnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoJ01pbmlQbGF5ZXJDb250cm9sbGVyJyk7XG5cbi8qKlxuICogQ29udHJvbHMgbWluaSBwbGF5ZXIgdmlzaWJpbGl0eSBhbmQgc3RhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIE1pbmlQbGF5ZXJDb250cm9sbGVyIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIG1pbmkgcGxheWVyIGlzIGN1cnJlbnRseSB2aXNpYmxlXG4gICAqL1xuICBwdWJsaWMgaXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGlzVmlzaWJsZSA9ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuTUlOSVBMQVlFUl9IT1NUKTtcbiAgICBsb2dnZXIuZGVidWcoYE1pbmkgcGxheWVyIHZpc2libGU6ICR7aXNWaXNpYmxlfWApO1xuICAgIHJldHVybiBpc1Zpc2libGU7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG1pbmkgcGxheWVyIG1vZGVcbiAgICogQHBhcmFtIGZvcmNlU2hvdyBGb3JjZSBzaG93IG1pbmkgcGxheWVyIGV2ZW4gaWYgYWxyZWFkeSB2aXNpYmxlXG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlKGZvcmNlU2hvdzogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5pc1Zpc2libGUoKTtcblxuICAgIGlmIChmb3JjZVNob3cgJiYgaXNWaXNpYmxlKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ01pbmkgcGxheWVyIGFscmVhZHkgdmlzaWJsZSwgc2tpcHBpbmcgdG9nZ2xlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbG9nZ2VyLmRlYnVnKGBUb2dnbGluZyBtaW5pIHBsYXllciAoZm9yY2VTaG93OiAke2ZvcmNlU2hvd30pYCk7XG5cbiAgICBjb25zdCBldmVudFBhcmFtcyA9IHtcbiAgICAgIGtleTogS0VZQk9BUkQuTUlOSVBMQVlFUl9LRVksXG4gICAgICBjb2RlOiBgS2V5JHtLRVlCT0FSRC5NSU5JUExBWUVSX0tFWS50b1VwcGVyQ2FzZSgpfWAsXG4gICAgICBrZXlDb2RlOiBLRVlCT0FSRC5LRVlfQ09ERSxcbiAgICAgIHdoaWNoOiBLRVlCT0FSRC5XSElDSCxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgfTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLk1PVklFX1BMQVlFUikgfHwgZG9jdW1lbnQ7XG5cbiAgICB0cnkge1xuICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleWRvd24nLCBldmVudFBhcmFtcykpO1xuICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleXVwJywgZXZlbnRQYXJhbXMpKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnTWluaSBwbGF5ZXIgdG9nZ2xlIGV2ZW50cyBkaXNwYXRjaGVkJyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB0b2dnbGluZyBtaW5pIHBsYXllcjonLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBtaW5pIHBsYXllclxuICAgKi9cbiAgcHVibGljIHNob3coKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICB0aGlzLnRvZ2dsZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZSBtaW5pIHBsYXllciAodG9nZ2xlIGlmIHZpc2libGUpXG4gICAqL1xuICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1Zpc2libGUoKSkge1xuICAgICAgdGhpcy50b2dnbGUoZmFsc2UpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFRJTUVPVVRTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgRG9jdW1lbnRPckVsZW1lbnQsIE51bGxhYmxlIH0gZnJvbSAnLi4vdHlwZXMvYXBwJztcblxuY29uc3QgbG9nZ2VyID0gTG9nZ2VyLmdldEluc3RhbmNlKCdET01VdGlscycpO1xuXG4vKipcbiAqIFV0aWxpdHkgY2xhc3MgZm9yIERPTSBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBET01VdGlscyB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb21tZW50IG5vZGUgdG8gdXNlIGFzIGEgcGxhY2Vob2xkZXIgKGUuZy4gYmVmb3JlIG1vdmluZyBhbiBlbGVtZW50IGVsc2V3aGVyZSkuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZVBsYWNlaG9sZGVyKGNvbW1lbnRUZXh0OiBzdHJpbmcpOiBDb21tZW50IHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb21tZW50VGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IHBsYWNlaG9sZGVyIGJlZm9yZSBlbGVtZW50LiBFbGVtZW50IHN0YXlzIGluIERPTTsgY2FsbGVyIHR5cGljYWxseSBtb3ZlcyBpdC5cbiAgICogQHJldHVybnMgdHJ1ZSBpZiBpbnNlcnRlZCwgZmFsc2UgaWYgZWxlbWVudCBoYXMgbm8gcGFyZW50XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGluc2VydFBsYWNlaG9sZGVyQmVmb3JlKGVsZW1lbnQ6IE5vZGUsIHBsYWNlaG9sZGVyOiBDb21tZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSB7XG4gICAgICBsb2dnZXIud2FybignaW5zZXJ0UGxhY2Vob2xkZXJCZWZvcmU6IGVsZW1lbnQgaGFzIG5vIHBhcmVudCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHBsYWNlaG9sZGVyLCBlbGVtZW50KTtcbiAgICBsb2dnZXIuZGVidWcoJ1BsYWNlaG9sZGVyIGluc2VydGVkJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSBlbGVtZW50IGluIHBsYWNlIG9mIHBsYWNlaG9sZGVyLCB0aGVuIHJlbW92ZSBwbGFjZWhvbGRlci5cbiAgICogVXNlIGFmdGVyIG1vdmluZyBlbGVtZW50IGJhY2sgZnJvbSBhbm90aGVyIGNvbnRhaW5lci5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVzdG9yZUVsZW1lbnRGcm9tUGxhY2Vob2xkZXIoZWxlbWVudDogTm9kZSwgcGxhY2Vob2xkZXI6IENvbW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJlbnQgPSBwbGFjZWhvbGRlci5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSB7XG4gICAgICBsb2dnZXIud2FybigncmVzdG9yZUVsZW1lbnRGcm9tUGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyIGhhcyBubyBwYXJlbnQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShlbGVtZW50LCBwbGFjZWhvbGRlcik7XG4gICAgcGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gICAgbG9nZ2VyLmRlYnVnKCdFbGVtZW50IHJlc3RvcmVkIGZyb20gcGxhY2Vob2xkZXInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IGFsbCBhdHRyaWJ1dGVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGFyZ2V0IGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY29weUF0dHJpYnV0ZXMoc291cmNlOiBOdWxsYWJsZTxFbGVtZW50PiwgdGFyZ2V0OiBOdWxsYWJsZTxFbGVtZW50Pik6IHZvaWQge1xuICAgIGlmICghc291cmNlIHx8ICF0YXJnZXQpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdjb3B5QXR0cmlidXRlczogc291cmNlIG9yIHRhcmdldCBpcyBudWxsJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIEFycmF5LmZyb20oc291cmNlLmF0dHJpYnV0ZXMpLmZvckVhY2goKGF0dHIpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHIubm9kZU5hbWUsIGF0dHIubm9kZVZhbHVlIHx8ICcnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gY29weSBhdHRyaWJ1dGUgJHthdHRyLm5vZGVOYW1lfTpgLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsb2dnZXIuZGVidWcoJ0F0dHJpYnV0ZXMgY29waWVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY29weWluZyBhdHRyaWJ1dGVzOicsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVbndyYXAgZWxlbWVudCBieSBtb3ZpbmcgYWxsIGNoaWxkcmVuIHRvIHBhcmVudCBhbmQgcmVtb3Zpbmcgd3JhcHBlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB1bndyYXAod3JhcHBlcjogTnVsbGFibGU8RWxlbWVudD4pOiB2b2lkIHtcbiAgICBpZiAoIXdyYXBwZXIpIHtcbiAgICAgIGxvZ2dlci53YXJuKCd1bndyYXA6IHdyYXBwZXIgaXMgbnVsbCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ3Vud3JhcDogRWxlbWVudCBoYXMgbm8gcGFyZW50IG5vZGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gTW92ZSBhbGwgY2hpbGQgbm9kZXMgYmVmb3JlIHRoZSB3cmFwcGVyXG4gICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKSB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUod3JhcHBlci5maXJzdENoaWxkLCB3cmFwcGVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSBub3ctZW1wdHkgd3JhcHBlclxuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHdyYXBwZXIpO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFbGVtZW50IHVud3JhcHBlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVud3JhcHBpbmcgZWxlbWVudDonLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBmb3IgZWxlbWVudCB0byBhcHBlYXIgaW4gRE9NIHVzaW5nIHNlbGVjdG9yXG4gICAqIEBwYXJhbSBzZWxlY3RvciBDU1Mgc2VsZWN0b3JcbiAgICogQHBhcmFtIHBhcmVudCBQYXJlbnQgZWxlbWVudCB0byBzZWFyY2ggaW4gKGRlZmF1bHQ6IGRvY3VtZW50KVxuICAgKiBAcGFyYW0gdGltZW91dCBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyAoMCA9IGluZmluaXRlKVxuICAgKiBAcGFyYW0gdGFyZ2V0V2luZG93IFdoZW4gdGltZW91dCBpcyAwLCBkaXNjb25uZWN0IG9ic2VydmVyIG9uIHRoaXMgd2luZG93J3MgcGFnZWhpZGUgKGUuZy4gUGlQIHdpbmRvdylcbiAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZvdW5kIGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgd2FpdEZvckVsZW1lbnRTZWxlY3RvcihcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIHBhcmVudDogRG9jdW1lbnRPckVsZW1lbnQgPSBkb2N1bWVudCxcbiAgICB0aW1lb3V0OiBudW1iZXIgPSBUSU1FT1VUUy5FTEVNRU5UX1dBSVQsXG4gICAgdGFyZ2V0V2luZG93PzogV2luZG93IHwgbnVsbFxuICApOiBQcm9taXNlPEVsZW1lbnQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgZWxlbWVudCBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFbGVtZW50IGZvdW5kIGltbWVkaWF0ZWx5OiAke3NlbGVjdG9yfWApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShleGlzdGluZyk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZyhgV2FpdGluZyBmb3IgZWxlbWVudDogJHtzZWxlY3Rvcn1gKTtcblxuICAgICAgLy8gQ3JlYXRlIG9ic2VydmVyIHRvIHdhdGNoIGZvciBlbGVtZW50XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChfLCBvYnMpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYEVsZW1lbnQgYXBwZWFyZWQ6ICR7c2VsZWN0b3J9YCk7XG4gICAgICAgICAgb2JzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICByZXNvbHZlKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gT2JzZXJ2ZSB0aGUgcGFyZW50IGZvciBjaGFuZ2VzXG4gICAgICBjb25zdCB0YXJnZXQgPSBwYXJlbnQgPT09IGRvY3VtZW50ID8gZG9jdW1lbnQuYm9keSA6IHBhcmVudDtcbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFRhcmdldCBlbGVtZW50IG5vdCBmb3VuZCBmb3Igc2VsZWN0b3I6ICR7c2VsZWN0b3J9YCkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0LCB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZXQgdGltZW91dCBpZiBzcGVjaWZpZWRcbiAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVGltZW91dDogJHtzZWxlY3Rvcn0gbm90IGZvdW5kYCkpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIGluZmluaXRlIHRpbWVvdXQ6IGRpc2Nvbm5lY3QgYW5kIHJlamVjdCB3aGVuIHRhcmdldFdpbmRvdyBmaXJlcyBwYWdlaGlkZSAoZS5nLiBQaVAgY2xvc2VkKVxuICAgICAgaWYgKHRpbWVvdXQgPT09IDAgJiYgdGFyZ2V0V2luZG93ICYmICF0YXJnZXRXaW5kb3cuY2xvc2VkKSB7XG4gICAgICAgIHRhcmdldFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdwYWdlaGlkZScsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignV2FpdCBhYm9ydGVkOiB0YXJnZXQgd2luZG93IGNsb3NlZCcpKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBZb3VUdWJlUGxheWVyLCBWaWRlb0RhdGEgfSBmcm9tICcuLi90eXBlcy95b3V0dWJlJztcbmltcG9ydCB7IFBMQVlFUl9TVEFURVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgRE9NVXRpbHMgfSBmcm9tICcuLi91dGlscy9ET01VdGlscyc7XG5pbXBvcnQgeyBUSU1FT1VUUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTRUxFQ1RPUlMgfSBmcm9tICcuLi9zZWxlY3RvcnMnO1xuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJy4uL3R5cGVzL2FwcCc7XG5cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgnUGxheWVyTWFuYWdlcicpO1xuXG4vKipcbiAqIE1hbmFnZXMgcGxheWVyIHN0YXRlIGFuZCBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5ZXJNYW5hZ2VyIHtcbiAgcHJpdmF0ZSB3YXNQbGF5aW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEdldCBwbGF5ZXIgc3RhdGUgKHBsYXlpbmcvcGF1c2VkKVxuICAgKi9cbiAgcHVibGljIGdldFBsYXllclN0YXRlKHBsYXllcjogTnVsbGFibGU8WW91VHViZVBsYXllcj4pOiBudW1iZXIge1xuICAgIGlmICghcGxheWVyKSB7XG4gICAgICByZXR1cm4gUExBWUVSX1NUQVRFUy5VTlNUQVJURUQ7XG4gICAgfVxuICAgIHJldHVybiBwbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBwbGF5ZXIgaXMgY3VycmVudGx5IHBsYXlpbmdcbiAgICovXG4gIHB1YmxpYyBpc1BsYXlpbmcocGxheWVyOiBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldFBsYXllclN0YXRlKHBsYXllcikgPT09IFBMQVlFUl9TVEFURVMuUExBWUlORztcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIGN1cnJlbnQgcGxheWluZyBzdGF0ZVxuICAgKi9cbiAgcHVibGljIHNhdmVQbGF5aW5nU3RhdGUocGxheWVyOiBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPik6IHZvaWQge1xuICAgIHRoaXMud2FzUGxheWluZyA9IHRoaXMuaXNQbGF5aW5nKHBsYXllcik7XG4gICAgbG9nZ2VyLmRlYnVnKGBQbGF5ZXIgc3RhdGUgc2F2ZWQ6IHdhc1BsYXlpbmcgPSAke3RoaXMud2FzUGxheWluZ31gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlIHBsYXlpbmcgc3RhdGUgaWYgaXQgd2FzIHBsYXlpbmcgYmVmb3JlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcmVzdG9yZVBsYXlpbmdTdGF0ZShwbGF5ZXI6IE51bGxhYmxlPFlvdVR1YmVQbGF5ZXI+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLndhc1BsYXlpbmcgfHwgIXBsYXllcikge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdObyBuZWVkIHRvIHJlc3RvcmUgcGxheWluZyBzdGF0ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHBsYXllci5wbGF5VmlkZW8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcGxheWVyLnBsYXlWaWRlbygpO1xuICAgICAgICBsb2dnZXIubG9nKCdQbGF5YmFjayByZXN0b3JlZCBhZnRlciByZXR1cm4gdG8gbWFpbiB3aW5kb3cnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlc3RvcmluZyBwbGF5YmFjazonLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZpZGVvIGRhdGEgZnJvbSBwbGF5ZXJcbiAgICovXG4gIHB1YmxpYyBnZXRWaWRlb0RhdGEocGxheWVyOiBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPik6IE51bGxhYmxlPFZpZGVvRGF0YT4ge1xuICAgIGlmICghcGxheWVyIHx8IHR5cGVvZiBwbGF5ZXIuZ2V0VmlkZW9EYXRhICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBsYXllci5nZXRWaWRlb0RhdGEoKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgZm9yIG1haW4gcGxheWVyIHRvIGJlIHJlYWR5XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgd2FpdEZvck1haW5QbGF5ZXIoKTogUHJvbWlzZTxOdWxsYWJsZTxFbGVtZW50Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBhd2FpdCBET01VdGlscy53YWl0Rm9yRWxlbWVudFNlbGVjdG9yKFxuICAgICAgICBTRUxFQ1RPUlMuTU9WSUVfUExBWUVSLFxuICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgVElNRU9VVFMuRUxFTUVOVF9XQUlUXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdNYWluIHBsYXllciBpcyByZWFkeScpO1xuICAgICAgcmV0dXJuIHBsYXllcjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHdhaXRpbmcgZm9yIG1haW4gcGxheWVyOicsIGUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHNhdmVkIHN0YXRlXG4gICAqL1xuICBwdWJsaWMgcmVzZXRTdGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLndhc1BsYXlpbmcgPSBmYWxzZTtcbiAgICBsb2dnZXIuZGVidWcoJ1BsYXllciBzdGF0ZSByZXNldCcpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgTmF2aWdhdGlvblN0YXRlIH0gZnJvbSAnLi4vdHlwZXMveW91dHViZSc7XG5pbXBvcnQgeyBXRUJfUEFHRV9UWVBFUywgUk9PVF9WRSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTRUxFQ1RPUlMgfSBmcm9tICcuLi9zZWxlY3RvcnMnO1xuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJy4uL3R5cGVzL2FwcCc7XG5cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgnTmF2aWdhdGlvbkhhbmRsZXInKTtcblxuLyoqXG4gKiBIYW5kbGVzIFNQQSBuYXZpZ2F0aW9uIGluIFBpUCB3aW5kb3dcbiAqL1xuZXhwb3J0IGNsYXNzIE5hdmlnYXRpb25IYW5kbGVyIHtcbiAgcHJpdmF0ZSBwaXBXaW5kb3c6IE51bGxhYmxlPFdpbmRvdz4gPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG5hdmlnYXRpb24gaGFuZGxlciBmb3IgUGlQIHdpbmRvd1xuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemUocGlwV2luZG93OiBXaW5kb3cpOiB2b2lkIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IHBpcFdpbmRvdztcbiAgICB0aGlzLnNldHVwQ2xpY2tIYW5kbGVyKCk7XG4gICAgbG9nZ2VyLmRlYnVnKCdOYXZpZ2F0aW9uIGhhbmRsZXIgaW5pdGlhbGl6ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBjbGljayBoYW5kbGVyIGZvciBuYXZpZ2F0aW9uIGluIFBpUCB3aW5kb3dcbiAgICovXG4gIHByaXZhdGUgc2V0dXBDbGlja0hhbmRsZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBpcFdpbmRvdykge1xuICAgICAgbG9nZ2VyLmVycm9yKCdQaVAgd2luZG93IG5vdCBhdmFpbGFibGUgZm9yIG5hdmlnYXRpb24gaGFuZGxlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGlwV2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLFxuICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIEZvY3VzIHZpZGVvIHBsYXllclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnBpcFdpbmRvdyEuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuSFRNTDVfVklERU9fUExBWUVSKTtcbiAgICAgICAgaWYgKHBsYXllciAmJiAnZm9jdXMnIGluIHBsYXllciAmJiB0eXBlb2YgKHBsYXllciBhcyBIVE1MRWxlbWVudCkuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAocGxheWVyIGFzIEhUTUxFbGVtZW50KS5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSAoZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQpPy5jbG9zZXN0KFNFTEVDVE9SUy5TSU1QTEVfRU5EUE9JTlQpO1xuICAgICAgICBjb25zdCBidXR0b24gPSAoZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQpPy5jbG9zZXN0KFNFTEVDVE9SUy5CVVRUT04pO1xuXG4gICAgICAgIC8vIFNraXAgYnV0dG9uIGNsaWNrcyAoaGFuZGxlZCBieSBMaWtlQnV0dG9uSGFuZGxlcilcbiAgICAgICAgaWYgKGJ1dHRvbiB8fCAhZW5kcG9pbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBocmVmID0gKGVuZHBvaW50IGFzIEhUTUxBbmNob3JFbGVtZW50KS5ocmVmO1xuICAgICAgICBpZiAoIWhyZWYpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIubG9nKCdOYXZpZ2F0aW9uIGNsaWNrIGRldGVjdGVkJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGhyZWYpO1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyh1cmwuc2VhcmNoUGFyYW1zKTtcblxuICAgICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBuYXZpZ2F0aW9uXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgIC8vIEJ1aWxkIG5hdmlnYXRpb24gc3RhdGVcbiAgICAgICAgICBjb25zdCBzdGF0ZTogTmF2aWdhdGlvblN0YXRlID0ge1xuICAgICAgICAgICAgZW5kcG9pbnQ6IHtcbiAgICAgICAgICAgICAgY29tbWFuZE1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgd2ViQ29tbWFuZE1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICB1cmw6IGhyZWYsXG4gICAgICAgICAgICAgICAgICB3ZWJQYWdlVHlwZTogV0VCX1BBR0VfVFlQRVMuV0FUQ0gsXG4gICAgICAgICAgICAgICAgICByb290VmU6IFJPT1RfVkUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgd2F0Y2hFbmRwb2ludDoge1xuICAgICAgICAgICAgICAgIHZpZGVvSWQ6IHBhcmFtcy52LFxuICAgICAgICAgICAgICAgIHBsYXlsaXN0SWQ6IHBhcmFtcy5saXN0IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgaW5kZXg6IHBhcmFtcy5pbmRleCA/IHBhcnNlSW50KHBhcmFtcy5pbmRleCkgLSAxIDogMCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6ICdPQUUlM0QnLFxuICAgICAgICAgICAgICAgIHBsYXllclBhcmFtczogcGFyYW1zLnBwLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudHJ5VGltZTogcGVyZm9ybWFuY2Uubm93KCksXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGxvZ2dlci5sb2coYFNQQSBuYXZpZ2F0aW9uIHZpYSB5dC1uYXZpZ2F0ZTogJHtocmVmfWApO1xuXG4gICAgICAgICAgLy8gVHJpZ2dlciBuYXZpZ2F0aW9uIChubyBwdXNoU3RhdGUg4oCUIFlvdVR1YmUgZG9lcyBub3QgdXBkYXRlIFVSTCBpbiBtaW5pIHBsYXllcilcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgUG9wU3RhdGVFdmVudCgncG9wc3RhdGUnLCB7IHN0YXRlIH0pKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaGFuZGxpbmcgbmF2aWdhdGlvbjonLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRydWVcbiAgICApOyAvLyBVc2UgY2FwdHVyZSBwaGFzZVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFudXAgbmF2aWdhdGlvbiBoYW5kbGVyXG4gICAqL1xuICBwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IG51bGw7XG4gICAgbG9nZ2VyLmRlYnVnKCdOYXZpZ2F0aW9uIGhhbmRsZXIgY2xlYW5lZCB1cCcpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBcIi8qKlxcbiAqIENTUyBzdHlsZXMgZm9yIFBpUCB3aW5kb3cgZml4ZXMgYW5kIGN1c3RvbWl6YXRpb25zXFxuICovXFxueXRkLW1pbmlwbGF5ZXIge1xcbiAgbGVmdDogMCAhaW1wb3J0YW50O1xcbiAgcmlnaHQ6IDAgIWltcG9ydGFudDtcXG4gIHRvcDogMCAhaW1wb3J0YW50O1xcbiAgYm90dG9tOiAwICFpbXBvcnRhbnQ7XFxuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xcbiAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XFxuICBtYXgtaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XFxuICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XFxufVxcblxcbnl0ZC1taW5pcGxheWVyLXBsYXllci1jb250YWluZXIge1xcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcXG4gIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xcbn1cXG5cXG4uaHRtbDUtdmlkZW8tY29udGFpbmVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICBib3R0b206IDA7XFxuICByaWdodDogMDtcXG59XFxuXFxuLmh0bWw1LXZpZGVvLWNvbnRhaW5lciAuaHRtbDUtbWFpbi12aWRlbyB7XFxuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xcbiAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XFxuICBvYmplY3QtZml0OiBjb250YWluO1xcbn1cXG5cXG52aWRlbyB7XFxuICBsZWZ0OiAwICFpbXBvcnRhbnQ7XFxuICB0b3A6IDAgIWltcG9ydGFudDtcXG4gIHJpZ2h0OiAwICFpbXBvcnRhbnQ7XFxuICBib3R0b206IDAgIWltcG9ydGFudDtcXG59XFxuXFxuLnl0RHJhZ2dhYmxlQ29tcG9uZW50SG9zdC55dGRNaW5pcGxheWVyQ29tcG9uZW50RHJhZ2dhYmxlIHtcXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvICFpbXBvcnRhbnQ7XFxufVxcblxcbi55dHAtbWluaXBsYXllci1leHBhbmQtd2F0Y2gtcGFnZS1idXR0b24sXFxuLnl0cC1taW5pcGxheWVyLWNsb3NlLWJ1dHRvbixcXG4jaGVhZGVyLWNvbnRlbnRzLFxcbi55dGRNaW5pcGxheWVyQ29tcG9uZW50UmVzaXplcnMge1xcbiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcbn1cXG5cXG4vKiBTdHJldGNoIHByb2dyZXNzIGJhciB0byBmdWxsIHdpZHRoICovXFxuLnl0cC1wcm9ncmVzcy1iYXItY29udGFpbmVyLFxcbi55dHAtcHJvZ3Jlc3MtYmFyIHtcXG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XFxufVxcblxcbi55dHAtcHJldi1idXR0b24sXFxuLnl0cC1uZXh0LWJ1dHRvbiB7XFxuICBkaXNwbGF5OiBpbmxpbmUtZmxleCAhaW1wb3J0YW50O1xcbn1cXG5cIiIsImltcG9ydCB7IENTU19GSVhFUyB9IGZyb20gJy4uL3N0eWxlcyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgU0VMRUNUT1JTIH0gZnJvbSAnLi4vc2VsZWN0b3JzJztcblxuY29uc3QgbG9nZ2VyID0gTG9nZ2VyLmdldEluc3RhbmNlKCdTdHlsZVV0aWxzJyk7XG5cbi8qKlxuICogVXRpbGl0eSBjbGFzcyBmb3Igc3R5bGUgYW5kIENTUyBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHlsZVV0aWxzIHtcbiAgLyoqXG4gICAqIENvcHkgYWxsIHN0eWxlc2hlZXRzIGZyb20gc291cmNlIGRvY3VtZW50IHRvIHRhcmdldCBkb2N1bWVudFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjb3B5U3R5bGVzKHNvdXJjZURvYzogRG9jdW1lbnQsIHRhcmdldERvYzogRG9jdW1lbnQpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3R5bGVzID0gc291cmNlRG9jLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JTLlNUWUxFU0hFRVRTKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29weWluZyAke3N0eWxlcy5sZW5ndGh9IHN0eWxlIGVsZW1lbnRzYCk7XG5cbiAgICAgIHN0eWxlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGFyZ2V0RG9jLmhlYWQuYXBwZW5kQ2hpbGQobm9kZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBjb3B5IHN0eWxlIG5vZGU6JywgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuZGVidWcoJ1N0eWxlcyBjb3BpZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjb3B5aW5nIHN0eWxlczonLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5qZWN0IENTUyBmaXhlcyBpbnRvIHRhcmdldCBkb2N1bWVudFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbmplY3RDU1NGaXhlcyh0YXJnZXREb2M6IERvY3VtZW50KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0eWxlRml4ID0gdGFyZ2V0RG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUZpeC50ZXh0Q29udGVudCA9IENTU19GSVhFUztcbiAgICAgIHRhcmdldERvYy5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRml4KTtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnQ1NTIGZpeGVzIGluamVjdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW5qZWN0aW5nIENTUyBmaXhlczonLCBlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBET01VdGlscyB9IGZyb20gJy4uL3V0aWxzL0RPTVV0aWxzJztcbmltcG9ydCB7IFN0eWxlVXRpbHMgfSBmcm9tICcuLi91dGlscy9TdHlsZVV0aWxzJztcbmltcG9ydCB7IE1pbmlQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSAnLi4vdWkvTWluaVBsYXllckNvbnRyb2xsZXInO1xuaW1wb3J0IHsgUGxheWVyTWFuYWdlciB9IGZyb20gJy4vUGxheWVyTWFuYWdlcic7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uSGFuZGxlciB9IGZyb20gJy4vTmF2aWdhdGlvbkhhbmRsZXInO1xuaW1wb3J0IHsgREVGQVVMVF9ESU1FTlNJT05TLCBUSU1FT1VUUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTRUxFQ1RPUlMgfSBmcm9tICcuLi9zZWxlY3RvcnMnO1xuaW1wb3J0IHsgTWluaVBsYXllckVsZW1lbnQsIFlvdVR1YmVQbGF5ZXIgfSBmcm9tICcuLi90eXBlcy95b3V0dWJlJztcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUsIFBpUENsZWFudXBDYWxsYmFjaywgUGlQV2luZG93UmVhZHlDYWxsYmFjayB9IGZyb20gJy4uL3R5cGVzL2FwcCc7XG5cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgnUGlQTWFuYWdlcicpO1xuXG4vKipcbiAqIE1hbmFnZXMgUGljdHVyZS1pbi1QaWN0dXJlIHdpbmRvdyBsaWZlY3ljbGVcbiAqL1xuZXhwb3J0IGNsYXNzIFBpUE1hbmFnZXIge1xuICBwcml2YXRlIHBpcFdpbmRvdzogTnVsbGFibGU8V2luZG93PiA9IG51bGw7XG4gIHByaXZhdGUgbWluaXBsYXllcjogTnVsbGFibGU8TWluaVBsYXllckVsZW1lbnQ+ID0gbnVsbDtcbiAgcHJpdmF0ZSBtaW5pUGxheWVyQ29udGFpbmVyOiBOdWxsYWJsZTxFbGVtZW50PiA9IG51bGw7XG4gIHByaXZhdGUgcGxhY2Vob2xkZXI6IE51bGxhYmxlPENvbW1lbnQ+ID0gbnVsbDtcbiAgcHJpdmF0ZSB3YXNNaW5pUGxheWVyQWN0aXZlQmVmb3JlUGlQOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBtaW5pUGxheWVyQ29udHJvbGxlcjogTWluaVBsYXllckNvbnRyb2xsZXI7XG4gIHByaXZhdGUgcGxheWVyTWFuYWdlcjogUGxheWVyTWFuYWdlcjtcbiAgcHJpdmF0ZSBuYXZpZ2F0aW9uSGFuZGxlcjogTmF2aWdhdGlvbkhhbmRsZXI7XG5cbiAgcHJpdmF0ZSBvbldpbmRvd1JlYWR5OiBQaVBXaW5kb3dSZWFkeUNhbGxiYWNrO1xuICBwcml2YXRlIG9uQmVmb3JlUmV0dXJuOiBOdWxsYWJsZTxQaVBDbGVhbnVwQ2FsbGJhY2s+ID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtaW5pUGxheWVyQ29udHJvbGxlcjogTWluaVBsYXllckNvbnRyb2xsZXIsXG4gICAgcGxheWVyTWFuYWdlcjogUGxheWVyTWFuYWdlcixcbiAgICBuYXZpZ2F0aW9uSGFuZGxlcjogTmF2aWdhdGlvbkhhbmRsZXIsXG4gICAgb25XaW5kb3dSZWFkeTogUGlQV2luZG93UmVhZHlDYWxsYmFja1xuICApIHtcbiAgICB0aGlzLm1pbmlQbGF5ZXJDb250cm9sbGVyID0gbWluaVBsYXllckNvbnRyb2xsZXI7XG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyID0gcGxheWVyTWFuYWdlcjtcbiAgICB0aGlzLm5hdmlnYXRpb25IYW5kbGVyID0gbmF2aWdhdGlvbkhhbmRsZXI7XG4gICAgdGhpcy5vbldpbmRvd1JlYWR5ID0gb25XaW5kb3dSZWFkeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBQaVAgd2luZG93IGlzIG9wZW5cbiAgICovXG4gIHB1YmxpYyBpc09wZW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGlwV2luZG93ICE9PSBudWxsICYmICF0aGlzLnBpcFdpbmRvdy5jbG9zZWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFBpUCB3aW5kb3cgaW5zdGFuY2VcbiAgICovXG4gIHB1YmxpYyBnZXRXaW5kb3coKTogTnVsbGFibGU8V2luZG93PiB7XG4gICAgcmV0dXJuIHRoaXMucGlwV2luZG93O1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gUGljdHVyZS1pbi1QaWN0dXJlIHdpbmRvd1xuICAgKi9cbiAgcHVibGljIGFzeW5jIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdQaVAgd2luZG93IGFscmVhZHkgb3BlbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxvZ2dlci5sb2coJ09wZW5pbmcgUGlQIHdpbmRvdycpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMubW92ZVBsYXllclRvUElQKCk7XG5cbiAgICAgIGlmICh0aGlzLnBpcFdpbmRvdyAmJiB0aGlzLm1pbmlwbGF5ZXIpIHtcbiAgICAgICAgdGhpcy5waXBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCAoKSA9PiB0aGlzLnJldHVyblBsYXllclRvTWFpbigpKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uSGFuZGxlci5pbml0aWFsaXplKHRoaXMucGlwV2luZG93KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm9uV2luZG93UmVhZHkodGhpcy5waXBXaW5kb3csIHRoaXMubWluaXBsYXllcik7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vbkJlZm9yZVJldHVybiA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgUGlQOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHBsYXllciB0byBQaVAgd2luZG93XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG1vdmVQbGF5ZXJUb1BJUCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBGaW5kIG1pbmkgcGxheWVyIGVsZW1lbnRcbiAgICB0aGlzLm1pbmlwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5NSU5JUExBWUVSKSBhcyBNaW5pUGxheWVyRWxlbWVudDtcbiAgICBpZiAoIXRoaXMubWluaXBsYXllcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaW5pIHBsYXllciBlbGVtZW50IG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIC8vIFNhdmUgbWluaSBwbGF5ZXIgc3RhdGVcbiAgICB0aGlzLndhc01pbmlQbGF5ZXJBY3RpdmVCZWZvcmVQaVAgPSB0aGlzLm1pbmlQbGF5ZXJDb250cm9sbGVyLmlzVmlzaWJsZSgpO1xuXG4gICAgLy8gU2hvdyBtaW5pIHBsYXllclxuICAgIHRoaXMubWluaVBsYXllckNvbnRyb2xsZXIudG9nZ2xlKHRydWUpO1xuXG4gICAgLy8gV2FpdCBmb3IgbWluaSBwbGF5ZXIgY29udGFpbmVyXG4gICAgYXdhaXQgRE9NVXRpbHMud2FpdEZvckVsZW1lbnRTZWxlY3RvcihTRUxFQ1RPUlMuTUlOSVBMQVlFUl9DT05UQUlORVIpO1xuICAgIGxvZ2dlci5kZWJ1ZygnTWluaSBwbGF5ZXIgY29udGFpbmVyIHJlYWR5Jyk7XG5cbiAgICAvLyBHZXQgZGltZW5zaW9uc1xuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5taW5pcGxheWVyLm9mZnNldFdpZHRoIHx8IERFRkFVTFRfRElNRU5TSU9OUy5QSVBfV0lEVEg7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5taW5pcGxheWVyLm9mZnNldEhlaWdodCB8fCBERUZBVUxUX0RJTUVOU0lPTlMuUElQX0hFSUdIVDtcblxuICAgIGxvZ2dlci5kZWJ1ZyhgUmVxdWVzdGluZyBQaVAgd2luZG93OiAke3dpZHRofXgke2hlaWdodH1gKTtcblxuICAgIC8vIFJlcXVlc3QgUGlQIHdpbmRvd1xuICAgIGNvbnN0IGRwcCA9IHdpbmRvdy5kb2N1bWVudFBpY3R1cmVJblBpY3R1cmU7XG4gICAgaWYgKCFkcHApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRG9jdW1lbnQgUGljdHVyZS1pbi1QaWN0dXJlIEFQSSBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5waXBXaW5kb3cgPSBhd2FpdCBkcHAucmVxdWVzdFdpbmRvdyh7IHdpZHRoLCBoZWlnaHQgfSk7XG4gICAgbG9nZ2VyLmxvZygnUGlQIHdpbmRvdyBvcGVuZWQnKTtcblxuICAgIGNvbnN0IHBpcERvYyA9IHRoaXMucGlwV2luZG93LmRvY3VtZW50O1xuXG4gICAgLy8gQ29weSBhdHRyaWJ1dGVzIGFuZCBzdHlsZXNcbiAgICBET01VdGlscy5jb3B5QXR0cmlidXRlcyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHBpcERvYy5kb2N1bWVudEVsZW1lbnQpO1xuICAgIERPTVV0aWxzLmNvcHlBdHRyaWJ1dGVzKGRvY3VtZW50LmJvZHksIHBpcERvYy5ib2R5KTtcbiAgICBTdHlsZVV0aWxzLmNvcHlTdHlsZXMoZG9jdW1lbnQsIHBpcERvYyk7XG4gICAgU3R5bGVVdGlscy5pbmplY3RDU1NGaXhlcyhwaXBEb2MpO1xuXG4gICAgLy8gU2V0IHdpbmRvdyB0aXRsZVxuICAgIGNvbnN0IHRpdGxlID0gd2luZG93Lm5hdmlnYXRvci5tZWRpYVNlc3Npb24/Lm1ldGFkYXRhPy50aXRsZSB8fCAnJztcbiAgICB0aGlzLnNldFdpbmRvd3NUaXRsZSh0aXRsZSk7XG5cbiAgICAvLyBDcmVhdGUgeXRkLWFwcCBpbiBQaVAgd2luZG93XG4gICAgY29uc3QgeXRkQXBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuWVREX0FQUCk7XG4gICAgaWYgKHl0ZEFwcCAmJiB0aGlzLnBpcFdpbmRvdykge1xuICAgICAgY29uc3QgbmV3QXBwID0gcGlwRG9jLmNyZWF0ZUVsZW1lbnQoJ3l0ZC1hcHAnKTtcbiAgICAgIERPTVV0aWxzLmNvcHlBdHRyaWJ1dGVzKHl0ZEFwcCwgbmV3QXBwKTtcbiAgICAgIHBpcERvYy5ib2R5LmFwcGVuZENoaWxkKG5ld0FwcCk7XG4gICAgfVxuXG4gICAgLy8gTW92ZSBtaW5pIHBsYXllciB0byBQaVBcbiAgICB0aGlzLm1pbmlQbGF5ZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5NSU5JUExBWUVSX0NPTlRBSU5FUik7XG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IERPTVV0aWxzLmNyZWF0ZVBsYWNlaG9sZGVyKCdtaW5pX3BsYXllcl9wbGFjZWhvbGRlcicpO1xuICAgIERPTVV0aWxzLmluc2VydFBsYWNlaG9sZGVyQmVmb3JlKHRoaXMubWluaXBsYXllciwgdGhpcy5wbGFjZWhvbGRlcik7XG5cbiAgICBjb25zdCBwaXBBcHAgPSB0aGlzLnBpcFdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5ZVERfQVBQKTtcbiAgICBpZiAocGlwQXBwICYmIHRoaXMubWluaXBsYXllcikge1xuICAgICAgcGlwQXBwLmFwcGVuZENoaWxkKHRoaXMubWluaXBsYXllcik7XG4gICAgfVxuXG4gICAgLy8gTW92ZSBjb250YWluZXIgdG8gZHJhZ2dhYmxlXG4gICAgY29uc3QgeXREcmFnZ2FibGUgPSBwaXBEb2MucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuWVRfRFJBR0dBQkxFKTtcbiAgICBpZiAoeXREcmFnZ2FibGUgJiYgdGhpcy5taW5pUGxheWVyQ29udGFpbmVyKSB7XG4gICAgICB5dERyYWdnYWJsZS5wcmVwZW5kKHRoaXMubWluaVBsYXllckNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgRE9NVXRpbHMudW53cmFwKHl0RHJhZ2dhYmxlKTtcblxuICAgIC8vIEZvY3VzIHZpZGVvIHBsYXllclxuICAgIGNvbnN0IHZpZGVvUGxheWVyID0gcGlwRG9jLnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLkhUTUw1X1ZJREVPX1BMQVlFUik7XG4gICAgaWYgKFxuICAgICAgdmlkZW9QbGF5ZXIgJiZcbiAgICAgICdmb2N1cycgaW4gdmlkZW9QbGF5ZXIgJiZcbiAgICAgIHR5cGVvZiAodmlkZW9QbGF5ZXIgYXMgSFRNTEVsZW1lbnQpLmZvY3VzID09PSAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICAodmlkZW9QbGF5ZXIgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBwbGF5ZXIgdG8gbWFpbiB3aW5kb3dcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcmV0dXJuUGxheWVyVG9NYWluKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ2dlci5sb2coJ1JldHVybmluZyBwbGF5ZXIgdG8gbWFpbiB3aW5kb3cnKTtcblxuICAgIGlmICghdGhpcy5wbGFjZWhvbGRlciB8fCAhdGhpcy5taW5pcGxheWVyKSB7XG4gICAgICBsb2dnZXIud2FybignUGxhY2Vob2xkZXIgb3IgbWluaXBsYXllciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSdW4gYmVmb3JlLXJldHVybiBjbGVhbnVwIChlLmcuIG1vdmUgY29udGV4dCBtZW51IGJhY2spXG4gICAgaWYgKHRoaXMub25CZWZvcmVSZXR1cm4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMub25CZWZvcmVSZXR1cm4oKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBvbkJlZm9yZVJldHVybjonLCBlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub25CZWZvcmVSZXR1cm4gPSBudWxsO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMubW92ZVBsYXllclRvTWFpbigpO1xuXG4gICAgdGhpcy5waXBXaW5kb3cgPSBudWxsO1xuICAgIHRoaXMubmF2aWdhdGlvbkhhbmRsZXIuY2xlYW51cCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgcGxheWVyIGJhY2sgdG8gbWFpbiB3aW5kb3dcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbW92ZVBsYXllclRvTWFpbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMucGxhY2Vob2xkZXIgfHwgIXRoaXMubWluaXBsYXllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCBwbGF5ZXIgYW5kIHNhdmUgc3RhdGVcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLm1pbmlwbGF5ZXIucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuTU9WSUVfUExBWUVSKSBhcyBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPjtcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2F2ZVBsYXlpbmdTdGF0ZShwbGF5ZXIpO1xuXG4gICAgLy8gTW92ZSBtaW5pIHBsYXllciBiYWNrXG4gICAgRE9NVXRpbHMucmVzdG9yZUVsZW1lbnRGcm9tUGxhY2Vob2xkZXIodGhpcy5taW5pcGxheWVyLCB0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gbnVsbDtcblxuICAgIC8vIE1vdmUgY29udGFpbmVyIGJhY2tcbiAgICBjb25zdCB5dERyYWdnYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLllUX0RSQUdHQUJMRSk7XG4gICAgaWYgKHl0RHJhZ2dhYmxlICYmIHRoaXMubWluaVBsYXllckNvbnRhaW5lcikge1xuICAgICAgeXREcmFnZ2FibGUucHJlcGVuZCh0aGlzLm1pbmlQbGF5ZXJDb250YWluZXIpO1xuICAgIH1cblxuICAgIC8vIFNob3cgbWluaSBwbGF5ZXJcbiAgICB0aGlzLm1pbmlQbGF5ZXJDb250cm9sbGVyLnRvZ2dsZSh0cnVlKTtcblxuICAgIC8vIFdhaXQgZm9yIG1haW4gcGxheWVyXG4gICAgYXdhaXQgdGhpcy5wbGF5ZXJNYW5hZ2VyLndhaXRGb3JNYWluUGxheWVyKCk7XG5cbiAgICAvLyBSZW1vdmUgbWluaSBwbGF5ZXIgY29udGFpbmVyXG4gICAgY29uc3QgbWluaXBsYXllckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLk1JTklQTEFZRVJfQ09OVEFJTkVSKTtcbiAgICBpZiAobWluaXBsYXllckNvbnRhaW5lcikge1xuICAgICAgbWluaXBsYXllckNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvLyBSZXN0b3JlIHBsYXliYWNrIHN0YXRlXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnBsYXllck1hbmFnZXIucmVzdG9yZVBsYXlpbmdTdGF0ZShwbGF5ZXIpO1xuXG4gICAgICAvLyBSZXN0b3JlIG1pbmkgcGxheWVyIGlmIGl0IHdhcyBhY3RpdmUgYmVmb3JlXG4gICAgICBpZiAodGhpcy53YXNNaW5pUGxheWVyQWN0aXZlQmVmb3JlUGlQKSB7XG4gICAgICAgIGxldCBjb3VudFRyaWVzID0gMDtcbiAgICAgICAgd2hpbGUgKGNvdW50VHJpZXMgPCA1KSB7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKGBBdHRlbXB0aW5nIHRvIHN3aXRjaCB0byBtaW5pcGxheWVyIG1vZGUsIGF0dGVtcHQgJHtjb3VudFRyaWVzICsgMX1gKTtcbiAgICAgICAgICB0aGlzLm1pbmlQbGF5ZXJDb250cm9sbGVyLnRvZ2dsZSh0cnVlKTtcblxuICAgICAgICAgIGNvbnN0IG1pbmlwbGF5ZXJDb250YWluZXIgPSBhd2FpdCBET01VdGlscy53YWl0Rm9yRWxlbWVudFNlbGVjdG9yKFxuICAgICAgICAgICAgU0VMRUNUT1JTLk1JTklQTEFZRVJfSE9TVCxcbiAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgVElNRU9VVFMuTUVOVV9SRVRSWV9ERUxBWVxuICAgICAgICAgICkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cbiAgICAgICAgICBpZiAobWluaXBsYXllckNvbnRhaW5lcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdNaW5pcGxheWVyIG1vZGUgcmVzdG9yZWQnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvdW50VHJpZXMrKztcbiAgICAgICAgICBpZiAoY291bnRUcmllcyA9PT0gNSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc3dpdGNoIHRvIG1pbmlwbGF5ZXIgbW9kZSBhZnRlciBhbGwgYXR0ZW1wdHMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2luZG93IHRpdGxlc1xuICAgKi9cbiAgcHJpdmF0ZSBzZXRXaW5kb3dzVGl0bGUodGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5ld1RpdGxlID0gYCR7dGl0bGV9IC0gWW91VHViZWA7XG4gICAgaWYgKHRoaXMucGlwV2luZG93KSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IG5ld1RpdGxlO1xuICAgICAgdGhpcy5waXBXaW5kb3cuZG9jdW1lbnQudGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgVGl0bGUgc3luY2VkIGZyb20gTWVkaWFTZXNzaW9uOiAke3RpdGxlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgd2luZG93IHRpdGxlIGZyb20gbWVkaWEgc2Vzc2lvblxuICAgKi9cbiAgcHVibGljIHVwZGF0ZVRpdGxlKHRpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnNldFdpbmRvd3NUaXRsZSh0aXRsZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBTRUxFQ1RPUlMgfSBmcm9tICcuLi9zZWxlY3RvcnMnO1xuaW1wb3J0IHsgWW91VHViZVBsYXllciB9IGZyb20gJy4uL3R5cGVzL3lvdXR1YmUnO1xuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJy4uL3R5cGVzL2FwcCc7XG5cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgnUmVzaXplVHJhY2tlcicpO1xuXG4vKipcbiAqIFRyYWNrcyBlbGVtZW50IHJlc2l6ZSBldmVudHMgYW5kIHVwZGF0ZXMgcGxheWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNpemVUcmFja2VyIHtcbiAgcHJpdmF0ZSBvYnNlcnZlcjogTnVsbGFibGU8UmVzaXplT2JzZXJ2ZXI+ID0gbnVsbDtcblxuICAvKipcbiAgICogU3RhcnQgdHJhY2tpbmcgcmVzaXplIGV2ZW50cyBmb3IgZWxlbWVudCBpbiBQaVAgd2luZG93XG4gICAqL1xuICBwdWJsaWMgc3RhcnQodGFyZ2V0RWxlbWVudDogRWxlbWVudCwgcGlwV2luZG93OiBXaW5kb3cpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbG9nZ2VyLmVycm9yKCdSZXNpemVPYnNlcnZlciBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbG9nZ2VyLmRlYnVnKCdTdGFydGluZyByZXNpemUgdHJhY2tpbmcnKTtcblxuICAgIGNvbnN0IHBpcERvYyA9IHBpcFdpbmRvdy5kb2N1bWVudDtcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzOiBSZXNpemVPYnNlcnZlckVudHJ5W10pID0+IHtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBjb25zdCB3aWR0aCA9IGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoO1xuICAgICAgICBsb2dnZXIuZGVidWcoYE5ldyBzaXplOiAke3dpZHRofXB4YCk7XG5cbiAgICAgICAgY29uc3QgcGxheWVyID0gcGlwRG9jLnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLk1PVklFX1BMQVlFUikgYXMgTnVsbGFibGU8WW91VHViZVBsYXllcj47XG4gICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHBsYXllci5zZXRJbnRlcm5hbFNpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHBsYXllci5zZXRJbnRlcm5hbFNpemUoKTtcbiAgICAgICAgICAgIHBsYXllci5zZXRTaXplPy4oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGxheWVyLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGxheWVyIHNpemUgdXBkYXRlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGFyZ2V0RWxlbWVudCk7XG5cbiAgICBwaXBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCAoKSA9PiB0aGlzLnN0b3AoKSwgeyBvbmNlOiB0cnVlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdHJhY2tpbmcgcmVzaXplIGV2ZW50c1xuICAgKi9cbiAgcHVibGljIHN0b3AoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICBsb2dnZXIuZGVidWcoJ1Jlc2l6ZSB0cmFja2luZyBzdG9wcGVkJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgREVGQVVMVF9ESU1FTlNJT05TIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IFNFTEVDVE9SUyB9IGZyb20gJy4uL3NlbGVjdG9ycyc7XG5pbXBvcnQgeyBET01VdGlscyB9IGZyb20gJy4uL3V0aWxzL0RPTVV0aWxzJztcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICcuLi90eXBlcy9hcHAnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoJ01lbnVPYnNlcnZlcicpO1xuXG4vKipcbiAqIE9ic2VydmVzIG1lbnUgYnV0dG9uIHN0YXRlIGFuZCBhZGp1c3RzIFBpUCB3aW5kb3cuXG4gKiBSZS13YWl0cyBmb3IgdGhlIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbW92ZWQgZnJvbSBET00gKGUuZy4gbmF2aWdhdGUgdG8gdmlkZW8gd2l0aG91dCBwbGF5bGlzdCkuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZW51T2JzZXJ2ZXIge1xuICBwcml2YXRlIG9ic2VydmVyOiBOdWxsYWJsZTxNdXRhdGlvbk9ic2VydmVyPiA9IG51bGw7XG4gIHByaXZhdGUgcmVtb3ZhbE9ic2VydmVyOiBOdWxsYWJsZTxNdXRhdGlvbk9ic2VydmVyPiA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFN0YXJ0IG9ic2VydmluZyBtZW51IGJ1dHRvbiBpbiBQaVAgd2luZG93XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc3RhcnQocGlwV2luZG93OiBXaW5kb3cpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnJ1bk9ic2VydmF0aW9uKHBpcFdpbmRvdyk7XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBmb3IgYnV0dG9uLCBvYnNlcnZlIGl0OyB3aGVuIHJlbW92ZWQgZnJvbSBET00sIHJlLXdhaXQgYW5kIHJlLW9ic2VydmUuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJ1bk9ic2VydmF0aW9uKHBpcFdpbmRvdzogV2luZG93KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHBpcFdpbmRvdy5jbG9zZWQpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnUGlQIHdpbmRvdyBhbHJlYWR5IGNsb3NlZCwgc2tpcHBpbmcgbWVudSBvYnNlcnZhdGlvbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBidXR0b246IEVsZW1lbnQ7XG4gICAgdHJ5IHtcbiAgICAgIGJ1dHRvbiA9IGF3YWl0IERPTVV0aWxzLndhaXRGb3JFbGVtZW50U2VsZWN0b3IoXG4gICAgICAgIFNFTEVDVE9SUy5NRU5VX0JVVFRPTixcbiAgICAgICAgcGlwV2luZG93LmRvY3VtZW50LFxuICAgICAgICAwLFxuICAgICAgICBwaXBXaW5kb3dcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLndhcm4oJ1dhaXQgZm9yIG1lbnUgYnV0dG9uIGFib3J0ZWQnLCBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsb2dnZXIuZGVidWcoJ1N0YXJ0aW5nIG1lbnUgb2JzZXJ2YXRpb24nKTtcblxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICBpZiAobXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ2FyaWEtZXhwYW5kZWQnKSB7XG4gICAgICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnO1xuICAgICAgICAgIGNvbnN0IHBsYXlMaXN0Q29udGFpbmVyID0gcGlwV2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JTLlBMQVlMSVNUX1BBTkVMKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gcGlwV2luZG93Lm91dGVySGVpZ2h0O1xuXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKGBNZW51IHN0YXRlIGNoYW5nZWQ6IGV4cGFuZGVkID0gJHtpc0V4cGFuZGVkfWApO1xuXG4gICAgICAgICAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICAgICAgICAgIC8vIEV4cGFuZCB3aW5kb3cgaWYgbmVlZGVkXG4gICAgICAgICAgICBpZiAoY3VycmVudEhlaWdodCA8IERFRkFVTFRfRElNRU5TSU9OUy5QSVBfRVhQQU5ERURfSEVJR0hUKSB7XG4gICAgICAgICAgICAgIHBpcFdpbmRvdy5yZXNpemVUbyhwaXBXaW5kb3cub3V0ZXJXaWR0aCwgREVGQVVMVF9ESU1FTlNJT05TLlBJUF9FWFBBTkRFRF9IRUlHSFQpO1xuICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BpUCB3aW5kb3cgZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2hvdyBwbGF5bGlzdCBwYW5lbFxuICAgICAgICAgICAgaWYgKHBsYXlMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICAgIChwbGF5TGlzdENvbnRhaW5lciBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhpZGUgcGxheWxpc3QgcGFuZWxcbiAgICAgICAgICAgIGlmIChwbGF5TGlzdENvbnRhaW5lcikge1xuICAgICAgICAgICAgICAocGxheUxpc3RDb250YWluZXIgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBPYnNlcnZlIG9ubHkgYXJpYS1leHBhbmRlZCBhdHRyaWJ1dGVcbiAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUoYnV0dG9uLCB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2FyaWEtZXhwYW5kZWQnXSxcbiAgICB9KTtcblxuICAgIHRoaXMucmVtb3ZhbE9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgaWYgKCFidXR0b24uaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLnJlbW92YWxPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW1vdmFsT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ01lbnUgYnV0dG9uIHJlbW92ZWQgZnJvbSBET00sIHJlLXdhaXRpbmcnKTtcbiAgICAgICAgdm9pZCB0aGlzLnJ1bk9ic2VydmF0aW9uKHBpcFdpbmRvdyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnJlbW92YWxPYnNlcnZlci5vYnNlcnZlKHBpcFdpbmRvdy5kb2N1bWVudC5ib2R5LCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3Agb2JzZXJ2aW5nIG1lbnUgYnV0dG9uXG4gICAqL1xuICBwdWJsaWMgc3RvcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vYnNlcnZlcikge1xuICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVtb3ZhbE9ic2VydmVyKSB7XG4gICAgICB0aGlzLnJlbW92YWxPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLnJlbW92YWxPYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZygnTWVudSBvYnNlcnZhdGlvbiBzdG9wcGVkJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBET01VdGlscyB9IGZyb20gJy4uL3V0aWxzL0RPTVV0aWxzJztcbmltcG9ydCB7IFNFTEVDVE9SUyB9IGZyb20gJy4uL3NlbGVjdG9ycyc7XG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnLi4vdHlwZXMvYXBwJztcblxuY29uc3QgbG9nZ2VyID0gTG9nZ2VyLmdldEluc3RhbmNlKCdDb250ZXh0TWVudUhhbmRsZXInKTtcblxuLyoqXG4gKiBIYW5kbGVzIGNvbnRleHQgbWVudSBtb3ZlbWVudCBiZXR3ZWVuIHdpbmRvd3NcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51SGFuZGxlciB7XG4gIHByaXZhdGUgdmlzaWJpbGl0eU9ic2VydmVyOiBOdWxsYWJsZTxNdXRhdGlvbk9ic2VydmVyPiA9IG51bGw7XG4gIHByaXZhdGUgcGlwV2luZG93OiBOdWxsYWJsZTxXaW5kb3c+ID0gbnVsbDtcbiAgcHJpdmF0ZSBjb250ZXh0TWVudTogTnVsbGFibGU8RWxlbWVudD4gPSBudWxsO1xuICBwcml2YXRlIGNvbnRleHRNZW51UGxhY2Vob2xkZXI6IE51bGxhYmxlPENvbW1lbnQ+ID0gbnVsbDtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBjb250ZXh0IG1lbnUgaGFuZGxlclxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUocGlwV2luZG93OiBXaW5kb3cpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IHBpcFdpbmRvdztcbiAgICB0aGlzLmNvbnRleHRNZW51UGxhY2Vob2xkZXIgPSBET01VdGlscy5jcmVhdGVQbGFjZWhvbGRlcignY29udGV4dF9tZW51X3BsYWNlaG9sZGVyJyk7XG5cbiAgICAvLyBXYWl0IGZvciBjb250ZXh0IG1lbnUgdG8gYXBwZWFyXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY29udGV4dE1lbnUgPSBhd2FpdCBET01VdGlscy53YWl0Rm9yRWxlbWVudFNlbGVjdG9yKFxuICAgICAgICBTRUxFQ1RPUlMuQ09OVEVYVF9NRU5VLFxuICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgMCxcbiAgICAgICAgcGlwV2luZG93XG4gICAgICApO1xuXG4gICAgICBsb2dnZXIubG9nKCdDb250ZXh0IG1lbnUgZWxlbWVudCBmb3VuZCwgc3RhcnRpbmcgdmlzaWJpbGl0eSBtb25pdG9yaW5nJyk7XG5cbiAgICAgIHRoaXMuc3RhcnRNb25pdG9yaW5nKCk7XG4gICAgICB0aGlzLnNldHVwRGlzbWlzc2FsSGFuZGxlcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbml0aWFsaXppbmcgY29udGV4dCBtZW51IGhhbmRsZXI6JywgZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IG1vbml0b3JpbmcgY29udGV4dCBtZW51IHZpc2liaWxpdHlcbiAgICovXG4gIHByaXZhdGUgc3RhcnRNb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250ZXh0TWVudSB8fCAhdGhpcy5waXBXaW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5jb250ZXh0TWVudSB8fCAhdGhpcy5waXBXaW5kb3cpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc1Zpc2libGUgPSAodGhpcy5jb250ZXh0TWVudSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgY29uc3QgaXNJbk1haW5XaW5kb3cgPSB0aGlzLmNvbnRleHRNZW51LnBhcmVudE5vZGUgIT09IHRoaXMucGlwV2luZG93LmRvY3VtZW50LmJvZHk7XG5cbiAgICAgIGlmIChpc1Zpc2libGUgJiYgaXNJbk1haW5XaW5kb3cpIHtcbiAgICAgICAgbG9nZ2VyLmxvZygnQ29udGV4dCBtZW51IG9wZW5lZCBpbiBtYWluIHdpbmRvdy4gSW50ZXJjZXB0aW5nLi4uJyk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVQbGFjZWhvbGRlcikge1xuICAgICAgICAgIERPTVV0aWxzLmluc2VydFBsYWNlaG9sZGVyQmVmb3JlKHRoaXMuY29udGV4dE1lbnUsIHRoaXMuY29udGV4dE1lbnVQbGFjZWhvbGRlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5waXBXaW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRleHRNZW51KTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzVmlzaWJsZSAmJiB0aGlzLmNvbnRleHRNZW51LnBhcmVudE5vZGUgPT09IHRoaXMucGlwV2luZG93LmRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVQbGFjZWhvbGRlcj8ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIGxvZ2dlci5sb2coJ0NvbnRleHQgbWVudSBjbG9zZWQgaW4gUGlQIHdpbmRvdy4gUmV0dXJuaW5nIHRvIG1haW4uLi4nKTtcbiAgICAgICAgICBET01VdGlscy5yZXN0b3JlRWxlbWVudEZyb21QbGFjZWhvbGRlcih0aGlzLmNvbnRleHRNZW51LCB0aGlzLmNvbnRleHRNZW51UGxhY2Vob2xkZXIpO1xuICAgICAgICAgIHRoaXMuc2ltdWxhdGVNYWluQ29udGV4dE1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gT2JzZXJ2ZSBzdHlsZSBhdHRyaWJ1dGUgY2hhbmdlc1xuICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250ZXh0TWVudSwge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZSddLFxuICAgIH0pO1xuXG4gICAgLy8gTW92ZSBtZW51IGltbWVkaWF0ZWx5IGlmIGFscmVhZHkgdmlzaWJsZVxuICAgIGlmICgodGhpcy5jb250ZXh0TWVudSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7XG4gICAgICBpZiAodGhpcy5jb250ZXh0TWVudVBsYWNlaG9sZGVyKSB7XG4gICAgICAgIERPTVV0aWxzLmluc2VydFBsYWNlaG9sZGVyQmVmb3JlKHRoaXMuY29udGV4dE1lbnUsIHRoaXMuY29udGV4dE1lbnVQbGFjZWhvbGRlcik7XG4gICAgICB9XG4gICAgICB0aGlzLnBpcFdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY29udGV4dE1lbnUpO1xuICAgIH1cblxuICAgIC8vIENsZWFudXAgaXMgZG9uZSB2aWEgUGlQTWFuYWdlci5vbkJlZm9yZVJldHVyblxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGhhbmRsZXIgdG8gZGlzbWlzcyBjb250ZXh0IG1lbnUgb24gY2xpY2sgb3V0c2lkZVxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cERpc21pc3NhbEhhbmRsZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBpcFdpbmRvdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUV2ZW50ID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IG1lbnVJblBpcCA9IHRoaXMucGlwV2luZG93IS5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5DT05URVhUX01FTlUpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIG1lbnVJblBpcCAmJlxuICAgICAgICAobWVudUluUGlwIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScgJiZcbiAgICAgICAgIShlLnRhcmdldCBhcyBFbGVtZW50KT8uY2xvc2VzdChTRUxFQ1RPUlMuQ09OVEVYVF9NRU5VX0NPTlRBSU5FUilcbiAgICAgICkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAobWVudUluUGlwIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRleHQgbWVudSBkaXNtaXNzZWQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5waXBXaW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVFdmVudCwgdHJ1ZSk7XG4gICAgdGhpcy5waXBXaW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBoYW5kbGVFdmVudCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2ltdWxhdGUgY29udGV4dCBtZW51IGV2ZW50IGluIG1haW4gd2luZG93XG4gICAqL1xuICBwcml2YXRlIHNpbXVsYXRlTWFpbkNvbnRleHRNZW51KCk6IHZvaWQge1xuICAgIGNvbnN0IG1haW5BcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5ZVERfQVBQKTtcbiAgICBpZiAoIW1haW5BcHApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudCA9IG5ldyBNb3VzZUV2ZW50KCdjb250ZXh0bWVudScsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgdmlldzogd2luZG93LFxuICAgICAgY2xpZW50WDogMCxcbiAgICAgIGNsaWVudFk6IDAsXG4gICAgICBidXR0b246IDIsIC8vIFJpZ2h0IG1vdXNlIGJ1dHRvblxuICAgIH0pO1xuXG4gICAgbWFpbkFwcC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBsb2dnZXIuZGVidWcoJ1N5bnRoZXRpYyBjb250ZXh0bWVudSBldmVudCBzZW50IHRvIG1haW4gd2luZG93Jyk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBtb25pdG9yaW5nIGFuZCBjbGVhbnVwXG4gICAqL1xuICBwdWJsaWMgc3RvcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gbWVudSB0byBtYWluIHdpbmRvdyBpZiBzdGlsbCBpbiBQaVBcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbnRleHRNZW51ICYmXG4gICAgICB0aGlzLnBpcFdpbmRvdyAmJlxuICAgICAgdGhpcy5jb250ZXh0TWVudS5wYXJlbnROb2RlID09PSB0aGlzLnBpcFdpbmRvdy5kb2N1bWVudC5ib2R5ICYmXG4gICAgICB0aGlzLmNvbnRleHRNZW51UGxhY2Vob2xkZXI/LnBhcmVudE5vZGVcbiAgICApIHtcbiAgICAgIGxvZ2dlci5sb2coJ1JldHVybmluZyBjb250ZXh0IG1lbnUgdG8gbWFpbiB3aW5kb3cnKTtcbiAgICAgIERPTVV0aWxzLnJlc3RvcmVFbGVtZW50RnJvbVBsYWNlaG9sZGVyKHRoaXMuY29udGV4dE1lbnUsIHRoaXMuY29udGV4dE1lbnVQbGFjZWhvbGRlcik7XG4gICAgICB0aGlzLnNpbXVsYXRlTWFpbkNvbnRleHRNZW51KCk7XG4gICAgfVxuXG4gICAgdGhpcy5waXBXaW5kb3cgPSBudWxsO1xuICAgIGxvZ2dlci5kZWJ1ZygnQ29udGV4dCBtZW51IGhhbmRsZXIgc3RvcHBlZCcpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgU0VMRUNUT1JTIH0gZnJvbSAnLi4vc2VsZWN0b3JzJztcbmltcG9ydCB7IFlvdVR1YmVQbGF5ZXIgfSBmcm9tICcuLi90eXBlcy95b3V0dWJlJztcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICcuLi90eXBlcy9hcHAnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoJ1NlZWtIYW5kbGVyJyk7XG5cbi8qKlxuICogSGFuZGxlcyBtYW51YWwgc2Vla2luZyBvbiBwcm9ncmVzcyBiYXJcbiAqL1xuZXhwb3J0IGNsYXNzIFNlZWtIYW5kbGVyIHtcbiAgcHJpdmF0ZSBwaXBXaW5kb3c6IE51bGxhYmxlPFdpbmRvdz4gPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHNlZWsgaGFuZGxlciBmb3IgUGlQIHdpbmRvd1xuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemUocGlwV2luZG93OiBXaW5kb3cpOiB2b2lkIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IHBpcFdpbmRvdztcbiAgICB0aGlzLnNldHVwU2Vla0hhbmRsZXIoKTtcbiAgICBsb2dnZXIuZGVidWcoJ1NlZWsgaGFuZGxlciBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIG1vdXNlIGhhbmRsZXJzIGZvciBwcm9ncmVzcyBiYXIgc2Vla2luZ1xuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cFNlZWtIYW5kbGVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5waXBXaW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwaXBEb2MgPSB0aGlzLnBpcFdpbmRvdy5kb2N1bWVudDtcbiAgICBwaXBEb2MuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdtb3VzZWRvd24nLFxuICAgICAgKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSAoZS50YXJnZXQgYXMgRWxlbWVudCk/LmNsb3Nlc3QoU0VMRUNUT1JTLlBST0dSRVNTX0JBUik7XG4gICAgICAgIGlmICghcHJvZ3Jlc3NCYXIpIHJldHVybjtcblxuICAgICAgICBjb25zdCBwbGF5ZXIgPSBwaXBEb2MucXVlcnlTZWxlY3RvcihTRUxFQ1RPUlMuTU9WSUVfUExBWUVSKSBhcyBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPjtcbiAgICAgICAgaWYgKCFwbGF5ZXIpIHJldHVybjtcblxuICAgICAgICBsb2dnZXIuZGVidWcoJ1Byb2dyZXNzIGJhciBjbGlja2VkLCBpbml0aWF0aW5nIHNlZWsnKTtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgcGVyZm9ybVNlZWsgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCByZWN0ID0gcHJvZ3Jlc3NCYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgICAgY29uc3QgcGVyY2VudCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHggLyByZWN0LndpZHRoKSk7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwbGF5ZXIuZ2V0RHVyYXRpb24oKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZWtUaW1lID0gcGVyY2VudCAqIGR1cmF0aW9uO1xuICAgICAgICAgICAgcGxheWVyLnNlZWtUbyhzZWVrVGltZSwgdHJ1ZSk7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFNlZWtpbmcgdG8gJHtzZWVrVGltZS50b0ZpeGVkKDIpfXMgKCR7KHBlcmNlbnQgKiAxMDApLnRvRml4ZWQoMSl9JSlgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcGVyZm9ybVNlZWsoZSk7XG5cbiAgICAgICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAobW92ZUV2ZW50OiBNb3VzZUV2ZW50KSA9PiBwZXJmb3JtU2Vlayhtb3ZlRXZlbnQpO1xuICAgICAgICBjb25zdCBvbk1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICAgICAgcGlwRG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICBwaXBEb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTZWVrIGRyYWcgZW5kZWQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBwaXBEb2MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICBwaXBEb2MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgICB9LFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBzZWVrIGhhbmRsZXJcbiAgICovXG4gIHB1YmxpYyBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMucGlwV2luZG93ID0gbnVsbDtcbiAgICBsb2dnZXIuZGVidWcoJ1NlZWsgaGFuZGxlciBjbGVhbmVkIHVwJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBZVF9BQ1RJT05TIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IFNFTEVDVE9SUyB9IGZyb20gJy4uL3NlbGVjdG9ycyc7XG5pbXBvcnQge1xuICBZb3VUdWJlQ29tbWFuZCxcbiAgWW91VHViZUFwcEVsZW1lbnQsXG4gIFlvdVR1YmVQbGF5ZXIsXG4gIExpa2VBY3Rpb25TdGF0dXNNYXAsXG59IGZyb20gJy4uL3R5cGVzL3lvdXR1YmUnO1xuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJy4uL3R5cGVzL2FwcCc7XG5cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgnWXRBY3Rpb25TZW5kZXInKTtcblxuLyoqXG4gKiBTZW5kcyBZb3VUdWJlIGxpa2UvZGlzbGlrZS9yZW1vdmUgY29tbWFuZHMgdG8gbWFpbiB3aW5kb3cgeXRkLWFwcC5cbiAqIFVzZWQgYnkgTGlrZUJ1dHRvbkhhbmRsZXIgd2hlbiB1c2VyIGNsaWNrcyBsaWtlL2Rpc2xpa2UgaW4gUGlQLlxuICovXG5leHBvcnQgY2xhc3MgWXRBY3Rpb25TZW5kZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IHBpcFdpbmRvdzogTnVsbGFibGU8V2luZG93PjtcblxuICBjb25zdHJ1Y3RvcihwaXBXaW5kb3c6IE51bGxhYmxlPFdpbmRvdz4pIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IHBpcFdpbmRvdztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIFlvdVR1YmUgYWN0aW9uIChMSUtFIC8gRElTTElLRSAvIFJFTU9WRSkgZm9yIHRoZSBjdXJyZW50IFBpUCB2aWRlby5cbiAgICogUmVzb2x2ZXMgdmlkZW8gSUQgZnJvbSBQaVAgcGxheWVyIGFuZCBpbnZva2VzIG1haW4gd2luZG93IHJlc29sdmVDb21tYW5kLlxuICAgKi9cbiAgcHVibGljIHNlbmQoYWN0aW9uVHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBpcFdpbmRvdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYXllciA9IHRoaXMucGlwV2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBTRUxFQ1RPUlMuTU9WSUVfUExBWUVSXG4gICAgKSBhcyBOdWxsYWJsZTxZb3VUdWJlUGxheWVyPjtcbiAgICBpZiAoIXBsYXllciB8fCB0eXBlb2YgcGxheWVyLmdldFZpZGVvRGF0YSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbG9nZ2VyLndhcm4oJ1BsYXllciBvciBnZXRWaWRlb0RhdGEgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZGVvRGF0YSA9IHBsYXllci5nZXRWaWRlb0RhdGEoKTtcbiAgICBjb25zdCB2aWRlb0lkID0gdmlkZW9EYXRhPy52aWRlb19pZDtcblxuICAgIGlmICghdmlkZW9JZCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ1ZpZGVvIElEIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1haW5BcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SUy5ZVERfQVBQKSBhcyBOdWxsYWJsZTxZb3VUdWJlQXBwRWxlbWVudD47XG4gICAgaWYgKCFtYWluQXBwIHx8IHR5cGVvZiBtYWluQXBwLnJlc29sdmVDb21tYW5kICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmaW5kIHJlc29sdmVDb21tYW5kIGluIG1haW4gd2luZG93Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uTWFwOiBMaWtlQWN0aW9uU3RhdHVzTWFwID0ge1xuICAgICAgW1lUX0FDVElPTlMuTElLRV06ICdMSUtFJyxcbiAgICAgIFtZVF9BQ1RJT05TLkRJU0xJS0VdOiAnRElTTElLRScsXG4gICAgICBbWVRfQUNUSU9OUy5SRU1PVkVdOiAnSU5ESUZGRVJFTlQnLFxuICAgIH07XG5cbiAgICBjb25zdCBjb21tYW5kOiBZb3VUdWJlQ29tbWFuZCA9IHtcbiAgICAgIGxpa2VFbmRwb2ludDoge1xuICAgICAgICBzdGF0dXM6IGFjdGlvbk1hcFthY3Rpb25UeXBlXSxcbiAgICAgICAgdGFyZ2V0OiB7IHZpZGVvSWQgfSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBtYWluQXBwLnJlc29sdmVDb21tYW5kKGNvbW1hbmQpO1xuICAgICAgbG9nZ2VyLmxvZyhgU2VudCAke2FjdGlvblR5cGV9IGZvciB2aWRlbyAke3ZpZGVvSWR9YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZW5kaW5nIFlvdVR1YmUgYWN0aW9uOicsIGUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFlUX0FDVElPTlMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU0VMRUNUT1JTIH0gZnJvbSAnLi4vc2VsZWN0b3JzJztcbmltcG9ydCB7IFl0QWN0aW9uU2VuZGVyIH0gZnJvbSAnLi4vY29yZS9ZdEFjdGlvblNlbmRlcic7XG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnLi4vdHlwZXMvYXBwJztcblxuY29uc3QgbG9nZ2VyID0gTG9nZ2VyLmdldEluc3RhbmNlKCdMaWtlQnV0dG9uSGFuZGxlcicpO1xuXG4vKipcbiAqIEhhbmRsZXMgbGlrZS9kaXNsaWtlIGJ1dHRvbiBjbGlja3MgaW4gUGlQIHdpbmRvd1xuICovXG5leHBvcnQgY2xhc3MgTGlrZUJ1dHRvbkhhbmRsZXIge1xuICBwcml2YXRlIHBpcFdpbmRvdzogTnVsbGFibGU8V2luZG93PiA9IG51bGw7XG4gIHByaXZhdGUgeXRBY3Rpb25TZW5kZXI6IE51bGxhYmxlPFl0QWN0aW9uU2VuZGVyPiA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbGlrZSBidXR0b24gaGFuZGxlciBmb3IgUGlQIHdpbmRvd1xuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemUocGlwV2luZG93OiBXaW5kb3cpOiB2b2lkIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IHBpcFdpbmRvdztcbiAgICB0aGlzLnl0QWN0aW9uU2VuZGVyID0gbmV3IFl0QWN0aW9uU2VuZGVyKHBpcFdpbmRvdyk7XG4gICAgdGhpcy5zZXR1cENsaWNrSGFuZGxlcigpO1xuICAgIGxvZ2dlci5kZWJ1ZygnTGlrZSBidXR0b24gaGFuZGxlciBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGNsaWNrIGhhbmRsZXIgZm9yIGxpa2UvZGlzbGlrZSBidXR0b25zXG4gICAqL1xuICBwcml2YXRlIHNldHVwQ2xpY2tIYW5kbGVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5waXBXaW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBpcFdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0b2dnbGVCdXR0b24gPSAoZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQpPy5jbG9zZXN0KFNFTEVDVE9SUy5MSUtFX0JVVFRPTik7XG4gICAgICAgIGlmICghdG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdG9nZ2xlQnV0dG9uLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGlmICghYnV0dG9uQ29udGFpbmVyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNMaWtlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNoaWxkTm9kZXNbMF0gPT09IHRvZ2dsZUJ1dHRvbjtcbiAgICAgICAgY29uc3QgaXNEaXNsaWtlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNoaWxkTm9kZXNbMV0gPT09IHRvZ2dsZUJ1dHRvbjtcblxuICAgICAgICBpZiAoIWlzTGlrZUJ1dHRvbiAmJiAhaXNEaXNsaWtlQnV0dG9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gKGV2ZW50LnRhcmdldCBhcyBFbGVtZW50KT8uY2xvc2VzdChTRUxFQ1RPUlMuQlVUVE9OX1NIQVBFKTtcbiAgICAgICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1ByZXNzZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnKSA9PT0gJ3RydWUnO1xuICAgICAgICBjb25zdCBhY3Rpb25UeXBlID0gaXNQcmVzc2VkXG4gICAgICAgICAgPyBZVF9BQ1RJT05TLlJFTU9WRVxuICAgICAgICAgIDogaXNMaWtlQnV0dG9uXG4gICAgICAgICAgICA/IFlUX0FDVElPTlMuTElLRVxuICAgICAgICAgICAgOiBZVF9BQ1RJT05TLkRJU0xJS0U7XG5cbiAgICAgICAgbG9nZ2VyLmxvZyhgJHthY3Rpb25UeXBlfSBidXR0b24gY2xpY2tlZCAoY3VycmVudGx5IHByZXNzZWQ6ICR7aXNQcmVzc2VkfSlgKTtcblxuICAgICAgICB0aGlzLnl0QWN0aW9uU2VuZGVyPy5zZW5kKGFjdGlvblR5cGUpO1xuICAgICAgfSxcbiAgICAgIHRydWVcbiAgICApOyAvLyBDYXB0dXJlIHBoYXNlXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBsaWtlIGJ1dHRvbiBoYW5kbGVyXG4gICAqL1xuICBwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnBpcFdpbmRvdyA9IG51bGw7XG4gICAgdGhpcy55dEFjdGlvblNlbmRlciA9IG51bGw7XG4gICAgbG9nZ2VyLmRlYnVnKCdMaWtlIGJ1dHRvbiBoYW5kbGVyIGNsZWFuZWQgdXAnKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IE1lZGlhU2Vzc2lvbk1ldGFkYXRhIH0gZnJvbSAnLi4vdHlwZXMveW91dHViZSc7XG5pbXBvcnQgeyBQaVBNYW5hZ2VyIH0gZnJvbSAnLi4vY29yZS9QaVBNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICcuLi90eXBlcy9hcHAnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoJ01lZGlhU2Vzc2lvbkhhbmRsZXInKTtcblxuLyoqXG4gKiBIYW5kbGVzIE1lZGlhIFNlc3Npb24gQVBJIGludGVncmF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBNZWRpYVNlc3Npb25IYW5kbGVyIHtcbiAgcHJpdmF0ZSBwaXBNYW5hZ2VyOiBQaVBNYW5hZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKHBpcE1hbmFnZXI6IFBpUE1hbmFnZXIpIHtcbiAgICB0aGlzLnBpcE1hbmFnZXIgPSBwaXBNYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWVkaWEgc2Vzc2lvbiBoYW5kbGVyXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAoISgnbWVkaWFTZXNzaW9uJyBpbiBuYXZpZ2F0b3IpKSB7XG4gICAgICBsb2dnZXIud2FybignTWVkaWEgU2Vzc2lvbiBBUEkgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXJBY3Rpb25IYW5kbGVyKCk7XG4gICAgdGhpcy5zZXR1cFRpdGxlU3luYygpO1xuICAgIGxvZ2dlci5kZWJ1ZygnTWVkaWEgc2Vzc2lvbiBoYW5kbGVyIGluaXRpYWxpemVkJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgZW50ZXJwaWN0dXJlaW5waWN0dXJlIGFjdGlvbiBoYW5kbGVyXG4gICAqL1xuICBwcml2YXRlIHJlZ2lzdGVyQWN0aW9uSGFuZGxlcigpOiB2b2lkIHtcbiAgICBpZiAoISgnbWVkaWFTZXNzaW9uJyBpbiBuYXZpZ2F0b3IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vICdlbnRlcnBpY3R1cmVpbnBpY3R1cmUnIGlzIGEgQ2hyb21lLXNwZWNpZmljIE1lZGlhIFNlc3Npb24gYWN0aW9uXG4gICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoJ2VudGVycGljdHVyZWlucGljdHVyZScgYXMgTWVkaWFTZXNzaW9uQWN0aW9uLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5sb2coJ01lZGlhIHNlc3Npb24gZW50ZXJwaWN0dXJlaW5waWN0dXJlIGFjdGlvbiB0cmlnZ2VyZWQnKTtcbiAgICAgICAgdGhpcy5waXBNYW5hZ2VyLm9wZW4oKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igb3BlbmluZyBQaVAgZnJvbSBtZWRpYSBzZXNzaW9uOicsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdNZWRpYSBzZXNzaW9uIGFjdGlvbiBoYW5kbGVyIHJlZ2lzdGVyZWQnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIG1lZGlhIHNlc3Npb24gYWN0aW9uIGhhbmRsZXI6JywgZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRpdGxlIHN5bmNocm9uaXphdGlvbiBmcm9tIE1lZGlhU2Vzc2lvbiBtZXRhZGF0YVxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cFRpdGxlU3luYygpOiB2b2lkIHtcbiAgICBpZiAoISgnbWVkaWFTZXNzaW9uJyBpbiBuYXZpZ2F0b3IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihuYXZpZ2F0b3IubWVkaWFTZXNzaW9uKTtcbiAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgJ21ldGFkYXRhJyk7XG4gICAgICBpZiAoIWRlc2MgfHwgIWRlc2MuZ2V0IHx8ICFkZXNjLnNldCkge1xuICAgICAgICBsb2dnZXIud2FybignQ291bGQgbm90IGdldCBvcmlnaW5hbCBtZXRhZGF0YSBkZXNjcmlwdG9yJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5tZWRpYVNlc3Npb24sICdtZXRhZGF0YScsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiBkZXNjLmdldCEuY2FsbChuYXZpZ2F0b3IubWVkaWFTZXNzaW9uKSxcbiAgICAgICAgc2V0OiAodmFsdWU6IE51bGxhYmxlPE1lZGlhU2Vzc2lvbk1ldGFkYXRhPikgPT4ge1xuICAgICAgICAgIGRlc2Muc2V0IS5jYWxsKG5hdmlnYXRvci5tZWRpYVNlc3Npb24sIHZhbHVlKTtcblxuICAgICAgICAgIC8vIFN5bmMgdGl0bGUgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLnRpdGxlKSB7XG4gICAgICAgICAgICB0aGlzLnBpcE1hbmFnZXIudXBkYXRlVGl0bGUodmFsdWUudGl0bGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnTWVkaWEgc2Vzc2lvbiB0aXRsZSBzeW5jIGNvbmZpZ3VyZWQnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgdGl0bGUgc3luYzonLCBlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IE1pbmlQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSAnLi91aS9NaW5pUGxheWVyQ29udHJvbGxlcic7XG5pbXBvcnQgeyBQbGF5ZXJNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL1BsYXllck1hbmFnZXInO1xuaW1wb3J0IHsgTmF2aWdhdGlvbkhhbmRsZXIgfSBmcm9tICcuL2NvcmUvTmF2aWdhdGlvbkhhbmRsZXInO1xuaW1wb3J0IHsgUGlQTWFuYWdlciB9IGZyb20gJy4vY29yZS9QaVBNYW5hZ2VyJztcbmltcG9ydCB7IFJlc2l6ZVRyYWNrZXIgfSBmcm9tICcuL3VpL1Jlc2l6ZVRyYWNrZXInO1xuaW1wb3J0IHsgTWVudU9ic2VydmVyIH0gZnJvbSAnLi91aS9NZW51T2JzZXJ2ZXInO1xuaW1wb3J0IHsgQ29udGV4dE1lbnVIYW5kbGVyIH0gZnJvbSAnLi91aS9Db250ZXh0TWVudUhhbmRsZXInO1xuaW1wb3J0IHsgU2Vla0hhbmRsZXIgfSBmcm9tICcuL2hhbmRsZXJzL1NlZWtIYW5kbGVyJztcbmltcG9ydCB7IExpa2VCdXR0b25IYW5kbGVyIH0gZnJvbSAnLi9oYW5kbGVycy9MaWtlQnV0dG9uSGFuZGxlcic7XG5pbXBvcnQgeyBNZWRpYVNlc3Npb25IYW5kbGVyIH0gZnJvbSAnLi9oYW5kbGVycy9NZWRpYVNlc3Npb25IYW5kbGVyJztcbmltcG9ydCB0eXBlIHsgUGlQQ2xlYW51cENhbGxiYWNrIH0gZnJvbSAnLi90eXBlcy9hcHAnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoJ01haW4nKTtcblxuLyoqXG4gKiBNYWluIGFwcGxpY2F0aW9uIGNsYXNzXG4gKi9cbmNsYXNzIFlvdVR1YmVQaVBBcHAge1xuICBwcml2YXRlIG1pbmlQbGF5ZXJDb250cm9sbGVyOiBNaW5pUGxheWVyQ29udHJvbGxlcjtcbiAgcHJpdmF0ZSBwbGF5ZXJNYW5hZ2VyOiBQbGF5ZXJNYW5hZ2VyO1xuICBwcml2YXRlIG5hdmlnYXRpb25IYW5kbGVyOiBOYXZpZ2F0aW9uSGFuZGxlcjtcbiAgcHJpdmF0ZSBwaXBNYW5hZ2VyOiBQaVBNYW5hZ2VyO1xuICBwcml2YXRlIHJlc2l6ZVRyYWNrZXI6IFJlc2l6ZVRyYWNrZXI7XG4gIHByaXZhdGUgbWVudU9ic2VydmVyOiBNZW51T2JzZXJ2ZXI7XG4gIHByaXZhdGUgY29udGV4dE1lbnVIYW5kbGVyOiBDb250ZXh0TWVudUhhbmRsZXI7XG4gIHByaXZhdGUgc2Vla0hhbmRsZXI6IFNlZWtIYW5kbGVyO1xuICBwcml2YXRlIGxpa2VCdXR0b25IYW5kbGVyOiBMaWtlQnV0dG9uSGFuZGxlcjtcbiAgcHJpdmF0ZSBtZWRpYVNlc3Npb25IYW5kbGVyOiBNZWRpYVNlc3Npb25IYW5kbGVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWluaVBsYXllckNvbnRyb2xsZXIgPSBuZXcgTWluaVBsYXllckNvbnRyb2xsZXIoKTtcbiAgICB0aGlzLnBsYXllck1hbmFnZXIgPSBuZXcgUGxheWVyTWFuYWdlcigpO1xuICAgIHRoaXMubmF2aWdhdGlvbkhhbmRsZXIgPSBuZXcgTmF2aWdhdGlvbkhhbmRsZXIoKTtcbiAgICB0aGlzLnJlc2l6ZVRyYWNrZXIgPSBuZXcgUmVzaXplVHJhY2tlcigpO1xuICAgIHRoaXMubWVudU9ic2VydmVyID0gbmV3IE1lbnVPYnNlcnZlcigpO1xuICAgIHRoaXMuY29udGV4dE1lbnVIYW5kbGVyID0gbmV3IENvbnRleHRNZW51SGFuZGxlcigpO1xuICAgIHRoaXMuc2Vla0hhbmRsZXIgPSBuZXcgU2Vla0hhbmRsZXIoKTtcbiAgICB0aGlzLmxpa2VCdXR0b25IYW5kbGVyID0gbmV3IExpa2VCdXR0b25IYW5kbGVyKCk7XG5cbiAgICB0aGlzLnBpcE1hbmFnZXIgPSBuZXcgUGlQTWFuYWdlcihcbiAgICAgIHRoaXMubWluaVBsYXllckNvbnRyb2xsZXIsXG4gICAgICB0aGlzLnBsYXllck1hbmFnZXIsXG4gICAgICB0aGlzLm5hdmlnYXRpb25IYW5kbGVyLFxuICAgICAgKHBpcFdpbmRvdywgbWluaXBsYXllcikgPT4gdGhpcy5jcmVhdGVQaVBXaW5kb3dDYWxsYmFjayhwaXBXaW5kb3csIG1pbmlwbGF5ZXIpXG4gICAgKTtcblxuICAgIHRoaXMubWVkaWFTZXNzaW9uSGFuZGxlciA9IG5ldyBNZWRpYVNlc3Npb25IYW5kbGVyKHRoaXMucGlwTWFuYWdlcik7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIFBpUE1hbmFnZXI6IGluaXQgaGFuZGxlcnMgd2hlbiBQaVAgb3BlbnMsIHJldHVybiBjbGVhbnVwIG9uIGNsb3NlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVBpUFdpbmRvd0NhbGxiYWNrKFxuICAgIHBpcFdpbmRvdzogV2luZG93LFxuICAgIG1pbmlwbGF5ZXI6IEVsZW1lbnRcbiAgKTogUHJvbWlzZTxQaVBDbGVhbnVwQ2FsbGJhY2s+IHtcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQaVBXaW5kb3dIYW5kbGVycyhwaXBXaW5kb3csIG1pbmlwbGF5ZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnNlZWtIYW5kbGVyLmNsZWFudXAoKTtcbiAgICAgIHRoaXMubGlrZUJ1dHRvbkhhbmRsZXIuY2xlYW51cCgpO1xuICAgICAgdGhpcy5jb250ZXh0TWVudUhhbmRsZXIuc3RvcCgpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgYXBwbGljYXRpb25cbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ2dlci5sb2coJ0luaXRpYWxpemluZyBZb3VUdWJlIFBpUCBhcHBsaWNhdGlvbicpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBtZWRpYSBzZXNzaW9uIGhhbmRsZXJcbiAgICB0aGlzLm1lZGlhU2Vzc2lvbkhhbmRsZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgbG9nZ2VyLmxvZygnWW91VHViZSBQaVAgYXBwbGljYXRpb24gaW5pdGlhbGl6ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGFsbCBoYW5kbGVycyBmb3IgUGlQIHdpbmRvd1xuICAgKiBDYWxsZWQgd2hlbiBQaVAgd2luZG93IGlzIG9wZW5lZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGlQV2luZG93SGFuZGxlcnMocGlwV2luZG93OiBXaW5kb3csIG1pbmlwbGF5ZXI6IEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dnZXIuZGVidWcoJ0luaXRpYWxpemluZyBQaVAgd2luZG93IGhhbmRsZXJzJyk7XG5cbiAgICAvLyBJbml0aWFsaXplIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNpemVUcmFja2VyLnN0YXJ0KG1pbmlwbGF5ZXIsIHBpcFdpbmRvdyk7XG4gICAgLy8gUnVuIGluIGJhY2tncm91bmQgLSBtYXkgd2FpdCBpbmRlZmluaXRlbHkgZm9yIG1lbnUgdG8gYXBwZWFyXG4gICAgdm9pZCB0aGlzLm1lbnVPYnNlcnZlci5zdGFydChwaXBXaW5kb3cpO1xuICAgIC8vIFJ1biBpbiBiYWNrZ3JvdW5kIC0gbWF5IHdhaXQgaW5kZWZpbml0ZWx5IGZvciBtZW51IHRvIGFwcGVhclxuICAgIHZvaWQgdGhpcy5jb250ZXh0TWVudUhhbmRsZXIuaW5pdGlhbGl6ZShwaXBXaW5kb3cpO1xuICAgIHRoaXMuc2Vla0hhbmRsZXIuaW5pdGlhbGl6ZShwaXBXaW5kb3cpO1xuICAgIHRoaXMubGlrZUJ1dHRvbkhhbmRsZXIuaW5pdGlhbGl6ZShwaXBXaW5kb3cpO1xuXG4gICAgbG9nZ2VyLmRlYnVnKCdBbGwgUGlQIHdpbmRvdyBoYW5kbGVycyBpbml0aWFsaXplZCcpO1xuICB9XG59XG5cbi8vIEluaXRpYWxpemUgYXBwbGljYXRpb24gd2hlbiBET00gaXMgcmVhZHlcbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBuZXcgWW91VHViZVBpUEFwcCgpO1xuICAgIGFwcC5pbml0aWFsaXplKCkuY2F0Y2goKGUpID0+IHtcbiAgICAgIExvZ2dlci5nZXRJbnN0YW5jZSgnTWFpbicpLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgYXBwbGljYXRpb246JywgZSk7XG4gICAgfSk7XG4gIH0pO1xufSBlbHNlIHtcbiAgY29uc3QgYXBwID0gbmV3IFlvdVR1YmVQaVBBcHAoKTtcbiAgYXBwLmluaXRpYWxpemUoKS5jYXRjaCgoZSkgPT4ge1xuICAgIExvZ2dlci5nZXRJbnN0YW5jZSgnTWFpbicpLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgYXBwbGljYXRpb246JywgZSk7XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbIlRJTUVPVVRTIiwiREVGQVVMVF9ESU1FTlNJT05TIiwiS0VZQk9BUkQiLCJNSU5JUExBWUVSX0tFWSIsIktFWV9DT0RFIiwiV0hJQ0giLCJQTEFZRVJfU1RBVEVTIiwiWVRfQUNUSU9OUyIsIldFQl9QQUdFX1RZUEVTIiwidCIsImUiLCJuIiwiciIsImkiLCJzIiwidSIsImEiLCJvIiwiYyIsImYiLCJoIiwiZCIsImwiLCIkIiwieSIsIk0iLCJuYW1lIiwid2Vla2RheXMiLCJzcGxpdCIsIm1vbnRocyIsIm9yZGluYWwiLCJtIiwiU3RyaW5nIiwibGVuZ3RoIiwiQXJyYXkiLCJqb2luIiwidiIsInoiLCJ1dGNPZmZzZXQiLCJNYXRoIiwiYWJzIiwiZmxvb3IiLCJkYXRlIiwieWVhciIsIm1vbnRoIiwiY2xvbmUiLCJhZGQiLCJjZWlsIiwicCIsInciLCJEIiwibXMiLCJRIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiZyIsIlMiLCJfIiwiTyIsImFyZ3MiLCJhcmd1bWVudHMiLCJiIiwibG9jYWxlIiwiJEwiLCJ1dGMiLCIkdSIsIngiLCIkeCIsIiRvZmZzZXQiLCJ0aGlzIiwicGFyc2UiLCJwcm90b3R5cGUiLCIkZCIsIkRhdGUiLCJOYU4iLCJ0ZXN0IiwibWF0Y2giLCJzdWJzdHJpbmciLCJVVEMiLCJpbml0IiwiJHkiLCJnZXRGdWxsWWVhciIsIiRNIiwiZ2V0TW9udGgiLCIkRCIsImdldERhdGUiLCIkVyIsImdldERheSIsIiRIIiwiZ2V0SG91cnMiLCIkbSIsImdldE1pbnV0ZXMiLCIkcyIsImdldFNlY29uZHMiLCIkbXMiLCJnZXRNaWxsaXNlY29uZHMiLCIkdXRpbHMiLCJpc1ZhbGlkIiwidG9TdHJpbmciLCJpc1NhbWUiLCJzdGFydE9mIiwiZW5kT2YiLCJpc0FmdGVyIiwiaXNCZWZvcmUiLCIkZyIsInNldCIsInVuaXgiLCJ2YWx1ZU9mIiwiZ2V0VGltZSIsInRvRGF0ZSIsImFwcGx5Iiwic2xpY2UiLCIkbG9jYWxlIiwid2Vla1N0YXJ0IiwiJHNldCIsIm1pbiIsImRheXNJbk1vbnRoIiwiZ2V0IiwiTnVtYmVyIiwicm91bmQiLCJzdWJ0cmFjdCIsImZvcm1hdCIsImludmFsaWREYXRlIiwibWVyaWRpZW0iLCJtb250aHNTaG9ydCIsIndlZWtkYXlzTWluIiwid2Vla2RheXNTaG9ydCIsImdldFRpbWV6b25lT2Zmc2V0IiwiZGlmZiIsInRvSlNPTiIsInRvSVNPU3RyaW5nIiwidG9VVENTdHJpbmciLCJrIiwiZm9yRWFjaCIsImV4dGVuZCIsIiRpIiwiaXNEYXlqcyIsImVuIiwiTHMiLCJfTG9nZ2VyIiwiY29uc3RydWN0b3IiLCJzY29wZSIsImdldEluc3RhbmNlIiwic3RvcmFnZUxpc3RlbmVyQWRkZWQiLCJlbmFibGVkIiwiY2hlY2tEZWJ1Z0ZsYWciLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaW5zdGFuY2UiLCJpbnN0YW5jZXMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3R5bGVkIiwiZm4iLCJtc2dTdHlsZSIsIm1lc3NhZ2UiLCJtZXRhIiwidHMiLCJkYXlqcyIsImVzY2FwZWQiLCJsb2ciLCJjb25zb2xlIiwiYmluZCIsIndhcm4iLCJlcnJvciIsImRlYnVnIiwiTWFwIiwiTG9nZ2VyIiwiU0VMRUNUT1JTIiwibG9nZ2VyIiwiTWluaVBsYXllckNvbnRyb2xsZXIiLCJpc1Zpc2libGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGUiLCJmb3JjZVNob3ciLCJldmVudFBhcmFtcyIsImtleSIsImNvZGUiLCJ0b1VwcGVyQ2FzZSIsImtleUNvZGUiLCJ3aGljaCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiY29tcG9zZWQiLCJ0YXJnZXQiLCJkaXNwYXRjaEV2ZW50IiwiS2V5Ym9hcmRFdmVudCIsInNob3ciLCJoaWRlIiwiRE9NVXRpbHMiLCJjcmVhdGVQbGFjZWhvbGRlciIsImNvbW1lbnRUZXh0IiwiY3JlYXRlQ29tbWVudCIsImluc2VydFBsYWNlaG9sZGVyQmVmb3JlIiwiZWxlbWVudCIsInBsYWNlaG9sZGVyIiwicGFyZW50IiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInJlc3RvcmVFbGVtZW50RnJvbVBsYWNlaG9sZGVyIiwicmVtb3ZlIiwiY29weUF0dHJpYnV0ZXMiLCJzb3VyY2UiLCJmcm9tIiwiYXR0cmlidXRlcyIsImF0dHIiLCJzZXRBdHRyaWJ1dGUiLCJub2RlTmFtZSIsIm5vZGVWYWx1ZSIsInVud3JhcCIsIndyYXBwZXIiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ3YWl0Rm9yRWxlbWVudFNlbGVjdG9yIiwic2VsZWN0b3IiLCJ0aW1lb3V0IiwidGFyZ2V0V2luZG93IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJleGlzdGluZyIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm9icyIsImRpc2Nvbm5lY3QiLCJib2R5Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJjbG9zZWQiLCJvbmNlIiwiUGxheWVyTWFuYWdlciIsIndhc1BsYXlpbmciLCJnZXRQbGF5ZXJTdGF0ZSIsInBsYXllciIsImlzUGxheWluZyIsInNhdmVQbGF5aW5nU3RhdGUiLCJyZXN0b3JlUGxheWluZ1N0YXRlIiwicGxheVZpZGVvIiwiZ2V0VmlkZW9EYXRhIiwid2FpdEZvck1haW5QbGF5ZXIiLCJyZXNldFN0YXRlIiwiTmF2aWdhdGlvbkhhbmRsZXIiLCJwaXBXaW5kb3ciLCJpbml0aWFsaXplIiwic2V0dXBDbGlja0hhbmRsZXIiLCJldmVudCIsImZvY3VzIiwiZW5kcG9pbnQiLCJfYSIsImNsb3Nlc3QiLCJfYiIsImhyZWYiLCJ1cmwiLCJVUkwiLCJwYXJhbXMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsInNlYXJjaFBhcmFtcyIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwic3RhdGUiLCJjb21tYW5kTWV0YWRhdGEiLCJ3ZWJDb21tYW5kTWV0YWRhdGEiLCJ3ZWJQYWdlVHlwZSIsInJvb3RWZSIsIndhdGNoRW5kcG9pbnQiLCJ2aWRlb0lkIiwicGxheWxpc3RJZCIsImxpc3QiLCJpbmRleCIsInBhcnNlSW50IiwicGxheWVyUGFyYW1zIiwicHAiLCJlbnRyeVRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIlBvcFN0YXRlRXZlbnQiLCJjbGVhbnVwIiwiU3R5bGVVdGlscyIsImNvcHlTdHlsZXMiLCJzb3VyY2VEb2MiLCJ0YXJnZXREb2MiLCJzdHlsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibm9kZSIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsImluamVjdENTU0ZpeGVzIiwic3R5bGVGaXgiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJQaVBNYW5hZ2VyIiwibWluaVBsYXllckNvbnRyb2xsZXIiLCJwbGF5ZXJNYW5hZ2VyIiwibmF2aWdhdGlvbkhhbmRsZXIiLCJvbldpbmRvd1JlYWR5IiwibWluaXBsYXllciIsIm1pbmlQbGF5ZXJDb250YWluZXIiLCJ3YXNNaW5pUGxheWVyQWN0aXZlQmVmb3JlUGlQIiwib25CZWZvcmVSZXR1cm4iLCJpc09wZW4iLCJnZXRXaW5kb3ciLCJvcGVuIiwibW92ZVBsYXllclRvUElQIiwicmV0dXJuUGxheWVyVG9NYWluIiwicmVzdWx0Iiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsImRwcCIsImRvY3VtZW50UGljdHVyZUluUGljdHVyZSIsInJlcXVlc3RXaW5kb3ciLCJwaXBEb2MiLCJkb2N1bWVudEVsZW1lbnQiLCJ0aXRsZSIsIm5hdmlnYXRvciIsIm1lZGlhU2Vzc2lvbiIsIm1ldGFkYXRhIiwic2V0V2luZG93c1RpdGxlIiwieXRkQXBwIiwibmV3QXBwIiwicGlwQXBwIiwieXREcmFnZ2FibGUiLCJwcmVwZW5kIiwidmlkZW9QbGF5ZXIiLCJtb3ZlUGxheWVyVG9NYWluIiwibWluaXBsYXllckNvbnRhaW5lciIsImFzeW5jIiwiY291bnRUcmllcyIsImNhdGNoIiwibmV3VGl0bGUiLCJ1cGRhdGVUaXRsZSIsIlJlc2l6ZVRyYWNrZXIiLCJzdGFydCIsInRhcmdldEVsZW1lbnQiLCJSZXNpemVPYnNlcnZlciIsImVudHJpZXMiLCJlbnRyeSIsImNvbnRlbnRSZWN0Iiwic2V0SW50ZXJuYWxTaXplIiwic2V0U2l6ZSIsImNhbGwiLCJFdmVudCIsInN0b3AiLCJNZW51T2JzZXJ2ZXIiLCJyZW1vdmFsT2JzZXJ2ZXIiLCJydW5PYnNlcnZhdGlvbiIsImJ1dHRvbiIsIm11dGF0aW9ucyIsIm11dGF0aW9uIiwiYXR0cmlidXRlTmFtZSIsImlzRXhwYW5kZWQiLCJnZXRBdHRyaWJ1dGUiLCJwbGF5TGlzdENvbnRhaW5lciIsImN1cnJlbnRIZWlnaHQiLCJvdXRlckhlaWdodCIsInJlc2l6ZVRvIiwib3V0ZXJXaWR0aCIsInN0eWxlIiwiZGlzcGxheSIsImF0dHJpYnV0ZUZpbHRlciIsImlzQ29ubmVjdGVkIiwiQ29udGV4dE1lbnVIYW5kbGVyIiwidmlzaWJpbGl0eU9ic2VydmVyIiwiY29udGV4dE1lbnUiLCJjb250ZXh0TWVudVBsYWNlaG9sZGVyIiwic3RhcnRNb25pdG9yaW5nIiwic2V0dXBEaXNtaXNzYWxIYW5kbGVyIiwiaXNJbk1haW5XaW5kb3ciLCJzaW11bGF0ZU1haW5Db250ZXh0TWVudSIsImhhbmRsZUV2ZW50IiwibWVudUluUGlwIiwibWFpbkFwcCIsIk1vdXNlRXZlbnQiLCJ2aWV3IiwiY2xpZW50WCIsImNsaWVudFkiLCJTZWVrSGFuZGxlciIsInNldHVwU2Vla0hhbmRsZXIiLCJwcm9ncmVzc0JhciIsInBlcmZvcm1TZWVrIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJwZXJjZW50IiwibWF4IiwiZHVyYXRpb24iLCJnZXREdXJhdGlvbiIsInNlZWtUaW1lIiwic2Vla1RvIiwidG9GaXhlZCIsIm9uTW91c2VNb3ZlIiwibW92ZUV2ZW50Iiwib25Nb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIll0QWN0aW9uU2VuZGVyIiwic2VuZCIsImFjdGlvblR5cGUiLCJ2aWRlb0RhdGEiLCJ2aWRlb19pZCIsInJlc29sdmVDb21tYW5kIiwiY29tbWFuZCIsImxpa2VFbmRwb2ludCIsInN0YXR1cyIsIllUX0FDVElPTlNfTElLRSIsIllUX0FDVElPTlNfRElTTElLRSIsIllUX0FDVElPTlNfUkVNT1ZFIiwiTGlrZUJ1dHRvbkhhbmRsZXIiLCJ5dEFjdGlvblNlbmRlciIsInRvZ2dsZUJ1dHRvbiIsImJ1dHRvbkNvbnRhaW5lciIsInBhcmVudEVsZW1lbnQiLCJpc0xpa2VCdXR0b24iLCJjaGlsZE5vZGVzIiwiaXNEaXNsaWtlQnV0dG9uIiwiaXNQcmVzc2VkIiwiX2MiLCJNZWRpYVNlc3Npb25IYW5kbGVyIiwicGlwTWFuYWdlciIsInJlZ2lzdGVyQWN0aW9uSGFuZGxlciIsInNldHVwVGl0bGVTeW5jIiwic2V0QWN0aW9uSGFuZGxlciIsImdldFByb3RvdHlwZU9mIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiWW91VHViZVBpUEFwcCIsInJlc2l6ZVRyYWNrZXIiLCJtZW51T2JzZXJ2ZXIiLCJjb250ZXh0TWVudUhhbmRsZXIiLCJzZWVrSGFuZGxlciIsImxpa2VCdXR0b25IYW5kbGVyIiwiY3JlYXRlUGlQV2luZG93Q2FsbGJhY2siLCJtZWRpYVNlc3Npb25IYW5kbGVyIiwiaW5pdGlhbGl6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
