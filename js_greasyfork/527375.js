// ==UserScript==
// @name         Dream Singles Message Sender
// @namespace    http://tampermonkey.net/
// @version      1.5.3
// @description  Enhanced message sender for Dream Singles with multiple sending modes and features
// @author       Maxym Zhyltsov
// @match        https://www.dream-singles.com/*
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @connect      ws.dream-singles.com
// @connect      dream-singles.com
// @connect      dreamautobot.com
// @require      https://ext.dream-singles.com/js/ext.js
// @license MIT
// @downloadURL https://update.greasyfork.org/scripts/527375/Dream%20Singles%20Message%20Sender.user.js
// @updateURL https://update.greasyfork.org/scripts/527375/Dream%20Singles%20Message%20Sender.meta.js
// ==/UserScript==

!function(){"use strict";GM_setValue("isLogoHereStorage","true");let A=null,n=(new Set,!0),e=!1,t=new Set,o=new Set;const i=new Map;let a=null,s=new Set,r=null,c=1,l=null,d=null,u=null,p=null,m=new Set,g=0,h=null,f=null,b=new Map,x=null,w=!1,y=0,v=!1;async function k(A,n){try{const e=await async function(){try{const A=function(){try{const A=document.createElement("canvas"),n=A.getContext("webgl")||A.getContext("experimental-webgl");if(!n)return{supported:!1,renderer:null,vendor:null};const e=n.getExtension("WEBGL_debug_renderer_info");let t="Unknown",o="Unknown";e&&(t=n.getParameter(e.UNMASKED_RENDERER_WEBGL)||"Unknown",o=n.getParameter(e.UNMASKED_VENDOR_WEBGL)||"Unknown");const i={version:n.getParameter(n.VERSION),shadingLanguageVersion:n.getParameter(n.SHADING_LANGUAGE_VERSION),vendorWebGL:n.getParameter(n.VENDOR),rendererWebGL:n.getParameter(n.RENDERER),maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxViewportDims:n.getParameter(n.MAX_VIEWPORT_DIMS),maxVertexAttribs:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexTextureImageUnits:n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureImageUnits:n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),maxCombinedTextureImageUnits:n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),maxFragmentUniformVectors:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),maxVertexUniformVectors:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryingVectors:n.getParameter(n.MAX_VARYING_VECTORS),maxRenderBufferSize:n.getParameter(n.MAX_RENDERBUFFER_SIZE),aliasedLineWidthRange:n.getParameter(n.ALIASED_LINE_WIDTH_RANGE),aliasedPointSizeRange:n.getParameter(n.ALIASED_POINT_SIZE_RANGE),maxCubeMapTextureSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)},a=n.getSupportedExtensions()||[],s="\n            attribute vec2 position;\n            void main() {\n                gl_Position = vec4(position, 0.0, 1.0);\n            }\n        ",r="\n            precision mediump float;\n            void main() {\n                gl_FragColor = vec4(1.0, 0.0, 0.5, 1.0);\n            }\n        ",c=n.createShader(n.VERTEX_SHADER);n.shaderSource(c,s),n.compileShader(c);const l=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(l,r),n.compileShader(l);const d=n.createProgram();n.attachShader(d,c),n.attachShader(d,l),n.linkProgram(d),n.useProgram(d);const u=new Float32Array([-1,-1,1,-1,-1,1,1,1]),p=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,p),n.bufferData(n.ARRAY_BUFFER,u,n.STATIC_DRAW);const m=n.getAttribLocation(d,"position");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,0),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_STRIP,0,4);const g=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,g);const h=Array.from(g).join(",");return{supported:!0,renderer:t,vendor:o,params:i,extensions:a.sort(),extensionsCount:a.length,renderHash:h}}catch(A){return{supported:!1,renderer:null,vendor:null,error:A.message}}}(),n={screenResolution:`${screen.width}x${screen.height}`,screenColorDepth:screen.colorDepth,devicePixelRatio:window.devicePixelRatio,userAgent:navigator.userAgent,language:navigator.language,languages:navigator.languages,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:(new Date).getTimezoneOffset(),hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory||null,maxTouchPoints:navigator.maxTouchPoints||0,webglSupported:A.supported,gpuRenderer:A.renderer,gpuVendor:A.vendor,webglVersion:A.params?.version||null,webglShadingLanguageVersion:A.params?.shadingLanguageVersion||null,webglMaxTextureSize:A.params?.maxTextureSize||null,webglMaxViewportDims:A.params?.maxViewportDims||null,webglExtensionsCount:A.extensionsCount||0,webglRenderHash:A.renderHash||null},e=JSON.stringify(n,Object.keys(n).sort());let t=0;for(let A=0;A<e.length;A++)t=(t<<5)-t+e.charCodeAt(A),t&=t;return{primary:Math.abs(t).toString(36),additional:n}}catch(A){return null}}();let t,o,i,a;try{t=await new Promise((t,o)=>{GM_xmlhttpRequest({method:"POST",url:"https://dreamautobot.com/api/auth/extension-login",headers:{"Content-Type":"application/json"},data:JSON.stringify({email:A,password:n,fingerprint:e}),onload:function(A){t(A)},onerror:function(A){o(new Error("Network error during authentication"))}})})}catch(A){return{error:"Connection error. Please check your internet connection and try again."}}try{o=JSON.parse(t.responseText)}catch(A){return{error:`Server error (${t.status}): Unable to parse response`}}if(!1===o.success&&o.error)return{error:o.error};if(o.error)return{error:o.error};if(200!==t.status)return{error:o.message||o.error||`Authentication failed (${t.status})`};if(!o.token||!o.userId)return{error:"Authentication failed: Invalid server response"};try{const A=GM_info.script.version||"1.5.0";i=await new Promise((n,t)=>{GM_xmlhttpRequest({method:"POST",url:"https://dreamautobot.com/api/auth/extension",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.token}`},data:JSON.stringify({userId:o.userId,version:A,fingerprint:e}),onload:function(A){n(A)},onerror:function(A){t(new Error("Network error during subscription check"))}})})}catch(A){return{error:"Connection error during subscription verification. Please try again."}}try{a=JSON.parse(i.responseText)}catch(A){return{error:`Subscription verification failed (${i.status})`}}return a.error?{error:a.error}:a.authorized?(a.tokenRefreshed&&a.token?(D=a.token,GM_setValue("dreamauto_auth_token",D),GM_setValue("dreamauto_user_id",o.userId)):(D=o.token,GM_setValue("dreamauto_auth_token",D),GM_setValue("dreamauto_user_id",o.userId)),l=o.userId,v=!0,!0):{error:a.message||"Your subscription has expired or is not active. Please renew your subscription to continue."}}catch(A){return{error:`Authentication error: ${A.message}`}}}let q=[{text:"",photoId:"",delay:0},{text:"",photoId:"",delay:30},{text:"",photoId:"",delay:60},{text:"",photoId:"",delay:120},{text:"",photoId:"",delay:240}],M=new Map,I=[new Set,new Set,new Set,new Set,new Set],S=[new Set,new Set,new Set,new Set,new Set];const Q={duplicate:new Set,tooShort:new Set,invisible:new Set,inactive:new Set,accessDenied:new Set,other:new Set};let D=null;const T=new Audio("data:audio/wav;base64,SUQzAwAAAAAfdlRZRVIAAAAFAAAAMjAyMVRJVDIAAAAXAAAB//4fBEMEOgQwBD0ETAQ1BCAAMQAxAFRQRTEAAAABAAAAVEFMQgAAAAEAAABUQ09OAAAAAQAAAENPTU0AAAAFAAAAZW5nAFRSQ0sAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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");let R=!1,E=[];const G=document.createElement("style");G.textContent="\n.message-series-toggle {\n    margin-top: 15px;\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border: 1px solid #dee2e6;\n}\n\n.message-series-container {\n    display: none;\n    margin-top: 15px;\n}\n\n.message-series-container.active {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n}\n\n.series-message {\n    padding: 15px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border: 1px solid #dee2e6;\n}\n\n.series-message-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.series-delay-container {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.series-delay-container input {\n    width: 80px;\n    padding: 5px;\n    border: 1px solid #dee2e6;\n    border-radius: 4px;\n}\n\n.series-photo-container {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 10px;\n}\n\n.series-message-input {\n    width: 100%;\n    padding: 12px;\n    border: 1px solid #dee2e6;\n    border-radius: 6px;\n    font-size: 14px;\n    resize: vertical;\n    min-height: 80px;\n    background: #ffffff;\n    color: #495057;\n    transition: all 0.2s;\n    line-height: 1.5;\n}\n",document.head.appendChild(G);const B=document.createElement("style");B.textContent="\n\n   .photo-modal {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 60vw;\n    height: 40vh;\n    min-width: 400px;\n    min-height: 620px;\n    max-width: 800px;\n    max-height: 800px;\n    background: #fff;\n    border-radius: 12px;\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);\n    z-index: 10001;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n\n@media screen and (max-width: 720px) {\n    .photo-modal  {\n        width: 20vw;\n        height: 50vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 721px) {\n    .photo-modal {\n        width: 30vw;\n        height: 50vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 900px) {\n    .photo-modal {\n        width: 40vw;\n        height: 50vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 1000px) {\n    .photo-modal  {\n        width: 50vw;\n       height: 50vh;\n    }\n}\n@media screen and (min-width: 1920px) {\n    .photo-modal  {\n        width: 60vw;\n        height: 60vh;\n    }\n}\n\n    .photo-modal-header {\n        padding: 16px;\n        background: #495057;\n        color: #000000;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .photo-modal-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 20px;\n    }\n\n    .photo-categories {\n        display: flex;\n        gap: 10px;\n        margin-bottom: 20px;\n    }\n\n    .photo-category {\n        padding: 8px 16px;\n        background: #f8f9fa;\n        border: 1px solid #dee2e6;\n        border-radius: 4px;\n        cursor: pointer;\n    }\n\n    .photo-category.active {\n        background: #495057;\n        color: #fff;\n    }\n\n    .photo-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n        gap: 16px;\n    }\n\n    .photo-item {\n        position: relative;\n        cursor: pointer;\n        border: 2px solid transparent;\n        border-radius: 4px;\n        overflow: hidden;\n    }\n\n    .photo-item.selected {\n        border-color: #495057;\n    }\n\n    .photo-item img {\n        width: 100%;\n        height: 150px;\n        object-fit: cover;\n    }\n\n    .photo-id {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(0, 0, 0, 0.7);\n        color: #fff;\n        padding: 4px;\n        font-size: 12px;\n        text-align: center;\n    }\n\n    .photo-loading-spinner {\n        animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n        100% { transform: rotate(360deg); }\n    }\n\n    .loading-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(255, 255, 255, 0.9);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1;\n    }\n    #select-photo-h3 {\n       color:white\n    }\n    .photo-close-button {\n        background: none;\n        border: none;\n        color: #fff;\n        cursor: pointer;\n        font-size: 20px;\n        padding: 4px 8px;\n    }\n\n    .photo-close-button:hover {\n        background: rgba(255, 255, 255, 0.1);\n        border-radius: 4px;\n    }\n",document.head.appendChild(B);const P=document.createElement("style");P.textContent="\n#h3-list {\ncolor: white;\n}\n\n.id-list-modal-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n}\n\n.copy-ids-button {\n    padding: 4px 8px;\n    background: #fff;\n    color: #495057;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 14px;\n}\n\n.copy-ids-button:hover {\n    background: #e9ecef;\n}\n\n\n\n.id-list {\n    font-family: monospace;\n    white-space: pre-wrap;\n    word-break: break-all;\n}\n\n.id-list-item {\n    padding: 4px 0;\n}\n\n.id-list-item a {\n    color: #0066cc;\n    text-decoration: none;\n}\n\n.id-list-item a:hover {\n    text-decoration: underline;\n}\n\n.id-list-close-button {\n    background: none;\n    border: none;\n    color: #fff;\n    cursor: pointer;\n    font-size: 20px;\n    padding: 4px 8px;\n}\n\n.id-list-close-button:hover {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 4px;\n}\n\n.stats-clickable {\n    cursor: pointer;\n    text-decoration: underline;\n    color: #0066cc;\n}\n\n.stats-non-clickable {\n    color: inherit;\n    text-decoration: none;\n    cursor: default;\n}\n\n\n",document.head.appendChild(P);const F='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>\n</svg>',N='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n    <path d="M20 12H4"/>\n</svg>',W=document.createElement("style");function J(){const A=document.querySelector("#blacklistIds").value;t=new Set(A.split("\n").map(A=>A.trim()).filter(A=>A&&!isNaN(A)).map(Number))}async function O(A,n=1){const e={others:"/members/media/gallery/loadMediaFolders?selectable=0&createFolder=true&checkbox=1&mediaGalleryPage=accountOption",firstLetters:"/members/media/gallery/loadImages?selectable=0&status=firstLetters&checkbox=1&mediaGalleryPage=accountOption",favorites:"/members/media/gallery/loadImages?selectable=0&status=favorite&checkbox=1&mediaGalleryPage=accountOption",all:"/members/media/gallery/loadImages?selectable=0&checkbox=1&mediaGalleryPage=accountOption"}[A],t=n>1?`${e}&page=${n}`:e;try{const A=await fetch(t);if(!A.ok)throw new Error(`HTTP error! status: ${A.status}`);const n=await A.text(),e=(new DOMParser).parseFromString(n,"text/html"),o=Array.from(e.querySelectorAll("img[data-id]")).map(A=>({id:A.getAttribute("data-id"),src:A.getAttribute("src")})),i=Array.from(e.querySelectorAll("#knpPaginator .btn-pagenav")).reduce((A,n)=>{const e=parseInt(n.textContent);return isNaN(e)?A:Math.max(A,e)},1);return{photos:o,lastPage:i}}catch(A){return{photos:[],lastPage:1}}}function Z(A){E.push(A.key.toLowerCase()),E.length>18&&E.shift(),"wehavesenderathome"===E.join("")&&(GM_setValue("isLogoHereStorage","true"),R=!0,alert("Activated!"),location.reload())}async function Y(){try{return JSON.parse(GM_getValue("isLogoHereStorage","false"))}catch(A){return!1}}function C(){const A=document.createElement("div");A.className="login-modal minimized",A.innerHTML=`\n        <div class="login-header">\n            <h2>Login to Message Sender</h2>\n            <button class="minimize-button" title="Minimize">${N}</button>\n        </div>\n        <div class="login-content">\n            <div id="login-error" class="login-error"></div>\n            <input type="email" id="login-email" class="login-input" placeholder="Email">\n            <input type="password" id="login-password" class="login-input" placeholder="Password">\n            <button id="login-button" class="login-button">Login</button>\n        </div>\n    `;const e=document.createElement("div");function t(){n=!n,A.classList.toggle("minimized",n),e.style.display=n?"flex":"none"}e.className="login-toggle-button",e.innerHTML=F,e.style.display="flex",document.body.appendChild(A),document.body.appendChild(e),e.addEventListener("click",t),A.querySelector(".minimize-button").addEventListener("click",t);const o=A.querySelector("#login-button"),i=A.querySelector("#login-email"),a=A.querySelector("#login-password"),s=A.querySelector("#login-error");return o.addEventListener("click",async()=>{const n=i.value.trim(),t=a.value.trim();if(!n||!t)return s.textContent="Please enter both email and password",void(s.style.display="block");s.style.display="none",o.disabled=!0,o.textContent="Logging in...";try{const o=await k(n,t);!0===o?(function(A,n){try{GM_setValue("userscript_email",A),GM_setValue("userscript_password",n)}catch(A){}}(n,t),A.remove(),e.remove(),cA()):o&&o.error?(s.innerHTML=`<strong>Error:</strong> ${o.error}`,o.blocked&&(s.style.color="#721c24",s.style.backgroundColor="#f8d7da",s.style.border="1px solid #f5c6cb",s.style.padding="10px 15px",s.style.borderRadius="4px",s.style.fontWeight="bold"),s.style.display="block"):(s.textContent="Authentication failed. Please try again.",s.style.display="block")}catch(A){s.innerHTML=`<strong>Error:</strong> ${A.message||"An unexpected error occurred. Please try again."}`,s.style.display="block"}finally{o.disabled=!1,o.textContent="Login"}}),a.addEventListener("keypress",A=>{"Enter"===A.key&&o.click()}),A}function j(A){const n=document.createElement("div");n.className="photo-modal",n.innerHTML='\n        <div class="photo-modal-header">\n            <h3 id="select-photo-h3">Select Photo</h3>\n            <button class="photo-close-button">Ã—</button>\n        </div>\n        <div class="photo-modal-content">\n            <div class="photo-categories">\n                <button class="photo-category" data-category="others">Others</button>\n                <button class="photo-category" data-category="firstLetters">First Letters</button>\n                <button class="photo-category" data-category="favorites">Favorites</button>\n                <button class="photo-category" data-category="all">All</button>\n            </div>\n            <div class="photo-grid"></div>\n            <div class="loading-overlay">\n                <svg class="photo-loading-spinner" width="24" height="24" viewBox="0 0 24 24">\n    <circle class="photo-spinner" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none"/>\n</svg>\n            </div>\n        </div>\n        <div class="photo-modal-footer">\n            <button class="confirm-photo-button" disabled>Confirm Selection</button>\n        </div>\n    ';const e=document.createElement("style");e.textContent="\n        .photo-modal-footer {\n            padding: 16px;\n            background: #f8f9fa;\n            border-top: 1px solid #dee2e6;\n            display: flex;\n            justify-content: flex-end;\n        }\n\n        .confirm-photo-button {\n            padding: 8px 16px;\n            background: #495057;\n            color: #fff;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n\n        .confirm-photo-button:hover:not(:disabled) {\n            background: #343a40;\n        }\n\n        .confirm-photo-button:disabled {\n            background: #adb5bd;\n            cursor: not-allowed;\n        }\n    ",document.head.appendChild(e);let t=null;const o=n.querySelector(".confirm-photo-button");function i(){o.disabled=!t}return n.querySelector(".photo-close-button").addEventListener("click",()=>{n.remove()}),o.addEventListener("click",()=>{t&&(A(t),n.remove())}),n.querySelectorAll(".photo-category").forEach(A=>{A.addEventListener("click",()=>{n.querySelectorAll(".photo-category").forEach(A=>A.classList.remove("active")),A.classList.add("active"),async function(A){const e=n.querySelector(".photo-grid"),o=n.querySelector(".loading-overlay");o.style.display="flex",e.innerHTML="";try{const{photos:o,lastPage:a}=await O(A);o.forEach(A=>{const o=document.createElement("div");o.className="photo-item",o.innerHTML=`\n                    <img src="${A.src}" alt="Photo ${A.id}">\n                    <div class="photo-id">ID: ${A.id}</div>\n                `,o.addEventListener("click",()=>{n.querySelectorAll(".photo-item").forEach(A=>A.classList.remove("selected")),o.classList.add("selected"),t=A.id,i()}),e.appendChild(o)});for(let o=2;o<=a;o++){const{photos:a}=await O(A,o);a.forEach(A=>{const o=document.createElement("div");o.className="photo-item",o.innerHTML=`\n                        <img src="${A.src}" alt="Photo ${A.id}">\n                        <div class="photo-id">ID: ${A.id}</div>\n                    `,o.addEventListener("click",()=>{n.querySelectorAll(".photo-item").forEach(A=>A.classList.remove("selected")),o.classList.add("selected"),t=A.id,i()}),e.appendChild(o)})}}catch(A){e.innerHTML='<div class="error">Error loading photos</div>'}finally{o.style.display="none"}}(A.dataset.category)})}),n.querySelector('.photo-category[data-category="others"]').click(),n}async function z(A,n){const e=`https://www.dream-singles.com/members/messaging/inbox?mode=${A}&page=${n}&returnJson=1${"sent"===A?"&view=read":""}`;try{for(;p&&Date.now()<p;)await new Promise(A=>setTimeout(A,1e3));const A=await fetch(e);if(429===A.status){const n=A.headers.get("Retry-After"),e=1e3*(n?parseInt(n):60);throw p=Date.now()+e,new Error("Rate limit reached")}if(!A.ok)throw new Error(`HTTP error! status: ${A.status}`);const n=await A.text();if("no data"===n.trim())return{endOfPages:!0,messages:[]};try{return JSON.parse(n)}catch(A){throw new Error("Invalid JSON response")}}catch(A){if("Rate limit reached"===A.message)throw A;throw A}}async function V(A,n){const e=A.querySelectorAll("select, textarea, input, button"),t=A.querySelector("#startButton"),o=A.querySelector("#stopButton"),i=A.querySelector('button[class="action-button"]'),a=A.querySelector(".remove-photo");A.querySelectorAll(".series-message-input, .series-delay, .series-photo-button, .series-remove-photo").forEach(A=>{A.disabled=n}),e.forEach(A=>{A.disabled=n}),t.disabled=n,o.disabled=!n,i&&(i.disabled=n),a&&(a.disabled=n)}function U(A){A=Math.max(0,A);const n=Math.floor(A/1e3%60),e=Math.floor(A/6e4%60);return`${Math.floor(A/36e5)}h ${e}m ${n}s`}W.textContent="\n.login-modal {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 320px;\n    background: #f8f9fa;\n    border-radius: 12px;\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n    z-index: 10000;\n    border: 1px solid #e9ecef;\n    overflow: hidden;\n    transition: opacity 0.2s, visibility 0.2s;\n}\n\n.login-modal.minimized {\n    opacity: 0;\n    visibility: hidden;\n    pointer-events: none;\n}\n\n.login-header {\n    padding: 16px 24px;\n    background: #495057;\n    color: #f8f9fa;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #343a40;\n}\n\n.login-header h2 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 500;\n    color: #f8f9fa;\n}\n\n.login-content {\n    padding: 24px;\n}\n\n.login-input {\n    width: 100%;\n    padding: 12px;\n    margin-bottom: 12px;\n    border: 1px solid #dee2e6;\n    border-radius: 6px;\n    font-size: 14px;\n}\n\n.login-button {\n    width: 100%;\n    padding: 12px;\n    background: #495057;\n    color: #ffffff;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.login-button:hover {\n    background: #343a40;\n}\n\n.login-button:disabled {\n    background: #adb5bd;\n    cursor: not-allowed;\n}\n\n.login-error {\n    color: #dc3545;\n    font-size: 14px;\n    margin-bottom: 12px;\n    display: none;\n    padding: 10px;\n    background-color: #f8d7da;\n    border: 1px solid #f5c6cb;\n    border-radius: 4px;\n}\n\n.minimize-button {\n    background: none;\n    border: none;\n    color: #f8f9fa;\n    cursor: pointer;\n    padding: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    transition: background-color 0.2s;\n}\n\n.minimize-button:hover {\n    background: rgba(255, 255, 255, 0.1);\n}\n\n.login-toggle-button {\n    position: fixed;\n    bottom: 15px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 48px;\n    height: 48px;\n    background: #495057;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 10000;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    transition: all 0.2s;\n}\n\n.login-toggle-button:hover {\n    background: #343a40;\n    transform: translateX(-50%) scale(1.05);\n}\n\n.login-toggle-button svg {\n    color: #ffffff;\n}\n\n",document.head.appendChild(W);let L={contacts:!1,favorites:!1,onlinePages:new Set,onlineFinished:!1},K={sent:0,failed:0,remaining:0,series:[{sent:0,failed:0},{sent:0,failed:0},{sent:0,failed:0},{sent:0,failed:0},{sent:0,failed:0}]},H=!1;const X={.06:{delay:4e3,parallel:!1},.12:{delay:3e3,parallel:!1},.25:{delay:2e3,parallel:!1},.5:{delay:1e3,parallel:!1},1:{delay:0,parallel:!1}};async function $(){if(!A||A.readyState!==WebSocket.OPEN)try{A=await sA()}catch(A){return new Set}return new Promise(n=>{const e=new Set;let t;const o=i=>{try{const a=JSON.parse(i.data);"favorites-response"===a.type&&(t&&clearTimeout(t),a.payload&&Array.isArray(a.payload)&&a.payload.forEach(A=>{A.profile_to&&e.add(Number(A.profile_to))}),A.removeEventListener("message",o),n(e))}catch(e){A.removeEventListener("message",o),n(new Set)}};t=setTimeout(()=>{A.removeEventListener("message",o),n(new Set)},1e4),A.addEventListener("message",o);try{A.send(JSON.stringify({type:"favorites-request"}))}catch(e){clearTimeout(t),A.removeEventListener("message",o),n(new Set)}})}let _={x:window.innerWidth/2-400,y:window.innerHeight/2-300};try{const A=localStorage.getItem("modalPosition");A&&(_=JSON.parse(A))}catch(A){}const AA=document.createElement("style");async function nA(){if(l)return l;try{const A=await fetch("https://www.dream-singles.com/members/"),n=await A.text(),e=(new DOMParser).parseFromString(n,"text/html").querySelector(".male-account-options li:first-child a");if(e){const A=e.textContent.trim().match(/^(.+)\s+ID:\s*(\d+)$/);if(A)return l=Number(A[2]),l}throw new Error("Could not find user ID")}catch(A){throw A}}async function eA(A){if(i.has(A))return i.get(A);try{const n=await fetch(`https://www.dream-singles.com/${A}.html`);if(429===n.status){const e=n.headers.get("Retry-After"),t=1e3*(e?parseInt(e):60);throw p=Date.now()+t,m.add(A),new Error("Rate limit reached")}if(!n.ok)return null;const e=await n.text(),t=(new DOMParser).parseFromString(e,"text/html").querySelector('a[href^="/members/messaging/compose/"]');if(t){const n=t.getAttribute("href").split("/").pop();return i.set(A,n),n}return null}catch(A){if("Rate limit reached"===A.message)throw A;return null}}AA.textContent='\n      .message-sender-modal {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 30vw;\n    height: 100vh;\n    min-width: 200px;\n    min-height: 920px;\n    max-width: 800px;\n    max-height: 1000px;\n    background: #f8f9fa;\n    border-radius: 12px;\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n    z-index: 10000;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    opacity: 1;\n    visibility: visible;\n    border: 1px solid #e9ecef;\n}\n\n\n@media screen and (max-width: 720px) {\n    .message-sender-modal {\n        width: 30vw;\n        height: 50vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 721px) {\n    .message-sender-modal {\n        width: 30vw;\n        height: 50vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 900px) {\n    .message-sender-modal {\n        width: 30vw;\n        height: 60vh;\n        min-width: 320px;\n        min-height: 300px;\n    }\n}\n@media screen and (min-width: 1000px) {\n    .message-sender-modal {\n        width: 30vw;\n        height: 75vh;\n    }\n}\n@media screen and (min-width: 1920px) {\n    .message-sender-modal {\n        width: 30vw;\n        height: 90vh;\n    }\n}\n.blacklist-section .blacklist-textarea {\n    background-color: rgba(255, 0, 0, 0.05);\n    width: 100%;\n    min-height: 20px;\n    padding: 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-family: inherit;\n    font-size: 14px;\n    line-height: 1.5;\n    resize: vertical;\n    transition: border-color 0.2s ease-in-out;\n    box-sizing: border-box;\n}\n\n.selected-ids-section .selected-ids-textarea {\n    background-color: rgba(0, 255, 0, 0.05);\n    width: 100%;\n    min-height: 20px;\n    padding: 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-family: inherit;\n    font-size: 14px;\n    line-height: 1.5;\n    resize: vertical;\n    transition: border-color 0.2s ease-in-out;\n    box-sizing: border-box;\n}\n.delay-start-section {\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border: 1px solid #dee2e6;\n}\n\n.delay-start-section {\n    margin-top: 10px;\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border: 1px solid #dee2e6;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.delay-start-section .checkbox-wrapper {\n    margin: 0;\n    padding: 0;\n    background: none;\n}\n\n.delay-start-section input[type="datetime-local"] {\n    width: 100%;\n    padding: 8px;\n    border: 1px solid #dee2e6;\n    border-radius: 4px;\n    font-size: 14px;\n    margin-top: 4px;\n}\n\n.blacklist-section .blacklist-textarea:focus,\n.selected-ids-section .selected-ids-textarea:focus {\n    outline: none;\n    border-color: #666;\n}\n\n.blacklist-section .blacklist-textarea::placeholder,\n.selected-ids-section .selected-ids-textarea::placeholder {\n    color: #999;\n}\n\n    .message-sender-modal.minimized {\n        transform: translate(-50%, -200%);\n        opacity: 0;\n        visibility: hidden;\n    }\n\n    .message-sender-header {\n        padding: 16px 24px;\n        background: #495057;\n        color: #f8f9fa;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        border-bottom: 1px solid #343a40;\n    }\n\n    .message-sender-header h2 {\n        margin: 0;\n        font-size: 18px;\n        font-weight: 500;\n        color: #f8f9fa;\n    }\n\n    .minimize-button {\n        background: none;\n        border: none;\n        color: #f8f9fa;\n        cursor: pointer;\n        padding: 8px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n    }\n\n    .minimize-button:hover {\n        background: rgba(255, 255, 255, 0.1);\n    }\n\n    .message-sender-content {\n        padding: 24px;\n        flex: 1;\n        overflow-y: auto;\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n        background: #ffffff;\n    }\n\n    .select-wrapper select,\n    .speed-controls select {\n        width: 100%;\n        padding: 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        font-size: 14px;\n        background: #ffffff;\n        color: #495057;\n        transition: all 0.2s;\n    }\n\n    .select-wrapper select:focus,\n    .speed-controls select:focus {\n        border-color: #495057;\n        outline: none;\n        box-shadow: 0 0 0 2px rgba(73, 80, 87, 0.2);\n    }\n\n    .select-wrapper select:disabled,\n    .speed-controls select:disabled {\n        background: #f8f9fa;\n        color: #adb5bd;\n        cursor: not-allowed;\n        border-color: #dee2e6;\n    }\n\n    .blacklist-section textarea,\n    .selected-ids-section textarea,\n    .message-input {\n        width: 100%;\n        padding: 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        font-size: 14px;\n        resize: vertical;\n        min-height: 100px;\n        background: #ffffff;\n        color: #495057;\n        transition: all 0.2s;\n        line-height: 1.5;\n    }\n\n    .message-input {\n        min-height: 50px;\n    }\n\n    textarea:focus {\n        border-color: #495057;\n        outline: none;\n        box-shadow: 0 0 0 2px rgba(73, 80, 87, 0.2);\n    }\n\n    textarea:disabled {\n        background: #f8f9fa;\n        color: #adb5bd;\n        cursor: not-allowed;\n        border-color: #dee2e6;\n    }\n\n    .stats-display {\n        padding: 16px;\n        background: #f1f3f5;\n        border-radius: 6px;\n        font-size: 14px;\n        color: #495057;\n        border: 1px solid #dee2e6;\n        line-height: 1.5;\n    }\n\n    .action-buttons {\n        display: flex;\n        gap: 12px;\n    }\n\n    .action-button {\n        padding: 12px 24px;\n        border: none;\n        border-radius: 6px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.2s;\n        flex: 1;\n    }\n.action-button#startButton {\n        background: #495057;\n        color: #ffffff;\n    }\n\n    .action-button#startButton:hover:not(:disabled) {\n        background: #343a40;\n    }\n\n    .action-button#stopButton {\n        background: #dc3545;\n        color: #ffffff;\n    }\n\n    .action-button#stopButton:hover:not(:disabled) {\n        background: #c82333;\n    }\n\n    .action-button:disabled {\n        background: #e9ecef;\n        color: #adb5bd;\n        cursor: not-allowed;\n        transform: none;\n    }\n\n    .message-sender-toggle {\n        position: fixed;\n        bottom: 15px;\n        right: 50%;\n        width: 48px;\n        height: 48px;\n        background: #495057;\n        border-radius: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        z-index: 10000;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        transition: all 0.2s;\n    }\n\n    .message-sender-toggle:hover {\n        background: #343a40;\n        transform: scale(1.05);\n    }\n\n    .message-sender-toggle svg {\n        color: #ffffff;\n    }\n.checkbox-wrapper {\n    display: flex;\n    align-items: center; /* Ð’Ñ‹Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€Ñƒ Ð¿Ð¾ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»Ð¸ */\n    gap: 8px;\n    margin-bottom: 8px; /* ÐžÑ‚ÑÑ‚ÑƒÐ¿ Ð¼ÐµÐ¶Ð´Ñƒ Ñ‡ÐµÐºÐ±Ð¾ÐºÑÐ°Ð¼Ð¸ */\n}\n\n.checkbox-wrapper input[type="checkbox"] {\n    width: 16px;\n    height: 16px;\n    margin: 0; /* Ð£Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ðµ Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ñ‹ */\n    flex-shrink: 0; /* ÐŸÑ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ ÑÐ¶Ð°Ñ‚Ð¸Ðµ Ñ‡ÐµÐºÐ±Ð¾ÐºÑÐ° */\n}\n\n.checkbox-wrapper label {\n    font-size: 14px;\n    color: #495057;\n    cursor: pointer;\n    margin: 0; /* Ð£Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ðµ Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ñ‹ */\n    line-height: 16px; /* Ð’Ñ‹ÑÐ¾Ñ‚Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ñ€Ð°Ð²Ð½Ð° Ð²Ñ‹ÑÐ¾Ñ‚Ðµ Ñ‡ÐµÐºÐ±Ð¾ÐºÑÐ° */\n}\n',document.head.appendChild(AA);let tA=new Set,oA=null;const iA=50;async function aA(A,n,o="",i="",a="",s=null,r=!1,c=0){H&&await new Promise(A=>{const n=setInterval(()=>{H||(clearInterval(n),A())},100)}),H=!0;try{if(t.has(A))return K.remaining--,!1;if(p){if(Date.now()<p)throw m.add(A),new Error("Rate limit pause active");p=null,m.clear()}if(oA){const A=Date.now()-oA;A<iA&&await new Promise(n=>setTimeout(n,iA-A))}const l=`${A}-${Date.now()}`;tA.add(l);try{oA=Date.now();const t=new FormData;t.append("messaging_compose[replyId]",o||""),t.append("messaging_compose[type]","plain_message"),t.append("messaging_compose[submit]",""),t.append("messaging_compose[plainMessage]",n),t.append("messaging_compose[htmlMessage]",""),t.append("messaging_compose[galleryId]",a),t.append("messaging_compose[selectedPhoto]",""),t.append("messaging_compose[saveIntro]",""),t.append("messaging_compose[videoReply]","1"),t.append("messaging_compose[intro]",""),t.append("messaging_compose[draftId]","");const l="inbox"===i?`https://www.dream-singles.com/members/messaging/compose/${A}?mode=inbox&page=1&view=all&replyId=${o}&date=`:`https://www.dream-singles.com/members/messaging/compose/${A}`,d=await fetch(l,{method:"POST",headers:{Accept:"text/html","Accept-Language":"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7",Referer:l},body:t,credentials:"include",redirect:"manual"});if(429===d.status){const n=d.headers.get("Retry-After"),e=1e3*(n?parseInt(n):60);throw p=Date.now()+e,m.add(A),new Error("Rate limit reached")}if("opaqueredirect"===d.type){K.sent++,r&&c>=0&&c<K.series.length?K.series[c].sent++:r||K.series[0].sent++,r&&0!==c||K.remaining--,m.delete(A),s&&(uA.add(s),r&&c>=0&&c<I.length?I[c].add(s):r||I[0].add(s),b.set(A,s));const t=document.querySelector(".message-sender-modal");if(t&&mA(t),w&&q[0].text.trim()===n.trim()&&!r&&q[1].text.trim()){const n=1e3*q[1].delay;M.set(A,{messageId:o,mode:i,regularId:s,nextIndex:1,timeoutId:setTimeout(()=>{e&&rA(A,o,i,s)},n)})}return!0}const u=await d.text(),g=(new DOMParser).parseFromString(u,"text/html").querySelectorAll(".alert-danger");if(g.length>0){const n=g[0].textContent.trim();throw s&&(n.includes("already sent this message")?Q.duplicate.add(s):n.includes("message is too short")?Q.tooShort.add(s):n.includes("This user is Invisible")?Q.invisible.add(s):n.includes("Access Denied")?Q.accessDenied.add(s):Q.other.add(s),pA.has(s)||(pA.add(s),b.set(A,s))),new Error(`Message sending failed: ${n}`)}const h=document.querySelector(".message-sender-modal");throw h&&mA(h),new Error("Message sending failed: unexpected response")}catch(n){if(n.message.includes("Rate limit reached"))throw n;if("Rate limit pause active"===n.message)throw n;{K.failed++;const e=document.querySelector(".message-sender-modal");throw e&&mA(e),r&&c>=0&&c<K.series.length?K.series[c].failed++:r||K.series[0].failed++,r&&0!==c||K.remaining--,s&&!pA.has(s)&&(pA.add(s),r&&c>=0&&c<S.length?S[c].add(s):r||S[0].add(s),b.set(A,s)),n}}finally{tA.delete(l)}}finally{H=!1}}async function sA(){return x&&x.readyState===WebSocket.OPEN?x:f||(f=new Promise((n,t)=>{if(x){try{x.close()}catch(A){}x=null}const o=new WebSocket("wss://ws.dream-singles.com/ws");let i=!1;o.addEventListener("open",async()=>{try{const e=await fetch("/members/jwtToken",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(!e.ok)throw new Error(`JWT token fetch failed: ${e.status}`);const a=await e.text(),s=e=>{try{const a=JSON.parse(e.data);"auth-response"!==a.type||i||(i=!0,o.removeEventListener("message",s),a.success?(x=o,A=o,f=null,n(o)):(f=null,t(new Error("Authentication failed"))))}catch(A){}};o.addEventListener("message",s),o.send(JSON.stringify({type:"auth",connection:"invite",subscribe_to:["auth-response","user-contacts-response","men-online-response","favorites-response"],payload:a}))}catch(A){f=null,o.close(),t(A)}}),o.addEventListener("error",A=>{f=null,x=null,t(A)}),o.addEventListener("close",()=>{f=null,x=null,e&&setTimeout(()=>{sA().then(A=>{a&&A.addEventListener("message",a)}).catch(A=>{})},5e3)})}),f)}async function rA(A,n,t,o){if(!e||!w)return!1;let i=M.get(A);if(i||(i={messageId:n,mode:t,regularId:o,nextIndex:1,timeoutId:null},M.set(A,i)),i.nextIndex>=q.length||!q[i.nextIndex].text.trim())return M.delete(A),!1;try{const n=i.nextIndex,t=q[n];await aA(A,t.text,i.messageId,i.mode,t.photoId,i.regularId,!0,n);const o=document.querySelector(".message-sender-modal");if(o&&mA(o),i.nextIndex++,i.nextIndex<q.length&&q[i.nextIndex].text.trim()){const n=1e3*q[i.nextIndex].delay;return i.timeoutId&&clearTimeout(i.timeoutId),i.timeoutId=setTimeout(()=>{e&&rA(A,i.messageId,i.mode,i.regularId)},n),!0}return M.delete(A),!1}catch(n){if("Rate limit reached"===n.message||"Rate limit pause active"===n.message){if(i.retryCount=(i.retryCount||0)+1,i.retryCount>3)return M.delete(A),!1;i.timeoutId&&clearTimeout(i.timeoutId);const n=(p?Math.max(0,p-Date.now()):6e4)+1e3;i.timeoutId=setTimeout(()=>{e&&rA(A,i.messageId,i.mode,i.regularId)},n);const t=document.querySelector(".message-sender-modal");t&&mA(t)}else{const n=document.querySelector(".message-sender-modal");n&&mA(n),M.delete(A)}}return!1}async function cA(){if(!await Y())return null;const n=document.createElement("div");n.className="message-sender-modal minimized";const i=document.createElement("button");i.className="action-button",i.textContent="Select Photo",i.style.marginBottom="5px";const r=document.createElement("div");r.className="selected-photo-display",r.style.display="none",r.innerHTML='<span>Selected Photo ID: <strong></strong></span> <button class="remove-photo">Ã—</button>',i.addEventListener("click",()=>{const A=j(A=>{n.dataset.selectedPhotoId=A,r.style.display="flex",r.querySelector("strong").textContent=A});document.body.appendChild(A)}),r.querySelector(".remove-photo").addEventListener("click",()=>{delete n.dataset.selectedPhotoId,r.style.display="none"});const l=document.createElement("style");l.textContent="\n    .selected-photo-display {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 8px 12px;\n            background: #e9ecef;\n            border-radius: 4px;\n            margin-bottom: 10px;\n        }\n\n        .remove-photo {\n            background: none;\n            border: none;\n            color: #495057;\n            cursor: pointer;\n            padding: 4px 8px;\n            font-size: 16px;\n        }\n\n        .remove-photo:hover {\n            color: #dc3545;\n        }\n    ",document.head.appendChild(l),n.innerHTML=`\n        <div class="message-sender-header">\n        <h2>Message Sender</h2>\n        <button class="minimize-button" title="Minimize">${N}</button>\n    </div>\n     <div class="message-sender-content">\n        <div class="select-wrapper">\n            <select id="targetGroup">\n                <option value="online">Online Users</option>\n                <option value="inbox">Inbox Messages</option>\n                <option value="read">Read Messages</option>\n                <option value="favorites">Favorites</option>\n                <option value="contacts">Contacts</option>\n                <option value="selectedIds">Selected IDs</option>\n\n            </select>\n            </div>\n            <div class="checkbox-wrapper" id="excludeFavoritesWrapper">\n                <input type="checkbox" id="excludeFavorites">\n                <label for="excludeFavorites">Exclude favorites from sending</label>\n            </div>\n            <div class="checkbox-wrapper" id="onlineOnlyWrapper">\n                <input type="checkbox" id="onlineOnly">\n                <label for="onlineOnly">Send to online users only</label>\n            </div>\n\n\n\n            <div class="blacklist-section">\n                <textarea class="blacklist-textarea" id="blacklistIds"\n                    placeholder="Enter IDs to blacklist (one per line)"></textarea>\n            </div>\n\n            <div class="selected-ids-section" style="display: none;">\n                <textarea class="selected-ids-textarea" id="selectedIds"\n                    placeholder="Enter IDs to message (one per line)"></textarea>\n            </div>\n\n            <div class="speed-controls">\n                <select id="sendingSpeed">\n                    ${Object.keys(X).sort((A,n)=>parseFloat(A)-parseFloat(n)).map(A=>`<option value="${A}">${A} msg/sec</option>`).join("")}\n                </select>\n            </div>\n            <div class="delay-start-section">\n    <div class="checkbox-wrapper">\n        <input type="checkbox" id="enableDelayedStart">\n        <label for="enableDelayedStart">Schedule start time</label>\n    </div>\n    <input type="datetime-local" id="scheduledStartTime" disabled>\n</div>\n\n            <textarea class="message-input" placeholder="Enter your message..."></textarea>\n\n            <div class="stats-display">\n                Sent: <span id="sentCount">0</span> |\n                Failed: <span id="failedCount">0</span> |\n                Remaining: <span id="remainingCount">0</span>\n            </div>\n\n            <div class="action-buttons">\n                <button class="action-button" id="startButton">Start</button>\n                <button class="action-button" id="stopButton" disabled>Stop</button>\n            </div>\n        </div>\n    `,n.querySelector(".message-input").insertAdjacentHTML("afterend",`\n        <div class="message-series-toggle">\n            <div class="checkbox-wrapper">\n                <input type="checkbox" id="enableMessageSeries">\n                <label for="enableMessageSeries">Enable Message Series (send up to 5 messages per user)</label>\n            </div>\n        </div>\n\n        <div class="message-series-container">\n            <div class="series-message" data-index="0">\n                <div class="series-message-header">\n                    <h4>First Message</h4>\n                </div>\n                <div class="series-photo-container">\n                    <button class="series-photo-button action-button" data-index="0">Select Photo</button>\n                    <div class="series-selected-photo" style="display: none;">\n                        <span>Selected Photo ID: <strong></strong></span>\n                        <button class="series-remove-photo">Ã—</button>\n                    </div>\n                </div>\n                <textarea class="series-message-input" placeholder="Enter your first message..."></textarea>\n            </div>\n\n            ${[1,2,3,4].map(A=>`\n                <div class="series-message" data-index="${A}">\n                    <div class="series-message-header">\n                        <h4>Message ${A+1}</h4>\n                        <div class="series-delay-container">\n                            <label>Delay:</label>\n                            <input type="number" class="series-delay" min="5" value="${q[A].delay}" data-index="${A}"> sec\n                        </div>\n                    </div>\n                    <div class="series-photo-container">\n                        <button class="series-photo-button action-button" data-index="${A}">Select Photo</button>\n                        <div class="series-selected-photo" style="display: none;">\n                            <span>Selected Photo ID: <strong></strong></span>\n                            <button class="series-remove-photo">Ã—</button>\n                        </div>\n                    </div>\n                    <textarea class="series-message-input" placeholder="Enter message ${A+1}..."></textarea>\n                </div>\n            `).join("")}\n        </div>\n    `);const d=n.querySelector("#enableMessageSeries"),f=n.querySelector(".message-series-container"),x=n.querySelector(".message-input"),v=i,k=r;d.addEventListener("change",()=>{if(w=d.checked,f.classList.toggle("active",w),x.style.display=w?"none":"block",v.style.display=w?"none":"block",k.style.display=w?"none":n.dataset.selectedPhotoId?"flex":"none",w){const A=n.querySelector('.series-message[data-index="0"] .series-message-input');A&&!A.value.trim()&&x.value.trim()&&(A.value=x.value,q[0].text=x.value)}}),n.querySelectorAll(".series-photo-button").forEach(A=>{const n=parseInt(A.dataset.index),e=A.closest(".series-photo-container"),t=e.querySelector(".series-selected-photo");A.addEventListener("click",()=>{const A=j(A=>{q[n].photoId=A,t.style.display="flex",t.querySelector("strong").textContent=A});document.body.appendChild(A)});const o=e.querySelector(".series-remove-photo");o&&o.addEventListener("click",()=>{q[n].photoId="",t.style.display="none"})}),n.querySelectorAll(".series-message-input").forEach(A=>{const n=parseInt(A.closest(".series-message").dataset.index);A.addEventListener("input",()=>{q[n].text=A.value})}),n.querySelectorAll(".series-delay").forEach(A=>{const n=parseInt(A.dataset.index);A.addEventListener("input",()=>{q[n].delay=parseInt(A.value)||30})});const D=document.createElement("div");D.className="message-sender-toggle",D.innerHTML=F,D.style.display="flex";const T=n.querySelector(".message-input");return T.parentNode.insertBefore(i,T),T.parentNode.insertBefore(r,T),document.body.appendChild(n),document.body.appendChild(D),document.head.appendChild(AA),D.addEventListener("click",()=>dA(n,D)),n.querySelector(".minimize-button").addEventListener("click",()=>dA(n,D)),function(n){const i=n.querySelector("#targetGroup"),r=n.querySelector(".selected-ids-section"),l=n.querySelector("#excludeFavoritesWrapper"),d=n.querySelector("#onlineOnlyWrapper"),f=n.querySelector("#blacklistIds"),x=n.querySelector("#startButton"),v=n.querySelector("#stopButton"),k=n.querySelector(".message-input"),D=document.createElement("div");D.className="checkbox-wrapper",D.id="enableCyclingWrapper",D.style.display="none",D.innerHTML='\n        <input type="checkbox" id="enableCycling">\n        <label for="enableCycling">Enable cycling</label>\n    ',d.parentNode.insertBefore(D,d.nextSibling),d.style.display="none",D.style.display="none",i.addEventListener("change",A=>{r.style.display="selectedIds"===A.target.value?"block":"none",l.style.display="favorites"===A.target.value?"none":"block",d.style.display="inbox"===A.target.value||"read"===A.target.value?"block":"none",D.style.display="inbox"===A.target.value||"read"===A.target.value?"block":"none"}),f.addEventListener("input",J),x.addEventListener("click",async()=>{const i=n.querySelector("#enableMessageSeries");if(i&&i.checked){const A=n.querySelector('.series-message[data-index="0"] .series-message-input');if(!A||!A.value.trim())return void alert("Please enter at least the first message in the series")}else if(!k.value.trim())return void alert("Please enter a message");await async function(n){if(!e){V(n,!0);try{if(!A||A.readyState!==WebSocket.OPEN)try{A=await sA()}catch(A){return alert("Failed to connect to website WebSocket. Please check your connection and try again."),void V(n,!1)}const i=n.querySelector("#enableDelayedStart"),r=n.querySelector("#scheduledStartTime");if(i.checked){const A=new Date(r.value).getTime(),t=Date.now();if(A<=t)return alert("Please select a future time for scheduled start"),void V(n,!1);e=!0;const o=A-t;let i=null;try{await new Promise((t,a)=>{const s=n.querySelector(".stats-display");i=setInterval(()=>{if(!e)return clearInterval(i),void a(new Error("Cancelled"));const n=Math.max(0,A-Date.now());n>0?s.textContent=`Starting in: ${U(n)}`:(clearInterval(i),t())},1e3),setTimeout(t,o)})}catch(A){if("Cancelled"===A.message)return V(n,!1),void(e=!1);throw A}}V(n,!0),u=Date.now(),h=Date.now(),g=0,m.clear(),p=null,s.forEach(n=>{A&&A.removeEventListener("message",n)}),s.clear(),e=!0,c=1;const l=n.querySelector("#startButton"),d=n.querySelector("#stopButton"),f=n.querySelector(".message-input"),x=n.querySelector("#targetGroup").value,v=n.querySelector("#sendingSpeed").value,k=n.querySelector("#excludeFavorites").checked,D=n.querySelector("#enableMessageSeries"),T=D&&D.checked;let R="",E="";if(T){const A=n.querySelector('.series-message[data-index="0"] .series-message-input');if(!A||!A.value.trim())return alert("Please enter at least the first message in the series"),void V(n,!1);R=A.value.trim();const e=n.querySelector('.series-message[data-index="0"] .series-selected-photo strong');E=e&&e.textContent?e.textContent:q[0].photoId||"",q[0].text=R}else{if(!f.value.trim())return alert("Please enter a message"),void V(n,!1);R=f.value,E=n.dataset.selectedPhotoId||""}l.disabled=!0,d.disabled=!1,Q.duplicate.clear(),Q.tooShort.clear(),Q.invisible.clear(),Q.inactive.clear(),Q.accessDenied.clear(),Q.other.clear(),uA.clear(),pA.clear(),K.sent=0,K.failed=0,K.remaining=0;for(let A=0;A<I.length;A++)I[A].clear(),S[A].clear();for(let A=0;A<K.series.length;A++)K.series[A].sent=0,K.series[A].failed=0;mA(n);try{"online"===x?await async function(n,i,r,l=""){b.clear(),o.clear(),L.onlinePages.clear(),L.onlineFinished=!1,a=null;let d=new Set;c=1;const u=n.querySelector("#excludeFavorites").checked?await $():new Set,m=X[r];let g=!1,h=!1,f=null,x=null;async function w(A){x&&a&&(x.removeEventListener("message",a),a=null),x=A,a=v,A.addEventListener("message",v)}async function y(){if(e&&!h){await new Promise(A=>setTimeout(A,1e3));try{const A=await sA();A!==x&&await w(A),h=!0,mA(n),A.send(JSON.stringify({type:"men-online",sort:"login",page:c})),f&&clearTimeout(f),f=setTimeout(()=>{e&&!g&&h&&(h=!1,y())},5e3)}catch(A){h=!1,setTimeout(y,5e3)}}}A&&(s.forEach(n=>{A.removeEventListener("message",n)}),s.clear());const v=async A=>{if(e&&!g)try{const o=JSON.parse(A.data);if("men-online-response"===o.type){if(f&&(clearTimeout(f),f=null),h=!1,!o.payload||!Array.isArray(o.payload))return c++,void y();if(0===o.payload.length)return c=1,void y();g=!0;const A=o.payload.filter(A=>{const n=A.member_id,e=Number(A.id);return!(d.has(n)||t.has(e)||u.has(e)||(d.add(n),0))}).map(A=>({memberId:A.member_id,regularId:Number(A.id)}));A.length>0?(K.remaining+=A.length,mA(n),await async function(A){for(const t of A){if(!e)break;for(;p&&Date.now()<p&&e;){await new Promise(A=>setTimeout(A,1e3)),mA(n);continue}try{await aA(t.memberId,i,"","",l,t.regularId),m.delay>0&&await new Promise(A=>setTimeout(A,m.delay))}catch(A){if("Rate limit reached"===A.message){mA(n);continue}continue}mA(n)}return!0}(A),e&&(c++,y())):(c++,y()),g=!1}}catch(A){g=!1,y()}};try{const A=await sA();await w(A),y(),s.add(v)}catch(A){throw A}}(n,R,v,E):"contacts"===x?await async function(n,o,i,a,r){return new Promise((c,l)=>{const d=async s=>{try{const l=JSON.parse(s.data);if("user-contacts-response"===l.type){if(!l.payload)return A.removeEventListener("message",d),void c();const s=r?await $():new Set,u=Object.values(l.payload).filter(A=>{const n=Number(A.id);return!t.has(n)&&!s.has(n)}).map(A=>({memberId:A.member_id,regularId:Number(A.id)}));K.remaining=u.length,mA(n);let m=0;const g=async t=>{if(t>=u.length||!e)return A.removeEventListener("message",d),e&&m>=u.length&&0===M.size?await gA(n):e&&m>=u.length&&setTimeout(()=>{e&&0===M.size&&gA(n)},1e4),void c();const s=u[t];for(;p&&Date.now()<p;){if(!e)return void c();await new Promise(A=>setTimeout(A,1e3)),mA(n)}try{await aA(s.memberId,o,"","",a,s.regularId),m++,mA(n);const A=X[i];setTimeout(()=>{g(t+1)},A.delay||100)}catch(A){"Rate limit reached"===A.message?setTimeout(()=>{g(t)},2e3):(m++,setTimeout(()=>{g(t+1)},100))}};g(0)}}catch(n){A.removeEventListener("message",d),l(n)}};A.addEventListener("message",d),s.add(d),A.send(JSON.stringify({type:"user-contacts-request",other_id:""}))})}(n,R,v,E,k):"favorites"===x?await async function(n,o,i,a){return new Promise((r,c)=>{const l=async s=>{try{const c=JSON.parse(s.data);if("favorites-response"===c.type){if(!c.payload)return A.removeEventListener("message",l),void r();const s=c.payload.filter(A=>!t.has(Number(A.profile_to))).map(A=>({regularId:Number(A.profile_to),memberId:null}));K.remaining=s.length,mA(n);let d=0;const u=async t=>{if(t>=s.length||!e)return A.removeEventListener("message",l),e&&d>=s.length&&0===M.size?await gA(n):e&&d>=s.length&&setTimeout(()=>{e&&0===M.size&&gA(n)},1e4),void r();const c=s[t];for(;p&&Date.now()<p;){if(!e)return void r();await new Promise(A=>setTimeout(A,1e3)),mA(n)}try{const A=await eA(c.regularId);if(!A)return d++,void setTimeout(()=>{u(t+1)},100);await aA(A,o,"","",a,c.regularId),d++,mA(n);const e=X[i];setTimeout(()=>{u(t+1)},e.delay||100)}catch(A){"Rate limit reached"===A.message?setTimeout(()=>{u(t)},2e3):(d++,setTimeout(()=>{u(t+1)},100))}};u(0)}}catch(n){A.removeEventListener("message",l),c(n)}};A.addEventListener("message",l),s.add(l),A.send(JSON.stringify({type:"favorites-request"}))})}(n,R,v,E):"selectedIds"===x?await async function(A,n,o,i,a){try{const s=A.querySelector("#selectedIds"),r=a?await $():new Set,c=s.value.split("\n").map(A=>A.trim()).filter(A=>A&&!isNaN(A)).map(A=>({regularId:Number(A),memberId:null})).filter(A=>!t.has(A.regularId)&&!r.has(A.regularId));K.remaining=c.length,mA(A);let l=0;const d=async t=>{if(t>=c.length||!e)return void(e&&l>=c.length&&0===M.size?await gA(A):e&&l>=c.length&&setTimeout(()=>{e&&0===M.size&&gA(A)},1e4));const a=c[t];for(;p&&Date.now()<p;){if(!e)return;await new Promise(A=>setTimeout(A,1e3)),mA(A)}try{const e=await eA(a.regularId);if(!e)return l++,void setTimeout(()=>{d(t+1)},100);await aA(e,n,"","",i,a.regularId),l++,mA(A);const s=X[o];setTimeout(()=>{d(t+1)},s.delay||100)}catch(A){"Rate limit reached"===A.message?setTimeout(()=>{d(t)},2e3):(l++,setTimeout(()=>{d(t+1)},100))}};d(0)}catch(A){throw A}}(n,R,v,E,k):"inbox"!==x&&"read"!==x||await async function(A,n,o,i){if(!A)return;const a=A.querySelector("#excludeFavorites").checked,s=A.querySelector("#onlineOnly").checked,r=A.querySelector("#enableCycling").checked,l=a?await $():new Set,d=w?q[0].photoId||"":A.dataset.selectedPhotoId||"";y=0,c=1;let u=new Set,m=!1;await async function(){for(;e;)try{for(;p&&Date.now()<p;){if(!e)return;await new Promise(A=>setTimeout(A,1e3)),mA(A)}let a;try{a=await z("read"===i?"sent":"inbox",c)}catch(n){if("Rate limit reached"===n.message){mA(A);continue}throw n}if(mA(A),a.endOfPages)m=!0;else{if(!a.messages||!Array.isArray(a.messages)){mA(A),c++,await new Promise(A=>setTimeout(A,1e3));continue}a.currentPage&&a.lastPage&&a.currentPage===a.lastPage&&(m=!0)}if(m){if(r&&e){y++,c=1,u.clear(),m=!1,await new Promise(A=>setTimeout(A,3e3)),mA(A);continue}if(e){if(M.size>0){const n=setInterval(()=>{0!==M.size&&e||(clearInterval(n),e&&gA(A))},5e3);return void setTimeout(()=>{n&&(clearInterval(n),e&&gA(A))},6e4)}return void await gA(A)}return}if("inbox"===i){const r=a.messages.filter(A=>{const n=Number(A.sender_pid),e=t.has(n),o=l.has(n),i=!s||A.online,a=A.link_read.split("/").pop().split("?")[0].split("-")[0];return!(u.has(a)||!i||e||o||(u.add(a),0))});r.length>0&&(K.remaining+=r.length,mA(A));for(const t of r){if(!e)break;for(;p&&Date.now()<p&&e;){await new Promise(A=>setTimeout(A,1e3)),mA(A);continue}try{const e=t.link_read.split("/").pop().split("?")[0],a=e.split("-")[0],s=Number(t.sender_pid);await aA(a,n,e,i,d,s),mA(A);const r=X[o];await new Promise(A=>setTimeout(A,r.delay))}catch(n){if("Rate limit reached"===n.message)continue;mA(A);continue}}}else{const r=a.messages.filter(A=>{const n=Number(A.sender_pid),e=t.has(n),o=l.has(n),i=!s||A.online,a=A.link_read.split("/").pop().split("?")[0].split("-")[1];return!(u.has(a)||!i||e||o||(u.add(a),0))});r.length>0&&(K.remaining+=r.length,mA(A));for(const t of r){if(!e)break;for(;p&&Date.now()<p&&e;){await new Promise(A=>setTimeout(A,1e3)),mA(A);continue}try{const e=t.link_read.split("/").pop().split("?")[0].split("-")[1],a=(await nA(),""),s=Number(t.sender_pid);await aA(e,n,a,i,d,s),mA(A);const r=X[o];await new Promise(A=>setTimeout(A,r.delay))}catch(n){if("Rate limit reached"===n.message)continue;mA(A);continue}}}if(e&&!m){c++,await new Promise(A=>setTimeout(A,1e3)),mA(A);continue}break}catch(n){if(n.message.includes("SyntaxError")||n.message.includes("Unexpected token")){if(m=!0,r&&e){y++,c=1,u.clear(),m=!1,await new Promise(A=>setTimeout(A,3e3)),mA(A);continue}if(e){if(M.size>0){const n=setInterval(()=>{0!==M.size&&e||(clearInterval(n),e&&gA(A))},5e3);return void setTimeout(()=>{n&&(clearInterval(n),e&&gA(A))},6e4)}await gA(A)}return}if("Rate limit reached"===n.message){mA(A);continue}e&&await gA(A);break}}()}(n,R,v,x)}catch(A){gA(n),alert(`Error occurred while processing ${x}. Check console for details.`)}const G=()=>{gA(n),d.removeEventListener("click",G)};d.addEventListener("click",G)}catch(A){gA(n),alert("Error occurred while sending messages. Check console for details.")}}}(n)}),v.addEventListener("click",()=>gA(n));const T=n.querySelector("#enableDelayedStart"),R=n.querySelector("#scheduledStartTime"),E=new Date;E.setMinutes(E.getMinutes()+1),E.setSeconds(0),E.setMilliseconds(0);const G=E.toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(" ","T");R.min=G,T.addEventListener("change",()=>{R.disabled=!T.checked,T.checked&&(R.value=G)}),J()}(n),n}function lA(A,n){const e=`\n        <div class="id-list-modal">\n            <div class="id-list-modal-header">\n                <h3 id="h3-list">${A}</h3>\n                <div>\n                    <button class="copy-ids-button">Copy IDs</button>\n                    <button class="id-list-close-button">Ã—</button>\n                </div>\n            </div>\n            <div class="id-list-modal-content">\n                <div class="id-list">${Array.from(n).map(A=>`<div>\n            ${A} - <a href="https://www.dream-singles.com/${A}.html" target="_blank">profile</a>\n        </div>`).join("\n")}</div>\n            </div>\n        </div>\n    `,t=document.createElement("div");t.innerHTML=e;const o=t.firstElementChild,i=document.createElement("style");i.textContent="\n        .id-list-modal {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 400px;\n        background: #fff;\n        border-radius: 12px;\n        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);\n        z-index: 10002;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n    }\n\n    .id-list-modal-header {\n        padding: 16px;\n        background: #495057;\n        color: #000000;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n        .id-list-modal-content {\n            padding: 0px 10px;\n            max-height: 400px;\n            overflow-y: auto;\n        }\n\n        .id-list > div {\n            margin: 5px 0;\n        }\n    ",document.head.appendChild(i),o.querySelector(".copy-ids-button").addEventListener("click",()=>{const A=Array.from(n).join("\n");navigator.clipboard.writeText(A)}),o.querySelector(".id-list-close-button").addEventListener("click",()=>{o.remove(),i.remove()}),document.body.appendChild(o)}function dA(A,e){n=!n,A.classList.toggle("minimized",n),e.style.display=n?"flex":"none"}let uA=new Set,pA=new Set;function mA(A){if(!A)return;if(!A.querySelector(".stats-display"))return;const n=A.querySelector("#targetGroup");if(!n)return;const t=n.value,o=Math.max(0,K.remaining),i=A.querySelector("#enableCycling"),a=i&&i.checked,s="inbox"!==t&&"read"!==t||!a?null:y;!function(A,n,t,o,i,a,s=null){const r=A.querySelector(".stats-display");r.innerHTML="";const l=document.createElement("div"),d=document.createElement("div"),f=document.createElement("span");f.textContent="Sent: ";const b=document.createElement("span");b.textContent=n,b.className="stats-clickable",b.addEventListener("click",()=>{uA.size>0&&lA("Sent IDs",uA)}),f.appendChild(b);const x=document.createElement("span");x.textContent=" | Failed: ";const y=document.createElement("span");y.textContent=t,y.className="stats-clickable",y.addEventListener("click",()=>{pA.size>0&&lA("Failed IDs",pA)}),x.appendChild(y);const v=document.createElement("span");if(v.textContent=` | Remaining: ${o}`,d.appendChild(f),d.appendChild(x),d.appendChild(v),r.appendChild(d),w){const A=document.createElement("div");A.style.marginTop="10px";const n=document.createElement("table");n.style.width="100%",n.style.borderCollapse="collapse";let e='\n            <tr>\n                <th align="left">Message</th>\n                <th align="left">Sent</th>\n                <th align="left">Failed</th>\n            </tr>\n        ';for(let A=0;A<K.series.length;A++)(0===A||q[A].text.trim())&&(e+=`<tr>\n                    <td>Message ${A+1}</td>\n                    <td><span class="series-sent-count" data-index="${A}">${K.series[A].sent}</span></td>\n                    <td><span class="series-failed-count" data-index="${A}">${K.series[A].failed}</span></td>\n                </tr>`);n.innerHTML=e,A.appendChild(n),r.appendChild(A),n.querySelectorAll(".series-sent-count").forEach(A=>{const n=parseInt(A.dataset.index);I[n]&&I[n].size>0?(A.className="stats-clickable",A.addEventListener("click",()=>{lA(`Message ${n+1} Sent IDs`,I[n])})):A.className="stats-non-clickable"}),n.querySelectorAll(".series-failed-count").forEach(A=>{const n=parseInt(A.dataset.index);S[n]&&S[n].size>0?(A.className="stats-clickable",A.addEventListener("click",()=>{lA(`Message ${n+1} Failed IDs`,S[n])})):A.className="stats-non-clickable"})}if(null!==s){const A=document.createElement("div");A.textContent=`Cycle: ${s}`,A.style.marginTop="5px",l.appendChild(A)}if(("online"===i||"inbox"===i||"read"===i)&&e){const A=document.createElement("div");A.textContent=`Current Page: ${c}`,l.appendChild(A)}if(u){const A=document.createElement("div"),n=g+(h?Date.now()-h:0);A.textContent=`Active Time: ${U(n)}`,l.appendChild(A)}if(m.size>0){const A=document.createElement("div");A.textContent=`Rate Limited: ${m.size}`,l.appendChild(A)}if(p){const A=p-Date.now();if(A>0){const n=document.createElement("div");n.textContent=`Resuming in: ${U(A)}`,l.appendChild(n)}}if(r.appendChild(l),Q.duplicate.size>0||Q.tooShort.size>0||Q.invisible.size>0||Q.inactive.size>0||Q.other.size>0||Q.accessDenied.size>0){const A=document.createElement("div");A.style.marginTop="8px",A.style.fontSize="12px",A.style.color="#666";const n=[];Q.duplicate.size>0&&n.push(`Duplicates: ${Q.duplicate.size}`),Q.tooShort.size>0&&n.push(`Too Short: ${Q.tooShort.size}`),Q.invisible.size>0&&n.push(`Invisible: ${Q.invisible.size}`),Q.inactive.size>0&&n.push(`Inactive: ${Q.inactive.size}`),Q.accessDenied.size>0&&n.push(`Access Denied: ${Q.accessDenied.size}`),Q.other.size>0&&n.push(`Other: ${Q.other.size}`),A.textContent="Errors: "+n.join(" | "),r.appendChild(A)}}(A,K.sent,K.failed,o,t,0,s)}async function gA(n){if(e){for(e=!1;tA.size>0;)await new Promise(A=>setTimeout(A,1e3));h&&(g+=Date.now()-h,h=null),s.forEach(n=>{A&&A.removeEventListener("message",n)}),s.clear(),d&&(clearInterval(d),d=null),r&&(clearTimeout(r),r=null),M.forEach(A=>{A.timeoutId&&clearTimeout(A.timeoutId)}),M.clear(),o.clear(),L.onlinePages.clear(),L.onlineFinished=!1,a=null,c=1,K.remaining=0,mA(n),V(n,!0),await new Promise(A=>setTimeout(A,2e3)),V(n,!1),T.play().catch(A=>{})}}function hA(){try{GM_deleteValue("userscript_email"),GM_deleteValue("userscript_password")}catch(A){}}async function fA(){try{if(!await Y())return void((await sdfg.getUser()).enhancedMode&&document.addEventListener("keypress",Z));await async function(){const{email:A,password:n}=function(){try{return{email:GM_getValue("userscript_email",null),password:GM_getValue("userscript_password",null)}}catch(A){return{email:null,password:null}}}();if(!A||!n)return!1;try{return!0===await k(A,n)||(hA(),!1)}catch(A){return hA(),!1}}()?cA():C()}catch(A){C()}}"complete"===document.readyState?fA():window.addEventListener("load",fA)}();