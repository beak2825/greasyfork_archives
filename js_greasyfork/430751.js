// ==UserScript==
// @name         Client Info Quick Copy
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Adds several buttons to quickly copy customer info
// @author       Tyler
// @match        https://my.serviceautopilot.com/ClientView.aspx?*
// @require http://code.jquery.com/jquery-latest.js
// @require https://cdnjs.cloudflare.com/ajax/libs/arrive/2.4.1/arrive.min.js
// @downloadURL https://update.greasyfork.org/scripts/430751/Client%20Info%20Quick%20Copy.user.js
// @updateURL https://update.greasyfork.org/scripts/430751/Client%20Info%20Quick%20Copy.meta.js
// ==/UserScript==
!function(){var t=window.jQuery;"use strict";var n=[];t("#panelContact").parent().append("<div class='col-10 form-layout-right'><button style='background-color: white;' type='button' id='btnCopyAddr'>Copy Info</button></div>"),t("#btnCopyAddr").parent().append("<button style='background-color: white;' type='button' id='btnCopyAll'>Copy All</button>"),t("#lblContact").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPhone1").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPhone2").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPhone3").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPhone4").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#contactEmailLink").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPropertyAddress").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t("#lblPropertyCityStateZip").after("<img class='pointer btnCopyInfo' src='https://static.thenounproject.com/png/593174-200.png' style='height: 14px;' />"),t(".btnCopyInfo").click(function(){console.log(this),navigator.clipboard.writeText(t(this).parent().text().trim())}),t("#btnCopyAddr").click(function(){navigator.clipboard.writeText(t("#lblContact").text()+" @ "+t("#lblPropertyAddress").text()+" "+t("#lblPropertyCityStateZip").text())}),t("#btnCopyAll").click(function(){(n=[]).push(t("#lblContact").text(),"\n",t("#lblPropertyAddress").text(),"\n",t("#lblPropertyCityStateZip").text(),"\n",t("#lblPhone1").text(),"\n",t("#lblPhone2").text(),"\n",t("#lblPhone3").text(),"\n",t("#lblPhone4").text(),"\n",t("#contactEmailLink").text(),"\n"),navigator.clipboard.writeText(n.join(""))}),t(document).arrive("#ticketTypeCall",function(){t("#btnCopyEstimateInfo").length||(t("[data-bind|='value: Subject']").parent().append("<button type='button' id='btnCopyEstimateInfo'>Copy Estimate Info</button>"),t("#btnCopyEstimateInfo").parent().append("<button type='button' id='btnCopyEstimateAddr'>Copy Address</button>"),t("#btnCopyEstimateAddr").click(function(){navigator.clipboard.writeText(t("#PageContent_lblPropertyAddress").text())}),t("#btnCopyEstimateInfo").click(function(){(n=[]).push(String(new Date().getMonth()+1).padStart(2,"0")+"/"+String(new Date().getDate()).padStart(2,"0")+"/"+new Date().getFullYear()," ",t("#lblContact").text(),", ",t("#lblPhone1").text()," ",t("#lblPhone2").text()," ",t("#lblPhone3").text()," ",t("#lblPhone4").text()," ",t("#contactEmailLink").text()," ",t("#lblSource").text()," - ",t("#lblResourceName").text()),navigator.clipboard.writeText(n.join(""))}))})}();