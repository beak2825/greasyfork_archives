// ==UserScript==
// @name         Bb9AvoidMFA
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  use at your own risk
// @author       nocite
// @match        https://bb9.vle.hiroshima-u.ac.jp/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=hiroshima-u.ac.jp
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/447167/Bb9AvoidMFA.user.js
// @updateURL https://update.greasyfork.org/scripts/447167/Bb9AvoidMFA.meta.js
// ==/UserScript==

(function() {
    'use strict';

    // Your code here...
    if(document.querySelector("body").className !== "login-page") return;
    const loginForm = `<div id=loginBox><noscript><div class="alert alert-box bad editmode receipt">Blackboardアプリケーションが機能するには、ブラウザでJavaScriptを有効にしてください。</div></noscript><form action=/webapps/login/ method=POST name=login onsubmit="return validate_form(this,!1,!0)"><script>function login_openForgotPassword(e){window.open(e,"forgotPasswordWindow","menubar=1,resizable=1,scrollbars=1,status=1,width=850,height=480").focus()}FastInit.addOnLoad(function(){"undefined"!=typeof ClientCache&&ClientCache.clear();var e=getCookie("JSESSIONID"),l=getCookie("guest.session.locale");deleteCookie("JSESSIONID","/@@",null,!0),deleteCookie("JSESSIONID","/courses",null,!0),deleteCookie("JSESSIONID","/sessions",null,!0),deleteCookie("JSESSIONID","/systemdata",null,!0),deleteCookie("JSESSIONID","/images",null,!0),deleteCookie("JSESSIONID","/reportbranding",null,!0),deleteCookie("JSESSIONID","/reports",null,!0),deleteCookie("JSESSIONID","/modules",null,!0),deleteCookie("JSESSIONID","/branding",null,!0),deleteCookie("JSESSIONID","/sponsors",null,!0),deleteCookie("JSESSIONID","/course_image_main_images",null,!0),deleteCookie("JSESSIONID","/course_image_2_images",null,!0),deleteCookie("JSESSIONID","/course_image_nav_images",null,!0),deleteCookie("JSESSIONID","/org_image_main_images",null,!0),deleteCookie("JSESSIONID","/org_image_2_images",null,!0),deleteCookie("JSESSIONID","/org_image_nav_images",null,!0),deleteCookie("JSESSIONID","/avatar",null,!0),deleteCookie("JSESSIONID","/deployment",null,!0),deleteCookie("JSESSIONID","/content_area",null,!0),deleteCookie("JSESSIONID","/portfolio",null,!0),deleteCookie("JSESSIONID","/evidence_area",null,!0),deleteCookie("JSESSIONID","/public",null,!0),deleteCookie("JSESSIONID","/webapps/axis",null,!0),deleteCookie("JSESSIONID","/webapps/chalkbox",null,!0),deleteCookie("JSESSIONID","",null,!0),deleteCookie("JSESSIONID","/webapps/login",null,!0),deleteCookie("JSESSIONID","/webapps/soap",null,!0),deleteCookie("JSESSIONID","/webapps/taglibs",null,!0),deleteCookie("JSESSIONID","/webapps/ws",null,!0),deleteCookie("JSESSIONID","/webapps/wysiwyg",null,!0),deleteCookie("JSESSIONID","/xythosremoteadmin",null,!0),deleteCookie("JSESSIONID","/bbcswebdav",null,!0),deleteCookie("JSESSIONID","/webapps/cmsmain",null,!0),deleteCookie("JSESSIONID","/webapps/xythoswfs",null,!0),deleteCookie("JSESSIONID","/admin",null,!0),deleteCookie("JSESSIONID","/colorpalettes",null,!0),deleteCookie("JSESSIONID","/coursethemes",null,!0),deleteCookie("JSESSIONID","/common",null,!0),deleteCookie("JSESSIONID","/fonts",null,!0),deleteCookie("JSESSIONID","/javascript",null,!0),deleteCookie("JSESSIONID","/lib",null,!0),deleteCookie("JSESSIONID","/login",null,!0),deleteCookie("JSESSIONID","/themes",null,!0),deleteCookie("JSESSIONID","/ui",null,!0),deleteCookie("JSESSIONID","/ui-ultra",null,!0),deleteCookie("JSESSIONID","/learn/api",null,!0),deleteCookie("JSESSIONID","/webapps/dataIntegration",null,!0),deleteCookie("JSESSIONID","/webapps/goal",null,!0),deleteCookie("JSESSIONID","/webapps/rubric",null,!0),deleteCookie("JSESSIONID","/webapps/bb-content-model-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/gradebook",null,!0),deleteCookie("JSESSIONID","/webapps/bb-gate-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/assessment",null,!0),deleteCookie("JSESSIONID","/webapps/bb-social-learning-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/submission-services",null,!0),deleteCookie("JSESSIONID","/webapps/bb-common-styles-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-xss-filter-whitelist-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-xss-filter-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/vtbe-tinymce",null,!0),deleteCookie("JSESSIONID","/webapps/bbcms",null,!0),deleteCookie("JSESSIONID","/webapps/software-updates",null,!0),deleteCookie("JSESSIONID","/webapps/streamViewer",null,!0),deleteCookie("JSESSIONID","/webapps/bb-operational-data-store-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/inline-grading",null,!0),deleteCookie("JSESSIONID","/webapps/spreview",null,!0),deleteCookie("JSESSIONID","/webapps/bb-xss-input-validation-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/portfolio",null,!0),deleteCookie("JSESSIONID","/webapps/partner-cloud",null,!0),deleteCookie("JSESSIONID","/webapps/caliper",null,!0),deleteCookie("JSESSIONID","/webapps/discussionboard",null,!0),deleteCookie("JSESSIONID","/webapps/Bb-wiki-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-selfpeer-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/taskprogress",null,!0),deleteCookie("JSESSIONID","/webapps/assignment",null,!0),deleteCookie("JSESSIONID","/webapps/cloud-profiles",null,!0),deleteCookie("JSESSIONID","/webapps/visualization",null,!0),deleteCookie("JSESSIONID","/webapps/bb-mygrades-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-group-mgmt-LEARN",null,!0),deleteCookie("JSESSIONID","/webapps/blogs-journals",null,!0),deleteCookie("JSESSIONID","/webapps/dropbox-integration",null,!0),deleteCookie("JSESSIONID","/webapps/enterpriseSurvey",null,!0),deleteCookie("JSESSIONID","/webapps/scsk-EPFFileBrowser-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bbgs-goal-performance-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bbgs-autosignon-BBLEARN",null,!0),deleteCookie("JSESSIONID","/auth-saml",null,!0),deleteCookie("JSESSIONID","/webapps/bb-collaborate-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-data-integration-lis-final-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-financial-aid-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/xplor-connector",null,!0),deleteCookie("JSESSIONID","/webapps/bbgs-vitalsource-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/cmsadmin",null,!0),deleteCookie("JSESSIONID","/webapps/plugins",null,!0),deleteCookie("JSESSIONID","/webapps/api-gateway",null,!0),deleteCookie("JSESSIONID","/webapps/grcc-BbStats-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/Bb-McGrawHill-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-data-integration-ims-xml-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-data-integration-flatfile-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/telemetry",null,!0),deleteCookie("JSESSIONID","/webapps/blackboard",null,!0),deleteCookie("JSESSIONID","/webapps/social-connector",null,!0),deleteCookie("JSESSIONID","/webapps/collab-ultra",null,!0),deleteCookie("JSESSIONID","/webapps/bb-ultra-conversion",null,!0),deleteCookie("JSESSIONID","/webapps/scsk-pcsconnector-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/cloudstorageintegration",null,!0),deleteCookie("JSESSIONID","/webapps/scsk-EPFAssignmentAdaptor-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/portal",null,!0),deleteCookie("JSESSIONID","/webapps/date-management",null,!0),deleteCookie("JSESSIONID","/webapps/scor-scormengine-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-cx-ext-angel-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/retention",null,!0),deleteCookie("JSESSIONID","/webapps/Bb-sync-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-cookie-disclosure-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-admin-console-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-mashups-slideshare-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-auth-provider-shibboleth-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-alerts-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-auth-provider-cas-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-mashups-youtube-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/Bb-textbook-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-mashups-flickr-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/mdb-sa-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-vista-ext-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-ce4-ext-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-auth-provider-ldap-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-cntplayer-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-theme-diff-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-cx-ext-vista-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-esapi-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/item-analysis",null,!0),deleteCookie("JSESSIONID","/webapps/Bb-mobile-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-integration-gateway-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-ims-cc-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-cx-ext-ce4-plgnhndl-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bbcs-bbpatch-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-data-integration-ss-xml-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/bb-data-integration-lis-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/calendar",null,!0),deleteCookie("JSESSIONID","/webapps/bb-nautilus-BBLEARN",null,!0),deleteCookie("JSESSIONID","/webapps/searchwidgets",null,!0),null!=l&&setCookie("guest.session.locale",l),setCookie("JSESSIONID",e)})</script><div id=loginFormTitle><h2>アカウントはありますか？</h2></div><div id=loginFormText><p>資格情報を入力して、下の[<b>ログイン</b>]ボタンをクリックしてください。</div><div id=loginFormFields class=clearfix><ul class=clearfix id=loginFormList><li class=clearfix><label for=user_id>広大ID</label> <input name=user_id id=user_id size=25 maxlength=50><li class=clearfix><label for=password>パスワード</label> <input name=password type=password id=password autocomplete=off size=25><li class=clearfix><input name=login type=submit id=entry-login class="button expand"value=ログイン></ul></div><input name=action type=hidden value=login> <input name=new_loc type=hidden></form></div><div id=loginOptions></div>`
    const loginBody = document.querySelector("#loginContainer > div.clearfix.loginBody")
    if(loginBody.innerHTML.includes("https://webct.riise.hiroshima-u.ac.jp/message202204.svg")) loginBody.innerHTML=loginForm;
})();