// ==UserScript==
// @name PvU Auto Water and Scare Crow
// @description Plant vs Undead (PVU) is a multiplayer tower defense game, where your plants are also your real asset. The goal is to combine the phenomenal Plants vs Zombies with new blockchain technology â€“ NFTs. 
// @namespace Script Runner Pro
// @match https://marketplace.plantvsundead.com/*
// @grant none
// @version 0.0.2
// @author channox32
// @downloadURL https://update.greasyfork.org/scripts/430325/PvU%20Auto%20Water%20and%20Scare%20Crow.user.js
// @updateURL https://update.greasyfork.org/scripts/430325/PvU%20Auto%20Water%20and%20Scare%20Crow.meta.js
// ==/UserScript==
(function() {
const CROW = 4;
const WATER = 3;
const LIMIT = 10;
const WATER_MAX_TRIES = 15;
const CROW_MAX_TRIES = 5;
  
const MODE = 'mock';

const LAND_ADDRESSES = [];

let delay = millis => new Promise((resolve, reject) => {
    setTimeout(_ => resolve(), millis)
});

async function mock(details) {
    if (details == 'farmInfo') {
        return {"status":0,"data":[{"_id":"610736a9653333329f763563","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002110600,"plantUnitId":10021106,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:04:57.670Z","updatedAt":"2021-08-04T00:30:25.658Z","__v":0,"harvestTime":"2021-08-15T00:22:15.013Z","rate":{"le":1606,"hours":312},"startTime":"2021-08-02T00:07:50.740Z","plant":{"_id":"60fbe4b4c618a277f630851c","unitId":10021106,"unitBlockchainQuantity":100,"unitName":"Light Shooter","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":0,"damageMagic":306,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1606,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/21_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/21_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/21_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/21_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610736a9653333329f763563","id":2,"type":"POT","startTime":"2021-08-02T00:07:50.449Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":9,"farmId":"610736a9653333329f763563","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107374b653333fdd77635de","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002029802,"plantUnitId":10020298,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:07:39.114Z","updatedAt":"2021-08-04T00:30:32.355Z","__v":0,"harvestTime":"2021-08-15T00:07:53.833Z","rate":{"le":1809,"hours":312},"startTime":"2021-08-02T00:07:53.833Z","plant":{"_id":"60fbe4b4c618a277f6308514","unitId":10020298,"unitBlockchainQuantity":100,"unitName":"Gold Wing","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":1630,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1809,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/20_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.png"},"rarity":2,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":9,"farmId":"6107374b653333fdd77635de","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"6107374b653333fdd77635de","id":2,"type":"POT","startTime":"2021-08-02T00:07:53.544Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107379713754bb1efd53eb3","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1003814002,"plantUnitId":10038140,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:08:55.516Z","updatedAt":"2021-08-04T00:31:04.047Z","__v":0,"harvestTime":"2021-08-07T00:09:55.208Z","rate":{"le":1090,"hours":120},"startTime":"2021-08-02T00:09:43.137Z","plant":{"_id":"60fbe4d3c618a277f6308be2","unitId":10038140,"unitBlockchainQuantity":100,"unitName":"Aloe","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":140,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1090,"hours":120},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/38_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":9,"farmId":"6107379713754bb1efd53eb3","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"6107379713754bb1efd53eb3","id":2,"type":"POT","startTime":"2021-08-02T00:09:42.846Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610737c2818090eac9e24a54","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1000512602,"plantUnitId":10005126,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:09:38.709Z","updatedAt":"2021-08-04T00:30:43.608Z","__v":0,"harvestTime":"2021-08-06T12:11:43.998Z","rate":{"le":976,"hours":108},"startTime":"2021-08-02T00:09:45.936Z","plant":{"_id":"60fbe499c618a277f6307ef0","unitId":10005126,"unitBlockchainQuantity":100,"unitName":"Nightshade","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":0,"damageMagic":426,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":976,"hours":108},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/5_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/5_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/5_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/5_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610737c2818090eac9e24a54","id":2,"type":"POT","startTime":"2021-08-02T00:09:45.646Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":10,"farmId":"610737c2818090eac9e24a54","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610737eb13754b49bfd53ef0","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1001828002,"plantUnitId":10018280,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:10:19.632Z","updatedAt":"2021-08-04T00:31:02.328Z","__v":0,"harvestTime":"2021-08-12T00:10:58.425Z","rate":{"le":1330,"hours":240},"startTime":"2021-08-02T00:10:41.454Z","plant":{"_id":"60fbe4b1c618a277f630843a","unitId":10018280,"unitBlockchainQuantity":100,"unitName":"Moon-shroom","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":240,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1330,"hours":240},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/18_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610737eb13754b49bfd53ef0","id":2,"type":"POT","startTime":"2021-08-02T00:10:41.164Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":9,"farmId":"610737eb13754b49bfd53ef0","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610737fded983aa6dfca3f34","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002028500,"plantUnitId":10020285,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:10:37.253Z","updatedAt":"2021-08-04T00:30:14.753Z","__v":0,"harvestTime":"2021-08-15T00:11:08.228Z","rate":{"le":1735,"hours":312},"startTime":"2021-08-02T00:10:43.137Z","plant":{"_id":"60fbe4b4c618a277f6308507","unitId":10020285,"unitBlockchainQuantity":100,"unitName":"Gold Wing","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":1500,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1735,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/20_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610737fded983aa6dfca3f34","id":2,"type":"POT","startTime":"2021-08-02T00:10:42.847Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":8,"farmId":"610737fded983aa6dfca3f34","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107381681809059a5e24a9c","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1001828302,"plantUnitId":10018283,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:11:02.106Z","updatedAt":"2021-08-04T00:30:46.115Z","__v":0,"harvestTime":"2021-08-12T00:11:32.748Z","rate":{"le":1333,"hours":240},"startTime":"2021-08-02T00:11:32.748Z","plant":{"_id":"60fbe4b1c618a277f630843d","unitId":10018283,"unitBlockchainQuantity":100,"unitName":"Moon-shroom","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":246,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1333,"hours":240},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/18_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"6107381681809059a5e24a9c","id":2,"type":"POT","startTime":"2021-08-02T00:11:32.457Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":9,"farmId":"6107381681809059a5e24a9c","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107382813754b2c85d53f22","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":2009126202,"plantUnitId":20091262,"plantType":2,"plantElement":"light","createdAt":"2021-08-02T00:11:20.183Z","updatedAt":"2021-08-04T00:31:00.745Z","__v":0,"harvestTime":"2021-08-12T04:22:03.121Z","rate":{"le":1760,"hours":240},"startTime":"2021-08-02T00:11:30.022Z","plant":{"_id":"60fbe4d6c618a277f6308d24","unitId":20091262,"unitBlockchainQuantity":100,"unitName":"The Tree of Light","stats":{"type":"light","hp":21400,"defPhysics":300,"defMagic":300,"damagePhysics":125,"damageMagic":125,"damagePure":125,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1760,"hours":240},"type":2,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/mtree/91_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":9,"farmId":"6107382813754b2c85d53f22","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"6107382813754b2c85d53f22","id":2,"type":"POT","startTime":"2021-08-02T00:11:29.731Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":true,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107383f13754be82ad53f3e","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":2009126602,"plantUnitId":20091266,"plantType":2,"plantElement":"light","createdAt":"2021-08-02T00:11:43.373Z","updatedAt":"2021-08-04T00:30:20.414Z","__v":0,"harvestTime":"2021-08-12T00:12:27.454Z","rate":{"le":1780,"hours":240},"startTime":"2021-08-02T00:11:48.513Z","plant":{"_id":"60fbe4d6c618a277f6308d28","unitId":20091266,"unitBlockchainQuantity":100,"unitName":"The Tree of Light","stats":{"type":"light","hp":22200,"defPhysics":300,"defMagic":300,"damagePhysics":125,"damageMagic":125,"damagePure":125,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1780,"hours":240},"type":2,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/mtree/91_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":9,"farmId":"6107383f13754be82ad53f3e","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"6107383f13754be82ad53f3e","id":2,"type":"POT","startTime":"2021-08-02T00:11:48.199Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107384f8180907d32e24ade","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":2009113302,"plantUnitId":20091133,"plantType":2,"plantElement":"light","createdAt":"2021-08-02T00:11:59.609Z","updatedAt":"2021-08-04T00:31:22.123Z","__v":0,"harvestTime":"2021-08-12T04:27:38.245Z","rate":{"le":1565,"hours":240},"startTime":"2021-08-02T00:12:05.703Z","plant":{"_id":"60fbe4d6c618a277f6308d07","unitId":20091133,"unitBlockchainQuantity":100,"unitName":"The Tree of Light","stats":{"type":"light","hp":18300,"defPhysics":300,"defMagic":300,"damagePhysics":125,"damageMagic":125,"damagePure":125,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1565,"hours":240},"type":2,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/mtree/91_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"6107384f8180907d32e24ade","id":2,"type":"POT","startTime":"2021-08-02T00:12:05.411Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":10,"farmId":"6107384f8180907d32e24ade","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107386e653333f50c7636ef","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1000411502,"plantUnitId":10004115,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:12:30.612Z","updatedAt":"2021-08-04T00:34:31.098Z","__v":0,"harvestTime":"2021-08-06T12:14:31.703Z","rate":{"le":965,"hours":108},"startTime":"2021-08-02T00:13:11.578Z","plant":{"_id":"60fbe499c618a277f6307e81","unitId":10004115,"unitBlockchainQuantity":100,"unitName":"Spring Potion","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":0,"damageMagic":0,"damagePure":0,"damageHpLoss":0.215,"damageHpRemove":0},"farmConfig":{"le":965,"hours":108},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/4_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/4_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/4_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/4_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":5,"farmId":"6107386e653333f50c7636ef","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"6107386e653333f50c7636ef","id":2,"type":"POT","startTime":"2021-08-02T00:13:11.287Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107387ced983a4e23ca3fb1","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":2009112002,"plantUnitId":20091120,"plantType":2,"plantElement":"light","createdAt":"2021-08-02T00:12:44.297Z","updatedAt":"2021-08-04T00:35:00.059Z","__v":0,"harvestTime":"2021-08-12T00:17:03.853Z","rate":{"le":1500,"hours":240},"startTime":"2021-08-02T00:13:13.098Z","plant":{"_id":"60fbe4d6c618a277f6308cfa","unitId":20091120,"unitBlockchainQuantity":100,"unitName":"The Tree of Light","stats":{"type":"light","hp":17000,"defPhysics":300,"defMagic":300,"damagePhysics":125,"damageMagic":125,"damagePure":125,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1500,"hours":240},"type":2,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/mtree/91_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/mtree/91_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"6107387ced983a4e23ca3fb1","id":2,"type":"POT","startTime":"2021-08-02T00:13:12.808Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":5,"farmId":"6107387ced983a4e23ca3fb1","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":true,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107388d8180902be8e24b25","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002029702,"plantUnitId":10020297,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:13:01.765Z","updatedAt":"2021-08-04T00:31:05.714Z","__v":0,"harvestTime":"2021-08-15T04:43:51.957Z","rate":{"le":1808,"hours":312},"startTime":"2021-08-02T00:13:15.015Z","plant":{"_id":"60fbe4b4c618a277f6308513","unitId":10020297,"unitBlockchainQuantity":100,"unitName":"Gold Wing","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":1620,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1808,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/20_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.png"},"rarity":2,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"6107388d8180902be8e24b25","id":2,"type":"POT","startTime":"2021-08-02T00:13:14.724Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":4,"farmId":"6107388d8180902be8e24b25","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610738ad653333522e76373a","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1003812502,"plantUnitId":10038125,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:13:33.093Z","updatedAt":"2021-08-04T00:31:26.310Z","__v":0,"harvestTime":"2021-08-07T00:14:34.790Z","rate":{"le":1075,"hours":120},"startTime":"2021-08-02T00:14:10.699Z","plant":{"_id":"60fbe4d3c618a277f6308bd3","unitId":10038125,"unitBlockchainQuantity":100,"unitName":"Aloe","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":125,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1075,"hours":120},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/38_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":6,"farmId":"610738ad653333522e76373a","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"610738ad653333522e76373a","id":2,"type":"POT","startTime":"2021-08-02T00:14:10.393Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610738beed983a2feeca3ff7","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1001811902,"plantUnitId":10018119,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:13:50.667Z","updatedAt":"2021-08-04T00:36:46.727Z","__v":0,"harvestTime":"2021-08-12T00:14:13.083Z","rate":{"le":1219,"hours":240},"startTime":"2021-08-02T00:14:13.083Z","plant":{"_id":"60fbe4b1c618a277f63083fd","unitId":10018119,"unitBlockchainQuantity":100,"unitName":"Moon-shroom","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":119,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1219,"hours":240},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/18_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/18_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":8,"farmId":"610738beed983a2feeca3ff7","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"610738beed983a2feeca3ff7","id":2,"type":"POT","startTime":"2021-08-02T00:14:12.793Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610738cc653333c8e9763770","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1003912202,"plantUnitId":10039122,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:14:04.080Z","updatedAt":"2021-08-04T00:30:41.018Z","__v":0,"harvestTime":"2021-08-07T00:14:08.240Z","rate":{"le":1072,"hours":120},"startTime":"2021-08-02T00:14:08.240Z","plant":{"_id":"60fbe4d3c618a277f6308c34","unitId":10039122,"unitBlockchainQuantity":100,"unitName":"Bubble-pult","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":0,"damageMagic":172,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1072,"hours":120},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/39_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/39_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/39_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/39_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":4,"farmId":"610738cc653333c8e9763770","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."},{"count":1,"farmId":"610738cc653333c8e9763770","id":2,"type":"POT","startTime":"2021-08-02T00:14:07.921Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610738ea13754b7873d5400a","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1003813202,"plantUnitId":10038132,"plantType":1,"plantElement":"water","createdAt":"2021-08-02T00:14:34.015Z","updatedAt":"2021-08-04T00:30:16.939Z","__v":0,"harvestTime":"2021-08-07T05:07:07.837Z","rate":{"le":1082,"hours":120},"startTime":"2021-08-02T00:15:46.306Z","plant":{"_id":"60fbe4d3c618a277f6308bda","unitId":10038132,"unitBlockchainQuantity":100,"unitName":"Aloe","stats":{"type":"water","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":132,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1082,"hours":120},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/38_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/38_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":8,"description":"All plants on this land are fully-watered 2/9. Water +5% productivity."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610738ea13754b7873d5400a","id":2,"type":"POT","startTime":"2021-08-02T00:15:46.016Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":3,"farmId":"610738ea13754b7873d5400a","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610738f713754b63cdd5401c","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002028802,"plantUnitId":10020288,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:14:47.309Z","updatedAt":"2021-08-04T00:35:11.792Z","__v":0,"harvestTime":"2021-08-15T00:15:43.629Z","rate":{"le":1738,"hours":312},"startTime":"2021-08-02T00:15:43.629Z","plant":{"_id":"60fbe4b4c618a277f630850a","unitId":10020288,"unitBlockchainQuantity":100,"unitName":"Gold Wing","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":1530,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1738,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/20_2.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_2.png"},"rarity":1,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610738f713754b63cdd5401c","id":2,"type":"POT","startTime":"2021-08-02T00:15:43.339Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":7,"farmId":"610738f713754b63cdd5401c","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"610739068180902733e24bb6","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1001910102,"plantUnitId":10019101,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:15:02.925Z","updatedAt":"2021-08-04T00:30:48.461Z","__v":0,"harvestTime":"2021-08-12T04:21:30.273Z","rate":{"le":1201,"hours":240},"startTime":"2021-08-02T00:15:48.090Z","plant":{"_id":"60fbe4b1c618a277f630844f","unitId":10019101,"unitBlockchainQuantity":100,"unitName":"Light Bloom","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":0,"damageMagic":151,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1201,"hours":240},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/19_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/19_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/19_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/19_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"610739068180902733e24bb6","id":2,"type":"POT","startTime":"2021-08-02T00:15:47.800Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":7,"farmId":"610739068180902733e24bb6","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0},{"_id":"6107391e13754b04abd54063","stage":"farming","ownerId":"0x54b08e3142f729218a363cff0e1da17bc5660bfc","landId":10135,"plantId":1002015700,"plantUnitId":10020157,"plantType":1,"plantElement":"light","createdAt":"2021-08-02T00:15:26.149Z","updatedAt":"2021-08-04T00:36:22.867Z","__v":0,"harvestTime":"2021-08-15T00:45:45.194Z","rate":{"le":1657,"hours":312},"startTime":"2021-08-02T00:15:50.060Z","plant":{"_id":"60fbe4b4c618a277f63084eb","unitId":10020157,"unitBlockchainQuantity":100,"unitName":"Gold Wing","stats":{"type":"light","hp":0,"defPhysics":0,"defMagic":0,"damagePhysics":1057,"damageMagic":0,"damagePure":0,"damageHpLoss":0,"damageHpRemove":0},"farmConfig":{"le":1657,"hours":312},"type":1,"iconUrl":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/icon/plant/20_1.png","animUrl":{"atlas":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_1.atlas","json":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_1.json","png":"https://pvuresources.s3.ap-southeast-2.amazonaws.com/anim/web/20_1.png"},"rarity":0,"__v":0,"synergy":{"requirement":15,"description":" +2% seed dropping chance."}},"land":{"_id":"60fbe43eeff5c477c26cf6e8","isDefaultLand":false,"landId":10135,"x":14,"y":12,"elements":{"fire":0,"water":1,"ice":0,"wind":0,"electro":0,"parasite":0,"light":1,"dark":0,"metal":0},"totalOfElements":2,"capacity":{"plant":25,"motherTree":4},"rarity":1,"__v":0},"hasSynergy":true,"activeTools":[{"count":1,"farmId":"6107391e13754b04abd54063","id":2,"type":"POT","startTime":"2021-08-02T00:15:49.770Z","name":"Big Pot","description":"You need big pot to start farming. +1% chance to drop seeds."},{"count":9,"farmId":"6107391e13754b04abd54063","id":3,"type":"WATER","startTime":"2021-08-04T00:00:00.000Z","name":"Water","description":"Don't forget to water your plants everyday."}],"waterStatus":{"needWater":false},"hasSeed":false,"hasCrow":false,"pausedTime":null,"isCoolDownTime":true,"inGreenhouse":false,"totalHarvest":0,"totalExtraHarvest":0}],"total":131};
    }

    if (details == 'applyTool') {
       let rewards = [9, 27, 90, 180];
        return Math.round(Math.random() * 100 % 2) == 0 ? {
            "status": 0,
            "data": {
                "leAmount": rewards[Math.round(Math.random() * rewards.length)] || 9
            }
        } : {
            "status": 32,
            "data": {}
        };
    }
}

async function getFarmInfo(address) {
    if (MODE == 'mock') {
        return await mock('farmInfo');
    }
    return await $.get({
      "url": `https://backend-farm.plantvsundead.com/farms/other/${address}`,
      "headers": {
         "Authorization": `Bearer ${localStorage.getItem('token')}`
      }
    });
}

async function applyTool(farmId, toolId) {
    if (MODE == 'mock') {
        let response = await mock('applyTool');

        if (response.data.leAmount != 0  && toolId == 4) {
            response.data.leAmount *= 2;
        }
        return response;
    }
    
    return await $.post({
         "url": 'https://backend-farm.plantvsundead.com/farms/apply-tool',
         "dataType": 'json',
         "contentType": 'application/json',
          "data": JSON.stringify({
              "farmId": farmId,
              "toolId": toolId
          })
    });
}
  
async function getCoor(x,y) {
    return await $.get({
      "url": `https://backend-farm.plantvsundead.com/land/${x}/${y}`,
      "headers": {
         "Authorization": `Bearer ${localStorage.getItem('token')}`
      }
    });
}
  
async function populateAddresses() {
    let xCoor = [-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
    let yCoor = [-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
    
    xCoor.map(async (x) => {
      yCoor.map(async (y) => {
          let land = await getCoor(x, y);
          if (land.data.ownerId != "") {
            LAND_ADDRESSES.push(land.data.ownerId);
          }
      });
    });
    return LAND_ADDRESSES;
}

setTimeout(() => {
    var script = document.createElement('script');
    script.src = 'https://code.jquery.com/jquery-3.4.1.min.js';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
    console.log(`%cPvU Automation script running...`, 'color:green');
}, 3000);

setTimeout(async () => {
    console.log(`%cFinding best coordinates...`, 'color:green');
    let address = [];
      
    if (JSON.parse(localStorage.getItem('land_address')).length == 0) {
        address = await populateAddresses();
        localStorage.setItem('land_address', JSON.stringify(address));
    }

    let token = localStorage.getItem('token');

    let currentWaterTryCount = 0;
    let currentCrowTryCount = 0;
    let totalRewards = 0;

    if (!token) {
        alert("Token not valid");
        return;
    }
    console.log(`%cLogin Token: ${localStorage.getItem('token')}`, 'color:green');

     while(currentWaterTryCount < WATER_MAX_TRIES && currentCrowTryCount < CROW_MAX_TRIES) {
        for (const address in LAND_ADDRESSES) {
            let farmInfo = await getFarmInfo(LAND_ADDRESSES[address]);
            let pages = Math.ceil(farmInfo.total / 10);
            let paginationUrl = '';
      
            for (let currentPage = 1; currentPage < pages; currentPage++) {
                paginationUrl = LAND_ADDRESSES[address];
                console.log(paginationUrl);
                if (currentPage != 1) {
                    paginationUrl += `?limit=${LIMIT}&offset=${(currentPage - 1) * LIMIT}`;
                    farmInfo = await getFarmInfo(paginationUrl);
                }
                
                for(let plant in farmInfo.data) {
                    let applyGrind = {};

                    if (farmInfo.data[plant].hasCrow && currentCrowTryCount < CROW_MAX_TRIES) {
                        let reward = 0;
                        applyGrind = await applyTool(farmInfo.data[plant]._id, CROW);
                        if (applyGrind.status == 0) {
                            currentCrowTryCount += 1;
                            reward += applyGrind.data.leAmount || 0;
                            totalRewards += reward;
                            console.log(`%c Got ${applyGrind.data.leAmount || 0} LE from Scaring Crow->${farmInfo.data[plant]._id}`, 'color:yellow');
                        }
                    }

                    let waterTool = farmInfo.data[plant].activeTools.filter(tool => tool.type.toUpperCase() == 'WATER').shift();
                    if (waterTool.count < 9 && currentWaterTryCount < WATER_MAX_TRIES) {
                        let reward = 0;
                        applyGrind = await applyTool(waterTool.farmId, WATER);
                        if (applyGrind.status == 0) {
                            currentWaterTryCount += 1;
                            reward += applyGrind.data.leAmount || 0;
                            totalRewards += reward;
                            console.log(`%c Got ${applyGrind.data.leAmount || 0} LE from Watering->${waterTool.farmId}`, 'color:yellow');
                        }
                    }
                }
            }
        }
    }
    console.log(`Total Reward: ${totalRewards} LE`);
    console.log(`Current Crow Stats: ${currentCrowTryCount}/${CROW_MAX_TRIES}`);
    console.log(`Current Water Stats: ${currentWaterTryCount}/${WATER_MAX_TRIES}`);
}, 5000);

}());