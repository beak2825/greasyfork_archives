// ==UserScript==
// @name		 MAL improvements
// @namespace	 http://tampermonkey.net/
// @version		 0.8
// @description	 Reorder and change color of entries
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wQRDic4ysC1kQAAA+lJREFUWMPtlk1sVFUUx3/n3vvmvU6nnXbESkTCR9DYCCQSFqQiMdEY4zeJuiBhwUISAyaIHzHGaDTxKyzEr6ULNboiRonRhQrRCMhGiDFGA+WjhQ4NVKbtzJuP9969Lt4wlGnBxk03vZv3cu495/7u/5x7cmX1xk8dczjUXG4+DzAPMA8AYNoNIunXudnZ2+enrvkvn2kADkhiiwM8o6YEEuLE4pxDK0GakZUIoiCOHXFiW2uNEqyjZdNaIbMB0Ero7gwQ4OJEDa0VSoR6lNDT5eMZRaUa0YgSjFZU6zG1ekK+y6er00eJECWWchiRMYp8VwBAOYyw1l0dQIlQrcfcvKSHT968j+5chg+/OMoHnx9FCdwzsIRdz24gGxhe2v0Le74/htaKFYvzbNm4knWrF3J9IYtSQq0e8+C2r+jwDXvefYjEWja98B2DQyU6fINty8cVCigl9HYHiMCOzWs4/HuR4XNl3n5mPbmsB0DgGyYrDR69ewXvvXgXgW+oNxLOX6ySJJaebp/+ZQWOD5fIZT2cS5WddRGCw9oU5rVtA1SqEfmcTxRZPE8RxZbe7oBXnlpH4BtGx0Ke2PkNt624jte3DzBWqjF4ZhzP6GYBOtw1qtC07Y2I0IgTisUKtyztBaB4voLWQl8hS1iLuL2/j0V9OQC+/fkkx4ZK3L9hGQt6Oyj0BCiR1qZpwV5dgRn7gBLh1Y8OcmpkAoDndv3E6IUQgCRx9BWy6b91bH64n7P7tvL8lrU4l/pOi6dSRZWSaShmJgDPKIbPTfLy+wdYfEMXB46M0JXLNE8ElWoEQK0e8/fJi8SJpa+QZemi7hmiOSphxESlQRRb/IzGKMHNBOCaJwTI53wOHhnBM5pCPqDRSFIHrTh1drzls/2Nffx18h+efGwV7+y8kyi2l+O5VKW1KxeycEEn2Q6PPwfHKE3WMVpwrg1AAK1TkaxzBBlDEGiSxLXsgW84cWacE2fGWX5TnnsHlnB8qEQ2SG+J1qnM0lTLaMVbO+5AJL2ijzy9l7FSDaMV4FIAh0MpoRxGfL1vECRtHiK0Gsj+w8OcHpmkeKFCWIv54dAQWx9fxfo1N/Lxl38wVJzgx1+HCGsx1XoMwN79gy1VfU9zujjB2dFJfE9dLtKpb0JrHeUwzW8u66Gm3N9yGJEkls6sR5I4+pcX2PTArez+7DcmK+lcWIsRgc5mzyhXoivSq5W0+klL9fZH6SWpL9VCy64ERLDW4lyaorAaE2Q0xihE0kqnmfepsaZSJPYanXCmjVt265rnaAKJkM9lsM7hXLPg2nyvFuuaALMdjumn+T9jzh8k8wDzAPMAcw7wLz7iq04ifbsDAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTA0LTE3VDE0OjM5OjU2LTA0OjAw6I0f5AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNS0wNC0xN1QxNDozOTo1Ni0wNDowMJnQp1gAAAAASUVORK5CYII=
// @author		 mattiadr96@gmail.com
// @run-at		 document-idle
// @match		 https://myanimelist.net/animelist/*
// @require      https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js
// @grant		 none
// @downloadURL https://update.greasyfork.org/scripts/368807/MAL%20improvements.user.js
// @updateURL https://update.greasyfork.org/scripts/368807/MAL%20improvements.meta.js
// ==/UserScript==

// own list
if ($(".header-menu.other").length !== 0) return;
// watching page
if ($(".list-unit.watching").length !== 1) return;

const iconReddit = "data:image/png;base64,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8LtbMz854SYFo0D7i21/jACBXaBete3vY9uunwD+Z+BKa/rLNWDmk/RqUwsfAX3bwMV1U5P3gMsdYPBJlwzJkfw0hXweeD+jb8oCA7dA96rbW2Mfpw9AmrpaugEODoHRAmWveby7s7W3f880+vsBEYxygDuy46YAAA+caVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczppcHRjRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6YTYzYTRkYmMtNDRjMy00NTg0LWFjOTMtMDFjMDg2YTM4ZTkyIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQxNzdkNGFkLTc2MjgtNGQyNS1hODc1LWNjOTI0MWNjYzc0OCIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjA4YTRhYWE5LTUxNzAtNGE0ZC1hZDUzLWZkMzQzODc1MzUxZSIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE2MzE4ODc2NzcxMTA0MzUiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4yMiIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIj4KICAgPGlwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICA8aXB0Y0V4dDpMb2NhdGlvblNob3duPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgPGlwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICA8aXB0Y0V4dDpSZWdpc3RyeUlkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6UmVnaXN0cnlJZD4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGRhYzFmMmMtMjg5Yi00ZTc0LWE1MjQtM2FhZWY2ZThkNzdmIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDIxLTA5LTE3VDE2OjA3OjU3Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICAgPHBsdXM6SW1hZ2VTdXBwbGllcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkltYWdlU3VwcGxpZXI+CiAgIDxwbHVzOkltYWdlQ3JlYXRvcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkltYWdlQ3JlYXRvcj4KICAgPHBsdXM6Q29weXJpZ2h0T3duZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpDb3B5cmlnaHRPd25lcj4KICAgPHBsdXM6TGljZW5zb3I+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpMaWNlbnNvcj4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PjIsEAgAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflCREOBzl1MkHfAAACEElEQVQ4y3XTTYhNYRzH8c85985bjDFiZEzGe8mEzdSUTKRRspaS1SALm4mFUjKUbKQksiGKFSuvcUteMwvyNiUs0CSTZjQ1yMy99xyLcw53TP6r8/T8v8///J7n9wtUVNylGh3Yjk40p1uf8QBn0RcUFDMmqIBn4xC2YmrlXtaC77iI3qDg658DUvg8NiCcgOVnEJeJf5GbRnEoIr6F7qDgaxB3qcJJ7JwMN7JlD3FM41ya53O8h+HXEc6gJ0w1b50EQ91MwhzXL/HxPcVx4kjauw3teexINVdUkEyft5SxMj++cPMYt89QGsma6tGdxxoEwloWdVIcY9VaOtbTlD7C8g6e3ObVQ6pqGOgjGg/QGcRdxlCtfRv7TiRAdQ1BSE1dsh7/RRTxc5Qg4OhuXlyB8Ym6wxxTp3PnMqcOJJqLY5zcz72rNM6iujY5PENSk/D8Bm9fJhOWrKB9Hbk8YZ62DloWJnfzvp/+uxn/McR9xEojPHtIucTiNlqXUCoSlVi2kqUriMq87KP4LTPW/VzvIsPYjBof3jF9Di0LGB7k9SM+vaGunikN3LvGpSMUR2AUezMjncAuhPINLO9i9SaaW5MfHRzg8U36C9n0Mk5jb2blJpzDxr+GCslNST6jn4mdkyrjBrYHBUOVYWrCwdRh9f8J0ygu4HBQMOTfplROO7rTOLdmt53G+RyeVsb5N8mCqbm9DS0uAAAAAElFTkSuQmCC";
const iconNyaa = "data:image/png;base64,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YWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOnBsdXM9Imh0dHA6Ly9ucy51c2VwbHVzLm9yZy9sZGYveG1wLzEuMC8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjhmNzYwYzRkLWI4OGMtNDc2NS05MGNkLThlMzNiNjZmMDZiNiIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NDc0ZDNhNC01Y2I1LTRiYzYtYmFkZi0xY2E5OWMzMDcxZDYiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphZGY5NjAwNi03MjVkLTQ4NmQtOTlmYi1mNjMwNTQwZGUzNGQiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjMxODg3NzE0NzM2MDE2IgogICBHSU1QOlZlcnNpb249IjIuMTAuMjIiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+CiAgIDxpcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgPGlwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgIDxpcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgPGlwdGNFeHQ6UmVnaXN0cnlJZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3MDg1ZjNkLTAyZmQtNDYyZC04YTU1LTUwNWZkNGViZGNkMSIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMS0wOS0xN1QxNjowODozNCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgIDxwbHVzOkltYWdlU3VwcGxpZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZVN1cHBsaWVyPgogICA8cGx1czpJbWFnZUNyZWF0b3I+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZUNyZWF0b3I+CiAgIDxwbHVzOkNvcHlyaWdodE93bmVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6Q29weXJpZ2h0T3duZXI+CiAgIDxwbHVzOkxpY2Vuc29yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6TGljZW5zb3I+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz75C3n2AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QkRDggieM+U/AAAArBJREFUOMtlkktrXHUchp/f/3Iuc+ZMmktN00y0plC0oNIqVQR3Krhxo5tQXPhBxM/hh3DhQkQQN1oppSDaRWhF21ovTYbMJTNnci7/i4sURX33z7t43lfW3v0kqv6QxvG/iEC/EExP8+y1kvy3JTd+aNAaTCY0Bw8x5dlnWBaXMeHfsNHCxvmMwUYGmynDcxF3sWX3qic7pym2NYdf3MQ4FxjkiqqJdAGyRDC5Rc6WnKxkkAipg4TI8ilDsaswfaAXsTspZtFpQkiJRcJCEo6zhCQXUi2UjQc8Xln2RxBRKA3BQjBCiBpThZSZy0EUaAVdpGdhbTKlmixJhwU7FwYEJ0xnQArKgjIQHCh8gBAQF0mipx88m/WM6eGCpgnkMVAYeFwJq3Vkuw58aCJXfSS0YIx41pTDmUChPLo54WgaCPFUZt976hYkwJUzgTc3YbcUvpk8KRhYR5m2eG+J9Qmz9nQOLZE0UbzytGW/i1wfBsYucHAsdCrQLRRvKVDgMeJxbslx+8+W1iiMwP1xJDTC3gvC5b5iPRMejIWPtuD1XsT4CEeVxz9htYIY4UyhmC4Cd44Sru8I5wfCB1c0sybyhoLUwOdVRLVO/oYBikQAmMwd6yuWXhIpbYcIKIHVTCisoBCCF8x/76sFUi0EhF4Kvl0yryPHtUUEEg1tgDIRhnk8LcgU7L2YMpoHvj9wGKPRAnUbubRhefv5jG/ve7ZWYOng5S1N5yK/TAUjAu9ctHy8t05qFbd/avnqTsdRBe+9mmB7igtritxC1UWmNdx6EPjuXsWn+y0m7wLvXysoexoBXnsuZdxGXtqxbK8q7h56VnIht8J46ZmcRD67PefL3yOt1xg9e8TjRz/ydX2qwwfY/7Ujm1juAqN54I9SsWjh3sjTTwX9Z83iYYTRz/wF8TMviK2SICUAAAAASUVORK5CYII=";

$("html > head").append(`
	<style>
	.list-table .list-table-data .data.status.watchingnew {
		background-color: #ff730a;
	}
	.data.status.watching ~ .data.stream > .nextep > a:first-child {
		color: #2db039!important;
	}
	</style>
`);

function main() {
	// set completed or watchingnew classes
	$(".data.tags").each(function() {
		if ($(this).find("div > span > a").text().includes("Rewatch")) {
			$(this).parent().find(".data.status.watching").attr("class", "data status completed"); // blue
		} else if (!$(this).find("div > span > a").text().includes("Airing")) {
			$(this).parent().find(".data.status.watching").attr("class", "data status watchingnew"); // orange
		}
	});

	let rows = $(".list-item");

	// sort rows
	if (window.location.href.indexOf("&order") == -1) {
		// dont sort if an order is specified
		rows.sort(function(a, b) {
			let s = $(b).find(".data.status").attr("class").localeCompare($(a).find(".data.status").attr("class"));
			if (s === 0) {
				return $(a).find(".data.title > a").text().localeCompare($(b).find(".data.title > a").text());
			} else {
				return s;
			}
		});

		$.each(rows, function(i, row) {
			// set correct number
			$(row).find(".data.number").text(i + 1);
			// move the rows to the correct position
			$(".list-table").append(row);
		});
	}

	// add links
	// add header
	$("#list-container > div.list-block > div > table > tbody:nth-child(1) > tr").append("<th class='header-title links'>Links</th>");
	rows.each(function() {
		let dataLinks = $("<td class='data links' style='width: 50px;'></td>");
		$(this).find(".list-table-data").append(dataLinks);
		let title = $(this).find(".data.title > a.link").text();
		let linkReddit = `https://www.reddit.com/r/anime/search/?q=flair%3Aepisode+%22${encodeURIComponent(title)}%22&sort=new&restrict_sr=on&t=all`;
		let linkNyaa = `https://nyaa.si/?f=0&c=1_2&q=${encodeURIComponent(title)}`;
		dataLinks.append(`<a href="${linkReddit}" target="_blank"><img src="${iconReddit}"></a>`);
		dataLinks.append(`<a href="${linkNyaa}" target="_blank"><img src="${iconNyaa}" style="position: relative; padding-left: 4px"></a>`);
	});

}

let id = setTimeout(function() {
	// get rows
	let rows = $("#list-container > div.list-block > div > table > tbody").slice(1);
	if (rows.length == 0) {
		return;
	}
	let href = rows.first().find(".list-table-data > .data.title > .link").attr("href");
	if (href) {
		// mal has finished loading
		clearTimeout(id);
		main();
	}
}, 100);