// ==UserScript==
// @name        maidx-net-wahlap - map length
// @namespace   esterTion
// @match       https://maimai.wahlap.com/maimai-mobile/map/mapDetail/*
// @match       https://maimai.wahlap.com/maimai-mobile/map/eventMapDetail/*
// @match       https://maimai.wahlap.com/maimai-mobile/map/eventMapLogDetail/*
// @grant       none
// @run-at      document-end
// @version     1.50.09
// @author      -
// @description Map length & task song info @ maimaidx-net@wahlap
// @downloadURL https://update.greasyfork.org/scripts/506789/maidx-net-wahlap%20-%20map%20length.user.js
// @updateURL https://update.greasyfork.org/scripts/506789/maidx-net-wahlap%20-%20map%20length.meta.js
// ==/UserScript==

function _(e,t,i){var a=null;if("text"===e)return document.createTextNode(t);a=document.createElement(e);for(var n in t)if("style"===n)for(var o in t.style)a.style[o]=t.style[o];else if("className"===n)a.className=t[n];else if("event"===n)for(var o in t.event)a.addEventListener(o,t.event[o]);else a.setAttribute(n,t[n]);if(i)if("string"==typeof i)a.innerHTML=i;else if(Array.isArray(i))for(var l=0;l<i.length;l++)null!=i[l]&&a.appendChild(i[l]);return a}

let mapName = document.querySelector('.mapdetail_name_block_inner').textContent;
const mapData = {"启程区域":[0,0.012,0.03,0.04,0.095,0.25,0.8,2.9,4,6.8],"启程区域-task-pos":[],"青春区域":[0,0.012,0.04,0.12,0.9,4.5,15],"青春区域-task-pos":[],"DX区域":[99.999,999.999,1999.999,2999.999,3999.999,4999.999,9999.999,40075,99999.999,384400],"DX区域-task-pos":[],"大都会区域":[0,0.012,0.04,0.12,0.2,0.4,1.2,4.5,8.5,14],"大都会区域-task-pos":[],"龙之区域":[0,0.012,0.05,0.14,0.3,0.6,1.75,5,9.4],"龙之区域-task-pos":[],"天界区域":[0,0.04,0.06,0.15,2,4,20],"天界区域-task-pos":[],"BLACK ROSE区域":[0,9,27,57,87,120,159,201,243,285,369],"BLACK ROSE区域-task-pos":[[1,11002,0],[3,11001,0]],"GYARI区域":[0,0.01,0.05,0.3,1.3,1.4,8.61],"GYARI区域-task-pos":[],"東方Project区域":[0,0.01,0.02,0.04,0.065,0.22,0.32,0.45,0.7,0.9,2,5,10.5,17],"東方Project区域-task-pos":[],"Project DIVA区域":[0,0.005,0.01,0.1,0.125,0.3,0.35,2.2,2.5,7,12,22,35],"Project DIVA区域-task-pos":[],"からめる区域":[0,25,50,80,120,160,200],"からめる区域-task-pos":[],"イロドリミドリ区域":[0,0.01,0.04,0.095,0.15,0.45,0.6,0.9,1.5,3.1,7.5,14],"イロドリミドリ区域-task-pos":[],"結月ゆかり区域":[0,0.01,0.08,0.18,0.7,2.8,7.8],"結月ゆかり区域-task-pos":[],"启程区域2":[0,14,28,42,56,84,112,154,196,252],"启程区域2-task-pos":[[1,11094,0],[3,11095,0],[5,11096,0],[7,11093,0]],"大都会区域2 イーシュ襲来":[0,14,42,84,126,168],"大都会区域2 イーシュ襲来-task-pos":[[1,11090,0],[3,11089,0]],"大都会区域2 黒姫の逆襲":[14,42,84,168,252],"大都会区域2 黒姫の逆襲-task-pos":[[1,11091,0],[3,11092,0]],"みかんヶ岡区域 朝焼け通り":[0,14,42,56,70,126],"みかんヶ岡区域 朝焼け通り-task-pos":[[1,11100,0],[3,11097,0]],"みかんヶ岡区域 月夜通り":[14,42,84,126,168],"みかんヶ岡区域 月夜通り-task-pos":[[1,11098,0],[3,11099,0]],"天界区域2":[0,9,39,49,82,134,246,386,554,806,1072],"天界区域2-task-pos":[[2,11101,0],[7,11103,0],[9,11102,0]],"DX区域2":[112,532,1064,1596,2128,2660,3192,4256],"DX区域2-task-pos":[],"BLACK ROSE区域2 黒薔薇病篇":[126,252,378],"BLACK ROSE区域2 黒薔薇病篇-task-pos":[],"BLACK ROSE区域2 二つの仮面篇":[84,168,294],"BLACK ROSE区域2 二つの仮面篇-task-pos":[],"オンゲキ区域":[0,0.01,0.04,0.12,0.3,1,2,3.6,6,19],"オンゲキ区域-task-pos":[],"＃コンパス区域":[0,0.01,0.02,0.04,0.1,0.22,0.5,1.2,2.6,5.5,8.5,16],"＃コンパス区域-task-pos":[],"ポンコツクエスト区域":[0,0.01,0.04,0.15,0.55,1.7,9],"ポンコツクエスト区域-task-pos":[],"Project DIVA区域2":[0,0.01,0.045,0.18,0.6,2,11],"Project DIVA区域2-task-pos":[],"東方Project×アトレ秋葉原区域":[0,0.01,0.025,0.14,0.65,3,16.5],"東方Project×アトレ秋葉原区域-task-pos":[],"咻哇咻哇区域":[0,42,70,126,154,238,294,322,504,630],"咻哇咻哇区域-task-pos":[[1,11152,0],[3,11153,0],[6,11154,0]],"大都会区域3":[0,84,98,210,224,308,420,546,756,882],"大都会区域3-task-pos":[[1,11157,0],[3,11158,0],[6,11159,0]],"天空街区域":[0,28,42,70,84,126,154,168,280,336],"天空街区域-task-pos":[[1,11163,0],[3,11162,0],[6,11161,0]],"天界区域3":[0,84,168,252,420,504,840,1260,1386],"天界区域3-task-pos":[[1,11166,0],[4,11167,0]],"BLACK ROSE区域3":[0,42,84,126,294,336,504],"BLACK ROSE区域3-task-pos":[],"咻哇乐园区域":[3000,40000,80000],"咻哇乐园区域-task-pos":[],"ナユタン星人区域":[0,18,58,157,196,238,364],"ナユタン星人区域-task-pos":[],"GYARI区域2":[0,28,84,210,252,420],"GYARI区域2-task-pos":[],"東方Projectリバイバル区域":[0,70,154,322,420,588],"東方Projectリバイバル区域-task-pos":[],"Arcaea区域":[0,18,58,88,143,273,312,382,564,634,774],"Arcaea区域-task-pos":[],"かいりきベア区域":[0,18,58,157,196,364],"かいりきベア区域-task-pos":[],"にじさんじ区域":[0,18,48,81,133,175,301,371,441,511,581,637,772,805],"にじさんじ区域-task-pos":[],"いらすとや区域":[0,18,48,92,170,209,279,349,503,545,671,797],"いらすとや区域-task-pos":[],"オンゲキ区域2":[0,84,126,168,336,420,630,840],"オンゲキ区域2-task-pos":[],"咻哇咻哇区域2":[0,30,70,120,170,290,360,440,530,666,800],"咻哇咻哇区域2-task-pos":[[1,11224,0],[3,11225,0],[6,11226,0]],"BLACK ROSE区域4":[0,70,350,500],"BLACK ROSE区域4-task-pos":[],"天空街区域2":[0,36,96,156,228,324,408,432,540,612],"天空街区域2-task-pos":[[1,11228,0],[3,11229,0],[6,11231,0]],"kawaii区域":[0,111,222,333,444,666,777,900,1111,1300],"kawaii区域-task-pos":[[1,11232,0],[3,11233,0],[6,11234,0]],"高天原区域":[0,70,170,270,400,530,800,999,1111],"高天原区域-task-pos":[[2,11236,0],[4,11237,0]],"咻哇乐园区域2":[3000,40000,80000],"咻哇乐园区域2-task-pos":[],"すみっコぐらし区域":[0,9,29,62,140,180,220,260,300],"すみっコぐらし区域-task-pos":[],"HaNaMiNa区域":[0,70,230,350,450,600],"HaNaMiNa区域-task-pos":[],"HARDCORE TANO*C区域":[0,60,100,160,200,260,400,500,570,670,740,840,900,999],"HARDCORE TANO*C区域-task-pos":[],"東方Projectリバイバル区域2":[0,36,72,200,260,330,400,500],"東方Projectリバイバル区域2-task-pos":[],"はるまきごはん区域":[0,30,140,210,280,400],"はるまきごはん区域-task-pos":[],"オンゲキ区域3":[0,50,110,270,350,500,600],"オンゲキ区域3-task-pos":[],"宇宙空间站区域":[0,36,72,180,216,324,468,504,684,800],"宇宙空间站区域-task-pos":[[1,11296,0],[3,11297,0],[6,11298,0]],"天界区域4":[0,36,72,180,252,396,432,540,800],"天界区域4-task-pos":[[1,11301,0],[3,11303,0]],"大都会区域4":[0,72,108,216,288,468,612,720,900,1000],"大都会区域4-task-pos":[[1,11304,0],[3,11305,0],[6,11306,0]],"7sRef区域":[0,180,240,288,468,576,900,1199,1200,1300],"7sRef区域-task-pos":[[1,11310,0],[4,11309,0],[8,11308,0]],"银河区域":[3000,40000,80000],"银河区域-task-pos":[],"BLACK ROSE区域5":[0,72,144,312,360,500],"BLACK ROSE区域5-task-pos":[],"アイドルマスター ミリオンライブ！区域":[0,24,51,141,180,250],"アイドルマスター ミリオンライブ！区域-task-pos":[],"アイドルマスター SideM区域":[0,24,90,150],"アイドルマスター SideM区域-task-pos":[],"cosMo@暴走P区域":[0,24,105,135,234,267,303,339,411],"cosMo@暴走P区域-task-pos":[],"オーイシ×加藤のピザラジオ区域":[0,24,132],"オーイシ×加藤のピザラジオ区域-task-pos":[],"東方ダンマクカグラ区域":[0,50,110,280,350,450],"東方ダンマクカグラ区域-task-pos":[],"キノシタ区域":[0,36,70,110,220,260,300,400],"キノシタ区域-task-pos":[],"Rain Drops区域":[0,36,110,170,250],"Rain Drops区域-task-pos":[],"Project DIVA区域3":[0,36,60,108,180,216,288],"Project DIVA区域3-task-pos":[],"オンゲキ区域4":[0,72,120,170,320,500,550,600],"オンゲキ区域4-task-pos":[],"舞ヶ原シンセ研究会区域":[0,144,324,360,432],"舞ヶ原シンセ研究会区域-task-pos":[],"宇宙空间站区域2":[0,35,70,120,180,240,300,450,550,700,800],"宇宙空间站区域2-task-pos":[[1,11375,0],[3,11376,0],[7,11377,0]],"大都会区域5":[0,35,80,150,210,270,330,500,600,800,900],"大都会区域5-task-pos":[[1,11383,0],[3,11384,0],[7,11382,0]],"天界区域5":[0,70,120,220,300,380,460,600,700,900,1000],"天界区域5-task-pos":[[1,11387,0],[3,11388,0],[7,11386,0]],"7sRef区域2":[0,150,200,400,450,550,600,850,900,1200,1300],"7sRef区域2-task-pos":[[1,11395,0],[3,11393,0],[7,11392,0]],"银河区域2":[3000,20000,25000,30000,35000,40000,50000,60000,70000,80000,90000,100000],"银河区域2-task-pos":[],"BLACK ROSE区域6":[0,70,80,170,240,250,400],"BLACK ROSE区域6-task-pos":[[2,11380,0],[5,11381,0]],"10周年纪念区域":[1,12,24,36,43,49,62,76,83,89,102,116,123,129,142,156,163,169,182,196,203,209,222,236,243,249,262,276,283,289,302,316,323,329,342,356,363,369,382,396,403,409,422,436,443,449,462,476,483,489,502,516,523,529,542,556,563,569,582,596,603,609,622,636,643,649,662,676,685,694,703,711,720,730,740,750,760,777],"10周年纪念区域-task-pos":[[3,11390,0],[7,11224,0],[11,11152,0],[15,11095,0],[19,11003,0],[23,835,0],[27,737,0],[31,674,0],[35,614,0],[39,561,0],[43,529,0],[47,472,0],[51,242,0],[55,351,0],[59,229,0],[63,241,0],[67,159,0],[71,25,0]],"ツユ区域":[0,9,25,30,60,70,130,210,300,350],"ツユ区域-task-pos":[[1,11407,0],[3,11347,0],[5,11408,0],[8,11396,0]],"D4DJ Groovy Mix区域":[0,25,60,90,120,130,170,200,230,260,290,320,330,370,400],"D4DJ Groovy Mix区域-task-pos":[[5,11420,0],[12,11421,0]],"Diverse System区域":[0,25,100,130,200,230,300,350,700,730,800],"Diverse System区域-task-pos":[[2,11424,0],[4,11425,0],[6,11426,0]],"Rain Drops区域2":[0,35,70,80,150,160,250],"Rain Drops区域2-task-pos":[[3,11430,0],[5,11348,0]],"ゲームセンターCX区域":[0,25,35,50,75,100,125,150,200],"ゲームセンターCX区域-task-pos":[[1,11431,0]],"CHUNITHM区域":[0,25,60,120,150,160,200,280,320,410,500],"CHUNITHM区域-task-pos":[[5,11401,0],[9,11400,0]],"すりぃ区域":[0,20,25,45,65,85,90,110,130,170,180,200,220,230,250,270,280,330,400,450],"すりぃ区域-task-pos":[[2,11439,0],[6,11447,0],[10,11132,0],[13,11325,0],[16,11365,0],[18,11449,0]],"オンゲキ区域5":[0,35,70,75,110,150,190,200,250,300,390,450,540,600],"オンゲキ区域5-task-pos":[[3,11451,0],[7,11402,0],[10,11404,0],[12,11405,0]],"欢乐节日区域":[0,30,70,120,170,230,290,360,440,530,700,800],"欢乐节日区域-task-pos":[[1,11452,0],[3,11453,0],[7,11454,0]],"大都会区域6":[0,70,120,220,300,380,460,600,700,1000,1100],"大都会区域6-task-pos":[[1,11459,0],[3,11460,0],[7,11461,0]],"天空街区域3":[0,35,80,150,210,270,330,500,600,800,900],"天空街区域3-task-pos":[[1,11463,0],[3,11464,0],[7,11465,0]],"天界区域6":[0,150,200,400,450,550,600,850,900,1300,1400],"天界区域6-task-pos":[[1,11467,0],[3,11468,0],[7,11469,0]],"节日区域":[3000,20000,25000,30000,35000,40000,50000,60000,70000,80000,90000,100000],"节日区域-task-pos":[],"BLACK ROSE区域7":[0,30,80,150,200,250,400,500],"BLACK ROSE区域7-task-pos":[[6,11456,0]],"DECO*27区域":[0,9,30,40,70,80,90,130,140,160,170,210,220,230,280,290,380,400],"DECO*27区域-task-pos":[[2,11481,0],[9,11482,0],[16,10190,0]],"東方Project×オンゲキ区域":[0,9,30,60,100,130,160,200,300,350,550,600],"東方Project×オンゲキ区域-task-pos":[[2,11495,0],[4,11496,0],[7,11473,0],[8,11474,0],[10,11475,0]],"さなちゃんねる区域":[0,9,30,40,70,80,90,130,150,160,170,180,210,220,260],"さなちゃんねる区域-task-pos":[[2,11497,0],[8,11498,0]],"樋口楓区域":[0,9,30,40,70,80,120,130,140,180,190,250],"樋口楓区域-task-pos":[[2,11503,0]],"電音部区域":[0,30,40,70,80,120,130,170,180,220,230,270,330,400],"電音部区域-task-pos":[[1,11506,0],[3,11507,0]],"CHUNITHM区域2":[0,30,70,90,110,130,160,180,210,230,300,380,420,550,600],"CHUNITHM区域2-task-pos":[[1,11477,0],[4,11478,0],[6,627,0],[8,719,0],[11,11479,0],[13,603,0]],"syudou区域":[0,30,40,70,90,120,150,180,230,270,350],"syudou区域-task-pos":[[1,11510,0],[3,11121,0],[5,11511,0],[7,11105,0]],"Arcaea区域2":[0,30,60,160,190,220,320,350,500,550,650,800,900],"Arcaea区域2-task-pos":[[2,11514,0],[5,11524,0],[8,11516,0],[11,11517,0]],"欢乐节日区域2":[0,30,70,120,170,230,290,360,440,700,800],"欢乐节日区域2-task-pos":[[1,11526,0],[3,11527,0],[7,11528,0]],"天空街区域4":[0,30,70,150,250,300,450,530,800,900],"天空街区域4-task-pos":[[1,11538,0],[4,11539,0],[6,11541,0]],"龙之区域2":[0,100,150,300,400,600,700,1000,1111],"龙之区域2-task-pos":[[1,11545,0],[3,11546,0],[5,11547,0]],"节日区域2":[3000,20000,25000,30000,35000,40000,50000,60000,70000,80000,90000,100000],"节日区域2-task-pos":[],"BLACK ROSE区域8":[0,30,70,110,150,200,250,400,500],"BLACK ROSE区域8-task-pos":[[1,11532,0],[7,11533,0]],"10周年纪念区域2":[0,12,24,36,50,65,80,95,110,125,160,180,200,220,240,260,280,300,400,425,450,475,500,525,550,580,610,640,670,700,1000,1111],"10周年纪念区域2-task-pos":[[3,11542,0],[18,11543,0]],"ヒメヒナ区域":[0,8,25,30,50,70,100,110,140,170,220,230],"ヒメヒナ区域-task-pos":[[2,11555,0],[6,11557,0],[10,11556,0]],"ピノキオピー区域":[0,25,30,40,80,100,130,140,160,200,210,240,300,310,400],"ピノキオピー区域-task-pos":[[1,11558,0],[6,448,0],[9,11274,0],[12,11559,0]],"Muse Dash区域":[0,25,50,80,130,145,170,220,235,260,310,325,350,400,420,470,500,530,560,650,660],"Muse Dash区域-task-pos":[[4,11571,0],[7,11572,0],[10,11573,0],[13,11574,0],[15,11575,0],[19,11576,0]],"東方Project×イロドリミドリ区域":[0,20,40,110,130,150,170,190,260,270,300,330,360,440,450,480,510,540,570,660,670],"東方Project×イロドリミドリ区域-task-pos":[[8,11604,0],[13,11603,0],[19,11605,0]],"MEGAREX区域":[0,25,50,75,130,140,170,250,285,320,420,430,470,510,550,680,730,900,910],"MEGAREX区域-task-pos":[[1,11584,0],[4,11585,0],[7,11586,0],[10,11589,0],[15,11588,0],[17,11587,0]],"からめる区域2":[0,10,20,30,40,60,70,90,110,130,150,180,190,220,250,280,320,330,399,400,401,450,700,710],"からめる区域2-task-pos":[[5,11590,0],[11,10734,0],[16,11390,0],[22,11591,0]],"音楽的同位体　可不区域":[0,25,50,150,200,300,310],"音楽的同位体　可不区域-task-pos":[[1,11592,0],[5,11593,0]],"オンゲキ区域6":[0,30,50,70,100,130,160,200,230,260,380,410,600,610],"オンゲキ区域6-task-pos":[[1,11551,0],[4,11552,0],[12,11554,0]],"派对区域":[0,15,30,70,120,160,210,260,330,400,500,600,700,800],"派对区域-task-pos":[[2,11608,0],[4,11609,0],[9,11610,0]],"大都会区域7":[0,70,120,220,300,380,460,600,700,900,1000],"大都会区域7-task-pos":[[1,11615,0],[3,11616,0],[7,11617,0]],"天空街区域5":[0,35,80,150,210,270,330,500,600,800,900],"天空街区域5-task-pos":[[1,11620,0],[3,11622,0],[7,11623,0]],"7sRef区域3":[0,150,200,400,450,550,600,850,900,1300,1400],"7sRef区域3-task-pos":[[1,11535,0],[3,11536,0],[7,11534,0]],"BUDDiES区域":[3000,20000,25000,30000,35000,40000,50000,60000,70000,80000,90000,100000],"BUDDiES区域-task-pos":[],"BLACK ROSE区域9":[0,30,70,110,150,200,250,400,500],"BLACK ROSE区域9-task-pos":[[1,11613,0],[7,11614,0]],"いよわ区域":[0,25,30,40,65,75,90,120,130,150,190,200,220],"いよわ区域-task-pos":[[1,11512,0],[4,11630,0],[7,11631,0],[10,11629,0]],"グルーヴコースター区域":[0,30,40,60,90,120,130,160,220,260,300,350,360],"グルーヴコースター区域-task-pos":[[1,11632,0],[5,11664,0],[8,11633,0],[11,390,0]],"ヘブンバーンズレッド区域":[0,5,10,15,20,25,30,40,60,80,105,130,160,190,220,260,300],"ヘブンバーンズレッド区域-task-pos":[[6,11639,0]],"WACCA区域":[0,30,40,60,110,150,200,210,250,320,330,390,480,490,640,700],"WACCA区域-task-pos":[[1,11640,0],[4,11641,0],[6,11565,0],[9,11642,0],[12,11566,0],[14,11643,0]],"sasakure.UK区域":[0,25,30,40,75,90,100,120,150,160,180,230,240],"sasakure.UK区域-task-pos":[[1,11645,0],[5,836,0],[8,10185,0],[11,11668,0]],"TJ.hangneil区域":[0,30,60,120,150,300,400,444],"TJ.hangneil区域-task-pos":[[1,11647,0]],"月面区域":[1,100,120,140,160,180,200,240],"月面区域-task-pos":[[1,11648,0]],"裏 月面区域":[199,200,210,654,660,666],"裏 月面区域-task-pos":[],"東北ずん子区域":[0,8,25,35,50,65,80,100,120,140,150,180,210,240,280],"東北ずん子区域-task-pos":[[2,11650,0],[9,11651,0]],"CHUNITHM区域3":[0,30,50,130,190,210,270,280,300,360,380,480,600],"CHUNITHM区域3-task-pos":[[1,11626,0],[4,11443,0],[6,736,0],[9,11471,0],[11,11628,0]],"派对区域2":[0,30,70,140,200,280,400,550,800,900],"派对区域2-task-pos":[[1,11669,0],[3,11670,0],[6,11671,0]],"BUDDiES区域2":[500,3000,20000,25000,30000,35000,40000,50000,60000,70000,80000,90000,100000],"BUDDiES区域2-task-pos":[],"NEEDY GIRL OVERDOSE区域":[0,8,16,25,40,70,120,170,180,250],"NEEDY GIRL OVERDOSE区域-task-pos":[[2,11692,0],[7,11568,0]],"花譜区域":[0,25,30,45,60,80,100,120,150,200],"花譜区域-task-pos":[[1,11693,0]],"ゆこぴ区域":[0,8,16,25,50,60,85,86,87,88,100,120,140,160,170,190,210,230,250],"ゆこぴ区域-task-pos":[[4,11694,0],[13,11695,0]],"大都会区域8":[0,70,120,300,400,500,650,800,1000,1100],"大都会区域8-task-pos":[[1,11674,0],[3,11675,0],[6,11676,0]],"グルーヴコースター区域2":[0,15,35,50,60,100,200,300,450,550],"グルーヴコースター区域2-task-pos":[[3,11705,0],[6,11706,0],[8,11707,0]],"にじさんじのB級バラエティ（仮）区域":[0,6,12,18,25,50,60,100,140,180,240,250],"にじさんじのB級バラエティ（仮）区域-task-pos":[[5,11712,0]],"＃コンパス区域2":[0,25,30,70,100,140,150,220,290,300],"＃コンパス区域2-task-pos":[[1,11727,0],[5,11728,0],[8,11729,0]],"龙之区域3":[0,30,70,140,200,280,400,550,800,900],"龙之区域3-task-pos":[[1,11678,0],[3,11679,0],[6,11680,0]],"東方ダンマクカグラ ファンタジア・ロスト区域":[0,8,25,50,60,90,120,160,200,210,300,450,600,650],"東方ダンマクカグラ ファンタジア・ロスト区域-task-pos":[[3,11717,0],[8,11718,0],[12,11720,0]],"周防パトラ区域":[0,8,25,30,45,60,75,90,100,120,140,165,190,220,250],"周防パトラ区域-task-pos":[[2,11730,0],[7,11731,0]],"天界区域7":[0,150,200,400,450,550,600,850,900,1300,1400],"天界区域7-task-pos":[[1,11682,0],[3,11683,0],[7,11684,0]],"HARDCORE TANO*C区域2":[0,30,40,80,130,180,250,260,320,400,500,700,800],"HARDCORE TANO*C区域2-task-pos":[[1,11726,0],[4,11722,0],[6,11724,0],[9,11723,0],[11,11725,0]],"オンゲキ区域7":[0,12,30,40,80,130,140,200,400,550,650],"オンゲキ区域7-task-pos":[[2,11689,0],[5,11688,0],[9,11691,0]],"プロジェクトセカイ区域":[0,28,70,112,168,294,336,406,476,546,616,840],"プロジェクトセカイ区域-task-pos":[],"プロジェクトセカイ区域2":[0,24,48,72,108,144,156,180,204,228,264,288,300,324,348,372,408,432,468,504,576],"プロジェクトセカイ区域2-task-pos":[],"プロジェクトセカイ区域3":[0,30,70,100,130,170,240,280,320,360,400,500],"プロジェクトセカイ区域3-task-pos":[[1,11492,0],[5,11493,0],[8,11494,0]],"プロジェクトセカイ区域4":[0,8,15,25,35,50,65,75,85,95,105,120,135,150,160,170,185,200,210,225,240,250,270,290,310,330,350,370,390,400,420,440,470,500,530,560,590,600],"プロジェクトセカイ区域4-task-pos":[[20,11665,0],[28,11667,0],[36,11666,0]]}
window.mapData = mapData;

const current = mapData[mapName]

const tr = Array.from(document.querySelectorAll('.see_through_area .col5:not(:empty)'))

const currentPos = document.getElementsByClassName('mapdetail_total').length ? parseInt(document.getElementsByClassName('mapdetail_total')[0].textContent.replace(/,/g, '').replace(' Km', '')) :
  /eventMapLogDetail/.test(location.href)&&tr.length&&tr[0].parentNode.firstElementChild.classList.contains('t_c') ? 999999999 : 0

const useData = current
const taskMusics = mapData[mapName + '-task-pos']
taskMusics.forEach(([idx, mid]) => {
  const isOverEndOfList = idx >= tr.length
  const shouldBeTaskMusic = isOverEndOfList ? tr.slice(-1)[0] : tr[idx]
  const ver30 = shouldBeTaskMusic.tagName.toLowerCase() === 'td'
  const isFound = currentPos > useData[idx - 1]
  const insertDiv = _(ver30 ? 'td' : 'div', {className: ver30 ? 'col5 t_c' : 'col5 d_ib p_5'}, [
    _('div', {className: 'basic_block p_r p_3' + (ver30 ? ' m_3' : '')}, [
      _('img', {loading: 'lazy', className:"w_80"+(isFound?'':' gray_img'), src:"https://estertion.win/__maimai_jacket__/"+((mid%10000)+10000+'').substr(1)+".jpg"}),
      _('img', {src:"/maimai-mobile/img/icon_taskmusic.png", className:"mapdetail_taskmusic_icon"}),
      isFound ? _('img', {src:currentPos <= useData[idx] ? "/maimai-mobile/img/map_bonus_next.png" : "/maimai-mobile/img/map_bonus_get.png", className:"mapdetail_bonus_icon"}) : _('text', ''),
    ])
  ])
  if (isOverEndOfList) {
    shouldBeTaskMusic.parentNode.appendChild(insertDiv)
  } else {
    shouldBeTaskMusic.parentNode.insertBefore(insertDiv, shouldBeTaskMusic)
  }
  if (!isOverEndOfList && shouldBeTaskMusic.getElementsByClassName('mapdetail_taskmusic_icon').length > 0) {
    //shouldBeTaskMusic.remove()
    //tr.splice(idx, 1)
    insertDiv.remove()
  } else {
    tr.splice(idx, 0, insertDiv)
  }
})
if (tr.length < useData.length) {
  const ver30 = tr[0].tagName.toLowerCase() === 'td'
  for (let i = tr.length; i < useData.length; i++) {
    const insertDiv = _(ver30 ? 'td' : 'div', {className: ver30 ? 'col5 t_c' : 'col5 d_ib p_5'}, [
      _('div', {className: 'basic_block p_r p_3' + (ver30 ? ' m_3' : '')}, [
        _('div', { style: { height: '80px', width: '80px', fontSize: '60px', lineHeight: '80px' } }, [_('text', '？')])
      ])
    ])
    tr.push(insertDiv)
  }
}

const relayoutArr = []
tr.forEach(i => {
  const div = _('div', {
    className: 'f_16 l_h_15 t_c'
  }, [_('text', useData.shift() + ' km')])
  i.appendChild(div)
  if (i.tagName.toLowerCase() === 'td') {
    relayoutArr.push(i)
  }
})
if (relayoutArr.length > 5) {
  const tbody = relayoutArr[0].parentNode.parentNode
  while (tbody.children.length) tbody.children[0].remove()
  while (relayoutArr.length) {
    tbody.appendChild(_('tr', {}, relayoutArr.splice(0, 5)))
  }
}

const titleImg = document.querySelector('.title')
if (titleImg) {
  const grayImgStyle = document.head.appendChild(_('style'))
  titleImg.parentNode.insertBefore(_('div', {}, [
    _('label', {}, [
      _('input', {type: 'checkbox', id: 'favorite', checked: '', event: { change: e => {
        grayImgStyle.textContent = e.target.checked ? '.gray_img {  }' : '.gray_img { filter: none; opacity: 1 }'
      } }}),
      _('text', 'Gray Image')
    ])
  ]), titleImg.nextSibling)
}
