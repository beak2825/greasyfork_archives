 // ==UserScript==
// @name 	Content-Replacer
// @author      CharaDemon
// @namespace  	vk.com/CharaDemon
// @version    	2.6
// @description Кастомные пикчи, мемасики и т.д.
// @match       *.vk.com/im*
// @icon        https://vk.com/doc209007806_612533447
// @downloadURL https://update.greasyfork.org/scripts/431231/Content-Replacer.user.js
// @updateURL https://update.greasyfork.org/scripts/431231/Content-Replacer.meta.js
// ==/UserScript==

function repl(str){
    str = str.replace(/\[roflanebalo\]/gim, '<img src="https://i.ibb.co/zxKYGyp/roflanebalo.png"/>');
    str = str.replace(/\[pepecringe\]/gim, '<img src="https://i.ibb.co/smtkNn9/pepecringe.gif"/>');
    str = str.replace(/\[pepejuice\]/gim, '<img src="https://i.ibb.co/rsqfCW2/pepejuice.png"/>');
    str = str.replace(/\[pepesimp\]/gim, '<img src="https://i.ibb.co/kyNYNLZ/pepesimp.gif"/>');
    str = str.replace(/\[10tons\]/gim, '<img src="https://i.ibb.co/v3P7XPn/10tons.gif"/>');
    str = str.replace(/\[40tons\]/gim, '<img src="https://i.ibb.co/mB0R7y3/40tons.gif"/>');
    str = str.replace(/\[concentration\]/gim, '<img src="https://i.ibb.co/CbHMy1k/concentration.gif"/>');
    str = str.replace(/\[yagamirage\]/gim, '<img src="https://i.ibb.co/h1dNG1Z/yagamirage.gif"/>');
    str = str.replace(/\[kidgokuwait\]/gim, '<img src="https://i.ibb.co/NtCD1Xj/kidgokuwaiting.gif"/>');
    str = str.replace(/\[zxcursed\]/gim, '<img src="https://i.ibb.co/ngDRgjn/zxcursed.gif"/>');
    str = str.replace(/\[sataniasmile\]/gim, '<img src="https://i.ibb.co/hL6KdKd/sataniasmile.gif"/>');
    str = str.replace(/\[kagamiwtf\]/gim, '<img src="https://i.ibb.co/1zCSK56/kagamiwtf.gif"/>');
    str = str.replace(/\[monkas\]/gim, '<img src="https://i.ibb.co/fvFP21t/monkaS.gif"/>');
    str = str.replace(/\[alucardsmile\]/gim, '<img src="https://i.ibb.co/mbmSTd8/alucardsmile.gif"/>');
    str = str.replace(/\[girlhaha\]/gim, '<img src="https://i.ibb.co/80Fkvd5/girlhaha.gif"/>');
    str = str.replace(/\[roflanzdarova\]/gim, '<img src="https://i.ibb.co/dfmqrx2/roflanzdarova.png"/>');
    str = str.replace(/\[pepebilly\]/gim, '<img src="https://i.ibb.co/cJt4Cr7/pepebilly.gif"/>');
    str = str.replace(/\[pepehack\]/gim, '<img src="https://i.ibb.co/FYwBrRG/pepehack.gif"/>');
    str = str.replace(/\[garnetno\]/gim, '<img src="https://i.ibb.co/4PzmXdV/garnetno.gif"/>');
    str = str.replace(/\[monkax\]/gim, '<img src="https://i.ibb.co/t3hTbmW/monkaX.gif"/>');
    str = str.replace(/\[jotarono\]/gim, '<img src="https://i.ibb.co/5nL8y14/jotarono.gif"/>');
    str = str.replace(/\[jotaroyes\]/gim, '<img src="https://i.ibb.co/23K3YDk/jotaroyes.gif"/>');
    str = str.replace(/\[lapisgood\]/gim, '<img src="https://i.ibb.co/bKKHwwG/lapisgood.gif"/>');
    str = str.replace(/\[gohandance\]/gim, '<img src="https://i.ibb.co/J3PVDht/gohandance.gif"/>');
    str = str.replace(/\[kqrage\]/gim, '<img src="https://i.ibb.co/bd3pwPZ/kqrage.gif"/>');
    str = str.replace(/\[watahaha\]/gim, '<img src="https://i.ibb.co/NWZZ0m5/watahaha.gif"/>');
    str = str.replace(/\[watanoway\]/gim, '<img src="https://i.ibb.co/fFpz8MK/watanoway.gif"/>');
    str = str.replace(/\[bobsad\]/gim, '<img src="https://i.ibb.co/PFq2QDw/bobsad.gif"/>');
    str = str.replace(/\[kidgokueat\]/gim, '<img src="https://i.ibb.co/25by8ws/kidgokueat.gif"/>');
    str = str.replace(/\[rengeno\]/gim, '<img src="https://i.ibb.co/DrLdRtc/rengeno.gif"/>');
    str = str.replace(/\[pepecry\]/gim, '<img src="https://i.ibb.co/pQ4WKvw/pepecry.gif"/>');
    str = str.replace(/\[gokudodge\]/gim, '<img src="https://i.ibb.co/LnyBx4D/gokudodge.gif"/>');
    str = str.replace(/\[gokumlgdodge\]/gim, '<img src="https://i.ibb.co/MMDWJ7x/gokumlgdodge.gif"/>');
    str = str.replace(/\[pepenyam\]/gim, '<img src="https://i.ibb.co/r3CXpL7/pepenyam.gif"/>');
    str = str.replace(/\[watachains\]/gim, '<img src="https://i.ibb.co/Sv8SZXp/watachains.gif"/>');
    str = str.replace(/\[peperage\]/gim, '<img src="https://i.ibb.co/4NpSSBT/peperage.gif"/>');
    str = str.replace(/\[classic\]/gim, '<img src="https://i.ibb.co/RcnYVXt/classic.gif"/>');
    str = str.replace(/\[diomuda\]/gim, '<img src="https://i.ibb.co/X4jfKrS/diomuda.gif"/>');
    str = str.replace(/\[jotaroora\]/gim, '<img src="https://i.ibb.co/4R1Tfbh/jotaroora.gif"/>');
    str = str.replace(/\[mudaora\]/gim, '<img src="https://i.ibb.co/tMFZ7Yd/mudaora.gif"/>');
    str = str.replace(/\[!\]/gim, '<img src=""/>');
    str = str.replace('<span class="nim-dialog--preview _dialog_body"', '<span class="nim-dialog--preview _dialog_body" wak');
    return str;
}

function markUp(){
	for(var i = 0; typeof document.getElementsByClassName('_im_log_body')[i] != 'undefined'; i++){
        var string = document.getElementsByClassName('_im_log_body')[i].innerHTML;
        if (string.indexOf('wak') == -1){
            document.getElementsByClassName('_im_log_body')[i].innerHTML = repl(string);
        }
    }
    for(var i2 = 0; typeof document.getElementsByClassName('nim-dialog--text-preview')[i2] != 'undefined'; i2++){
        var string2 = document.getElementsByClassName('nim-dialog--text-preview')[i2].innerHTML;
        if (string2.indexOf('wak') == -1){
            document.getElementsByClassName('nim-dialog--text-preview')[i2].innerHTML = repl(string2);
        }
	}
}

var html_doc = document.getElementsByTagName('head').item(0);
var css = document.createElement('style');
html_doc.appendChild(css);
var timer = setInterval(markUp, 4200);