// ==UserScript==
// @name         辣TV视频下载
// @namespace    http://weibo.com/liangxiafengge
// @version      0.3
// @description  下载辣TV（http://v.jxntv.cn/*，江西网络电视台的视频站）上的视频
// @author       凉夏风歌
// @match        http://v.jxntv.cn/*
// @icon         data:image/jpg;base64,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
// @run-at 		 document-end
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/13941/%E8%BE%A3TV%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD.user.js
// @updateURL https://update.greasyfork.org/scripts/13941/%E8%BE%A3TV%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD.meta.js
// ==/UserScript==
/* jshint -W097 */
'use strict';

//获取信息
var playerArea   = document.getElementById("video_sobey");
var videoInfo    = json.video[0].vodAddress;
//建立下载链接
var downIco      = document.createElement('div');
var downIcoResource = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAPCAQAAACYNP27AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAfQAAAH0AMQEOAcAAACSSURBVBjTnc89DkFhFITh5/N3FZRI2IRCpbAHjRAShVVQSKxDbEJsQ6lWECIWoOIq5HJFZ6ozb2YyOSRq2mklJvPGWWXZX0z8OdPY/zioK6ZIpCFkVCzNRB6IFUyt1MgbO1lo2+uYO5vIQzB0sHaycTT+7AV9F7GrkZCeDnq2Bt/wpWo61ZV7P59k78FR6ad3ewKE7BoY6d7bzQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0wOC0wMlQyMjo0OTozOSswODowMKys05gAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTUtMDgtMDJUMjI6NDk6MzkrMDg6MDDd8WskAAAATnRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA2LjguOC0xMCBRMTYgeDg2XzY0IDIwMTUtMDctMTkgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmcFDJw1AAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxNzbZs5jCAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADEyN0AyDEwAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTQzODUyNjk3OaezloIAAAARdEVYdFRodW1iOjpTaXplADk4OUJCediPFQAAAFp0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2hvbWUvd3d3cm9vdC93d3cuZWFzeWljb24ubmV0L2Nkbi1pbWcuZWFzeWljb24uY24vc3JjLzExOTA3LzExOTA3NzYucG5nsUsk2QAAAABJRU5ErkJggg==';
downIco.innerHTML='<a href=' + videoInfo.host + videoInfo.clips[0].urls[0] + ' download=' + videoInfo.title + '><button>' +  '<img src=' + downIcoResource + '></img>下载此视频</button></a><font color=\'red\'>(chrome用户请右键选择“另存为”可自动命名)</font><br>';
prependChild(playerArea,downIco);



//在指定节点前插入
function prependChild(parent,newChild){
	    if(parent.firstChild){
	        parent.insertBefore(newChild,parent.firstChild);
	    } else {
	        parent.appendChild(newChild);
	    }
	    return parent;
}