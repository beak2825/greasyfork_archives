// ==UserScript==
// @name         Symfony 翻译文档 configuration/secrets.html
// @namespace    fireloong
// @version      0.1.1
// @description  翻译文档 configuration/secrets.html
// @author       Itsky71
// @match        https://symfony.com/doc/5.x/configuration/secrets.html
// @match        https://symfony.com/doc/6.4/configuration/secrets.html
// @match        https://symfony.com/doc/7.1/configuration/secrets.html
// @match        https://symfony.com/doc/7.2/configuration/secrets.html
// @match        https://symfony.com/doc/current/configuration/secrets.html
// @icon         https://www.google.com/s2/favicons?sz=64&domain=symfony.com
// @require      https://unpkg.com/jquery@3.7.1/dist/jquery.min.js
// @require      https://update.greasyfork.org/scripts/503008/fanyi.js
// @grant        none
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/506267/Symfony%20%E7%BF%BB%E8%AF%91%E6%96%87%E6%A1%A3%20configurationsecretshtml.user.js
// @updateURL https://update.greasyfork.org/scripts/506267/Symfony%20%E7%BF%BB%E8%AF%91%E6%96%87%E6%A1%A3%20configurationsecretshtml.meta.js
// ==/UserScript==

(function($) {
    'use strict';

    const translates = {
        '\n        \n                    How to Keep Sensitive Information Secret\n        \n            ': '如何保持敏感信息的秘密性',
        'Environment variables are the best way to store configuration\nthat depends on where the application is run - for example, some API key that\nmight be set to one value while developing locally and another value on production.': '<a href="../configuration.html#config-env-vars" class="reference internal">环境变量</a>是存储依赖于应用程序运行位置的配置的最佳方式——例如，某些 API 密钥在本地开发时可能设置为一个值，在生产环境上则设置为另一个值。',
        'When these values are sensitive and need to be kept private, you can safely\nstore them by using Symfony\'s secrets management system - sometimes called a\n"vault".': '当这些值很敏感且需要保密时，你可以通过使用 Symfony 的密钥管理系统（有时称为“保险库”）来安全地存储它们。',
        'The Secrets system requires the Sodium PHP extension.': '密钥系统需要 Sodium PHP 扩展。',
        'Generate Cryptographic Keys': '生成加密密钥',
        'In order to encrypt and decrypt secrets, Symfony needs cryptographic keys.\nA pair of keys can be generated by running:': '为了加密和解密<strong>机密</strong>，Symfony 需要<strong>加密密钥</strong>。可以通过运行以下命令来生成一对密钥：',
        'This will generate a pair of asymmetric cryptographic keys. Each\nenvironment has its own set of keys. Assuming\nyou\'re coding locally in the dev environment, this will create:': '这将生成一对非对称<strong>加密密钥</strong>。每个<a href="../configuration.html#configuration-environments" class="reference internal">环境</a>都有自己的密钥集。假设你在 <code translate="no" class="notranslate">dev</code> 环境下本地编码，这将创建：',
        '\n                            Used to encrypt/add secrets to the vault. Can be safely committed.\n                    ': '用于加密/向保险库添加密钥。可以安全地提交。',
        '\n                            Used to decrypt/read secrets from the vault. The dev decryption key can\nbe committed (assuming no highly-sensitive secrets are stored in the dev vault)\nbut the prod decryption key should never be committed.\n                    ': '用于从保险库中解密/读取密钥。<code translate="no" class="notranslate">dev</code> 解密密钥可以提交（假设在开发保险库中没有存储高度敏感的密钥），但 <code translate="no" class="notranslate">prod</code> 解密密钥绝不能提交。',
        'You can generate a pair of cryptographic keys for the prod environment by\nrunning:': '你可以通过运行以下命令来为 <code translate="no" class="notranslate">prod</code> 环境生成一对加密密钥：',
        'This will generate config/secrets/prod/prod.encrypt.public.php and\nconfig/secrets/prod/prod.decrypt.private.php.': '这将生成 <code translate="no" class="notranslate">config/secrets/prod/prod.encrypt.public.php</code> 和 <code translate="no" class="notranslate">config/secrets/prod/prod.decrypt.private.php</code>。',
        'The prod.decrypt.private.php file is highly sensitive. Your team of developers\nand even Continuous Integration services don\'t need that key. If the\ndecryption key has been exposed (ex-employee leaving for instance), you\nshould consider generating a new one by running:\nsecrets:generate-keys --rotate.': '<code translate="no" class="notranslate">prod.decrypt.private.php</code> 文件非常敏感。你的开发团队甚至持续集成服务都不需要这个密钥。如果<strong>解密密钥</strong>被泄露（例如，前员工离职），你应该考虑通过运行 <code translate="no" class="notranslate">secrets:generate-keys --rotate</code> 来生成一个新的密钥。',
        'Create or Update Secrets': '创建或更新密钥',
        'Suppose you want to store your database password as a secret. By using the\nsecrets:set command, you should add this secret to both the dev and\nprod vaults:': '假设你想将数据库密码作为密钥存储。通过使用 <code translate="no" class="notranslate">secrets:set</code> 命令，你应该将这个密钥同时添加到 <code translate="no" class="notranslate">dev</code> 和 <code translate="no" class="notranslate">prod</code> 保险库中：',
        'This will create a new file for the secret in config/secrets/dev and another\nin config/secrets/prod. You can also set the secret in a few other ways:': '这将在 <code translate="no" class="notranslate">config/secrets/dev</code> 中为该密钥创建一个新文件，在 <code translate="no" class="notranslate">config/secrets/prod</code> 中创建另一个文件。你也可以通过其它几种方式来设置密钥：',
        'There\'s no command to rename secrets, so you\'ll need to create a new secret\nand remove the old one.': '没有命令可以直接重命名密钥，因此你需要创建一个新的密钥并移除旧的密钥。',
        'Referencing Secrets in Configuration Files': '在配置文件中引用密钥',
        'Secret values can be referenced in the same way as\nenvironment variables. Be careful that you don\'t\naccidentally define a secret and an environment variable with the same name:\nenvironment variables override secrets.': '密钥值可以像<a href="../configuration.html#config-env-vars" class="reference internal">环境变量</a>一样被引用。需要注意的是，不要意外地定义了一个与环境变量同名的密钥：<strong>环境变量会覆盖密钥</strong>。',
        'If you stored a DATABASE_PASSWORD secret, you can reference it by:': '如果你存储了一个 <code translate="no" class="notranslate">DATABASE_PASSWORD</code> 密钥，你可以通过以下方式引用它：',
        'The actual value will be resolved at runtime: container compilation and cache\nwarmup don\'t need the decryption key.': '实际的值将在运行时解析：容器编译和缓存预热不需要<strong>解密密钥</strong>。',
        'List Existing Secrets': '列出现有密钥',
        'Everybody is allowed to list the secrets names with the command\nsecrets:list. If you have the decryption key you can also reveal the\nsecrets\' values by passing the --reveal option:': '任何人都可以使用 <code translate="no" class="notranslate">secrets:list</code> 命令列出密钥的名称。如果你拥有<strong>解密密钥</strong>，还可以通过传递 <code translate="no" class="notranslate">--reveal</code> 选项来显示密钥的值：',
        'Remove Secrets': '删除密钥',
        'Symfony provides a convenient command to remove a Secret:': 'Symfony 提供了一个方便的命令来删除 Secret：',
        'Local secrets: Overriding Secrets Locally': '本地密钥：在本地覆盖密钥',
        'The dev environment secrets should contain nice default values for development.\nBut sometimes a developer still needs to override a secret value locally when\ndeveloping.': '<code translate="no" class="notranslate">dev</code> 环境中的密钥应该包含适用于开发的默认值。但在开发过程中，有时开发者仍然需要在本地覆盖某个密钥的值。',
        'Most of the secrets commands - including secrets:set - have a --local\noption that stores the "secret" in the .env.{env}.local file as a standard\nenvironment variable. To override the DATABASE_PASSWORD secret locally, run:': '大多数 <code translate="no" class="notranslate">secrets</code> 命令（包括 <code translate="no" class="notranslate">secrets:set</code>）都有一个 <code translate="no" class="notranslate">--local</code> 选项，该选项会将“secret”以标准环境变量的形式存储在 <code translate="no" class="notranslate">.env.{env}.local</code> 文件中。要在本地覆盖 <code translate="no" class="notranslate">DATABASE_PASSWORD</code> 密钥，可以运行以下命令：',
        'If you entered root, you will now see this in your .env.dev.local file:': '如果你输入了 <code translate="no" class="notranslate">root</code>，你现在会在你的 <code translate="no" class="notranslate">.env.dev.local</code> 文件中看到如下内容：',
        'This will override the DATABASE_PASSWORD secret because environment variables\nalways take precedence over secrets.': '这将覆盖 <code translate="no" class="notranslate">DATABASE_PASSWORD</code> 密钥，因为环境变量始终优先于密钥。',
        'Listing the secrets will now also display the local variable:': '现在列出密钥时也会显示本地变量：',
        'Symfony also provides the secrets:decrypt-to-local command which decrypts\nall secrets and stores them in the local vault and the secrets:encrypt-from-local\ncommand to encrypt all local secrets to the vault.': 'Symfony 还提供了 <code translate="no" class="notranslate">secrets:decrypt-to-local</code> 命令，该命令可以解密所有密钥并将它们存储在本地保险库中，以及 <code translate="no" class="notranslate">secrets:encrypt-from-local</code> 命令，用于将所有本地密钥加密并存储到保险库中。',
        'Secrets in the test Environment': '测试环境中的密钥',
        'If you add a secret in the dev and prod environments, it will be missing\nfrom the test environment. You could create a "vault" for the test\nenvironment and define the secrets there. But an easier way is to set the test\nvalues via the .env.test file:': '如果你在 <code translate="no" class="notranslate">dev</code> 和 <code translate="no" class="notranslate">prod</code> 环境中添加了一个密钥，那么在 <code translate="no" class="notranslate">test</code> 环境中就会缺失这个密钥。你可以为  <code translate="no" class="notranslate">test</code> 环境创建一个“保险库”并在其中定义密钥。但更简单的方法是通过 <code translate="no" class="notranslate">.env.test</code> 文件来设置测试值：',
        'Deploy Secrets to Production': '将密钥部署到生产环境',
        'Due to the fact that decryption keys should never be committed, you will need to\nmanually store this file somewhere and deploy it. There are 2 ways to do that:': '由于解密密钥绝不能提交，你需要手动将这个文件存储在某个地方并进行部署。有两种方法可以实现这一点：',
        'Uploading the file': '上传文件',
        'The first option is to copy the production decryption key -\nconfig/secrets/prod/prod.decrypt.private.php to your server.': '第一种方法是将<strong>生产环境的解密密钥</strong> <code translate="no" class="notranslate">config/secrets/prod/prod.decrypt.private.php</code> 复制到你的服务器。',
        'Using an Environment Variable': '使用环境变量',
        'The second way is to set the SYMFONY_DECRYPTION_SECRET environment variable\nto the base64 encoded value of the production decryption key. A fancy way to\nfetch the value of the key is:': '第二种方法是将 <code translate="no" class="notranslate">SYMFONY_DECRYPTION_SECRET</code> 环境变量设置为<strong>生产环境解密密钥</strong>的 base64 编码值。一种获取密钥值的优雅方法是：',
        'To improve performance (i.e. avoid decrypting secrets at runtime), you can decrypt\nyour secrets during deployment to the "local" vault:': '为了提高性能（即避免在运行时解密密钥），你可以在部署期间将密钥解密到“本地”保险库中：',
        'This will write all the decrypted secrets into the .env.prod.local file.\nAfter doing this, the decryption key does not need to remain on the server(s).': '这将会把所有解密后的密钥写入 <code translate="no" class="notranslate">.env.prod.local</code> 文件。这样做之后，解密密钥就不需要保留在服务器上了。',
        'Rotating Secrets': '轮换密钥',
        'The secrets:generate-keys command provides a --rotate option to\nregenerate the cryptographic keys. Symfony will decrypt existing secrets with\nthe old key, generate new cryptographic keys and re-encrypt secrets with the\nnew key. In order to decrypt previous secrets, the developer must have the\ndecryption key.': '<code translate="no" class="notranslate">secrets:generate-keys</code> 命令提供了一个 <code translate="no" class="notranslate">--rotate</code> 选项来重新生成<strong>加密密钥</strong>。Symfony 会使用旧密钥解密现有的密钥，生成新的<strong>加密密钥</strong>，并使用新密钥重新加密密钥。为了解密之前的密钥，开发者必须拥有<strong>解密密钥</strong>。',
        'Configuration': '配置',
        'The secrets system is enabled by default and some of its behavior can be configured:': '密钥系统默认是启用的，其部分行为可以进行配置：',
    };

    fanyi(translates, 1);
})($);
