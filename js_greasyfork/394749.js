// ==UserScript==
// @name        BigFuzzyNugz Tinychat Script 4.20
// @version     4.20
// @description Modified TinyChat - Best Script made by CosmosisT and Edited by BigFuzzyNugz; prepare to be amazed.
// @author      BigFuzzyNugz
// @url         https://greasyfork.org/en/scripts/394749-bigfuzzynugz-tinychat-script-4-20
// @license     Copyright (C) 2020 BigFuzzyNugz
//              This program is free software: you can redistribute it and/or modify
//              it under the terms of the GNU General Public License as published by
//              the Free Software Foundation, either version 3 of the License, or
//              (at your option) any later version.
//
//              This program is distributed in the hope that it will be useful,
//              but WITHOUT ANY WARRANTY; without even the implied warranty of
//              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//              GNU General Public License for more details.
//
//              You should have received a copy of the GNU General Public License
//              along with this program.  If not, see <https://www.gnu.org/licenses/>
// @icon        https://tinychat.com/webrtc/2.0.0-81/images/favicon.png
// @match       https://tinychat.com/*
// @namespace   https://greasyfork.org/users/432944
// @grant       none
// @downloadURL https://update.greasyfork.org/scripts/394749/BigFuzzyNugz%20Tinychat%20Script%20420.user.js
// @updateURL https://update.greasyfork.org/scripts/394749/BigFuzzyNugz%20Tinychat%20Script%20420.meta.js
// ==/UserScript==
(function(){
    "use strict";
    let CTS={DebugClear:true,Version:"1.3.4",ScriptInit:false,MainBackground:"https://i.imgur.com/8M0NPCv.png",MainBackgroundColorCounter:0,FontSize:20,ChatStyleCounter:0,MainBackgroundCounter:0,ChatLimit:950,NotificationLimit:50,ChatHeight:30,ChatWidth:0,ChatDisplay:true,UserListDisplay:true,Featured:true,ChatScroll:true,NotificationScroll:true,HostAttempt:0,Host:0,UserYT:false,YouTubePlaying:false,xhr:new XMLHttpRequest(),MentionList:[],IgnoreList:[],BanList:[],KickList:[],BanKeywordList:[],KickKeywordList:[],HighlightList:[],GreetList:[],Me:[],UserList:[],ChatCSS:[],NotificationTimeOut:[],MessageCallback:[],Message:[],MissedMsg:0,ActiveMessage:0,Sound:{highlight:new Audio("https://media.vocaroo.com/mp3/mjS6tza4Tu4"),mention:new Audio("https://media.vocaroo.com/mp3/gsrjQNCdhlX")}},MainElement,ChatLogElement,VideoListElement,SideMenuElement,TitleElement,UserListElement,ModerationListElement,ChatListElement,UserContextElement;
    CTS.Message[0]=[];
    // CTS Load/Save
    const __GM_STORAGE_PREFIX=["","","CTSDB1.0",""].join("***");
    if(!Load("MainBackground"))Save("MainBackground","url(https://i.imgur.com/8M0NPCv.png)");CTS.MainBackground=Load("MainBackground");if(!Load("ChatStyle"))Save("ChatStyle",0);CTS.ChatStyleCounter=JSON.parse(Load("ChatStyle"));if(!Load("FontSize"))Save("FontSize",20);CTS.FontSize=JSON.parse(Load("FontSize"));if(!Load("MentionList"))Save("MentionList",JSON.stringify([]));CTS.MentionList=JSON.parse(Load("MentionList"));if(!Load("IgnoreList"))Save("IgnoreList",JSON.stringify([]));CTS.IgnoreList=JSON.parse(Load("IgnoreList"));if(!Load("KickList"))Save("KickList",JSON.stringify([]));CTS.KickList=JSON.parse(Load("KickList"));if(!Load("BanList"))Save("BanList",JSON.stringify([]));CTS.BanList=JSON.parse(Load("BanList"));if(!Load("KickKeywordList"))Save("KickKeywordList",JSON.stringify([]));CTS.KickKeywordList=JSON.parse(Load("KickKeywordList"));if(!Load("BanKeywordList"))Save("BanKeywordList",JSON.stringify([]));CTS.BanKeywordList=JSON.parse(Load("BanKeywordList"));if(!Load("HighlightList"))Save("HighlightList",JSON.stringify([]));CTS.HighlightList=JSON.parse(Load("HighlightList"));if(!Load("GreetList"))Save("GreetList",JSON.stringify([]));CTS.GreetList=JSON.parse(Load("GreetList"));if(!Load("UserYT"))Save("UserYT",JSON.stringify([]));CTS.UserYT=JSON.parse(Load("UserYT"));
    // CTS Styles
    const NameColor=["#3f69c0","#b63fc0","#001f3f","#0074D9","#7FDBFF","#39CCCC","#3D9970","#26a635","#00b34d","#e6c700","#FF851B","#FF4136","#c81e70","#f00fbb","#B10DC9","#111111","#AAAAAA","#cc6600","#009933","#003366","#660033","#804000"];
    const Colors=["#CD5C5C","#F08080","#FA8072","#E9967A","#DC143C","#FF0000","#B22222","#8B0000","#000000","#FFFFFF","#FFC0CB","#FFB6C1","#FF69B4","#FF1493","#C71585","#DB7093","#000000","#FFFFFF","#FFA07A","#FF7F50","#FF6347","#FF4500","#FF8C00","#FFA500","#000000","#FFFFFF","#FFD700","#FFFF00","#FFFFE0","#FFFACD","#FAFAD2","#FFEFD5","#FFE4B5","#FFDAB9","#EEE8AA","#F0E68C","#BDB76B","#000000","#FFFFFF","#E6E6FA","#D8BFD8","#DDA0DD","#EE82EE","#DA70D6","#FF00FF","#BA55D3","#9370DB","#9966CC","#8A2BE2","#9400D3","#9932CC","#8B008B","#800080","#4B0082","#6A5ACD","#483D8B","#7B68EE","#000000","#FFFFFF","#ADFF2F","#7FFF00","#7CFC00","#00FF00","#32CD32","#98FB98","#90EE90","#00FA9A","#00FF7F","#3CB371","#2E8B57","#228B22","#008000","#006400","#9ACD32","#6B8E23","#808000","#556B2F","#66CDAA","#8FBC8F","#20B2AA","#008B8B","#008080","#000000","#FFFFFF","#00FFFF","#E0FFFF","#AFEEEE","#7FFFD4","#40E0D0","#48D1CC","#00CED1","#5F9EA0","#4682B4","#B0C4DE","#B0E0E6","#ADD8E6","#87CEEB","#87CEFA","#00BFFF","#1E90FF","#6495ED","#4169E1","#0000FF","#0000CD","#00008B","#000080","#191970","#000000","#FFFFFF","#FFF8DC","#FFEBCD","#FFE4C4","#FFDEAD","#F5DEB3","#DEB887","#D2B48C","#BC8F8F","#F4A460","#DAA520","#B8860B","#CD853F","#D2691E","#8B4513","#A0522D","#A52A2A","#800000","#000000","#FFFFFF","#FFFFFF","#FFFAFA","#F0FFF0","#F5FFFA","#F0FFFF","#F0F8FF","#F8F8FF","#F5F5F5","#FFF5EE","#F5F5DC","#FDF5E6","#FFFAF0","#FFFFF0","#FAEBD7","#FAF0E6","#FFF0F5","#FFE4E1","#000000","#FFFFFF","#DCDCDC","#D3D3D3","#C0C0C0","#A9A9A9","#808080","#696969","#778899","#708090","#2F4F4F","#000000","#FFFFFF"];
    const Images=["","https://i.imgur.com/8M0NPCv.png","https://i.imgur.com/6IAL4aM.png","https://i.imgur.com/QdOTqIR.jpg","https://i.imgur.com/qqFsein.jpg","https://i.imgur.com/vVD5pUb.jpg","https://i.imgur.com/Sux2Age.jpg","https://i.imgur.com/cIKznlf.jpg","https://i.imgur.com/iEMP5I6.jpg","https://i.imgur.com/rEGy1tK.jpg","https://i.imgur.com/JR6Ped5.jpg","https://i.imgur.com/m3dX7yn.jpg","https://i.imgur.com/2cJqV1K.jpg","https://i.imgur.com/QL1M4yG.jpg","https://i.imgur.com/Syy1mUU.jpg","https://i.imgur.com/sRpDOp3.jpg","https://i.imgur.com/Im7dWdM.jpg","https://i.imgur.com/9uCdYyq.png","https://i.imgur.com/X9Kp6ka.jpg","https://i.imgur.com/TOZTx1M.jpg","https://i.imgur.com/wcjxVjk.png","https://i.imgur.com/UZfmih9.png","https://i.imgur.com/mkauZUT.jpg","https://i.imgur.com/GfPqv7d.jpg","https://i.imgur.com/R7AOtjV.jpg","https://i.imgur.com/Qso6n8k.jpg","https://i.imgur.com/vVfj23z.jpg","https://i.imgur.com/BYPsShX.jpg","https://i.imgur.com/1EWYBQw.jpg","https://i.imgur.com/Oaq0eip.jpg","https://i.imgur.com/HVHaJ1r.jpg","https://i.imgur.com/SImcSc2.png","https://i.imgur.com/CgRDCdy.jpg","https://i.imgur.com/VMtXsES.png","https://i.imgur.com/oxHz9un.jpg","https://i.imgur.com/VN6x9QA.jpg","https://i.imgur.com/9KhjWvW.jpg","https://i.imgur.com/fu0eiv4.jpg","https://i.imgur.com/QgcvxZf.jpg","https://i.imgur.com/2kz8Roz.jpg","https://i.imgur.com/A2AdQd8.jpg","https://i.imgur.com/zuNUJ4J.jpg","https://i.imgur.com/CW4mVWE.jpg","https://i.imgur.com/0NGecGX.jpg","https://i.imgur.com/4IEcVlr.jpg","https://i.imgur.com/JDnQzF4.jpg","https://i.imgur.com/Ye6iIrw.jpg","https://i.imgur.com/DVlwQFN.jpg","https://i.imgur.com/G6Oa9s6.jpg","https://i.imgur.com/cXpEHvX.jpg","https://i.imgur.com/ANXRz54.jpg","https://i.imgur.com/i7KvpAf.jpg","https://i.imgur.com/kJ44IQQ.jpg","https://i.imgur.com/5ONal5c.jpg","https://i.imgur.com/nWuC5FK.jpg","https://i.imgur.com/ZYNsEN6.jpg","https://i.imgur.com/C3aVnBq.jpg","https://i.imgur.com/8Kts9t7.jpg","https://i.imgur.com/QiaDx3C.jpg","https://i.imgur.com/wrt6zBN.jpg","https://i.imgur.com/3YgGoV0.jpg","https://i.imgur.com/HPsbhiF.jpg","https://i.imgur.com/X4wSs8f.jpg","https://i.imgur.com/cqeMox0.jpg","https://i.imgur.com/apNgmSO.jpg","https://i.imgur.com/YjYcyCn.jpg","https://i.imgur.com/2hUFTDv.png","https://i.imgur.com/7lDQKff.jpg","https://i.imgur.com/yuQTkOy.png","https://i.imgur.com/7zvCOpV.jpg","https://i.imgur.com/L5v6bcs.jpg","https://i.imgur.com/5h3N2HY.jpg","https://i.imgur.com/AvhrIcv.jpg","https://i.imgur.com/DsAMAG1.jpg","https://i.imgur.com/dDvOwXi.jpg","https://i.imgur.com/ii00Lnl.jpg",
                  "https://i.imgur.com/vHDQY7N.jpg","https://i.imgur.com/czfeyXQ.jpg","https://i.imgur.com/pHEAee2.jpg","https://i.imgur.com/txu4z7B.jpg","https://i.imgur.com/NOapG69.jpg","https://i.imgur.com/cxA4ist.jpg","https://i.imgur.com/2keIszu.jpg","https://i.imgur.com/q2Kpinf.jpg","https://i.imgur.com/nDiFD2D.jpg","https://i.imgur.com/Lvk0Lql.jpg","https://i.imgur.com/QcRIeBr.jpg","https://i.imgur.com/GlBONNB.jpg","https://i.imgur.com/jVmJ9Iz.jpg","https://i.imgur.com/9h2N288.png","https://i.imgur.com/q0Rm3dS.jpg","https://i.imgur.com/1tTKfKM.png","https://i.imgur.com/nEwJBan.jpg","https://i.imgur.com/NgE4lXY.jpg","https://i.imgur.com/I4Pv5Zc.jpg","https://i.imgur.com/QVDBSEm.jpg","https://i.imgur.com/N9KfkgT.jpg","https://i.imgur.com/mLIDP8a.jpg","https://i.imgur.com/C8fAtMn.jpg","https://i.imgur.com/e2Pubr3.jpg","https://i.imgur.com/6drF4lG.jpg","https://i.imgur.com/JcFhmPT.jpg","https://i.imgur.com/wQQlX06.jpg","https://i.imgur.com/qPTFnVp.jpg","https://i.imgur.com/KWto7ab.jpg","https://i.imgur.com/DHEdXnE.jpg","https://i.imgur.com/49vqbrB.jpg","https://i.imgur.com/TK4I9DI.jpg","https://i.imgur.com/o5QNrcQ.jpg","https://i.imgur.com/49adw4l.jpg","https://i.imgur.com/vyYOZkE.jpg","https://i.imgur.com/sBaXCoY.jpg","https://i.imgur.com/dH0M8aN.png","https://i.imgur.com/aqZ4VDh.jpg","https://i.imgur.com/hMpMR84.jpg","https://i.imgur.com/5zR2i8W.jpg","https://i.imgur.com/oUPXbGf.jpg","https://i.imgur.com/YW5tv1t.jpg","https://i.imgur.com/JgKwHXs.jpg","https://i.imgur.com/2k9JihV.jpg","https://i.imgur.com/V5MUGj4.jpg","https://i.imgur.com/3dUgoAf.jpg","https://i.imgur.com/Q6aJgBM.jpg","https://i.imgur.com/gRSmljE.jpg","https://i.imgur.com/nkhsbE9.jpg","https://i.imgur.com/I6LMqZq.jpg","https://i.imgur.com/7OzdeRk.jpg","https://i.imgur.com/wW94Pvc.jpg","https://i.imgur.com/jQrTdv2.jpg","https://i.imgur.com/UDgQ2Fh.jpg","https://i.imgur.com/qjdMmPf.jpg","https://i.imgur.com/yh7QoUN.jpg","https://i.imgur.com/XchwuKo.jpg","https://i.imgur.com/fdPaQbz.jpg","https://i.imgur.com/zNfKy8I.jpg","https://i.imgur.com/TaOf7dX.jpg","https://i.imgur.com/bZxfyu8.jpg","https://i.imgur.com/ccZRfsA.jpg","https://i.imgur.com/wlbmT74.jpg","https://i.imgur.com/29ffHeU.jpg","https://i.imgur.com/30HbBAA.jpg","https://i.imgur.com/4pO8b0B.jpg","https://i.imgur.com/kD6BveQ.jpg","https://i.imgur.com/LrCsiQj.jpg","https://i.imgur.com/QN5NcXK.jpg","https://i.imgur.com/MWW5cOv.jpg","https://i.imgur.com/7LvskAH.jpg","https://i.imgur.com/S7kLNct.jpg","https://i.imgur.com/rL0olge.jpg","https://i.imgur.com/0Apm59C.jpg","https://i.imgur.com/ZMRBVvO.jpg",
                  "https://i.imgur.com/xFNZTwS.jpg","https://i.imgur.com/iqq8ECW.jpg","https://i.imgur.com/xEth2qp.jpg","https://i.imgur.com/8ijIZMj.jpg","https://i.imgur.com/zSB1DOw.jpg","https://i.imgur.com/6TzjZSd.jpg","https://i.imgur.com/Gf9yAwP.jpg","https://i.imgur.com/u5ifVZy.jpg","https://i.imgur.com/4ibO4FN.jpg","https://i.imgur.com/bDCygo7.jpg","https://i.imgur.com/lqktMar.jpg","https://i.imgur.com/b2jAXiC.jpg","https://i.imgur.com/oPE32ni.jpg","https://i.imgur.com/YRjfPjP.jpg","https://i.imgur.com/1FRwNEb.jpg","https://i.imgur.com/dzgvlEx.jpg","https://i.imgur.com/3FCAMiu.jpg","https://i.imgur.com/wF5k6Ux.jpg","https://i.imgur.com/mkuNYYa.jpg","https://i.imgur.com/Y2Yu3yA.jpg","https://i.imgur.com/Zchlast.jpg","https://i.imgur.com/2FbH2jq.jpg","https://i.imgur.com/Bb4iyy0.jpg","https://i.imgur.com/7rjAtTt.jpg","https://i.imgur.com/g1rNC8Z.jpg","https://i.imgur.com/RC3bKe7.jpg","https://i.imgur.com/qloc683.jpg","https://i.imgur.com/irmzqz7.jpg","https://i.imgur.com/pvmhbwL.jpg","https://i.imgur.com/Xti1aEf.jpg","https://i.imgur.com/FqFYows.jpg","https://i.imgur.com/92zz2Zu.jpg","https://i.imgur.com/jWrqBga.jpg","https://i.imgur.com/OMSQsDe.jpg","https://i.imgur.com/bvTtaLQ.jpg","https://i.imgur.com/vxt6B7Y.jpg","https://i.imgur.com/siw7Ipn.jpg","https://i.imgur.com/paQsmXk.jpg","https://i.imgur.com/VLHs9cT.png","https://i.imgur.com/6VSxbJY.jpg","https://i.imgur.com/C3Xn1WD.jpg","https://i.imgur.com/d6BBFfS.jpg","https://i.imgur.com/HyK1BFP.jpg","https://i.imgur.com/2InicOt.jpg","https://i.imgur.com/IVM4luE.jpg","https://i.imgur.com/VLE0zNA.jpg","https://i.imgur.com/rfgwqVI.jpg","https://i.imgur.com/GsTMYfk.jpg","https://i.imgur.com/yMEdYBN.jpg","https://i.imgur.com/LvrO8oB.jpg","https://i.imgur.com/1VBNkJP.jpg","https://i.imgur.com/beuJiKd.jpg","https://i.imgur.com/61h9Twq.jpg","https://i.imgur.com/mnszrZ3.jpg","https://i.imgur.com/He8K7kF.jpg","https://i.imgur.com/id5BSLh.jpg","https://i.imgur.com/huazhWL.jpg","https://i.imgur.com/ttc4EYq.jpg","https://i.imgur.com/HTO5tGy.jpg","https://i.imgur.com/Pg1NrT1.jpg","https://i.imgur.com/HEubZeG.jpg","https://i.imgur.com/yk4XVVu.jpg","https://i.imgur.com/Q6xqV8U.jpg","https://i.imgur.com/ROTOMPV.jpg","https://i.imgur.com/5DBP49J.jpg","https://i.imgur.com/1pafkRu.jpg","https://i.imgur.com/ZYJW79s.jpg","https://i.imgur.com/5hJnezu.jpg","https://i.imgur.com/LHRwsur.jpg","https://i.imgur.com/858hMb9.jpg","https://i.imgur.com/WOtpN81.jpg","https://i.imgur.com/ITCxNl1.jpg","https://i.imgur.com/OvXfe6w.jpg","https://i.imgur.com/EVYKONX.jpg",
                  "https://i.imgur.com/9nP4KwW.jpg","https://i.imgur.com/1SaESYp.jpg","https://i.imgur.com/xBQlQKh.jpg","https://i.imgur.com/yonFqV5.jpg","https://i.imgur.com/go0xMSw.png","https://i.imgur.com/jJhFpGw.jpg","https://i.imgur.com/fcULcZq.jpg","https://i.imgur.com/66l2lHM.jpg","https://i.imgur.com/bujMfoQ.jpg","https://i.imgur.com/JdbenHz.jpg","https://i.imgur.com/merXbme.jpg",
                  "https://i.imgur.com/ogrqxoQ.jpg","https://i.imgur.com/fCstr3I.jpg","https://i.imgur.com/t4d6ngW.jpg","https://i.imgur.com/QzTlCSw.png","https://i.imgur.com/CjrvvRI.jpg","https://i.imgur.com/Du0abK6.jpg","https://i.imgur.com/fZxRbtq.jpg","https://i.imgur.com/zJB8VZc.jpg","https://i.imgur.com/5lFG1Bf.jpg","https://i.imgur.com/hvGzGNb.png","https://i.imgur.com/UHZ8gC6.jpg","https://i.imgur.com/ZIlJIIZ.png","https://i.imgur.com/H7SjU1N.jpg","https://i.imgur.com/yxxQsmf.jpg","https://i.imgur.com/1TBkVzd.jpg","https://i.imgur.com/3WffDw4.jpg"];
    const FeaturedCSS="#videos.column>.videos-items{background:#0000003b;height:20%}#videos.column>.videos-items+.videos-items{background:none;height:80%}#videos.row>.videos-items{background:#0000003b;width:20%}#videos.row>.videos-items+.videos-items{background:none;width:80%}#videos.row.featured-2>.videos-items{width:20%}#videos.row.featured-2>.videos-items+.videos-items{width:80%}#videos.column.featured-2>.videos-items{height:20%}#videos.column.featured-2>.videos-items+.videos-items{height:80%}#videos.row.featured-3>.videos-items{width:20%}#videos.row.featured-3>.videos-items+.videos-items{width:80%}#videos.column.featured-3>.videos-items{height:20%}#videos.column.featured-3>.videos-items+.videos-items{height:80%}";
    const VideoCSS="#videolist.full-screen, #videolist.full-screen > #videos-header, #videolist.full-screen .videos-header-volume:before {background:unset;}.ctsdrop{position:fixed;display:inline-block;top:4px;right:4px;z-index:2;min-width: 46px;}.ctsdrop-content{position:absolute;top:0px;right:0px;background-color:#181d1e;min-width:46px;padding:0px;z-index:1;display:none;}.ctsdrop:hover .ctsdrop-content{display:block;}.ctsoptions:hover{background:#53b6ef}.ctsoptions{width:100%;height:28px;line-height:16px;z-index: 2;cursor: pointer;top: 4px;background-color: #0000008f;border: none;color: white;padding: 4px 8px;text-align: center;text-decoration: none;display: inline-block;font-size: 16px}#youtube{padding: unset}#grab{left: 0;background:#2d373a;border-radius: 12px;visibility: hidden;top: -36px;position: absolute;display: flex}#videos-footer-broadcast-wrapper>.video{position: fixed;display: none;width: 5%;top: 0;left: 0}#videos-footer-broadcast-wrapper.active>#videos-footer-submenu-button:hover{background-color: #1f2223!important}#videos-footer-broadcast-wrapper.active>#videos-footer-submenu-button{background-color: #2d373a!important}#videos-footer #videos-footer-youtube{border-radius: 0;}#videos-footer #videos-footer-soundcloud{border-radius: 0;}#videos-footer #videos-footer-youtube,#videos-footer #videos-footer-soundcloud{line-height: 33px;bottom: 22px;visibility: hidden;height: 36px;margin: unset;width: 120px;position: absolute;z-index: 1;left: calc(50% - 35px);}#videos-footer-push-to-talk{border-radius: unset}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{border-radius: unset;}#videos-footer-broadcast-wrapper.moderation>#videos-footer-broadcast{padding: unset}#videos-footer #videos-footer-soundcloud{left: 120px}#videos-footer:hover #videos-footer-youtube,#videos-footer:hover #videos-footer-soundcloud{visibility: visible}#videos-footer{top: calc(30% + 119px);display: none;padding: 0 0 0 12px;text-shadow: -1px 0 black,0 1px black,1px 0 black,0 -1px black;font: 800 14px sans-serif;color: #FFFFFF;left: unset;right: -70px;height: 22px;min-height: 22px;z-index: 2;width: 70px;position: absolute}#videos-footer-broadcast{border-radius: 0;z-index: 1;padding: unset!important;white-space: pre}#videos-footer-broadcast-wrapper{-webkit-box-shadow: 0 0 12px #53b6ef;-moz-box-shadow: 0 0 12px #53b6ef;box-shadow: 0 0 12px #53b6ef;z-index: 1;visibility: visible;height: 50px;min-height: 50px;width: 400px;padding: unset;right: 0px;left: unset;position: fixed;top: calc(30% + 34px)}span[title=\"Settings\"]>svg{padding:4px;height:24px;width:24px}#seek-duration{pointer-events: none;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;font: 600 20px sans-serif}#videos{bottom: 0px;left: 0px;right: 0px;top: 0px}:host,#videolist{background:unset;}.video:after{content: unset;}#videos-header-mic>svg{padding: 2px 10px;}#videos-header{-webkit-box-shadow: 0 0 12px #53b6ef;-moz-box-shadow: 0 0 12px #53b6ef;box-shadow: 0 0 12px #53b6ef;background:#181d1e;transition: none;left: unset;right: 0px;width: 400px;top: calc(30%);position: fixed;max-height: 34px;min-height: 34px;}#videos-header>span{line-height: unset;}#videos-header-sound>svg{padding: 4px}#videos-header-fullscreen > svg {padding: 7px 8px;}";
    const SideMenuCSS="#sidemenu-wider{display:none;}#sidemenu-content::-webkit-scrollbar{width:0px;background:transparent;}#sidemenu{-webkit-box-shadow: 0 0 12px #53b6ef;-moz-box-shadow: 0 0 12px #53b6ef;box-shadow: 0 0 12px #53b6ef;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;font:300 20px sans-serif;left:unset!important;right:0px!important;padding-bottom:0px;height:30%!important;min-width:400px!important;max-width:400px!important;}#sidemenu-content{scrollbar-width:none;padding-top:unset;min-height:calc(100% - 50px)!important;max-height:calc(100% - 50px)!important;}";
    const MainCSS="body{background:"+CTS.MainBackground+" no-repeat center;background-size:cover;overflow:hidden;}#content{width:calc(100% - 400px);padding:0!important;}";
    const RoomCSS="tc-title{display:flex!important;}#room{padding:0px!important;}#room-content{background:unset!important;}";
    const TitleCSS="#room-header{border:unset;z-index:1;min-height:36px!important;max-height:36px!important;min-width:400px!important;max-width:400px!important;top:calc(30% + 84px);right:0px;position:fixed;background-color:#53b6ef4d;-webkit-box-shadow: 0 0 12px #53b6ef;-moz-box-shadow: 0 0 12px #53b6ef;box-shadow: 0 0 12px #53b6ef;}#room-header-info>h1{text-transform:uppercase;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;font:600 20px sans-serif;color:#FFFFFF;}#room-header-info>h1:after{content:unset;}#room-header-info{padding:7px 0 0 6px;}#room-header-info>span{right: 8px;position: absolute;top:7px;margin-top:0px!important;}";
    const ContextMenuCSS=".context:after{content:unset;}.context>span{text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;font:800 14px sans-serif;color:#FFFFFF;display:inline-block;padding:1px 1%;line-height:17px;height:17px;}.context{background-color:#20262870;position:unset;padding:0px;}";
    const ModeratorCSS="#moderatorlist:after{right:5px;color:#FFFFFF;background:#53b6ef;}#moderatorlist>#header>span>button>svg path{fill:#FFFFFF;}#moderatorlist>#header>span>button{top:-2px;background-color: #20262870;}#moderatorlist.show>#header>span>button>svg path{fill:#FFFFFF;}#moderatorlist{max-height:60px;}#moderatorlist>#header{height:60px;font-size:16px;font-weight:600;font-family:sans-serif;color:#FFFFFF;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;}#moderatorlist.show[data-videos-count=\"1\"], #moderatorlist.show[data-videos-count=\"2\"] {max-height:205px;}#moderatorlist.show[data-videos-count=\"3\"], #moderatorlist.show[data-videos-count=\"4\"] {max-height:290px;}#moderatorlist.show[data-videos-count=\"5\"], #moderatorlist.show[data-videos-count=\"6\"] {max-height:400px;}#moderatorlist.show[data-videos-count=\"7\"], #moderatorlist.show[data-videos-count=\"8\"] {max-height:460px;}#moderatorlist.show[data-videos-count=\"9\"], #moderatorlist.show[data-videos-count=\"10\"] {max-height:545px;}#moderatorlist.show[data-videos-count=\"11\"], #moderatorlist.show[data-videos-count=\"12\"] {max-height:630px;}";
    const UserListCSS=".list-item>span>span[data-cam=\"1\"]:after{height:15px;width:15px;background-image:url(https://i.imgur.com/QKSbq8d.png);}.list-item>span>span[data-moderator=\"1\"]:before{margin-right:3px;width:15px;height:15px;background-image:url(https://i.imgur.com/CEA9aro.png);}.list-item>span>span{background-color:transparent;box-shadow:none;}.list-item>span>span>.send-gift{top:4px;}.list-item>span>img{top:6px;}#button-banlist{color:#53b6ef;transition:none;top:calc(30% + 89px);right:3px;position:fixed;}.list-item>span[data-status=\"gold\"]:before,.list-item>span[data-status=\"extreme\"]:before,.list-item>span[data-status=\"pro\"]:before{top:5px;}#userlist>div{height:22px;}#userlist>div>span{color:#FFFFFF;font:bold 16px sans-serif;height:22px;line-height:22px;}#userlist>#header{height:40px;top:10px;}#contextmenu {top:calc(100% - 45px)!important;right:5px!important;left:5px!important;}";
    const ChatListCSS=".list-item>span>img{top:6px;}.list-item>span.active>span{transition:none;box-shadow:none;background-color:transparent;visibility:hidden;}.list-item>span>span{top:-4px;background:transparent;box-shadow:none;}.list-item>span>span[data-messages]:before{background:#53b6ef;}.list-item>span[data-status=\"gold\"]:before,.list-item>span[data-status=\"extreme\"]:before,.list-item>span[data-status=\"pro\"]:before{top:5px;}#chatlist>#header>.list-item>span.active{background-color:#53b6ef;}#chatlist>#header{height:60px;top:30px}#chatlist>div>span{color:#FFFFFF;font:bold 16px sans-serif;height:22px;line-height:22px;}#chatlist>div{height:22px;line-height:22px;}";
    const NotificationCSS=".PMTime{display:inline-block;padding:0 6px 0 0;margin:0px 8px 0 0;border-right:4px groove #797979;}.PMName{display:inline-block;}#popup div{user-select: text;-webkit-user-select: text;-moz-user-select: text;color:#FFFFFF;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;font-weight: 300;font-size: 18px;font-family: sans-serif;z-index:1;}.PMOverlay{height: calc(100% - 92px);overflow: hidden;pointer-events:none;position:absolute;top:17px;bottom:0;left:0;right:0;visibility:visible;}.PMPopup{pointer-events:all;margin:5px auto;width:50%;position:relative;}.PMPopup a, .PMPopup a:visited, .PMPopup a:hover, .PMPopup a:active{position:relative;transition:0.5s color ease;text-decoration:none;color:#53b6ef}.PMPopup a:hover{color:#FFFFFF;text-decoration:underline;}.PMPopup h2{border-radius:5px 5px 0px 0px;background:linear-gradient(0deg,rgb(178, 30, 30) 0%,rgba(116, 0, 0, 0.9) 52%,rgb(94, 27, 27) 100%);margin:0px;padding:5px;font-size:16px;}.PMPopup .PMContent {border-radius: 0px 0px 5px 5px;padding:5px;max-height:30%;overflow:hidden;word-break:break-all;background:#202628;}";
    const ChatboxCSS="#chat-wrapper.full-screen #chat-instant, #chatf-wrapper.full-screen #chat-instant>.avatar>.status-icon,#chat-wrapper.full-screen #chat-content>.message>.avatar>.status-icon {background-color:unset;}.cts-message-unread{display:block;border-radius:6px;padding:1px 6px 1px 6px;background:#53b6ef;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;color:#FFF;font:bold 16px sans-serif;cursor:pointer}.ctstime{-webkit-box-shadow: 0 0 6px #53b6ef;-moz-box-shadow: 0 0 6px #53b6ef;box-shadow: 0 0 6px #53b6ef;position:absolute;right:3px;top:3px;background: #53b6ef;border: 1px solid black;border-radius: 6px;padding: 1px 6px 1px 6px;}#chat-instant>.avatar>div>img,#cts-chat-content>.message>.avatar>div>img{position:relative;height:100%;left:-7px}.message{color:#FFF;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;font-family:sans-serif;font-weight:300;font-size:20px;white-space:pre-line;word-wrap:break-word}.message a, .message a:visited, .message a:hover, .message a:active{position:relative;transition:0.5s color ease;text-decoration:none;color:#53b6ef}.message a:hover{color:#FFFFFF;text-decoration:underline;}#cts-chat-content{display:flex;flex-direction:column;justify-content:flex-end;min-height:100%}#cts-chat-content>.message{background:#1316177d;position:relative;left:0;margin-bottom:3px;border-radius:6px}#cts-chat-content>.message.common.highlight{background:#3b7494;-webkit-box-shadow: 0 0 12px #ffffff;-moz-box-shadow: 0 0 12px #ffffff;box-shadow: inset 0 0 20px 0px #ffffff;}#cts-chat-content>.message.common{padding:3px 3px 3px 50px;box-sizing:border-box;text-align:left}#chat-instant>.avatar,#cts-chat-content>.message>.avatar{position:absolute;height:40px;width:40px;top:3px;left:3px;-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}#chat-instant>.avatar>div,#cts-chat-content>.message>.avatar>div{position:absolute;height:100%;width:100%;top:0;left:0;border-radius:100%;overflow:hidden}#notification-content .nickname{border-radius:6px;padding:1px 6px 1px 6px}.notification{padding:1px 0 1px 0;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black}.time{position:absolute;right:5px}#notification-content{top:0;position:relative;scrollbar-width:none;background:#181d1e;border-radius:12px;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;min-height:80px;max-height:80px;font:bold 16px sans-serif;color:#FFF;overflow-y:scroll;overflow-wrap:break-word;padding:0 6px 0 6px}#notification-content::-webkit-scrollbar{width:0;background:transparent}#cts-chat-content{display:flex;flex-direction:column;justify-content:flex-end;min-height:100%}#chat-instant>.avatar>.status-icon,#cts-chat-content>.message>.avatar>.status-icon{left:0!important}#chat-instant>.nickname{color:#53b6ef;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;font-size: 20px;font-weight: 800;}#chat-position>#chat-instant>a{display:none;}#chat-instant{padding-left:50px;background-color:transparent!important;}#chat-instant::after{background:none;}.on-white-scroll{scrollbar-width: none;}.on-white-scroll::-webkit-scrollbar{width:0;background:transparent}#cts-chat-content>.message>.nickname{-webkit-box-shadow: 0 0 6px #ffffff;-moz-box-shadow: 0 0 6px #ffffff;box-shadow: 0 0 6px #ffffff;border:1px solid black;border-radius:6px;padding:1px 6px 1px 6px;word-wrap:break-word;max-width:calc(100% - 115px);font-weight:600;font-size:16px;color:#FFF;display:inline-block;text-decoration:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#input{padding-top:0}:host,#input>.waiting{background-color:#20262870}#input:before,#input:after{content:unset}#input>textarea::placeholder{color:#FFF}#input>textarea::-webkit-input-placeholder{color:#fff}#input>textarea:-moz-placeholder{color:#fff}#input>textarea{line-height:unset;min-height:65px;max-height:65px;border-radius:6px;scrollbar-width:none;background-color:#181d1e;text-shadow:-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;color:#FFF;font-size:"+(CTS.FontSize-4)+"px;font-family:sans-serif;font-weight:300;}#chat-wrapper{border:none;transition:none;bottom:0;right:0!important;max-height:calc(70% - 119px)!important;min-height:calc(70% - 119px)!important;position:fixed!important;min-width:400px;max-width:400px;-webkit-box-shadow: 0 0 12px #53b6ef;-moz-box-shadow: 0 0 12px #53b6ef;box-shadow: 0 0 12px #53b6ef;}#chat-position{top:22px;left:6px;right:6px;bottom:5px;}.on-white-scroll::webkit-scrollbar{width:0;background:transparent;}";
    // CTS ChatStyles
    CTS.ChatCSS[0]=[];CTS.ChatCSS[1]=[];CTS.ChatCSS[2]=[];CTS.ChatCSS[3]=[];CTS.ChatCSS[4]=[];CTS.ChatCSS[5]=[];CTS.ChatCSS[6]=[];
    CTS.ChatCSS[0].push("#notification-content{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#input>textarea{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#chat-wrapper{background:linear-gradient(0deg,rgba(32,38,40,0.59)0%,rgba(16,14,14,0.76)calc(100% - 62px),rgba(45,55,58,0.72)100%);}");CTS.ChatCSS[0].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#53b6ef;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#53b6ef!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#3d89b5!important;}#videos-footer-push-to-talk{background:#53b6ef}#videos-footer-push-to-talk:hover{background:#3d89b5}#videos-footer-broadcast:hover{background:#3d89b5}#videos-footer-broadcast{background:#53b6ef;}");CTS.ChatCSS[0].push("#sidemenu{background:linear-gradient(0deg,rgb(83,182,239)0%,rgba(19,19,19,0.73)8px,rgba(0,0,0,0.34)100%);}");
    CTS.ChatCSS[1].push("#notification-content{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#input>textarea{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#chat-wrapper{background:linear-gradient(0deg,rgb(255,255,255)0%,rgba(99,99,99)calc(100% - 62px),rgba(255,255,255)100%);}");CTS.ChatCSS[1].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#53b6ef;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#53b6ef!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#3d89b5!important;}#videos-footer-push-to-talk{background:#53b6ef}#videos-footer-push-to-talk:hover{background:#3d89b5}#videos-footer-broadcast:hover{background:#3d89b5}#videos-footer-broadcast{background:#53b6ef;}");CTS.ChatCSS[1].push("#sidemenu{background:linear-gradient(0deg,rgb(83,182,239)0%,rgb(25,25,25)8px,rgb(76,76,76)100%);}");
    CTS.ChatCSS[2].push("#notification-content{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#input>textarea{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#chat-wrapper{background:linear-gradient(0deg,rgb(121,24,188)0%,rgb(36,15,45)calc(100% - 62px),rgb(121,24,188)100%)}");CTS.ChatCSS[2].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#7918bc;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#7918bc!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#460b6f!important;}#videos-footer-push-to-talk{background:#7918bc}#videos-footer-push-to-talk:hover{background:#460b6f}#videos-footer-broadcast:hover{background:#460b6f}#videos-footer-broadcast{background:#7918bc;}");CTS.ChatCSS[2].push("#sidemenu{background:linear-gradient(0deg,rgb(121,24,188)0%,rgb(13,5,15)8px,rgb(121,24,188)100%);}");
    CTS.ChatCSS[3].push("#notification-content{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#input>textarea{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#chat-wrapper{background:linear-gradient(0deg,rgb(248,5,5)0%,rgb(81,22,22)calc(100% - 62px),rgba(204,0,0)100%);}");CTS.ChatCSS[3].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#c10101;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#c10101!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#6b0f0f!important;}#videos-footer-push-to-talk{background:#c10101}#videos-footer-push-to-talk:hover{background:#6b0f0f}#videos-footer-broadcast:hover{background:#6b0f0f}#videos-footer-broadcast{background:#c10101;}");CTS.ChatCSS[3].push("#sidemenu{background:linear-gradient(0deg,rgb(193,1,1)0%,rgb(15,5,5)8px,rgb(193,1,1)100%);}");
    CTS.ChatCSS[4].push("#notification-content{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#input>textarea{-webkit-box-shadow:0 0 12px #53b6ef;-moz-box-shadow:0 0 12px #53b6ef;box-shadow:0 0 12px #53b6ef;}#chat-wrapper{background:linear-gradient(0deg,rgb(65,144,219)0%,rgb(7,69,97)calc(100% - 62px),rgb(37,179,222)100%);}");CTS.ChatCSS[4].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#53b6ef;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#53b6ef!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#3d89b5!important;}#videos-footer-push-to-talk{background:#53b6ef}#videos-footer-push-to-talk:hover{background:#3d89b5}#videos-footer-broadcast:hover{background:#3d89b5}#videos-footer-broadcast{background:#53b6ef;}");CTS.ChatCSS[4].push("#sidemenu{background:linear-gradient(0deg,rgb(83,182,239)0%,rgb(5,14,15)8px,rgb(83,182,239)100%);}");
    CTS.ChatCSS[5].push("#notification-content{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#input>textarea{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#chat-wrapper{background:linear-gradient(0deg,rgb(225,0,211)0%,rgb(44,15,45)calc(100% - 62px),rgb(208,0,176)100%);}");CTS.ChatCSS[5].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#bc01a0;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#bc01a0!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#5a004d!important;}#videos-footer-push-to-talk{background:#bc01a0}#videos-footer-push-to-talk:hover{background:#5a004d}#videos-footer-broadcast:hover{background:#5a004d}#videos-footer-broadcast{background:#bc01a0;}");CTS.ChatCSS[5].push("#sidemenu{background:linear-gradient(0deg,rgb(188,1,160)0%,rgb(15,5,14)8px,rgb(188,1,160)100%);}");
    CTS.ChatCSS[6].push("#notification-content{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#input>textarea{-webkit-box-shadow:0 0 12px #000000;-moz-box-shadow:0 0 12px #000000;box-shadow:0 0 12px #000000;}#chat-wrapper{background:linear-gradient(0deg,rgb(0,158,5)0%,rgb(5,15,5)calc(100% - 62px),rgb(13,181,0)100%);}");CTS.ChatCSS[6].push("#videos-footer-broadcast-wrapper>.waiting{background-color:#0cae00;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button{background:#0cae00!important;}#videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover{background:#054c00!important;}#videos-footer-push-to-talk{background:#0cae00}#videos-footer-push-to-talk:hover{background:#054c00}#videos-footer-broadcast:hover{background:#054c00}#videos-footer-broadcast{background:#0cae00;}");CTS.ChatCSS[6].push("#sidemenu{background:linear-gradient(0deg,rgb(0,158,5)0%,rgb(5,15,5)8px,rgb(14,104,7)100%);}");
    CTS.ChatStyles=6;
    // Run CTS
    run();
    function run(){CTS.ScriptLoading=setInterval(function(){if(document.querySelector("tinychat-webrtc-app")){if(document.querySelector("tinychat-webrtc-app").shadowRoot){InitCTS();}}},200);new MutationObserver(function(){if(document.querySelector("tinychat-webrtc-app")){this.disconnect();CTSWebSocket();}}).observe(document,{subtree:true,childList:true});}
    function InitCTS(){MainElement=document.querySelector("tinychat-webrtc-app").shadowRoot;ChatLogElement=MainElement.querySelector("tc-chatlog").shadowRoot;VideoListElement=MainElement.querySelector("tc-videolist").shadowRoot;SideMenuElement=MainElement.querySelector("tc-sidemenu").shadowRoot;TitleElement=MainElement.querySelector("tc-title").shadowRoot;UserListElement=SideMenuElement.querySelector("tc-userlist").shadowRoot;ModerationListElement=SideMenuElement.querySelector("tc-video-moderation").shadowRoot;ChatListElement=SideMenuElement.querySelector("tc-chatlist").shadowRoot;UserContextElement=UserListElement.querySelector("tc-user-contextmenu").shadowRoot;ChatLogElement.querySelector("style").insertAdjacentHTML("beforeend",ChatboxCSS);ChatLogElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][0]+"</style>");VideoListElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][1]+"</style>");SideMenuElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][2]+"</style>");document.body.querySelector("style").insertAdjacentHTML("beforeend",MainCSS);MainElement.querySelector("style").insertAdjacentHTML("beforeend",RoomCSS);VideoListElement.querySelector("style").insertAdjacentHTML("beforeend",NotificationCSS);VideoListElement.querySelector("style").insertAdjacentHTML("beforeend",VideoCSS);SideMenuElement.querySelector("style").insertAdjacentHTML("beforeend",SideMenuCSS);UserListElement.querySelector("style").insertAdjacentHTML("beforeend",UserListCSS);ChatListElement.querySelector("style").insertAdjacentHTML("beforeend",ChatListCSS);ModerationListElement.querySelector("style").insertAdjacentHTML("beforeend",ModeratorCSS);UserContextElement.querySelector("style").insertAdjacentHTML("beforeend",ContextMenuCSS);TitleElement.querySelector("style").insertAdjacentHTML("beforeend",TitleCSS);VideoListElement.querySelector("#videos-footer").insertAdjacentHTML("afterbegin","Media");VideoListElement.querySelector("#videos-header").appendChild(TitleElement.querySelector("span[title=\"Settings\"]"));VideoListElement.querySelector("#videolist").appendChild(VideoListElement.querySelector("#videos-footer-broadcast-wrapper"));VideoListElement.querySelector("#videos-content").insertAdjacentHTML("beforeend","<div id=\"popup\" class=\"PMOverlay\"></div>");VideoListElement.querySelector("#videolist").insertAdjacentHTML("afterbegin","<div class=\"ctsdrop\"><button class=\"ctsoptions\">⚙</button><div class=\"ctsdrop-content\"><button id=\"BackgroundUpdateRight\" class=\"ctsoptions\">+</button><button id=\"BackgroundUpdateColor\" class=\"ctsoptions\">BG</button><button id=\"BackgroundUpdateLeft\" class=\"ctsoptions\">-</button><div style=\"height:6px;background:#624482;\"></div><button id=\"FontSizeUpdate\" class=\"ctsoptions\">aA</button><div style=\"height:6px;background:#624482;\"></div><button id=\"ChatColor\" class=\"ctsoptions\">✎</button><button id=\"FeaturedToggled\" class=\"ctsoptions\">⛶</button><button id=\"ChatWidthToggled\" class=\"ctsoptions\">↹</button><button id=\"ChatHeightToggled\" class=\"ctsoptions\">≡</button></div></div>");ChatLogElement.querySelector("#chat-position").insertAdjacentHTML("afterbegin","<div id=\"notification-content\"></div>");ChatLogElement.querySelector("#chat").insertAdjacentHTML("beforeend","<div id=\"cts-chat-content\"></div>");ChatLogElement.querySelector("#chat").insertAdjacentHTML("afterend","<div class=\"cts-message-unread\" style=\"display:none;\">There are unread messages!</div>");clearInterval(CTS.ScriptLoading);CTS.ScriptInit=true;PrepareCTS();}
    function PrepareCTS(){Remove(ChatLogElement,"span[id=\"input-unread\"]");Remove(ChatLogElement,"#chat-content");Remove(VideoListElement,"#youtube-overlay");Remove(VideoListElement,".seek-text");Remove(ChatLogElement,"#chat-wider");Remove(SideMenuElement,"#top-buttons-wrapper");Remove(SideMenuElement,"#user-info");Remove(SideMenuElement,"#close-users");Remove(document,"#nav-static-wrapper");Remove(document,"#nav-fixed-wrapper");Remove(document,"#menu-icon");Remove(document,"#users-icon");Remove(TitleElement,"#room-header-avatar");Remove(TitleElement,"#room-header-gifts");Remove(TitleElement,"#room-header-info-text");Remove(TitleElement,"#room-header-info-details");Remove(TitleElement,"#room-header-mobile-button");Remove(TitleElement,"span[title=\"Follow\"]");Remove(TitleElement,"span[title=\"Share room\"]");Remove(ChatLogElement,"#chatlog-button");Remove(VideoListElement,"#videos-header-volume");LoadCTS();}
    function LoadCTS(){VideoListElement.querySelector("#ChatHeightToggled").addEventListener("click",function(){if(!CTS.ChatDisplay){CTS.ChatWidth+=5;CTS.ChatDisplay=true;}CTS.ChatHeight-=5;CTS.UserListDisplay=true;if(CTS.ChatHeight===20){CTS.ChatHeight=45;CTS.UserListDisplay=false;}ChatLogElement.querySelector("#chat-wrapper").style.cssText="min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);"+((CTS.UserListDisplay)?"top:unset;min-height:calc(100% - "+CTS.ChatHeight+"% - 119px)!important;max-height:calc(100% - "+CTS.ChatHeight+"% - 119px)!important;":"top:36px;min-height:calc(100% - 120px)!important;max-height: calc(100% - 120px)!important;");TitleElement.querySelector("#room-header").style.cssText="min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%)!important;top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 84px);":"0;");VideoListElement.querySelector("#videos-footer-broadcast-wrapper").style.cssText="bottom:unset;min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 34px);":"unset;bottom:0;");VideoListElement.querySelector("#videos-header").style.cssText="bottom:unset;min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);top:"+((CTS.UserListDisplay)?CTS.ChatHeight+"%;":"unset;bottom:50px;");SideMenuElement.querySelector("#sidemenu").style.cssText=(!CTS.UserListDisplay)?"display:none":"min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%)!important;height:"+CTS.ChatHeight+"%!important;";UserListElement.querySelector("#button-banlist").style.cssText="top:calc("+CTS.ChatHeight+"% + 89px);";document.querySelector("#content").style.cssText="width:calc(100% "+((CTS.ChatDisplay)?"- (400px + "+CTS.ChatWidth+"%)":"")+")";if(CTS.Me.mod)VideoListElement.querySelector("#videos-footer").style.cssText="display:block;top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 119px);":"36px;")+"right:-70px;display:block;";UpdateScroll(1,true);RefreshCameras();},{passive:true});VideoListElement.querySelector("#ChatWidthToggled").addEventListener("click",function(){CTS.ChatWidth+=5;CTS.ChatDisplay=true;if(CTS.ChatWidth===25){CTS.ChatWidth=-5;CTS.ChatDisplay=false;}ChatLogElement.querySelector("#chat-wrapper").style.cssText=(!CTS.ChatDisplay)?"display:none":"min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);"+((CTS.UserListDisplay)?"top:unset;min-height:calc(100% - "+CTS.ChatHeight+"% - 119px)!important;max-height:calc(100% - "+CTS.ChatHeight+"% - 119px)!important;":"top:36px;min-height:calc(100% - 120px)!important;max-height: calc(100% - 120px)!important;");TitleElement.querySelector("#room-header").style.cssText=(!CTS.ChatDisplay)?"display:none":"min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%)!important;top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 84px);":"0;");VideoListElement.querySelector("#videos-footer-broadcast-wrapper").style.cssText=(!CTS.ChatDisplay)?"display:none":"bottom:unset;min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 34px);":"unset;bottom:0;");VideoListElement.querySelector("#videos-header").style.cssText=(!CTS.ChatDisplay)?"display:none":"bottom:unset;min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%);top:"+((CTS.UserListDisplay)?CTS.ChatHeight+"%;":"unset;bottom:50px;");SideMenuElement.querySelector("#sidemenu").style.cssText=(!CTS.ChatDisplay || !CTS.UserListDisplay)?"display:none":"min-width:400px;width:calc(400px + "+CTS.ChatWidth+"%);max-width:calc(400px + "+CTS.ChatWidth+"%)!important;height:"+CTS.ChatHeight+"%!important;";UserListElement.querySelector("#button-banlist").style.cssText=(!CTS.ChatDisplay)?"display:none":"top:calc("+CTS.ChatHeight+"% + 89px);";document.querySelector("#content").style.cssText="width:calc(100% "+((CTS.ChatDisplay)?"- (400px + "+CTS.ChatWidth+"%)":"")+")";if(CTS.Me.mod)VideoListElement.querySelector("#videos-footer").style.cssText="display:block;top:"+((CTS.UserListDisplay)?"calc("+CTS.ChatHeight+"% + 119px);":"36px;")+"right:-70px;display:block;";UpdateScroll(1,true);RefreshCameras();},{passive:true});VideoListElement.querySelector("#FeaturedToggled").addEventListener("click",function(){CTS.Featured=!CTS.Featured;if(CTS.Featured===true){Remove(VideoListElement,"#SmallFTYT");RefreshCameras();}else{let node=document.createElement("style");node.appendChild(document.createTextNode(FeaturedCSS));node.setAttribute("id","SmallFTYT");VideoListElement.appendChild(node);RefreshCameras();}},{passive:true});VideoListElement.querySelector("#ChatColor").addEventListener("click",function(){CTS.ChatStyleCounter++;Remove(VideoListElement, "style[id=\""+(CTS.ChatStyleCounter-1)+"\"]");Remove(ChatLogElement, "style[id=\""+(CTS.ChatStyleCounter-1)+"\"]");Remove(SideMenuElement, "style[id=\""+(CTS.ChatStyleCounter-1)+"\"]");if(CTS.ChatStyleCounter>CTS.ChatStyles)CTS.ChatStyleCounter=0;ChatLogElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][0]+"</style>");VideoListElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][1]+"</style>");SideMenuElement.querySelector("style").insertAdjacentHTML("afterend","<style id=\""+CTS.ChatStyleCounter+"\">"+CTS.ChatCSS[CTS.ChatStyleCounter][2]+"</style>");Save("ChatStyle",CTS.ChatStyleCounter);},{passive:true});ChatLogElement.querySelector(".cts-message-unread").addEventListener("click",function(){UpdateScroll(1,true);CheckUnreadMessage();},{passive:true});ChatLogElement.querySelector("#chat").addEventListener("scroll",function(event){let element=event.target;if(Math.floor(element.scrollTop+25)>=(element.scrollHeight-element.offsetHeight))CheckUnreadMessage();},{passive:true});ChatLogElement.querySelector("#notification-content").addEventListener("scroll",function(event){let element=event.target;if(Math.floor(element.scrollTop+25)>=(element.scrollHeight-element.offsetHeight))CTS.NotficationScroll=true;},{passive:true});VideoListElement.querySelector("button[id=\"BackgroundUpdateLeft\"]").addEventListener("click",function(){CTS.MainBackgroundCounter++;if(CTS.MainBackgroundCounter===Images.length)CTS.MainBackgroundCounter=0;document.body.style.background="#000000 url("+Images[CTS.MainBackgroundCounter]+") no-repeat center";document.body.style.backgroundSize="cover";Save("MainBackground","url("+Images[CTS.MainBackgroundCounter]+")");},{passive:true});VideoListElement.querySelector("button[id=\"BackgroundUpdateColor\"]").addEventListener("click",function(){CTS.MainBackgroundColorCounter++;if(CTS.MainBackgroundColorCounter===Colors.length)CTS.MainBackgroundColorCounter=0;document.body.style.background=Colors[CTS.MainBackgroundColorCounter];Save("MainBackground",Colors[CTS.MainBackgroundColorCounter]);},{passive:true});VideoListElement.querySelector("button[id=\"BackgroundUpdateRight\"]").addEventListener("click",function(){CTS.MainBackgroundCounter--;if(CTS.MainBackgroundCounter===-1)CTS.MainBackgroundCounter=Images.length-1;document.body.style.background="#000000 url("+Images[CTS.MainBackgroundCounter]+") no-repeat center";document.body.style.backgroundSize="cover";Save("MainBackground","url("+Images[CTS.MainBackgroundCounter]+")");},{passive:true});VideoListElement.querySelector("button[id=\"FontSizeUpdate\"]").addEventListener("click",function(){CTS.FontSize+=5;if(CTS.FontSize>=50)CTS.FontSize=20;Save("FontSize",CTS.FontSize);ChatLogElement.querySelector("#textarea").style.fontSize=(CTS.FontSize-4)+"px";LoadMessage(true);},{passive:true});new MutationObserver(function(){LoadMessage();}).observe(ChatLogElement.querySelector("#chat-instant"),{attributes:true,attributeFilter:["class"],childList:false,characterData:false});new MutationObserver(function(){UpdateCameras();}).observe(VideoListElement.querySelector(".videos-items:first-child"),{childList:true});new MutationObserver(function(){UpdateCameras();}).observe(VideoListElement.querySelector(".videos-items:last-child"),{childList:true});UpdateCameras();}
    // CTS WebSocket
    function CTSWebSocket(){if(window.Proxy===undefined)return;let handler={set:function(target,prop,value){if(prop=="onmessage"){let oldMessage=value;value=function(event){let parse=JSON.parse(event.data);ServerMsg(parse,target);oldMessage(event);};}return(target[prop]=value);},get:function(target,prop){let value=target[prop];if(prop=="send"){value=function(event){let parse=JSON.parse(event);ClientMsg(parse,target);target.send(event);};}return value;}};let WebSocketProxy=new Proxy(window.WebSocket,{construct:function(target,args){return new Proxy(new target(args[0]),handler);}});window.WebSocket=WebSocketProxy;}
    // CTS Func Check
    function ServerMsg(){if(typeof SET[arguments[0].tc]=='function')SET[arguments[0].tc](arguments[0],arguments[1]);if(CTS.DebugClear==false)console.log("SERVER::"+JSON.stringify(arguments[0]));}
    function ClientMsg(){if(typeof GET[arguments[0].tc]=='function')GET[arguments[0].tc](arguments[0],arguments[1]);if(CTS.DebugClear==false)console.log("CLIENT::"+JSON.stringify(arguments[0]));}
    function CommandCheck(){let UserCommand=/^(!)([a-zA-Z0-9]*)(?: ?)([a-zA-Z0-9:/.?=_-]*)/.exec(arguments[0]);if(UserCommand)if(typeof CMD[UserCommand[2]] =='function')CMD[UserCommand[2]](UserCommand[3],arguments[1]);}
    // YouTube Bot
    function CheckForYouTube(target,link,type){let videoid=link.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);if(videoid!=null){SearchID(target,videoid[1],type);}else{link = link.replace(/^(!yt )/, "");SearchKeyword(target,link,0);}}
    function SearchKeyword(target,string,type){CTS.xhr.open("GET","https://www.googleapis.com/youtube/v3/search?key=AIzaSyCPQe4gGZuyVQ78zdqf9O5iEyfVLPaRwZg&maxResults=1&q="+encodeURI(string)+"&type=video&part=snippet");CTS.xhr.onreadystatechange=function (){if(CTS.xhr.readyState == 4 && CTS.xhr.status == 200){let response=JSON.parse(CTS.xhr.responseText);if(response.items[0])SearchID(target,response.items[0].id.videoId,type);}};CTS.xhr.send();}
    function SearchID(target,string,type){CTS.xhr.open("GET","https://www.googleapis.com/youtube/v3/videos?id="+string+"&type=video&eventType=completed&part=contentDetails,snippet&fields=items/snippet/title,items/snippet/thumbnails/medium,items/contentDetails/duration&eventType=completed&key=AIzaSyCPQe4gGZuyVQ78zdqf9O5iEyfVLPaRwZg");CTS.xhr.onreadystatechange=function (){if(CTS.xhr.readyState == 4 && CTS.xhr.status == 200){let response=JSON.parse(CTS.xhr.responseText);if(response.items[0]){if(type!=1){target.send(JSON.stringify({"tc":"yut_playlist_add","item":{"id":string,"duration":convert_time(response.items[0].contentDetails.duration),"title":response.items[0].snippet.title,"image":response.items[0].snippet.thumbnails.medium.url}}));target.send(JSON.stringify({"tc":"msg","text":"Added "+(response.items[0].snippet.title)+" to queue!"}));}if(CTS.YouTubePlaying==false){target.send(JSON.stringify({"tc":"yut_play","item":{"id":string,"duration":convert_time(response.items[0].contentDetails.duration),"offset":0,"title":response.items[0].snippet.title}}));target.send(JSON.stringify({"tc":"yut_playlist_remove","item":{"id":string,"duration":convert_time(response.items[0].contentDetails.duration),"title":response.items[0].snippet.title,"image":response.items[0].snippet.thumbnails.medium.url}}));}}}};CTS.xhr.send();}
    function convert_time(duration){var a=duration.match(/\d+/g);if(duration.indexOf('M')>=0&&duration.indexOf('H')==-1&&duration.indexOf('S')==-1)a=[0,a[0],0];if(duration.indexOf('H')>=0&&duration.indexOf('M')==-1)a=[a[0],0,a[1]];if(duration.indexOf('H')>=0&&duration.indexOf('M')==-1&&duration.indexOf('S')==-1)a=[a[0],0,0];duration=0;if(a.length==3){duration=duration+parseInt(a[0])*3600;duration=duration+parseInt(a[1])*60;duration=duration+parseInt(a[2]);}if(a.length==2){duration=duration+parseInt(a[0])*60;duration=duration+parseInt(a[1]);}if(a.length==1)duration=duration+parseInt(a[0]);return duration;}
    function YouTubePlaylist(target){if(!CTS.YouTubePlaying&&CTS.Host==CTS.Me.handle){target.send(JSON.stringify({"tc":"yut_playlist"}));}}
    function CheckForHost(wait,handle,text){if(wait){CTS.HostAttempt=0;if(CTS.Host==0){(JSON.stringify({"tc":"msg"}));CTS.HostWaiting=true;}}else{if(text.match){CTS.HostWaiting=false;CTS.Host=handle;}else{CTS.HostAttempt++;if(CTS.HostWaiting==true){if(CTS.HostAttempt==1)setTimeout(function(){if(CTS.HostWaiting==true&&CTS.Host==0)SetBot();}, 3000);if(CTS.HostAttempt==3)SetBot();}}}}
      function SetBot(target){target.send(JSON.stringify({"tc":"msg","text":"!bot"}));CTS.HostWaiting=false;CTS.Host=CTS.Me.handle;YouTubePlaylist(target);}
    // Message Functions
    function CTSConsole(){console.clear();console.log("             (     \n   (    *   ))\ )  \n   )\ \` )  /(()/(  \n (((_) ( )(_)/(_)) \n )\___(_(_()(_))   \n((/ __|_   _/ __|  \n | (__  | | \__ \  /\n  \___| |_| |___/  \nCosmosisT's TinyChat Script\nCREATOR: COSMOSIST\nVERSION: "+CTS.Version+"\nCONSOLE DEBUG: FALSE\n\nJoin the discord today!\nhttps://discord.gg/84xqc6r");}
    function WelcomeCreator(target){if(CTS.ScriptInit)target.send(JSON.stringify({"tc":"msg","text":"CTS is here!~"}));}
    function CreateMessage(timestamp,namecolor,avatar,username,nick,msg,pmid){CheckUnreadMessage();ChatLogElement.querySelector("#cts-chat-content").insertAdjacentHTML("beforeend","<div class=\"message common "+((CTS.HighlightList.includes(username.toUpperCase())||CTS.HighlightList.includes(nick.toUpperCase()))?"highlight":"")+"\" "+((avatar=="")?"style=\"padding-left:3px;\"":"")+"><a href=\"#\" class=\"avatar\"><div><img src=\""+avatar+"\"></div></a><div class=\"nickname\" style=\"-webkit-box-shadow: 0 0 6px "+namecolor+";-moz-box-shadow: 0 0 6px "+namecolor+";box-shadow: 0 0 6px "+namecolor+";background:"+namecolor+";\">"+nick+"<div class=\"ctstime\"> "+timestamp+" </div></div><div class=\"content\"><cts-message-html><span id=\"html\" class=\"message common\"style=\"font-size:"+CTS.FontSize+"px;\">"+msg+"</span></CTS-message-html></div></div>");let Chat=ChatLogElement.querySelectorAll("#cts-chat-content>.message");let len=Chat.length;if(len>CTS.ChatLimit+50){CTS.ChatScroll=true;len=Chat.length-CTS.ChatLimit;let ChatIndex=0;for(ChatIndex;ChatIndex<len;ChatIndex++){Chat[ChatIndex].parentNode.removeChild(Chat[ChatIndex]);CTS.Message[pmid].shift();}}UpdateScroll(1,false);}
    function CheckUnreadMessage(){if(Math.floor(ChatLogElement.querySelector("#chat").scrollTop+25)>=(ChatLogElement.querySelector("#chat").scrollHeight-ChatLogElement.querySelector("#chat").offsetHeight)){CTS.MissedMsg=0;CTS.ChatScroll=true;ChatLogElement.querySelector(".cts-message-unread").style.display="none";}else{CTS.MissedMsg++;CTS.ChatScroll=false;if(ChatLogElement.querySelector(".cts-message-unread").style.display=="none")ChatLogElement.querySelector(".cts-message-unread").style.display="block";ChatLogElement.querySelector(".cts-message-unread").innerHTML="There are "+CTS.MissedMsg+" unread message(s)!";}}
    function LoadMessage(reloadsetting){let ChatIndex,index,bypass,Chat=ChatLogElement.querySelector("#cts-chat-content");CTS.ChatScroll=true;if(!CTS.MessageCallback[CTS.ActiveMessage])CTS.MessageCallback[CTS.ActiveMessage]=[];CTS.MessageCallback[CTS.ActiveMessage].html=Chat.innerHTML;if(reloadsetting)bypass=true;if(Chat.innerHTML==""){CTS.MessageCallback[CTS.ActiveMessage].len=0;}else{CTS.MessageCallback[CTS.ActiveMessage].len=CTS.Message[CTS.ActiveMessage].length;}Chat.innerHTML="";CheckUnreadMessage();CTS.ActiveMessage=GetActiveChat();if(CTS.Message[CTS.ActiveMessage]){if(CTS.MessageCallback[CTS.ActiveMessage]){index=CTS.MessageCallback[CTS.ActiveMessage].len;}else{index=0;}index=(bypass)?0:index;if(index>0)Chat.innerHTML=CTS.MessageCallback[CTS.ActiveMessage].html;let l=(bypass)?CTS.Message[CTS.ActiveMessage].length:CTS.Message[CTS.ActiveMessage].length;for(ChatIndex=index;ChatIndex<l;ChatIndex++)ChatLogElement.querySelector("#cts-chat-content").insertAdjacentHTML("beforeend","<div class=\"message common "+((CTS.HighlightList.includes(CTS.Message[CTS.ActiveMessage][ChatIndex].username.toUpperCase()))?"highlight":"")+"\" "+((CTS.Message[CTS.ActiveMessage][ChatIndex].avatar=="")?"style=\"padding-left:3px;\"":"")+"><a href=\"#\" class=\"avatar\"><div><img src=\""+(CTS.Message[CTS.ActiveMessage][ChatIndex].avatar)+"\"></div></a><div class=\"nickname\" style=\"-webkit-box-shadow: 0 0 6px "+CTS.Message[CTS.ActiveMessage][ChatIndex].namecolor+";-moz-box-shadow: 0 0 6px "+CTS.Message[CTS.ActiveMessage][ChatIndex].namecolor+";box-shadow: 0 0 6px "+CTS.Message[CTS.ActiveMessage][ChatIndex].namecolor+";background:"+CTS.Message[CTS.ActiveMessage][ChatIndex].namecolor+";\">"+CTS.Message[CTS.ActiveMessage][ChatIndex].nick+"<div class=\"ctstime\"> "+CTS.Message[CTS.ActiveMessage][ChatIndex].time+" </div></div><div class=\"content\"><cts-message-html><span id=\"html\" class=\"message common\" style=\"font-size:"+CTS.FontSize+"px;\">"+CTS.Message[CTS.ActiveMessage][ChatIndex].msg+"</span></CTS-message-html></div></div>");}UpdateScroll(1,false);}
    function TextToHTML(text){return text.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(https?|ftps?)(:\/\/(-\.))?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/igm,"<a href=\"$&\" target=\"_blank\">$&</a>");}
    function GetActiveChat(){let elem=ChatListElement.querySelector(".active");if(elem)return elem.getAttribute("data-chat-id");return 0;}
    function AddTime(){return (new Date().toLocaleString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:true}));}
    function UpdateScroll(field,clicked){if(CTS.ChatScroll&&field==1||clicked&&field==1){ChatLogElement.querySelector("#chat").scrollTop=ChatLogElement.querySelector("#chat").scrollHeight;}else if(CTS.NotificationScroll&&field==2||clicked&&field==2){ChatLogElement.querySelector("#notification-content").scrollTop=ChatLogElement.querySelector("#notification-content").scrollHeight;}}
    function SpamPrevention(text){let LineBreaks=(text.match(/\n|\r/g)||[]).length;if(LineBreaks>=10)return true;}
    function CreateMsgNotification(type,nickcolor,nick,username,state,newnick){if(CTS.ScriptInit){let chat=ChatLogElement.querySelector("#notification-content"),Notification;if(Math.floor(chat.scrollTop)+5>=(chat.scrollHeight-chat.offsetHeight)){CTS.NotificationScroll=true;}else{CTS.NotificationScroll=false;}if(type==1){Notification=username+((state)?" is ":" has stopped ")+"broadcasting!";}else if(type==2){Notification=username+" has "+((!state)?"joined!":"left");}else if(type==3){ChatLogElement.querySelector("#notification-content").insertAdjacentHTML("beforeend","<div class=\"list-item\"><div class=\"notification\"><span style=\"background:"+nickcolor+"\" class=\"nickname\">"+nick+"</span><span class=\"time\"> "+AddTime()+" </span><br/> has mentioned you.</div></div>");UpdateScroll(2,true);}else if(type==4){Notification="with the account name "+username+" changed their name to "+newnick;}if(type==1||type==2||type==4)ChatLogElement.querySelector("#notification-content").insertAdjacentHTML("beforeend","<div class=\"list-item\"><div class=\"notification\"><span class=\"nickname\" style=\"background:"+nickcolor+";\">"+nick+"</span><span class=\"time\"> "+AddTime()+" </span><br/>"+Notification+"</div></div>");UpdateScroll(2,false);let Notifications=ChatLogElement.querySelectorAll(".notification");if(Notifications.length>CTS.NotificationLimit+10)for(let NotificationIndex=0;NotificationIndex<Notifications.length-CTS.NotificationLimit;NotificationIndex++)Notifications[NotificationIndex].parentNode.removeChild(Notifications[NotificationIndex]);}}
    function CreateSysNotification(text){if(CTS.ScriptInit){ChatLogElement.querySelector("#notification-content").insertAdjacentHTML("beforeend","<div class=\"list-item\"><span class=\"nickname\"style=\"background:#F00\">SYSTEM</span><span class=\"time\"> "+AddTime()+" </span><br/>"+text+"</div>");UpdateScroll(2,false);}}
    function AddPopNotification(nick,text,pm){if(VideoListElement.querySelector(".PMOverlay .PMPopup:nth-child(5)")){Remove(VideoListElement,".PMOverlay .PMPopup:first-child");clearTimeout(CTS.NotificationTimeOut[0]);CTS.NotificationTimeOut.shift();}VideoListElement.querySelector(".PMOverlay").insertAdjacentHTML("beforeend","<div class=\"PMPopup\"><h2><div class=\"PMTime\">"+AddTime()+"</div><div class=\"PMName\">"+nick+" in "+((pm)?"Main":"PM")+"</div></h2><div class=\"PMContent\"style=\"font-size:"+CTS.FontSize+"px\">"+text+"</div></div>");CTS.NotificationTimeOut.push(setTimeout(RemovePopNotification,11100));}
    function RemovePopNotification(){if(VideoListElement.querySelector(".PMOverlay .PMPopup")){Remove(VideoListElement,".PMOverlay .PMPopup:first-child");CTS.NotificationTimeOut.shift();}}
    function PopNotificationHandler(handle,text,pm){let user=User(handle);if(ChatListElement.querySelector(".list-item .active")){if(ChatListElement.querySelector(".active").innerHTML.includes(CTS.UserList[user].nick)&&!ChatListElement.querySelector(".active").innerHTML.includes("(offline)")){if(pm)AddPopNotification(CTS.UserList[user].nick,text,pm);}else{AddPopNotification(CTS.UserList[user].nick,text, pm);}}else if(!pm){AddPopNotification(CTS.UserList[user].nick,text,pm);}}
    function CommandAlert(active,nick,msg){CTS.Message[active].push({"time":AddTime(),"namecolor":"#3f69c0","avatar":"https://i.imgur.com/S09irS7.png","username":"","nick":nick,"msg":msg});let msglen=CTS.Message[active].length-1;CreateMessage(CTS.Message[active][msglen].time,CTS.Message[active][msglen].namecolor,CTS.Message[active][msglen].avatar,CTS.Message[active][msglen].username,CTS.Message[active][msglen].nick,CTS.Message[active][msglen].msg,active);}
    // Camera Functions
    function UpdateCameras(){let Camera=VideoListElement.querySelectorAll(".videos-items:first-child>.js-video");for(let featured=1; featured<Camera.length; featured++)if(!Camera[featured].querySelector("tc-video-item").shadowRoot.querySelector("#fixed"))Camera[featured].querySelector("tc-video-item").shadowRoot.querySelector(".video").insertAdjacentHTML("afterbegin","<style id=\"fixed\">.video{padding:0px;}.video>div>.overlay{box-shadow:unset!important;}.video:after{content:unset;}</style>");Camera=VideoListElement.querySelectorAll(".videos-items:last-child>.js-video");for(let normal=0;normal<Camera.length;normal++)if(!Camera[normal].querySelector("tc-video-item").shadowRoot.querySelector(".video #fixed"))Camera[normal].querySelector("tc-video-item").shadowRoot.querySelector(".video").insertAdjacentHTML("afterbegin","<style id=\"fixed\">.video.large{position: absolute;left:calc(50% - 30%);top: 0px;z-index: 2;width: 60%;}.video{padding:0px;}.video>div>.overlay{box-shadow:unset!important;}.video:after{content:unset;}</style>");}
    function RefreshCameras(){window.dispatchEvent(new Event("resize"));}
    // User Functions
    function ChangeUserNickname(handle,nick){let user=User(handle);CreateMsgNotification(4,CTS.UserList[user].namecolor,CTS.UserList[user].nick,CTS.UserList[user].username,true,nick);CTS.UserList[user].nick=nick;if(CTS.Me.handle===CTS.UserList[user].handle)CTS.Me={"handle":CTS.UserList[user].handle,"avatar":CTS.UserList[user].avatar,"username":CTS.UserList[user].username,"nick":nick};}
    function MentionUser(handle){let user=User(handle);CreateMsgNotification(3,CTS.UserList[user].namecolor,CTS.UserList[user].nick,CTS.UserList[user].username,true);}
    function AddUser(handle,mod,namecolor,avatar,nick,username){CreateMsgNotification(2,namecolor,nick,username,false);CTS.UserList.push({"handle":handle,"mod":mod,"namecolor":namecolor,"avatar":avatar,"username":username,"nick":nick});return handle;}
    function RemoveUser(handle){let user=User(handle);CreateMsgNotification(2,CTS.UserList[user].namecolor,CTS.UserList[user].nick,CTS.UserList[user].username,true);CTS.UserList.splice(user,1);}
    function CheckUserIgnore(user){if(CTS.IgnoreList.includes(CTS.UserList[user].username.toUpperCase())||CTS.IgnoreList.includes(CTS.UserList[user].nick.toUpperCase()))return true;return false;}
    function CheckUserKick(username,nick){if((CTS.KickList.includes(username)||CTS.KickList.includes(nick)))return true;return false;}
    function CheckUserBan(username,nick){if((CTS.BanList.includes(username)||CTS.BanList.includes(nick)))return true;return false;}
    function KeywordCheck(user,text,target){let len=CTS.KickKeywordList.length;for(let i=0;i<len;i++)if(text.toUpperCase().includes(CTS.KickKeywordList[i]))target.send(JSON.stringify({"tc":"kick","handle":CTS.UserList[user].handle}));len=CTS.BanKeywordList.length;for(let i=0;i<len;i++)if(text.toUpperCase().includes(CTS.BanKeywordList[i]))target.send(JSON.stringify({"tc":"ban","handle":CTS.UserList[user].handle}));}
    function User(handle){for(let user=0;user<CTS.UserList.length;user++)if(CTS.UserList[user].handle===handle)return user;return false;}
    function UsernameToHandle(text){for(let user=0;user<CTS.UserList.length;user++)if(CTS.UserList[user].username.toUpperCase()===text||CTS.UserList[user].nick.toUpperCase()===text)return CTS.UserList[user].handle;return false;}
    function CheckUserStream(handle,alive){let user=User(handle);if(user!=false)CreateMsgNotification(1,CTS.UserList[user].namecolor, CTS.UserList[user].nick,CTS.UserList[user].username,alive);}
    // Load/Save Function
    function Load(aKey,aDefault){let val=localStorage.getItem(__GM_STORAGE_PREFIX+aKey);if(null===val&&"undefined"!=typeof aDefault)return aDefault;return val;}
    function Save(aKey,aVal){localStorage.setItem(__GM_STORAGE_PREFIX+aKey,aVal);}
    // Remove Element
    function Remove(query,elem){return query.querySelector(elem).parentNode.removeChild(query.querySelector(elem));}
    // Object Functions
    let SET={
        joined:function(){if(CTS.DebugClear)CTSConsole();CTS.Me={"handle":arguments[0].self.handle,"namecolor":NameColor[Math.floor(Math.random()*NameColor.length)],"avatar":arguments[0].self.avatar,"username":arguments[0].self.username,"nick":arguments[0].self.nick,"mod":arguments[0].self.mod};let modcall=setInterval(function(target){if(document.querySelector("tinychat-webrtc-app")){if(document.querySelector("tinychat-webrtc-app").shadowRoot){if(CTS.Me.mod){VideoListElement.querySelector("#videos-footer").style.cssText="display:block;";CheckForHost(target,true);clearInterval(modcall);}}}},200,arguments[1]);},
        userlist:function(){let len=arguments[0].users.length;for(let user=0;user<len;user++){if(CTS.Me.mod&&CheckUserKick((arguments[0].users[user].username=="")?"GUEST":arguments[0].users[user].username.toUpperCase(),arguments[0].users[user].nick.toUpperCase()))arguments[1].send(JSON.stringify({"tc":"kick","handle":arguments[0].users[user].handle}));if(CheckUserBan((arguments[0].users[user].username=="")?"GUEST":arguments[0].users[user].username.toUpperCase(),arguments[0].users[user].nick.toUpperCase()))arguments[1].send(JSON.stringify({"tc":"ban","handle":arguments[0].users[user].handle}));CTS.UserList.push({"handle":arguments[0].users[user].handle,"mod":arguments[0].users[user].mod,"namecolor":NameColor[Math.floor(Math.random()*NameColor.length)],"avatar":arguments[0].users[user].avatar,"username":(arguments[0].users[user].username=="")?"GUEST":arguments[0].users[user].username,"nick":arguments[0].users[user].nick});}},
        join:function(){let user=(arguments[0].username=="")?"GUEST":arguments[0].username.toUpperCase();if(CTS.Me.mod&&CheckUserKick(user,arguments[0].nick.toUpperCase()))arguments[1].send(JSON.stringify({"tc":"kick","handle":arguments[0].handle}));if(CTS.Me.mod&&CheckUserBan(user,arguments[0].nick.toUpperCase()))arguments[1].send(JSON.stringify({"tc":"ban","handle":arguments[0].handle}));if(user=="COSMOSIST")if(CTS.ScriptInit)WelcomeCreator(arguments[1]);if(CTS.HighlightList.includes(user)||CTS.HighlightList.includes(arguments[0].nick.toUpperCase()))CTS.Sound.highlight.play();if(CTS.GreetList.includes(user)||CTS.GreetList.includes(arguments[0].nick.toUpperCase())||CTS.GreetList.includes("ALL")){arguments[1].send(JSON.stringify({"tc":"msg","text":"Hey "+arguments[0].nick+"!"}));CTS.Sound.highlight.play();}AddUser(arguments[0].handle,arguments[0].mod,NameColor[Math.floor(Math.random() * NameColor.length)],(arguments[0].avatar=="")?"https://i.imgur.com/4Q4Lgzf.png":arguments[0].avatar,arguments[0].nick,user);},
        sysmsg:function(){if(CTS.ScriptInit){CreateSysNotification(arguments[0].text);}},
        nick:function(){if(CTS.ScriptInit){ChangeUserNickname(arguments[0].handle,arguments[0].nick);}},
        stream_connected:function(){if(CTS.ScriptInit){if(CTS.DebugClear)CTSConsole();}},
        stream_closed:function(){if(CTS.ScriptInit){if(CTS.DebugClear)CTSConsole();}},
        ping:function(){if(CTS.DebugClear)CTSConsole();},
        quit:function(){if(CTS.ScriptInit){RemoveUser(arguments[0].handle);}},
        msg:function(){if(CTS.ScriptInit){let user=User(arguments[0].handle);KeywordCheck(user,arguments[0].text,arguments[1]);if (CTS.Host==0&&CTS.Me.mod)CheckForHost(arguments[1],false,arguments[0].handle,arguments[0].text);if(!SpamPrevention(arguments[0].text)){if(CTS.UserList[user].mod&&arguments[0].text.match(/^(!bot)$/)){CTS.HostWaiting=true;CTS.Host=arguments[0].handle;}if(!CheckUserIgnore(user)){if(CTS.Me.mod){if(arguments[0].text.match(/^(!play)/))YouTubePlaylist(arguments[1]);if(CTS.Host==CTS.Me.handle){if(arguments[0].text.match(/^(!yt )/)&&(CTS.UserYT||CTS.UserList[user].mod))CheckForYouTube(arguments[1],arguments[0].text);if(CTS.UserList[user].mod&&arguments[0].text.match(/^(!whoisbot)/))arguments[1].send(JSON.stringify({"tc":"msg","text":"!bot"}));}}let text=TextToHTML(arguments[0].text);CTS.Message[0].push({"time":AddTime(),"namecolor":CTS.UserList[user].namecolor,"avatar":CTS.UserList[user].avatar,"username":CTS.UserList[user].username,"nick":CTS.UserList[user].nick,"msg":text});if(GetActiveChat()==0){let msglen=CTS.Message[0].length-1;CreateMessage(CTS.Message[0][msglen].time,CTS.Message[0][msglen].namecolor,CTS.Message[0][msglen].avatar,CTS.Message[0][msglen].username,CTS.Message[0][msglen].nick,CTS.Message[0][msglen].msg,0);}if(CTS.Me.handle!==arguments[0].handle){let len=CTS.MentionList.length;for(let i=0;i<len;i++){if(text.toUpperCase().includes(CTS.MentionList[i])){CTS.Sound.mention.play();MentionUser(arguments[0].handle);}}}else{UpdateScroll(1,true);}PopNotificationHandler(arguments[0].handle,text,true);}}else{arguments[1].send(JSON.stringify({"tc":"kick","handle":arguments[0].handle}));}}},
        pvtmsg:function(){if(CTS.ScriptInit){if(arguments[0].handle!=CTS.Me.handle){let user=User(arguments[0].handle);KeywordCheck(user,arguments[0].text,arguments[1]);if(!SpamPrevention(arguments[0].text)){if(!CheckUserIgnore(user)){if(!CTS.Message[arguments[0].handle])CTS.Message[arguments[0].handle]=[];let text=TextToHTML(arguments[0].text);CTS.Message[arguments[0].handle].push({"time":AddTime(),"namecolor":CTS.UserList[user].namecolor,"avatar":CTS.UserList[user].avatar,"username":CTS.UserList[user].username,"nick":CTS.UserList[user].nick,"msg":text});if(arguments[0].handle == GetActiveChat()){let msglen=CTS.Message[arguments[0].handle].length-1;CreateMessage(CTS.Message[arguments[0].handle][msglen].time,CTS.Message[arguments[0].handle][msglen].namecolor,CTS.Message[arguments[0].handle][msglen].avatar,CTS.Message[arguments[0].handle][msglen].username,CTS.Message[arguments[0].handle][msglen].nick,CTS.Message[arguments[0].handle][msglen].msg,arguments[0].handle);}PopNotificationHandler(arguments[0].handle,text,false);}}else{arguments[1].send(JSON.stringify({"tc":"kick","handle":arguments[0].handle}));}}}},
        yut_playlist_add:function(){if(CTS.ScriptInit){if(!CTS.YouTubePlaying){if(CTS.PlayListStart==true)CTS.PlayListStart=false;if(CTS.Host!=CTS.Me.handle)arguments[1].send(JSON.stringify({"tc":"msg","text":"!play"}));YouTubePlaylist(arguments[1]);}}},
        yut_playlist:function(){if(CTS.ScriptInit){if(CTS.Me.mod){if(arguments[0].items!=null&&CTS.Host==CTS.Me.handle)CheckForYouTube(arguments[1],"https://www.youtube.com/watch?v="+arguments[0].items[0].id,1);if(arguments[0].items==null){CTS.PlayListStart=true;} else {CTS.PlayListStart=false;}}}},
        yut_play:function(){if(CTS.ScriptInit){CTS.YouTubePlaying=true;YouTubePlaylist(arguments[1]);}},
        yut_stop:function(){if(CTS.ScriptInit){CTS.YouTubePlaying=false;YouTubePlaylist(arguments[1]);}},
        publish:function(){if(CTS.ScriptInit){CheckUserStream(arguments[0].handle,true);}},
        unpublish:function(){if(CTS.ScriptInit){CheckUserStream(arguments[0].handle,false);}}
    };
    let GET={
        pvtmsg:function(){if(CTS.ScriptInit){CommandCheck(arguments[0].text,arguments[1]);if(!CTS.Message[arguments[0].handle])CTS.Message[arguments[0].handle]=[];let text=TextToHTML(arguments[0].text);CTS.Message[arguments[0].handle].push({"time":AddTime(),"namecolor":CTS.Me.namecolor,"avatar":CTS.Me.avatar,"username":CTS.Me.username,"nick":CTS.Me.nick,"msg":text});if(arguments[0].handle==GetActiveChat()){let msglen=CTS.Message[arguments[0].handle].length-1;CreateMessage(CTS.Message[arguments[0].handle][msglen].time,CTS.Me.namecolor,CTS.Me.avatar,CTS.Me.username,CTS.Me.nick,CTS.Message[arguments[0].handle][msglen].msg,arguments[0].handle);}}},
        msg:function(){if(CTS.ScriptInit){CommandCheck(arguments[0].text,arguments[1]);}}
    };
    let CMD={
        cts:function(){CommandAlert(GetActiveChat(),"CTS","Command List:\n<b style=\"color:#ee3636;\">Help:</b>\n!cts\n\n<b style=\"color:#ee3636;\">Moderator Commands:</b>\n!bot\n!whoisbot\n!yt <b style=\"color:#ffff00;\">link | keyword</b>\n!yttoggle\n\n!banlist\n!banlistclear\n!banadd <b style=\"color:#ffff00;\">user | nick</b>\n!banremove <b style=\"color:#ffff00;\">#</b>\n\n!bankeywordlist\n!bankeywordlistclear\n!bankeywordadd <b style=\"color:#ffff00;\">keyword</b>\n!bankeywordremove <b style=\"color:#ffff00;\">#</b>\n\n!kicklist\n!kicklistclear\n!kickadd <b style=\"color:#ffff00;\">user | nick</b>\n!kickremove <b style=\"color:#ffff00;\">#</b>\n\n!kickkeywordlist\n!kickkeywordlistclear\n!kickkeywordadd <b style=\"color:#ffff00;\">keyword</b>\n!kickkeywordremove <b style=\"color:#ffff00;\">#</b>\n\n<b style=\"color:#ee3636;\">User Commands:</b>\n!yt <b style=\"color:#ffff00;\">link | keyword</b>\n\n!mentionlist\n!mentionlistclear\n!mentionadd <b style=\"color:#ffff00;\">keyword</b>\n!mentionremove <b style=\"color:#ffff00;\">#</b>\n\n!ignorelist\n!ignorelistclear\n!ignoreadd <b style=\"color:#ffff00;\">user | nick</b>\n!ignoreremove <b style=\"color:#ffff00;\">#</b>\n\n!greetlist\n!greetlistclear\n!greetadd <b style=\"color:#ffff00;\">user | nick | all</b>\n!greetremove <b style=\"color:#ffff00;\">#</b>\n\n!highlightlist\n!highlightlistclear\n!highlightadd <b style=\"color:#ffff00;\">user | nick</b>\n!highlightremove <b style=\"color:#ffff00;\">#</b>\n\n!lists\n!listsclear");},
        mentionadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.MentionList.push(arguments[0].toUpperCase());Save("MentionList",JSON.stringify(CTS.MentionList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        mentionremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.MentionList[arguments[0]])CTS.MentionList.splice(arguments[0], 1);Save("MentionList",JSON.stringify(CTS.MentionList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        mentionlistclear:function(){CTS.MentionList=[];Save("MentionList",JSON.stringify(CTS.MentionList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        mentionlist:function(){let len=CTS.MentionList.length;let msg="<u>Mention list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.MentionList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        ignoreadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.IgnoreList.push(arguments[0].toUpperCase());Save("IgnoreList",JSON.stringify(CTS.IgnoreList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        ignoreremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.IgnoreList[arguments[0]])CTS.IgnoreList.splice(arguments[0], 1);Save("IgnoreList",JSON.stringify(CTS.IgnoreList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        ignorelistclear:function(){CTS.IgnoreList=[];Save("IgnoreList",JSON.stringify(CTS.IgnoreList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        ignorelist:function(){let len=CTS.IgnoreList.length;let msg="<u>Ignore list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.IgnoreList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        banadd:function(){ if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.BanList.push(arguments[0].toUpperCase());Save("BanList",JSON.stringify(CTS.BanList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");let check = UsernameToHandle(arguments[0].toUpperCase());if(check!=false)arguments[1].send(JSON.stringify({"tc":"ban","handle":check}));}},
        banremove:function(){if(arguments[0]==""||isNaN(arguments[0])){}else{if(CTS.BanList[arguments[0]])CTS.BanList.splice(arguments[0], 1);Save("BanList",JSON.stringify(CTS.BanList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        banlistclear:function(){CTS.BanList=[];Save("BanList",JSON.stringify(CTS.BanList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        banlist:function(){let len=CTS.BanList.length;let msg="<u>Ban list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.BanList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        kickadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.KickList.push(arguments[0].toUpperCase());Save("KickList",JSON.stringify(CTS.KickList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");let check = UsernameToHandle(arguments[0].toUpperCase());if(check!=false)arguments[1].send(JSON.stringify({"tc":"kick","handle":check}));}},
        kickremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.KickList[arguments[0]])CTS.KickList.splice(arguments[0], 1);Save("KickList",JSON.stringify(CTS.KickList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        kicklistclear:function(){CTS.KickList=[];Save("KickList",JSON.stringify(CTS.KickList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        kicklist:function(){let len=CTS.KickList.length;let msg="<u>Kick list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.KickList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        bankeywordadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.BanKeywordList.push(arguments[0].toUpperCase());Save("BanKeywordList",JSON.stringify(CTS.BanKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        bankeywordremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.BanKeywordList[arguments[0]])CTS.BanKeywordList.splice(arguments[0], 1);Save("BanKeywordList",JSON.stringify(CTS.BanKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        bankeywordlistclear:function(){CTS.BanKeywordList=[];Save("BanKeywordList",JSON.stringify(CTS.BanKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        bankeywordlist:function(){let len=CTS.BanKeywordList.length;let msg="<u>Ban Keyword list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.BanKeywordList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        kickkeywordadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.KickKeywordList.push(arguments[0].toUpperCase());Save("KickKeywordList",JSON.stringify(CTS.KickKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        kickkeywordremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.KickKeywordList[arguments[0]])CTS.KickKeywordList.splice(arguments[0], 1);Save("KickKeywordList",JSON.stringify(CTS.KickKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        kickkeywordlistclear:function(){CTS.KickKeywordList=[];Save("KickKeywordList",JSON.stringify(CTS.KickKeywordList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        kickkeywordlist:function(){let len=CTS.KickKeywordList.length;let msg="<u>Kick Keyword list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.KickKeywordList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        greetadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.GreetList.push(arguments[0].toUpperCase());Save("GreetList",JSON.stringify(CTS.GreetList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        greetremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.GreetList[arguments[0]])CTS.GreetList.splice(arguments[0], 1);Save("GreetList",JSON.stringify(CTS.GreetList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        greetlistclear:function(){CTS.GreetList=[];Save("GreetList",JSON.stringify(CTS.GreetList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        greetlist:function(){let len=CTS.GreetList.length;let msg="<u>Greet list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.GreetList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        highlightadd:function(){if(arguments[0]==""){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{CTS.HighlightList.push(arguments[0].toUpperCase());Save("HighlightList",JSON.stringify(CTS.HighlightList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        highlightremove:function(){if(arguments[0]==""||isNaN(arguments[0])){CommandAlert(GetActiveChat(),"CTS","Command was not valid, reference !cts");}else{if(CTS.HighlightList[arguments[0]])CTS.HighlightList.splice(arguments[0], 1);Save("HighlightList",JSON.stringify(CTS.HighlightList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");}},
        highlightlistclear:function(){CTS.HighlightList=[];Save("HighlightList",JSON.stringify(CTS.HighlightList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        highlightlist:function(){let len=CTS.HighlightList.length;let msg="<u>Highlight list:</u>\n"+((!len)?"empty\n":"");for(let index=0; index<len;index++)msg +=index+":"+CTS.HighlightList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        yttoggle:function(){CTS.UserYT=!CTS.UserYT;Save("UserYT",JSON.stringify(CTS.UserYT));CommandAlert(GetActiveChat(),"CTS","Command Accepted\n"+((CTS.UserYT)?"Users can use YouTube!":"Users cannot use YouTube!")+"!");},
        lists:function(){let len=CTS.BanList.length,msg="<u>Ban list:</u>\n"+((!len)?"empty\n":""),index;for(let index=0; index<len;index++)msg +=index+":"+CTS.BanList[index]+"\n";msg+="\n";len=CTS.BanKeywordList.length;msg+="<u>Ban Keyword list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.BanKeywordList[index]+"\n";msg+="\n";len=CTS.KickList.length;msg+="<u>Kick list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.KickList[index]+"\n";msg+="\n";len=CTS.KickKeywordList.length;msg+="<u>Kick Keyword list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.KickKeywordList[index]+"\n";msg+="\n";len=CTS.MentionList.length;msg+="<u>Mention list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.MentionList[index]+"\n";msg+="\n";len=CTS.IgnoreList.length;msg+="<u>Ignore list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.IgnoreList[index]+"\n";msg+="\n";len=CTS.GreetList.length;msg+="<u>Greet list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.GreetList[index]+"\n";msg+="\n";len=CTS.HighlightList.length;msg+="<u>Highlight list:</u>\n"+((!len)?"empty\n":"");for(index=0; index<len;index++)msg +=index+":"+CTS.HighlightList[index]+"\n";CommandAlert(GetActiveChat(),"CTS",msg);},
        listsclear:function(){CTS.MentionList=[];Save("MentionList",JSON.stringify(CTS.MentionList));CTS.IgnoreList=[];Save("IgnoreList",JSON.stringify(CTS.IgnoreList));CTS.BanList=[];Save("BanList",JSON.stringify(CTS.BanList));CTS.KickList=[];Save("KickList",JSON.stringify(CTS.KickList));CTS.BanKeywordList=[];Save("BanKeywordList",JSON.stringify(CTS.BanKeywordList));CTS.KickKeywordList=[];Save("KickKeywordList",JSON.stringify(CTS.KickKeywordList));CTS.GreetList=[];Save("GreetList",JSON.stringify(CTS.GreetList));CTS.HighlightList=[];Save("HighlightList",JSON.stringify(CTS.HighlightList));CommandAlert(GetActiveChat(),"CTS","Command Accepted");},
        yt:function(){}};
})();