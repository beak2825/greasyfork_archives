// ==UserScript==
// @name TW - Tournoi BDF
// @namespace http://your.homepage/
// @version 0.2
// @description Calculateur de tenues en fonction d'une liste d'items
// @author krikri72
// @include http*://*.the-west.*/game.php*
// @grant none
// @downloadURL https://update.greasyfork.org/scripts/376194/TW%20-%20Tournoi%20BDF.user.js
// @updateURL https://update.greasyfork.org/scripts/376194/TW%20-%20Tournoi%20BDF.meta.js
// ==/UserScript==

(function(fn){var script=document.createElement('script');script.setAttribute('type','application/javascript');script.textContent='('+fn+')();';document.body.appendChild(script);document.body.removeChild(script)})(function(){TW_K_MM={API:{id:"TW_Meli_Melo",name:"TW Méli-Mélo",author:"krikri72",version:0.4,gameMin:2.92,gameMax:Game.version,lang:Game.locale},GUI:{images:{icon_menu:"data:image/png;base64,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"},createMenuButton:function(options){var button;if(options==null){options={}}
if(options.title){button=$("<div class='menulink' title='"+options.title+"'/>")}else{button=$("<div class='menulink'/>")}
if(options.image){button.css("background-image","url("+options.image+")")}
button.hover(function(){$(this).css("background-position","-25px 0px")},function(){$(this).css("background-position","0px 0px")});if(options.onclick){button.on("click",options.onclick)}
$("div#ui_menubar").append($('<div class="ui_menucontainer" />').append(button).append('<div class="menucontainer_bottom" />'))},createWindow:function(){TW_K_MM.window=wman.open(TW_K_MM.API.name).setTitle(TW_K_MM.API.name).setMiniTitle(TW_K_MM.API.name);TW_K_MM.window.addTab("Calculator","id_calculator_items",TW_K_MM.GUI.tabclick);TW_K_MM.window.appendToContentPane(TW_K_MM.GUI.createTab({tab:TW_K_MM.calculatorItems.init(),addclass:TW_K_MM.utils.concatenation(new Array(TW_K_MM.API.id,"_","id_calculator_items"))}));TW_K_MM.GUI.tabclick(TW_K_MM.window,"id_calculator_items");TW_K_MM.events()},createTab:function(options){var tab=new west.gui.Scrollpane();if(options==null){options={};$(tab.getMainDiv())}
if(options.tab){Array.from(options.tab).forEach(function(elm){tab.appendContent(elm)})}
if(options.addclass){tab.addClass(options.addclass)}
return $(tab.getMainDiv()).css("margin-top","6px")},tabclick:function(win,id){if(win){win.activateTab(id).$('div.tw2gui_window_content_pane > *',win.divMain).each(function(i,e){if($(e).hasClass(TW_K_MM.utils.concatenation(new Array(TW_K_MM.API.id,"_",id)))){$(e).children().fadeIn();$(e).show()}else{$(e).children().fadeOut();$(e).hide()}})}},createButton:function(options){var button;if(options==null){options={}}
if(options.icon){button=new west.gui.Iconbutton(options.icon,options.onclick)}else{button=new west.gui.Button(options.text,options.onclick)}
if(options.css){$(button.getMainDiv()).css(options.css)}
if(options.id){$(button.getMainDiv())[0].id=options.id}
return button},createTextfield:function(options){var field=new west.gui.Textfield;if(options==null){options={};$(field.getMainDiv())}
if(options.size){field.setSize(options.size)}
if(options.placeholder){field.setPlaceholder(options.placeholder)}
if(options.label){field.setLabel($(TW_K_MM.utils.concatenation(new Array("<span>",options.label,"</span>"))))}
if(options.value){field.setValue(options.value)}
if(options.css){$(field.getMainDiv()).css(options.css)}
return field},createLabel:function(options){var _span;if(options==null){options={}}
if(options.id&&options.css&&options.class&&!options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id," class=",options.class,"></span>"))).css(options.css)}else if(options.id&&!options.css&&!options.class&&!options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id,"></span>")))}else if(options.id&&options.css&&!options.class&&!options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id,"></span>"))).css(options.css)}else if(options.id&&options.css&&options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id," class=",options.class,">",options.label,"</span>"))).css(options.css)}else if(options.id&&!options.css&&!options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id,">",options.label,"</span>")))}else if(options.id&&options.css&&!options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span"," id=",options.id,">",options.label,"</span>"))).css(options.css)}else if(!options.id&&options.css&&!options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span>",options.label,"</span>"))).css(options.css)}else if(!options.id&&!options.css&&!options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span>",options.label,"</span>")))}else if(!options.id&&!options.css&&options.class&&!options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span class=",options.class,"></span>")))}else if(!options.id&&options.css&&options.class&&!options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span class=",options.class,"></span>"))).css(options.css)}else if(!options.id&&options.css&&options.class&&options.label){_span=$(TW_K_MM.utils.concatenation(new Array("<span class=",options.class,">",options.label,"</span>"))).css(options.css)}else{_span=$("<span></span>")}
return _span},createDiv:function(options){var _div;if(options==null){options={}}
if(!options.id&&options.css&&!options.class){_div=$("<div />").css(options.css)}else if(options.id&&options.css&&!options.class){_div=$("<div id="+options.id+" />").css(options.css)}else if(!options.id&&!options.css&&options.class){_div=$("<div class="+options.class+" />")}else if(options.id&&!options.css&&options.class){_div=$("<div id=\""+options.id+"\" class="+options.class+" />")}else{_div=$("<div />")}
return _div},createImage:function(options){var _img;if(options==null){options={}}
if(options.id&&options.class&&options.src){_img=$("<img id=\""+options.id+"\" src="+options.src+" class="+options.class+"</img>")}else if(!options.id&&options.class&&options.src){_img=$("<img src="+options.src+" class="+options.class+"</img>")}else{_img=$("<img src=\"target_blanck\"/>")}
return _img}},init:function(){TW_K_MM.GUI.createMenuButton({title:TW_K_MM.API.name,image:TW_K_MM.GUI.images.icon_menu,onclick:function(e){TW_K_MM.GUI.createWindow();e.preventDefault()}})},events:function(){$(".butMinus").click(function(){var node_minus;Array.from(($(this).parent())[0].children).forEach(function(node){if(node.className=="displayValue"){if(node.innerText!=0){node.innerText=--node.innerText;if(node.innerText==0){$(node_minus).css("opacity","0.3")}}}
if(node.className=="butMinus"){node_minus=node}})});$(".butPlus").click(function(){Array.from($(this).parent()[0].children).forEach(function(node){if(node.className=="displayValue"){node.innerText=++node.innerText}
if(node.className=="butMinus"){$(node).css("opacity","1")}})});$(".supp_item").click(function(){var type=($(this)[0].id).split("id_supp_")[1];$("#id_supp_"+type).hide();$("#id_info_"+type).hide();$("#id_"+type)[0].innerText="A recalculer";var id_item_sup;Array.from(TW_K_MM.calculatorItems.result_best_items).forEach(function(item){if(type==item.type){id_item_sup=item.item_id}})
var list_item={};Object.entries(TW_K_MM.calculatorItems.getListItemModify).forEach(([key,value])=>{Array.from(value).forEach(function(id){if(id!=id_item_sup){list_item[key]=value}})});TW_K_MM.calculatorItems.getListItemModify=list_item;$("#id_calc_best_items").hide();$("#id_recalc_best_items").show()})},calculatorItems:{init:function(){TW_K_MM.calculatorItems.getListItemModify=TW_K_MM.calculatorItems.getListItemInit;var elements=[],elements_grp1_3,elements_grp1_rigth=[];var div_grp1_left=TW_K_MM.GUI.createDiv({css:{"float":"left","width":"70%","height":"265px"}});Array.from(CharacterSkills.allAttrKeys).forEach(function(attribute){var div_grp1_0=TW_K_MM.GUI.createDiv({class:"sk_skills_content"});Array.from(CharacterSkills.getSkillKeys4Attribute(attribute)).forEach(function(skill){var div_grp1_1=TW_K_MM.GUI.createDiv({class:"pm_skillbox"});div_grp1_1.append((TW_K_MM.GUI.createImage({class:"skillicon",src:"https://westfr.innogamescdn.com/images/window/skills/skillicon_"+skill+".png"}))[0].outerHTML);var div_grp1_2=TW_K_MM.GUI.createDiv({class:"skill_plusminus"});elements_grp1_3=[];var div_grp1_3=TW_K_MM.GUI.createDiv({id:"sh_pmbut_skill_"+skill,class:"tw2gui_plusminus"});elements_grp1_3.push((TW_K_MM.GUI.createLabel({class:"butMinus",css:{"opacity":"0.3","cursor":"pointer"}}))[0].outerHTML);elements_grp1_3.push((TW_K_MM.GUI.createLabel({class:"displayValue",css:{"width":"56px","display":"inline-block"},label:"0"}))[0].outerHTML);elements_grp1_3.push((TW_K_MM.GUI.createLabel({class:"butPlus",css:{"opacity":"1","cursor":"pointer"}}))[0].outerHTML);elements_grp1_3.forEach(function(elt_grp1_3){div_grp1_3.append(elt_grp1_3)});div_grp1_2.append(div_grp1_3);div_grp1_1.append(div_grp1_2);div_grp1_0.append(div_grp1_1);div_grp1_left.append(div_grp1_0)})});var div_grp1_right=TW_K_MM.GUI.createDiv({id:"id_result",css:{"float":"right","width":"30%","height":"265px"}});Array.from(TW_K_MM.calculatorItems.elt_wear).forEach(function(elt){var elt_wear;var elt_wear_lbl=(TW_K_MM.GUI.createLabel({label:elt.charAt(0).toUpperCase()+elt.substring(1).toLowerCase()+" :",css:{"font-weight":"bold"}}));var elt_wear_supp=(TW_K_MM.GUI.createLabel({id:"id_supp_"+elt,label:"Supp",class:"supp_item",css:{"font-weight":"bold","color":"brown","text-decoration":"underline","margin-left":"6px","display":"none"}}));var elt_wear_info=(TW_K_MM.GUI.createLabel({id:"id_info_"+elt,label:"Info",class:"info_item",css:{"font-weight":"bold","color":"brown","text-decoration":"underline","margin-left":"6px","display":"none"}}));var elt_wear_npt=(TW_K_MM.GUI.createLabel({id:"id_"+elt,label:"Rien trouvé",css:{"margin-left":"2px"}}));elt_wear=TW_K_MM.utils.concatenation(new Array(elt_wear_lbl[0].outerHTML,elt_wear_supp[0].outerHTML,elt_wear_info[0].outerHTML,"</br>",elt_wear_npt[0].outerHTML,"</br>"));elements_grp1_rigth.push(elt_wear)});Array.from(elements_grp1_rigth).forEach(function(elt){div_grp1_right.append(elt)})
var div_grp1=TW_K_MM.GUI.createDiv({css:{"margin-top":"6px","margin-bottom":"6px"}});div_grp1.append(div_grp1_left).append(div_grp1_right);elements.push(div_grp1);elements.push("</br>");elements.push((TW_K_MM.GUI.createButton({id:"id_calc_best_items",text:"Meilleur équipement",css:{"padding-top":"4px"},onclick:function(button,data=TW_K_MM.calculatorItems.getDatas()){TW_K_MM.calculatorItems.reset();var result="";TW_K_MM.calculatorItems.getBestItems(data,!1,TW_K_MM.calculatorItems.getListItemInit);Array.from(TW_K_MM.calculatorItems.result_best_items).forEach(function(temp_){$("#id_"+temp_.type).text(temp_.name);$("#id_dollars")[0].innerText=parseInt($("#id_dollars")[0].innerText)+parseInt(temp_.price);var title="";Object.entries(temp_.bonus.attributes).forEach(([key,value])=>{title=TW_K_MM.utils.concatenation(new Array(title,"+ ",value," ",key,"</br>"))});Object.entries(temp_.bonus.skills).forEach(([key,value])=>{title=TW_K_MM.utils.concatenation(new Array(title,"+ ",value," ",key,"</br>"))});title=TW_K_MM.utils.concatenation(new Array(title,temp_.price,"$"));document.getElementById("id_info_"+temp_.type).setAttribute('title',title);$("#id_supp_"+temp_.type).show();$("#id_info_"+temp_.type).show()})}})).getMainDiv());elements.push((TW_K_MM.GUI.createButton({text:"Reset",css:{"padding-top":"4px"},onclick:function(button){TW_K_MM.calculatorItems.reset(!0);$("#id_calc_best_items").show();$("#id_recalc_best_items").hide();$(".supp_item").hide();$(".info_item").hide()}})).getMainDiv());elements.push((TW_K_MM.GUI.createButton({id:"id_recalc_best_items",text:"Recalculer",css:{"padding-top":"4px","display":"none"},onclick:function(button,data=TW_K_MM.calculatorItems.getDatas()){TW_K_MM.calculatorItems.reset();var result="";TW_K_MM.calculatorItems.getBestItems(data,!1,TW_K_MM.calculatorItems.getListItemModify);TW_K_MM.calculatorItems.result_best_items.forEach(function(temp_){$("#id_"+temp_.type).text(temp_.name);$("#id_dollars")[0].innerText=parseInt($("#id_dollars")[0].innerText)+parseInt(temp_.price);var title="";Object.entries(temp_.bonus.attributes).forEach(([key,value])=>{title=TW_K_MM.utils.concatenation(new Array(title,"+ ",value," ",key,"</br>"))});Object.entries(temp_.bonus.skills).forEach(([key,value])=>{title=TW_K_MM.utils.concatenation(new Array(title,"+ ",value," ",key,"</br>"))});title=TW_K_MM.utils.concatenation(new Array(title,temp_.price,"$"));document.getElementById("id_info_"+temp_.type).setAttribute('title',title);$("#id_supp_"+temp_.type).show();$("#id_info_"+temp_.type).show()})}})).getMainDiv());var div_grp2_0=TW_K_MM.GUI.createDiv({css:{"margin-top":"10px","margin-left":"10px"}});var dollars_lbl=(TW_K_MM.GUI.createLabel({label:"Cout : ",css:{"font-weight":"bold"}}));var dollars_npt=(TW_K_MM.GUI.createLabel({id:"id_dollars",label:"0"}));var div_grp2_1=TW_K_MM.utils.concatenation(new Array(dollars_lbl[0].outerHTML,dollars_npt[0].outerHTML," $"));div_grp2_0.append(div_grp2_1);elements.push(div_grp2_0);return elements},getDatas:function(){var datas={};Array.from(CharacterSkills.allSkillKeys).forEach(function(skill){Array.from(($("#sh_pmbut_skill_"+skill))[0].children).forEach(function(node){if(node.className=="displayValue"){datas[skill]=node.innerText}})});return datas},getListItemInit:{1:["204000"],2:["205000"],3:["207000"],4:["216000"],5:["219000"],6:["221000"],7:["224000"],8:["244000"],9:["253000"],10:["254000"],11:["235000"],12:["256000"],13:["257000"],14:["261000"],15:["305000"],16:["312000"],17:["316000"],18:["327000"],19:["332000"],20:["341000"],21:["342000"],22:["364000"],23:["369000"],24:["375000"],25:["404000"],26:["417000"],27:["428000"],28:["429000"],29:["436000"],30:["10011000"],31:["10017000"],32:["10044000"],33:["10053000"],34:["10094000"],35:["10074000"],36:["10145000"],37:["10146000"],38:["10230000"],39:["10231000"],40:["10242000"],41:["10247000"],42:["10250000"],43:["10255000"],44:["10239000"],45:["40098000"],46:["40128000"],47:["40137000"],48:["40146000"],49:["40148000"],50:["40156000"],51:["40161000"],52:["40163000"],53:["40174000"],54:["40179000"],55:["40180000"],56:["42046000"],57:["42064000"],58:["42066000"],59:["42084000"],60:["42103000"],61:["42111000"],62:["42114000"],63:["42121000"],64:["42123000"],65:["42127000"],66:["42137000"],67:["42129000"],68:["42135000"],69:["42136000"],70:["42146000"],71:["43017000"],72:["43062000"],73:["43081000"],74:["43099000"],75:["43115000"],76:["43117000"],77:["43121000"],78:["43130000"],79:["43134000"],80:["43141000"],81:["1000"],82:["4000"],83:["5000"],84:["6000"],85:["33000"],86:["47000"],87:["124000"],88:["132000"],89:["17000"],90:["800000"],91:["802000"],92:["805000"],93:["806000"],94:["807000"],95:["808000"],96:["821000"],97:["836000"],98:["915000"],99:["920000"],100:["924000"],101:["44010000"],102:["44014000"],103:["44018000"],104:["45008000"],105:["45012000"],106:["503000"],107:["508000"],108:["509000"],109:["510000"],110:["512000"],111:["536000"],112:["538000"],113:["539000"],114:["548000"],115:["600000"],116:["601000"],117:["602000"],118:["605000"],119:["671000"],120:["11004000"],121:["11051000"],122:["11112000"],123:["11115000"],124:["11220000"],125:["11225000"],126:["11227000"],127:["11244000"],128:["11254000"],129:["11260000"],130:["11268000"],131:["41121000"],132:["41124000"],133:["41127000"],134:["41129000"],135:["41131000"],136:["41134000"],137:["41151000"],138:["41154000"],139:["41170000"],140:["41172000"]},getListItemModify:"",elt_wear:["animal","belt","body","foot","yield","head","left_arm","neck","pants","right_arm"],result_best_items:"",getBestItems:function(name,err,forceDetachLink){var scos={};var reusedList=[];west.common.forEach(forceDetachLink,function(subsubres,canCreateDiscussions){var item=ItemManager.get(subsubres[0]);var i=item.getType();var callback=item.getValue(name);scos[i]=scos[i]||[];if(callback&&(err?item.wearable():!0)){scos[i].push({item:item,id:item.getId(),base_id:canCreateDiscussions,value:callback})}});west.common.forEach(scos,function(rows,i){scos[i]=rows.sort(function(cube_vb,cube_va){return cube_va.value-cube_vb.value});if(scos[i].length){reusedList.push(scos[i][0].item)}});TW_K_MM.calculatorItems.result_best_items=reusedList},reset:function(complete){Array.from(TW_K_MM.calculatorItems.elt_wear).forEach(function(elt){$("#id_"+elt).text("Rien trouvé")});$("#id_dollars")[0].innerText="0";if(complete){Array.from(CharacterSkills.allSkillKeys).forEach(function(skill){Array.from(($("#sh_pmbut_skill_"+skill))[0].children).forEach(function(node){if(node.className=="displayValue"){node.innerText=0}})});$(".butMinus").css("opacity","0.3");TW_K_MM.calculatorItems.getListItemModify=TW_K_MM.calculatorItems.getListItemInit}}},utils:{concatenation:function(strings){var result="";Array.from(strings).forEach(function(str){result=result.concat(str)});return result}}}})
$(document).ready(function(){TW_K_MM.init()})