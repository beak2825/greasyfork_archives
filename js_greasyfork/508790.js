// ==UserScript==
// @name                NUIST LevOJ 刷题助手
// @namespace           http://howardzhangdqs.eu.org/
// @source              https://github.com/Howardzhangdqs/levoj-toolkit
// @version             0.1.1
// @description         LevOJ 是 NUIST 开发的一个在线 OJ，本插件可以帮助你更方便的刷题。
// @author              HowardZhangdqs
// @match               *://client.vpn.nuist.edu.cn/https/*
// @license             MIT
// @icon                data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEuUJ8g7hB/4O4Qf+DuEH/f6tA/2BNNf9eSTX/Xkk1/15JNf9eSTX/Xkk1/15JNf9kXDf/cIA7/3CAO/9xgjx8n79gCIS4Qd+DuEH/g7hB/4O4Qf9uejr/Xkk1/15JNf9eSTX/Xkk1/15JNf9eSzb/bnk6/3CAO/9wgDvfgJ9ACAAAAACGuUNUg7hB/4O4Qf+DuEH/gbZA/2JTNv9eSTX/Xkk1/15JNf9eSTX/ZmQ4/3CAO/9wgDv/cIM9VAAAAAAAAAAAAAAAAIS4Qb+DuEH/g7hB/4O4Qf90jT3/Xkk1/15JNf9eSTX/YE82/299O/9wgDv/cYE8wAAAAAAAAAAAAAAAAAAAAACIuEEvg7hC/YO4Qf+DuEH/g7hB/2VeN/9eSTX/Xkk1/2psOf9wgDv/cYA7/XKCPC8AAAAAAAAAAAAAAAAAAAAAAAAAAIW5QZiDuEH/g7hB/4O4Qf97oT//X0o1/2JWNv9wgDv/cIA7/3GAPJkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMv00Ug7lB74O4Qf+DuEH/g7hB/2ttOf5tdDn/cIA7/3GBPPB5hj0VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIS4QnCDuEH/g7hB/4O4Qf+DsUGhcIE76HCAO/9xgT1xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/v4AEhLlB14O4Qf+DuELxi7lGFnGBO2NtcjqYmZlmBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIO4Q0iDuEH/hbhDcwAAAACA/4ACdYVAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAg7lCjpnMZgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAD//wAAgAEAAIABAADAAwAAwAMAAOAHAADgBwAA8A8AAPgfAAD43wAA/f8AAP3/AAD//wAA//8AAA==
// @grant               none
// @downloadURL https://update.greasyfork.org/scripts/508790/NUIST%20LevOJ%20%E5%88%B7%E9%A2%98%E5%8A%A9%E6%89%8B.user.js
// @updateURL https://update.greasyfork.org/scripts/508790/NUIST%20LevOJ%20%E5%88%B7%E9%A2%98%E5%8A%A9%E6%89%8B.meta.js
// ==/UserScript==

(()=>{let t=()=>{var t=window.location.href.split("/");let n=0;for(let e=0;e<t.length;e++)if(50<t[e].length){n=e+1;break}var e=t.slice(n);return t.slice(0,n).join("/")+(`/v1/problem/logic?prefix=${e[e.length-2]}&logicId=`+e[e.length-1])};var n=function(e,r,c,a){return new(c=c||Promise)(function(n,t){function o(e){try{l(a.next(e))}catch(e){t(e)}}function i(e){try{l(a.throw(e))}catch(e){t(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(o,i)}l((a=a.apply(e,r||[])).next())})};n(void 0,void 0,void 0,function*(){let e=document.createElement("button");e.style.position="fixed",e.style.bottom="10px",e.style.left="10px",e.style.zIndex="9999",e.innerText="复制 Markdown",e.className="btn btn-primary btn-sm",e.addEventListener("click",()=>n(void 0,void 0,void 0,function*(){var e=t(),e=(yield(yield fetch(e)).json()).content;navigator.clipboard.writeText(e)})),document.body.appendChild(e),e.style.display="none",setInterval(()=>{-1!==window.location.href.indexOf("/problem/")?e.style.display="block":e.style.display="none"},500)})})();