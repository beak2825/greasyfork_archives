// ==UserScript==
// @name         Drawaria The Great Fire System ヰ
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Men煤 con tres efectos tem谩ticos de fuego: Ascuas, Onda de Calor y Llama Pura.
// @author       YouTubeDrawaria
// @include      https://drawaria.online/*
// @include      https://*.drawaria.online/*
// @grant        GM_addStyle
// @run-at       document-idle
// @icon         https://www.google.com/s2/favicons?sz=64&domain=drawaria.online
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/555628/Drawaria%20The%20Great%20Fire%20System%20%F0%9F%94%A5%F0%9F%8C%8B.user.js
// @updateURL https://update.greasyfork.org/scripts/555628/Drawaria%20The%20Great%20Fire%20System%20%F0%9F%94%A5%F0%9F%8C%8B.meta.js
// ==/UserScript==

(function() {
    'use strict';

    const MENU_ID = 'fire-system-menu-container';
    const OVERLAY_ID = 'fire-system-overlay';
    const EFFECT_DURATION = 4000; // Duraci贸n base para los efectos

    // 1. Contenido del SVG (Con los IDs de los botones)
    const menuSVG = `
        <?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" xmlns:bx="https://boxy-svg.com">
  <defs>
    <filter id="hue-rotate-filter-0" bx:preset="hue-rotate 1 158" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
      <feColorMatrix type="hueRotate" values="158"/>
    </filter>
    <filter id="filter-1" bx:preset="hue-rotate 1 -157" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
      <feColorMatrix type="hueRotate" values="-157"/>
    </filter>
    <style bx:fonts="ADLaM Display">@import url(https://fonts.googleapis.com/css2?family=ADLaM+Display%3Aital%2Cwght%400%2C400&amp;display=swap);</style>
    <filter id="outline-filter-0" bx:preset="outline 1 4 #da9f55" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
      <feMorphology in="SourceAlpha" result="dilated" operator="dilate" radius="4"/>
      <feFlood flood-color="#da9f55" result="flood"/>
      <feComposite in="flood" in2="dilated" operator="in" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="drop-shadow-filter-1" bx:preset="drop-shadow 1 10 10 0 0.5 rgba(0,0,0,0.3)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="0"/>
      <feOffset dx="10" dy="10"/>
      <feComponentTransfer result="offsetblur">
        <feFuncA id="spread-ctrl" type="linear" slope="1"/>
      </feComponentTransfer>
      <feFlood flood-color="rgba(0,0,0,0.3)"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  <g style="filter: url(&quot;#drop-shadow-filter-1&quot;);">
    <g id="orange" style="shape-rendering: crispedges;" transform="matrix(0.89152, 0, 0, 0.89152, -104.927248, -31.896634)">
      <g transform="matrix(1, 0, 0, 1, 53.953489, 51.567834)">
        <path d="M137.6956058921344 329 L146.64104557753015 345 L158.22392476347454 361 L171.24268941365017 376 L186.4149063467728 392 L202.42264750270238 408 L218.50251660227792 424 L233.2023261811669 439 L247.3453676043581 455 L259.5800517231205 471 L262.86620659830123 479 L262.86620659830123 479 L258.91620659830124 479 L254.96620659830123 479 L251.0162065983012 479 L247.06620659830122 479 L243.11620659830123 479 L239.16620659830122 479 L235.21620659830123 479 L231.2662065983012 479 L227.31620659830122 479 L223.36620659830123 479 L219.41620659830122 479 L215.46620659830123 479 L211.5162065983012 479 L207.56620659830122 479 L203.61620659830123 479 L199.66620659830122 479 L195.71620659830123 479 L191.7662065983012 479 L191.7662065983012 479 L189.4979311409999 471 L186.85971271870318 455 L181.8607461395869 439 L175.7677972675586 424 L167.9413585214134 408 L159.73465686652332 392 L151.91108858204933 376 L145.76030729985706 361 L140.63543227191687 345 L137.6956058921344 329Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M187.47121635054987 348 L197.01532525193542 362 L205.32037212578828 377 L211.7791165566595 391 L216.7508803733675 406 L220.30999244007137 420 L222.5745102044047 435 L224.18401328398028 449 L225.09249140673114 464 L226.2537189565595 478 L225.97944291003597 479 L225.97944291003597 479 L220.829442910036 479 L215.679442910036 479 L210.52944291003598 479 L205.37944291003598 479 L200.22944291003597 479 L195.07944291003597 479 L189.929442910036 479 L184.77944291003598 479 L179.62944291003598 479 L174.47944291003597 479 L169.32944291003597 479 L164.179442910036 479 L159.02944291003598 479 L153.87944291003598 479 L148.72944291003597 479 L143.57944291003597 479 L138.42944291003596 479 L133.27944291003598 479 L133.27944291003598 479 L133.71463371747427 478 L144.8380215522613 464 L155.83869103865806 449 L165.49467652457105 435 L174.08442071449963 420 L180.7716703941575 406 L185.5992828768258 391 L188.36777337318952 377 L188.80721714382733 362 L187.47121635054987 348Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M149.62899550295205 287 L147.9708694380334 301 L146.680645342353 316 L146.58604258194654 330 L147.5423909578318 345 L150.01334147962692 359 L154.0766740531363 374 L159.67790120286037 388 L166.83437910885021 402 L175.91596780874508 417 L182.55580273557666 431 L190.79327006066723 446 L195.64678926468625 460 L201.48396484711188 475 L200.31349330810335 479 L196.56349330810335 479 L192.81349330810335 479 L189.06349330810335 479 L185.31349330810335 479 L181.56349330810335 479 L177.81349330810335 479 L174.06349330810335 479 L170.31349330810335 479 L166.56349330810335 479 L162.81349330810335 479 L159.06349330810335 479 L155.31349330810335 479 L149.30995237309938 475 L137.41643583433282 460 L126.75106631846347 446 L120.0853245650985 431 L114.91243350521077 417 L114.00610468057579 402 L114.5941174190766 388 L116.41139338785564 374 L119.49878846507389 359 L123.78272359816445 345 L129.29020058610453 330 L135.4760715377792 316 L142.5432187103827 301 L149.62899550295205 287Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M184.0506222888186 293 L186.6627572313276 307 L188.90362039006115 322 L190.9817189111782 336 L192.77694948939126 351 L194.60565493737064 365 L196.2977683396229 380 L198.22448544359256 394 L200.33696151502755 408 L202.60961421541748 423 L201.10031447983908 437 L199.75270384880278 452 L194.3287911767606 466 L189.12771199212045 479 L184.52771199212046 479 L179.92771199212046 479 L175.32771199212047 479 L170.72771199212048 479 L166.12771199212045 479 L161.52771199212046 479 L156.92771199212046 479 L152.32771199212047 479 L147.72771199212048 479 L143.12771199212045 479 L138.52771199212046 479 L133.92771199212046 479 L129.32771199212047 479 L124.72771199212046 479 L122.30716955513897 466 L120.64064563674455 452 L124.03711281663743 437 L127.45867866448192 423 L135.35733573540176 408 L142.85463097373807 394 L150.11273715459174 380 L157.25638258809832 365 L163.7474276598694 351 L169.892529721989 336 L175.26910895554974 322 L180.0731522417226 307 L184.0506222888186 293Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M165.6897597681659 299 L173.2964376318112 315 L178.85397692841883 331 L182.56450089869395 347 L184.80624180801763 363 L186.10269860699583 379 L187.0799490546857 395 L188.4155972184896 411 L190.66458950175178 428 L194.7913647505003 444 L195.7346533198766 460 L198.89185033624014 476 L194.19687368967053 479 L188.6468736896705 479 L183.09687368967053 479 L177.54687368967052 479 L171.9968736896705 479 L166.44687368967053 479 L160.8968736896705 479 L155.34687368967053 479 L149.79687368967052 479 L144.2468736896705 479 L138.69687368967053 479 L133.1468736896705 479 L127.59687368967052 479 L122.04687368967052 479 L116.49687368967051 479 L110.94687368967053 479 L105.39687368967051 479 L99.51950106389089 476 L99.17644126166454 460 L101.04728990642546 444 L109.83797827514057 428 L120.0178841207765 411 L130.32942930416596 395 L140.37400837830558 379 L149.4740172757931 363 L157.00337823757127 347 L162.43859231303423 331 L165.4014272368008 315 L165.6897597681659 299Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M124.02058829881967 320 L136.86802868971645 332 L150.75530176166882 345 L164.04612333382255 357 L177.32155502762689 369 L191.12452054783972 382 L203.91549586356666 394 L216.88886938900384 407 L228.7124737624248 419 L239.9596702494448 431 L245.60193484930755 444 L249.89365093224137 456 L247.67993606271125 468 L244.2275272322832 479 L238.4775272322832 479 L232.7275272322832 479 L226.9775272322832 479 L221.2275272322832 479 L215.4775272322832 479 L209.7275272322832 479 L203.9775272322832 479 L198.2275272322832 479 L192.4775272322832 479 L186.7275272322832 479 L180.9775272322832 479 L175.2275272322832 479 L169.4775272322832 479 L163.7275272322832 479 L157.47286745564264 468 L150.611114549705 456 L148.51981426718697 444 L145.261333451108 431 L146.4920995420506 419 L146.65747645761093 407 L145.30634825441905 394 L143.50601742933662 382 L140.28621199228385 369 L137.0030879907872 357 L133.2155928219599 345 L128.36303908472686 332 L124.02058829881967 320Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M167.76968253951688 211 L167.56490289484665 222 L167.2943520733384 233 L167.03146341681406 244 L166.85283878180798 255 L166.8366561466732 266 L167.06104445440147 277 L167.60245947478595 288 L168.53409444836652 299 L169.92435855155634 310 L168.93514296217572 321 L168.3613801790338 332 L165.18874260263385 343 L162.35401545107467 354 L159.8833198437579 365 L157.7918816480858 376 L155.29276343733508 382 L152.8674164122369 388 L150.33070008236564 393 L148.02802808165333 399 L145.5758563096279 404 L141.09226924589447 399 L136.63381858548416 393 L132.54038938520986 388 L128.53933308390472 382 L124.78668414288829 376 L121.23758179801986 365 L118.38790318496241 354 L116.22242243631366 343 L114.71501843267207 332 L116.7295296565624 321 L119.15949368669146 310 L124.69043540470747 299 L130.3598399321664 288 L136.09929809265512 277 L141.8356166456337 266 L147.49233982130903 255 L152.99133867668934 244 L158.25443523342156 233 L163.2050276349714 222 L167.76968253951688 211Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M171.10629625964904 212 L177.8578215180569 226 L185.11096933714617 241 L192.09086853455528 255 L199.36135036027963 270 L206.18068439426142 284 L213.07508815060658 299 L219.3969452190061 313 L225.5952963108446 328 L231.1662305133517 342 L233.4015380984767 357 L234.82989725232432 371 L232.39610732142208 386 L229.0573715907887 400 L224.83490041188207 415 L219.87697795579805 429 L215.17281997789954 437 L210.377197607158 444 L205.37018931702522 451 L200.16048587276447 458 L194.51446148808793 466 L192.65300146528006 458 L190.5502308970668 451 L188.43977556973596 444 L186.31294471802428 437 L184.35930643812657 429 L183.3837569607386 415 L182.1602821936993 400 L180.35951688483166 386 L178.16919039161746 371 L178.49592479286338 357 L178.1410745881958 342 L180.0219075374558 328 L180.9828080048689 313 L181.3187471942656 299 L180.76176547534251 284 L179.80625680518608 270 L178.05136749505425 255 L176.14132276749962 241 L173.5819379421733 226 L171.10629625964904 212Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M202.90079993250095 247 L201.5481664649257 259 L199.72160868947643 271 L198.09114404475974 282Z" style="fill: #F9ECA9; stroke: none; opacity: 1; mix-blend-mode: hard-light;"/>
        <path d="M179.11405974143133 239 L186.25367441655987 251 L192.56624950498468 263 L197.92701749754033 275 L202.25939959850288 287 L205.53834082199097 299 L207.7914011659971 311 L209.09755534213983 323 L209.58375333431457 335 L209.41939157794886 347 L205.6823243198814 359 L201.57511483225696 371 L194.06322406236995 383 L186.52538704489453 395 L179.20812117972335 407 L172.5991732959614 418 L167.5949469338741 424 L162.73503922608194 430 L158.03977468543968 436 L153.5268359636248 442 L149.21107079916533 448 L146.20375904054785 442 L143.54829859396358 436 L141.22984172088445 430 L139.23070576963295 424 L137.5305662273543 418 L137.97652034812253 407 L139.50459702410453 395 L141.56260036174626 383 L143.90401296115508 371 L149.40332224087933 359 L154.53248929104657 347 L162.03281778337902 335 L168.57323101781552 323 L173.98433255892846 311 L178.13917242282258 299 L180.95877589787918 287 L182.41558298610582 275 L182.53464867338386 263 L181.39255175543724 251 L179.11405974143133 239Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M188.77103752799826 258 L200.54477639772017 273 L211.51794096918096 288 L221.17049561552935 303 L229.3518112469266 319 L235.08399189955497 334 L238.63729398984037 349 L240.03508869059962 364 L239.4561557010275 379 L237.22297886592503 394 L230.28998925601996 409 L222.4680651365212 424 L210.1015013805375 440 L198.41968807832373 455 L187.47581536373062 470 L179.88754765813192 479 L175.88754765813192 479 L171.88754765813192 479 L167.88754765813192 479 L163.88754765813192 479 L159.88754765813192 479 L155.88754765813192 479 L151.88754765813192 479 L147.88754765813192 479 L143.88754765813192 479 L139.88754765813192 479 L140.2616781495934 470 L144.86459452323018 455 L150.6420419210781 440 L157.6718073402634 424 L167.45838842441913 409 L176.35603499898116 394 L187.09856734343913 379 L195.75026540577633 364 L201.98864534119173 349 L205.63492745049052 334 L206.66574056085588 319 L204.85448729952103 303 L201.0771925284325 288 L195.54269739564114 273 L188.77103752799826 258Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M110.74496382615337 253 L122.83526956815953 269 L135.08376694264592 285 L147.36691392348118 301 L159.567403550328 317 L171.57751663545477 333 L183.7873025650394 350 L195.11391586331825 366 L206.01017491170006 382 L216.43476354024102 398 L222.0805851035583 414 L226.98200433880558 430 L226.6216884975607 446 L225.32873230277602 462 L223.16517406627676 478 L218.50277668448967 479 L213.70277668448966 479 L208.90277668448968 479 L204.10277668448967 479 L199.3027766844897 479 L194.50277668448967 479 L189.70277668448966 479 L184.90277668448968 479 L180.10277668448967 479 L175.3027766844897 479 L170.50277668448967 479 L165.65997656107928 478 L160.0089817830255 462 L153.99299826887048 446 L147.54998770678893 430 L144.92382834680154 414 L141.55326665874412 398 L141.47129757282272 382 L140.41204476144713 366 L138.41682439456122 350 L135.11182016975832 333 L131.40607298899747 317 L127.0043359609032 301 L122.01432827320724 285 L116.55335688624686 269 L110.74496382615337 253Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
      </g>
    </g>
    <g id="blue" style="shape-rendering: crispedges; filter: url(&quot;#hue-rotate-filter-0&quot;);" transform="matrix(0.89152, 0, 0, 0.89152, 41.741483, -130.830508)">
      <g transform="matrix(1, 0, 0, 1, 53.953489, 51.567834)">
        <path d="M137.6956058921344 329 L146.64104557753015 345 L158.22392476347454 361 L171.24268941365017 376 L186.4149063467728 392 L202.42264750270238 408 L218.50251660227792 424 L233.2023261811669 439 L247.3453676043581 455 L259.5800517231205 471 L262.86620659830123 479 L262.86620659830123 479 L258.91620659830124 479 L254.96620659830123 479 L251.0162065983012 479 L247.06620659830122 479 L243.11620659830123 479 L239.16620659830122 479 L235.21620659830123 479 L231.2662065983012 479 L227.31620659830122 479 L223.36620659830123 479 L219.41620659830122 479 L215.46620659830123 479 L211.5162065983012 479 L207.56620659830122 479 L203.61620659830123 479 L199.66620659830122 479 L195.71620659830123 479 L191.7662065983012 479 L191.7662065983012 479 L189.4979311409999 471 L186.85971271870318 455 L181.8607461395869 439 L175.7677972675586 424 L167.9413585214134 408 L159.73465686652332 392 L151.91108858204933 376 L145.76030729985706 361 L140.63543227191687 345 L137.6956058921344 329Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M187.47121635054987 348 L197.01532525193542 362 L205.32037212578828 377 L211.7791165566595 391 L216.7508803733675 406 L220.30999244007137 420 L222.5745102044047 435 L224.18401328398028 449 L225.09249140673114 464 L226.2537189565595 478 L225.97944291003597 479 L225.97944291003597 479 L220.829442910036 479 L215.679442910036 479 L210.52944291003598 479 L205.37944291003598 479 L200.22944291003597 479 L195.07944291003597 479 L189.929442910036 479 L184.77944291003598 479 L179.62944291003598 479 L174.47944291003597 479 L169.32944291003597 479 L164.179442910036 479 L159.02944291003598 479 L153.87944291003598 479 L148.72944291003597 479 L143.57944291003597 479 L138.42944291003596 479 L133.27944291003598 479 L133.27944291003598 479 L133.71463371747427 478 L144.8380215522613 464 L155.83869103865806 449 L165.49467652457105 435 L174.08442071449963 420 L180.7716703941575 406 L185.5992828768258 391 L188.36777337318952 377 L188.80721714382733 362 L187.47121635054987 348Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M149.62899550295205 287 L147.9708694380334 301 L146.680645342353 316 L146.58604258194654 330 L147.5423909578318 345 L150.01334147962692 359 L154.0766740531363 374 L159.67790120286037 388 L166.83437910885021 402 L175.91596780874508 417 L182.55580273557666 431 L190.79327006066723 446 L195.64678926468625 460 L201.48396484711188 475 L200.31349330810335 479 L196.56349330810335 479 L192.81349330810335 479 L189.06349330810335 479 L185.31349330810335 479 L181.56349330810335 479 L177.81349330810335 479 L174.06349330810335 479 L170.31349330810335 479 L166.56349330810335 479 L162.81349330810335 479 L159.06349330810335 479 L155.31349330810335 479 L149.30995237309938 475 L137.41643583433282 460 L126.75106631846347 446 L120.0853245650985 431 L114.91243350521077 417 L114.00610468057579 402 L114.5941174190766 388 L116.41139338785564 374 L119.49878846507389 359 L123.78272359816445 345 L129.29020058610453 330 L135.4760715377792 316 L142.5432187103827 301 L149.62899550295205 287Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M184.0506222888186 293 L186.6627572313276 307 L188.90362039006115 322 L190.9817189111782 336 L192.77694948939126 351 L194.60565493737064 365 L196.2977683396229 380 L198.22448544359256 394 L200.33696151502755 408 L202.60961421541748 423 L201.10031447983908 437 L199.75270384880278 452 L194.3287911767606 466 L189.12771199212045 479 L184.52771199212046 479 L179.92771199212046 479 L175.32771199212047 479 L170.72771199212048 479 L166.12771199212045 479 L161.52771199212046 479 L156.92771199212046 479 L152.32771199212047 479 L147.72771199212048 479 L143.12771199212045 479 L138.52771199212046 479 L133.92771199212046 479 L129.32771199212047 479 L124.72771199212046 479 L122.30716955513897 466 L120.64064563674455 452 L124.03711281663743 437 L127.45867866448192 423 L135.35733573540176 408 L142.85463097373807 394 L150.11273715459174 380 L157.25638258809832 365 L163.7474276598694 351 L169.892529721989 336 L175.26910895554974 322 L180.0731522417226 307 L184.0506222888186 293Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M165.6897597681659 299 L173.2964376318112 315 L178.85397692841883 331 L182.56450089869395 347 L184.80624180801763 363 L186.10269860699583 379 L187.0799490546857 395 L188.4155972184896 411 L190.66458950175178 428 L194.7913647505003 444 L195.7346533198766 460 L198.89185033624014 476 L194.19687368967053 479 L188.6468736896705 479 L183.09687368967053 479 L177.54687368967052 479 L171.9968736896705 479 L166.44687368967053 479 L160.8968736896705 479 L155.34687368967053 479 L149.79687368967052 479 L144.2468736896705 479 L138.69687368967053 479 L133.1468736896705 479 L127.59687368967052 479 L122.04687368967052 479 L116.49687368967051 479 L110.94687368967053 479 L105.39687368967051 479 L99.51950106389089 476 L99.17644126166454 460 L101.04728990642546 444 L109.83797827514057 428 L120.0178841207765 411 L130.32942930416596 395 L140.37400837830558 379 L149.4740172757931 363 L157.00337823757127 347 L162.43859231303423 331 L165.4014272368008 315 L165.6897597681659 299Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M124.02058829881967 320 L136.86802868971645 332 L150.75530176166882 345 L164.04612333382255 357 L177.32155502762689 369 L191.12452054783972 382 L203.91549586356666 394 L216.88886938900384 407 L228.7124737624248 419 L239.9596702494448 431 L245.60193484930755 444 L249.89365093224137 456 L247.67993606271125 468 L244.2275272322832 479 L238.4775272322832 479 L232.7275272322832 479 L226.9775272322832 479 L221.2275272322832 479 L215.4775272322832 479 L209.7275272322832 479 L203.9775272322832 479 L198.2275272322832 479 L192.4775272322832 479 L186.7275272322832 479 L180.9775272322832 479 L175.2275272322832 479 L169.4775272322832 479 L163.7275272322832 479 L157.47286745564264 468 L150.611114549705 456 L148.51981426718697 444 L145.261333451108 431 L146.4920995420506 419 L146.65747645761093 407 L145.30634825441905 394 L143.50601742933662 382 L140.28621199228385 369 L137.0030879907872 357 L133.2155928219599 345 L128.36303908472686 332 L124.02058829881967 320Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M167.76968253951688 211 L167.56490289484665 222 L167.2943520733384 233 L167.03146341681406 244 L166.85283878180798 255 L166.8366561466732 266 L167.06104445440147 277 L167.60245947478595 288 L168.53409444836652 299 L169.92435855155634 310 L168.93514296217572 321 L168.3613801790338 332 L165.18874260263385 343 L162.35401545107467 354 L159.8833198437579 365 L157.7918816480858 376 L155.29276343733508 382 L152.8674164122369 388 L150.33070008236564 393 L148.02802808165333 399 L145.5758563096279 404 L141.09226924589447 399 L136.63381858548416 393 L132.54038938520986 388 L128.53933308390472 382 L124.78668414288829 376 L121.23758179801986 365 L118.38790318496241 354 L116.22242243631366 343 L114.71501843267207 332 L116.7295296565624 321 L119.15949368669146 310 L124.69043540470747 299 L130.3598399321664 288 L136.09929809265512 277 L141.8356166456337 266 L147.49233982130903 255 L152.99133867668934 244 L158.25443523342156 233 L163.2050276349714 222 L167.76968253951688 211Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M171.10629625964904 212 L177.8578215180569 226 L185.11096933714617 241 L192.09086853455528 255 L199.36135036027963 270 L206.18068439426142 284 L213.07508815060658 299 L219.3969452190061 313 L225.5952963108446 328 L231.1662305133517 342 L233.4015380984767 357 L234.82989725232432 371 L232.39610732142208 386 L229.0573715907887 400 L224.83490041188207 415 L219.87697795579805 429 L215.17281997789954 437 L210.377197607158 444 L205.37018931702522 451 L200.16048587276447 458 L194.51446148808793 466 L192.65300146528006 458 L190.5502308970668 451 L188.43977556973596 444 L186.31294471802428 437 L184.35930643812657 429 L183.3837569607386 415 L182.1602821936993 400 L180.35951688483166 386 L178.16919039161746 371 L178.49592479286338 357 L178.1410745881958 342 L180.0219075374558 328 L180.9828080048689 313 L181.3187471942656 299 L180.76176547534251 284 L179.80625680518608 270 L178.05136749505425 255 L176.14132276749962 241 L173.5819379421733 226 L171.10629625964904 212Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M202.90079993250095 247 L201.5481664649257 259 L199.72160868947643 271 L198.09114404475974 282Z" style="fill: #F9ECA9; stroke: none; opacity: 1; mix-blend-mode: hard-light;"/>
        <path d="M179.11405974143133 239 L186.25367441655987 251 L192.56624950498468 263 L197.92701749754033 275 L202.25939959850288 287 L205.53834082199097 299 L207.7914011659971 311 L209.09755534213983 323 L209.58375333431457 335 L209.41939157794886 347 L205.6823243198814 359 L201.57511483225696 371 L194.06322406236995 383 L186.52538704489453 395 L179.20812117972335 407 L172.5991732959614 418 L167.5949469338741 424 L162.73503922608194 430 L158.03977468543968 436 L153.5268359636248 442 L149.21107079916533 448 L146.20375904054785 442 L143.54829859396358 436 L141.22984172088445 430 L139.23070576963295 424 L137.5305662273543 418 L137.97652034812253 407 L139.50459702410453 395 L141.56260036174626 383 L143.90401296115508 371 L149.40332224087933 359 L154.53248929104657 347 L162.03281778337902 335 L168.57323101781552 323 L173.98433255892846 311 L178.13917242282258 299 L180.95877589787918 287 L182.41558298610582 275 L182.53464867338386 263 L181.39255175543724 251 L179.11405974143133 239Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M188.77103752799826 258 L200.54477639772017 273 L211.51794096918096 288 L221.17049561552935 303 L229.3518112469266 319 L235.08399189955497 334 L238.63729398984037 349 L240.03508869059962 364 L239.4561557010275 379 L237.22297886592503 394 L230.28998925601996 409 L222.4680651365212 424 L210.1015013805375 440 L198.41968807832373 455 L187.47581536373062 470 L179.88754765813192 479 L175.88754765813192 479 L171.88754765813192 479 L167.88754765813192 479 L163.88754765813192 479 L159.88754765813192 479 L155.88754765813192 479 L151.88754765813192 479 L147.88754765813192 479 L143.88754765813192 479 L139.88754765813192 479 L140.2616781495934 470 L144.86459452323018 455 L150.6420419210781 440 L157.6718073402634 424 L167.45838842441913 409 L176.35603499898116 394 L187.09856734343913 379 L195.75026540577633 364 L201.98864534119173 349 L205.63492745049052 334 L206.66574056085588 319 L204.85448729952103 303 L201.0771925284325 288 L195.54269739564114 273 L188.77103752799826 258Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M110.74496382615337 253 L122.83526956815953 269 L135.08376694264592 285 L147.36691392348118 301 L159.567403550328 317 L171.57751663545477 333 L183.7873025650394 350 L195.11391586331825 366 L206.01017491170006 382 L216.43476354024102 398 L222.0805851035583 414 L226.98200433880558 430 L226.6216884975607 446 L225.32873230277602 462 L223.16517406627676 478 L218.50277668448967 479 L213.70277668448966 479 L208.90277668448968 479 L204.10277668448967 479 L199.3027766844897 479 L194.50277668448967 479 L189.70277668448966 479 L184.90277668448968 479 L180.10277668448967 479 L175.3027766844897 479 L170.50277668448967 479 L165.65997656107928 478 L160.0089817830255 462 L153.99299826887048 446 L147.54998770678893 430 L144.92382834680154 414 L141.55326665874412 398 L141.47129757282272 382 L140.41204476144713 366 L138.41682439456122 350 L135.11182016975832 333 L131.40607298899747 317 L127.0043359609032 301 L122.01432827320724 285 L116.55335688624686 269 L110.74496382615337 253Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
      </g>
    </g>
    <g id="pink" style="shape-rendering: crispedges; filter: url(&quot;#filter-1&quot;);" transform="matrix(0.89152, 0, 0, 0.89152, 197.568104, -43.764207)">
      <g transform="matrix(1, 0, 0, 1, 53.953489, 51.567834)">
        <path d="M137.6956058921344 329 L146.64104557753015 345 L158.22392476347454 361 L171.24268941365017 376 L186.4149063467728 392 L202.42264750270238 408 L218.50251660227792 424 L233.2023261811669 439 L247.3453676043581 455 L259.5800517231205 471 L262.86620659830123 479 L262.86620659830123 479 L258.91620659830124 479 L254.96620659830123 479 L251.0162065983012 479 L247.06620659830122 479 L243.11620659830123 479 L239.16620659830122 479 L235.21620659830123 479 L231.2662065983012 479 L227.31620659830122 479 L223.36620659830123 479 L219.41620659830122 479 L215.46620659830123 479 L211.5162065983012 479 L207.56620659830122 479 L203.61620659830123 479 L199.66620659830122 479 L195.71620659830123 479 L191.7662065983012 479 L191.7662065983012 479 L189.4979311409999 471 L186.85971271870318 455 L181.8607461395869 439 L175.7677972675586 424 L167.9413585214134 408 L159.73465686652332 392 L151.91108858204933 376 L145.76030729985706 361 L140.63543227191687 345 L137.6956058921344 329Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M187.47121635054987 348 L197.01532525193542 362 L205.32037212578828 377 L211.7791165566595 391 L216.7508803733675 406 L220.30999244007137 420 L222.5745102044047 435 L224.18401328398028 449 L225.09249140673114 464 L226.2537189565595 478 L225.97944291003597 479 L225.97944291003597 479 L220.829442910036 479 L215.679442910036 479 L210.52944291003598 479 L205.37944291003598 479 L200.22944291003597 479 L195.07944291003597 479 L189.929442910036 479 L184.77944291003598 479 L179.62944291003598 479 L174.47944291003597 479 L169.32944291003597 479 L164.179442910036 479 L159.02944291003598 479 L153.87944291003598 479 L148.72944291003597 479 L143.57944291003597 479 L138.42944291003596 479 L133.27944291003598 479 L133.27944291003598 479 L133.71463371747427 478 L144.8380215522613 464 L155.83869103865806 449 L165.49467652457105 435 L174.08442071449963 420 L180.7716703941575 406 L185.5992828768258 391 L188.36777337318952 377 L188.80721714382733 362 L187.47121635054987 348Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M149.62899550295205 287 L147.9708694380334 301 L146.680645342353 316 L146.58604258194654 330 L147.5423909578318 345 L150.01334147962692 359 L154.0766740531363 374 L159.67790120286037 388 L166.83437910885021 402 L175.91596780874508 417 L182.55580273557666 431 L190.79327006066723 446 L195.64678926468625 460 L201.48396484711188 475 L200.31349330810335 479 L196.56349330810335 479 L192.81349330810335 479 L189.06349330810335 479 L185.31349330810335 479 L181.56349330810335 479 L177.81349330810335 479 L174.06349330810335 479 L170.31349330810335 479 L166.56349330810335 479 L162.81349330810335 479 L159.06349330810335 479 L155.31349330810335 479 L149.30995237309938 475 L137.41643583433282 460 L126.75106631846347 446 L120.0853245650985 431 L114.91243350521077 417 L114.00610468057579 402 L114.5941174190766 388 L116.41139338785564 374 L119.49878846507389 359 L123.78272359816445 345 L129.29020058610453 330 L135.4760715377792 316 L142.5432187103827 301 L149.62899550295205 287Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M184.0506222888186 293 L186.6627572313276 307 L188.90362039006115 322 L190.9817189111782 336 L192.77694948939126 351 L194.60565493737064 365 L196.2977683396229 380 L198.22448544359256 394 L200.33696151502755 408 L202.60961421541748 423 L201.10031447983908 437 L199.75270384880278 452 L194.3287911767606 466 L189.12771199212045 479 L184.52771199212046 479 L179.92771199212046 479 L175.32771199212047 479 L170.72771199212048 479 L166.12771199212045 479 L161.52771199212046 479 L156.92771199212046 479 L152.32771199212047 479 L147.72771199212048 479 L143.12771199212045 479 L138.52771199212046 479 L133.92771199212046 479 L129.32771199212047 479 L124.72771199212046 479 L122.30716955513897 466 L120.64064563674455 452 L124.03711281663743 437 L127.45867866448192 423 L135.35733573540176 408 L142.85463097373807 394 L150.11273715459174 380 L157.25638258809832 365 L163.7474276598694 351 L169.892529721989 336 L175.26910895554974 322 L180.0731522417226 307 L184.0506222888186 293Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M165.6897597681659 299 L173.2964376318112 315 L178.85397692841883 331 L182.56450089869395 347 L184.80624180801763 363 L186.10269860699583 379 L187.0799490546857 395 L188.4155972184896 411 L190.66458950175178 428 L194.7913647505003 444 L195.7346533198766 460 L198.89185033624014 476 L194.19687368967053 479 L188.6468736896705 479 L183.09687368967053 479 L177.54687368967052 479 L171.9968736896705 479 L166.44687368967053 479 L160.8968736896705 479 L155.34687368967053 479 L149.79687368967052 479 L144.2468736896705 479 L138.69687368967053 479 L133.1468736896705 479 L127.59687368967052 479 L122.04687368967052 479 L116.49687368967051 479 L110.94687368967053 479 L105.39687368967051 479 L99.51950106389089 476 L99.17644126166454 460 L101.04728990642546 444 L109.83797827514057 428 L120.0178841207765 411 L130.32942930416596 395 L140.37400837830558 379 L149.4740172757931 363 L157.00337823757127 347 L162.43859231303423 331 L165.4014272368008 315 L165.6897597681659 299Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M124.02058829881967 320 L136.86802868971645 332 L150.75530176166882 345 L164.04612333382255 357 L177.32155502762689 369 L191.12452054783972 382 L203.91549586356666 394 L216.88886938900384 407 L228.7124737624248 419 L239.9596702494448 431 L245.60193484930755 444 L249.89365093224137 456 L247.67993606271125 468 L244.2275272322832 479 L238.4775272322832 479 L232.7275272322832 479 L226.9775272322832 479 L221.2275272322832 479 L215.4775272322832 479 L209.7275272322832 479 L203.9775272322832 479 L198.2275272322832 479 L192.4775272322832 479 L186.7275272322832 479 L180.9775272322832 479 L175.2275272322832 479 L169.4775272322832 479 L163.7275272322832 479 L157.47286745564264 468 L150.611114549705 456 L148.51981426718697 444 L145.261333451108 431 L146.4920995420506 419 L146.65747645761093 407 L145.30634825441905 394 L143.50601742933662 382 L140.28621199228385 369 L137.0030879907872 357 L133.2155928219599 345 L128.36303908472686 332 L124.02058829881967 320Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M167.76968253951688 211 L167.56490289484665 222 L167.2943520733384 233 L167.03146341681406 244 L166.85283878180798 255 L166.8366561466732 266 L167.06104445440147 277 L167.60245947478595 288 L168.53409444836652 299 L169.92435855155634 310 L168.93514296217572 321 L168.3613801790338 332 L165.18874260263385 343 L162.35401545107467 354 L159.8833198437579 365 L157.7918816480858 376 L155.29276343733508 382 L152.8674164122369 388 L150.33070008236564 393 L148.02802808165333 399 L145.5758563096279 404 L141.09226924589447 399 L136.63381858548416 393 L132.54038938520986 388 L128.53933308390472 382 L124.78668414288829 376 L121.23758179801986 365 L118.38790318496241 354 L116.22242243631366 343 L114.71501843267207 332 L116.7295296565624 321 L119.15949368669146 310 L124.69043540470747 299 L130.3598399321664 288 L136.09929809265512 277 L141.8356166456337 266 L147.49233982130903 255 L152.99133867668934 244 L158.25443523342156 233 L163.2050276349714 222 L167.76968253951688 211Z" style="fill: #D79700; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M171.10629625964904 212 L177.8578215180569 226 L185.11096933714617 241 L192.09086853455528 255 L199.36135036027963 270 L206.18068439426142 284 L213.07508815060658 299 L219.3969452190061 313 L225.5952963108446 328 L231.1662305133517 342 L233.4015380984767 357 L234.82989725232432 371 L232.39610732142208 386 L229.0573715907887 400 L224.83490041188207 415 L219.87697795579805 429 L215.17281997789954 437 L210.377197607158 444 L205.37018931702522 451 L200.16048587276447 458 L194.51446148808793 466 L192.65300146528006 458 L190.5502308970668 451 L188.43977556973596 444 L186.31294471802428 437 L184.35930643812657 429 L183.3837569607386 415 L182.1602821936993 400 L180.35951688483166 386 L178.16919039161746 371 L178.49592479286338 357 L178.1410745881958 342 L180.0219075374558 328 L180.9828080048689 313 L181.3187471942656 299 L180.76176547534251 284 L179.80625680518608 270 L178.05136749505425 255 L176.14132276749962 241 L173.5819379421733 226 L171.10629625964904 212Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M202.90079993250095 247 L201.5481664649257 259 L199.72160868947643 271 L198.09114404475974 282Z" style="fill: #F9ECA9; stroke: none; opacity: 1; mix-blend-mode: hard-light;"/>
        <path d="M179.11405974143133 239 L186.25367441655987 251 L192.56624950498468 263 L197.92701749754033 275 L202.25939959850288 287 L205.53834082199097 299 L207.7914011659971 311 L209.09755534213983 323 L209.58375333431457 335 L209.41939157794886 347 L205.6823243198814 359 L201.57511483225696 371 L194.06322406236995 383 L186.52538704489453 395 L179.20812117972335 407 L172.5991732959614 418 L167.5949469338741 424 L162.73503922608194 430 L158.03977468543968 436 L153.5268359636248 442 L149.21107079916533 448 L146.20375904054785 442 L143.54829859396358 436 L141.22984172088445 430 L139.23070576963295 424 L137.5305662273543 418 L137.97652034812253 407 L139.50459702410453 395 L141.56260036174626 383 L143.90401296115508 371 L149.40332224087933 359 L154.53248929104657 347 L162.03281778337902 335 L168.57323101781552 323 L173.98433255892846 311 L178.13917242282258 299 L180.95877589787918 287 L182.41558298610582 275 L182.53464867338386 263 L181.39255175543724 251 L179.11405974143133 239Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M188.77103752799826 258 L200.54477639772017 273 L211.51794096918096 288 L221.17049561552935 303 L229.3518112469266 319 L235.08399189955497 334 L238.63729398984037 349 L240.03508869059962 364 L239.4561557010275 379 L237.22297886592503 394 L230.28998925601996 409 L222.4680651365212 424 L210.1015013805375 440 L198.41968807832373 455 L187.47581536373062 470 L179.88754765813192 479 L175.88754765813192 479 L171.88754765813192 479 L167.88754765813192 479 L163.88754765813192 479 L159.88754765813192 479 L155.88754765813192 479 L151.88754765813192 479 L147.88754765813192 479 L143.88754765813192 479 L139.88754765813192 479 L140.2616781495934 470 L144.86459452323018 455 L150.6420419210781 440 L157.6718073402634 424 L167.45838842441913 409 L176.35603499898116 394 L187.09856734343913 379 L195.75026540577633 364 L201.98864534119173 349 L205.63492745049052 334 L206.66574056085588 319 L204.85448729952103 303 L201.0771925284325 288 L195.54269739564114 273 L188.77103752799826 258Z" style="fill: #D0BB48; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
        <path d="M110.74496382615337 253 L122.83526956815953 269 L135.08376694264592 285 L147.36691392348118 301 L159.567403550328 317 L171.57751663545477 333 L183.7873025650394 350 L195.11391586331825 366 L206.01017491170006 382 L216.43476354024102 398 L222.0805851035583 414 L226.98200433880558 430 L226.6216884975607 446 L225.32873230277602 462 L223.16517406627676 478 L218.50277668448967 479 L213.70277668448966 479 L208.90277668448968 479 L204.10277668448967 479 L199.3027766844897 479 L194.50277668448967 479 L189.70277668448966 479 L184.90277668448968 479 L180.10277668448967 479 L175.3027766844897 479 L170.50277668448967 479 L165.65997656107928 478 L160.0089817830255 462 L153.99299826887048 446 L147.54998770678893 430 L144.92382834680154 414 L141.55326665874412 398 L141.47129757282272 382 L140.41204476144713 366 L138.41682439456122 350 L135.11182016975832 333 L131.40607298899747 317 L127.0043359609032 301 L122.01432827320724 285 L116.55335688624686 269 L110.74496382615337 253Z" style="fill: #EFC900; stroke: none; opacity: 0.8; mix-blend-mode: hard-light;"/>
      </g>
    </g>
    <text style="fill: rgb(51, 51, 51); font-family: &quot;ADLaM Display&quot;; font-size: 40.3px; text-transform: capitalize; white-space: pre; filter: url(&quot;#outline-filter-0&quot;);" x="40.503" y="67.987">the great fire system</text>
    <animateTransform type="translate" additive="sum" attributeName="transform" values="0 0;0 10;0 0" begin="0s" dur="4.98s" fill="freeze" keyTimes="0; 0.501128; 1" repeatCount="indefinite"/>
  </g>
</svg>
    `;

    // 2. CSS Styles (Incluyendo keyframes para los efectos de fuego)
    GM_addStyle(`
        /* MEN PRINCIPAL (GRANDE) */
        #${MENU_ID} {
            position: fixed;
            top: 50px;
            left: 50px;
            width: 700px; /* Tama帽o grande para ver bien el SVG */
            height: auto;
            z-index: 10001;
            cursor: grab;
        }
        #${MENU_ID}:active {
            cursor: grabbing;
        }

        /* Contenedor de efectos (Overlay de pantalla completa) */
        #${OVERLAY_ID} {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease-out;
        }
        .effect-active {
            opacity: 1 !important;
        }

        /* --------------------------------- */
        /* EFECTO 1: EMBER RAIN (Ascuas) */
        /* --------------------------------- */
        @keyframes ember-rise {
            0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0.8; }
        }
        .ember-particle {
            position: absolute;
            width: 8px; height: 8px;
            border-radius: 50%;
            background: radial-gradient(circle, #FF4500 0%, #FFA500 50%, transparent 70%); /* Naranja-Rojo */
            box-shadow: 0 0 5px #ff4500;
            animation: ember-rise 3s linear infinite alternate;
        }

        /* --------------------------------- */
        /* EFECTO 2: HEAT WAVE (Onda de Calor) */
        /* --------------------------------- */
        @keyframes heat-haze {
            0% { transform: scale(1); filter: hue-rotate(0deg) brightness(1); }
            50% { transform: scale(1.01) translateX(1px); filter: hue-rotate(5deg) brightness(1.1); }
            100% { transform: scale(1) translateX(-1px); filter: hue-rotate(0deg) brightness(1); }
        }
        .heat-wave-effect {
            /* Se aplica al BODY para simular la distorsi贸n del aire */
            animation: heat-haze 0.1s linear infinite alternate;
            background-color: rgba(255, 100, 0, 0.1); /* Fondo rojizo-c谩lido */
            transition: none !important; /* Desactiva transiciones en el body */
        }

        /* --------------------------------- */
        /* EFECTO 3: PURE FLAME (Llama Pura) */
        /* --------------------------------- */
        @keyframes flame-flicker {
            0%, 100% { opacity: 0.5; }
            20%, 80% { opacity: 0.9; }
            50% { opacity: 0.2; }
        }
        .pure-flame-effect {
            background:
                radial-gradient(circle at 50% 120%, rgba(255, 200, 0, 0.5), rgba(255, 0, 0, 0) 50%),
                radial-gradient(circle at 50% 120%, rgba(255, 160, 0, 0.5), rgba(255, 0, 0, 0) 60%);
            animation: flame-flicker 0.2s linear infinite;
            backdrop-filter: blur(4px) saturate(2);
            -webkit-backdrop-filter: blur(4px) saturate(2);
        }
    `);

    // 3. Funciones de Efectos

    /** Obtiene el overlay de efectos (o lo crea) y lo devuelve. */
    function getOverlay() {
        let overlay = document.getElementById(OVERLAY_ID);
        if (!overlay) {
            overlay = document.createElement('div');
            overlay.id = OVERLAY_ID;
            document.body.appendChild(overlay);
        }
        // Limpia el contenido y las clases antes de usar
        overlay.innerHTML = '';
        overlay.className = '';
        return overlay;
    }

    /**
     * EFECTO 1: Ember Rain (Lluvia de Ascuas)
     */
    function effectEmberRain() {
        const overlay = getOverlay();
        overlay.classList.add('effect-active');

        for (let i = 0; i < 50; i++) {
            const ember = document.createElement('div');
            ember.className = 'ember-particle';
            ember.style.left = `${Math.random() * 100}vw`;
            ember.style.animationDelay = `${-Math.random() * 3}s`;
            overlay.appendChild(ember);
        }

        setTimeout(() => {
            overlay.classList.remove('effect-active');
            setTimeout(() => overlay.innerHTML = '', 600);
        }, EFFECT_DURATION);
    }

    /**
     * EFECTO 2: Heat Wave (Onda de Calor)
     */
    function effectHeatWave() {
        const body = document.body;
        // Aplicar la animaci贸n de distorsi贸n de calor al body
        body.classList.add('heat-wave-effect');

        setTimeout(() => {
            // Limpiar la clase y restablecer la transici贸n (requerido para Heat Wave)
            body.classList.remove('heat-wave-effect');
        }, EFFECT_DURATION);
    }

    /**
     * EFECTO 3: Pure Flame (Llama Pura)
     */
    function effectPureFlame() {
        const overlay = getOverlay();
        // Aplicar filtros de distorsi贸n de color y efecto de parpadeo
        overlay.classList.add('pure-flame-effect', 'effect-active');

        setTimeout(() => {
            // Limpiar la clase y el backdrop-filter
            overlay.classList.remove('pure-flame-effect', 'effect-active');
            overlay.style.backdropFilter = 'none';
        }, EFFECT_DURATION);
    }


    // 4. L贸gica de Manejo de Clic y Dragging

    function handleButtonClick(event) {
        event.preventDefault();

        const buttonGroup = event.currentTarget;
        const buttonId = buttonGroup.id;

        const effectMap = {
            'blue': effectEmberRain,
            'orange': effectHeatWave,
            'pink': effectPureFlame
        };

        if (effectMap[buttonId]) {
            // 1. Feedback visual
            buttonGroup.style.opacity = 0.5;
            setTimeout(() => { buttonGroup.style.opacity = 1; }, 100);

            // 2. Ejecutar efecto
            effectMap[buttonId]();
        }
    }

    /**
     * Hace un elemento HTML arrastrable.
     */
    function dragElement(element) {
        let pos3 = 0, pos4 = 0;
        let isDragging = false;
        const DRAG_THRESHOLD = 5;

        element.onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e = e || window.event;
            // No iniciar drag si se hace clic en un bot贸n interactivo
            if (e.target.closest(`#btn1, #btn2, #btn3`)) return;

            isDragging = false;
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;

            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();

            const dx = e.clientX - pos3;
            const dy = e.clientY - pos4;

            if (Math.abs(dx) > DRAG_THRESHOLD || Math.abs(dy) > DRAG_THRESHOLD) {
                isDragging = true;

                element.style.top = (element.offsetTop + dy) + "px";
                element.style.left = (element.offsetLeft + dx) + "px";

                pos3 = e.clientX;
                pos4 = e.clientY;
            }
        }

        function closeDragElement(e) {
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }


    // 5. Inicializaci贸n
    window.addEventListener('load', () => {
        // 5.1. Crear el contenedor del men煤 e insertar SVG
        const menuContainer = document.createElement('div');
        menuContainer.id = MENU_ID;
        // Escalar el SVG para que se ajuste mejor en la pantalla sin cortar el texto
        menuContainer.style.transform = 'scale(0.7)';
        menuContainer.style.transformOrigin = 'top left';
        menuContainer.innerHTML = menuSVG;
        document.body.appendChild(menuContainer);

        // 5.2. Asignar eventos a los botones
        ['btn1', 'btn2', 'btn3'].forEach(id => {
            const button = document.querySelector(`#${MENU_ID} #${id}`);
            if (button) {
                button.addEventListener('click', handleButtonClick);
            }
        });

        // 5.3. Crear el overlay
        getOverlay();

        // 5.4. Hacer el men煤 arrastrable
        dragElement(menuContainer);
    });

})();