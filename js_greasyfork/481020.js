// ==UserScript==
// @name         No Browser Cache for User Scripts
// @namespace    https://naeembolchhi.github.io/
// @version      0.4
// @description  Updates the user script install link on every refresh to avoid browser caching.
// @author       NaeemBolchhi
// @license      GPL-3.0-or-later
// @icon         data:image/png;base64,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
// @match        https://greasyfork.org/*/scripts/*
// @grant        none
// @run-at       document-end
// @downloadURL https://update.greasyfork.org/scripts/481020/No%20Browser%20Cache%20for%20User%20Scripts.user.js
// @updateURL https://update.greasyfork.org/scripts/481020/No%20Browser%20Cache%20for%20User%20Scripts.meta.js
// ==/UserScript==

// Returns a number string when called
function getString() {
    let date = new Date(),
        inte = date.getFullYear().toString() + date.getMonth().toString().padStart(2,0) + date.getDate().toString().padStart(2,0) + date.getHours().toString().padStart(2,0) + date.getMinutes().toString().padStart(2,0) + date.getSeconds().toString().padStart(2,0);

    return inte;
}

// Updates the download link
function updateLink() {
    let usId = window.location.pathname.replace(/.*scripts\/([0-9]*)\-.*/,'$1');

    try {
        let usJSLink = document.querySelector('#install-area .install-link[href*=".user.js"]');
        usJSLink.setAttribute('href',`https://update.greasyfork.org/scripts/${usId}/${getString()}.user.js`);
    } catch {}

    try {
        let usCSSLink = document.querySelector('#install-area .install-link[href*=".user.css"]');
        usCSSLink.setAttribute('href',`https://update.greasyfork.org/scripts/${usId}/${getString()}.user.css`);
    } catch {}
}

// Initiation
if (!window.location.search.match(/version=/)) {
    updateLink();
}