// ==UserScript==
// @name         SA Translate
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Adds an option to translate SA Notes
// @author       Tyler
// @match        https://my.serviceautopilot.com/ClientView.aspx?*
// @require http://code.jquery.com/jquery-latest.js
// @require https://cdnjs.cloudflare.com/ajax/libs/arrive/2.4.1/arrive.min.js
// @downloadURL https://update.greasyfork.org/scripts/420463/SA%20Translate.user.js
// @updateURL https://update.greasyfork.org/scripts/420463/SA%20Translate.meta.js
// ==/UserScript==
!function(){var t=window.jQuery;"use strict";t(document).arrive("#joNotesSection .showCommentActions .float-left",function(n){t(n).css("width","80%")}),t(document).arrive("#joNotesSection .showCommentActions .jobCommentActions",function(n){t(n).append("<img class='float-right pointer btnTranslateNote' src='https://icon-library.com/images/icon-for-language/icon-for-language-8.jpg' style='width: 24px; height: 24px;'>")}),t(document).arrive(".btnTranslateNote",function(n){t(n).click(function(){var n=t(this).parent().prev().find(".display-inline-block");t.post("https://translation.googleapis.com/language/translate/v2",{format:"text",model:"nmt",source:"es",target:"en",q:n.text(),key:"AIzaSyBrWFh7hrXrai5qDE-G3-smlvxux9eBkyE"},function(t){n.text(t.data.translations[0].translatedText)})})}),t(document).arrive("#edDlgNotes",function(){t("#edDlgNotes").after('<br><textarea id="trInp" class="RadInput_Default rad-input" style="min-width: 98%; max-width: 98%; height: 15px; margin-top: 2px; resize: none; overflow: hidden; overflow-wrap: break-word;" rows="2" cols="40"></textarea>'),t("#trInp").after("<button type='button' id='btnTranslate' class='SmallButton'>Translate</button>"),t("#btnTranslate").after("<button type='button' id='btnTranslateCopy' class='SmallButton'>Copy</button>"),t("#btnTranslate").click(function(){t.post("https://translation.googleapis.com/language/translate/v2",{format:"text",model:"nmt",source:"en",target:"es",q:t("#trInp").val(),key:"AIzaSyBrWFh7hrXrai5qDE-G3-smlvxux9eBkyE"},function(n){t("#trInp").val(t("#trInp").val()+"\n"+n.data.translations[0].translatedText),t("#trInp")[0].style.height="5px",t("#trInp")[0].style.height=t("#trInp")[0].scrollHeight+"px"})}),t("#btnTranslateCopy").click(function(){navigator.clipboard.writeText(t("#trInp").val())}),t("#trInp").on("input",function(){this.style.height="5px",this.style.height=this.scrollHeight+"px"})})}();