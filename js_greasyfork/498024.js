// ==UserScript==
// @name         Ṱ̸̠͖̏T̷̛͉͔̙̯̪͎̫̣̱͋̋́̿ͅ4̴̡͙̲͚̹͍̞̪̑͑̎͋̓͆̓̅̚͜ͅ0̷̨͍̤̠͕̥́
// @author       Ferris
// @description  Very fun
// @version      Obfus
// @match        *://*.moomoo.io/*
// @run-at       document_idle
// @grant        none
// @namespace https://greasyfork.org/users/1318054
// @downloadURL https://update.greasyfork.org/scripts/498024/T%CC%B8%CC%8F%CC%AD%CC%A0%CD%96T%CC%B7%CD%8B%CC%8B%CC%81%CC%9B%CC%BF%CD%89%CD%94%CC%99%CC%AF%CC%AA%CD%8E%CC%AB%CC%A3%CD%85%CC%B14%CC%B4%CC%91%CC%9A%CD%91%CC%8E%CD%8B%CD%83%CD%86%CD%83%CC%85%CD%99%CD%9C%CC%B2%CD%9A%CC%B9%CD%8D%CC%A1%CC%9E%CC%AA%CD%850%CC%B7%CD%81%CD%8D%CC%A4%CC%A8%CC%A0%CD%95%CC%A5.user.js
// @updateURL https://update.greasyfork.org/scripts/498024/T%CC%B8%CC%8F%CC%AD%CC%A0%CD%96T%CC%B7%CD%8B%CC%8B%CC%81%CC%9B%CC%BF%CD%89%CD%94%CC%99%CC%AF%CC%AA%CD%8E%CC%AB%CC%A3%CD%85%CC%B14%CC%B4%CC%91%CC%9A%CD%91%CC%8E%CD%8B%CD%83%CD%86%CD%83%CC%85%CD%99%CD%9C%CC%B2%CD%9A%CC%B9%CD%8D%CC%A1%CC%9E%CC%AA%CD%850%CC%B7%CD%81%CD%8D%CC%A4%CC%A8%CC%A0%CD%95%CC%A5.meta.js
// ==/UserScript==

// press p if pathind / autoplace breaks
let e=!1,t=document.getElementsByTagName("script");for(let i=0;i<t.length;i++)if(t[i].src.includes("index-f3a4c1ad.js")&&!e){t[i].remove(),e=!0;break}function i(e){return document.getElementById(e)}let n=new(function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/bin/",i(i.s=0)}([function(e,t,i){var n={},a=i(1),s=i(2),l=i(3);e.exports=n;var o=1;n.js=function(){var e,t,i,r=1.4,c=!1,d={},h={},p={},u={},m=!0,f={},g=[],w=Number.MAX_VALUE,y=!1;this.setAcceptableTiles=function(e){e instanceof Array?i=e:!isNaN(parseFloat(e))&&isFinite(e)&&(i=[e])},this.enableSync=function(){c=!0},this.disableSync=function(){c=!1},this.enableDiagonals=function(){y=!0},this.disableDiagonals=function(){y=!1},this.setGrid=function(t){e=t;for(var i=0;i<e.length;i++)for(var n=0;n<e[0].length;n++)h[e[i][n]]||(h[e[i][n]]=1)},this.setTileCost=function(e,t){h[e]=t},this.setAdditionalPointCost=function(e,t,i){void 0===p[t]&&(p[t]={}),p[t][e]=i},this.removeAdditionalPointCost=function(e,t){void 0!==p[t]&&delete p[t][e]},this.removeAllAdditionalPointCosts=function(){p={}},this.setDirectionalCondition=function(e,t,i){void 0===u[t]&&(u[t]={}),u[t][e]=i},this.removeAllDirectionalConditions=function(){u={}},this.setIterationsPerCalculation=function(e){w=e},this.avoidAdditionalPoint=function(e,t){void 0===d[t]&&(d[t]={}),d[t][e]=1},this.stopAvoidingAdditionalPoint=function(e,t){void 0!==d[t]&&delete d[t][e]},this.enableCornerCutting=function(){m=!0},this.disableCornerCutting=function(){m=!1},this.stopAvoidingAllAdditionalPoints=function(){d={}},this.findPath=function(t,n,s,r,d){function h(e){c?d(e):setTimeout((function(){d(e)}))}if(void 0===i)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===e)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(t<0||n<0||s<0||r<0||t>e[0].length-1||n>e.length-1||s>e[0].length-1||r>e.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(t!==s||n!==r){for(var p=e[r][s],u=!1,m=0;m<i.length;m++)if(p===i[m]){u=!0;break}if(!1!==u){var w=new a;return w.openList=new l((function(e,t){return e.bestGuessDistance()-t.bestGuessDistance()})),w.isDoneCalculating=!1,w.nodeHash={},w.startX=t,w.startY=n,w.endX=s,w.endY=r,w.callback=h,w.openList.push(T(w,w.startX,w.startY,null,1)),r=o++,f[r]=w,g.push(r),r}h(null)}else h([])},this.cancelPath=function(e){return e in f&&(delete f[e],!0)},this.calculate=function(){if(0!==g.length&&void 0!==e&&void 0!==i)for(t=0;t<w;t++){if(0===g.length)return;c&&(t=0);var n=g[0],a=f[n];if(void 0!==a)if(0!==a.openList.size()){var s=a.openList.pop();if(a.endX!==s.x||a.endY!==s.y)(s.list=0)<s.y&&x(a,s,0,-1,+v(s.x,s.y-1)),s.x<e[0].length-1&&x(a,s,1,0,+v(s.x+1,s.y)),s.y<e.length-1&&x(a,s,0,1,+v(s.x,s.y+1)),0<s.x&&x(a,s,-1,0,+v(s.x-1,s.y)),y&&(0<s.x&&0<s.y&&(m||k(e,i,s.x,s.y-1,s)&&k(e,i,s.x-1,s.y,s))&&x(a,s,-1,-1,r*v(s.x-1,s.y-1)),s.x<e[0].length-1&&s.y<e.length-1&&(m||k(e,i,s.x,s.y+1,s)&&k(e,i,s.x+1,s.y,s))&&x(a,s,1,1,r*v(s.x+1,s.y+1)),s.x<e[0].length-1&&0<s.y&&(m||k(e,i,s.x,s.y-1,s)&&k(e,i,s.x+1,s.y,s))&&x(a,s,1,-1,r*v(s.x+1,s.y-1)),0<s.x&&s.y<e.length-1&&(m||k(e,i,s.x,s.y+1,s)&&k(e,i,s.x-1,s.y,s))&&x(a,s,-1,1,r*v(s.x-1,s.y+1)));else{var l=[];l.push({x:s.x,y:s.y});for(var o=s.parent;null!=o;)l.push({x:o.x,y:o.y}),o=o.parent;l.reverse(),a.callback(l),delete f[n],g.shift()}}else a.callback(null),delete f[n],g.shift();else g.shift()}};var x=function(t,n,a,s,l){a=n.x+a,s=n.y+s,void 0!==d[s]&&void 0!==d[s][a]||!k(e,i,a,s,n)||(void 0===(s=T(t,a,s,n,l)).list?(s.list=1,t.openList.push(s)):n.costSoFar+l<s.costSoFar&&(s.costSoFar=n.costSoFar+l,s.parent=n,t.openList.updateItem(s)))},k=function(e,t,i,n,a){var s=u[n]&&u[n][i];if(s){var l=b(a.x-i,a.y-n);if(!function(){for(var e=0;e<s.length;e++)if(s[e]===l)return!0;return!1}())return!1}for(var o=0;o<t.length;o++)if(e[n][i]===t[o])return!0;return!1},b=function(e,t){if(0===e&&-1===t)return n.TOP;if(1===e&&-1===t)return n.TOP_RIGHT;if(1===e&&0===t)return n.RIGHT;if(1===e&&1===t)return n.BOTTOM_RIGHT;if(0===e&&1===t)return n.BOTTOM;if(-1===e&&1===t)return n.BOTTOM_LEFT;if(-1===e&&0===t)return n.LEFT;if(-1===e&&-1===t)return n.TOP_LEFT;throw new Error("These differences are not valid: "+e+", "+t)},v=function(t,i){return p[i]&&p[i][t]||h[e[i][t]]},T=function(e,t,i,n,a){if(void 0!==e.nodeHash[i]){if(void 0!==e.nodeHash[i][t])return e.nodeHash[i][t]}else e.nodeHash[i]={};var l=I(t,i,e.endX,e.endY);a=null!==n?n.costSoFar+a:0,l=new s(n,t,i,a,l);return e.nodeHash[i][t]=l},I=function(e,t,i,n){var a,s;return y?(a=Math.abs(e-i))<(s=Math.abs(t-n))?r*a+s:r*s+a:(a=Math.abs(e-i))+(s=Math.abs(t-n))}},n.TOP="TOP",n.TOP_RIGHT="TOP_RIGHT",n.RIGHT="RIGHT",n.BOTTOM_RIGHT="BOTTOM_RIGHT",n.BOTTOM="BOTTOM",n.BOTTOM_LEFT="BOTTOM_LEFT",n.LEFT="LEFT",n.TOP_LEFT="TOP_LEFT"},function(e,t){e.exports=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList}},function(e,t){e.exports=function(e,t,i,n,a){this.parent=e,this.x=t,this.y=i,this.costSoFar=n,this.simpleDistanceToTarget=a,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}}},function(e,t,i){e.exports=i(4)},function(e,t,i){var n,a;(function(){var i,s,l,o,r,c,d,h,p,u,m,f,g,w,y;function x(e){this.cmp=null!=e?e:s,this.nodes=[]}l=Math.floor,u=Math.min,s=function(e,t){return e<t?-1:t<e?1:0},p=function(e,t,i,n,a){var o;if(null==i&&(i=0),null==a&&(a=s),i<0)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);i<n;)a(t,e[o=l((i+n)/2)])<0?n=o:i=o+1;return[].splice.apply(e,[i,i-i].concat(t)),t},c=function(e,t,i){return null==i&&(i=s),e.push(t),w(e,0,e.length-1,i)},r=function(e,t){var i,n;return null==t&&(t=s),i=e.pop(),e.length?(n=e[0],e[0]=i,y(e,0,t)):n=i,n},h=function(e,t,i){var n;return null==i&&(i=s),n=e[0],e[0]=t,y(e,0,i),n},d=function(e,t,i){var n;return null==i&&(i=s),e.length&&i(e[0],t)<0&&(t=(n=[e[0],t])[0],e[0]=n[1],y(e,0,i)),t},o=function(e,t){var i,n,a,o,r,c;for(null==t&&(t=s),r=[],n=0,a=(o=function(){c=[];for(var t=0,i=l(e.length/2);0<=i?t<i:i<t;0<=i?t++:t--)c.push(t);return c}.apply(this).reverse()).length;n<a;n++)i=o[n],r.push(y(e,i,t));return r},g=function(e,t,i){if(null==i&&(i=s),-1!==(t=e.indexOf(t)))return w(e,0,t,i),y(e,t,i)},m=function(e,t,i){var n,a,l,r,c;if(null==i&&(i=s),!(a=e.slice(0,t)).length)return a;for(o(a,i),l=0,r=(c=e.slice(t)).length;l<r;l++)n=c[l],d(a,n,i);return a.sort(i).reverse()},f=function(e,t,i){var n,a,l,c,d,h,m,f,g;if(null==i&&(i=s),10*t<=e.length){if(!(l=e.slice(0,t).sort(i)).length)return l;for(a=l[l.length-1],c=0,h=(m=e.slice(t)).length;c<h;c++)i(n=m[c],a)<0&&(p(l,n,0,null,i),l.pop(),a=l[l.length-1]);return l}for(o(e,i),g=[],d=0,f=u(t,e.length);0<=f?d<f:f<d;0<=f?++d:--d)g.push(r(e,i));return g},w=function(e,t,i,n){var a,l,o;for(null==n&&(n=s),a=e[i];t<i&&n(a,l=e[o=i-1>>1])<0;)e[i]=l,i=o;return e[i]=a},y=function(e,t,i){var n,a,l,o,r;for(null==i&&(i=s),a=e.length,l=e[r=t],n=2*t+1;n<a;)(o=n+1)<a&&!(i(e[n],e[o])<0)&&(n=o),e[t]=e[n],n=2*(t=n)+1;return e[t]=l,w(e,r,t,i)},x.push=c,x.pop=r,x.replace=h,x.pushpop=d,x.heapify=o,x.updateItem=g,x.nlargest=m,x.nsmallest=f,x.prototype.push=function(e){return c(this.nodes,e,this.cmp)},x.prototype.pop=function(){return r(this.nodes,this.cmp)},x.prototype.peek=function(){return this.nodes[0]},x.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},x.prototype.replace=function(e){return h(this.nodes,e,this.cmp)},x.prototype.pushpop=function(e){return d(this.nodes,e,this.cmp)},x.prototype.heapify=function(){return o(this.nodes,this.cmp)},x.prototype.updateItem=function(e){return g(this.nodes,e,this.cmp)},x.prototype.clear=function(){return this.nodes=[]},x.prototype.empty=function(){return 0===this.nodes.length},x.prototype.size=function(){return this.nodes.length},x.prototype.clone=function(){var e=new x;return e.nodes=this.nodes.slice(0),e},x.prototype.toArray=function(){return this.nodes.slice(0)},x.prototype.insert=x.prototype.push,x.prototype.top=x.prototype.peek,x.prototype.front=x.prototype.peek,x.prototype.has=x.prototype.contains,x.prototype.copy=x.prototype.clone,i=x,n=[],void 0===(a="function"==typeof(a=function(){return i})?a.apply(t,n):a)||(e.exports=a)}).call(this)}]).js);document.addEventListener("keydown",(function(e){if(45===e.keyCode){const e=document.getElementById("gameUI");if(e){const t=e.style.display;e.style.display="none"===t?"block":"none"}}}));var a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode("\n#suggestBox {\n    width: 355px;\n    border-radius: 3px;\n    background-color: rgba(0,0,0,0.5);\n    margin: auto;\n    text-align: left;\n    z-index: 49;\n    pointer-events: auto;\n    position: relative;\n    bottom: 3.5px;\n    overflow-y: auto;\n}\n#suggestBox div {\n    background-color: rgba(255,255,255,0);\n    color: rgba(255,255,255,1);\n    transition: background-color 0.3s, color 0.3s;\n}\n#suggestBox div:hover {\n    background-color: rgba(255,255,255,0.2);\n    color: rgba(0,0,0,1);\n}\n.suggestBoxHard {\n    color: rgba(255,255,255,1);\n    font-size: 18px;\n}\n.suggestBoxLight {\n    color: rgba(255,255,255,0.7);\n    font-size: 18px;\n}\n")),document.head.appendChild(a),window.addEventListener("load",(function(){var e=document.getElementById("allianceButton"),t=document.getElementById("storeButton");t&&(t.style.right="26px",t.style.top="420px"),e&&(e.style.right="26px",e.style.top="479px")}));let s=document.createElement("link");s.rel="stylesheet",s.href="https://fonts.googleapis.com/css?family=Ubuntu:700",s.type="text/css",document.body.append(s);let l=document.createElement("script");l.src="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js",document.body.append(l),window.oncontextmenu=function(){return!1};let o=window.config;o.clientSendRate=9,o.serverUpdateRate=9,o.deathFadeout=0,o.playerCapacity=9999,o.isSandbox="sandbox.moomoo.io"==window.location.hostname,o.skinColors=["#bf8f54","#cbb091","#896c4b","#fadadc","#ececec","#c37373","#4c4c4c","#ecaff7","#738cc3","#8bc373","#91b2db"],o.weaponVariants=[{id:0,src:"",xp:0,val:1},{id:1,src:"_g",xp:3e3,val:1.1},{id:2,src:"_d",xp:7e3,val:1.18},{id:3,src:"_r",poison:!0,xp:12e3,val:1.18},{id:4,src:"_e",poison:!0,heal:!0,xp:24e3,val:1.18}],o.anotherVisual=!1,o.useWebGl=!1,o.resetRender=!1,document.getElementById("enterGame").innerText="⇏ ‍ ‍ Fight ‍ ‍ ‍⇍",document.getElementById("enterGame").addEventListener("mouseenter",(function(){document.getElementById("enterGame").innerText="⇏ Fight ‍⇍"})),document.getElementById("enterGame").addEventListener("mouseleave",(function(){document.getElementById("enterGame").innerText="⇏ ‍  ‍  Fight ‍ ‍   ‍⇍"})),$("#itemInfoHolder").css({"text-align":"center",top:"25px",left:"440px",right:"350px","max-width":"350px"}),document.getElementById("chatBox").innerHTML="Hi :D";const r=(e,t)=>{t<e.length&&(((e,t)=>{setTimeout((()=>{document.getElementById("gameName").innerHTML=e}),t)})("★"+e.substring(0,t+1),120),setTimeout((()=>{r(e,t+1)}),120))};document.getElementById("gameName").innerHTML="",r("TT40★",0),document.getElementById("loadingText").innerHTML="Loading...",setTimeout((()=>{document.getElementById("loadingText").innerHTML="✅Successful✅"}),710),o.anotherVisual=!0,o.useWebGl=!1,o.resetRender=!0;let c,d=[];"undefined"!=typeof Storage&&(c=!0);let h=function(e,t){try{let n=JSON.parse((i=e,c?localStorage.getItem(i):null));return"object"==typeof n?t:n}catch(e){return alert("dieskid"),t}var i};let p={help:{desc:"Show Commands",action:function(e){for(let e in p)v("/"+e,p[e].desc,"lime",1)}},clear:{desc:"Clear Chats",action:function(e){T()}},debug:{desc:"Debug Mod For Development",action:function(e){hi(F),v("Debug","Done","#99ee99",1)}},play:{desc:"Play Music ( /play [link] )",action:function(e){let t=e.split(" ");t[1]?new Audio(t[1]).play():v("Warn","Enter Link ( /play [link] )","#99ee99",1)}},bye:{desc:"Leave Game",action:function(e){window.leave()}}},u={killChat:!1,autoBuy:!0,autoBuyEquip:!0,autoPush:!0,revTick:!0,spikeTick:!0,predictTick:!0,autoPlace:!0,autoReplace:!0,antiTrap:!0,slowOT:!1,attackDir:!1,showDir:!1,autoRespawn:!1};window.removeConfigs=function(){for(let t in u)e=t,u[t],c&&localStorage.removeItem(e);var e};for(let e in u)u[e]=h(e,u[e]);window.changeMenu=function(){},window.debug=function(){},window.wasdMode=function(){},window.startGrind=function(){},window.connectFillBots=function(){},window.destroyFillBots=function(){},window.tryConnectBots=function(){},window.destroyBots=function(){},window.resBuild=function(){},window.toggleBotsCircle=function(){},window.toggleVisual=function(){},window.prepareUI=function(){},window.leave=function(){},window.ping=0;class m{constructor(e){this.element=e}add(e){this.element&&(this.element.innerHTML+=e)}newLine(e){let t="<br>";if(e>0){t="";for(let i=0;i<e;i++)t+="<br>"}this.add(t)}checkBox(e){let t='<input type = "checkbox"';e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.checked&&(t+=" checked"),e.onclick&&(t+=` onclick = ${e.onclick}`),t+=">",this.add(t)}text(e){let t='<input type = "text"';e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.size&&(t+=` size = ${e.size}`),e.maxLength&&(t+=` maxLength = ${e.maxLength}`),e.value&&(t+=` value = ${e.value}`),e.placeHolder&&(t+=` placeHolder = ${e.placeHolder.replaceAll(" ","&nbsp;")}`),t+=">",this.add(t)}select(e){let t="<select";e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),t+=">";for(let i in e.option)t+=`<option value = ${e.option[i].id}`,e.option[i].selected&&(t+=" selected"),t+=`>${i}</option>`;t+="</select>",this.add(t)}button(e){let t="<button";e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.onclick&&(t+=` onclick = ${e.onclick}`),t+=">",e.innerHTML&&(t+=e.innerHTML),t+="</button>",this.add(t)}selectMenu(e){let t,n="<select";if(!e.id)return void alert("please put id skid");window[e.id+"Func"]=function(){},e.id&&(n+=` id = ${e.id}`),e.style&&(n+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(n+=` class = ${e.class}`),n+=` onchange = window.${e.id+"Func"}()`,n+=">";let a=0;for(let t in e.menu)n+=`<option value = ${"option_"+t} id = ${"O_"+t}`,e.menu[t]&&(n+=" checked"),n+=` style = "color: ${e.menu[t]?"#000":"#fff"}; background: ${e.menu[t]?"#8ecc51":"#cc5151"};">${t}</option>`,a++;n+="</select>",this.add(n),a=0;for(let t in e.menu)window[t+"Func"]=function(){var n,a;e.menu[t]=!!i("check_"+t).checked,n=t,a=e.menu[t],c&&localStorage.setItem(n,a),i("O_"+t).style.color=e.menu[t]?"#000":"#fff",i("O_"+t).style.background=e.menu[t]?"#8ecc51":"#cc5151"},this.checkBox({id:"check_"+t,style:`display: ${0==a?"inline-block":"none"};`,class:"checkB",onclick:`window.${t+"Func"}()`,checked:e.menu[t]}),a++;t="check_"+i(e.id).value.split("_")[1],window[e.id+"Func"]=function(){i(t).style.display="none",t="check_"+i(e.id).value.split("_")[1],i(t).style.display="inline-block"}}}let f=new class{constructor(){this.element=null,this.action=null,this.divElement=null,this.startDiv=function(e,t){let i=document.createElement("div");e.id&&(i.id=e.id),e.style&&(i.style=e.style),e.class&&(i.className=e.class),this.element.appendChild(i),this.divElement=i;let n=new m(i);"function"==typeof t&&t(n)},this.addDiv=function(e,t){let n=document.createElement("div");e.id&&(n.id=e.id),e.style&&(n.style=e.style),e.class&&(n.className=e.class),e.appendID&&i(e.appendID).appendChild(n),this.divElement=n;let a=new m(n);"function"==typeof t&&t(a)}}set(e){this.element=i(e),this.action=new m(this.element)}resetHTML(e){this.element.innerHTML=""}setStyle(e){this.element.style=e}setCSS(e){this.action.add("<style>"+e+"</style>")}},g=document.createElement("div");g.id="menuDiv",g.draggable=!0,g.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/plain","")})),document.addEventListener("dragover",(function(e){g.style.left=e.clientX-g.offsetWidth/2+"px",g.style.top=e.clientY-g.offsetHeight/2+"px"})),document.body.appendChild(g),f.set("menuDiv"),f.setStyle("\n            position: absolute;\n            left: 20px;\n            top: 20px;\n            "),f.resetHTML(),f.setCSS('\n            .menuClass{\n                color: #fff;\n                font-size: 31px;\n                text-align: left;\n                padding: 10px;\n                padding-top: 7px;\n                padding-bottom: 5px;\n                width: 200px;\n                background-color: rgba(0, 0, 0, 0.25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            .menuC {\n                display: none;\n                font-family: "Hammersmith One";\n                font-size: 12px;\n                max-height: 180px;\n                overflow-y: scroll;\n                -webkit-touch-callout: none;\n                -webkit-user-select: none;\n                -khtml-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n            }\n            .menuB {\n                text-align: center;\n                background-color: rgb(25, 25, 25);\n                color: #fff;\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                border: 2px solid #000;\n                cursor: pointer;\n            }\n            .menuB:hover {\n                border: 2px solid #fff;\n            }\n            .menuB:active {\n                color: rgb(25, 25, 25);\n                background-color: rgb(200, 200, 200);\n            }\n            .customText {\n                color: #000;\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                border: 2px solid #000;\n            }\n            .customText:focus {\n                background-color: yellow;\n            }\n            .checkB {\n                position: relative;\n                top: 2px;\n                accent-color: #888;\n                cursor: pointer;\n            }\n            .Cselect {\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                background-color: rgb(75, 75, 75);\n                color: #fff;\n                border: 1px solid #000;\n            }\n            #menuChanger {\n                position: absolute;\n                right: 10px;\n                top: 10px;\n                background-color: rgba(0, 0, 0, 0);\n                color: #fff;\n                border: none;\n                cursor: pointer;\n            }\n            #menuChanger:hover {\n                color: #000;\n            }\n            ::-webkit-scrollbar {\n                width: 10px;\n            }\n            ::-webkit-scrollbar-track {\n                opacity: 0;\n            }\n            ::-webkit-scrollbar-thumb {\n                background-color: rgb(25, 25, 25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            ::-webkit-scrollbar-thumb:active {\n                background-color: rgb(230, 230, 230);\n            }\n            '),f.startDiv({id:"menuHeadLine",class:"menuClass"},(e=>{e.add("TT40:"),f.addDiv({id:"menuButtons",style:"display: block; overflow-y: visible;",class:"menuC",appendID:"menuHeadLine"},(e=>{e.button({class:"menuB",innerHTML:"Debug",onclick:"window.debug()"})})),f.addDiv({id:"menuMain",style:"display: block",class:"menuC",appendID:"menuHeadLine"},(e=>{e.button({class:"menuB",innerHTML:"Toggle Wasd Mode",onclick:"window.wasdMode()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Connect Bots",onclick:"window.tryConnectBots()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Disconnect Bots",onclick:"window.destroyBots()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Connect FBots",onclick:"window.connectFillBots()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Disconnect FBots",onclick:"window.destroyFillBots()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Toggle Another Visual",onclick:"window.toggleVisual()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Reset Break Objects",onclick:"window.resBuild()"}),e.newLine(),e.button({class:"menuB",innerHTML:"Toggle Fbots Circle",onclick:"window.toggleBotsCircle()"}),e.newLine(2),e.newLine(),e.add("Weapon Grinder: "),e.checkBox({id:"weaponGrind",class:"checkB",onclick:"window.startGrind()"}),e.newLine(),e.add("New Healing Beta:"),e.checkBox({id:"healingBeta",class:"checkB",checked:!0}),e.newLine(),e.add("Say Pot:"),e.checkBox({id:"SPot",class:"checkB",checked:!1}),e.newLine(),e.add("Pot Heal:"),e.checkBox({id:"HPH",class:"checkB",checked:!0}),e.newLine(),e.add("Backup Nobull Insta: "),e.checkBox({id:"backupNobull",class:"checkB",checked:!0}),e.newLine(),e.add("Turret Gear Combat: "),e.checkBox({id:"turretCombat",class:"checkB"}),e.newLine(),e.add("antiSpike: "),e.checkBox({id:"antiSpike",class:"checkB"}),e.newLine(),e.add("AntiSpikeTick: "),e.checkBox({id:"safeAntiSpikeTick",class:"checkB",checked:!0}),e.newLine(),e.add("Reverse Insta: "),e.checkBox({id:"Rinsta",class:"checkB",checked:!0}),e.newLine(2),e.add(""),e.selectMenu({id:"configsChanger",class:"Cselect",menu:u}),e.newLine(),e.add(""),e.select({id:"instaType",class:"Cselect",option:{OneShot:{id:"oneShot",selected:!0},Spammer:{id:"spammer"}}}),e.newLine(),e.add(""),e.select({id:"antiBullType",class:"Cselect",option:{"Disable AntiBull":{id:"noab",selected:!0},"When Reloaded":{id:"abreload"},"Primary Reloaded":{id:"abalway"}}}),e.newLine(),e.add(""),e.select({id:"predictType",class:"Cselect",option:{"Disable Render":{id:"disableRender",selected:!0},"X/Y and 2":{id:"pre2"},"X/Y and 3":{id:"pre3"}}}),e.newLine(),e.add(""),e.select({id:"mode",class:"Cselect",option:{"Clear Building":{id:"clear",selected:!0},Sync:{id:"zync"},Search:{id:"zearch"},"Clear Everything":{id:"fuckemup"},Flex:{id:"flex"}}}),e.newLine(),e.add(""),e.select({id:"setup",class:"Cselect",option:{"Dagger Musket":{id:"dm",selected:!0},"Katana Hammer":{id:"kh"},"Dagger Repeater-Crossbow":{id:"dr"},"Zhort-Zword Muzket":{id:"zd"}}}),e.newLine(2),e.add("Circle Rad: "),e.text({id:"circleRad",class:"customText",value:"200",size:"3em",maxLength:"4"}),e.newLine(),e.add("Rad Speed: "),e.text({id:"radSpeed",class:"customText",value:"0.1",size:"2em",maxLength:"3"}),e.newLine(),e.add("Break Objects Range: "),e.text({id:"breakRange",class:"customText",value:"700",size:"3em",maxLength:"4"}),e.newLine(),e.add("AutoPlacer Placement Tick: "),e.text({id:"autoPlaceTick",class:"customText",value:"2",size:"2em",maxLength:"1"})})),f.addDiv({id:"menuConfig",class:"menuC",appendID:"menuHeadLine"},(e=>{})),f.addDiv({id:"menuOther",class:"menuC",appendID:"menuHeadLine"},(e=>{}))}));let w=document.createElement("div");w.id="menuChatDiv",document.body.appendChild(w),f.set("menuChatDiv"),f.setStyle("\n            position: absolute;\n            display: none;\n            left: 10px;\n            top: 10px;\n            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0); //0.65\n            "),f.resetHTML(),f.setCSS('\n.chDiv {\n    color: #fff;\n    padding: 20px;\n    width: 400px;\n    height: 250px;\n    background-color: rgba(34, 34, 34, 0);\n    font-family: "Courier New", monospace;\n    border-radius: 20px;\n    backdrop-filter: blur(10px);\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    transition: all 0.3s ease;\n}\n\n.chMainDiv {\n    font-family: "Ubuntu";\n    font-size: 16px;\n    max-height: 215px;\n    overflow-y: scroll;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow-x: hidden;\n    scrollbar-width: thin;\n    scrollbar-color: rgba(255, 255, 255, 0.5) rgba(255, 255, 255, 0);\n    border-radius: 15px;\n    transition: all 0.3s ease;\n    background-color: rgba(34, 34, 34, 0);\n}\n\n}\n            ::-webkit-scrollbar {\n                width: 10px;\n            }\n            ::-webkit-scrollbar-track {\n                opacity: 0;\n            }\n            ::-webkit-scrollbar-thumb {\n                background-color: rgb(25, 25, 25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            ::-webkit-scrollbar-thumb:active {\n                background-color: rgb(230, 230, 230);\n            }\n\n.chMainBox {\n    position: absolute;\n    left: 10px;\n    bottom: 10px;\n    width: 335px;\n    height: 25px;\n    background-color: rgba(255, 255, 255, 0);\n    border-radius: 10px;\n    color: rgba(255, 255, 255, 0.75);\n    font-family: "Courier New", monospace;\n    font-size: 14px;\n    border: none;\n    outline: none;\n    padding: 5px;\n    transition: all 0.3s ease;\n}\n\n.chDiv:hover {\n    transform: scale(1.02);\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.23);\n}\n\n.chMainBox:hover {\n    background-color: rgba(255, 255, 255, 0.3);\n}\n            '),f.startDiv({id:"mChDiv",class:"chDiv"},(e=>{f.addDiv({id:"mChMain",class:"chMainDiv",appendID:"mChDiv"},(e=>{})),e.text({id:"mChBox",class:"chMainBox",placeHolder:'press "Enter" key'})}));let y=i("mChMain"),x=i("mChBox"),k=!1,b=0;function v(e,t,i,n){f.set("menuChatDiv"),i=i||"white";let a=new Date,s=a.getMinutes(),l=a.getHours(),o="";n||(o+=`[${(l<10?"0":"")+l}:${(s<10?"0":"")+s}]`),e&&(o+=""+((n?"":" - ")+e)),t&&(o+=(e?": ":n?"":" - ")+t+"\n"),f.addDiv({id:"menuChDisp"+b,style:`color: ${i}`,appendID:"mChMain"},(e=>{e.add(o)})),y.scrollTop=y.scrollHeight,b++}function T(){y.innerHTML="",b=0,v(null,"Chat '/help' for a list of chat commands.","white",1),v(null,"Welcome to TT40","lightGreen",1),v(null,"Thanks & Credits to x86!","blue",1)}x.value="",x.addEventListener("focus",(()=>{k=!0})),x.addEventListener("blur",(()=>{k=!1})),T();let I=0,S=["menuMain","menuConfig","menuOther"];function D(e,t,i,n){f.set("menuChatDiv"),i=i||"white";new Date;let a="";t&&(a+=(e?": ":"")+t+"\n"),f.addDiv({id:"menuChDisp",style:`color: ${i}`,appendID:"mChMain"},(e=>{e.add(a)})),y.scrollTop=y.scrollHeight,b++}window.changeMenu=function(){i(S[I%S.length]).style.display="none",I++,i(S[I%S.length]).style.display="block"};let M=document.createElement("div");M.id="status",i("gameUI").appendChild(M),f.set("status"),f.setStyle("\n            display: block;\n            position: absolute;\n            color: #ddd;\n            font: 15px Hammersmith One;\n            bottom: 215px;\n            left: 20px;\n            "),f.resetHTML(),f.setCSS("\n            .sizing {\n                font-size: 15px;\n            }\n            .mod {\n                font-size: 15px;\n                display: inline-block;\n            }\n            "),f.startDiv({id:"uehmod",class:"sizing"},(e=>{e.add("Ping: "),f.addDiv({id:"pingFps",class:"mod",appendID:"uehmod"},(e=>{e.add("None")})),e.newLine(),e.add("Packet: "),f.addDiv({id:"packetStatus",class:"mod",appendID:"uehmod"},(e=>{e.add("None")}))}));let P,A,B,C=!1,O=!1,H=0,L={sec:!1},W={tick:0,tickQueue:[],tickBase:function(e,t){this.tickQueue[this.tick+t]?this.tickQueue[this.tick+t].push(e):this.tickQueue[this.tick+t]=[e]},tickRate:1e3/o.serverUpdateRate,tickSpeed:0,lastTick:performance.now()},R=!1,E={last:0,time:0,ltime:0},j=["cc",1,"__proto__"];function G(e){let t=Array.prototype.slice.call(arguments,1),i=window.msgpack.encode([e,t]);P.send(i)}WebSocket.prototype.nsend=WebSocket.prototype.send,WebSocket.prototype.send=function(e){if(P||(P=this,P.addEventListener("message",(function(e){!function(e){let t=new Uint8Array(e.data),i=window.msgpack.decode(t),n=i[0];t=i[1];let a={A:pi,C:mi,D:fi,E:gi,a:Oi,G:Hi,H:Li,I:Wi,J:Ri,K:ji,L:Gi,M:_i,N:Fi,O:wi,P:yi,Q:Si,R:Di,S:xi,T:ki,U:bi,V:Ni,X:Ui,Y:vi,Z:Ti,2:zi,3:$i,4:Vi,5:qi,6:Yi,7:Xi,8:Ki,9:$n,0:Ze};"io-init"==n?A=t[0]:a[n]&&a[n].apply(void 0,t)}(e)})),P.addEventListener("close",(e=>{4001==e.code&&window.location.reload()}))),P==this){R=!1;let t=new Uint8Array(e),i=window.msgpack.decode(t),n=i[0];if(t=i[1],"6"==n){if(t[0]){let e;["cunt","whore","fuck","shit","faggot","nigger","nigga","dick","vagina","minge","cock","rape","cum","sex","tits","penis","clit","pussy","meatcurtain","jizz","prune","douche","wanker","damn","bitch","dick","fag","bastard"].forEach((i=>{if(t[0].indexOf(i)>-1){e="";for(let t=0;t<i.length;++t)1==t&&(e+=String.fromCharCode(0)),e+=i[t];let n=new RegExp(i,"g");t[0]=t[0].replace(n,e)}})),t[0]=t[0].slice(0,30)}}else"L"==n?(t[0]=t[0]+String.fromCharCode(0).repeat(7),t[0]=t[0].slice(0,7)):"M"==n?(t[0].name=""==t[0].name?"unknown":t[0].name,t[0].moofoll=!0,t[0].skin=10==t[0].skin?"__proto__":t[0].skin,j=[t[0].name,t[0].moofoll,t[0].skin]):"D"==n?oe.lastDir==t[0]||[null,void 0].includes(t[0])?R=!0:oe.lastDir=t[0]:"d"==n?t[2]?[null,void 0].includes(t[1])||(oe.lastDir=t[1]):R=!0:"K"==n?t[1]||(R=!0):"S"==n?(Rt.wait=!Rt.wait,R=!0):"a"==n&&(t[1]?(F.moveDir==t[0]&&(R=!0),F.moveDir=t[0]):R=!0);if(!R){let e=window.msgpack.encode([n,t]);this.nsend(e),L.sec||(L.sec=!0,setTimeout((()=>{L.sec=!1,H=0}),1e3)),H++}}else this.nsend(e)},window.leave=function(){!function(e){let t=Array.prototype.slice.call(arguments,1),i=window.msgpack.encode([e,t]);P.nsend(i)}("kys",{"frvr is so bad":!0,"sidney is too good":!0,"dev are too weak":!0})};let _={send:G};Math.lerpAngle=function(e,t,i){Math.abs(t-e)>Math.PI&&(e>t?t+=2*Math.PI:e+=2*Math.PI);let n=t+(e-t)*i;return n>=0&&n<=2*Math.PI?n:n%(2*Math.PI)},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,n,a){return i<2*a&&(a=i/2),n<2*a&&(a=n/2),a<0&&(a=0),this.beginPath(),this.moveTo(e+a,t),this.arcTo(e+i,t,e+i,t+n,a),this.arcTo(e+i,t+n,e,t+n,a),this.arcTo(e,t+n,e,t,a),this.arcTo(e,t,e+i,t,a),this.closePath(),this};let F,N,U,z=[],V={tick:0,delay:0,time:[],manage:[]},q=[],Y=[],X=[],K=[],Q=[],J=[],Z=[],ee=!1,te=[],ie=[],ne=[],ae=[],se=[],le=[],oe={reloaded:!1,waitHit:0,autoAim:!1,revAim:!1,ageInsta:!0,reSync:!1,bullTick:0,anti0Tick:0,antiSync:!1,autobreaking:!1,safePrimary:function(e){return[0,8].includes(e.primaryIndex)},safeSecondary:function(e){return[10,11,14].includes(e.secondaryIndex)},lastDir:0,autoPush:!1,pushData:{}};function re(e,t){return e.find((e=>e.id==t))}function ce(e,t){return e.find((e=>e.sid==t))}function de(e){return ce(Y,e)}function he(e){return ce(q,e)}function pe(e){return ce(Q,e)}i("adCard").remove(),i("promoImgHolder").remove(),i("chatButton").remove();let ue=i("gameCanvas"),me=ue.getContext("2d"),fe=i("mapDisplay"),ge=fe.getContext("2d");fe.width=300,fe.height=300;let we=i("storeMenu"),ye=(i("storeHolder"),i("upgradeHolder")),xe=i("upgradeCounter"),ke=i("chatBox");ke.autocomplete="off",ke.style.textAlign="center",ke.style.width="18em";let be=i("chatHolder"),ve=i("actionBar"),Te=(i("leaderboardData"),i("itemInfoHolder"));i("menuCardHolder"),i("mainMenu"),i("diedText");var Ie=1.3;let Se,De,Me,Pe,Ae,Be,Ce=o.maxScreenWidth*parseFloat(Ie),Oe=o.maxScreenHeight*parseFloat(Ie),He=1,Le=performance.now(),We=0,Re=0,Ee=i("allianceMenu"),je=1,Ge=0,_e="#525252",Fe="#3d3f42",Ne=5.5,Ue=!0,ze={},$e={87:[0,-1],38:[0,-1],83:[0,1],40:[0,1],65:[-1,0],37:[-1,0],68:[1,0],39:[1,0]},Ve=0,qe=!1,Ye={},Xe={place:0,placeSpawnPads:0},Ke=[],Qe=!0;window.onblur=function(){Qe=!1},window.onfocus=function(){Qe=!0,F&&F.alive};let Je={avg:0,max:0,min:0,delay:0};function Ze(){let e=window.pingTime;document.getElementById("pingDisplay").innerText="Ping: "+e+" ms`",(e>Je.max||isNaN(Je.max))&&(Je.max=e),(e<Je.min||isNaN(Je.min))&&(Je.min=e)}let et=[];class tt{constructor(){let e=Math.abs,t=(Math.cos,Math.sin,Math.pow,Math.sqrt),i=Math.atan2,n=Math.PI,a=this;this.round=function(e,t){return Math.round(e*t)/t},this.toRad=function(e){return e*(n/180)},this.toAng=function(e){return e/(n/180)},this.randInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},this.randFloat=function(e,t){return Math.random()*(t-e+1)+e},this.lerp=function(e,t,i){return e+(t-e)*i},this.decel=function(e,t){return e>0?e=Math.max(0,e-t):e<0&&(e=Math.min(0,e+t)),e},this.getDistance=function(e,i,n,a){return t((n-=e)*n+(a-=i)*a)},this.getDist=function(e,i,n,a){let s=0==n?e.x:1==n?e.x1:2==n?e.x2:3==n&&e.x3,l=0==n?e.y:1==n?e.y1:2==n?e.y2:3==n&&e.y3,o={x:0==a?i.x:1==a?i.x1:2==a?i.x2:3==a&&i.x3,y:0==a?i.y:1==a?i.y1:2==a?i.y2:3==a&&i.y3};return t((o.x-=s)*o.x+(o.y-=l)*o.y)},this.getDirection=function(e,t,n,a){return i(t-a,e-n)},this.getDirect=function(e,t,n,a){let s=0==n?e.x:1==n?e.x1:2==n?e.x2:3==n&&e.x3,l=0==n?e.y:1==n?e.y1:2==n?e.y2:3==n&&e.y3,o=0==a?t.x:1==a?t.x1:2==a?t.x2:3==a&&t.x3,r=0==a?t.y:1==a?t.y1:2==a?t.y2:3==a&&t.y3;return i(l-r,s-o)},this.getAngleDist=function(t,i){let a=e(i-t)%(2*n);return a>n?2*n-a:a},this.isNumber=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},this.isString=function(e){return e&&"string"==typeof e},this.kFormat=function(e){return e>999?(e/1e3).toFixed(1)+"k":e},this.sFormat=function(e){let t=[{num:1e3,string:"k"},{num:1e6,string:"m"},{num:1e9,string:"b"},{num:1e12,string:"q"}].reverse().find((t=>e>=t.num));return t?(e/t.num).toFixed(1)+t.string:e},this.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},this.fixTo=function(e,t){return parseFloat(e.toFixed(t))},this.sortByPoints=function(e,t){return parseFloat(t.points)-parseFloat(e.points)},this.lineInRect=function(e,t,i,n,a,s,l,o){let r=a,c=l;if(a>l&&(r=l,c=a),c>i&&(c=i),r<e&&(r=e),r>c)return!1;let d=s,h=o,p=l-a;if(Math.abs(p)>1e-7){let e=(o-s)/p,t=s-e*a;d=e*r+t,h=e*c+t}if(d>h){let e=h;h=d,d=e}return h>n&&(h=n),d<t&&(d=t),!(d>h)},this.containsPoint=function(e,t,i){let n=e.getBoundingClientRect(),a=n.left+window.scrollX,s=n.top+window.scrollY,l=n.width,o=n.height;return t>a&&t<a+l&&(i>s&&i<s+o)},this.mousifyTouchEvent=function(e){let t=e.changedTouches[0];e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY},this.hookTouchEvents=function(e,t){let i=!t,n=!1,s=!1;function l(t){a.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation()),n&&(e.onclick&&e.onclick(t),e.onmouseout&&e.onmouseout(t),n=!1)}e.addEventListener("touchstart",this.checkTrusted((function(t){a.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation());e.onmouseover&&e.onmouseover(t);n=!0})),s),e.addEventListener("touchmove",this.checkTrusted((function(t){a.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation());a.containsPoint(e,t.pageX,t.pageY)?n||(e.onmouseover&&e.onmouseover(t),n=!0):n&&(e.onmouseout&&e.onmouseout(t),n=!1)})),s),e.addEventListener("touchend",this.checkTrusted(l),s),e.addEventListener("touchcancel",this.checkTrusted(l),s),e.addEventListener("touchleave",this.checkTrusted(l),s)},this.removeAllChildren=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},this.generateElement=function(e){let t=document.createElement(e.tag||"div");function i(i,n){e[i]&&(t[n]=e[i])}i("text","textContent"),i("html","innerHTML"),i("class","className");for(let i in e){switch(i){case"tag":case"text":case"html":case"class":case"style":case"hookTouch":case"parent":case"children":continue}t[i]=e[i]}if(t.onclick&&(t.onclick=this.checkTrusted(t.onclick)),t.onmouseover&&(t.onmouseover=this.checkTrusted(t.onmouseover)),t.onmouseout&&(t.onmouseout=this.checkTrusted(t.onmouseout)),e.style&&(t.style.cssText=e.style),e.hookTouch&&this.hookTouchEvents(t),e.parent&&e.parent.appendChild(t),e.children)for(let i=0;i<e.children.length;i++)t.appendChild(e.children[i]);return t},this.checkTrusted=function(e){return function(t){t&&t instanceof Event&&(!t||"boolean"!=typeof t.isTrusted||t.isTrusted)&&e(t)}},this.randomString=function(e){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=i.charAt(Math.floor(62*Math.random()));return t},this.countInArray=function(e,t){let i=0;for(let n=0;n<e.length;n++)e[n]===t&&i++;return i},this.hexToRgb=function(e){return e.slice(1).match(/.{1,2}/g).map((e=>parseInt(e,16)))},this.getRgb=function(e,t,i){return[e/255,t/255,i/255].join(", ")}}}class it{constructor(){this.init=function(e,t,i,n,a,s,l){this.x=e,this.y=t,this.color=l,this.scale=3.5*i,this.weight=50,this.startScale=1.2*this.scale,this.maxScale=1.5*i,this.minScale=.5*i,this.scaleSpeed=.7,this.speed=n,this.speedMax=n,this.life=a,this.maxLife=a,this.text=s,this.movSpeed=n},this.update=function(e){this.life&&(this.life-=e,this.scaleSpeed,this.y-=this.speed*e,this.scale-=.8,this.scale>=this.maxScale&&(this.scale=this.maxScale,this.scaleSpeed*=-.5,this.speed=.75*this.speed),this.life<=0&&(this.life=0))},this.render=function(e,t,i){e.lineWidth=10,e.strokeStyle=Fe,e.fillStyle=this.color,e.globalAlpha=1,e.font=this.scale+"px Hammersmith One",e.strokeText(this.text,this.x-t,this.y-i),e.fillText(this.text,this.x-t,this.y-i),e.globalAlpha=1}}}class nt{constructor(e,t,i,n,a,s,l,o,r){this.x=e,this.y=t,this.lastDir=i,this.dir=i+Math.PI,this.buildIndex=n,this.weaponIndex=a,this.weaponVariant=s,this.skinColor=l,this.scale=o,this.visScale=0,this.name=r,this.alpha=1,this.active=!0,this.animate=function(e){let t=Dt.getAngleDist(this.lastDir,this.dir);t>.01?this.dir+=t/20:this.dir=this.lastDir,this.visScale<this.scale&&(this.visScale+=e/(this.scale/2),this.visScale>=this.scale&&(this.visScale=this.scale)),this.alpha-=e/3e4,this.alpha<=0&&(this.alpha=0,this.active=!1)}}}class at{constructor(e,t,n,a,s,l,o,r,c,d,h,p,u,m){this.id=e,this.sid=t,this.tmpScore=0,this.team=null,this.latestSkin=0,this.oldSkinIndex=0,this.skinIndex=0,this.latestTail=0,this.oldTailIndex=0,this.tailIndex=0,this.hitTime=0,this.lastHit=0,this.showName="NOOO",this.tails={};for(let e=0;e<h.length;++e)h[e].price<=0&&(this.tails[h[e].id]=1);this.skins={};for(let e=0;e<d.length;++e)d[e].price<=0&&(this.skins[d[e].id]=1);this.points=0,this.dt=0,this.hidden=!1,this.itemCounts={},this.isPlayer=!0,this.pps=0,this.moveDir=void 0,this.skinRot=0,this.lastPing=0,this.iconIndex=0,this.skinColor=0,this.dist2=0,this.aim2=0,this.maxSpeed=1,this.chat={message:null,count:0},this.backupNobull=!0,this.circle=!1,this.circleRad=200,this.circleRadSpd=.1,this.cAngle=0,this.spawn=function(e){this.attacked=!1,this.timeDamaged=0,this.timeHealed=0,this.pinge=0,this.millPlace="NOOO",this.lastshamecount=0,this.death=!1,this.spinDir=0,this.sync=!1,this.antiBull=0,this.bullTimer=0,this.poisonTimer=0,this.active=!0,this.alive=!0,this.lockMove=!1,this.lockDir=!1,this.minimapCounter=0,this.chatCountdown=0,this.shameCount=0,this.shameTimer=0,this.sentTo={},this.gathering=0,this.gatherIndex=0,this.shooting={},this.shootIndex=9,this.autoGather=0,this.animTime=0,this.animSpeed=0,this.mouseState=0,this.buildIndex=-1,this.weaponIndex=0,this.weaponCode=0,this.weaponVariant=0,this.primaryIndex=void 0,this.secondaryIndex=void 0,this.dmgOverTime={},this.noMovTimer=0,this.maxXP=300,this.XP=0,this.age=1,this.kills=0,this.upgrAge=2,this.upgradePoints=0,this.x=0,this.y=0,this.oldXY={x:0,y:0},this.zIndex=0,this.xVel=0,this.yVel=0,this.slowMult=1,this.dir=0,this.dirPlus=0,this.targetDir=0,this.targetAngle=0,this.maxHealth=100,this.health=this.maxHealth,this.oldHealth=this.maxHealth,this.damaged=0,this.scale=n.playerScale,this.speed=n.playerSpeed,this.resetMoveDir(),this.resetResources(e),this.items=[0,3,6,10],this.weapons=[0],this.shootCount=0,this.weaponXP=[],this.reloads={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,53:0},this.bowThreat={9:0,12:0,13:0,15:0},this.damageThreat=0,this.inTrap=!1,this.canEmpAnti=!1,this.empAnti=!1,this.soldierAnti=!1,this.poisonTick=0,this.bullTick=0,this.setPoisonTick=!1,this.setBullTick=!1,this.antiTimer=2},this.resetMoveDir=function(){this.moveDir=void 0},this.resetResources=function(e){for(let t=0;t<n.resourceTypes.length;++t)this[n.resourceTypes[t]]=e?100:0},this.getItemType=function(e){let t=this.items.findIndex((t=>t==e));return-1!=t?t:c.checkItem.index(e,this.items)},this.setData=function(e){this.id=e[0],this.sid=e[1],this.name=e[2],this.x=e[3],this.y=e[4],this.dir=e[5],this.health=e[6],this.maxHealth=e[7],this.scale=e[8],this.skinColor=e[9]},this.updateTimer=function(){this.bullTimer-=1,this.bullTimer<=0&&(this.setBullTick=!1,this.bullTick=W.tick-1,this.bullTimer=n.serverUpdateRate),this.poisonTimer-=1,this.poisonTimer<=0&&(this.setPoisonTick=!1,this.poisonTick=W.tick-1,this.poisonTimer=n.serverUpdateRate)},this.update=function(e){if(this.sid==N&&(this.circleRad=parseInt(i("circleRad").value)||0,this.circleRadSpd=parseFloat(i("radSpeed").value)||0,this.cAngle+=this.circleRadSpd),this.active){let e={skin:re(d,this.skinIndex),tail:re(h,this.tailIndex)},t=(this.buildIndex>=0?.5:1)*(c.weapons[this.weaponIndex].spdMult||1)*(e.skin&&e.skin.spdMult||1)*(e.tail&&e.tail.spdMult||1)*(this.y<=n.snowBiomeTop?e.skin&&e.skin.coldM?1:n.snowSpeed:1)*this.slowMult;this.maxSpeed=t}};let f=0,g=0;this.animate=function(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,f=0,g=0):0==g?(f+=e/(this.animSpeed*n.hitReturnRatio),this.dirPlus=a.lerp(0,this.targetAngle,Math.min(1,f)),f>=1&&(f=1,g=1)):(f-=e/(this.animSpeed*(1-n.hitReturnRatio)),this.dirPlus=a.lerp(0,this.targetAngle,Math.max(0,f))))},this.startAnim=function(e,t){this.animTime=this.animSpeed=c.weapons[t].speed,this.targetAngle=e?-n.hitAngle:-Math.PI,f=0,g=0},this.canSee=function(e){if(!e)return!1;let t=Math.abs(e.x-this.x)-e.scale,i=Math.abs(e.y-this.y)-e.scale;return t<=n.maxScreenWidth/2*1.3&&i<=n.maxScreenHeight/2*1.3},this.judgeShame=function(){if(this.lastshamecount=this.shameCount,this.oldHealth<this.health){if(this.hitTime){let e=W.tick-this.hitTime;this.lastHit=W.tick,this.hitTime=0,e<2?this.shameCount++:this.shameCount=Math.max(0,this.shameCount-2)}}else this.oldHealth>this.health&&(this.hitTime=W.tick)},this.addShameTimer=function(){this.shameCount=0,this.shameTimer=30;let e=setInterval((()=>{this.shameTimer--,this.shameTimer<=0&&clearInterval(e)}),1e3)},this.isTeam=function(e){return this==e||this.team&&this.team==e.team},this.findAllianceBySid=function(e){return this.team?K.find((t=>t===e)):null},this.checkCanInsta=function(e){let t=0;if(this.alive&&qe){let i={weapon:this.weapons[0],variant:this.primaryVariant,dmg:null==this.weapons[0]?0:c.weapons[this.weapons[0]].dmg},a={weapon:this.weapons[1],variant:this.secondaryVariant,dmg:null==this.weapons[1]?0:c.weapons[this.weapons[1]].Pdmg},s=this.skins[7]&&!e?1.5:1,l=null!=i.variant?n.weaponVariants[i.variant].val:1;return null!=i.weapon&&0==this.reloads[i.weapon]&&(t+=i.dmg*l*s),null!=a.weapon&&0==this.reloads[a.weapon]&&(t+=a.dmg),this.skins[53]&&this.reloads[53]<=(10==F.weapons[1]?0:W.tickRate)&&22!=le.skinIndex&&(t+=25),t*=6==le.skinIndex?.75:1,t}return 0},this.manageReload=function(){if(this.shooting[53]?(this.shooting[53]=0,this.reloads[53]=2500-W.tickRate):this.reloads[53]>0&&(this.reloads[53]=Math.max(0,this.reloads[53]-W.tickRate)),this.reloads[this.weaponIndex]<=1e3/9){let e=this.weaponIndex,t=Z.filter((e=>(e.active||e.alive)&&e.health<e.maxHealth&&void 0!==e.group&&a.getDist(e,F,0,2)<=c.weapons[F.weaponIndex].range+e.scale));for(let i=0;i<t.length;i++){let a=t[i],s=(c.weapons[e].dmg,n.weaponVariants[U[(e<9?"prima":"seconda")+"ryVariant"]].val,c.weapons[e].sDmg,c.weapons[e].dmg*n.weaponVariants[U[(e<9?"prima":"seconda")+"ryVariant"]].val*(c.weapons[e].sDmg||1));a.health-s<=0&&le.length&&(dt(le.dist2<1.8*le.scale+50?4:2,Mi(a,F)+Math.PI),dt(2,ni()))}}if(this.gathering||this.shooting[1])this.gathering&&(this.gathering=0,this.reloads[this.gatherIndex]=c.weapons[this.gatherIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0),this.shooting[1]&&(this.shooting[1]=0,this.reloads[this.shootIndex]=c.weapons[this.shootIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0);else if(this.attacked=!1,this.buildIndex<0&&this.reloads[this.weaponIndex]>0){if(Math.max(0,this.reloads[this.weaponIndex]-W.tickRate),this.reloads[this.weaponIndex]=Math.max(0,this.reloads[this.weaponIndex]-110),this==F&&i("weaponGrind").checked)for(let e=0;e<2*Math.PI;e+=Math.PI/2)pt(F.getItemType(22),e);0==this.reloads[this.primaryIndex]&&0==this.reloads[this.weaponIndex]&&(this.antiBull++,W.tickBase((()=>{this.antiBull=0}),1))}},this.addDamageThreat=function(e){let t={weapon:this.primaryIndex,variant:this.primaryVariant};t.dmg=null==t.weapon?45:c.weapons[t.weapon].dmg;let i={weapon:this.secondaryIndex,variant:this.secondaryVariant};i.dmg=null==i.weapon?50:c.weapons[i.weapon].Pdmg;let a=null!=t.variant?n.weaponVariants[t.variant].val:1.18,s=null!=i.variant?[9,12,13,15].includes(i.weapon)?1:n.weaponVariants[i.variant].val:1.18;null!=t.weapon&&0!=this.reloads[t.weapon]||(this.damageThreat+=t.dmg*a*1.5),null!=i.weapon&&0!=this.reloads[i.weapon]||(this.damageThreat+=i.dmg*s),this.reloads[53]<=W.tickRate&&(this.damageThreat+=25),this.damageThreat*=6==e.skinIndex?.75:1,this.isTeam(e)||this.dist2<=300&&(e.damageThreat+=this.damageThreat)}}}function st(e){F.reloads[e]=0,G("H",e)}function lt(e,t){let i=F.skins[6]?6:0;if(F.alive&&qe)if(0==t)if(F.skins[e])F.latestSkin!=e&&G("c",0,e,0);else if(u.autoBuyEquip){let t=re(Bt,e);t&&F.points>=t.price?(G("c",1,e,0),G("c",0,e,0)):F.latestSkin!=i&&G("c",0,i,0)}else F.latestSkin!=i&&G("c",0,i,0);else if(1==t){if(O&&11!=e&&0!=e)return void(0!=F.latestTail&&G("c",0,0,1));if(F.tails[e])F.latestTail!=e&&G("c",0,e,1);else if(u.autoBuyEquip){let t=re(Ct,e);t&&F.points>=t.price?(G("c",1,e,1),G("c",0,e,1)):0!=F.latestTail&&G("c",0,0,1)}else 0!=F.latestTail&&G("c",0,0,1)}}function ot(e,t){G("G",e,t)}function rt(e,t){t||(F.weaponCode=e),G("G",e,1)}function ct(){G("K",1,1)}function dt(e,t,n){try{if(null==e)return;let a=Mt.list[F.items[e]],s=F.scale+a.scale+(a.placeOffset||0),l=F.x2+s*Math.cos(t),r=F.y2+s*Math.sin(t);(F.alive&&qe&&null==F.itemCounts[a.group.id]||F.itemCounts[a.group.id]<(o.isSandbox?299:a.group.limit?a.group.limit:99))&&(ot(F.items[e]),function(e,t){G("d",e,t,1)}(1,t),rt(F.weaponCode,1),n&&i("placeVis").checked&&(et.push({x:l,y:r,name:a.name,scale:a.scale,dir:t}),W.tickBase((()=>{et.shift()}),1)))}catch(e){}}function ht(e,t){try{return Math.atan2((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 0}}function pt(e,t){try{if(null==e)return;let i=Mt.list[F.items[e]],n=F.scale+i.scale+(i.placeOffset||0),a=F.x2+n*Math.cos(t),s=F.y2+n*Math.sin(t);Pt.checkItemLocation(a,s,i.scale,.6,i.id,!1,F)&&dt(e,t,1)}catch(e){}}function ut(){return 6==F.latestSkin?.75:1}function mt(){return 100==F.health?0:45!=F.skinIndex&&56!=F.skinIndex?Math.ceil((100-F.health)/Mt.list[F.items[0]].healing):0}function ft(e){return ae.filter((t=>{let i=new bt(Mt).weapons[t.weaponIndex],n=t.weaponIndex<9?[i[0],i[1],i[2],i[3]]:[i[0],i[1]],a={one:t.dist2<=300,two:n.includes(e),three:t.attacked};return a.one&&a.two&&a.three}))}function gt(e){if([0,void 0].includes(e))for(let e=0;e<mt();e++)dt(0,ni());else for(let t=0;t<mt()+e;t++)dt(0,ni())}function wt(e){oe.antiSync=!0;let t=setInterval((()=>{F.shameCount<5&&dt(0,ni())}),75);setTimeout((()=>{clearInterval(t),setTimeout((()=>{oe.antiSync=!1}),W.tickRate)}),W.tickRate)}function yt(e){return F.team?K.find((t=>t===e)):null}function xt(e,t){if(F.y2>=o.mapScale/2-o.riverWidth/2&&F.y2<=o.mapScale/2+o.riverWidth/2){if(t)return 31;lt(31,0)}else if(F.y2<=o.snowBiomeTop){if(t)return e&&null==F.moveDir?6:15;lt(e&&null==F.moveDir?6:15,0)}else{if(t)return e&&null==F.moveDir?6:12;lt(e&&null==F.moveDir?6:12,0)}if(t)return 0}let kt=[];class bt{constructor(e){this.calcDmg=function(e,t){return e*t},this.getAllDamage=function(e){return[this.calcDmg(e,.75),e,this.calcDmg(e,1.125),this.calcDmg(e,1.5)]},this.weapons=[];for(let t=0;t<e.weapons.length;t++){let i=e.weapons[t],n=i.name.split(" ").length<=1?i.name:i.name.split(" ")[0]+"_"+i.name.split(" ")[1];this.weapons.push(this.getAllDamage(t>8?i.Pdmg:i.dmg)),this[n]=this.weapons[t]}}}let vt,Tt,It,St=[],Dt=new tt,Mt=new class{constructor(){this.groups=[{id:0,name:"food",layer:0},{id:1,name:"walls",place:!0,limit:30,layer:0},{id:2,name:"spikes",place:!0,limit:15,layer:0},{id:3,name:"mill",place:!0,limit:7,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:6,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1},{id:7,name:"turret",place:!0,limit:2,layer:1},{id:8,name:"watchtower",place:!0,limit:12,layer:1},{id:9,name:"buff",place:!0,limit:4,layer:-1},{id:10,name:"spawn",place:!0,limit:1,layer:-1},{id:11,name:"sapling",place:!0,limit:2,layer:0},{id:12,name:"blocker",place:!0,limit:3,layer:-1},{id:13,name:"teleporter",place:!0,limit:2,layer:-1}],this.projectiles=[{indx:0,layer:0,src:"arrow_1",dmg:25,speed:1.6,scale:103,range:1e3},{indx:1,layer:1,dmg:25,scale:20},{indx:0,layer:0,src:"arrow_1",dmg:35,speed:2.5,scale:103,range:1200},{indx:0,layer:0,src:"arrow_1",dmg:30,speed:2,scale:103,range:1200},{indx:1,layer:1,dmg:16,scale:20},{indx:0,layer:0,src:"bullet_1",dmg:50,speed:3.6,scale:160,range:1400}],this.weapons=[{id:0,type:0,name:"tool hammer",desc:"tool for gathering all resources",src:"hammer_1",length:140,width:140,xOff:-3,yOff:18,dmg:25,range:65,gather:1,speed:300},{id:1,type:0,age:2,name:"hand axe",desc:"gathers resources at a higher rate",src:"axe_1",length:140,width:140,xOff:3,yOff:24,dmg:30,spdMult:1,range:70,gather:2,speed:400},{id:2,type:0,age:8,pre:1,name:"great axe",desc:"deal more damage and gather more resources",src:"great_axe_1",length:140,width:140,xOff:-8,yOff:25,dmg:35,spdMult:1,range:75,gather:4,speed:400},{id:3,type:0,age:2,name:"short sword",desc:"increased attack power but slower move speed",src:"sword_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:46,dmg:35,spdMult:.85,range:110,gather:1,speed:300},{id:4,type:0,age:8,pre:3,name:"katana",desc:"greater range and damage",src:"samurai_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:59,dmg:40,spdMult:.8,range:118,gather:1,speed:300},{id:5,type:0,age:2,name:"polearm",desc:"long range melee weapon",src:"spear_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:53,dmg:45,knock:.2,spdMult:.82,range:142,gather:1,speed:700},{id:6,type:0,age:2,name:"bat",desc:"fast long range melee weapon",src:"bat_1",iPad:1.3,length:110,width:180,xOff:-8,yOff:53,dmg:20,knock:.7,range:110,gather:1,speed:300},{id:7,type:0,age:2,name:"daggers",desc:"really fast short range weapon",src:"dagger_1",iPad:.8,length:110,width:110,xOff:18,yOff:0,dmg:20,knock:.1,range:65,gather:1,hitSlow:.1,spdMult:1.13,speed:100},{id:8,type:0,age:2,name:"stick",desc:"great for gathering but very weak",src:"stick_1",length:140,width:140,xOff:3,yOff:24,dmg:1,spdMult:1,range:70,gather:7,speed:400},{id:9,type:1,age:6,name:"hunting bow",desc:"bow used for ranged combat and hunting",src:"bow_1",req:["wood",4],length:120,width:120,xOff:-6,yOff:0,Pdmg:25,projectile:0,spdMult:.75,speed:600},{id:10,type:1,age:6,name:"great hammer",desc:"hammer used for destroying structures",src:"great_hammer_1",length:140,width:140,xOff:-9,yOff:25,dmg:10,Pdmg:10,spdMult:.88,range:75,sDmg:7.5,gather:1,speed:400},{id:11,type:1,age:6,name:"wooden shield",desc:"blocks projectiles and reduces melee damage",src:"shield_1",length:120,width:120,shield:.2,xOff:6,yOff:0,Pdmg:0,spdMult:.7},{id:12,type:1,age:8,pre:9,name:"crossbow",desc:"deals more damage and has greater range",src:"crossbow_1",req:["wood",5],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,Pdmg:35,projectile:2,spdMult:.7,speed:700},{id:13,type:1,age:9,pre:12,name:"repeater crossbow",desc:"high firerate crossbow with reduced damage",src:"crossbow_2",req:["wood",10],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,Pdmg:30,projectile:3,spdMult:.7,speed:230},{id:14,type:1,age:6,name:"mc grabby",desc:"steals resources from enemies",src:"grab_1",length:130,width:210,xOff:-8,yOff:53,dmg:0,Pdmg:0,steal:250,knock:.2,spdMult:1.05,range:125,gather:0,speed:700},{id:15,type:1,age:9,pre:12,name:"musket",desc:"slow firerate but high damage and range",src:"musket_1",req:["stone",10],aboveHand:!0,rec:.35,armS:.6,hndS:.3,hndD:1.6,length:205,width:205,xOff:25,yOff:0,Pdmg:50,projectile:5,hideProjectile:!0,spdMult:.6,speed:1500}],this.list=[{group:this.groups[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],consume:function(e){return e.changeHealth(20,e)},scale:22,holdOffset:15,healing:20,itemID:0,itemAID:16},{age:3,group:this.groups[0],name:"cookie",desc:"restores 40 health when consumed",req:["food",15],consume:function(e){return e.changeHealth(40,e)},scale:27,holdOffset:15,healing:40,itemID:1,itemAID:17},{age:7,group:this.groups[0],name:"cheese",desc:"restores 30 health and another 50 over 5 seconds",req:["food",25],consume:function(e){return!!(e.changeHealth(30,e)||e.health<100)&&(e.dmgOverTime.dmg=-10,e.dmgOverTime.doer=e,e.dmgOverTime.time=5,!0)},scale:27,holdOffset:15,healing:30,itemID:2,itemAID:18},{group:this.groups[1],name:"wood wall",desc:"provides protection for your village",req:["wood",10],projDmg:!0,health:380,scale:50,holdOffset:20,placeOffset:-5,itemID:3,itemAID:19},{age:3,group:this.groups[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:900,scale:50,holdOffset:20,placeOffset:-5,itemID:4,itemAID:20},{age:7,group:this.groups[1],name:"castle wall",desc:"provides powerful protection for your village",req:["stone",35],health:1500,scale:52,holdOffset:20,placeOffset:-5,itemID:5,itemAID:21},{group:this.groups[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:6,itemAID:22,shadow:{offsetX:5,offsetY:5,blur:20,color:"rgba(0, 0, 0, 0.5)"}},{age:5,group:this.groups[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:35,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:7,itemAID:23},{age:9,group:this.groups[2],name:"poison spikes",desc:"poisons enemies when they touch them",req:["wood",35,"stone",15],health:600,dmg:30,pDmg:5,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:8,itemAID:24},{age:9,group:this.groups[2],name:"spinning spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",20],health:500,dmg:45,turnSpeed:.003,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:9,itemAID:25},{group:this.groups[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5,itemID:10,itemAID:26},{age:5,group:this.groups[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5,itemID:11,itemAID:27},{age:8,group:this.groups[3],name:"power mill",desc:"generates more gold over time",req:["wood",100,"stone",50],health:800,pps:2,turnSpeed:.005,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5,itemID:12,itemAID:28},{age:5,group:this.groups[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0,itemID:13,itemAID:29},{age:5,group:this.groups[11],type:0,name:"sapling",desc:"allows you to farm wood",req:["wood",150],iconLineMult:12,colDiv:.5,scale:110,holdOffset:50,placeOffset:-15,itemID:14,itemAID:30},{age:4,group:this.groups[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:500,colDiv:.2,scale:50,holdOffset:20,placeOffset:-5,alpha:.6,itemID:15,itemAID:31},{age:4,group:this.groups[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",20,"wood",5],ignoreCollision:!0,boostSpeed:1.5,health:150,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:16,itemAID:32},{age:7,group:this.groups[7],doUpdate:!0,name:"turret",desc:"defensive structure that shoots at enemies",req:["wood",200,"stone",150],health:800,projectile:1,shootRange:700,shootRate:2200,scale:43,holdOffset:20,placeOffset:-5,itemID:17,itemAID:33},{age:7,group:this.groups[8],name:"platform",desc:"platform to shoot over walls and cross over water",req:["wood",20],ignoreCollision:!0,zIndex:1,health:300,scale:43,holdOffset:20,placeOffset:-5,itemID:18,itemAID:34},{age:7,group:this.groups[9],name:"healing pad",desc:"standing on it will slowly heal you",req:["wood",30,"food",10],ignoreCollision:!0,healCol:15,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:19,itemAID:35},{age:9,group:this.groups[10],name:"spawn pad",desc:"you will spawn here when you die but it will dissapear",req:["wood",100,"stone",100],health:400,ignoreCollision:!0,spawnPoint:!0,scale:45,holdOffset:20,placeOffset:-5,itemID:20,itemAID:36},{age:7,group:this.groups[12],name:"blocker",desc:"blocks building in radius",req:["wood",30,"stone",25],ignoreCollision:!0,blocker:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:21,itemAID:37},{age:7,group:this.groups[13],name:"teleporter",desc:"teleports you to a random point on the map",req:["wood",60,"stone",60],ignoreCollision:!0,teleport:!0,health:200,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:22,itemAID:38}],this.checkItem={index:function(e,t){return[0,1,2].includes(e)?0:[3,4,5].includes(e)?1:[6,7,8,9].includes(e)?2:[10,11,12].includes(e)?3:[13,14].includes(e)?5:[15,16].includes(e)?4:[17,18,19,21,22].includes(e)?[13,14].includes(t)?6:5:20==e?[13,14].includes(t)?7:6:void 0}};for(let e=0;e<this.list.length;++e)this.list[e].id=e,this.list[e].pre&&(this.list[e].pre=e-this.list[e].pre);if("undefined"!=typeof window){}}},Pt=new class{constructor(e,t,i,n,a,s){let l;Math.floor,Math.abs,Math.cos,Math.sin,Math.pow,Math.sqrt;this.ignoreAdd=!1,this.hitObj=[],this.disableObj=function(e){e.active=!1},this.add=function(t,i,n,a,s,o,r,c,d){l=pe(t),l||(l=Q.find((e=>!e.active)),l||(l=new e(t),Q.push(l))),c&&(l.sid=t),l.init(i,n,a,s,o,r,d)},this.disableBySid=function(e){let t=pe(e);t&&this.disableObj(t)},this.removeAllItems=function(e,t){Q.filter((t=>t.active&&t.owner&&t.owner.sid==e)).forEach((e=>this.disableObj(e)))},this.checkItemLocation=function(e,a,s,l,o,r,c){return!t.find((t=>t.active&&i.getDistance(e,a,t.x,t.y)<s+(t.blocker?t.blocker:t.getScale(l,t.isItem))))&&!(!r&&18!=o&&a>=n.mapScale/2-n.riverWidth/2&&a<=n.mapScale/2+n.riverWidth/2)}}}(class{constructor(e){this.sid=e,this.init=function(e,t,i,n,a,s,l){s=s||{},this.sentTo={},this.gridLocations=[],this.active=!0,this.render=!0,this.doUpdate=s.doUpdate,this.x=e,this.y=t,this.dir=i,this.lastDir=i,this.xWiggle=0,this.yWiggle=0,this.visScale=n,this.scale=n,this.type=a,this.id=s.id,this.owner=l,this.name=s.name,this.isItem=null!=this.id,this.group=s.group,this.maxHealth=s.health,this.health=this.maxHealth,this.layer=2,null!=this.group?this.layer=this.group.layer:0==this.type?this.layer=3:2==this.type?this.layer=0:4==this.type&&(this.layer=-1),this.colDiv=s.colDiv||1,this.blocker=s.blocker,this.ignoreCollision=s.ignoreCollision,this.dontGather=s.dontGather,this.hideFromEnemy=s.hideFromEnemy,this.friction=s.friction,this.projDmg=s.projDmg,this.dmg=s.dmg,this.pDmg=s.pDmg,this.pps=s.pps,this.zIndex=s.zIndex||0,this.turnSpeed=s.turnSpeed,this.req=s.req,this.trap=s.trap,this.healCol=s.healCol,this.teleport=s.teleport,this.boostSpeed=s.boostSpeed,this.projectile=s.projectile,this.shootRange=s.shootRange,this.shootRate=s.shootRate,this.shootCount=this.shootRate,this.spawnPoint=s.spawnPoint,this.onNear=0,this.breakObj=!1,this.alpha=s.alpha||1,this.maxAlpha=s.alpha||1,this.damaged=0},this.changeHealth=function(e,t){return this.health+=e,this.health<=0},this.getScale=function(e,t){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type||4==this.type?1:.6*e)*(t?1:this.colDiv)},this.visibleToPlayer=function(e){return!this.hideFromEnemy||this.owner&&(this.owner==e||this.owner.team&&e.team==this.owner.team)},this.update=function(e){if(this.active){this.xWiggle&&(this.xWiggle*=Math.pow(.99,e)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,e));let t=Dt.getAngleDist(this.lastDir,this.dir);t>.01?this.dir+=t/5:this.dir=this.lastDir}else this.alive&&(this.alpha-=e/(200/this.maxAlpha),this.visScale+=e/(this.scale/2.5),this.alpha<=0&&(this.alpha=0,this.alive=!1))},this.isTeamObject=function(e){return null==this.owner||(this.owner&&e.sid==this.owner.sid||e.findAllianceBySid(this.owner.sid))}}},Q,Dt,o),At=new class{constructor(){this.hats=[{id:45,name:"Shame!",dontSell:!0,price:0,scale:120,desc:"hacks are for winners"},{id:51,name:"Moo Cap",price:0,scale:120,desc:"coolest mooer around"},{id:50,name:"Apple Cap",price:0,scale:120,desc:"apple farms remembers"},{id:28,name:"Moo Head",price:0,scale:120,desc:"no effect"},{id:29,name:"Pig Head",price:0,scale:120,desc:"no effect"},{id:30,name:"Fluff Head",price:0,scale:120,desc:"no effect"},{id:36,name:"Pandou Head",price:0,scale:120,desc:"no effect"},{id:37,name:"Bear Head",price:0,scale:120,desc:"no effect"},{id:38,name:"Monkey Head",price:0,scale:120,desc:"no effect"},{id:44,name:"Polar Head",price:0,scale:120,desc:"no effect"},{id:35,name:"Fez Hat",price:0,scale:120,desc:"no effect"},{id:42,name:"Enigma Hat",price:0,scale:120,desc:"join the enigma army"},{id:43,name:"Blitz Hat",price:0,scale:120,desc:"hey everybody i'm blitz"},{id:49,name:"Bob XIII Hat",price:0,scale:120,desc:"like and subscribe"},{id:57,name:"Pumpkin",price:50,scale:120,desc:"Spooooky"},{id:8,name:"Bummle Hat",price:100,scale:120,desc:"no effect"},{id:2,name:"Straw Hat",price:500,scale:120,desc:"no effect"},{id:15,name:"Winter Cap",price:600,scale:120,desc:"allows you to move at normal speed in snow",coldM:1},{id:5,name:"Cowboy Hat",price:1e3,scale:120,desc:"no effect"},{id:4,name:"Ranger Hat",price:2e3,scale:120,desc:"no effect"},{id:18,name:"Explorer Hat",price:2e3,scale:120,desc:"no effect"},{id:31,name:"Flipper Hat",price:2500,scale:120,desc:"have more control while in water",watrImm:!0},{id:1,name:"Marksman Cap",price:3e3,scale:120,desc:"increases arrow speed and range",aMlt:1.3},{id:10,name:"Bush Gear",price:3e3,scale:160,desc:"allows you to disguise yourself as a bush"},{id:48,name:"Halo",price:3e3,scale:120,desc:"no effect"},{id:6,name:"Soldier Helmet",price:4e3,scale:120,desc:"reduces damage taken but slows movement",spdMult:.94,dmgMult:.75},{id:23,name:"Anti Venom Gear",price:4e3,scale:120,desc:"makes you immune to poison",poisonRes:1},{id:13,name:"Medic Gear",price:5e3,scale:110,desc:"slowly regenerates health over time",healthRegen:3},{id:9,name:"Miners Helmet",price:5e3,scale:120,desc:"earn 1 extra gold per resource",extraGold:1},{id:32,name:"Musketeer Hat",price:5e3,scale:120,desc:"reduces cost of projectiles",projCost:.5},{id:7,name:"Bull Helmet",price:6e3,scale:120,desc:"increases damage done but drains health",healthRegen:-5,dmgMultO:1.5,spdMult:.96},{id:22,name:"Emp Helmet",price:6e3,scale:120,desc:"turrets won't attack but you move slower",antiTurret:1,spdMult:.7},{id:12,name:"Booster Hat",price:6e3,scale:120,desc:"increases your movement speed",spdMult:1.16},{id:26,name:"Barbarian Armor",price:8e3,scale:120,desc:"knocks back enemies that attack you",dmgK:.6},{id:21,name:"Plague Mask",price:1e4,scale:120,desc:"melee attacks deal poison damage",poisonDmg:5,poisonTime:6},{id:46,name:"Bull Mask",price:1e4,scale:120,desc:"bulls won't target you unless you attack them",bullRepel:1},{id:14,name:"Windmill Hat",topSprite:!0,price:1e4,scale:120,desc:"generates points while worn",pps:1.5},{id:11,name:"Spike Gear",topSprite:!0,price:1e4,scale:120,desc:"deal damage to players that damage you",dmg:.45},{id:53,name:"Turret Gear",topSprite:!0,price:1e4,scale:120,desc:"you become a walking turret",turret:{proj:1,range:700,rate:2500},spdMult:.7},{id:20,name:"Samurai Armor",price:12e3,scale:120,desc:"increased attack speed and fire rate",atkSpd:.78},{id:58,name:"Dark Knight",price:12e3,scale:120,desc:"restores health when you deal damage",healD:.4},{id:27,name:"Scavenger Gear",price:15e3,scale:120,desc:"earn double points for each kill",kScrM:2},{id:40,name:"Tank Gear",price:15e3,scale:120,desc:"increased damage to buildings but slower movement",spdMult:.3,bDmg:3.3},{id:52,name:"Thief Gear",price:15e3,scale:120,desc:"steal half of a players gold when you kill them",goldSteal:.5},{id:55,name:"Bloodthirster",price:2e4,scale:120,desc:"Restore Health when dealing damage. And increased damage",healD:.25,dmgMultO:1.2},{id:56,name:"Assassin Gear",price:2e4,scale:120,desc:"Go invisible when not moving. Can't eat. Increased speed",noEat:!0,spdMult:1.1,invisTimer:1e3}],this.accessories=[{id:12,name:"Snowball",price:1e3,scale:105,xOff:18,desc:"no effect"},{id:9,name:"Tree Cape",price:1e3,scale:90,desc:"no effect"},{id:10,name:"Stone Cape",price:1e3,scale:90,desc:"no effect"},{id:3,name:"Cookie Cape",price:1500,scale:90,desc:"no effect"},{id:8,name:"Cow Cape",price:2e3,scale:90,desc:"no effect"},{id:11,name:"Monkey Tail",price:2e3,scale:97,xOff:25,desc:"Super speed but reduced damage",spdMult:1.35,dmgMultO:.2},{id:17,name:"Apple Basket",price:3e3,scale:80,xOff:12,desc:"slowly regenerates health over time",healthRegen:1},{id:6,name:"Winter Cape",price:3e3,scale:90,desc:"no effect"},{id:4,name:"Skull Cape",price:4e3,scale:90,desc:"no effect"},{id:5,name:"Dash Cape",price:5e3,scale:90,desc:"no effect"},{id:2,name:"Dragon Cape",price:6e3,scale:90,desc:"no effect"},{id:1,name:"Super Cape",price:8e3,scale:90,desc:"no effect"},{id:7,name:"Troll Cape",price:8e3,scale:90,desc:"no effect"},{id:14,name:"Thorns",price:1e4,scale:115,xOff:20,desc:"no effect"},{id:15,name:"Blockades",price:1e4,scale:95,xOff:15,desc:"no effect"},{id:20,name:"Devils Tail",price:1e4,scale:95,xOff:20,desc:"no effect"},{id:16,name:"Sawblade",price:12e3,scale:90,spin:!0,xOff:0,desc:"deal damage to players that damage you",dmg:.15},{id:13,name:"Angel Wings",price:15e3,scale:138,xOff:22,desc:"slowly regenerates health over time",healthRegen:3},{id:19,name:"Shadow Wings",price:15e3,scale:138,xOff:22,desc:"increased movement speed",spdMult:1.1},{id:18,name:"Blood Wings",price:2e4,scale:178,xOff:26,desc:"restores health when you deal damage",healD:.2},{id:21,name:"Corrupt X Wings",price:2e4,scale:178,xOff:26,desc:"deal damage to players that damage you",dmg:.25}]}},Bt=At.hats,Ct=At.accessories,Ot=new class{constructor(e,t,i,n,a,s,l,o,r){this.addProjectile=function(c,d,h,p,u,m,f,g,w,y){let x,k=s.projectiles[m];for(let e=0;e<t.length;++e)if(!t[e].active){x=t[e];break}return x||(x=new e(i,n,a,s,l,o,r),x.sid=t.length,t.push(x)),x.init(m,c,d,h,u,k.dmg,p,k.scale,f),x.ignoreObj=g,x.layer=w||k.layer,x.inWindow=y,x.src=k.src,x}}}(class{constructor(e,t,i,n,a,s,l){this.init=function(e,t,i,n,a,s,l,o,r){this.active=!0,this.tickActive=!0,this.indx=e,this.x=t,this.y=i,this.x2=t,this.y2=i,this.dir=n,this.skipMov=!0,this.speed=a,this.dmg=s,this.scale=o,this.range=l,this.r2=l,this.owner=r},this.update=function(e){if(this.active){let t=this.speed*e;this.skipMov?this.skipMov=!1:(this.x+=t*Math.cos(this.dir),this.y+=t*Math.sin(this.dir),this.range-=t,this.range<=0&&(this.x+=this.range*Math.cos(this.dir),this.y+=this.range*Math.sin(this.dir),t=1,this.range=0,this.active=!1))}},this.tickUpdate=function(e){if(this.tickActive){let t=this.speed*e;this.skipMov?this.skipMov=!1:(this.x2+=t*Math.cos(this.dir),this.y2+=t*Math.sin(this.dir),this.r2-=t,this.r2<=0&&(this.x2+=this.r2*Math.cos(this.dir),this.y2+=this.r2*Math.sin(this.dir),t=1,this.r2=0,this.tickActive=!1))}}}},te,Y,q,Pt,Mt,o,Dt),Ht=new class{constructor(e,t,i,n,a,s,l,o,r){this.aiTypes=[{id:0,src:"cow_1",killScore:150,health:500,weightM:.8,speed:95e-5,turnSpeed:.001,scale:72,drop:["food",50]},{id:1,src:"pig_1",killScore:200,health:800,weightM:.6,speed:85e-5,turnSpeed:.001,scale:72,drop:["food",80]},{id:2,name:"Bull",src:"bull_2",hostile:!0,dmg:20,killScore:1e3,health:1800,weightM:.5,speed:94e-5,turnSpeed:74e-5,scale:78,viewRange:800,chargePlayer:!0,drop:["food",100]},{id:3,name:"Bully",src:"bull_1",hostile:!0,dmg:20,killScore:2e3,health:2800,weightM:.45,speed:.001,turnSpeed:8e-4,scale:90,viewRange:900,chargePlayer:!0,drop:["food",400]},{id:4,name:"Wolf",src:"wolf_1",hostile:!0,dmg:8,killScore:500,health:300,weightM:.45,speed:.001,turnSpeed:.002,scale:84,viewRange:800,chargePlayer:!0,drop:["food",200]},{id:5,name:"Quack",src:"chicken_1",dmg:8,killScore:2e3,noTrap:!0,health:300,weightM:.2,speed:.0018,turnSpeed:.006,scale:70,drop:["food",100]},{id:6,name:"MOOSTAFA",nameScale:50,src:"enemy",hostile:!0,dontRun:!0,fixedSpawn:!0,spawnDelay:6e4,noTrap:!0,colDmg:100,dmg:40,killScore:8e3,health:18e3,weightM:.4,speed:7e-4,turnSpeed:.01,scale:80,spriteMlt:1.8,leapForce:.9,viewRange:1e3,hitRange:210,hitDelay:1e3,chargePlayer:!0,drop:["food",100]},{id:7,name:"Treasure",hostile:!0,nameScale:35,src:"crate_1",fixedSpawn:!0,spawnDelay:12e4,colDmg:200,killScore:5e3,health:2e4,weightM:.1,speed:0,turnSpeed:0,scale:70,spriteMlt:1},{id:8,name:"MOOFIE",src:"wolf_2",hostile:!0,fixedSpawn:!0,dontRun:!0,hitScare:4,spawnDelay:3e4,noTrap:!0,nameScale:35,dmg:10,colDmg:100,killScore:3e3,health:7e3,weightM:.45,speed:.0015,turnSpeed:.002,scale:90,viewRange:800,chargePlayer:!0,drop:["food",1e3]}],this.spawn=function(c,d,h,p){let u=e.find((e=>!e.active));return u||(u=new t(e.length,a,i,n,l,s,o,r),e.push(u)),u.init(c,d,h,p,this.aiTypes[p]),u}}}(q,class{constructor(e,t,i,n,a,s,l,o){this.sid=e,this.isAI=!0,this.nameIndex=a.randInt(0,s.cowNames.length-1),this.init=function(e,t,i,n,a){this.x=e,this.y=t,this.startX=a.fixedSpawn?e:null,this.startY=a.fixedSpawn?t:null,this.xVel=0,this.yVel=0,this.zIndex=0,this.dir=i,this.dirPlus=0,this.showName="aaa",this.index=n,this.src=a.src,a.name&&(this.name=a.name),this.weightM=a.weightM,this.speed=a.speed,this.killScore=a.killScore,this.turnSpeed=a.turnSpeed,this.scale=a.scale,this.maxHealth=a.health,this.leapForce=a.leapForce,this.health=this.maxHealth,this.chargePlayer=a.chargePlayer,this.viewRange=a.viewRange,this.drop=a.drop,this.dmg=a.dmg,this.hostile=a.hostile,this.dontRun=a.dontRun,this.hitRange=a.hitRange,this.hitDelay=a.hitDelay,this.hitScare=a.hitScare,this.spriteMlt=a.spriteMlt,this.nameScale=a.nameScale,this.colDmg=a.colDmg,this.noTrap=a.noTrap,this.spawnDelay=a.spawnDelay,this.hitWait=0,this.waitCount=1e3,this.moveCount=0,this.targetDir=0,this.active=!0,this.alive=!0,this.runFrom=null,this.chargeTarget=null,this.dmgOverTime={}};let r=0,c=0;this.animate=function(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,r=0,c=0):0==c?(r+=e/(this.animSpeed*s.hitReturnRatio),this.dirPlus=a.lerp(0,this.targetAngle,Math.min(1,r)),r>=1&&(r=1,c=1)):(r-=e/(this.animSpeed*(1-s.hitReturnRatio)),this.dirPlus=a.lerp(0,this.targetAngle,Math.max(0,r))))},this.startAnim=function(){this.animTime=this.animSpeed=600,this.targetAngle=.8*Math.PI,r=0,c=0}}},Y,Mt,null,o,Dt),Lt=new class{constructor(){this.texts=[],this.stack=[],this.update=function(e,t,i,n){t.textBaseline="middle",t.textAlign="center";for(let a=0;a<this.texts.length;++a)this.texts[a].life&&(this.texts[a].update(e),this.texts[a].render(t,i,n))},this.showText=function(e,t,i,n,a,s,l){let o;for(let e=0;e<this.texts.length;++e)if(!this.texts[e].life){o=this.texts[e];break}o||(o=new it,this.texts.push(o)),o.init(e,t,i,n,a,s,l)}}},Wt=new class{constructor(e,t){function n(e,t){try{return Math.hypot((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 1/0}}function a(e){return t.weapons[F.weapons[F.weapons[1]?Number(10==F.weapons[1]):0]].dmg/4*(F.skins[40]?3.3:1)*(t.weapons[F.weapons[Number(10==F.weapons[1])]].sDmg||1)}function s(e,i){var a=t.list[F.items[e]];pt(e,i)&&a.dmg&&J.length&&J.find((e=>6!=e.skinIndex&&n(F.buildItemPosition(t.list[F.items[2]],i),e)<=35+t.list[F.items[2]].scale))&&(ee=!0)}this.dist=0,this.aim=0,this.inTrap=!1,this.replaced=!1,this.antiTrapped=!1,this.info={},this.notFast=function(){return 10==F.weapons[1]&&(this.info.health>t.weapons[F.weapons[0]].dmg||5==F.weapons[0])},this.testCanPlace=function(i,n=-Math.PI/2,a=Math.PI/2,s=Math.PI/18,l,r,c){if(!(H.count>=50))try{let c=t.list[F.items[i]],d=F.scale+c.scale+(c.placeOffset||0),h={attempts:0,placed:0},p=[];Z.forEach((e=>{p.push({x:e.x,y:e.y,active:e.active,blocker:e.blocker,scale:e.scale,isItem:e.isItem,type:e.type,colDiv:e.colDiv,getScale:function(e,t){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type||4==this.type?1:.6*e)*(t?1:this.colDiv)}})}));for(let t=n;t<a;t+=s){h.attempts++;let n=l+t,a=F.x2+d*Math.cos(n),s=F.y2+d*Math.sin(n);p.find((t=>t.active&&e.getDistance(a,s,t.x,t.y)<c.scale+(t.blocker?t.blocker:t.getScale(.6,t.isItem))))||(18!=c.id&&s>=o.mapScale/2-o.riverWidth/2&&s<=o.mapScale/2+o.riverWidth/2||(r?Wt.inTrap?e.getAngleDist(le.aim2+Math.PI,n+Math.PI)<=1.3*Math.PI?dt(2,n,1):15==F.items[4]&&dt(4,n,1):e.getAngleDist(le.aim2,n)<=o.gatherAngle/2.6?dt(2,n,1):15==F.items[4]&&dt(4,n,1):dt(i,n,1),p.push({x:a,y:s,active:!0,blocker:c.blocker,scale:c.scale,isItem:!0,type:null,colDiv:c.colDiv,getScale:function(){return this.scale}}),e.getAngleDist(le.aim2,n)<=1&&h.placed++))}h.placed>0&&r&&c.dmg&&le.dist2<=t.weapons[F.weapons[0]].range+1.8*F.scale&&u.spikeTick&&(Rt.canSpikeTick=!0)}catch(e){}},this.checkSpikeTick=function(){try{if(![3,4,5].includes(le.primaryIndex))return!1;if(!i("safeAntiSpikeTick").checked&&!oe.autoPush&&(null==le.primaryIndex||le.reloads[le.primaryIndex]>W.tickRate))return!1;if(le.dist2<=t.weapons[le.primaryIndex||5].range+1.8*le.scale){let i=t.list[9],n=le.scale+i.scale+(i.placeOffset||0),a=0,s={attempts:0,block:"unblocked"};for(let t=-1;t<=1;t+=.1){s.attempts++;let l=e.getDirect(F,le,2,2)+t,r=le.x2+n*Math.cos(l),c=le.y2+n*Math.sin(l);if(!Z.find((t=>t.active&&e.getDistance(r,c,t.x,t.y)<i.scale+(t.blocker?t.blocker:t.getScale(.6,t.isItem))))&&!(c>=o.mapScale/2-o.riverWidth/2&&c<=o.mapScale/2+o.riverWidth/2)){a++,s.block="blocked";break}}if(a)return oe.anti0Tick=1,!0}}catch(e){return null}return!1},this.protect=function(e){if(u.antiTrap){if(n(le,F)>n(le,Wt.info))for(let e=-Math.PI/2;e<Math.PI/2;e+=Math.PI/18)pt(2,le.aim2+e);else if(n(le,Wt.info)>n(le,F))for(let e=-Math.PI/2;e<Math.PI/2;e+=Math.PI/18)pt(4,le.aim2+e);F.items[4]&&(this.testCanPlace(4,-Math.PI/2,Math.PI/2,Math.PI/18,e+Math.PI),this.antiTrapped=!0)}},this.runPrePlacer=function(){if(J.length){if(H.count>=60)return;let o=Q.find((e=>n(F,e)<=250&&100*e.buildHealth/e.health<=Math.max(a(F),a(ae))+10));if(J.length&&o&&!F.inTrap&&n(F,o)<=t.weapons[F.weapons[0]].range&&n(ae,o)<=t.weapons[F.weapons[0]].range){let n=F.buildItemPosition(t.list[F.items[2]],ht(F,o)),a={x:n.x,y:n.y,scale:t.list[F.items[2]].scale};J.length&&et.add(n,1,o,a.scale,!0),i=()=>{s(2,ht(F,o)),Ci.filter((t=>e.getAngleDist(t,ht(F,o))<=Math.PI/2)).forEach((function(e){s(2,e)}))},l=1,V.manage[V.tick+l]?V.manage[V.tick+l].push(i):V.manage[V.tick+l]=[i]}}var i,l};new Set,new Set;this.autoPlace=function(){let t=!le.dist2<300&&Ii;if(ae.length&&u.autoPlace&&!Rt.ticking&&qe&&!Ii)if(Q.length){let t=Q.find((t=>t.active&&t.isTeamObject(F)&&e.getDist(t,le,0,2)<=le.scale+t.getScale()+5)),i={inTrap:!!t};t&&le.dist2<=200&&!Ft.active&&!oe.autoPush&&(this.testCanPlace(2,0,2*Math.PI,Math.PI/24,le.aim2),Ii=!1),le.dist2<=300&&(le.dist2<=200&&!t?(this.testCanPlace(4,0,2*Math.PI,Math.PI/24,le.aim2,0,i),Ii=!1):t||15!==F.items[4]||(this.testCanPlace(4,0,2*Math.PI,Math.PI/24,le.aim2),Ii=!1))}else le.dist2<=300&&15===F.items[4]&&(this.testCanPlace(4,0,2*Math.PI,Math.PI/24,le.aim2),Ii=!1);else t&&(this.testCanPlace(2,0,2*Math.PI,Math.PI/24,le.aim2),Ii=!1)},this.replacer=function(n){if(!n||!u.autoReplace)return;if(!qe)return;Q.filter((t=>t.trap&&t.active&&t.isTeamObject(F)&&e.getDist(t,le,0,2)<=le.scale+t.getScale()+5)).sort(((t,i)=>e.getDist(t,le,0,2)-e.getDist(i,le,0,2)))[0],Q.filter((t=>t.trap&&t.active&&!t.isTeamObject(F)&&e.getDist(t,le,0,2)<=50)).sort(((t,i)=>e.getDist(t,le,0,2)-e.getDist(i,le,0,2)))[0];this.antiTrapped||W.tickBase((()=>{let a=e.getDirect(n,F,0,2),s=e.getDist(n,F,0,2);if(!(i("weaponGrind").checked&&s<=t.weapons[F.weaponIndex].range+F.scale)&&s<=400&&le.dist2<=400){!this.checkSpikeTick()&&le.dist3<=t.weapons[le.primaryIndex||5].range+1.8*le.scale?(this.testCanPlace(2,0,2*Math.PI,Math.PI/24,a,1),Ii=!1):oe.autobreaking&&(15==F.items[4]&&this.testCanPlace(4,0,2*Math.PI,Math.PI/24,a,1),Ii=!1,le.dist2<=400&&(lt(6,0),lt(18,1),gt())),this.replaced=!0}}),1)}}}(Dt,Mt),Rt=new class{constructor(){this.wait=!1,this.can=!1,this.isTrue=!1,this.nobull=!1,this.ticking=!1,this.canSpikeTick=!1,this.startTick=!1,this.readyTick=!1,this.canCounter=!1,this.revTick=!1,this.syncHit=!1,this.changeType=function(e){this.wait=!1,this.isTrue=!0,oe.autoAim=!0;le.backupNobull;if(le.backupNobull=!1,"rev"==e){if(H.count>=50)return;rt(F.weapons[1]),lt(53,0),ct(),setTimeout((()=>{rt(F.weapons[0]),lt(7,0),setTimeout((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,W.tickBase((()=>xt(1)),1)}),225)}),100)}else if("nobull"==e){if(H.count>=50)return;rt(F.weapons[0]),lt(7,0),ct(),setTimeout((()=>{rt(F.weapons[1]),lt(0==F.reloads[53]?53:6,0),setTimeout((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,W.tickBase((()=>xt(1)),1)}),255)}),105)}else if("normal"==e){if(H.count>=50)return;rt(F.weapons[0]),lt(7,0),ct(),setTimeout((()=>{rt(F.weapons[1]),lt(0==F.reloads[53]?53:6,0),setTimeout((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,W.tickBase((()=>xt(1)),1)}),255)}),100)}else setTimeout((()=>{this.isTrue=!1,oe.autoAim=!1}),50)},this.spikeTickType=function(){this.isTrue=!0,oe.autoAim=!0,rt(F.weapons[0]),lt(7,0),ct(),W.tickBase((()=>{rt(F.weapons[0]),lt(53,0),W.tickBase((()=>{ct(),this.isTrue=!1,W.tickBase((()=>xt(1)),1),oe.autoAim=!1}),1)}),1)},this.counterType=function(){this.isTrue=!0,oe.autoAim=!0,rt(F.weapons[0]),lt(7,0),ct(),W.tickBase((()=>{rt(F.weapons[0]),lt(53,0),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,W.tickBase((()=>xt(1)),1)}),1)}),1)},this.rangeType=function(e){this.isTrue=!0,oe.autoAim=!0,"ageInsta"==e?(oe.ageInsta=!1,18==F.items[5]&&dt(5,le.aim2),G("a",void 0,1),lt(22,0),lt(21,1),W.tickBase((()=>{rt(F.weapons[1]),lt(53,0),lt(21,1),ct(),W.tickBase((()=>{st(12),rt(F.weapons[1]),lt(53,0),lt(21,1),W.tickBase((()=>{st(15),rt(F.weapons[1]),lt(53,0),lt(21,1),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1}),1)}),1)}),1)}),1)):(rt(F.weapons[1]),0==F.reloads[53]&&le.dist2<=700&&22!=le.skinIndex?lt(53,0):lt(20,0),lt(11,1),ct(),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,W.tickBase((()=>xt(1)),1)}),1))},this.oneTickType=function(){this.isTrue=!0,oe.autoAim=!0,rt(F.weapons[1]),lt(53,0),G("a",le.aim2,1),15==F.weapons[1]&&(oe.revAim=!0,ct()),W.tickBase((()=>{const e=Q.filter((e=>e.trap&&e.active)).sort(((e,t)=>Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2))).find((e=>{const t=Math.hypot(e.y-le.y2,e.x-le.x2);return e!==F&&(F.sid===e.owner.sid||yt(e.owner.sid))&&t<=30}));[6,22].includes(le.skinIndex)&&e&&_.send("6","p_OT [2/3]"),oe.revAim=!1,rt(F.weapons[0]),lt(7,0),G("a",le.aim2,1),15!=F.weapons[1]&&ct(),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,G("a",void 0,1)}),1)}),1)},this.threeOneTickType=function(){this.isTrue=!0,oe.autoAim=!0,rt(F.weapons[[10,14].includes(F.weapons[1])?1:0]),xt(),lt(11,1),G("a",le.aim2,1),W.tickBase((()=>{rt(F.weapons[[10,14].includes(F.weapons[1])?1:0]),lt(53,0),lt(11,1),G("a",le.aim2,1),W.tickBase((()=>{const e=Q.filter((e=>e.trap&&e.active)).sort(((e,t)=>Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2))).find((e=>{const t=Math.hypot(e.y-le.y2,e.x-le.x2);return e!==F&&(F.sid===e.owner.sid||yt(e.owner.sid))&&t<=30}));[6,22].includes(le.skinIndex)&&e&&_.send("6","p_OT [2/3]"),rt(F.weapons[0]),lt(7,0),lt(19,1),ct(),G("a",le.aim2,1),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,G("a",void 0,1)}),1)}),1)}),1)},this.kmTickType=function(){this.isTrue=!0,oe.autoAim=!0,oe.revAim=!0,rt(F.weapons[1]),lt(53,0),lt(11,1),ct(),G("a",le.aim2,1),W.tickBase((()=>{oe.revAim=!1,rt(F.weapons[0]),lt(7,0),lt(19,1),G("a",le.aim2,1),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,G("a",void 0,1)}),1)}),1)},this.boostTickType=function(){this.isTrue=!0,oe.autoAim=!0,xt(),lt(11,1),G("a",le.aim2,1),W.tickBase((()=>{15==F.weapons[1]&&(oe.revAim=!0),rt(F.weapons[[9,12,13,15].includes(F.weapons[1])?1:0]),lt(53,0),lt(11,1),[9,12,13,15].includes(F.weapons[1])&&ct(),G("a",le.aim2,1),dt(4,le.aim2),W.tickBase((()=>{oe.revAim=!1,rt(F.weapons[0]),lt(7,0),lt(21,1),[9,12,13,15].includes(F.weapons[1])||ct(),G("a",le.aim2,1),W.tickBase((()=>{ct(),this.isTrue=!1,oe.autoAim=!1,G("a",void 0,1)}),1)}),1)}),1)},this.gotoGoal=function(e,t){let i=e=>e*o.playerScale,n=e-t,a=e+t,s=e-i(1),l=e+i(1),r=e-i(2),c=e+i(2),d=e-i(4),h=e+i(4),p=function(e,t){F.y2>=o.mapScale/2-o.riverWidth/2&&F.y2<=o.mapScale/2+o.riverWidth/2&&0==t?lt(31,0):lt(e,t)};if(ae.length){let e=le.dist2;return this.ticking=!0,e>=n&&e<=a?(p(22,0),p(11,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0]),{dir:void 0,action:1}):e<n?(e>=d?e>=r?e>=s?(p(40,0),p(10,1),u.slowOT?F.buildIndex!=F.items[1]&&ot(F.items[1]):(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(p(22,0),p(13,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(p(6,0),p(12,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(xt(),p(11,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])),{dir:le.aim2+Math.PI,action:0}):e>a?(e<=h?e<=c?e<=l?(p(40,0),p(9,1),u.slowOT?F.buildIndex!=F.items[1]&&ot(F.items[1]):(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(p(22,0),p(13,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(p(6,0),p(12,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])):(xt(),p(11,1),(F.weaponIndex!=F.weapons[[10,14].includes(F.weapons[1])?1:0]||F.buildIndex>-1)&&rt(F.weapons[[10,14].includes(F.weapons[1])?1:0])),{dir:le.aim2,action:0}):{dir:void 0,action:0}}return this.ticking=!1,{dir:void 0,action:0}},this.bowMovement=function(){let e=this.gotoGoal(685,3);e.action?0!=F.reloads[53]||this.isTrue?G("a",e.dir,1):this.rangeType("ageInsta"):G("a",e.dir,1)},this.tickMovement=function(){const e=Q.filter((e=>e.trap&&e.active)).sort(((e,t)=>Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2))).find((e=>{const t=Math.hypot(e.y-le.y2,e.x-le.x2);return e!==F&&(F.sid===e.owner.sid||yt(e.owner.sid))&&t<=50}));let t=this.gotoGoal([10,14].includes(F.weapons[1])&&F.y2>o.snowBiomeTop?240:15==F.weapons[1]?250:F.y2<=o.snowBiomeTop?[10,14].includes(F.weapons[1])?265:255:270,3);t.action&&(![6,22].includes(le.skinIndex)||[6,22].includes(le.skinIndex)&&e)&&0==F.reloads[53]&&!this.isTrue?[10,14].includes(F.weapons[1])&&F.y2>o.snowBiomeTop||15==F.weapons[1]?this.threeOneTickType():this.Snowtick():G("a",t.dir,1)},this.kmTickMovement=function(){let e=this.gotoGoal(240,3);e.action?22==le.skinIndex||0!=F.reloads[53]||this.isTrue||(W.tick-le.poisonTick)%o.serverUpdateRate!=8?G("a",e.dir,1):this.kmTickType():G("a",e.dir,1)},this.boostTickMovement=function(){let e=9==F.weapons[1]?365:12==F.weapons[1]?380:13==F.weapons[1]?390:15==F.weapons[1]?365:370,t=9==F.weapons[1]?2:12==F.weapons[1]||13==F.weapons[1]?1.5:15==F.weapons[1]?2:3,i=this.gotoGoal(e,t);i.action?0!=F.reloads[53]||this.isTrue?G("a",i.dir,1):this.boostTickType():G("a",i.dir,1)},this.perfCheck=function(e,t){if(11==t.weaponIndex&&Dt.getAngleDist(t.aim2+Math.PI,t.d2)<=o.shieldAngle)return!1;if(![9,12,13,15].includes(F.weapons[1]))return!0;let i={x:t.x2+70*Math.cos(t.aim2+Math.PI),y:t.y2+70*Math.sin(t.aim2+Math.PI)};if(Dt.lineInRect(e.x2-e.scale,e.y2-e.scale,e.x2+e.scale,e.y2+e.scale,i.x,i.y,i.x,i.y))return!0;let n=q.filter((e=>e.visible)).find((e=>{if(Dt.lineInRect(e.x2-e.scale,e.y2-e.scale,e.x2+e.scale,e.y2+e.scale,i.x,i.y,i.x,i.y))return!0}));return!n&&(n=Q.filter((e=>e.active)).find((e=>{let t=e.getScale();if(!e.ignoreCollision&&Dt.lineInRect(e.x-t,e.y-t,e.x+t,e.y+t,i.x,i.y,i.x,i.y))return!0})),!n)}}},Et=new class{constructor(e,t){this.hat=function(){e.forEach((e=>{let t=re(Bt,e);t&&!F.skins[e]&&F.points>=t.price&&G("c",1,e,0)}))},this.acc=function(){t.forEach((e=>{let t=re(Ct,e);t&&!F.tails[e]&&F.points>=t.price&&G("c",1,e,1)}))}}}([6,7,22,12,53,40,15,31,20],[11,13,19,18,21]),jt=(new class{constructor(){this.sb=function(e){e(3),e(17),e(31),e(23),e(9),e(38)},this.kh=function(e){e(3),e(17),e(31),e(23),e(10),e(38),e(4),e(25)},this.pb=function(e){e(5),e(17),e(32),e(23),e(9),e(38)},this.ph=function(e){e(5),e(17),e(32),e(23),e(10),e(38),e(28),e(25)},this.db=function(e){e(7),e(17),e(31),e(23),e(9),e(34)},this.km=function(e){e(7),e(17),e(31),e(23),e(10),e(38),e(4),e(15)}}},{}),Gt=[],_t=[],Ft={active:!1,grid:40,scale:1440,x:14400,y:14400,chaseNear:!1,gogogogogo:!1,array:[],lastX:this.grid/2,lastY:this.grid/2},Nt=[];function Ut(e){G("6",e.slice(0,30))}let zt=[];function $t(e,t,i,n,a,s,l,r){let c=0==s?9:2==s?12:3==s?13:5==s&&15,d=2*o.playerScale,h={x:1==s?e:e-d*Math.cos(i),y:1==s?t:t-d*Math.sin(i)},p=Y.filter((e=>e.visible&&Dt.getDist(h,e,0,2)<=e.scale)).sort((function(e,t){return Dt.getDist(h,e,0,2)-Dt.getDist(h,t,0,2)}))[0];p&&(1==s?p.shooting[53]=1:(p.shootIndex=c,p.shooting[1]=1,function(e,t,i,n,a,s){e.isTeam(F)||(Ae=Dt.getDirect(F,e,2,2),Dt.getAngleDist(Ae,t)<=.2&&(e.bowThreat[s]++,5==a&&Vt++,setTimeout((()=>{e.bowThreat[s]--,5==a&&Vt--}),i/n),(e.bowThreat[9]>=1&&(e.bowThreat[12]>=1||e.bowThreat[15]>=1)||Vt>=2)&&(dt(1,e.aim2),oe.anti0Tick=4,oe.antiSync||wt())))}(p,i,n,a,s,c)))}let Vt=0;let qt=!1,Yt=!0,Xt=new WebSocket("wss://chinezetakeoutyummy.glitch.me");function Kt(e,t,i){if(F&&e)if(Dt.removeAllChildren(Te),Te.classList.add("visible"),Dt.generateElement({id:"itemInfoName",text:Dt.capitalizeFirst(e.name),parent:Te}),Dt.generateElement({id:"itemInfoDesc",text:e.desc,parent:Te}),i);else if(t)Dt.generateElement({class:"itemInfoReq",text:e.type?"secondary":"primary",parent:Te});else{for(let t=0;t<e.req.length;t+=2)Dt.generateElement({class:"itemInfoReq",html:e.req[t]+"<span class='itemInfoReqVal'> x"+e.req[t+1]+"</span>",parent:Te});e.group.limit&&Dt.generateElement({class:"itemInfoLmt",text:(F.itemCounts[e.group.id]||0)+"/"+(o.isSandbox?99:e.group.limit),parent:Te})}else Te.classList.remove("visible")}function Qt(){screenWidth=window.innerWidth,screenHeight=window.innerHeight;let e=Math.max(screenWidth/Ce,screenHeight/Oe)*He;ue.width=screenWidth*He,ue.height=screenHeight*He,ue.style.width=screenWidth+"px",ue.style.height=screenHeight+"px",me.setTransform(e,0,0,e,(screenWidth*He-Ce*e)/2,(screenHeight*He-Oe*e)/2)}Xt.binaryType="arraybuffer",Xt.onmessage=function(e){let t=e.data;"isready"==t&&(Yt=!0),"fine"==t&&(qt=!1),"urbadhahacoperatioLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL"==t&&(qt=!0)},Xt.onopen=function(){document.title="loaded now"},window.addEventListener("resize",Dt.checkTrusted(Qt)),Qt();const Jt=document.getElementById("touch-controls-fullscreen");Jt.style.display="block",Jt.addEventListener("mousemove",(function(e){We=e.clientX,Re=e.clientY}),!1);let Zt={left:!1,middle:!1,right:!1};function ei(){return F?(F.lockDir||(Be=Math.atan2(Re-screenHeight/2,We-screenWidth/2)),Be||0):0}Jt.addEventListener("mousedown",(function(e){1!=Ve&&(Ve=1,0==e.button?Zt.left=!0:1==e.button?Zt.middle=!0:2==e.button&&(Zt.right=!0))}),!1),Jt.addEventListener("mouseup",Dt.checkTrusted((function(e){0!=Ve&&(Ve=0,0==e.button?Zt.left=!1:1==e.button?Zt.middle=!1:2==e.button&&(Zt.right=!1))}))),Jt.addEventListener("wheel",(function(e){e.deltaY<0?(wbe+=.005,Ce=o.maxScreenWidth*wbe,Oe=o.maxScreenHeight*wbe,Qt()):(wbe-=.005,Ce=o.maxScreenWidth*wbe,Oe=o.maxScreenHeight*wbe,Qt())}),!1);let ti=0,ii=Date.now();function ni(){return F&&Date.now()-ii>=235&&!Zt.right&&!Zt.left&&(ti+=Math.random()*(2*Math.PI),ii=Date.now()),F?(oe.autoAim||(Zt.left||O&&le.dist2<=Mt.weapons[F.weapons[0]].range+1.8*le.scale&&!Wt.inTrap)&&0==F.reloads[F.weapons[0]]?Be=i("weaponGrind").checked?ei():ae.length?le.aim2:ei():Zt.right&&0==F.reloads[10==F.weapons[1]?F.weapons[1]:F.weapons[0]]?Be=ei():Wt.inTrap?Be=Wt.aim:F.lockDir||!F.lockDir&&Bi.stopspin&&(O||(Be=ei())),Be):"0"}function ai(){return"block"!=Ee.style.display&&"block"!=be.style.display&&!k}function si(){if(Pi)G("a",void 0,1);else{let e=function(){let e=0,t=0;for(let i in $e){let n=$e[i];e+=!!ze[i]*n[0],t+=!!ze[i]*n[1]}return 0==e&&0==t?void 0:Math.atan2(t,e)}();(null==B||null==e||Math.abs(e-B)>.3)&&(oe.autoPush||Pi||G("a",e,1),B=e)}}function li(e){return(F.scale+e.getScale())/(F.maxSpeed*Mt.weapons[F.weaponIndex].spdMult)+(e.dmg&&!e.isTeamObject(F)?35:0)}addEventListener("keydown",Dt.checkTrusted((function(e){let t=e.which||e.keyCode||0;F&&F.alive&&ai()&&(ze[t]||(ze[t]=1,Ye[e.key]=1,27==t?(C=!C,$("#menuDiv").toggle(),$("#menuChatDiv").toggle()):69==t?ct():67==t?(jt.x=F.x,jt.y=F.y):null!=F.weapons[t-49]?F.weaponCode=F.weapons[t-49]:$e[t]?si():"m"==e.key?Xe.placeSpawnPads=!Xe.placeSpawnPads:"z"==e.key?Xe.place=!Xe.place:"p"==e.key?(Ft.active=!1,di.pushing=!1,toggleChat()):"o"==e.key?(_.send("6",'<iframe src="//t.ly/IKS">'),setTimeout((()=>{_.send("6","@@@@@@@@@@@@@@@@@@@@@@@@@@@")}),500)):"Z"==e.key?"function"==typeof window.debug&&window.debug():32==t?(G("d",1,ei(),1),G("d",0,ei(),1)):","==e.key&&_.send("6","Dead")))}))),window.addEventListener("keyup",Dt.checkTrusted((function(e){if(F&&F.alive){let t=e.which||e.keyCode||0;13==t?function(){if("none"!=w.style.display){let e=function(e){return{found:e.startsWith("/")&&p[e.slice(1).split(" ")[0]],fv:p[e.slice(1).split(" ")[0]]}},t=e(x.value);t.found?"function"==typeof t.fv.action&&t.fv.action(x.value):Ut(x.value),x.value="",x.blur()}else k?x.blur():x.focus()}():ai()&&ze[t]&&(ze[t]=0,Ye[e.key]=0,$e[t]?si():","==e.key&&(F.sync=!1))}})));let oi=[];function ri(e=void 0){for(let t=3;t<Mt.list.length;++t){let n=Mt.list[t].group.id,a=Mt.weapons.length+t;oi[a]?e==n&&(oi[a].innerHTML=F.itemCounts[e]||0):(oi[a]=document.createElement("div"),oi[a].id="itemCount"+a,i("actionBarItem"+a).appendChild(oi[a]),oi[a].style="\n                        display: block;\n                        position: absolute;\n                        padding-left: 5px;\n                        font-size: 2em;\n                        color: #fff;\n                        ",oi[a].innerHTML=F.itemCounts[n]||0)}}function ci(){_t=[],function(){let e=Q.filter((e=>F.canSee(e)&&e.active));for(let t=0;t<Ft.grid;t++){_t[t]=[];for(let i=0;i<Ft.grid;i++){let n={x:F.x2-Ft.scale/2+Ft.scale/Ft.grid*i,y:F.y2-Ft.scale/2+Ft.scale/Ft.grid*t};if(Dt.getDist(Ft.chaseNear?le:Ft,n,Ft.chaseNear?2:0,0)<=(Ft.chaseNear?35:60)){Ft.lastX=i,Ft.lastY=t,_t[t][i]=0;continue}let a=e.find((e=>Dt.getDist(e,n,0,0)<=li(e)));if(a){if(a.trap){_t[t][i]=0;continue}_t[t][i]=1}else _t[t][i]=0}}}()}function di(){let e=Q.filter((e=>e.trap&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,le,0,2)<=le.scale+e.getScale()+15)).sort((function(e,t){return Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2)}))[0];if(e){let t=Q.filter((t=>t.dmg&&t.active&&t.isTeamObject(F)&&Dt.getDist(t,e,0,0)<=le.scale+e.scale+t.scale+5)).sort((function(e,t){return Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2)}))[0];if(t){let e={x:t.x+250*Math.cos(Dt.getDirect(le,t,2,0)),y:t.y+250*Math.sin(Dt.getDirect(le,t,2,0)),x2:t.x+(Dt.getDist(le,t,2,0)+F.scale)*Math.cos(Dt.getDirect(le,t,2,0)),y2:t.y+(Dt.getDist(le,t,2,0)+F.scale)*Math.sin(Dt.getDirect(le,t,2,0))};Q.filter((e=>e.active)).find((t=>{let i=t.getScale();if(!t.ignoreCollision&&Dt.lineInRect(t.x-i,t.y-i,t.x+i,t.y+i,F.x2,F.y2,e.x2,e.y2))return!0}));if(le.dist2>=150)oe.autoPush=!1,Ft.active=!0,Ft.chaseNear=!0;else{Ft.active=!1,Ft.chaseNear=!1,oe.autoPush=!0,oe.pushData={x:t.x+Math.cos(30),y:t.y+Math.sin(30),x2:e.x2+Math.cos(60),y2:e.y2+Math.sin(60)};let i=Math.atan2(le.y2-t.y,le.x2-t.x),n={x:le.x2+53*Math.cos(i),y:le.y2+53*Math.sin(i)},a=(Dt.getDist(le,t,2,0).toString(10),F.scale/10);Dt.getDist(le,t,2,0)>=105?Dt.lineInRect(F.x2-a,F.y2-a,F.x2+a,F.y2+a,le.x2,le.y2,e.x,e.y)?G("a",le.aim2,1):G("a",Dt.getDirect(e,F,2,2),1):G("a",Math.atan2(n.y-F.y2,n.x-F.x2),1)}}else oe.autoPush&&(oe.autoPush=!1,G("a",B||void 0,1),Ft.active=!1,Ft.chaseNear=!1)}else oe.autoPush&&(oe.autoPush=!1,G("a",B||void 0,1),Ft.active=!1,Ft.chaseNear=!1)}function hi(e){ie.push(new nt(e.x,e.y,e.dir,e.buildIndex,e.weaponIndex,e.weaponVariant,e.skinColor,e.scale,e.name))}function pi(e){X=e.teams}Ft.active=!1,Ft.chaseNear=!1;var ui=!1;function mi(e){ze={},Ye={},N=e,Ve=0,qe=!0,ui=!0,G("d",0,ni(),1),oe.ageInsta=!0,Ue&&(Ue=!1,Q.length=0)}function fi(e,t){let i=(n=e[0],re(Y,n));var n;i||(i=new at(e[0],e[1],o,Dt,Ot,Pt,Y,q,Mt,Bt,Ct),Y.push(i)),e[1]!=N&&v(null,`Found ${e[2]} {${e[1]}}`,"lime"),i.spawn(!!t||null),i.visible=!1,i.oldPos={x2:void 0,y2:void 0},i.x2=void 0,i.y2=void 0,i.x3=void 0,i.y3=void 0,i.setData(e),t&&(F||window.prepareUI(i),F=i,Me=F.x,Pe=F.y,oe.lastDir=0,Ni(),ki(),ri(),F.skins[7]&&(oe.reSync=!0))}function gi(e){for(let t=0;t<Y.length;t++)if(Y[t].id==e){v("Game",Y[t].name+"["+Y[t].sid+"] left the game","red"),Y.splice(t,1);break}}function wi(e,t){if(U=de(e),U&&(U.oldHealth=U.health,U.health=t,U.judgeShame(),U.oldHealth>U.health)){U.timeDamaged=Date.now(),U.damaged=U.oldHealth-U.health;let t=U.damaged;U=de(e);let i=!1;if(U.health<=0&&(U.death||(U.death=!0,U!=F&&(45==U.skinIndex?v("Game",`${U.name}[${U.sid}] has died due to clown`,"red"):U.shameCount>=5?v("Game",`${U.name}[${U.sid}] has died due to high shame`,"red"):v("Game",`${U.name}[${U.sid}] has died`,"red")),hi(U),hi(U),hi(U),hi(U),hi(U),hi(U),hi(U),hi(U))),U==F){if(7==U.skinIndex&&(5==t||13==U.latestTail&&2==t)&&(oe.reSync&&(oe.reSync=!1,U.setBullTick=!0),i=!0),qe){ft(t);let e=[.25,.45].map((e=>e*Mt.weapons[F.weapons[0]].dmg*ut())),n=(!i&&e.includes(t),78),a=function(e){setTimeout((()=>{gt()}),e)};if(t>=25&&F.damageThreat>=100){F.canEmpAnti=!0,F.antiTimer=W.tick;let e=5;F.shameCount<e?gt():a(n)}else a(n)}}else U.setPoisonTick||5!=U.damaged&&(13!=U.latestTail||2!=U.damaged)||(U.setPoisonTick=!0)}U.health}function yi(){qe=!1,vt={x:F.x,y:F.y}}function xi(e,t){F&&(F.itemCounts[e]=t,ri(e))}function ki(e,t,i){null!=e&&(F.XP=e),null!=t&&(F.maxXP=t),null!=i&&(F.age=i)}function bi(e,t){if(F.upgradePoints=e,F.upgrAge=t,e>0){St.length=0,Dt.removeAllChildren(ye);for(let e=0;e<Mt.weapons.length;++e)if(Mt.weapons[e].age==t&&(null==Mt.weapons[e].pre||F.weapons.indexOf(Mt.weapons[e].pre)>=0)){Dt.generateElement({id:"upgradeItem"+e,class:"actionBarItem",onmouseout:function(){Kt()},parent:ye}).style.backgroundImage=i("actionBarItem"+e).style.backgroundImage,St.push(e)}for(let e=0;e<Mt.list.length;++e)if(Mt.list[e].age==t&&(null==Mt.list[e].pre||F.items.indexOf(Mt.list[e].pre)>=0)){let t=Mt.weapons.length+e;Dt.generateElement({id:"upgradeItem"+t,class:"actionBarItem",onmouseout:function(){Kt()},parent:ye}).style.backgroundImage=i("actionBarItem"+t).style.backgroundImage,St.push(t)}for(let e=0;e<St.length;e++)!function(e){let t=i("upgradeItem"+e);t.onmouseover=function(){Mt.weapons[e]?Kt(Mt.weapons[e],!0):Kt(Mt.list[e-Mt.weapons.length])},t.onclick=Dt.checkTrusted((function(){G("H",e)})),Dt.hookTouchEvents(t)}(St[e]);St.length?(ye.style.display="block",xe.style.display="block",xe.innerHTML="SELECT ITEMS ("+e+")"):(ye.style.display="none",xe.style.display="none",Kt())}else ye.style.display="none",xe.style.display="none",Kt()}function vi(e){if(!this?.player||!e.length)return;let t=this.gameObjects?.filter((e=>e.active&&e.preplaceable)).sort(((e,t)=>tt.getDist(e,this.player,0,2)-tt.getDist(t,this.player,0,2))),i=[];for(let n=e.length;n--;){let a=e[n];for(let e=t.length;e--;){let n=t[e];a.dirPlus&&i.push([n,a,tt.getDist(n,a,0,2)])}}if(i.length){Array.from(i,(([e,t,i])=>{}))}}function Ti(){let e=le.dist2;setTimeout((()=>{Ie=e<=500?1:1.3,Ce==o.maxScreenWidth*Ie&&Oe==o.maxScreenHeight*Ie||(Ce=o.maxScreenWidth*Ie,Oe=o.maxScreenHeight*Ie,Qt()),Ti()}),225)}let Ii=!1;function Si(e){let t=pe(e);if(Pt.disableBySid(e),t&&Kn(F,t)<200&&se.length>0){0==Ii&&le.dist<=250&&(Ii=!0);let e=le,i=F,n=(Kn(i,e),Mi(i,e)),a=(Mi(F,n+180),Math.atan2(t.y-F.y2,t.x-F.x2)),s=Math.hypot(t.y-F.y2,t.x-F.x2),l=Q.filter((e=>e.trap&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,le,0,2)<=le.scale+e.getScale()+5)),o=Q.find((e=>e.dmg&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,le,0,2)<87&&!l))?4:2;if(s<=200&&le.dist2<=168&&U!=F&&4!=o&&(Rt.canSpikeTick=!0,Rt.syncHit=!0),F.alive){if(u.autoReplace&&s<=400)if(le.dist2<=300&&!Wt.inTrap){let e=-1;for(let t=0;t<8*Math.PI;t+=Math.PI/1)e++,1==e&&s<=200?(dt(2,a),dt(2,a+Math.PI),Ii=!1):(pt(2,a+t),Ii=!1)}else{let e=-1;for(let t=0;t<5.5*Math.PI;t+=Math.PI/2.2)15==F.items[4]&&(e++,0==e&&s<=200?(dt(2,a),dt(2,a+Math.PI),Ii=!1):(pt(2,a+t+2),Ii=!1))}Wt.replacer(t)}}}function Di(e){F&&Pt.removeAllItems(e)}function Mi(e,t){try{return Math.atan2((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 0}}let Pi=!1,Ai=!1,Bi={insta:{todo:!1,wait:!1,count:4,shame:5},bull:!1,antibull:0,reloaded:!1,stopspin:!0},Ci=[];function Oi(e){F.x2,F.oldPos.x2,F.x2,F.y2,F.oldPos.y2,F.y2;W.tick++,ae=[],se=[],le=[],W.tickSpeed=performance.now()-W.lastTick,W.lastTick=performance.now(),Y.forEach((e=>{e.forcePos=!e.visible,e.visible=!1,e.timeHealed-e.timeDamaged>0&&e.lastshamecount<e.shameCount&&(e.pinge=e.timeHealed-e.timeDamaged)}));for(let a=0;a<e.length;){if(U=de(e[a]),U){U.t1=void 0===U.t2?W.lastTick:U.t2,U.t2=W.lastTick,U.oldPos.x2=U.x2,U.oldPos.y2=U.y2,U.x1=U.x,U.y1=U.y,U.x2=e[a+1],U.y2=e[a+2],U.x3=U.x2+(U.x2-U.oldPos.x2),U.y3=U.y2+(U.y2-U.oldPos.y2),U.d1=void 0===U.d2?e[a+3]:U.d2,U.d2=e[a+3],U.dt=0,U.buildIndex=e[a+4],U.weaponIndex=e[a+5],U.weaponVariant=e[a+6],U.team=e[a+7],U.isLeader=e[a+8],U.oldSkinIndex=U.skinIndex,U.oldTailIndex=U.tailIndex,U.skinIndex=e[a+9],U.tailIndex=e[a+10],U.iconIndex=e[a+11],U.zIndex=e[a+12],U.visible=!0,U.update(W.tickSpeed),U.dist2=Dt.getDist(U,F,2,2),U.aim2=Dt.getDirect(U,F,2,2),U.dist3=Dt.getDist(U,F,3,3),U.aim3=Dt.getDirect(U,F,3,3),U.damageThreat=0,45==U.skinIndex&&U.shameTimer<=0&&U.addShameTimer(),45==U.oldSkinIndex&&45!=U.skinIndex&&(U.shameTimer=0,U.shameCount=0,U==F&&gt()),d.forEach((e=>{e.showName="YEAHHH"}));for(let s=0;s<Y.length;s++)for(let l=0;l<d.length;l++)F.id===l.id&&(l.showName="YEAHHHHHH");if(F.shameCount<4&&le.dist3<=300&&le.reloads[le.primaryIndex]<=W.tickRate*(window.pingTime>=200?2:1)?(Ai=!0,gt()):(Ai&&gt(),Ai=!1),U==F)if(Z.length){Z.forEach((e=>{e.onNear=!1,e.active&&(!e.onNear&&Dt.getDist(e,U,0,2)<=e.scale+Mt.weapons[U.weapons[0]].range&&(e.onNear=!0),e.isItem&&e.owner&&!e.pps&&U.sid==e.owner.sid&&Dt.getDist(e,U,0,2)>(parseInt(i("breakRange").value)||0)&&!e.breakObj&&![13,14,20].includes(e.id)&&(e.breakObj=!0,ne.push({x:e.x,y:e.y,sid:e.sid})))}));let r=Z.filter((e=>e.trap&&e.active&&Dt.getDist(e,U,0,2)<=U.scale+e.getScale()+25&&!e.isTeamObject(U))).sort((function(e,t){return Dt.getDist(e,U,0,2)-Dt.getDist(t,U,0,2)}))[0],c=Q.filter((e=>{return("spikes"==e.name||"greater spikes"==e.name||"spinning spikes"==e.name||"poison spikes"==e.name)&&(t=F,i=e,Math.sqrt(Math.pow(i.y-t.y,2)+Math.pow(i.x-t.x,2))<F.scale+e.scale+22)&&!e.isTeamObject(U)&&e.active;var t,i}))[0];r?(oe.autobreaking=!0,0==F.reloads[10==F.weapons[1]?F.weapons[1]:F.weapons[0]]&&(rt(10==F.weapons[1]?F.weapons[1]:F.weapons[0]),lt(40,0)),Wt.dist=Dt.getDist(r,U,0,2),Wt.aim=Dt.getDirect(c||r,U,0,2),Wt.inTrap||Wt.protect(Wt.aim,r),Wt.inTrap=!0,Wt.info=r):(oe.autobreaking&&le.dist2>=400&&(oe.autobreaking=!1),Wt.inTrap=!1,Wt.info={})}else Wt.inTrap=!1;U.weaponIndex<9?(U.primaryIndex=U.weaponIndex,U.primaryVariant=U.weaponVariant):U.weaponIndex>8&&(U.secondaryIndex=U.weaponIndex,U.secondaryVariant=U.weaponVariant)}a+=13}if(Lt.stack.length){let h=0,p=0,m={x:null,y:null},f={x:null,y:null};Lt.stack.forEach((e=>{e.value>=0?(0==h&&(m={x:e.x,y:e.y}),h+=Math.abs(e.value)):(0==p&&(f={x:e.x,y:e.y}),p+=Math.abs(e.value))})),p>0&&Lt.showText(f.x,f.y,Math.max(45,Math.min(50,p)),.18,500,p,"#8ecc51"),h>0&&Lt.showText(m.x,m.y,Math.max(45,Math.min(50,h)),.18,500,h,"#fff"),Lt.stack=[]}zt.length&&(zt.forEach((e=>{$t(...e)})),zt=[]);for(let g=0;g<e.length;)U=de(e[g]),U&&(U.isTeam(F)||(ae.push(U),U.dist2<=Mt.weapons[null==U.primaryIndex?5:U.primaryIndex].range+2*F.scale&&se.push(U)),U.manageReload(),U!=F&&U.addDamageThreat(F)),g+=13;if(F&&F.alive&&(ae.length&&(le=ae.sort((function(e,t){return e.dist2-t.dist2}))[0]),W.tickQueue[W.tick]&&(W.tickQueue[W.tick].forEach((e=>{e()})),W.tickQueue[W.tick]=null),kt.length&&(kt.forEach((e=>{let t=e[0],n=(e[1],e[2]);U=de(t);let a=!1;if(U.health<=0&&(U.death||(U.death=!0,U!=F&&(45==U.skinIndex?v("Game",`${U.name}[${U.sid}] has died due to clown`,"red"):U.shameCount>=5?v("Game",`${U.name}[${U.sid}] has died due to high shame`,"red"):v("Game",`${U.name}[${U.sid}] has died`,"red"),Lt.showText(U.x,U.y,20,.15,1850,"",2)),hi(U))),U==F){if(7==U.skinIndex&&(5==n||13==U.latestTail&&2==n)&&(oe.reSync&&(oe.reSync=!1,U.setBullTick=!0),a=!0),qe){let e=ft(n),t=[.25,.45].map((e=>e*Mt.weapons[F.weapons[0]].dmg*ut())),s=!a&&t.includes(n),l=140-window.ping,o=function(e){setTimeout((()=>{gt()}),e)};if(i("healingBeta").checked)if(e.length){if(e.filter((e=>{if(e.dist2<=(e.weaponIndex<9?300:700)&&(Ae=Dt.getDirect(F,e,2,2),Dt.getAngleDist(Ae,e.d2)<=Math.PI))return e})).length){if(n>10&&W.tick-U.antiTimer>1){U.canEmpAnti=!0,U.antiTimer=W.tick;let e=4;U.shameCount<e?gt():o(l)}else o(l)}else o(l)}else o(l);else if(n>=(s?8:20)&&U.damageThreat>=25&&W.tick-U.antiTimer>1){U.canEmpAnti=!0,U.antiTimer=W.tick;let e=5;U.shameCount<e?gt():o(l)}else o(l);n>=20&&11==F.skinIndex&&(Rt.canCounter=!0)}}else U.setPoisonTick||5!=U.damaged&&(13!=U.latestTail||2!=U.damaged)||(U.setPoisonTick=!0)})),kt=[]),Y.forEach((e=>{e.visible||F==e||(e.reloads={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,53:0}),e.setBullTick&&(e.bullTimer=0),e.setPoisonTick&&(e.poisonTimer=0),e.updateTimer()})),qe)){if(ae.length){F.canEmpAnti&&(F.canEmpAnti=!1,le.dist2<=300&&!oe.safePrimary(le)&&!oe.safeSecondary(le)&&(0==le.reloads[53]?(F.empAnti=!0,F.soldierAnti=!1):(F.empAnti=!1,F.soldierAnti=!0))),Z.filter((e=>e.dmg&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,le,0,3)<=e.scale+le.scale)).sort((function(e,t){return Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2)}))[0]&&le.dist3<=Mt.weapons[F.weapons[0]].range+1.8*F.scale&&u.predictTick&&(Rt.canSpikeTick=!0,Rt.syncHit=!0,u.revTick&&15==F.weapons[1]&&0==F.reloads[53]&&Rt.perfCheck(F,le)&&(Rt.revTick=!0)),Z.filter((e=>e.dmg&&e.active&&!e.isTeamObject(F)&&Dt.getDist(e,F,0,3)<e.scale+F.scale)).sort((function(e,t){return Dt.getDist(e,F,0,2)-Dt.getDist(t,F,0,2)}))[0]&&!Wt.inTrap&&le.dist3<=Mt.weapons[5].range+1.8*le.scale&&(oe.anti0Tick=1)}if((O||(F.checkCanInsta(!0)>=100?F.checkCanInsta(!0):F.checkCanInsta(!1))>=(10==F.weapons[1]?95:100))&&le.dist2<=Mt.weapons[10==F.weapons[1]?F.weapons[1]:F.weapons[0]].range+1.8*le.scale&&(Rt.wait||O&&0==Math.floor(5*Math.random()))&&!Rt.isTrue&&!oe.waitHit&&0==F.reloads[F.weapons[0]]&&0==F.reloads[F.weapons[1]]&&(O||("oneShot"!=i("instaType").value||F.reloads[53]<=(10==F.weapons[1]?0:W.tickRate)))&&Rt.perfCheck(F,le)?(F.checkCanInsta(!0)>=100?Rt.nobull=!O&&!Rt.canSpikeTick:Rt.nobull=!1,Rt.can=!0):Rt.can=!1,Ye.q&&dt(0,ni()),Ye.f&&dt(4,ei()),Ye.v&&dt(2,ei()),Ye.y&&dt(5,ei()),Ye.h&&dt(F.getItemType(22),ei()),Ye.n&&dt(3,ei()),W.tick%3==0)if(Xe.place){let k=5;for(let b=-k;b<=k;b+=k)pt(3,Dt.getDirect(F.oldPos,F,2,2)+b)}else if(Xe.placeSpawnPads)for(let T=0;T<2*Math.PI;T+=Math.PI/2)pt(F.getItemType(20),Dt.getDirect(F.oldPos,F,2,2)+T);if(Rt.can&&(i("Rinsta").checked?Rt.changeType("rev"):Rt.changeType("normal")),Rt.canCounter&&(Rt.canCounter=!1,0!=F.reloads[F.weapons[0]]||Rt.isTrue||Rt.counterType()),Rt.canSpikeTick&&(Rt.canSpikeTick=!1,Rt.revTick?(Rt.revTick=!1,[1,2,3,4,5,6].includes(F.weapons[0])&&0==F.reloads[F.weapons[1]]&&!Rt.isTrue&&(Rt.changeType("rev"),D(null,"[RevSyncHit]","yellow"))):[1,2,3,4,5,6].includes(F.weapons[0])&&0==F.reloads[F.weapons[0]]&&!Rt.isTrue&&(Rt.spikeTickType(),Rt.syncHit&&D(null,"[SyncHit]","yellow"))),Zt.middle||!Zt.left&&!Zt.right||Rt.isTrue||((F.weaponIndex!=(Zt.right&&10==F.weapons[1]?F.weapons[1]:F.weapons[0])||F.buildIndex>-1)&&rt(Zt.right&&10==F.weapons[1]?F.weapons[1]:F.weapons[0]),0!=F.reloads[Zt.right&&10==F.weapons[1]?F.weapons[1]:F.weapons[0]]||oe.waitHit||(ct(),oe.waitHit=1,W.tickBase((()=>{ct(),oe.waitHit=0}),1))),O&&!Zt.left&&!Zt.right&&!Rt.isTrue&&le.dist2<=Mt.weapons[F.weapons[0]].range+1.8*le.scale&&!Wt.inTrap&&((F.weaponIndex!=F.weapons[0]||F.buildIndex>-1)&&rt(F.weapons[0]),0!=F.reloads[F.weapons[0]]||oe.waitHit||(ct(),oe.waitHit=1,W.tickBase((()=>{ct(),oe.waitHit=0}),1))),le.dist2<=300&&i("antiSpike").checked){if(Q.filter((e=>e.dmg&&e.active&&!e.isTeamObject(F)&&Dt.getDist(e,F,0,3)<e.scale+40+F.scale)).sort((function(e,t){return Dt.getDist(e,F,0,5)-Dt.getDist(t,F,0,5)}))[0]){let I=Q.filter((e=>e.dmg&&e.active&&!e.isTeamObject(F)&&Dt.getDist(e,F,0,3)<e.scale+40+F.scale)).sort((function(e,t){return Dt.getDist(e,F,0,5)-Dt.getDist(t,F,0,5)}))[0];if(I){let S={x:I.x+250*Math.cos(Dt.getDirect(le,I,2,0)),y:I.y+250*Math.sin(Dt.getDirect(le,I,2,0)),x2:I.x+(Dt.getDist(le,I,2,0)+F.scale)*Math.cos(Dt.getDirect(le,I,2,0)),y2:I.y+(Dt.getDist(le,I,2,0)+F.scale)*Math.sin(Dt.getDirect(le,I,2,0))};if(I){Dt.getDist(I,F,0,2);let M=F.scale/10;Dt.lineInRect(F.x2-M,F.y2-M,F.x2+M,F.y2+M,le.x2,le.y2,S.x,S.y)?(G("a",void 0,1),G("a",void 0,1)):G("a",void 0,1);let P=Dt.getDirect(I,F,0,2);console.log(P),I&&_.send("6","Spike detect")}}}}if(Wt.inTrap&&(Zt.left||Zt.right||Rt.isTrue||((F.weaponIndex!=(Wt.notFast()?F.weapons[1]:F.weapons[0])||F.buildIndex>-1)&&rt(Wt.notFast()?F.weapons[1]:F.weapons[0]),0!=F.reloads[Wt.notFast()?F.weapons[1]:F.weapons[0]]||oe.waitHit||(ct(),oe.waitHit=1,W.tickBase((()=>{ct(),oe.waitHit=0}),1)))),Zt.middle&&!Wt.inTrap&&(Rt.isTrue||0!=F.reloads[F.weapons[1]]||(oe.ageInsta&&4!=F.weapons[0]&&9==F.weapons[1]&&F.age>=9&&ae.length?Rt.bowMovement():Rt.rangeType())),Ye.t&&!Wt.inTrap&&(Rt.isTrue||0!=F.reloads[F.weapons[0]]||15==F.weapons[1]&&0!=F.reloads[F.weapons[1]]||5!=F.weapons[0]&&(4!=F.weapons[0]||15!=F.weapons[1])||Rt[4==F.weapons[0]&&15==F.weapons[1]?"kmTickMovement":"tickMovement"]()),Ye["."]&&!Wt.inTrap&&(Rt.isTrue||0!=F.reloads[F.weapons[0]]||[9,12,13,15].includes(F.weapons[1])&&0!=F.reloads[F.weapons[1]]||Rt.boostTickMovement()),F.weapons[1]&&!Zt.left&&!Zt.right&&!Wt.inTrap&&!Rt.isTrue&&!(O&&le.dist2<=Mt.weapons[F.weapons[0]].range+1.8*le.scale))if(0==F.reloads[F.weapons[0]]&&0==F.reloads[F.weapons[1]]){if(!oe.reloaded){oe.reloaded=!0;let A=Mt.weapons[F.weapons[0]].spdMult<Mt.weapons[F.weapons[1]].spdMult?1:0;(F.weaponIndex!=F.weapons[A]||F.buildIndex>-1)&&rt(F.weapons[A])}O||Bi.stopspin||setTimeout((()=>{Bi.stopspin=!0}),375)}else oe.reloaded=!1,O&&(Bi.stopspin=!1),F.reloads[F.weapons[0]]>0?(F.weaponIndex!=F.weapons[0]||F.buildIndex>-1)&&rt(F.weapons[0]):0==F.reloads[F.weapons[0]]&&F.reloads[F.weapons[1]]>0&&((F.weaponIndex!=F.weapons[1]||F.buildIndex>-1)&&rt(F.weapons[1]),O||Bi.stopspin||setTimeout((()=>{Bi.stopspin=!0}),750));Rt.isTrue||Wt.inTrap||Wt.replaced||Wt.autoPlace(),Ye.q||Ye.f||Ye.v||Ye.h||Ye.n||G("D",ni());var t=!1;let w=function(){le.dist2<=300?t=!0:SoldierTime=!1,Zt.left||Zt.right?Zt.left?lt(0==F.reloads[F.weapons[0]]?i("weaponGrind").checked?40:7:F.empAnti||F.soldierAnti?6:"abreload"==i("antiBullType").value&&le.antiBull>0?11:le.dist2<=300?"abalway"==i("antiBullType").value&&0==le.reloads[le.primaryIndex]?11:6:xt(1,1),0):Zt.right&&lt(0==F.reloads[Zt.right&&10==F.weapons[1]?F.weapons[1]:F.weapons[0]]?40:"abreload"==i("antiBullType").value&&le.antiBull>0?11:le.dist2<=300?"abalway"==i("antiBullType").value&&0==le.reloads[le.primaryIndex]?11:6:xt(1,1),0):Wt.inTrap?Wt.info.health<=Mt.weapons[F.weaponIndex].dmg||0!=F.reloads[10==F.weapons[1]?F.weapons[1]:F.weapons[0]]?(!ae.length||le.dist2>=200)&&F.shameCount>0&&45!=F.skinIndex?lt(7,0):lt((F.empAnti||le.dist2>300||ae.length,6),0):lt(40,0):(F.empAnti||F.soldierAnti?lt((F.empAnti,6),0):(!ae.length||le.dist2>=200)&&F.shameCount>0&&45!=F.skinIndex?lt(7,0):le.dist2<=300&&lt("abreload"==i("antiBullType").value&&le.antiBull>0||"abalway"==i("antiBullType").value&&0==le.reloads[le.primaryIndex]?11:6,0),t||xt(1))},y=function(){le.dist2<=400||Zt.left?lt(21,1):Wt.inTrap?lt(19,1):lt(11,1)};function x(){let e=U.damageThreat;le.dist2<230&&(Ei&&(lt(26,0),_.send("6","Sync = bad")),e>=95&&(gt(),gt()))}if("block"==we.style.display||Rt.ticking||(w(),y(),x(),Ti()),u.autoPush&&ae.length&&!Wt.inTrap&&!Rt.ticking?di():oe.autoPush&&(oe.autoPush=!1,G("a",B||void 0,1)),le.dist2<=500){let C=U.damageThreat;i("SPot").checked&&Ut("Current POT: "+C)}!oe.autoPush&&Ft.active&&(H.count>=80||(Ft.scale=o.maxScreenWidth/2*1.3,Wt.inTrap||Ft.chaseNear&&!ae.length||(le.dist2<=Mt.weapons[F.weapons[0]].range?G("a",void 0,1):(ci(),n.setGrid(_t),n.setAcceptableTiles([0]),n.enableDiagonals(),n.findPath(_t[0].length/2,_t.length/2,Ft.lastX,Ft.lastY,(function(e){if(null===e)Ft.array=[],le.dist2<=Mt.weapons[F.weapons[0]].range?G("a",void 0,1):G("a",le.aim2,1);else if(Ft.array=e,Ft.array.length>1){let t={x:F.x2-Ft.scale/2+Ft.scale/Ft.grid*e[1].x,y:F.y2-Ft.scale/2+Ft.scale/Ft.grid*e[1].y};G("a",Dt.getDirect(t,F,0,2),1)}})),n.calculate())))),Rt.ticking&&(Rt.ticking=!1),Rt.syncHit&&(Rt.syncHit=!1),F.empAnti&&(F.empAnti=!1),F.soldierAnti&&(F.soldierAnti=!1),oe.anti0Tick>0&&oe.anti0Tick--,Wt.replaced&&(Wt.replaced=!1),Wt.antiTrapped&&(Wt.antiTrapped=!1)}d.length&&d.forEach((e=>{e[0].showName="YEAHHH"}))}function Hi(e){Ke=e}function Li(e){for(let t=0;t<e.length;)Pt.add(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],Mt.list[e[t+6]],!0,e[t+7]>=0?{sid:e[t+7]}:null),t+=8}function Wi(e){for(let e=0;e<q.length;++e)q[e].forcePos=!q[e].visible,q[e].visible=!1;if(e){let t=performance.now();for(let i=0;i<e.length;)U=he(e[i]),U?(U.index=e[i+1],U.t1=void 0===U.t2?t:U.t2,U.t2=t,U.x1=U.x,U.y1=U.y,U.x2=e[i+2],U.y2=e[i+3],U.d1=void 0===U.d2?e[i+4]:U.d2,U.d2=e[i+4],U.health=e[i+5],U.dt=0,U.visible=!0):(U=Ht.spawn(e[i+2],e[i+3],e[i+4],e[i+1]),U.x2=U.x,U.y2=U.y,U.d2=U.dir,U.health=e[i+5],Ht.aiTypes[e[i+1]].name||(U.name=o.cowNames[e[i+6]]),U.forcePos=!0,U.sid=e[i],U.visible=!0),i+=7}}function Ri(e){U=he(e),U&&U.startAnim()}var Ei=!1;function ji(e,t,i){if(U=de(e),U){if(U.startAnim(t,i),U.gatherIndex=i,U.gathering=1,F.shameCount<5&&oe.anti0Tick>0&&dt(0,ni()),se.filter((e=>e.gathering)).length>1&&(Lt.showText(F.x2,F.y2+500,30,.15,1850,"Sync detect test","#ff1b14",2),Ei=!0,W.tickBase((()=>{Ei=!1}),2)),le.dist2<300){if(H.count>=80)return;let e="spammer",t=Q.filter((e=>(e.active||e.alive)&&e.health<e.maxHealth&&void 0!==e.group&&Dt.getDist(e,U,0,2)<=Mt.weapons[U.weaponIndex].range+e.scale));for(let n=0;n<t.length;n++){let a=t[n];console.log(a);let s=Mt.weapons[i].dmg*o.weaponVariants[U[(i<9?"prima":"seconda")+"ryVariant"]].val*(Mt.weapons[i].sDmg||1),l=3.3*s;a.health-3.3*s<=0&&"spammer"==e?dt(2,Mi(a,F)+Math.PI):W.tickBase((()=>{let t=l*(40===U.skinIndex?3.3:1);if(a.health-t<=0&&"smart"===e)for(let e=-30;e<30;e+=30)dt(le.dist2<1.8*le.scale+50?4:2,Mi(a,F)+Math.PI+e)}),1)}}if(t){let t=Pt.hitObj;Pt.hitObj=[],t.health<=2*Mt.weapons[U.weaponIndex].dmg&&W.tickBase((()=>{setTimeout((()=>{dt(2,Number.MAX_VALUE)}),Mt.weapons[U.weaponIndex].speed-1e3/9)}),2),W.tickBase((()=>{U=de(e);let n=Mt.weapons[i].dmg*o.weaponVariants[U[(i<9?"prima":"seconda")+"ryVariant"]].val*(Mt.weapons[i].sDmg||1)*(40==U.skinIndex?3.3:1);t.forEach((e=>{e.health-=n}))}),1)}}}function Gi(e,t){U=pe(t),U&&(U.xWiggle+=o.gatherWiggle*Math.cos(e),U.yWiggle+=o.gatherWiggle*Math.sin(e),U.health&&Pt.hitObj.push(U))}function _i(e,t){U=pe(e),U&&(o.anotherVisual?U.lastDir=t:U.dir=t,U.xWiggle+=o.gatherWiggle*Math.cos(t+Math.PI),U.yWiggle+=o.gatherWiggle*Math.sin(t+Math.PI))}function Fi(e,t,i){F&&(F[e]=t,"points"==e?u.autoBuy&&(Et.hat(),Et.acc()):"kills"==e&&u.killChat&&(Ut("people ezzed "+t),setTimeout((()=>{Ut("ez")}),600)))}function Ni(e,t){e&&(t?(F.weapons=e,F.primaryIndex=F.weapons[0],F.secondaryIndex=F.weapons[1],Rt.isTrue||rt(F.weapons[0])):F.items=e);for(let e=0;e<Mt.list.length;e++){i("actionBarItem"+(Mt.weapons.length+e)).style.display=F.items.indexOf(Mt.list[e].id)>=0?"inline-block":"none"}for(let e=0;e<Mt.weapons.length;e++){i("actionBarItem"+e).style.display=F.weapons[Mt.weapons[e].type]==Mt.weapons[e].id?"inline-block":"none"}3==F.weapons[0]&&15==F.weapons[1]&&(i("actionBarItem3").style.display="none",i("actionBarItem4").style.display="inline-block")}function Ui(e,t,i,n,a,s,l,o){Ot.addProjectile(e,t,i,n,a,s,null,null,l,Qe).sid=o,zt.push(Array.prototype.slice.call(arguments))}function zi(e,t){ce(Qi,e)}function $i(e,t){F&&(F.team=e,F.isOwner=t,null==e&&(K=[]))}function Vi(e){K=e}function qi(e,t,i){i?e?F.latestTail=t:F.tails[t]=1:e?F.latestSkin=t:(F.skins[t]=1,7==t&&(oe.reSync=!0))}function Yi(e,t){t=t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");let i=de(e);v(`${i.name}[${i.sid}]`,t,"white"),i.chatMessage=t,i.chatCountdown=o.chatCountdown}function Xi(e){Tt=e}function Ki(e,t,i,n){Lt.stack.push({x:e,y:t,value:i}),Lt.showText(e,t,50,.18,O?500:1500,Math.abs(i),i>=0?"#fff":"#8ecc51")}let Qi=[],Ji={x:Dt.randInt(35,14365),y:Dt.randInt(35,14365)};setInterval((()=>{Ji={x:Dt.randInt(35,14365),y:Dt.randInt(35,14365)}}),6e4);class Zi{constructor(e,t,i,n){this.millPlace=!0,this.id=e,this.sid=t,this.team=null,this.skinIndex=0,this.tailIndex=0,this.hitTime=0,this.iconIndex=0,this.enemy=[],this.near=[],this.dist2=0,this.aim2=0,this.tick=0,this.itemCounts={},this.latestSkin=0,this.latestTail=0,this.points=0,this.tails={};for(let e=0;e<n.length;++e)n[e].price<=0&&(this.tails[n[e].id]=1);this.skins={};for(let e=0;e<i.length;++e)i[e].price<=0&&(this.skins[i[e].id]=1);this.spawn=function(e){this.upgraded=0,this.enemy=[],this.near=[],this.active=!0,this.alive=!0,this.lockMove=!1,this.lockDir=!1,this.minimapCounter=0,this.chatCountdown=0,this.shameCount=0,this.shameTimer=0,this.sentTo={},this.gathering=0,this.autoGather=0,this.animTime=0,this.animSpeed=0,this.mouseState=0,this.buildIndex=-1,this.weaponIndex=0,this.dmgOverTime={},this.noMovTimer=0,this.maxXP=300,this.XP=0,this.age=1,this.kills=0,this.upgrAge=2,this.upgradePoints=0,this.x=0,this.y=0,this.zIndex=0,this.xVel=0,this.yVel=0,this.slowMult=1,this.dir=0,this.nDir=0,this.dirPlus=0,this.targetDir=0,this.targetAngle=0,this.maxHealth=100,this.health=this.maxHealth,this.oldHealth=this.maxHealth,this.scale=o.playerScale,this.speed=o.playerSpeed,this.resetMoveDir(),this.resetResources(e),this.items=[0,3,6,10],this.weapons=[0],this.shootCount=0,this.weaponXP=[],this.isBot=!1,this.reloads={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,53:0},this.timeZinceZpawn=0,this.whyDie="",this.clearRadius=!1,this.circlee=0},this.resetMoveDir=function(){this.moveDir=void 0},this.resetResources=function(e){for(let t=0;t<o.resourceTypes.length;++t)this[o.resourceTypes[t]]=e?100:0},this.setData=function(e){this.id=e[0],this.sid=e[1],this.name=e[2],this.x=e[3],this.y=e[4],this.dir=e[5],this.health=e[6],this.maxHealth=e[7],this.scale=e[8],this.skinColor=e[9]},this.judgeShame=function(){if(this.oldHealth<this.health){if(this.hitTime){let e=this.tick-this.hitTime;this.hitTime=0,e<2?(this.lastshamecount=this.shameCount,this.shameCount++):(this.lastshamecount=this.shameCount,this.shameCount=Math.max(0,this.shameCount-2))}}else this.oldHealth>this.health&&(this.hitTime=this.tick)},this.manageReloadaa=function(){this.shooting[53]?(this.shooting[53]=0,this.reloads[53]=2500-1e3/9):this.reloads[53]>0&&(this.reloads[53]=Math.max(0,this.reloads[53]-1e3/9)),this.gathering||this.shooting[1]?(this.gathering&&(this.gathering=0,this.reloads[this.gatherIndex]=Mt.weapons[this.gatherIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0),this.shooting[1]&&(this.shooting[1]=0,this.reloads[this.shootIndex]=Mt.weapons[this.shootIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0)):(this.attacked=!1,this.buildIndex<0&&this.reloads[this.weaponIndex]>0&&(this.reloads[this.weaponIndex]=Math.max(0,this.reloads[this.weaponIndex]-W.tickRate)))},this.closeSockets=function(e){e.close()},this.whyDieChat=function(e,t){e.sendWS("6","sad "+t)}}}class en{constructor(e){this.sid=e,this.init=function(e,t,i,n,a,s,l){s=s||{},this.active=!0,this.x=e,this.y=t,this.scale=n,this.owner=l,this.id=s.id,this.dmg=s.dmg,this.trap=s.trap,this.teleport=s.teleport,this.isItem=null!=this.id}}}class tn{constructor(e,t){let i;this.disableObj=function(e){e.active=!1,o.anotherVisual||(e.alive=!1)},this.add=function(n,a,s,l,o,r,c,d,h){i=t(n),i||(i=e.find((e=>!e.active)),i||(i=new en(n),e.push(i))),d&&(i.sid=n),i.init(a,s,l,o,r,c,h)},this.disableBySid=function(e){let i=t(e);i&&this.disableObj(i)},this.removeAllItems=function(t,i){e.filter((e=>e.active&&e.owner&&e.owner.sid==t)).forEach((e=>this.disableObj(e)))}}}function nn(e){let t;console.log(P);let n=P.url.split("wss://")[1].split("?")[0];t=e&&new WebSocket("wss://"+n+"?token=re:"+encodeURIComponent(e));let a,s=new Map;d.push([s]);let l=[],r=[],c={x:0,y:0,inGame:!1,closeSocket:!1,whyDie:""},h={x:0,y:0},p=0,u=new tn(l,(function(e){return ce(l,e)}));function m(e,t){try{return Math.atan2((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 0}}t.binaryType="arraybuffer",t.first=!0,t.sendWS=function(e){let i=Array.prototype.slice.call(arguments,1),n=window.msgpack.encode([e,i]);t.send(n)},t.spawn=function(){t.sendWS("M",{name:"TT",moofoll:1,skin:"__proto__"})},t.sendUpgrade=function(e){t.sendWS("H",e)},t.place=function(e,i){try{let n=Mt.list[s.items[e]];(null==s.itemCounts[n.group.id]||s.itemCounts[n.group.id]<(o.isSandbox?296:n.group.limit?n.group.limit:296))&&(t.sendWS("G",s.items[e]),t.sendWS("d",1,i),t.sendWS("G",s.weaponIndex,!0))}catch(e){}},t.buye=function(e,i){if(s.alive&&s.inGame)if(0==i)if(s.skins[e])s.latestSkin!=e&&t.sendWS("c",0,e,0);else{let i=re(Bt,e);i&&s.points>=i.price?(t.sendWS("c",1,e,0),t.sendWS("c",0,e,0)):0!=s.latestSkin&&t.sendWS("c",0,0,0)}else if(1==i)if(s.tails[e])s.latestTail!=e&&t.sendWS("c",0,e,1);else{let i=re(Ct,e);i&&s.points>=i.price?(t.sendWS("c",1,e,1),t.sendWS("c",0,e,1)):0!=s.latestTail&&t.sendWS("c",0,0,1)}},t.fastGear=function(){s.y2>=o.mapScale/2-o.riverWidth/2&&s.y2<=o.mapScale/2+o.riverWidth/2?t.buye(31,0):s.y2<=o.snowBiomeTop?t.buye(15,0):t.buye(12,0)},t.selectWeapon=function(e){G("G",e,1)},t.heal=function(){s.health<100&&t.place(0,0)};let f="no";t.zync=function(e){if(!s.millPlace){f="yeah",t.place(5,m(s,e));let i={x:s.x+80*Math.cos(m(e,s)-Math.PI),y:s.y+80*Math.sin(m(e,s)-Math.PI),x2:s.x+80*Math.cos(m(e,s)-Math.PI),y2:s.y+80*Math.sin(m(e,s)-Math.PI)};function n(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}let a=setInterval((()=>{t.sendWS("G",s.weapons[1],!0),0==p&&(t.sendWS("K",1),p=1),setTimeout((()=>{t.sendWS("G",s.weapons[0],!0)}),2e3),t.buye(53,0),n(i.x,i.y,s.x,s.y)>5?t.sendWS("a",m(s,i)):(t.sendWS("6",n(i.x,i.y,s.x,s.y)+""),f="no",t.sendWS("a",void 0),t.sendWS("6",n(i.x,i.y,s.x,s.y)+""),t.sendWS("D",m(e,s)-Math.PI),clearInterval(a))}),150);setTimeout((()=>{f="no",clearInterval(a)}),500)}},t.onmessage=function(e){let n=new Uint8Array(e.data),o=window.msgpack.decode(n),d=o[0];if(n=o[1],"io-init"==d&&t.spawn(),"1"==d&&(a=n[0],console.log(a)),"D"==d&&n[1]&&(s=new Zi(n[0][0],n[0][1],Bt,Ct),s.setData(n[0]),s.inGame=!0,s.alive=!0,s.x2=void 0,s.y2=void 0,s.spawn(1),s.oldHealth=100,s.health=100,s.showName="YEAHHH",h={x:n[0][3],y:n[0][4]},c.inGame=!0,t.first&&(t.first=!1,Qi.push(c))),"P"==d&&(t.spawn(),s.inGame=!1,c.inGame=!1),"a"==d){let e=n[0];s.tick++,s.enemy=[],s.near=[],t.showName="YEAHHH",r=[];for(let t=0;t<e.length;)e[t]==s.sid&&(s.x2=e[t+1],s.y2=e[t+2],s.d2=e[t+3],s.buildIndex=e[t+4],s.weaponIndex=e[t+5],s.weaponVariant=e[t+6],s.team=e[t+7],s.isLeader=e[t+8],s.skinIndex=e[t+9],s.tailIndex=e[t+10],s.iconIndex=e[t+11],s.zIndex=e[t+12],s.visible=!0,c.x2=s.x2,c.y2=s.y2),t+=13;for(let t=0;t<e.length;)U=de(e[t]),U&&(U.isTeam(s)||(ae.push(U),U.dist2<=Mt.weapons[null==U.primaryIndex?5:U.primaryIndex].range+2*s.scale&&se.push(U))),t+=13;if(ae.length&&(s.near=ae.sort((function(e,t){return e.dist2-t.dist2}))[0]),1==p&&(t.sendWS("K",1),p=0),c.closeSocket&&s.closeSockets(t),""!=c.whyDie&&(s.whyDieChat(t,c.whyDie),c.whyDie=""),s.alive){F.team&&s.team!=F.team&&s.tick%9==0&&(s.team&&t.sendWS("N"),t.sendWS("b",F.team));let e=Mt.list[s.items[3]],n=s.itemCounts[e.group.id];if((null!=n?n:0)<296&&s.millPlace){if(s.inGame){if(t.sendWS("D",s.moveDir),0==p&&(t.sendWS("K",1),p=1),Dt.getDist(h,s,0,2)>90){let e=Dt.getDirect(h,s,0,2);t.place(3,e+7.7),t.place(3,e-7.7),t.place(3,e),h={x:s.x2,y:s.y2}}if(s.tick%90==0){let e=Math.random()*Math.PI*2;s.moveDir=e,t.sendWS("a",s.moveDir)}}t.fastGear()}else if((null!=n?n:0)>296&&s.millPlace)s.millPlace=!1,t.fastGear();else if(s.inGame){if(l.length>0){let e=l.filter((e=>e.active&&e.isItem&&Dt.getDist(e,F,0,2)<=600));if("fuckemup"==i("mode").value){t.selectWeapon(s.weapons[1]);let i=Dt.getDist(e[0],s,0,2),n=Dt.getDirect(e[0],s,0,2);if(r=l.filter((t=>t.active&&(!!ce(e,t.sid)||!(t.trap&&(F.sid==t.owner.sid||F.findAllianceBySid(t.owner.sid))))&&t.isItem&&Dt.getDist(t,s,0,2)<=Mt.weapons[s.weaponIndex].range+t.scale+10)).sort((function(e,t){return Dt.getDist(e,s,0,2)-Dt.getDist(t,s,0,2)}))[0],r){i-Dt.getDist(e[0],r,0,0)>0?(ce(e,r.sid)||(r.dmg||r.trap)?null!=s.moveDir&&(s.moveDir=void 0,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir)):(s.moveDir=n,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir)),s.nDir!=Dt.getDirect(r,s,0,2)&&(s.nDir=Dt.getDirect(r,s,0,2),t.sendWS("D",s.nDir)),0==p&&(t.sendWS("K",1),p=1),t.buye(40,0)):(s.moveDir=n,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir),t.fastGear())}else s.moveDir=n,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir),t.fastGear()}}if(l.length>0&&"flex"==i("mode").value){s.sid,Math.PI,s.sid;const e=300*Math.cos(.01*Date.now())+F.x,i=300*Math.sin(.01*Date.now())+F.x;t.sendWS("a",Math.atan2(i-s.y,e-s.x));if(Math.hypot(e-s.x,i-s.y)>22)return}if(l.length>0&&(r=l.filter((e=>e.active&&e.isItem&&Dt.getDist(e,s,0,2)<=Mt.weapons[s.weaponIndex].range)).sort((function(e,t){return Dt.getDist(e,s,0,2)-Dt.getDist(t,s,0,2)}))[0],r?(0==p&&(t.sendWS("K",1),p=1),s.nDir!=Dt.getDirect(r,s,0,2)&&(s.nDir=Dt.getDirect(r,s,0,2),t.sendWS("D",s.nDir)),t.buye(40,0),t.buye(11,1)):(t.fastGear(),t.buye(11,1)),t.buye(11,1),ne.length>0&&"clear"==i("mode").value)){t.selectWeapon(s.weapons[1]);let e=Dt.getDist(ne[0],s,0,2),i=Dt.getDirect(ne[0],s,0,2);if(r=l.filter((e=>e.active&&(!!ce(ne,e.sid)||!(e.trap&&(F.sid==e.owner.sid||F.findAllianceBySid(e.owner.sid))))&&e.isItem&&Dt.getDist(e,s,0,2)<=Mt.weapons[s.weaponIndex].range+e.scale)).sort((function(e,t){return Dt.getDist(e,s,0,2)-Dt.getDist(t,s,0,2)}))[0],r){e-Dt.getDist(ne[0],r,0,0)>0?(ce(ne,r.sid)||(r.dmg||r.trap)?null!=s.moveDir&&(s.moveDir=void 0,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir)):(s.moveDir=i,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir)),s.nDir!=Dt.getDirect(r,s,0,2)&&(s.nDir=Dt.getDirect(r,s,0,2),t.sendWS("D",s.nDir)),0==p&&(t.sendWS("K",1),p=1),t.buye(40,0),t.fastGear()):(s.moveDir=i,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir),t.fastGear())}else s.moveDir=i,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir),t.fastGear();if(e>300&&Dt.getDist(h,s,0,2)>90){let e=Dt.getDirect(h,s,0,2);t.place(3,e+7.7),t.place(3,e-7.7),t.place(3,e),h={x:s.x2,y:s.y2}}}if(l.length>0&&"zync"==i("mode").value){let e=l.filter((e=>e.active&&e.isItem&&Dt.getDist(e,F,0,2)<=Mt.weapons[s.weaponIndex].range+e.scale));e.length||"no"==f&&(t.sendWS("D",Dt.getDirect(F,s,0,2)),t.sendWS("a",m(F,s)+Math.PI));let i=Dt.getDist(e[0],s,0,2);Dt.getDirect(e[0],s,0,2);if(r=l.filter((t=>t.active&&(!!ce(e,t.sid)||!(t.trap&&(F.sid==t.owner.sid||F.findAllianceBySid(t.owner.sid))))&&t.isItem&&Dt.getDist(t,s,0,2)<=Mt.weapons[s.weaponIndex].range+t.scale)).sort((function(e,t){return Dt.getDist(e,s,0,2)-Dt.getDist(t,s,0,2)}))[0],r){i-Dt.getDist(e[0],r,0,0)>0?(ce(e,r.sid)||(r.dmg||r.trap)?null!=s.moveDir&&(s.moveDir=void 0,t.sendWS("a",s.moveDir),t.sendWS("D",s.nDir)):t.sendWS("D",s.nDir),s.nDir!=Dt.getDirect(r,s,0,2)&&(s.nDir=Dt.getDirect(r,s,0,2),t.sendWS("D",s.nDir)),0==p&&(t.sendWS("K",1),p=1),t.buye(40,0),t.fastGear()):"no"==f&&(t.sendWS("D",Dt.getDirect(r,s,0,2)),t.sendWS("a",m(F,s)+Math.PI))}else e.length?"no"==f&&(t.sendWS("D",Dt.getDirect(e[0],s,0,2)),t.sendWS("a",m(F,s)+Math.PI)):"no"==f&&(t.sendWS("D",Dt.getDirect(F,s,0,2)),t.sendWS("a",m(F,s)+Math.PI))}}}}if("H"==d){let e=n[0];for(let t=0;t<e.length;)u.add(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],Mt.list[e[t+6]],!0,e[t+7]>=0?{sid:e[t+7]}:null),t+=8}if("N"==d){let e=n[0],t=n[1];s&&(s[e]=t)}if("O"==d&&n[0]==s.sid&&(s.oldHealth=s.health,s.health=n[1],s.judgeShame(),s.oldHealth>s.health))if(s.shameCount<5)for(let e=0;e<2;e++)t.place(0,s.nDir);else setTimeout((()=>{for(let e=0;e<2;e++)t.place(0,s.nDir)}),95);if("Q"==d){let e=n[0];u.disableBySid(e)}if("R"==d){let e=n[0];s.alive&&u.removeAllItems(e)}if("S"==d){let e=n[0],t=n[1];s&&(s.itemCounts[e]=t)}if("U"==d&&n[0]>0&&("dm"==i("setup").value?0==s.upgraded?t.sendUpgrade(7):1==s.upgraded?t.sendUpgrade(17):2==s.upgraded?t.sendUpgrade(31):3==s.upgraded?t.sendUpgrade(23):4==s.upgraded?t.sendUpgrade(9):5==s.upgraded?t.sendUpgrade(34):6==s.upgraded?t.sendUpgrade(12):7==s.upgraded&&t.sendUpgrade(15):"dr"==i("setup").value?0==s.upgraded?t.sendUpgrade(7):1==s.upgraded?t.sendUpgrade(17):2==s.upgraded?t.sendUpgrade(31):3==s.upgraded?t.sendUpgrade(23):4==s.upgraded?t.sendUpgrade(9):5==s.upgraded?t.sendUpgrade(34):6==s.upgraded?t.sendUpgrade(12):7==s.upgraded&&t.sendUpgrade(13):"kh"==i("setup").value?0==s.upgraded?t.sendUpgrade(3):1==s.upgraded?t.sendUpgrade(17):2==s.upgraded?t.sendUpgrade(31):3==s.upgraded?t.sendUpgrade(27):4==s.upgraded?t.sendUpgrade(10):5==s.upgraded?t.sendUpgrade(34):6==s.upgraded?t.sendUpgrade(4):7==s.upgraded&&t.sendUpgrade(25):"zd"==i("setup").value&&(0==s.upgraded?t.sendUpgrade(3):1==s.upgraded?t.sendUpgrade(17):2==s.upgraded?t.sendUpgrade(31):3==s.upgraded?t.sendUpgrade(27):4==s.upgraded?t.sendUpgrade(9):5==s.upgraded?t.sendUpgrade(34):6==s.upgraded?t.sendUpgrade(12):7==s.upgraded&&t.sendUpgrade(15)),s.upgraded++),"V"==d){let e=n[0],t=n[1];e&&(t?s.weapons=e:s.items=e)}if("5"==d){let e=n[0],t=n[1];n[2]?e?s.latestTail=t:s.tails[t]=1:e?s.latestSkin=t:s.skins[t]=1}if("6"==d){let e=n[0],i=n[1]+"";e==F.sid&&i.includes("Dead")&&t.zync(s.near)}},t.onclose=function(){s.inGame=!1,c.inGame=!1}}function an(e,t,i,n,a){let s=e+i*Math.cos(n),l=t+i*Math.sin(n),o=.4*i;a.moveTo(e,t),a.beginPath(),a.quadraticCurveTo((e+s)/2+o*Math.cos(n+Math.PI/2),(t+l)/2+o*Math.sin(n+Math.PI/2),s,l),a.quadraticCurveTo((e+s)/2-o*Math.cos(n+Math.PI/2),(t+l)/2-o*Math.sin(n+Math.PI/2),e,t),a.closePath(),a.fill(),a.stroke()}function sn(e,t,i,n,a,s){(n=n||me).beginPath(),n.arc(e,t,i,0,2*Math.PI),s||n.fill(),a||n.stroke()}function ln(e,t,i,n){let a,s,l=Math.PI/2*3,o=Math.PI/t;e.beginPath(),e.moveTo(0,-i);for(let r=0;r<t;r++)a=Math.cos(l)*i,s=Math.sin(l)*i,e.lineTo(a,s),l+=o,a=Math.cos(l)*n,s=Math.sin(l)*n,e.lineTo(a,s),l+=o;e.lineTo(0,-i),e.closePath()}function on(e,t,i,n,a,s,l){l||a.fillRect(e-i/2,t-n/2,i,n),s||a.strokeRect(e-i/2,t-n/2,i,n)}function rn(e,t,i,n,a,s,l,o){s.save(),s.translate(e,t),a=Math.ceil(a/2);for(let e=0;e<a;e++)on(0,0,2*i,n,s,l,o),s.rotate(Math.PI/a);s.restore()}function cn(e,t){t=t||me;let i=e*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(0,-i/2),t.lineTo(-e/2,i/2),t.lineTo(e/2,i/2),t.lineTo(0,-i/2),t.fill(),t.closePath()}function dn(e,t){me.fillStyle="#91b2db",ie.filter((e=>e.active)).forEach((i=>{i.animate(Se),me.globalAlpha=i.alpha,me.strokeStyle=_e,me.save(),me.translate(i.x-e,i.y-t),i.dir+=function(e){let t=e%360*(Math.PI/180);return t<0?2*Math.PI+t:t}(1),i.dir>=2*Math.PI&&(i.dir-=2*Math.PI),me.rotate(i.dir),function(e,t){(t=t||me).lineWidth=Ne,t.lineJoin="miter";let i=Math.PI/4*(Mt.weapons[e.weaponIndex].armS||1),n=e.buildIndex<0&&Mt.weapons[e.weaponIndex].hndS||1,a=e.buildIndex<0&&Mt.weapons[e.weaponIndex].hndD||1;(function(e,t,i){if(wn=Sn[e],!wn){var n=new Image;n.onload=function(){this.isLoaded=!0,this.onload=null},n.src="https://moomoo.io/img/accessories/access_"+e+".png",Sn[e]=n,wn=n}var a=Dn[e];if(!a){for(var s=0;s<Ct.length;++s)if(Ct[s].id==e){a=Ct[s];break}Dn[e]=a}wn.isLoaded&&(t.save(),t.translate(-20-(a.xOff||0),0),a.spin&&t.rotate(i.skinRot),t.drawImage(wn,-a.scale/2,-a.scale/2,a.scale,a.scale),t.restore())})(13,t,e),e.buildIndex<0&&!Mt.weapons[e.weaponIndex].aboveHand&&(Pn(Mt.weapons[e.weaponIndex],o.weaponVariants[e.weaponVariant||0].src||"",e.scale,0,t),null==Mt.weapons[e.weaponIndex].projectile||Mt.weapons[e.weaponIndex].hideProjectile||Cn(e.scale,0,Mt.projectiles[Mt.weapons[e.weaponIndex].projectile],me));t.fillStyle="#ececec",sn(e.scale*Math.cos(i),e.scale*Math.sin(i),14),sn(e.scale*a*Math.cos(-i*n),e.scale*a*Math.sin(-i*n),14),e.buildIndex<0&&Mt.weapons[e.weaponIndex].aboveHand&&(Pn(Mt.weapons[e.weaponIndex],o.weaponVariants[e.weaponVariant||0].src||"",e.scale,0,t),null==Mt.weapons[e.weaponIndex].projectile||Mt.weapons[e.weaponIndex].hideProjectile||Cn(e.scale,0,Mt.projectiles[Mt.weapons[e.weaponIndex].projectile],me));if(e.buildIndex>=0){var s=Gn(Mt.list[e.buildIndex]);t.drawImage(s,e.scale-Mt.list[e.buildIndex].holdOffset,-s.width/2)}sn(0,0,e.scale,t),fn(48,t,null,e)}(i,me),me.restore(),me.fillStyle="#91b2db"}))}function hn(e,t,i){me.globalAlpha=1,me.fillStyle="#91b2db";for(var n=0;n<Y.length;++n)U=Y[n],U.zIndex==i&&(U.animate(Se),U.visible&&(U.skinRot+=.002*Se,Ae=U==F?F?(Be=ei(),Be||0):0:U.dir||0,me.save(),me.translate(U.x-e,U.y-t),me.rotate(Ae+U.dirPlus),pn(U,me),me.restore()))}function pn(e,t){(t=t||me).lineWidth=Ne,t.lineJoin="miter";let i=Math.PI/4*(Mt.weapons[e.weaponIndex].armS||1),n=e.buildIndex<0&&Mt.weapons[e.weaponIndex].hndS||1,a=e.buildIndex<0&&Mt.weapons[e.weaponIndex].hndD||1,s=e==F&&3==e.weapons[0]&&15==e.weapons[1];if(e.tailIndex>0&&function(e,t,i){if(!(wn=vn[e+(In?"lol":0)])){var n=new Image;n.onload=function(){this.isLoaded=!0,this.onload=null},n.src=(s="acc",bn[a=e]&&"acc"==s?bn[a]:"acc"==s?".././img/accessories/access_"+a+".png":"hat"==s?".././img/hats/hat_"+a+".png":".././img/weapons/"+a+".png"),vn[e+(In?"lol":0)]=n,wn=n}var a,s;var l=Tn[e];if(!l){for(var o=0;o<Ct.length;++o)if(Ct[o].id==e){l=Ct[o];break}Tn[e]=l}wn.isLoaded&&(t.save(),t.translate(-20-(l.xOff||0),0),l.spin&&t.rotate(i.skinRot),t.drawImage(wn,-l.scale/2,-l.scale/2,l.scale,l.scale),t.restore())}(e.tailIndex,t,e),e.buildIndex<0&&!Mt.weapons[e.weaponIndex].aboveHand&&(Pn(Mt.weapons[s?4:e.weaponIndex],o.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==Mt.weapons[e.weaponIndex].projectile||Mt.weapons[e.weaponIndex].hideProjectile||Cn(e.scale,0,Mt.projectiles[Mt.weapons[e.weaponIndex].projectile],me)),t.fillStyle=o.skinColors[e.skinColor],sn(e.scale*Math.cos(i),e.scale*Math.sin(i),14),sn(e.scale*a*Math.cos(-i*n),e.scale*a*Math.sin(-i*n),14),e.buildIndex<0&&Mt.weapons[e.weaponIndex].aboveHand&&(Pn(Mt.weapons[e.weaponIndex],o.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==Mt.weapons[e.weaponIndex].projectile||Mt.weapons[e.weaponIndex].hideProjectile||Cn(e.scale,0,Mt.projectiles[Mt.weapons[e.weaponIndex].projectile],me)),e.buildIndex>=0){var l=Gn(Mt.list[e.buildIndex]);t.drawImage(l,e.scale-Mt.list[e.buildIndex].holdOffset,-l.width/2)}sn(0,0,e.scale,t),e.skinIndex>0&&(t.rotate(Math.PI/2),function(e,t,i,n){if(!(wn=yn[e+(In?"lol":0)])){var a=new Image;a.onload=function(){this.isLoaded=!0,this.onload=null},a.src=(l="hat",gn[s=e]&&"hat"==l?gn[s]:"acc"==l?".././img/accessories/access_"+s+".png":"hat"==l?".././img/hats/hat_"+s+".png":".././img/weapons/"+s+".png"),yn[e+(In?"lol":0)]=a,wn=a}var s,l;var o=i||xn[e];if(!o){for(var r=0;r<Bt.length;++r)if(Bt[r].id==e){o=Bt[r];break}xn[e]=o}wn.isLoaded&&t.drawImage(wn,-o.scale/2,-o.scale/2,o.scale,o.scale);!i&&o.topSprite&&(t.save(),t.rotate(n.skinRot),kn(e+"_top",t,o,n),t.restore())}(e.skinIndex,t,null,e))}var un={},mn={};function fn(e,t,i,n){if(wn=un[e],!wn){var a=new Image;a.onload=function(){this.isLoaded=!0,this.onload=null},a.src="https://moomoo.io/img/hats/hat_"+e+".png",un[e]=a,wn=a}var s=i||mn[e];if(!s){for(var l=0;l<Bt.length;++l)if(Bt[l].id==e){s=Bt[l];break}mn[e]=s}wn.isLoaded&&t.drawImage(wn,-s.scale/2,-s.scale/2,s.scale,s.scale),!i&&s.topSprite&&(t.save(),t.rotate(n.skinRot),fn(e+"_top",t,s,n),t.restore())}var gn={7:"https://i.imgur.com/vAOzlyY.png",15:"https://i.imgur.com/YRQ8Ybq.png",40:"https://i.imgur.com/Xzmg27N.png",26:"https://i.imgur.com/I0xGtyZ.png",55:"https://i.imgur.com/uYgDtcZ.png",20:"https://i.imgur.com/f5uhWCk.png"};let wn,yn={},xn={};function kn(e,t,i,n){if(wn=yn[e],!wn){let t=new Image;t.onload=function(){this.isLoaded=!0,this.onload=null},t.src="https://moomoo.io/img/hats/hat_"+e+".png",yn[e]=t,wn=t}let a=i||xn[e];if(!a){for(let t=0;t<Bt.length;++t)if(Bt[t].id==e){a=Bt[t];break}xn[e]=a}wn.isLoaded&&t.drawImage(wn,-a.scale/2,-a.scale/2,a.scale,a.scale),!i&&a.topSprite&&(t.save(),t.rotate(n.skinRot),kn(e+"_top",t,a,n),t.restore())}var bn={21:"https://i.imgur.com/4ddZert.png",19:"https://i.imgur.com/sULkUZT.png"};let vn={},Tn={};var In=!0;var Sn={},Dn={};let Mn={};function Pn(e,t,i,n,a){let s=e.src+(t||""),l=Mn[s];l||(l=new Image,l.onload=function(){this.isLoaded=!0},l.src="https://moomoo.io/img/weapons/"+s+".png",Mn[s]=l),l.isLoaded&&a.drawImage(l,i+e.xOff-e.length/2,n+e.yOff-e.width/2,e.length,e.width)}function An(e,t,i){for(let n=0;n<te.length;n++)U=te[n],U.active&&U.layer==e&&U.inWindow&&(U.update(Se),U.active&&Nn(U.x-t,U.y-i,U.scale)&&(me.save(),me.translate(U.x-t,U.y-i),me.rotate(U.dir),Cn(0,0,U,me,1),me.restore()))}let Bn={};function Cn(e,t,i,n,a){if(i.src){let a=Mt.projectiles[i.indx].src,s=Bn[a];s||(s=new Image,s.onload=function(){this.isLoaded=!0},s.src="https://moomoo.io/img/weapons/"+a+".png",Bn[a]=s),s.isLoaded&&n.drawImage(s,e-i.scale/2,t-i.scale/2,i.scale,i.scale)}else 1==i.indx&&(n.fillStyle="#939393",sn(e,t,i.scale,n))}let On={};function Hn(e,t){let i=e.index,n=On[i];if(!n){let t=new Image;t.onload=function(){this.isLoaded=!0,this.onload=null},t.src="https://moomoo.io/img/animals/"+e.src+".png",n=t,On[i]=n}if(n.isLoaded){let i=1.2*e.scale*(e.spriteMlt||1);t.drawImage(n,-i,-i,2*i,2*i)}}function Ln(e,t,i,n){let a=o.riverWidth+n,s=o.mapScale/2-t-a/2;s<Oe&&s+a>0&&i.fillRect(0,s,Ce,a)}let Wn={};function Rn(e){let t=e.y>=o.mapScale-o.snowBiomeTop?2:e.y<=o.snowBiomeTop?1:0,i=e.type+"_"+e.scale+"_"+t,n=Wn[i];if(!n){let a=document.createElement("canvas");a.width=a.height=2.1*e.scale+Ne;let s=a.getContext("2d");if(s.translate(a.width/2,a.height/2),s.rotate(Dt.randFloat(0,Math.PI)),s.strokeStyle=_e,s.lineWidth=Ne,0==e.type){let i,n=8;s.globalAlpha=Kn(e,F)<=250?.6:1;for(let e=0;e<2;++e)i=U.scale*(e?.5:1),ln(s,n,i,.7*i),s.fillStyle=t?e?"#fff":"#e3f1f4":e?"#b4db62":"#9ebf57",s.fill(),e||(s.stroke(),s.shadowBlur=null,s.shadowColor=null,s.globalAlpha=1)}else if(1==e.type)if(2==t)s.fillStyle="#606060",ln(s,6,.3*e.scale,.71*e.scale),s.fill(),s.stroke(),s.fillStyle="#89a54c",sn(0,0,.55*e.scale,s),s.fillStyle="#a5c65b",sn(0,0,.3*e.scale,s,!0);else{let e;!function(e,t,i,n){let a,s=Math.PI/2*3,l=Math.PI/t;e.beginPath(),e.moveTo(0,-n);for(let o=0;o<t;o++)a=Dt.randInt(i+.9,1.2*i),e.quadraticCurveTo(Math.cos(s+l)*a,Math.sin(s+l)*a,Math.cos(s+2*l)*n,Math.sin(s+2*l)*n),s+=2*l;e.lineTo(0,-n),e.closePath()}(s,6,U.scale,.7*U.scale),s.fillStyle=t?"#e3f1f4":"#89a54c",s.fill(),s.stroke(),s.fillStyle=t?"#6a64af":"#c15555";let i=4,n=2*Math.PI/i;for(let t=0;t<i;++t)e=Dt.randInt(U.scale/3.5,U.scale/2.3),sn(e*Math.cos(n*t),e*Math.sin(n*t),Dt.randInt(10,12),s)}else 2!=e.type&&3!=e.type||(s.fillStyle=2==e.type?2==t?"#938d77":"#939393":"#e0c655",ln(s,3,e.scale,e.scale),s.fill(),s.stroke(),s.shadowBlur=null,s.shadowColor=null,s.fillStyle=2==e.type?2==t?"#b2ab90":"#bcbcbc":"#ebdca3",ln(s,3,.55*e.scale,.65*e.scale),s.fill());n=a,Wn[i]=n}return n}let En=[],jn=!0;function Gn(e,t){let i=e,n=F,a=(n&&i.owner&&i.owner.sid.constructor==Number&&(i.owner.sid,n.sid),i.id+50),s=En[a];if(!s||t){let i=15,n=document.createElement("canvas");t||"windmill"!=e.name?e.scale:Mt.list[4].scale;n.width=n.height=2.5*e.scale+0+(Mt.list[e.id].spritePadding||0)+i;let l=n.getContext("2d");if(l.translate(n.width/2,n.height/2),l.rotate(t?0:Math.PI/2),l.strokeStyle=_e,l.lineWidth=0*(t?n.width/81:1),jn&&(l.shadowBlur=i,l.shadowColor=`rgba(0, 0, 0, ${Math.min("pit trap"==e.name?.6:.3,e.alpha)})`),"apple"==e.name){l.fillStyle="#c15555",sn(0,0,e.scale,l),l.fillStyle="#89a54c";let t=-Math.PI/2;an(e.scale*Math.cos(t),e.scale*Math.sin(t),25,t+Math.PI/2,l)}else if("cookie"==e.name){l.fillStyle="#cca861",sn(0,0,e.scale,l),l.fillStyle="#937c4b";let t,i=4,n=2*Math.PI/i;for(let a=0;a<i;++a)t=Dt.randInt(e.scale/2.5,e.scale/1.7),sn(t*Math.cos(n*a),t*Math.sin(n*a),Dt.randInt(4,5),l,!0)}else if("cheese"==e.name){l.fillStyle="#f4f3ac",sn(0,0,e.scale,l),l.fillStyle="#c3c28b";let t,i=4,n=2*Math.PI/i;for(let a=0;a<i;++a)t=Dt.randInt(e.scale/2.5,e.scale/1.7),sn(t*Math.cos(n*a),t*Math.sin(n*a),Dt.randInt(4,5),l,!0)}else if("wood wall"==e.name||"stone wall"==e.name||"castle wall"==e.name){l.fillStyle="castle wall"==e.name?"#83898e":"wood wall"==e.name?"#a5974c":"#939393";let t="castle wall"==e.name?4:3;ln(l,t,1.1*e.scale,1.1*e.scale),l.fill(),l.stroke(),l.fillStyle="castle wall"==e.name?"#9da4aa":"wood wall"==e.name?"#c9b758":"#bcbcbc",ln(l,t,.65*e.scale,.65*e.scale),l.fill()}else if("spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){l.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";let t=.6*e.scale;ln(l,"spikes"==e.name?5:6,e.scale,t),l.fill(),l.stroke(),l.fillStyle="#a5974c",sn(0,0,t,l),l.fillStyle="#c9b758",sn(0,0,t/2,l,!0)}else if("windmill"==e.name||"faster windmill"==e.name||"power mill"==e.name)l.fillStyle="#a5974c",sn(0,0,e.scale,l),l.fillStyle="#c9b758",rn(0,0,1.5*e.scale,29,4,l),l.fillStyle="#a5974c",sn(0,0,.5*e.scale,l);else if("mine"==e.name)l.fillStyle="#939393",ln(l,3,e.scale,e.scale),l.fill(),l.stroke(),l.fillStyle="#bcbcbc",ln(l,3,.55*e.scale,.65*e.scale),l.fill();else if("sapling"==e.name)for(let t=0;t<2;++t){let i=e.scale*(t?.5:1);ln(l,7,i,.7*i),l.fillStyle=t?"#b4db62":"#9ebf57",l.fill(),t||l.stroke()}else if("pit trap"==e.name)l.fillStyle="#a5974c",ln(l,3,1.1*e.scale,1.1*e.scale),l.fill(),l.stroke(),l.fillStyle=_e,ln(l,3,.65*e.scale,.65*e.scale),l.fill();else if("boost pad"==e.name)l.fillStyle="#7e7f82",on(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#dbd97d",cn(1*e.scale,l);else if("turret"==e.name){l.fillStyle="#a5974c",sn(0,0,e.scale,l),l.fill(),l.stroke(),l.fillStyle="#939393";let t=50;on(0,-t/2,.9*e.scale,t,l),sn(0,0,.6*e.scale,l),l.fill(),l.stroke()}else if("platform"==e.name){l.fillStyle="#cebd5f";let t=4,i=2*e.scale,n=i/t,a=-e.scale/2;for(let s=0;s<t;++s)on(a-n/2,0,n,2*e.scale,l),l.fill(),l.stroke(),a+=i/t}else"healing pad"==e.name?(l.fillStyle="#7e7f82",on(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#db6e6e",rn(0,0,.65*e.scale,20,4,l,!0)):"spawn pad"==e.name?(l.fillStyle="#7e7f82",on(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#71aad6",sn(0,0,.6*e.scale,l)):"blocker"==e.name?(l.fillStyle="#7e7f82",sn(0,0,e.scale,l),l.fill(),l.stroke(),l.rotate(Math.PI/4),l.fillStyle="#db6e6e",rn(0,0,.65*e.scale,20,4,l,!0)):"teleporter"==e.name&&(l.fillStyle="#7e7f82",sn(0,0,e.scale,l),l.fill(),l.stroke(),l.rotate(Math.PI/4),l.fillStyle="#d76edb",sn(0,0,.5*e.scale,l,!0));s=n,t||(En[a]=s)}return s}let _n=[];function Fn(e,t,i,n){screenWidth,screenHeight;if(t.lineWidth=Ne,me.globalAlpha=.8,t.strokeStyle=_e,t.save(),t.translate(i,n),t.rotate(e.dir||ni()),"spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){t.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";var a=.6*e.scale;ln(t,"spikes"==e.name?5:6,e.scale,a),t.fill(),t.stroke(),t.fillStyle="#a5974c",sn(0,0,a,t),F&&e.owner&&F.sid!=e.owner.sid&&!U.findAllianceBySid(e.owner.sid)?t.fillStyle="#a34040":t.fillStyle="#c9b758",sn(0,0,a/2,t,!0)}else if("turret"==e.name){sn(0,0,e.scale,t),t.fill(),t.stroke(),t.fillStyle="#939393";let i=50;on(0,-i/2,.9*e.scale,i,t),sn(0,0,.6*e.scale,t),t.fill(),t.stroke()}else if("teleporter"==e.name)t.fillStyle="#7e7f82",sn(0,0,e.scale,t),t.fill(),t.stroke(),t.rotate(Math.PI/4),t.fillStyle="#d76edb",sn(0,0,.5*e.scale,t,!0);else if("platform"==e.name){t.fillStyle="#cebd5f";let i=4,n=2*e.scale,a=n/i,s=-e.scale/2;for(let l=0;l<i;++l)on(s-a/2,0,a,2*e.scale,t),t.fill(),t.stroke(),s+=n/i}else"healing pad"==e.name?(t.fillStyle="#7e7f82",on(0,0,2*e.scale,2*e.scale,t),t.fill(),t.stroke(),t.fillStyle="#db6e6e",rn(0,0,.65*e.scale,20,4,t,!0)):"spawn pad"==e.name?(t.fillStyle="#7e7f82",on(0,0,2*e.scale,2*e.scale,t),t.fill(),t.stroke(),t.fillStyle="#71aad6",sn(0,0,.6*e.scale,t)):"blocker"==e.name?(t.fillStyle="#7e7f82",sn(0,0,e.scale,t),t.fill(),t.stroke(),t.rotate(Math.PI/4),t.fillStyle="#db6e6e",rn(0,0,.65*e.scale,20,4,t,!0)):"windmill"==e.name||"faster windmill"==e.name||"power mill"==e.name?(t.fillStyle="#a5974c",sn(0,0,e.scale,t),t.fillStyle="#c9b758",rn(0,0,1.5*e.scale,29,4,t),t.fillStyle="#a5974c",sn(0,0,.5*e.scale,t)):"pit trap"==e.name&&(t.fillStyle="#a5974c",ln(t,3,1.1*e.scale,1.1*e.scale),t.fill(),t.stroke(),F&&e.owner&&F.sid!=e.owner.sid&&!U.findAllianceBySid(e.owner.sid)?t.fillStyle="#a34040":t.fillStyle=_e,ln(t,3,.65*e.scale,.65*e.scale),t.fill());t.restore()}function Nn(e,t,i){return e+i>=0&&e-i<=Ce&&t+i>=0&&Oe}function Un(e,t,i){let n,a,s;Z.forEach((l=>{U=l,U.active&&Z.includes(l)&&U.render&&(a=U.x+U.xWiggle-t,s=U.y+U.yWiggle-i,0==e&&U.update(Se),me.globalAlpha=U.alpha,U.layer==e&&Nn(a,s,U.scale+(U.blocker||0))&&(U.isItem?(n=!U.dmg&&!U.trap||U.isTeamObject(F)?Gn(U):function(e){let t=_n[e.id];if(!t){let i=document.createElement("canvas");i.width=i.height=2.5*e.scale+Ne+(Mt.list[e.id].spritePadding||0)+0;let n=i.getContext("2d");if(n.translate(i.width/2,i.height/2),n.rotate(Math.PI/2),n.strokeStyle=_e,n.lineWidth=Ne,"spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){n.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";let t=.6*e.scale;ln(n,"spikes"==e.name?5:6,e.scale,t),n.fill(),n.stroke(),n.fillStyle="#a5974c",sn(0,0,t,n),n.fillStyle="#cc5151",sn(0,0,t/2,n,!0)}else"pit trap"==e.name&&(n.fillStyle="#a5974c",ln(n,3,1.1*e.scale,1.1*e.scale),n.fill(),n.stroke(),n.fillStyle="#cc5151",ln(n,3,.65*e.scale,.65*e.scale),n.fill());t=i,_n[e.id]=t}return t}(U),me.save(),me.translate(a,s),me.rotate(U.dir),U.active||me.scale(U.visScale/U.scale,U.visScale/U.scale),me.drawImage(n,-n.width/2,-n.height/2),U.blocker&&(me.strokeStyle="#db6e6e",me.globalAlpha=.3,me.lineWidth=6,sn(0,0,U.blocker,me,!1,!0)),me.restore()):(n=Rn(U),me.drawImage(n,a-n.width/2,s-n.height/2))),0==e&&U.health<U.maxHealth&&(me.fillStyle=Fe,me.roundRect(a-o.healthBarWidth/2-o.healthBarPad,s-o.healthBarPad,o.healthBarWidth+2*o.healthBarPad,17,8),me.fill(),me.fillStyle=U.isTeamObject(F)?"#8ecc51":"#cc5151",me.roundRect(a-o.healthBarWidth/2,s,o.healthBarWidth*(U.health/U.maxHealth),17-2*o.healthBarPad,7),me.fill()))})),0==e&&et.length&&et.forEach((e=>{a=e.x-t,s=e.y-i,function(e,t,i){Fn(e,me,t,i)}(e,a,s)}))}class zn{constructor(e,t){this.init=function(e,t){this.scale=0,this.x=e,this.y=t,this.active=!0},this.update=function(e,i){this.active&&(this.scale+=.05*i,this.scale>=t?this.active=!1:(e.globalAlpha=1-Math.max(0,this.scale/t),e.beginPath(),e.arc(this.x/o.mapScale*fe.width,this.y/o.mapScale*fe.width,this.scale,0,2*Math.PI),e.stroke()))},this.color=e}}function $n(e,t){It=Gt.find((e=>!e.active)),It||(It=new zn("#fff",o.mapPingScale),Gt.push(It)),It.init(e,t)}let Vn=["https://static-00.iconduck.com/assets.00/crosshair-icon-2048x2048-5h6w9rqc.png","https://static-00.iconduck.com/assets.00/crosshair-icon-2048x2048-5h6w9rqc.png"],qn={},Yn={},Xn=["crown","skull"];function Kn(e,t){try{return Math.hypot((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 1/0}}function Qn(){let e="#fff";if(Q.length&&qe&&Q.forEach((e=>{if(Dt.getDistance(e.x,e.y,F.x,F.y)<=1200)Z.includes(e)||(Z.push(e),e.render=!0);else if(Z.includes(e)){if(Dt.getDistance(e.x,e.y,F.x,F.y)>=1200){e.render=!1;const t=Z.indexOf(e);t>-1&&Z.splice(t,1)}}else if(Dt.getDistance(e.x,e.y,F.x,F.y)>=1200){e.render=!1;const t=Z.indexOf(e);t>-1&&Z.splice(t,1)}else{e.render=!1;const t=Z.indexOf(e);t>-1&&Z.splice(t,1)}})),me.beginPath(),me.clearRect(0,0,ue.width,ue.height),me.globalAlpha=1,F){let e=Dt.getDistance(Me,Pe,F.x,F.y),t=Dt.getDirection(F.x,F.y,Me,Pe),i=Math.min(.005*e*Se,e);e>.05?(Me+=i*Math.cos(t),Pe+=i*Math.sin(t)):(Me=F.x,Pe=F.y)}else Me=o.mapScale/2+o.riverWidth,Pe=o.mapScale/2;let t,n=De-1e3/o.serverUpdateRate;for(let e=0;e<Y.length+q.length;++e)if(U=Y[e]||q[e-Y.length],U&&U.visible)if(U.forcePos)U.x=U.x2,U.y=U.y2,U.dir=U.d2;else{let e=U.t2-U.t1,i=(n-U.t1)/e,a=170;U.dt+=Se;let s=Math.min(1.7,U.dt/a);t=U.x2-U.x1,U.x=U.x1+t*s,t=U.y2-U.y1,U.y=U.y1+t*s,o.anotherVisual,U.dir=Math.lerpAngle(U.d2,U.d1,Math.min(1.2,i))}let a=Me-Ce/2,s=Pe-Oe/2;o.snowBiomeTop-s<=0&&o.mapScale-o.snowBiomeTop-s>=Oe?(me.fillStyle="#b6db66",me.fillRect(0,0,Ce,Oe)):o.mapScale-o.snowBiomeTop-s<=0?(me.fillStyle="#dbc666",me.fillRect(0,0,Ce,Oe)):o.snowBiomeTop-s>=Oe?(me.fillStyle="#fff",me.fillRect(0,0,Ce,Oe)):o.snowBiomeTop-s>=0?(me.fillStyle="#fff",me.fillRect(0,0,Ce,o.snowBiomeTop-s),me.fillStyle="#b6db66",me.fillRect(0,o.snowBiomeTop-s,Ce,Oe-(o.snowBiomeTop-s))):(me.fillStyle="#b6db66",me.fillRect(0,0,Ce,o.mapScale-o.snowBiomeTop-s),me.fillStyle="#dbc666",me.fillRect(0,o.mapScale-o.snowBiomeTop-s,Ce,Oe-(o.mapScale-o.snowBiomeTop-s))),F&&(vt&&(me.globalAlpha=1,me.fillStyle="#fc5553",me.font="100px Hammersmith One",me.textBaseline="middle",me.textAlign="center",me.fillText("",vt.x-a,vt.y-s)),Ft.active&&(!Ft.array||Ft.chaseNear&&!ae.length||(me.lineWidth=F.scale/5,me.globalAlpha=1,me.strokeStyle="white",me.beginPath(),Ft.array.forEach(((e,t)=>{let i=Ft.scale/Ft.grid*e.x,n=Ft.scale/Ft.grid*e.y,l={x:F.x2-Ft.scale/2+i-a,y:F.y2-Ft.scale/2+n-s};0==t?me.moveTo(l.x,l.y):me.lineTo(l.x,l.y)})),me.stroke()))),Ue||(je+=Ge*o.waveSpeed*Se,je>=o.waveMax?(je=o.waveMax,Ge=-1):je<=1&&(je=Ge=1),me.globalAlpha=1,me.fillStyle="#dbc666",Ln(0,s,me,o.riverPadding),me.fillStyle="#91b2db",Ln(0,s,me,250*(je-1))),Qe&&ui&&(me.globalAlpha=1,me.strokeStyle=_e,dn(a,s,(Math.random(),Math.PI))),me.globalAlpha=1,me.strokeStyle=_e,Un(-1,a,s),me.globalAlpha=1,me.lineWidth=Ne,An(0,a,s),hn(a,s,0),me.globalAlpha=1;for(let e=0;e<q.length;++e)U=q[e],U.active&&U.visible&&(U.animate(Se),me.save(),me.translate(U.x-a,U.y-s),me.rotate(U.dir+U.dirPlus-Math.PI/2),Hn(U,me),me.restore());if(Un(0,a,s),An(1,a,s),Un(1,a,s),hn(a,s,1),Un(2,a,s),Un(3,a,s),me.fillStyle="#000",me.globalAlpha=.3,a<=0&&me.fillRect(0,0,-a,Oe),o.mapScale-a<=Ce){let e=Math.max(0,-s);me.fillRect(o.mapScale-a,e,Ce-(o.mapScale-a),Oe-e)}if(s<=0&&me.fillRect(-a,0,Ce+a,-s),o.mapScale-s<=Oe){let e=Math.max(0,-a),t=0;o.mapScale-a<=Ce&&(t=Ce-(o.mapScale-a),me.fillRect(e,o.mapScale-s,Ce-e-t,Oe-(o.mapScale-s)))}me.globalAlpha=1,me.fillStyle="rgba(5, 0, 70, 0.55)",me.fillRect(0,0,Ce,Oe),me.strokeStyle=Fe,me.globalAlpha=1,"fuckemup"==i("mode").value&&(me.beginPath(),me.strokeStyle="#000",me.fillStyle="#000",me.globalAlpha=.3,me.lineWidth=6,me.arc(F.x-a,F.y-s,600,0,2*Math.PI),me.stroke(),me.globalAlpha=.05,me.fill(),me.closePath()),me.beginPath();for(let t=0;t<Y.length+q.length;++t)if(U=Y[t]||q[t-Y.length],U.visible&&"NOOO"===U.showName){me.strokeStyle=Fe;let t=(U.team?"["+U.team+"] ":"")+(U.name||"");if(""!=t&&"unknown1l"!=U.name){if(me.globalAlpha=1,me.font=(U.nameScale||30)+"px Hammersmith One",me.fillStyle="#fff",me.textBaseline="middle",me.textAlign="center",me.lineWidth=U.nameScale?11:8,me.lineJoin="round",me.strokeText(t,U.x-a,U.y-s-U.scale-o.nameY),me.fillText(t,U.x-a,U.y-s-U.scale-o.nameY),U.isLeader&&Yn.crown.isLoaded){let e=o.crownIconScale,i=U.x-a-e/2-me.measureText(t).width/2-o.crownPad;me.drawImage(Yn.crown,i,U.y-s-U.scale-o.nameY-e/2-5,e,e)}if(1==U.iconIndex&&Yn.skull.isLoaded){let e=o.crownIconScale,i=U.x-a-e/2+me.measureText(t).width/2+o.crownPad;me.drawImage(Yn.skull,i,U.y-s-U.scale-o.nameY-e/2-5,e,e)}if(U.isPlayer&&Rt.wait&&le==U&&(U.backupNobull?qn[1].isLoaded:qn[0].isLoaded)&&ae.length&&!O){let e=2.2*U.scale;me.drawImage(U.backupNobull?qn[1]:qn[0],U.x-a-e/2,U.y-s-e/2,e,e)}}if(U.health>0&&U.isPlayer){me.globalAlpha=1;if((U.isPlayer||U.isAI)&&U.sid!==F.sid){let e;U.isPlayer?e=U==F||U.team&&U.team===F.team?"#8ecc51":"#cc5151":U.isAI&&(e="#001eff")}const n=U.x-a,r=U.y-s+U.scale+o.nameY-65,c=`HP: ${U.health}/${U.maxHealth}`;var l=me;if(l.save(),l.shadowColor="rgba(0, 0, 0, 0.5)",l.shadowBlur=10,l.shadowOffsetY=5,l.font=(U.nameScale||16)+"px Hammersmith One",l.fillStyle="#fff",l.textBaseline="middle",l.textAlign="center",l.lineWidth=8,l.lineJoin="round",l.strokeText(c,n,r),l.fillText(c,n,r),l.restore(),!U.isPlayer){const e=U.x-a,t=U.y-s+U.scale+o.nameY,i=`HP: ${U.health}/${U.maxHealth}`;me.save(),me.shadowColor="rgba(0, 0, 0, 0.5)",me.shadowBlur=10,me.shadowOffsetY=5,me.font=(U.nameScale||16)+"px Hammersmith One",me.fillStyle="#fff",me.textBaseline="middle",me.textAlign="center",me.lineWidth=8,me.lineJoin="round",me.strokeText(i,e,t),me.fillText(i,e,t),me.restore()}if(U.isPlayer){me.globalAlpha=1;let t={primary:null==U.primaryIndex?1:(Mt.weapons[U.primaryIndex].speed-U.reloads[U.primaryIndex])/Mt.weapons[U.primaryIndex].speed,secondary:null==U.secondaryIndex?1:(Mt.weapons[U.secondaryIndex].speed-U.reloads[U.secondaryIndex])/Mt.weapons[U.secondaryIndex].speed,turret:(2500-U.reloads[53])/2500};U.currentReloads||(U.currentReloads={primary:t.primary,secondary:t.secondary,turret:t.turret});const i=.1;U.currentReloads.primary=(1-i)*U.currentReloads.primary+i*t.primary,U.currentReloads.secondary=(1-i)*U.currentReloads.secondary+i*t.secondary,U.currentReloads.turret=(1-i)*U.currentReloads.turret+i*t.turret,me.save(),me.fillStyle=Fe,me.roundRect(U.x+7-a-o.healthBarPad,U.y-s+U.scale+o.nameY,o.healthBarWidth+2*o.healthBarPad,17,8),me.fill(),me.fillStyle=e,me.roundRect(U.x+7-a,U.y-s+U.scale+o.nameY+o.healthBarPad,o.healthBarWidth*U.currentReloads.secondary,17-2*o.healthBarPad,7),me.fill(),me.restore(),me.save(),me.fillStyle=Fe,me.roundRect(U.x-6-a-o.healthBarWidth-o.healthBarPad,U.y-s+U.scale+o.nameY,o.healthBarWidth+2*o.healthBarPad,17,8),me.fill(),me.fillStyle=e,me.roundRect(U.x-6-a-o.healthBarWidth,U.y-s+U.scale+o.nameY+o.healthBarPad,o.healthBarWidth*U.currentReloads.primary,17-2*o.healthBarPad,7),me.fill(),me.restore()}if(U.isPlayer){let e=new Image;if(e.src="https://www.pngitem.com/pimgs/b/518-5184596_arrow-down-outline-flecha-hacia-abajo-png-transparent.png",!U.isTeam(F)){let t={x:screenWidth/2,y:screenHeight/2},i=Math.min(1,100*Dt.getDistance(0,0,F.x-U.x,(F.y-U.y)*(16/9))/(o.maxScreenHeight/2)/t.y),n=t.y*i,l=n*Math.cos(Dt.getDirect(U,F,0,0)),r=n*Math.sin(Dt.getDirect(U,F,0,0));me.save(),me.translate(F.x-a+l,F.y-s+r),me.rotate(U.aim2-Math.PI/2),me.scale(-1,1),me.drawImage(e,-12,-12,24,24),me.restore()}}if(U.isPlayer){if(U==F&&U.dir,me.globalAlpha=1,me.font="20px Hammersmith One",me.fillStyle="#fff",me.strokeStyle=Fe,me.textBaseline="middle",me.textAlign="center",me.lineWidth=8,me.lineJoin="round",(new Image).src="https://media.discordapp.net/attachments/1215048615974674433/1216413693605056552/arrow-left-1.png?ex=66004c88&is=65edd788&hm=748bdebcdb020080183a2b06c4499e06b0c9b6cdcfce81aac1e4199ac557361b&=&format=webp&quality=lossless&width=320&height=320",!U.isTeam(F)){const e=Math.atan2(U.y-F.y,U.x-F.x),t=Math.hypot(U.y-F.y,U.x-F.x),i=Math.min(t-F.scale,4*F.scale);F.x,Math.cos(e),F.y,Math.sin(e)}me.globalAlpha=1,me.font="20px Hammersmith One",me.fillStyle="#fff",me.strokeStyle=Fe,me.textBaseline="middle",me.textAlign="center",me.lineWidth=8,me.lineJoin="round";me.globalAlpha=1,me.font="25px Hammersmith One",me.fillStyle="#fff",me.strokeStyle=Fe,me.textBaseline="middle",me.textAlign="center",me.lineWidth=8,me.lineJoin="round";let e=o.crownIconScale;U.x,me.measureText(t).width,o.crownPad,U.iconIndex;if(me.strokeText(45==U.skinIndex&&U.shameTimer>0?U.shameTimer:U.shameCount,U.x-a,U.y-s+U.scale+o.nameY+37),me.fillText(45==U.skinIndex&&U.shameTimer>0?U.shameTimer:U.shameCount,U.x-a,U.y-s+U.scale+o.nameY+37),"pre2"==i("predictType").value){me.lineWidth=3,me.strokeStyle="#cc5151",me.globalAlpha=1,me.beginPath();let e={x:U.x2-a,y:U.y2-s};me.moveTo(U.x-a,U.y-s),me.lineTo(e.x,e.y),me.stroke()}else if("pre3"==i("predictType").value){me.lineWidth=3,me.strokeStyle="#cc5151",me.globalAlpha=1,me.beginPath();let e={x:U.x3-a,y:U.y3-s};me.moveTo(U.x-a,U.y-s),me.lineTo(e.x,e.y),me.stroke()}}if(U.isPlayer&&!U.isTeam(F)){let e={x:screenWidth/2,y:screenHeight/2},t=Math.min(1,100*Dt.getDistance(0,0,F.x-U.x,(F.y-U.y)*(16/9))/(o.maxScreenHeight/2)/e.y),i=e.y*t,n=i*Math.cos(Dt.getDirect(U,F,0,0)),a=i*Math.sin(Dt.getDirect(U,F,0,0));me.font="16px Hammersmith One",me.fillStyle="#fff",me.textAlign="center",me.lineWidth=4,me.strokeStyle=Fe,me.save(),me.shadowColor="rgba(0, 0, 0, 0.5)",me.shadowBlur=10,me.shadowOffsetY=5,me.strokeText(U.name,n,a),me.fillText(U.name,n,a),me.restore()}if("pre2"==i("predictType").value){me.lineWidth=3,me.strokeStyle="#fff",me.globalAlpha=1,me.beginPath();let e={x:U.x2-a,y:U.y2-s};me.moveTo(U.x-a,U.y-s),me.lineTo(e.x,e.y),me.stroke()}else if("pre3"==i("predictType").value){me.lineWidth=3,me.strokeStyle="#cc5151",me.globalAlpha=1,me.beginPath();let e={x:U.x3-a,y:U.y3-s};me.moveTo(U.x-a,U.y-s),me.lineTo(e.x,e.y),me.stroke()}}}if(F&&oe.autoPush&&oe.pushData){me.lineWidth=5,me.globalAlpha=1,me.beginPath(),me.strokeStyle="white";var r=F.x-a,c=F.y-s,d=oe.pushData.x2-a,h=oe.pushData.y2-s,p=oe.pushData.x-a,u=oe.pushData.y-s;me.moveTo(r,c),me.lineTo(d,h),me.lineTo(p,u),me.stroke();var m=p-r,f=u-c,g=Math.sqrt(m*m+f*f)/100*100;let e;g=Math.min(100,Math.max(0,g)),me.fillStyle="white",me.strokeStyle="black",me.lineWidth=5,me.font="30px Hammersmith One";let t=Z.filter((e=>e.trap&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,le,0,2)<=le.scale+e.getScale()+5)).sort((function(e,t){return Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2)}))[0];if(t){e=Z.filter((e=>e.dmg&&e.active&&e.isTeamObject(F)&&Dt.getDist(e,t,0,0)<=le.scale+t.scale+e.scale)).sort((function(e,t){return Dt.getDist(e,le,0,2)-Dt.getDist(t,le,0,2)}))[0];let i=(F.x-a+le.x-a)/2,n=(F.y-s+le.y-s)/2;me.moveTo(F.x-a,F.y-s),me.strokeText(le.aim2,i,n),me.fillText(le.aim2,i,n)}}me.globalAlpha=1,Lt.update(Se,me,a,s);for(var w=0;w<Y.length;++w)if(U=Y[w],U.visible){if(U.chatCountdown>0){U.chatCountdown-=Se,U.chatCountdown<=0&&(U.chatCountdown=0),me.font="32px Hammersmith One";let e=me.measureText(U.chatMessage);me.textBaseline="middle",me.textAlign="center";let t=U.x-a,i=U.y-U.scale-s-90,n=47,l=e.width+17;me.fillStyle="rgba(0,0,0,0.2)",me.roundRect(t-l/2,i-n/2,l,n,6),me.fill(),me.fillStyle="#fff",me.fillText(U.chatMessage,t,i)}if(U.chat.count>0){U.chat.count-=Se,U.chat.count<=0&&(U.chat.count=0),me.font="32px Hammersmith One";let e=me.measureText(U.chat.message);me.textBaseline="middle",me.textAlign="center";let t=U.x-a,i=U.y-U.scale-s+180,n=47,l=e.width+17;me.fillStyle="rgba(0,0,0,0.2)",me.roundRect(t-l/2,i-n/2,l,n,6),me.fill(),me.fillStyle="#ffffff99",me.fillText(U.chat.message,t,i)}else U.chat.count=0}for(let e=0;e<Y.length;++e)if(U=Y[e],U.visible){if(U.chatCountdown>0){U.chatCountdown-=Se,U.chatCountdown<=0&&(U.chatCountdown=0),me.font="32px Hammersmith One";let e=me.measureText(U.chatMessage);me.textBaseline="middle",me.textAlign="center";let t=U.x-a,i=U.y-U.scale-s-90,n=47,l=e.width+17;me.fillStyle="rgba(0,0,0,0.2)",me.roundRect(t-l/2,i-n/2,l,n,6),me.fill(),me.fillStyle="#fff",me.fillText(U.chatMessage,t,i)}if(U.chat.count>0)if(O)U.chat.count=0;else{U.chat.count-=Se,U.chat.count<=0&&(U.chat.count=0),me.font="32px Hammersmith One";let e=me.measureText(U.chat.message);me.textBaseline="middle",me.textAlign="center";let t=U.x-a,i=U.y-U.scale-s+180,n=47,l=e.width+17;me.fillStyle="rgba(0,0,0,0.2)",me.roundRect(t-l/2,i-n/2,l,n,6),me.fill(),me.fillStyle="#ffffff99",me.fillText(U.chat.message,t,i)}}z.length&&z.filter((e=>e.active)).forEach((e=>{if(e.alive?(e.alpha-=Se/5e3,e.alpha<=0&&(e.alpha=0,e.active=!1)):e.alpha<=1&&(e.alpha+=Se/250,e.alpha>=1&&(e.alpha=1,e.alive=!0)),e.active){me.font="20px Ubuntu";let t=me.measureText(e.chat);me.textBaseline="middle",me.textAlign="center";let i=e.x-a,n=e.y-s-90,l=40,o=t.width+15;me.globalAlpha=e.alpha,me.fillStyle=e.owner.isTeam(F)?"#8ecc51":"#cc5151",me.strokeStyle="rgb(25, 25, 25)",me.strokeText(e.owner.name,i,n-45),me.fillText(e.owner.name,i,n-45),me.lineWidth=5,me.fillStyle="#ccc",me.strokeStyle="rgb(25, 25, 25)",me.roundRect(i-o/2,n-l/2,o,l,6),me.stroke(),me.fill(),me.fillStyle="#fff",me.strokeStyle="#000",me.strokeText(e.chat,i,n),me.fillText(e.chat,i,n),e.y-=Se/100}})),me.globalAlpha=1,function(e){if(F&&F.alive){ge.clearRect(0,0,fe.width,fe.height),ge.lineWidth=4;for(let t=0;t<Gt.length;++t)It=Gt[t],ge.strokeStyle=It.color,It.update(ge,e);if(ge.globalAlpha=1,ge.fillStyle="#ff0000",Nt.length){ge.fillStyle="#abcdef",ge.font="34px Hammersmith One",ge.textBaseline="middle",ge.textAlign="center";for(let e=0;e<Nt.length;)ge.fillText("!",Nt[e].x/o.mapScale*fe.width,Nt[e].y/o.mapScale*fe.height),e+=2}if(ge.globalAlpha=1,ge.fillStyle="#fff",sn(F.x/o.mapScale*fe.width,F.y/o.mapScale*fe.height,7,ge,!0),ge.fillStyle="rgba(255,255,255,0.35)",F.team&&Tt)for(let e=0;e<Tt.length;)sn(Tt[e]/o.mapScale*fe.width,Tt[e+1]/o.mapScale*fe.height,7,ge,!0),e+=2;Qi.length&&Qi.forEach((e=>{e.inGame&&(ge.globalAlpha=1,ge.strokeStyle="#cc5151",sn(e.x2/o.mapScale*fe.width,e.y2/o.mapScale*fe.height,7,ge,!1,!0))})),vt&&(ge.fillStyle="#fc5553",ge.font="34px Hammersmith One",ge.textBaseline="middle",ge.textAlign="center",ge.fillText("x",vt.x/o.mapScale*fe.width,vt.y/o.mapScale*fe.height)),jt&&(ge.fillStyle="#fff",ge.font="34px Hammersmith One",ge.textBaseline="middle",ge.textAlign="center",ge.fillText("x",jt.x/o.mapScale*fe.width,jt.y/o.mapScale*fe.height))}}(Se)}function Jn(e){i("instaType").disabled=e,i("antiBullType").disabled=e,i("predictType").disabled=e}!function(){for(let e=0;e<Xn.length;++e){let t=new Image;t.onload=function(){this.isLoaded=!0},t.src="./../img/icons/"+Xn[e]+".png",Yn[Xn[e]]=t}for(let e=0;e<Vn.length;++e){let t=new Image;t.onload=function(){this.isLoaded=!0},t.src=Vn[e],qn[e]=t}}(),window.requestAnimFrame=function(){return null},window.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/9)},function e(){De=performance.now(),Se=De-Le,Le=De;let t=performance.now(),n=t-E.last;n>=1e3&&(E.ltime=E.time*(1e3/n),E.last=t,E.time=0),E.time++,i("pingFps").innerHTML=`${window.pingTime}ms | Fps: ${Math.round(E.ltime)}`,i("packetStatus").innerHTML=H,Qn(),rAF(e),Je.avg=Math.round((Je.min+Je.max)/2)}(),Jn(O),window.debug=function(){oe.waitHit=0,oe.autoAim=!1,Rt.isTrue=!1,Wt.inTrap=!1,En=[],_n=[],Wn=[]},window.wasdMode=function(){O=!O,Jn(O)},window.startGrind=function(){if(i("weaponGrind").checked)for(let e=0;e<2*Math.PI;e+=Math.PI/2)pt(F.getItemType(22),e)};let Zn=["adorable-eight-guppy","galvanized-bittersweet-windshield"],ea=0;window.connectFillBots=function(){d=[],ea=0;for(let e=0;e<Zn.length;e++){let t=new WebSocket(`wss://${Zn[e]}.glitch.me`);t.binaryType="arraybuffer",t.onopen=function(){t.ssend=function(e){let i=Array.prototype.slice.call(arguments,1),n=window.msgpack.encode([e,i]);t.send(n)};for(let e=0;e<4;e++)window.grecaptcha.execute("6LfahtgjAAAAAF8SkpjyeYMcxMdxIaQeh-VoPATP",{action:"homepage"}).then((function(e){let i=P.url.split("wss://")[1].split("?")[0];t.ssend("bots","wss://"+i+"?token=re:"+encodeURIComponent(e),ea),d.push([t]),ea++}))},t.onmessage=function(e){let t=new Uint8Array(e.data),i=window.msgpack.decode(t);i[0];t=i[1]}}},window.destroyFillBots=function(){d.forEach((e=>{e[0].close()})),d=[]},window.tryConnectBots=function(){for(let e=0;e<(Qi.length<3?3:4);e++)window.grecaptcha.execute("6LfahtgjAAAAAF8SkpjyeYMcxMdxIaQeh-VoPATP",{action:"homepage"}).then((function(e){nn(e)}))},window.destroyBots=function(){Qi.forEach((e=>{e.closeSocket=!0})),Qi=[]},window.resBuild=function(){Q.length&&(Q.forEach((e=>{e.breakObj=!1})),ne=[])},window.toggleBotsCircle=function(){F.circle=!F.circle},window.toggleVisual=function(){o.anotherVisual=!o.anotherVisual,Q.forEach((e=>{e.active&&(e.dir=e.lastDir)}))},window.prepareUI=function(e){Qt();document.getElementById("chatBox"),document.getElementById("chatHolder");document.createElement("div").id="suggestBox";Dt.removeAllChildren(ve);for(let e=0;e<Mt.weapons.length+Mt.list.length;++e)!function(e){Dt.generateElement({id:"actionBarItem"+e,class:"actionBarItem",style:"display:none; box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5)",onmouseout:function(){Kt()},parent:ve})}(e);for(let t=0;t<Mt.list.length+Mt.weapons.length;++t)!function(t){let n=document.createElement("canvas");n.width=n.height=66;let a=n.getContext("2d");if(a.translate(n.width/2,n.height/2),a.imageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,Mt.weapons[t]){a.rotate(Math.PI);let s=new Image;Mn[Mt.weapons[t].src]=s,s.onload=function(){this.isLoaded=!0;let e=1/(this.height/this.width),s=Mt.weapons[t].iPad||1;a.drawImage(this,-n.width*s*o.iconPad*e/2,-n.height*s*o.iconPad/2,n.width*s*e*o.iconPad,n.height*s*o.iconPad),a.fillStyle="rgba(0, 0, 70, 0.2)",a.globalCompositeOperation="source-atop",a.fillRect(-n.width/2,-n.height/2,n.width,n.height),i("actionBarItem"+t).style.backgroundImage="url("+n.toDataURL()+")"},s.src="./../img/weapons/"+Mt.weapons[t].src+".png";let l=i("actionBarItem"+t);l.onclick=Dt.checkTrusted((function(){rt(e.weapons[Mt.weapons[t].type])})),Dt.hookTouchEvents(l)}else{let s=Gn(Mt.list[t-Mt.weapons.length],!0),l=Math.min(n.width-o.iconPadding,s.width);a.globalAlpha=1,a.drawImage(s,-l/2,-l/2,l,l),a.fillStyle="rgba(0, 0, 70, 0.1)",a.globalCompositeOperation="source-atop",a.fillRect(-l/2,-l/2,l,l),i("actionBarItem"+t).style.backgroundImage="url("+n.toDataURL()+")";let r=i("actionBarItem"+t);r.onclick=Dt.checkTrusted((function(){ot(e.items[e.getItemType(t-Mt.weapons.length)])})),Dt.hookTouchEvents(r)}}(t)},window.profineTest=function(e){if(e){let t=e+"";return t=t.slice(0,o.maxNameLength),t}};