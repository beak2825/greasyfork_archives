// ==UserScript==
// @name         网易云外链播放器关闭自动播放
// @namespace    FuckNeteaseOutchain
// @version      0.2
// @description  拒绝耳膜轰炸
// @author       Rortenfeat
// @match        *://music.163.com/outchain/player*
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIsGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wNi0yMlQxMjo1MjoxMSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNi0yMlQxMjo1MjoxNyswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDYtMjJUMTI6NTI6MTcrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU5OWRkNzI3LWUyNTAtMGQ0Yi1iMGY5LWZlN2I2MzBiNDc3ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxNzRhYmU5LTZkYTMtNzg0Yy04YzVkLWE5ZTJkZTY5NTA5NCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmRjMWMzNDI3LTllMWItNmY0Mi1hMGUyLWI3NWU2NjI3ZjBiYSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkYzFjMzQyNy05ZTFiLTZmNDItYTBlMi1iNzVlNjYyN2YwYmEiIHN0RXZ0OndoZW49IjIwMjEtMDYtMjJUMTI6NTI6MTErMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZDU2ZTE3ZGYtYTczNy1iMjQyLTgzMjQtYjRiMjViMzE0NmQxIiBzdEV2dDp3aGVuPSIyMDIxLTA2LTIyVDEyOjUyOjE3KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjU5OWRkNzI3LWUyNTAtMGQ0Yi1iMGY5LWZlN2I2MzBiNDc3ZCIgc3RFdnQ6d2hlbj0iMjAyMS0wNi0yMlQxMjo1MjoxNyswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpkNTZlMTdkZi1hNzM3LWIyNDItODMyNC1iNGIyNWIzMTQ2ZDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZGMxYzM0MjctOWUxYi02ZjQyLWEwZTItYjc1ZTY2MjdmMGJhIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZGMxYzM0MjctOWUxYi02ZjQyLWEwZTItYjc1ZTY2MjdmMGJhIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nQzOIAAAArZJREFUeNrlm01OAzEMhbPlIiwqcRYkLsIxegOuwBG4GmJBmEFCTNPYfnac36lkVKmTNO9rJmO/hBBjDGeLr6fn7e/lN04tfhoA26C94kb82QDcif94eDwNgKz4swAgxW/vw+oAWPF73ysD4MUvDoAUv38+LYDtfSwVjwLQvjSC1H0fAVyv12ia9oe2NQAgIEyvo2ABAD/tGwGI3v2lAIjbQBRvBrA3ooIaMAKA6zeNFEAyC+R7vhQAN7UJEKT4BKB6EUwAiOKrA6BEgp+VAIDEtwIQEADaX54CYBE/DACHPAAWvxwArfghAXy+vQdteIgfBsD3y2vQhkV8dwDcFPQqbKT+VgAA5farAmDF/6dcl5ANKku9vWZYAJj4nKhOAKIjAFi8MD7o2tEAkOL3p0FJ8VUTQLbYMQBgH3UUAKIEbwaA/BIlAPE5zwHIjNEPgNa8MABg7/lpAKSVHghAXPD+2gi3QETGXn0GcCWsxsnJtZEAHMRF9zVAY4mBANj0FgGQu45Yv9o/BQQAsIc3C4AgeflaJ8cCgJnyYyRCpTYWASAAi3I5AMS04AB42FgWAMiPWR2Al43VFQDi2mhXe7SOnxmASbwBQBCSMhxASQ1vWe3VTq5t86UtgBIPb3oAiIdHWliEm3PTBiiAMrtPbQCghU0LAJqcxgsAXNhU3GXqBgC2sWpvsxGbr1UBqGysTvuM1QCIq/3KAKAdG8LEcDls0RNAkY1l9RdGAQCJPwJgrCz4IFVXAEiGRwETAKCGRugOQCM+ByAtly0uczUAmZMYQSs+d6YvBbAHamMxh6naANhDKmmpw4wcgDRhYdxm9lyi9rQZ14YEUFrSJmvAsJGexXETPzMAF/GzAnATn57FGRaA97SfFYC7+JkAkOJvfH/EyaEdnnEBcGbG6QAcxd8BWPS/yX8Avm9ubvh2q/gAAAAASUVORK5CYII=
// @grant        none
// @run-at       document-start
// @downloadURL https://update.greasyfork.org/scripts/428304/%E7%BD%91%E6%98%93%E4%BA%91%E5%A4%96%E9%93%BE%E6%92%AD%E6%94%BE%E5%99%A8%E5%85%B3%E9%97%AD%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE.user.js
// @updateURL https://update.greasyfork.org/scripts/428304/%E7%BD%91%E6%98%93%E4%BA%91%E5%A4%96%E9%93%BE%E6%92%AD%E6%94%BE%E5%99%A8%E5%85%B3%E9%97%AD%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE.meta.js
// ==/UserScript==

(function() {
    'use strict';
    
	let out;
    const url = document.location.toString();
	const re = {
		full: /^https?:\/\/music\.163\.com\/outchain\/player\?((type|height|width|auto)=[0-9]+&)*id=[0-9]+(&(type|height|width|auto)=[0-9]+)*#*$/,
		auto: /auto=[0-9]+/,
		out: /auto=0(&(type|height|width|auto)=[0-9]+)*$/
	}

	if ( re.full.test(url) && !re.out.test(url) ) {
		if ( re.auto.test(url) ) {
			out = url.replace(re.auto, 'auto=0');
		} else {
			out = url + '&auto=0';
		}
		document.location = out;
	}

})();