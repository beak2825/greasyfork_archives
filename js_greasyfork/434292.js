// ==UserScript==
// @name         Boat Tools EZ
// @namespace    VirtualRegattaOffshoreUserScript
// @version      1.25
// @description  Add a panel to VirtualRegatta giving informations about boats
// @author       D2
// @match        https://www.virtualregatta.com/*/offshore-*/
// @grant        GM.xmlHttpRequest
// @grant        unsafeWindow
// @connect      zezo.org
// @connect      ezteam.ghelle.space
// @copyright    2022, D2. You are not allowed to show, modify, share or copy this script or a part of this script
// @downloadURL https://update.greasyfork.org/scripts/438726/Boat%20Tools%20EZ.user.js
// @updateURL https://update.greasyfork.org/scripts/438726/Boat%20Tools%20EZ.meta.js
// ==/UserScript==
 
 
function BTEZ (params) {
 
//(function() {
    'use strict';
 
    var consoleDebug=false;
    var fleetInfo={};
    var currentRace={};
    var me='';
    var team='TEAM';
    var polars=[];
 
    var icons = {
        "pin" : 'data:@image/png;base64,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',
        "compass" :'data:@image/png;base64,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',
        "wind" : 'data:@image/png;base64,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',
        "earth" : 'data:@image/png;base64,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'
    }
 
    var zezoMapping={
        "Jules Verne Trophy":"jv",
        "Nord Stream Race eSeries 2":"ns2",
        "Nord Stream Race eSeries 3":"ns3",
        "Valparaiso - Iquique":"tara",
        "Los Angeles - Honolulu":"honolulu",
        "La Transat en Double":"t2",
        "Iquique - Panama":"tara2",
        "TAG HEUER VELA CUP":"medodissey",
        "Atlantic Record":"atlrecord",
        "Rio to Tokyo Race" : "olympic",
        "Normandy Channel Race":"ncr",
        "Panama - Pointe à Pitre":"tara",
        "Les Sables - Horta":"horta",
        "Tangier - Sao Vicente":"globe",
        "New York - San Francisco":"nysf",
        "Summer Cup":"summer",
        "Cabo Verde - Mauritius":"globe2",
        "Indian Ocean Race":"indian",
        "ROLEX Fastnet Race":"fastnet",
        "Winner's Challenge":"winners",
        "Transquadra":"transquadra",
        "La Solitaire du Figaro #1":"figaro",
        "La Solitaire du Figaro #2":"figaro2",
        "La Solitaire du Figaro #3":"figaro3",
        "La Solitaire du Figaro #4":"figaro4",
        "Nord Stream Race eTrophy":"ns",
        "Round Britain Record":"rbr",
        "RoundItaly":"rounditaly",
        "Mini Transat  #1":"t650",
        "Belem - Salvador de Bahia":"tara",
        "Steering The Course": "sf",
        "Atlantic eSeries":"vg",
        "Mediterranean Record":"medrecord",
        "Auckland - Papeete": "globe2",
        "Mini Transat #2":"t650-2",
        "ULTIM'": "tjv70",
        "IMOCA" : "tjv60",
        "Class 40" : "tjv40",
        "Ocean Fifty":"tjv50",
        "Salvador de Bahia - Rio de Janeiro":"tara2",
        "Papeete - Ushuaia":"globe" // not sure
    };
 
    var zezoMappingID=null;
    try {
        zezoMappingID = JSON.parse(params);
    }
    catch (e)
    {
        zezoMappingID=null;
    }
 
    var zezoOptions = {
        "winch":4,
        "foil":16,
        "light":32,
        "reach":64,
        "heavy":128
    }
    var zezoIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvElEQVQ4jaWSMQ6DMAxFv6MoEyviENBDtAenhwgcwmLpkCmqlE6mhpKUpn+N3/9fjslzSKjU0DUwtbCo2mDoGkwcYC7d868G1rPF3sSzPZUOAPYI+MXw8CVn6Nlu0gGAxjGu39j28Wt1ACA81hDSd7DMbgOIoYAA1nRpRblDEug+xmIzs0/V8MQBbR+xzO6jnYg8h7TMDtfbe0AvSUtMdCNKQBJIp5Rqa6PDHZwxkpnsEku1tUxpQRrMzbwAeUxshPebz00AAAAASUVORK5CYII="; // "http://zezo.org/favicon.ico";
 
    var vrzenMapping={
        "New York - San Francisco":"New York-San Francisco",
        "Atlantic eSeries":"Vendée Globe Atlantic eSeries",
        "ULTIM'":"Transat Jacques Vabre - ULTIM",
        "IMOCA": "Transat Jacques Vabre - IMOCA",
        "Class 40":"Transat Jacques Vabre - Class 40",
        "Ocean Fifty":"Transat Jacques Vabre - Ocean 50",
        "Rolex Sydney Hobart Yacht Race":"Rolex Sydney-Hobart Yacht Race"
    };
    
	var vrzenIcon = "data:image/x-icon;base64,AAABAAMAEBAAAAEAIABoBAAANgAAACAgAAABACAAKBEAAJ4EAAAwMAAAAQAgAGgmAADGFQAAKAAAABAAAAAgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/DAwM/wYGBv8qKir/FBQU/zo6Ov8sLCz/Gxsb/yIiIv8rKyv/Hx8f/xMTE/8VFRX/AAAA/wAAAP8AAAD/AAAA/2JiYv8pKSn/d3d3/3BwcP8XFxf/KSkp/1FRUf8wMDD/aWlp/xISEv8rKyv/l5eX/wAAAP8AAAD/AAAA/wAAAP97e3v/HR0d/3d3d/9jY2P/FBQU/xEREf9tbW3/HBwc/3x8fP8RERH/lpaW/ysrK/8AAAD/AAAA/wAAAP8NDQ3/KSkp/xMTE/8xMTH/KSkp/wAAAP8eHh7/JiYm/yAgIP8vLy//ICAg/xcXF/8UFBT/BAQE/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAACAAAABAAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8vLy//FxcX/wAAAP8bGxv/jY2N/xwcHP81NTX/bW1t/3p6ev8nJyf/ioqK/zMzM/85OTn/UFBQ/zo6Ov97e3v/MDAw/29vb/8PDw//SkpK/wICAv8AAAD/VFRU/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/52dnf9iYmL/AAAA/wAAAP/u7u7/AAAA/9LS0v8xMTH/Kysr/woKCv+JiYn/ampq/wAAAP9NTU3/MjIy/7u7u/8AAAD/Nzc3/wUFBf86Ojr/AAAA/2FhYf/IyMj/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8PDw//3d3d/0FBQf8AAAD/AAAA/+/v7/9cXFz/lJSU/wAAAP8AAAD/AAAA/xAQEP/S0tL/CQkJ/xEREf8yMjL/u7u7/zAwMP8NDQ3/AAAA/zk5Of86Ojr/4ODg/1RUVP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/2tra/+JiYn/ICAg/xsbG/8AAAD/7u7u/yAgIP+0tLT/EhIS/wAAAP8AAAD/AgIC/3Fxcf90dHT/AAAA/zIyMv/Hx8f/aWlp/xAQEP8AAAD/VFRU/+Hh4f86Ojr/ODg4/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/0dHR/yYmJv8AAAD/Ozs7/wAAAP/u7u7/AAAA/7e3t/8+Pj7/AAAA/wEBAf9CQkL/BwcH/8rKyv8NDQ3/MjIy/7u7u/8GBgb/NjY2/wAAAP/CwsL/YWFh/wAAAP87Ozv/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/zQ0NP+YmJj/DQ0N/wAAAP9NTU3/JSUl/5+fn/84ODj/bGxs/wICAv8AAAD/AAAA/3p6ev8xMTH/aGho/0FBQf8+Pj7/iYmJ/zIyMv9xcXH/ERER/11dXf8AAAD/AQEB/09PT/8QEBD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAADAAAABgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/DAwM/wMDA/8AAAD/AAAA/wQEBP8UFBT/ExMT/xEREf8BAQH/AQEB/xISEv8ODg7/LCws/wkJCf8KCgr/FBQU/xMTE/8TExP/ExMT/xEREf8FBQX/EhIS/xMTE/8TExP/ExMT/xMTE/8KCgr/CgoK/xQUFP8LCwv/AAAA/wAAAP8AAAD/FBQU/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/c3Nz/zs7O/8AAAD/AAAA/wwMDP+Ghob/0dHR/zMzM/8GBgb/jY2N/8TExP9hYWH/z8/P/15eXv9hYWH/1dXV/0NDQ/8vLy//VVVV/7a2tv8aGhr/bW1t/83Nzf9gYGD/NTU1/3p6ev9ra2v/HBwc/3t7e/8gICD/AQEB/wAAAP84ODj/g4OD/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8QEBD/09PT/5OTk/8BAQH/AAAA/wAAAP92dnb/7+/v/wAAAP9BQUH/6urq/3Nzc/8MDAz/aGho/xsbG/8lJSX/2dnZ/4iIiP8DAwP/AAAA/3d3d/8WFhb/U1NT/+jo6P88PDz/AAAA/xcXF/9KSkr/AgIC/2JiYv8AAAD/AAAA/xsbG/+4uLj/p6en/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP9QUFD/7e3t/3Z2dv8ZGRn/AAAA/wAAAP92dnb/7+/v/wcHB/+Li4v/1dXV/w8PD/8AAAD/AAAA/wAAAP8AAAD/cHBw/+Hh4f8uLi7/AAAA/yoqKv8aGhr/U1NT/+jo6P88PDz/FxcX/w8PD/8UFBT/AQEB/19fX/8AAAD/CgoK/56env/Z2dn/h4eH/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wkJCf+VlZX/wsLC/xsbG/85OTn/AAAA/wAAAP92dnb/8fHx/1NTU/+2trb/Pz8//wAAAP8AAAD/AAAA/wAAAP8AAAD/CQkJ/8jIyP+EhIT/BQUF/wQEBP8EBAT/U1NT/+jo6P88PDz/Z2dn/xkZGf8AAAD/AAAA/15eXv8DAwP/jo6O/+7u7v9iYmL/YGBg/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yAgIP/V1dX/W1tb/w8PD/87Ozv/BQUF/wAAAP92dnb/8PDw/yUlJf+Ojo7/jY2N/woKCv8AAAD/AAAA/wAAAP8BAQH/AAAA/0ZGRv/Q0ND/JSUl/wAAAP8AAAD/U1NT/+/v7/95eXn/t7e3/xsbG/8AAAD/AAAA/19fX/9iYmL/7u7u/46Ojv8DAwP/X19f/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/2FhYf/U1NT/Hh4e/wICAv87Ozv/EhIS/wAAAP92dnb/7+/v/wAAAP89PT3/6enp/1hYWP8AAAD/AAAA/wEBAf8cHBz/CQkJ/xAQEP+rq6v/hoaG/wAAAP8AAAD/U1NT/+jo6P88PDz/MTEx/xYWFv8PDw//AAAA/4ODg//Z2dn/n5+f/woKCv8AAAD/Xl5e/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AQEB/8/Pz/+UlJT/BwcH/wAAAP8zMzP/Hh4e/wAAAP92dnb/7+/v/wAAAP87Ozv/6Ojo/19fX/8AAAD/AAAA/wAAAP9OTk7/Ghoa/wEBAf9OTk7/4uLi/yUlJf8AAAD/U1NT/+jo6P88PDz/AwMD/xgYGP9BQUH/AAAA/52dnf+5ubn/Gxsb/wAAAP8AAAD/ZGRk/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8HBwf/RkZG/9nZ2f9gYGD/AwMD/wAAAP8YGBj/YmJi/xAQEP97e3v/1dXV/yIiIv9/f3//mpqa/wcHB/8AAAD/AAAA/wAAAP9jY2P/gICA/yAgIP8dHR3/tLS0/4qKiv8ICAj/YGBg/9HR0f9OTk7/IyMj/4eHh/9QUFD/ERER/42Njf85OTn/AAAA/wAAAP8RERH/bW1t/xAQEP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8KCgr/JCQk/ycnJ/8eHh7/BAQE/wAAAP8SEhL/JiYm/xYWFv8nJyf/Jycn/yYmJv8ZGRn/AgIC/wAAAP8AAAD/AAAA/wAAAP8QEBD/JiYm/ycnJ/8nJyf/Jycn/x8fH/8KCgr/JCQk/ycnJ/8nJyf/Jycn/yUlJf8NDQ3/FhYW/x8fH/8AAAD/AAAA/wAAAP8UFBT/Jycn/xUVFf8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==";
 
    var sails = {
        "1": "J",
        "2": "G",
        "3": "St",
        "4": "LJ",
        "5": "C0",
        "6": "HG",
        "7":  "LG",
        "11": "J",
        "12": "G",
        "13": "St",
        "14": "LJ",
        "15": "C0",
        "16": "HG",
        "17": "LG",
    }
 
    var sailNames = {
        "1": "Jib",
        "2": "Spi",
        "3": "Staysail",
        "4": "LightJib",
        "5": "Code0",
        "6": "HeavyGnk",
        "7":  "LightGnk",
        "11": "Jib",
        "12": "Spi",
        "13": "Staysail",
        "14": "LightJib",
        "15": "Code0",
        "16": "HeavyGnk",
        "17": "LightGnk",
    }
 
    var sailToOption = {
        "STAYSAIL":"heavy",
        "HEAVY_GNK":"heavy",
        "LIGHT_JIB":"light",
        "LIGHT_GNK":"light",
        "CODE_0":"reach"
    }
 
    var isGetBoatOK=false;
    var isGetAccountOK=false;
    var isResized=false;
    var isVIP=false;
    var elBoat=null;
 
    var theme="default";
    var themes = {
        "default": {
            "general-bg": "lightblue",
            "general-color": "#666",
            "header-color": "lightgoldenrodyellow",
            "me-color" : "lightcyan",
            "team-color" : "lightsteelblue",
            "grey-1" : "#C0C0C0",
            "grey-2" : "#E0E0E0",
            "icon-bg" : "#FFFFFF00"
        },
        "dark": {
            "general-bg": "#000041",
            "general-color": "white",
            "header-color": "darkred",
            "me-color" : "#660f5a",
            "team-color" : "#2f044e",
            "grey-1" : "#606060",
            "grey-2" : "#303030",
            "icon-bg" : "#FFFFFFFF"
        }
    };
 
    var kmlTemplate = {
        "header" : '<?xml version="1.0" encoding="UTF-8"?>\n\
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">\n\
<Document>\n\
 <name>VRBOATINFOS_DOCNAME</name>\n\
 <Style id="s_ylw-pushpin_hl">\n\
  <IconStyle>\n\
   <color>ff0000ff</color>\n\
   <scale>1.18182</scale>\n\
   <Icon>\n\
    <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle_highlight.png</href>\n\
   </Icon>\n\
  </IconStyle>\n\
 </Style>\n\
 <Style id="s_ylw-pushpin">\n\
  <IconStyle>\n\
   <color>ff0000ff</color>\n\
   <Icon>\n\
    <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png</href>\n\
   </Icon>\n\
  </IconStyle>\n\
 </Style>\n\
 <StyleMap id="m_ylw-pushpin">\n\
  <Pair>\n\
   <key>normal</key>\n\
   <styleUrl>#s_ylw-pushpin</styleUrl>\n\
  </Pair>\n\
  <Pair>\n\
   <key>highlight</key>\n\
   <styleUrl>#s_ylw-pushpin_hl</styleUrl>\n\
  </Pair>\n\
 </StyleMap>\n',
        "style_track" : '<Style id="trackStyle_VRBOATINFOS_BOATNAME">\n\
 <LineStyle>\n\
  <color>ffVRBOATINFOS_COLORLINE</color>\n\
  <width>4</width>\n\
 </LineStyle>\n\
 <PolyStyle>\n\
  <color>80VRBOATINFOS_COLORPOLY</color>\n\
 </PolyStyle>\n\
</Style>\n',
        "placemark_checkpoint" : '<Placemark>\n\
 <name>Checkpoint VRBOATINFOS_CHECKPOINTNAME</name>\n\
 <description>VRBOATINFOS_CHECKPOINTDESCRIPTION</description>\n\
 <LineString>\n\
  <extrude>1</extrude>\n\
  <tessellate>1</tessellate>\n\
  <altitudeMode>relative</altitudeMode>\n\
  <coordinates>VRBOATINFOS_CHECKPOINTCOORDS</coordinates>\n\
 </LineString>\n\
</Placemark>\n',
        "placemark_track" : '<Placemark>\n\
 <name>Track_VRBOATINFOS_BOATNAME</name>\n\
 <styleUrl>#trackStyle_VRBOATINFOS_BOATNAME</styleUrl>\n\
 <LineString>\n\
  <extrude>1</extrude>\n\
  <tessellate>1</tessellate>\n\
  <altitudeMode>relative</altitudeMode>\n\
  <coordinates>VRBOATINFOS_BOATTRACK</coordinates>\n\
 </LineString>\n\
</Placemark>\n',
        "placemark_trackts" : '<Placemark>\n\
 <name>VRBOATINFOS_BOATNAME</name>\n\
 <open>0</open>\n\
 <description>VRBOATINFOS_BOATDESCRIPTION</description>\n\
 <StyleMap>\n\
  <Pair><key>normal</key><Style><IconStyle><scale>1</scale><Icon><href>http://maps.google.com/mapfiles/kml/shapes/track.png</href></Icon></IconStyle><LineStyle><color>ffVRBOATINFOS_COLORLINE</color><width>3</width></LineStyle></Style></Pair>\n\
  <Pair><key>highlight</key><Style><IconStyle><scale>1.33</scale><Icon><href>http://maps.google.com/mapfiles/kml/shapes/track.png</href></Icon></IconStyle><LineStyle><color>ffVRBOATINFOS_COLORLINE</color><width>4</width></LineStyle></Style></Pair>\n\
 </StyleMap>\
 <gx:Track>VRBOATINFOS_TRACKTS\n\
  <ExtendedData><Data name="name"><value>VRBOATINFOS_BOATNAME</value></Data></ExtendedData>\n\
 </gx:Track>\n\
</Placemark>\n',
        "folder_header" : '<Folder>\n\
 <name>VRBOATINFOS_FOLDERNAME</name>\n\
 <open>0</open>\n',
        "placemark_onepoint" : '<Placemark>\n\
 <name>VRBOATINFOS_POINTNAME</name>\n\
 <styleUrl>#m_ylw-pushpin</styleUrl>\n\
 <Point>\n\
  <gx:drawOrder>1</gx:drawOrder>\n\
  <coordinates>VRBOATINFOS_POINTCOORDS,0</coordinates>\n\
 </Point>\n\
</Placemark>\n',
        "placemark_onepoint_wts" : '<Placemark>\n\
 <name>VRBOATINFOS_POINTNAME</name>\n\
 <styleUrl>#m_ylw-pushpin</styleUrl>\n\
 <TimeStamp><when>VRBOATINFOS_POINTTS</when></TimeStamp>\n\
 <Point>\n\
  <gx:drawOrder>1</gx:drawOrder>\n\
  <coordinates>VRBOATINFOS_POINTCOORDS,0</coordinates>\n\
 </Point>\n\
</Placemark>\n',
        "folder_footer" : '</Folder>\n',
        "footer" : '</Document>\n\
</kml>'
    }
 
    
	var myConsole = { "log": function() {}, "debug": function() {}, "error": function() {}, "info": function() {}};
    if (consoleDebug)
        myConsole=console;
 
    $(window).on('resize', function (e) {
        resizeUI();
    });
 
    function resizeUI()
    {
        var w = $('body').width();
        $('.webgl-content').css({'margin-top': '-25px'});
        var gw = $('#gameContainer canvas').width();
        var remainingw = w - gw;
        var colW = remainingw/2-15;
        $(elBoat).width(colW);
    }
 
    function switchToTheme(t)
    {
        var ls = {};
        if (localStorage.hasOwnProperty('boattool'))
            ls = JSON.parse(localStorage.boattool);
        ls.theme=t;
        localStorage.boattool = JSON.stringify(ls);
    }
 
    function install () {
        if (!isGetBoatOK || !isGetAccountOK) return;
 
        if (icons.pin.startsWith('data'))
        {
            icons.pin = '<img style="min-width: 12px; width: 12px;" src="' + icons.pin + '" />';
            icons.earth = '<img style="min-width: 12px; width: 12px;" src="' + icons.earth + '" />';
            icons.wind = '<img style="min-width: 12px; width: 12px; background-color: ' + themes[theme]['icon-bg'] + '" src="' + icons.wind + '" />';
            icons.compass = '<img style="min-width: 12px; width: 12px; background-color: ' + themes[theme]['icon-bg'] + '" src="' + icons.compass + '" />';
        }
 
        var el = document.getElementById('boatinfo');
        if (el==null) {
 
            var raceTitle = document.createElement('div');
            $(raceTitle).attr('id', 'raceTitle');
            if (currentRace.hasOwnProperty('name'))
                $(raceTitle).html('<center><b>' + currentRace.name + '</b></center>');
 
 
            if (currentRace.hasOwnProperty('name'))
                $(raceTitle).html('<center><b>' + currentRace.name + '</b></center>');
 
            el = document.createElement('div');
            var myboat = document.createElement('div');
            $(myboat).attr('id','progview');
            el.appendChild(raceTitle);
            el.appendChild(document.createElement('hr'));
            el.appendChild(myboat);
            var fleet = document.createElement('div');
            el.appendChild(fleet);
 
            var jqel = $(el);
            jqel.attr('id','boatinfo');
            jqel.css({
                'float': 'left',
                'width': '300px',
                'position': 'absolute',
                'left':'10px',
                'top':'105px',
                'background-color':themes[theme]['general-bg'],
                'color':themes[theme]['general-color'],
                'overflow-x': 'scroll',
                'white-space' : 'nowrap',
                'height' : '600px',
                'font-size': '0.7em',
                'line-height': 'initial'
            });
            document.body.appendChild(el);
        }
        elBoat=el;
 
        resizeUI();
    }
 
 
    function downloadFile(data, fileName, type="text/plain") {
        // Create an invisible A element
        const a = document.createElement("a");
        a.style.display = "none";
        document.body.appendChild(a);
 
        // Set the HREF to a Blob representation of the data to be downloaded
        a.href = window.URL.createObjectURL(
            new Blob([data], { type: type })
        );
 
        // Use download attribute to set set desired file name
        a.setAttribute("download", fileName);
 
        // Trigger the download by simulating click
        a.click();
        // Cleanup
        window.URL.revokeObjectURL(a.href);
        document.body.removeChild(a);
    }
 
    function fillFleet(el)
    {
        if(elBoat==null) return;
        el=elBoat.lastElementChild;
        var fleetTxt='<table style="">';
        fleetTxt+='<tr style="background-color: ' + themes[theme]["header-color"] + ';"><td></td><td></td><td></td><td></td><td>Name</td><td>S</td><td>Speed</td><td>|TWS</td><td>|TWA</td><td>|Hdg</td><td>Options</td></tr>';
        var fleetStats = {
            "WPtCount" : 0,
            "TWACount" : 0,
            "HdgCount" : 0,
            "fleetCount" : 0,
            "maxSpeed" : 0,
            "maxSpeedUser" :''
        };
 
        var teamStats = {
            "WPtCount" : 0,
            "TWACount" : 0,
            "HdgCount" : 0,
            "fleetCount" : 0,
            "maxSpeed" : 0,
            "maxSpeedUser" :''
        };
 
        myConsole.log(fleetInfo);
        for (var boat in fleetInfo)
        {
            if (fleetInfo.hasOwnProperty(boat)==false) continue;
            if (boat==me)
                fleetTxt +='<tr style="background-color: ' + themes[theme]['me-color'] + ';">';
            else if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                fleetTxt +='<tr style="background-color: ' + themes[theme]['team-color'] + ';">';
            else
                fleetTxt +='<tr>';
 
            // zezo link:
            var zezoURL = '';
            var vrzenURL = 'http://routage.vrzen.org/?'
            var options = '';
            if (fleetInfo[boat].hasOwnProperty('options')) {
                options=fleetInfo[boat].options.join('/');
                if (fleetInfo[boat].options.length==8)
                    options = "<b>ALL</b>";
                if (fleetInfo[boat].hasOwnProperty('fullOptions') && fleetInfo[boat].fullOptions)
                    options = "<b>Full Pack</b>";
                var zezoOPT = 0;
                fleetInfo[boat].options.forEach(function (o) {
                    if (zezoOptions.hasOwnProperty(o)) {
                        zezoOPT += zezoOptions[o];
                    }
                });
                var zezoDir='';
                var zezoRaceID=[];
                if (zezoMappingID!=null)
                    zezoRaceID = zezoMappingID.races.filter(r=>r.id==currentRace._id.race_id + "." + currentRace._id.num);
 
                if (zezoMapping.hasOwnProperty(currentRace.name))
                    zezoDir=zezoMapping[currentRace.name];
                else if (zezoRaceID.length==1)
                    zezoDir=zezoRaceID[0].url;
                if (zezoDir!='')
                    zezoURL = "http://zezo.org/" + zezoDir + "/chart.pl?lat=" + fleetInfo[boat].pos.lat + "&lon=" + fleetInfo[boat].pos.lon + "&o=" + zezoOPT;
            }
            var icon=icons.wind;
            var isWP = fleetInfo[boat].hasOwnProperty('waypoints') && fleetInfo[boat].waypoints!=null && fleetInfo[boat].waypoints.length!=0;
            var isbaWP = fleetInfo[boat].hasOwnProperty('ba') && fleetInfo[boat].ba!=null;
            if (isWP)
            {
                if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                    teamStats.WPtCount++;
                fleetStats.WPtCount++;
                icon=icons.pin;
            }
            else if (Math.floor(fleetInfo[boat].hdg)==fleetInfo[boat].hdg)
            {
                if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                    teamStats.HdgCount++;
                fleetStats.HdgCount++;
                icon = icons.compass;
            }
            else if (Math.floor(fleetInfo[boat].twa)==fleetInfo[boat].twa)
            {
                if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                    teamStats.TWACount++;
                fleetStats.TWACount++;
            }
            else
            {
                if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                    teamStats.WPtCount++;
                fleetStats.WPtCount++;
                icon=icons.pin;
            }
            if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                teamStats.fleetCount++;
            fleetStats.fleetCount++;
 
            fleetTxt += '<td><a href="#" data-name="' + boat + '" data-action="show-prog">' + icon + '</a></td>';
 
            if (fleetInfo[boat].hasOwnProperty('track'))
            {
                fleetTxt += '<td><a href="#" data-name="' + boat + '" data-action="export-track-kml">' + icons.earth + '</a></td>';
            }
            else
            {
                fleetTxt += '<td></td>';
            }
 
            if (zezoURL=='')
                fleetTxt += '<td></td>';
            else
                fleetTxt += '<td><a target="zezo" href="' + zezoURL + '"><img style="min-width: 12px; width: 12px;" src="' + zezoIcon + '" /></a></td>' ;
 
            if (fleetInfo[boat].hasOwnProperty('options'))
            {
                var raceName = currentRace.name;
                if (vrzenMapping.hasOwnProperty(currentRace.name)) raceName = vrzenMapping[currentRace.name];
                vrzenURL += "lon=" + fleetInfo[boat].pos.lon + "&lat=" + fleetInfo[boat].pos.lat + "&opt=" + zezoOPT + "&race=" + raceName.replaceAll(' ','_').replaceAll('#','').replaceAll("'",'') + "&currentSail=" + fleetInfo[boat].sail + "&currentHeading=" + Math.round(fleetInfo[boat].hdg);
                fleetTxt += '<td><a target="vrzen" href="' + vrzenURL + '"><img style="min-width: 12px; width: 12px;" src="' + vrzenIcon + '" /></a></td>' ;
            }
            else
                fleetTxt += '<td></td>';
 
 
            //fleetTxt += '<td><b>' + (zezoURL==''?boat:'<a target="zezo" href="' + zezoURL + '">' + boat + "</a>") + "</b></td>";
            fleetTxt += '<td><b>' + boat + '</b></td>';
 
            var sailTxt = ((fleetInfo[boat].hasOwnProperty('sail') && fleetInfo[boat].sail!=null)?(sails.hasOwnProperty(fleetInfo[boat].sail)?sails[fleetInfo[boat].sail]:fleetInfo[boat].sail):'--');
            fleetTxt += '<td><b>' + sailTxt + '</b></td>';
 
            var polarURL = "http://toxcct.free.fr/polars/?race_id=" + currentRace._id.race_id + "." + currentRace._id.num + (fleetInfo[boat].tws?"&tws=" + fleetInfo[boat].tws:"") + (fleetInfo[boat].twa?"&twa=" + Math.abs(fleetInfo[boat].twa):"");
            var polarOptions = {
                light: 0,
                reach: 0,
                heavy: 0,
                foil: 0,
                hull: 0
            };
            if (fleetInfo[boat].hasOwnProperty('options')) {
                fleetInfo[boat].options.forEach(function (o) {
                    polarOptions[o]=1;
                });
                if (polarOptions.hasOwnProperty('winch'))
                    delete polarOptions.winch;
                for (var po in polarOptions)
                {
                    if (polarOptions.hasOwnProperty(po)==true)
                        polarURL+="&" + po + "=" + polarOptions[po];
                }
            }
 
 
            fleetTxt += '<td><a target="polar" href="' + polarURL + '">' + fleetInfo[boat].speed.toFixed(2) + '</a></td>';
            if (fleetInfo[boat].speed>fleetStats.maxSpeed)
            {
                fleetStats.maxSpeed=fleetInfo[boat].speed;
                fleetStats.maxSpeedUser=boat;
            }
            if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team && fleetInfo[boat].speed>teamStats.maxSpeed)
            {
                teamStats.maxSpeed=fleetInfo[boat].speed;
                teamStats.maxSpeedUser=boat;
            }
 
            if ( fleetInfo[boat].hasOwnProperty('tws') && fleetInfo[boat].tws && typeof fleetInfo[boat].tws == 'number')
            {
                var windyURL = "https://www.windy.com/?" + fleetInfo[boat].pos.lat + ',' + fleetInfo[boat].pos.lon + ',5,d:picker';
                fleetTxt += '<td>|W:<a target="polar" href="' + windyURL +  '">' + fleetInfo[boat].tws.toFixed(2) + '</a></td>';
            }
            else
                fleetTxt += '<td>|</td>';
 
            if ( fleetInfo[boat].hasOwnProperty('twa') && fleetInfo[boat].twa && typeof fleetInfo[boat].twa == 'number')
                fleetTxt += '<td>|A:' + fleetInfo[boat].twa.toFixed(2) + '</td>';
            else
                fleetTxt += '<td>|</td>';
 
            if ( fleetInfo[boat].hasOwnProperty('hdg') && fleetInfo[boat].hdg && typeof fleetInfo[boat].hdg == 'number')
                fleetTxt += '<td>|H:' + fleetInfo[boat].hdg.toFixed(2) + '</td>';
            else
                fleetTxt += '<td>|</td>';
 
            fleetTxt += '<td>' + options + '</td>';
 
            fleetTxt += '</tr>';
 
 
        }
        fleetTxt += '</table>';
        if (fleetStats.fleetCount!=0)
        {
            var fleetStatsTxt = '<div><a href="#" data-action="export-track-kml">' + icons.earth + '</a> <a href="#" id="export-allWP-fleet-kml">' + icons.pin + '</a>: ' + Math.round(fleetStats.WPtCount/fleetStats.fleetCount*100) + '% ' + icons.compass + ': ' + Math.round(fleetStats.HdgCount/fleetStats.fleetCount*100) + '% '+ icons.wind + ': ' + Math.round(fleetStats.TWACount/fleetStats.fleetCount*100) + '% | Max speed: ' + fleetStats.maxSpeed.toFixed(2) + ' (' + fleetStats.maxSpeedUser + ')</div><hr/>';
            var teamStatsTxt = '<div style="background-color: ' + themes[theme]['team-color'] + ';"><a href="#" data-action="export-track-kml" data-filter="team">' + icons.earth + '</a> <a href="#" id="export-allWP-team-kml">' + icons.pin + '</a>: ' + Math.round(teamStats.WPtCount/teamStats.fleetCount*100) + '% ' + icons.compass + ': ' + Math.round(teamStats.HdgCount/teamStats.fleetCount*100) + '% '+ icons.wind + ': ' + Math.round(teamStats.TWACount/teamStats.fleetCount*100) + '% | Max speed: ' + teamStats.maxSpeed.toFixed(2) + ' (' + teamStats.maxSpeedUser + ')</div><hr/>';
 
            fleetTxt = fleetStatsTxt + teamStatsTxt + fleetTxt;
            $(el).html(fleetTxt);
 
            window.setTimeout(setupExportKML);
        }
        
    
 
 
    }
 
    function baToHTML(ba)
    {
        if (ba==null) return "";
        var html = "";
        return html + "<hr/>";
    }
 
    
 
    
    
    
    function HSVtoRGB(h, s, v) {
        var r, g, b, i, f, p, q, t;
        if (arguments.length === 1) {
            s = h.s, v = h.v, h = h.h;
        }
        i = Math.floor(h * 6);
        f = h * 6 - i;
        p = v * (1 - s);
        q = v * (1 - f * s);
        t = v * (1 - (1 - f) * s);
        switch (i % 6) {
            case 0: r = v, g = t, b = p; break;
            case 1: r = q, g = v, b = p; break;
            case 2: r = p, g = v, b = t; break;
            case 3: r = p, g = q, b = v; break;
            case 4: r = t, g = p, b = v; break;
            case 5: r = v, g = p, b = q; break;
        }
        return {
            r: Math.round(r * 255),
            g: Math.round(g * 255),
            b: Math.round(b * 255)
        };
    }
 
    function strRGBtoRGB(c)
    {
        return {
            r: parseInt(c.substr(1,2), 16),
            g: parseInt(c.substr(3,2), 16),
            b: parseInt(c.substr(5,2), 16)
        };
    }
 
    function generateRandomColor()
    {
        var golden_ratio_conjugate = 0.618033988749895;
        var h=Math.random();
        h += golden_ratio_conjugate;
        h %= 1;
        return(HSVtoRGB(h, 0.99, 0.99));
    }
 
    function rgbTobgrHex(rgb) {
        function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }
        return componentToHex(rgb.b) + componentToHex(rgb.g) + componentToHex(rgb.r);
    }
 
 
    function setupExportKML()
    {
        $('a[data-action="export-track-kml"]').on( "click", function (e) {
            //myConsole.log("[BoatInfos] fleet" , fleetInfo);
            var useRandomColor = window.confirm("Use random color?");
 
            var kml='';
            var docName='';
            if (e.currentTarget.attributes.hasOwnProperty('data-name'))
            {
                var name=e.currentTarget.attributes['data-name'].value;
                var lineColor = generateRandomColor();
                var polyColor = generateRandomColor();
                if (!useRandomColor)
                {
                    lineColor = fleetInfo[name].color;
                }
                docName = name + ' ' + currentRace.name;
                kml += kmlTemplate.header.replaceAll('VRBOATINFOS_DOCNAME', docName);
                kml += kmlTemplate.style_track.replaceAll('VRBOATINFOS_COLORLINE', rgbTobgrHex(lineColor)).replaceAll('VRBOATINFOS_COLORPOLY', rgbTobgrHex(polyColor)).replaceAll('VRBOATINFOS_BOATNAME',name);
                if (currentRace.hasOwnProperty('checkpoints') && currentRace.checkpoints != null)
                {
                    kml += kmlTemplate.folder_header.replaceAll('VRBOATINFOS_FOLDERNAME','Checkpoints');
                    currentRace.checkpoints.forEach(function (cp) {
                        kml += kmlTemplate.placemark_checkpoint.replaceAll('VRBOATINFOS_CHECKPOINTNAME',cp.id).replaceAll('VRBOATINFOS_CHECKPOINTCOORDS','' + cp.start.lon + ',' + cp.start.lat + '\n' + cp.end.lon + ',' + cp.end.lat).replaceAll('VRBOATINFOS_CHECKPOINTDESCRIPTION','Checkpoint ' + cp.id);
                    });
                    kml += kmlTemplate.folder_footer;
                }
 
                ['track', 'iteTrack'].forEach(function (t) {
                    var track = fleetInfo[name][t];
 
                    var trackTxt = '';
                    var trackTSTxt = '';
                    var trackgxTxt = '';
                    var hasTS = false;
                    if (!track || Array.isArray(track)==false) return;
                    track.forEach(function (p) {
                        hasTS = hasTS || p.hasOwnProperty('ts');
                        if (hasTS)
                        {
                            trackTSTxt += "<when>" + new Date(p.ts).toISOString() + "</when>";
                            trackgxTxt += "<gx:coord>" + p.lon + ' ' + p.lat + " 100</gx:coord>";
                        }
                        trackTxt += p.lon + ',' + p.lat + ',100\n';
                    });
                    if (hasTS)
                        kml += kmlTemplate.placemark_trackts.replaceAll('VRBOATINFOS_BOATNAME',name).replaceAll('VRBOATINFOS_TRACKTS',trackTSTxt+trackgxTxt).replaceAll('VRBOATINFOS_COLORLINE', rgbTobgrHex(lineColor)).replaceAll('VRBOATINFOS_BOATDESCRIPTION', name);
                    else
                        kml += kmlTemplate.placemark_track.replaceAll('VRBOATINFOS_BOATNAME',name).replaceAll('VRBOATINFOS_BOATTRACK',trackTxt);
                    kml += kmlTemplate.folder_header.replaceAll('VRBOATINFOS_FOLDERNAME','Points ' + t + ' ' + name);
                    track.forEach(function (p, i) {
                        if (p.hasOwnProperty('ts'))
                            kml += kmlTemplate.placemark_onepoint_wts.replaceAll('VRBOATINFOS_POINTNAME', ((p.hasOwnProperty('tag')?i + ' ' + p.tag:'P '+ i))).replaceAll('VRBOATINFOS_POINTCOORDS',p.lon + ',' + p.lat).replaceAll('VRBOATINFOS_POINTTS',new Date(p.ts).toISOString());
                        else
                            kml += kmlTemplate.placemark_onepoint.replaceAll('VRBOATINFOS_POINTNAME', ((p.hasOwnProperty('tag')?i + ' ' + p.tag:'P '+ i))).replaceAll('VRBOATINFOS_POINTCOORDS',p.lon + ',' + p.lat);
                    });
                    kml += kmlTemplate.folder_footer;
                });
                kml += kmlTemplate.footer;
            }
            else
            {
                var filteredFleet={};
                var isTeam=false;
                if (e.currentTarget.attributes.hasOwnProperty('data-filter') && e.currentTarget.attributes['data-filter'].value=="team")
                {
                    isTeam=true;
                    for (var boat in fleetInfo)
                    {
                        if (fleetInfo.hasOwnProperty(boat)==false) continue;
                        if (fleetInfo[boat].hasOwnProperty('team') && fleetInfo[boat].team)
                            filteredFleet[boat] = fleetInfo[boat];
                        if (boat == me)
                            filteredFleet[boat] = fleetInfo[boat];
                    }
                }
                else
                    filteredFleet=fleetInfo;
 
                docName = 'Fleet ' + (isTeam ? team + " " : "") + currentRace.name;
                kml += kmlTemplate.header.replaceAll('VRBOATINFOS_DOCNAME', docName);
                var lineColors = {};
                for (var boat in filteredFleet)
                {
                    if (filteredFleet.hasOwnProperty(boat)==false) continue;
                    var lineColor = generateRandomColor();
                    var polyColor = generateRandomColor();
                    if (!useRandomColor)
                    {
                        lineColor = filteredFleet[boat].color;
                    }
                    lineColors[boat]=lineColor;
                    kml += kmlTemplate.style_track.replaceAll('VRBOATINFOS_COLORLINE', rgbTobgrHex(lineColor)).replaceAll('VRBOATINFOS_COLORPOLY', rgbTobgrHex(polyColor)).replaceAll('VRBOATINFOS_BOATNAME',boat);
                }
                if (currentRace.hasOwnProperty('checkpoints') && currentRace.checkpoints != null)
                {
                    kml += kmlTemplate.folder_header.replaceAll('VRBOATINFOS_FOLDERNAME','Checkpoints');
                    currentRace.checkpoints.forEach(function (cp) {
                        kml += kmlTemplate.placemark_checkpoint.replaceAll('VRBOATINFOS_CHECKPOINTNAME',cp.id).replaceAll('VRBOATINFOS_CHECKPOINTCOORDS','' + cp.start.lon + ',' + cp.start.lat + '\n' + cp.end.lon + ',' + cp.end.lat).replaceAll('VRBOATINFOS_CHECKPOINTDESCRIPTION','Checkpoint ' + cp.id);
                    });
                    kml += kmlTemplate.folder_footer;
                }
                for (var boat in filteredFleet)
                {
                    if (filteredFleet.hasOwnProperty(boat)==false) continue;
                    if (filteredFleet[boat].hasOwnProperty('track')==false || filteredFleet[boat].track==null) continue;
                    kml += kmlTemplate.folder_header.replaceAll('VRBOATINFOS_FOLDERNAME',boat);
                    ['track', 'iteTrack'].forEach(function (t) {
 
                        var track = filteredFleet[boat][t];
                        var trackTxt='';
                        var trackTSTxt = '';
                        var trackgxTxt = '';
                        var hasTS = false;
                        if (!track || Array.isArray(track)==false) return;
                        track.forEach(function (p) {
                            hasTS = hasTS || p.hasOwnProperty('ts');
                            if (hasTS)
                            {
                                trackTSTxt += "<when>" + new Date(p.ts).toISOString() + "</when>";
                                trackgxTxt += "<gx:coord>" + p.lon + ' ' + p.lat + " 100</gx:coord>";
                            }
                            trackTxt += p.lon + ',' + p.lat + ',100\n';
                        });
                        //if (boat==me)
                        {
                            if (hasTS)
                            {
                                trackTSTxt += "<when>" + new Date(Date.now()).toISOString() + "</when>";
                                trackgxTxt += "<gx:coord>" + filteredFleet[boat].pos.lon + ' ' + filteredFleet[boat].pos.lat + " 100</gx:coord>";
                            }
                            else
                                trackTxt += filteredFleet[boat].pos.lon + ',' + filteredFleet[boat].pos.lat + ',100\n';
                        }
                        if (hasTS)
                            kml += kmlTemplate.placemark_trackts.replaceAll('VRBOATINFOS_BOATNAME',boat + (t=='track'?'':' ' + t)).replaceAll('VRBOATINFOS_TRACKTS',trackTSTxt+trackgxTxt).replaceAll('VRBOATINFOS_COLORLINE', rgbTobgrHex(lineColors[boat])).replaceAll('VRBOATINFOS_BOATDESCRIPTION', boat);
                        else
                            kml += kmlTemplate.placemark_track.replaceAll('VRBOATINFOS_BOATNAME',boat + (t=='track'?'':' ' + t)).replaceAll('VRBOATINFOS_BOATTRACK',trackTxt);
                    });
                    kml += kmlTemplate.folder_footer;
                }
                kml += kmlTemplate.footer;
            }
            downloadFile(kml, docName.replaceAll(' ','_') + '.kml');
        });
 
    }
 
 
    var test=false;
    function updateFleetInfo(fleet)
    {
        if (fleet.hasOwnProperty('res'))
        {
            fleet.res.forEach(function (boat) {
                if (boat.hasOwnProperty('displayName')) boat.displayName=boat.displayName.replaceAll('"','');
                if (boat.hasOwnProperty('displayName') && fleetInfo.hasOwnProperty(boat.displayName)==false)
                {
                    fleetInfo[boat.displayName]={};
                }
                if (boat.hasOwnProperty('displayName')) {
                    fleetInfo[boat.displayName].color = strRGBtoRGB(boat.boat.display.color1);
                    fleetInfo[boat.displayName].pos = boat.pos;
                    fleetInfo[boat.displayName].userId = boat.userId;
                    fleetInfo[boat.displayName].twa = boat.twa;
                    fleetInfo[boat.displayName].tws = boat.tws;
                    fleetInfo[boat.displayName].hdg = boat.heading;
                    if (boat.hasOwnProperty('track'))
                        fleetInfo[boat.displayName].track = boat.track;
                    fleetInfo[boat.displayName].sail = boat.sail;
                    fleetInfo[boat.displayName].speed = boat.speed;
                    if (boat.hasOwnProperty('team')) fleetInfo[boat.displayName].team=true;
                    if (fleetInfo[boat.displayName].hasOwnProperty('iteTrack')==false)
                        fleetInfo[boat.displayName].iteTrack=[];
                    fleetInfo[boat.displayName].iteTrack.push({'ts': Date.now(), 'lat': boat.pos.lat, 'lon':boat.pos.lon});
                }
            });
        }
        var fleetInfoSorted = Object.keys(fleetInfo).sort(function (a, b) {
            if (b==me) return 1;
            if (a==me) return -1;
            return (a.toLowerCase().localeCompare(b.toLowerCase()));
        }).reduce(
            (obj, key) => {
                obj[key] = fleetInfo[key];
                return obj;
            },
            {}
        );
        fleetInfo = fleetInfoSorted;
    }
 
 
 
    (function(proxied) {
        XMLHttpRequest = function() {
            //cannot use apply directly since we want a 'new' version
            var wrapped = new(Function.prototype.bind.apply(proxied, arguments));
            var oldF = wrapped.onload;
            // override onReadyStateChange
            wrapped.onreadystatechange = function() {
                if (this.readyState == 4) {
                    //myConsole.log('[API] ', this.responseURL);
                    if (this.responseURL.indexOf('getboat')!=-1)
                    {
                        install();
                        //el=elTool;
                        var boat = JSON.parse(new TextDecoder().decode(this.response));
                        myConsole.debug("[API] XHR get boat:", boat);
                        var resetTools=false;
                        if (boat.hasOwnProperty('res') && boat.res.hasOwnProperty('leg') && boat.res.leg.hasOwnProperty('name'))
                        {
                            if (boat.res.leg.name!=currentRace.name)
                            {
                                currentRace=JSON.parse(JSON.stringify(boat.res.leg));
 
                                myConsole.log("[BOATINFOS] switch to race: " + currentRace.name, boat);
                                resetTools=true;
                                //myConsole.log("[BOATINFOS] me:", me);
                                //myConsole.log("[BOATINFOS] fleet[me]:", fleetInfo[me]);
                                for (var b in fleetInfo)
                                {
                                    if (fleetInfo.hasOwnProperty(b) && b!=me)
                                        delete fleetInfo[b];
                                    else if (b==me)
                                        fleetInfo[b].iteTrack=[]; // switch race => clear iteTrack
                                }
                                //me="";
                                
                            }
                        }
                        if (boat.hasOwnProperty('res') && boat.res.hasOwnProperty('bs') && boat.res.bs != null && boat.res.bs.hasOwnProperty('displayName'))
                        {
                            boat.res.bs.displayName=boat.res.bs.displayName.replace(/[^a-zA-Z0-9 \-_]*/g,'');
                            if (fleetInfo.hasOwnProperty(boat.res.bs.displayName)==false) {
                                fleetInfo[boat.res.bs.displayName]={};
                            }
                            if (me=="") me=boat.res.bs.displayName;
                            fleetInfo[boat.res.bs.displayName].color = strRGBtoRGB(boat.res.bs.boat.display.color1);
                            fleetInfo[boat.res.bs.displayName].options = boat.res.bs.options;
                            fleetInfo[boat.res.bs.displayName].pos = boat.res.bs.pos;
                            fleetInfo[boat.res.bs.displayName].twa = boat.res.bs.twa;
                            fleetInfo[boat.res.bs.displayName].tws = boat.res.bs.tws;
                            fleetInfo[boat.res.bs.displayName].hdg = boat.res.bs.heading;
                            fleetInfo[boat.res.bs.displayName].sail = boat.res.bs.sail;
                            fleetInfo[boat.res.bs.displayName].speed = boat.res.bs.speed;
                            fleetInfo[boat.res.bs.displayName].waypoints = boat.res.bs.waypoints;
                            if (boat.res.bs.hasOwnProperty('team')) fleetInfo[boat.res.bs.displayName].team=true;
                            if (boat.res.hasOwnProperty('track') && boat.res.track.hasOwnProperty('track'))
                                fleetInfo[boat.res.bs.displayName].track = boat.res.track.track;
                            if (boat.res.bs.hasOwnProperty('fullOptions'))
                                fleetInfo[boat.res.bs.displayName].fullOptions = boat.res.bs.fullOptions;
                            else
                                fleetInfo[boat.res.bs.displayName].fullOptions = false;
                            if (boat.res.hasOwnProperty('ba'))
                                fleetInfo[boat.res.bs.displayName].ba = boat.res.ba;
 
                            computePolarsFor(boat.res.bs.displayName, currentRace.boat.polar_id);
                            myConsole.log("BoatTool: Get boat OK");
                            isGetBoatOK=true;
                            install();
                            fillFleet(elBoat);
                            if (resetTools)
                                setupTools();
                            if (currentRace.hasOwnProperty('name'))
                                $('#raceTitle').html('<center><b>' + currentRace.name + '</b></center>');
                            //fillFleet(elBoat.lastElementChild);
                        }
 
                    }
                    if (this.responseURL.indexOf('getfleet')!=-1)
                    {
                        install();
                        if (elBoat!=null)
                        {
                            var el = elBoat;
                            var fleet = JSON.parse(new TextDecoder().decode(this.response));
                            myConsole.debug("[API] XHR get fleet:", fleet);
                            updateFleetInfo(fleet);
                            fillFleet(el.lastElementChild);
                        }
                    }
                }
                if (oldF) {
                    return oldF.apply(this, arguments);
                }
            }
 
            var oldSRH = wrapped.setRequestHeader;
            wrapped.setRequestHeader = function(header, value) {
                // Call the wrappedSetRequestHeader function first
                // so we get exceptions if we are in an erronous state etc.
                oldSRH.apply(this, arguments);
 
                // Create a headers map if it does not exist
                if(!this.headers) {
                    this.headers = {};
                }
 
                // Create a list for the header that if it does not exist
                if(!this.headers[header]) {
                    this.headers[header] = [];
                }
 
                // Add the value to the header
                this.headers[header].push(value);
                if (header=='x-api-key') myConsole.log('[API] key sent:' + value);
            }
 
            return wrapped;
        };
    })(XMLHttpRequest);
 
 
    window.handleWSRecieve = function (request, data)
    {
 
        myConsole.log("[API] WS recieve ts: " + Date.now(), data);
        if (data.hasOwnProperty('@class') && data['@class']==".AccountDetailsResponse")
        {
            me=data.displayName;
            myConsole.log("BoatTool: Get account OK");
            isGetAccountOK=true;
            if (data.hasOwnProperty('scriptData') && data.scriptData.hasOwnProperty('team'))
            {
                myConsole.log("[API] WS recieve TEAM:" , data.scriptData.team.name);
                team=data.scriptData.team.name;
            }
            if (data.hasOwnProperty('scriptData'))
            {
                if (data.scriptData.hasOwnProperty('isVIP'))
                {
                    isVIP = data.scriptData.isVIP;
                    fleetInfo[me].isVIP = isVIP;
                }
                else
                    fleetInfo[me].isVIP = false;
            }
            install();
        }
        return JSON.stringify(data);
    }
 
}
 
//})();
 
 
 
 
 
function denc(s, k)
{
    var e = new TextEncoder();
    var l=s.length;
    console.log(l);
    s = Uint8Array.from([...s].map(ch => ch.charCodeAt()));
    //k=atob(k);
    while(k.length<l) k+=atob(unsafeWindow.CryptoJS.SHA256(k).toString(unsafeWindow.CryptoJS.enc.Base64));
    k=e.encode(k);
    s.forEach((c,i)=>s[i]=s[i]^k[i]);
    s = String.fromCharCode(...s);
    return s;
}
 
function loader (a, src)
{
    if (unsafeWindow.hasOwnProperty('CryptoJS'))
    {
        var icon='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';
        var BTEZ_s = document.createElement("script");
        src = src.slice(src.indexOf('{')+1);
        src = src.slice(0, src.lastIndexOf('}'));
        src = "var params='" + a + "';\n" + src;
        BTEZ_s.textContent = '' + src + ' \n' + denc(atob(icon), atob('FQIJGgAeAAkfpcdxPWs=')) + '\n patchCode();';
        BTEZ_s.setAttribute("type", "application/javascript");
        document.body.appendChild(BTEZ_s);
    }
    else
    {
        window.setTimeout(function (p, s) {
            return function () {
                loader(p, s);
            }
        }(a, src), 1000);
        console.log('try again');
    }
}
 
 
function bootstrap()
{
 
    GM.xmlHttpRequest({
        method: "GET",
        url: "http://zezo.org/races2.json",
        onload: function(response) {
            loader(response.responseText.replaceAll('\n','').replaceAll('"','\\"'), BTEZ.toString());
        },
        onerror: function(response) {
            loader("", BTEZ.toString());
        },
        ontimeout: function(response) {
            loader("", BTEZ.toString());
        },
        onabort: function(response) {
            loader("", BTEZ.toString());
        }
    });
	
	unsafeWindow.EZRequest = function(url, data, handler)
	{
		GM.xmlHttpRequest({
			method: "POST",
			url: url,
			data: JSON.stringify(data),
			headers: { "Content-Type": "application/json;charset=UTF-8" },
			onload: handler
		});
	}
}
bootstrap();
 