// ==UserScript==
// @name         Re-add Cabge emote
// @namespace    yuniDev.neoCabge
// @version      2025-01-04
// @description  Re-adds Cabge as an emote
// @author       yuniDev
// @match        https://www.destiny.gg/embed/chat*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        GM_addStyle
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/524328/Re-add%20Cabge%20emote.user.js
// @updateURL https://update.greasyfork.org/scripts/524328/Re-add%20Cabge%20emote.meta.js
// ==/UserScript==

(function() {
    'use strict';
    GM_addStyle(`.emote.Cabge { width:36px; height: 30px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAwnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjabVBbDgMhCPz3FD2CPGTxOG7XJr1Bj18UbHbbTuKAjBmB1F/PR7oNIHDisqlUkWzgyhWbJZodbTJknjyBHBpc6wl6CGglskh+VYn3qw4fAw/NsnIy0nsI+1Wo8TPqlxF6oNHRyI8wqmFE6AKEQfOxslTdziPsa4IF9ZMGsV7b/rlvtr2j2D+E2AkoGxOxN0DjlETNEphsTUVeSGZFwswW8m9PC+kNJpdZPzVw/YoAAAGEaUNDUElDQyBwcm9maWxlAAB4nH2RO0jDUBSG/6ZKRSoOFhRxyFCd7FJFHEsrFsFCaSu06mBy0xc0aUhSXBwF14KDj8Wqg4uzrg6ugiD4AHEXnBRdpMRzk0KLGA8c7sd/z38491xAaNWYavbFAFWzjEwyLuYLq2LgFT74KUcRlZipp7KLOXjG1z1VUtxFeC/vuj9jSCmaDPCJxDGmGxbxBvHcpqVz3icOsYqkEJ8TTxs0IPEj12WX3ziXHRZ4z5CRyySIQ8RiuYflHmYVQyWeJQ4rqkb9hbzLCuctzmqtwTpz8hcGi9pKluuUE0hiCSmkIUJGA1XUYCFCp0aKiQzdxz38444/TS6ZXFUwciygDhWS4wf/g9+7NUszUbdTMA70v9j2xyQQ2AXaTdv+Prbt9gngfwautK6/3gLmP0lvdrXwETC8DVxcdzV5D7jcAcaedMmQHMlPKZRKwPsZfVMBGLkFBtfcvXXucfoA5GhXyzfAwSEwVabe6x7vHujd2781nf39AIKlcq1Hj1NkAAANdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDozNDg1M2UzYS02ZGNhLTRhZTgtYjZlMC1lMzAyYjc2Y2ZlMzUiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzIyNzg5YjgtOWViOC00NTFiLTg5NDUtNTVmNTA1ZDBlMmU1IgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YTZkOWZhNjgtZWQ5MS00MzBmLTgyNjctNDljNjcwM2JlYjlmIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MzU4NjkzNjY2ODQ3MTIiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zNCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjU6MDE6MDNUMDE6NTY6MDYrMDA6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDI1OjAxOjAzVDAxOjU2OjA2KzAwOjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjZmYTA2YWMtMjY4My00NmJmLTkwNDktOGE1ODkxZjZhOWVkIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI1LTAxLTAzVDAxOjU2OjA2Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PmEQGdQAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfpAQMBOAYtdBVNAAAJHElEQVRYw+2XaYydVRnHf+9+3/vebe7cdWbuTNtpp1PaylAqLSBaBTcobbQpRPniguISAU0U/aJBcPlAjH5QCa4oFtQQv0hQSUSCAVEQi3SbaTttZ7mz3Hvnbu+++YFIQBFRop94kpOcD885/995zsmT84fX4uVD+F9ufuOhilGzP/jFRfmRTeXcSDlJdbFUGLw/eXjvvfs+NhX+34Fuu+eGQyfNB96DENJpRqwb2sbOye2Ivnf/8lL3N1fu3n9o88jB/gvXyK9G8J6f/qDwu/r3DoZheDCfS1dcu5ez4rrku4k4UM3Vx4//YXKtY1IeC4hCmch3WW020fTogFYIDxydP341cPWrrtAd3//yjmb07I2W8sdLzy0tb8zqBjECQewQxSF26LOyEtJbi+gsxqSzIlvOK+J6UBuqsW5kHEn2KGbLSI2RT1+393N3/FdA37j389v7buPzjWD6Xa56XOpaa/TbsK5cY6Z+EjVKsbjkUa87KIFGMV1CFCSyRRjbLNLrxeRyBhtrk+iJDLYfUkkVTmVEbfKqi24PXvGVXXwTwnuv+ND7neDEtxbcP2mhauL7PoGlUB0Y4GyjTq8rYZ00uGjneWx4S55iKYMf2JhWwJHji5w+uoTtWTzTn2e2bPKGPds4cXSBiQ1j68fz61TglQHdfvf1U83gr7fN9x7d27TbhJFLUs4wWd5Kdn2GpbVVtITO5JBOYY+Gquqook21uAFVtYliGzGxyNxSG9HJU5/p0JydZ+sFI5QrBq3WObGobPgqcCOA9K9AvnTfwcRl7173tTnr8Nc1o7e957pM1S5jsjZKfaVPqbCJXLZIMVti4/A2crkETtgnChT+PD2NHwcEYpfTKzOomkZ5WGFyXKE6KHHqdJ8du6o0Gh3GRgdpLiZ2vn7XruXHHn7yqZd8Q5/89t6Ngdj+sZA8vVsQMgSRxa7NbyaKYG5pBsPIs2l4HMexQHTJG0PYfhMn6OD5GsVMHkEEN1xCFF0kVERiwrjDkYVj/OIXdYaKFS65bIrIjjl9zEX2xqJwVX/bP1Xo1vve+TpbqP+66Z3amtB0ho1RSvkhwtDn7OI5iul17JicIpvM4YYNMkaapjVLx1ylZzkUswUySRlFtMjpFaIgiS6NcrY5w7MLRzi74OJ0PC64OE3b7GB1XBq9eZKGLBjaUP1FQJ/9wRXXOlHnV67cHPACh5ljbTxXJIpCXM9ly9jr2Dg6hhc5NNvLdMwuXuBQb53DdiJSusGW6hvx4wWW2is0mwoECg3rIQbSCUQMnj4yy6XnT5BLF7A7EpYlo0gGQiyika8+D/Tpr19zUMn1f6JkuooVdTlzpE9GrbB9a5Xh4jCDmSLF3AA+Jl2zi2V10TUdyxapZicZLo6yoXQ+C62T2LbGROVNbK3tIp9NICoBXuDzyF+eYPaEz+8faTG1dQvVcgHLClidlzC7ASqpvARw7fX73p6b7P68Gy0rPb/J2eMm7kqSPW8+j9aazdTEVhzfI50SWO0u0zf7JPUUhjxENV9DlVXiEGYWD6MnZfKpJGFs0jZbzKz8kVavR8dyEQSJvmUxP+uyc3eFtJFEFVOYPZd6vUFlcBTprru+m9PWL/7QThyvdbwVzkz3mX7a5UPX7cW0PVRRJG2kkSSbpjWHbUGtuI6hgS3Yno3lWECM6XWo5EcJIx8vNllpL1BfW6JnNiHOoqsJ7KhFKqNRX+ihJWXOnesyP79MHPu4toQclRHr0V+ucbPP7qgUClimz/yiS6EK2UyW1fYZuv0eAhGr7TqtTpdqfgBZNFhuLmE7LQazFZJ6klQiA4gICNTXTtHsrRLELim9BKLDcnue0JcppMoQR3iRie3amFaPjrXG8JjB1MTOA3JiaPlmM4pE124zPWOiKALFfBLLa7LSmeOi83ax1J6nOCgRxoP0bI++fQpZlBnIDNAx55EEEUH0sLwGtmszoNfQM3lsz2KlfRbTaeN4Dl7gQ+AhBCqKoNB1TCSSBJbO2NilszPTxx6SvcD1kF1mpnvIiRg8ETUV4EZtIiHgzMoJhkuDqPIoK10HmS4JNYGWANvxEMUYWU1jKGUEKSClurTNBovNBVzPxPEswkAmIeYBi2bTxo8EVEVn41gBMdbj7nK2Lnulj99x22d6clorFRz/BBhdRqoiDSmi7zpEYgdZkWl0WkixxvpyClUIyBo5FDVAIoua0FDFLKlkDjcwcVyT5VYL13Px/BA/AEUsIUsRfmgSBVDvz1EsGXg9nc4CDGnbby4G5Ttv+vBnPAA52R1/xwWj4z/bf2Fxy9Fzz/Cbpx5kZu4kjV6XoXKJbtdhMFslqclEgk5EiCqm0BM64BFGDm1zjm7fpmN2EAWJMPTRFRUhEjHdNrbXJgotjk7PI4pJNo1niZ1UuGlkz28nRibv3Hfldd7f24+UMzYVcmXpklqtMl7IJti2vkbTrHN2+QxZI4OqaGRSElPrL6TVn8PQ0hiGTDKhkdaKOF6fuZUVbM8hqWqoioQbBCy1Fmn1lvB9i16nj9W3iUMRwSswPrSD3VsOMHdi7f4Pf+CmX7+wOUtnSr/c36hvvTmdOI6mdcnlNEbKOU4tHidlCOQzAoPpDIaWpTowRkIGVUyjSCqOb9Ex+whCCEJI127j+hai6BIGHrZlsby8xuqSRkqZYPPI5fGFG69opRh9IK2Uv3DP3T/95pnZM/GLfoza2+Mbwog7RXxq4jN86v1/gsQT6BmbSGnw9MnHIY5ICHnS4ijryqNUK2nCyKVv2zQ7JrqewPM9WuYSrbZLaBVIiEPk08Okk9ljSSUf6LLxsBwZx/ZfdfDOl3UdytviG+KY55NCQtLeLCXxKc6feJTS+NPoehpJtKkVdxMGMrmMhhe4EEm4XowfeISEGHoWWZZoLJucPHI5o6XFXxby5jWf+OhH7Fdsg+S3xjcAL0EdIxIjeF0E1lCjLhWtR2nAwnP6jAz1McM+oRQQhgJBoNE3C7Q6FZr+Rhy5iBb3uCR3+MnqwOPv+9F3bjnyKoH+GRBAiJ+bxYKAILxkyosFhJiLszPB+syhfXd/79YH/52KKAj/iacUiAUBBOE5dxD/w3ipY8QCj3Um5JmVy7/yvutvUV7z5q82/gYzymhMXWdr9QAAAABJRU5ErkJggg==') }`);
    GM_addStyle(`.msg-chat .emote.Cabge { margin-top: -30px; top: 7.5px; }`);
    GM_addStyle(`.emote.VeryPog_OG { width:32px; height: 30px; background-image: url('https://wikicdn.destiny.gg/0/01/VeryPog.png') }`);
    GM_addStyle(`.msg-chat .emote.VeryPog_OG { margin-top: -30px; top: 7.5px; }`);

    function mutationCallback(mutationsList) {
        for (const mutation of mutationsList) {
            if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                for (const addedNode of mutation.addedNodes) {
                    const textContainer = addedNode.querySelector(".text");
                    textContainer.innerHTML = textContainer.innerHTML.replace(/(^|\s|>)Cabge(?=\s|$|<)/g, '$1<div class="emote Cabge">Cabge</div>');
                    textContainer.innerHTML = textContainer.innerHTML.replace(/(^|\s|>)VeryPog_OG(?=\s|$|<)/g, '$1<div class="emote VeryPog_OG">VeryPog_OG</div>');
                }
            }
        }
    }

    const targetElement = document.getElementById("chat-win-main").querySelector(".chat-lines");

    if (targetElement) {
        const observer = new MutationObserver(mutationCallback);
        observer.observe(targetElement, { childList: true });
    }
})();