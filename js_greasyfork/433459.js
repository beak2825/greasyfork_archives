// ==UserScript==
// @name         AppBar is Back!
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to get appbar
// @author       You
// @match        https://www.youtube.com/*
// @icon         https://www.google.com/s2/favicons?domain=youtube.com
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/433459/AppBar%20is%20Back%21.user.js
// @updateURL https://update.greasyfork.org/scripts/433459/AppBar%20is%20Back%21.meta.js
// ==/UserScript==

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
function navBar(){for(var a=[{text:"Home"},{text:"Trending"},{text:"Subscriptions"}],b=document.createElement("div"),c=document.createElement("ul"),d,e,f=0;f<a.length;f++)d=document.createElement("li"),e=document.createElement("span"),e.href=a[f].href,e.innerHTML=a[f].text,d.appendChild(e),c.appendChild(d);a=document.querySelector('ytd-browse[role="main"][page-subtype="home"]');d=document.querySelector('ytd-browse[role="main"][page-subtype="trending"]');e=document.querySelector('ytd-browse[role="main"][page-subtype="subscriptions"]');
null!==a&&a.appendChild(b).appendChild(c);null!==d&&d.appendChild(b).appendChild(c);null!==e&&e.appendChild(b).appendChild(c);b.className="ytcp-main-appbar";c.className="ytcp-appbar-nav";c.childNodes[0].className="ytcp-nav-home ytcp-nav-item";c.childNodes[1].className="ytcp-nav-trending ytcp-nav-item";c.childNodes[2].className="ytcp-nav-subs ytcp-nav-item";-1===window.location.href.indexOf("/watch?")&&(b=document.querySelector(".ytcp-nav-home"),c=document.querySelector(".ytcp-nav-trending"),a=document.querySelector(".ytcp-nav-subs"),
b.addEventListener("click",navigateToHome),c.addEventListener("click",navigateToTrending),a.addEventListener("click",navigateToSubs))}
function navBarNavigation(){document.body.addEventListener("yt-navigate-finish",function(){navBar();for(var a=$jscomp.makeIterator(document.body.querySelectorAll(".ytcp-main-appbar")),b=a.next();!b.done;b=a.next())b=b.value,b.nextElementSibling&&b.nextElementSibling.remove();a=document.querySelector("[hidden] .ytcp-main-appbar");null!==a&&a.remove();if(-1===window.location.href.indexOf("/watch?")){a=document.querySelector(".ytcp-nav-home");b=document.querySelector(".ytcp-nav-trending");var c=document.querySelector(".ytcp-nav-subs");
a.addEventListener("click",navigateToHome);b.addEventListener("click",navigateToTrending);c.addEventListener("click",navigateToSubs)}})}function makeRoom(){addStyle('[page-subtype="home"] ytd-two-column-browse-results-renderer,[page-subtype="trending"] ytd-two-column-browse-results-renderer,[page-subtype="subscriptions"] ytd-two-column-browse-results-renderer{margin-top:60px!important;} [page-subtype="trending"] tp-yt-app-header{top:60px!important;}')}
function addStyle(a){var b=document.createElement("style");b.textContent=a;document.head.append(b)}
function navigateToHome(){document.querySelector("ytd-app").insertAdjacentHTML("beforeend",'<ytd-guide-entry-renderer class="ytd-guide-entry-renderer navigateToHomeTemp"></ytd-guide-entry-renderer>');createScript('document.querySelector(\'.navigateToHomeTemp\').data = {};\n  document.querySelector(\'.navigateToHomeTemp\').data.navigationEndpoint = {\n    "clickTrackingParams": "CJMBELUsGAAiEwi3y-qlp9bxAhVchuUHHSLSCts=",\n    "commandMetadata": {\n      "webCommandMetadata": {\n        "url": "/",\n        "webPageType": "WEB_PAGE_TYPE_BROWSE",\n        "rootVe": 3854,\n        "apiUrl": "/youtubei/v1/browse"\n      }\n    },\n    "browseEndpoint": {\n      "browseId": "FEwhat_to_watch"\n    }\n  };',"polymerNavigationScript");
document.querySelector(".navigateToHomeTemp").click();document.querySelector(".navigateToHomeTemp").remove();document.querySelector("#polymerNavigationScript").remove()}
function navigateToTrending(){document.querySelector("ytd-app").insertAdjacentHTML("beforeend",'<ytd-guide-entry-renderer class="ytd-guide-entry-renderer navigateToTrendingTemp"></ytd-guide-entry-renderer>');createScript('document.querySelector(\'.navigateToTrendingTemp\').data = {};\n  document.querySelector(\'.navigateToTrendingTemp\').data.navigationEndpoint = {\n    "clickTrackingParams": "CJIBELUsGAEiEwi3y-qlp9bxAhVchuUHHSLSCts=",\n    "commandMetadata": {\n      "webCommandMetadata": {\n        "url": "/feed/trending",\n        "webPageType": "WEB_PAGE_TYPE_BROWSE",\n        "rootVe": 6827,\n        "apiUrl": "/youtubei/v1/browse"\n      }\n    },\n    "browseEndpoint": {\n      "browseId": "FEexplore"\n    }\n  };',"polymerNavigationScript");
document.querySelector(".navigateToTrendingTemp").click();document.querySelector(".navigateToTrendingTemp").remove();document.querySelector("#polymerNavigationScript").remove()}
function navigateToSubs(){document.querySelector("ytd-app").insertAdjacentHTML("beforeend",'<ytd-guide-entry-renderer class="ytd-guide-entry-renderer navigateToSubsTemp"></ytd-guide-entry-renderer>');createScript('document.querySelector(\'.navigateToSubsTemp\').data = {};\n  document.querySelector(\'.navigateToSubsTemp\').data.navigationEndpoint = {\n    "clickTrackingParams": "CJEBELUsGAIiEwi3y-qlp9bxAhVchuUHHSLSCts=",\n    "commandMetadata": {\n      "webCommandMetadata": {\n        "url": "/feed/subscriptions",\n        "webPageType": "WEB_PAGE_TYPE_BROWSE",\n        "rootVe": 6827,\n        "apiUrl": "/youtubei/v1/browse"\n      }\n    },\n    "browseEndpoint": {\n      "browseId": "FEsubscriptions"\n    }\n  };',"polymerNavigationScript");
document.querySelector(".navigateToSubsTemp").click();document.querySelector(".navigateToSubsTemp").remove();document.querySelector("#polymerNavigationScript").remove()}function createScript(a,b){var c=document.body,d=document.createElement("script");d.text=a;d.setAttribute("id",b);c.appendChild(d)}(function(){-1===window.location.href.indexOf("/watch?")&&navBar();navBarNavigation();makeRoom()})();
var styles="\n.ytcp-main-appbar{width:100%;text-align:center;line-height:40px;height:40px;border-bottom:1px solid #e8e8e8;border-left: 1px solid #e8e8e8;background-color:#fff;position:fixed;z-index:2001;font-size:13px;font-family:Roboto,arial,sans-serif}html:not([dark=true]) .ytcp-nav-item{display:inline-block;margin-left:30px}html:not([dark=true]) .ytcp-nav-item span{display:inline-block;color:#666;text-decoration:none;cursor:pointer}html:not([dark=true]) .ytcp-nav-item span:hover{box-shadow:inset 0 -3px #cc181e}html:not([dark=true]) [page-subtype=home] .ytcp-nav-home span,html:not([dark=true]) [page-subtype=subscriptions] .ytcp-nav-subs span,html:not([dark=true]) [page-subtype=trending] .ytcp-nav-trending span{box-shadow:inset 0 -3px #cc181e;color:#333}html:not([dark=true]) .ytcp-appbar-nav{display:inline-block;vertical-align:top;overflow:hidden}html[dark=true] .ytcp-main-appbar{width:100%;text-align:center;line-height:40px;height:40px;background-color:var(--yt-spec-brand-background-primary);position:fixed;z-index:2001;font-size:13px;font-family:Roboto,arial,sans-serif;box-shadow:inset 0 1px #0f0f0f}html[dark=true] .ytcp-nav-item{display:inline-block;margin-left:30px}html[dark=true] .ytcp-nav-item span{display:inline-block;color:#8f8f8f;text-decoration:none;cursor:pointer}html[dark=true] .ytcp-nav-item span:hover{box-shadow:inset 0 -3px #dcdcdc}html[dark=true] [page-subtype=home] .ytcp-nav-home span,html[dark=true] [page-subtype=subscriptions] .ytcp-nav-subs span,html[dark=true] [page-subtype=trending] .ytcp-nav-trending span{box-shadow:inset 0 -3px #dcdcdc;color:#c1c1c1}html[dark=true] .ytcp-appbar-nav{display:inline-block;vertical-align:top;overflow:hidden}.ytcp-load-more-button{margin:20px auto;display:block;height:28px;border-radius:2px;cursor:pointer;font:11px Roboto,arial,sans-serif;padding:0 10px;font-weight:500;outline:0}.ytcp-load-more-button.ytcp-related{margin:0 auto!important}html:not([dark=true]) .ytcp-load-more-button{border:1px solid #d3d3d3;box-shadow:0 1px 0 rgba(0,0,0,.05);background-color:#f8f8f8;color:#333}html:not([dark=true]) .ytcp-load-more-button:hover{border-color:#c6c6c6;background-color:#f0f0f0;box-shadow:0 1px 0 rgba(0,0,0,.1)}html:not([dark=true]) .ytcp-load-more-button:active{border-color:#c6c6c6;background-color:#e9e9e9;box-shadow:inset 0 1px 0 #ddd}html[dark=true] .ytcp-load-more-button{border:0;background-color:#2e2e2e;color:#c1c1c1}html[dark=true] .ytcp-load-more-button:hover{background-color:#353535}html[dark=true] .ytcp-load-more-button:active{background-color:#292929}\n",styleSheet=
document.createElement("style");styleSheet.type="text/css";styleSheet.innerText=styles;document.head.appendChild(styleSheet);