// ==UserScript==
// @name         QQAutoRedirect
// @namespace    chancetop
// @version      0.0.2
// @description  auto redirect url when you click link at qq chat box.
// @author       Felix li
// @match        https://c.pc.qq.com/middlem.html?pfurl=**
// @icon         data:image/png;base64,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
// @grant        none
// @downloadURL https://update.greasyfork.org/scripts/445156/QQAutoRedirect.user.js
// @updateURL https://update.greasyfork.org/scripts/445156/QQAutoRedirect.meta.js
// ==/UserScript==

(function () {
    'use strict';

    var times = 1000;
    while (true && times > 0) {
        if (typeof jQuery == 'undefined') {
            times--;
        } else {
            break;
        }
    }
    var url = window.location.href;

    var index = url.indexOf("pfurl=");
    var end = url.indexOf("&pfuin");
    if (index != -1 && end != -1) {
        var star = index + 6;
        var redirectUrl = url.substring(star, end);
        var decodeUrl = decodeURIComponent(redirectUrl);
        window.location.replace(decodeUrl);
    }
})();