// ==UserScript==
// @name         CSGO2.WIKIé¥°å“æ¡æ¼å¤§å¸ˆ - å…¥æ¡£æ¨¡æ¿å†å²ä»·æ ¼æŸ¥è¯¢
// @namespace    https://github.com/your-github-username/cs-assistant
// @version      6.0.0.2
// @description  CSGO2.WIKI é¥°å“æ¡æ¼å¤§å¸ˆè„šæœ¬è¶…å®ç”¨ï¼èƒ½ä¾æ®æ’è¡Œæ¦œæŸ¥è¯¢å¤šæ¡£æ¬¡é¥°å“æ•°æ®ï¼Œå¿«é€ŸæŒæ¡å†å²ä»·æ ¼ã€‚å¸®ä½ ç²¾å‡†å®šä½æ€§ä»·æ¯”é¥°å“ï¼Œä¸é”™è¿‡ä»»ä½•æ¡æ¼æ—¶æœºï¼Œåœ¨ CSGO2 é¥°å“äº¤æ˜“é‡Œè½»æ¾æŠ¢å å…ˆæœºã€‚
// @author       Jack Mr
// @match        *://*.youpin898.com/*
// @match        *://buff.163.com/*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        none
// @license      MIT
// @run-at       document-start
// @grant        GM_xmlhttpRequest
// @downloadURL https://update.greasyfork.org/scripts/526632/CSGO2WIKI%E9%A5%B0%E5%93%81%E6%8D%A1%E6%BC%8F%E5%A4%A7%E5%B8%88%20-%20%E5%85%A5%E6%A1%A3%E6%A8%A1%E6%9D%BF%E5%8E%86%E5%8F%B2%E4%BB%B7%E6%A0%BC%E6%9F%A5%E8%AF%A2.user.js
// @updateURL https://update.greasyfork.org/scripts/526632/CSGO2WIKI%E9%A5%B0%E5%93%81%E6%8D%A1%E6%BC%8F%E5%A4%A7%E5%B8%88%20-%20%E5%85%A5%E6%A1%A3%E6%A8%A1%E6%9D%BF%E5%8E%86%E5%8F%B2%E4%BB%B7%E6%A0%BC%E6%9F%A5%E8%AF%A2.meta.js
// ==/UserScript==

(function () {
    'use strict';
    let dataList = []; // æˆªå–æ¥å£æ•°æ®
    let urlFlag = '';
    // è·å–å½“å‰é¡µé¢çš„åŸŸå
    const hostname = window.location.hostname;
    // æ ¹æ®ä¸åŒçš„åŸŸåè®¾ç½®ä¸åŒçš„æ ‡å¿—
    if (hostname.includes('youpin898.com')) {
        urlFlag = 'yy';
    }
    if (hostname === 'buff.163.com') {
        urlFlag = 'buff';
    }
    console.log(urlFlag)
    const templatesCollectionT1 = {
        // å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p1': [1, 3, 4, 5, 7, 8, 9, 13, 14, 16, 20, 24, 27, 28, 31, 32, 42, 44, 45, 48, 49, 54, 58, 59, 60, 62, 66, 68, 71, 72, 75, 77, 88, 90, 96, 98, 102, 108, 110, 112, 113, 116, 121, 125, 126, 129, 134, 138, 142, 143, 146, 148, 149, 151, 152, 156, 160, 162, 164, 165, 166, 170, 171, 174, 177, 178, 182, 183, 184, 185, 188, 189, 190, 193, 194, 195, 196, 202, 203, 204, 206, 209, 213, 216, 217, 218, 220, 222, 230, 232, 233, 234, 235, 238, 241, 243, 246, 250, 252, 253, 254, 258, 259, 262, 266, 269, 274, 280, 281, 284, 287, 292, 296, 303, 304, 307, 309, 310, 311, 315, 321, 325, 328, 329, 332, 333, 334, 335, 337, 340, 344, 349, 351, 353, 354, 355, 356, 359, 364, 368, 369, 370, 372, 373, 374, 378, 384, 385, 387, 388, 393, 394, 397, 398, 400, 402, 404, 405, 406, 408, 409, 410, 411, 412, 413, 415, 419, 425, 432, 434, 436, 438, 441, 443, 444, 445, 448, 450, 451, 452, 454, 457, 459, 461, 463, 464, 471, 473, 477, 479, 480, 483, 485, 489, 492, 493, 496, 498, 499, 504, 506, 507, 515, 516, 522, 526, 529, 530, 531, 532, 535, 537, 539, 540, 541, 545, 546, 547, 552, 553, 555, 559, 560, 561, 569, 570, 574, 578, 579, 580, 582, 589, 590, 591, 593, 594, 598, 602, 605, 606, 607, 610, 611, 614, 616, 621, 624, 626, 627, 628, 630, 631, 632, 637, 642, 647, 649, 652, 653, 655, 656, 660, 663, 667, 670, 672, 673, 674, 678, 680, 683, 684, 685, 688, 689, 691, 693, 696, 699, 701, 702, 705, 706, 709, 710, 715, 716, 717, 723, 725, 727, 728, 730, 731, 732, 733, 736, 743, 744, 746, 750, 753, 756, 761, 764, 766, 767, 770, 773, 776, 777, 780, 783, 785, 787, 791, 792, 794, 795, 803, 805, 809, 810, 812, 817, 818, 820, 822, 826, 832, 839, 843, 844, 845, 846, 852, 853, 854, 858, 861, 865, 867, 868, 869, 873, 874, 876, 894, 899, 907, 908, 909, 918, 919, 922, 923, 929, 930, 931, 939, 941, 948, 949, 951, 958, 959, 962, 966, 969, 971, 972, 976, 977, 980, 982, 988, 989, 992, 994, 997, 998, 1000],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p2': [1, 3, 4, 7, 9, 13, 20, 24, 27, 28, 31, 42, 44, 45, 49, 54, 59, 60, 62, 66, 71, 72, 75, 77, 88, 90, 96, 98, 102, 110, 113, 116, 121, 125, 134, 138, 142, 143, 148, 151, 156, 160, 162, 164, 166, 170, 174, 177, 183, 184, 185, 189, 190, 193, 194, 195, 196, 203, 206, 209, 216, 217, 218, 220, 222, 232, 234, 235, 238, 246, 250, 253, 254, 258, 259, 262, 266, 269, 280, 284, 296, 303, 304, 307, 309, 310, 311, 315, 321, 325, 328, 329, 333, 334, 335, 349, 351, 353, 354, 355, 364, 368, 369, 370, 372, 373, 374, 384, 385, 387, 388, 394, 397, 398, 400, 402, 404, 408, 409, 410, 411, 413, 415, 419, 425, 432, 434, 436, 438, 441, 443, 445, 448, 450, 451, 459, 463, 464, 473, 477, 479, 480, 483, 485, 489, 492, 496, 498, 499, 504, 506, 507, 515, 526, 529, 530, 531, 532, 535, 537, 540, 545, 546, 547, 552, 553, 555, 559, 560, 561, 569, 570, 574, 579, 580, 582, 589, 590, 591, 593, 594, 598, 605, 606, 610, 611, 616, 624, 626, 627, 628, 630, 632, 642, 647, 655, 663, 667, 670, 672, 674, 678, 680, 684, 689, 691, 693, 699, 706, 709, 710, 715, 716, 717, 723, 725, 727, 730, 731, 733, 744, 746, 750, 753, 756, 764, 766, 767, 776, 783, 785, 791, 794, 805, 809, 810, 812, 817, 818, 820, 822, 839, 843, 844, 845, 846, 852, 853, 854, 858, 861, 865, 868, 869, 894, 899, 907, 909, 919, 929, 930, 931, 939, 941, 948, 951, 958, 962, 969, 972, 976, 977, 980, 989, 992, 997, 998],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p3': [11, 29, 34, 41, 46, 80, 84, 87, 93, 105, 107, 136, 137, 147, 150, 181, 201, 205, 210, 224, 229, 256, 278, 324, 326, 341, 345, 348, 358, 375, 395, 396, 399, 401, 403, 422, 428, 447, 449, 468, 482, 488, 494, 517, 520, 521, 550, 568, 571, 575, 576, 577, 583, 599, 601, 636, 639, 648, 657, 664, 668, 712, 714, 745, 747, 751, 754, 763, 781, 789, 793, 800, 807, 813, 824, 825, 827, 834, 848, 849, 856, 872, 887, 891, 892, 897, 910, 911, 914, 915, 925, 936, 940, 943, 944, 956, 961, 968, 975, 981],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p4': [11, 29, 34, 41, 46, 80, 84, 87, 93, 105, 107, 136, 137, 147, 150, 181, 201, 205, 210, 224, 229, 256, 278, 324, 326, 341, 345, 348, 358, 375, 392, 395, 396, 399, 401, 403, 422, 428, 447, 449, 468, 482, 488, 494, 517, 520, 521, 525, 550, 568, 571, 575, 576, 577, 583, 599, 601, 636, 639, 648, 657, 664, 668, 712, 714, 745, 747, 751, 754, 763, 781, 789, 793, 800, 807, 813, 824, 825, 827, 834, 848, 849, 856, 872, 887, 891, 892, 897, 910, 911, 914, 915, 925, 936, 940, 943, 944, 956, 961, 968, 975, 981],
        // ä¼½ç›å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p1': [4, 7, 13, 20, 24, 31, 44, 49, 59, 66, 72, 75, 77, 88, 96, 98, 102, 113, 116, 134, 138, 142, 143, 151, 160, 162, 164, 166, 174, 184, 185, 189, 190, 193, 194, 209, 217, 218, 220, 235, 246, 250, 253, 258, 259, 262, 269, 284, 296, 303, 310, 311, 325, 334, 349, 353, 354, 355, 369, 373, 374, 384, 387, 388, 394, 398, 408, 409, 410, 419, 425, 432, 434, 436, 443, 450, 451, 464, 477, 479, 480, 492, 498, 504, 507, 526, 529, 530, 531, 532, 540, 552, 560, 570, 574, 579, 580, 594, 598, 610, 616, 627, 642, 667, 670, 678, 680, 684, 689, 693, 699, 709, 715, 716, 723, 730, 731, 733, 744, 750, 767, 776, 783, 812, 820, 839, 843, 845, 852, 853, 861, 865, 899, 907, 919, 929, 939, 951, 969, 992, 998],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p2': [1, 3, 4, 7, 9, 13, 20, 24, 27, 28, 31, 42, 44, 45, 49, 54, 59, 60, 62, 66, 71, 72, 75, 77, 88, 90, 96, 98, 102, 110, 113, 116, 121, 125, 134, 138, 142, 143, 148, 151, 156, 160, 162, 164, 166, 170, 174, 177, 183, 184, 185, 189, 190, 193, 194, 195, 196, 203, 206, 209, 216, 217, 218, 220, 222, 232, 234, 235, 238, 246, 250, 253, 254, 258, 259, 262, 266, 269, 280, 284, 296, 303, 304, 307, 309, 310, 311, 315, 321, 325, 328, 329, 333, 334, 335, 349, 351, 353, 354, 355, 364, 368, 369, 370, 372, 373, 374, 384, 385, 387, 388, 394, 397, 398, 400, 402, 404, 408, 409, 410, 411, 413, 415, 419, 425, 432, 434, 436, 438, 441, 443, 445, 448, 450, 451, 459, 463, 464, 473, 477, 479, 480, 483, 485, 489, 492, 496, 498, 499, 504, 506, 507, 515, 526, 529, 530, 531, 532, 535, 537, 540, 545, 546, 547, 552, 553, 555, 559, 560, 561, 569, 570, 574, 579, 580, 582, 589, 590, 591, 593, 594, 598, 605, 606, 610, 611, 616, 624, 626, 627, 628, 630, 632, 642, 647, 655, 663, 667, 670, 672, 674, 678, 680, 684, 689, 691, 693, 699, 706, 709, 710, 715, 716, 717, 723, 725, 727, 730, 731, 733, 744, 746, 750, 753, 756, 764, 766, 767, 776, 783, 785, 791, 794, 805, 809, 810, 812, 817, 818, 820, 822, 839, 843, 844, 845, 846, 852, 853, 854, 858, 861, 865, 868, 869, 894, 899, 907, 909, 919, 929, 930, 931, 939, 941, 948, 951, 958, 962, 969, 972, 976, 977, 980, 989, 992, 997, 998],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p3': [11, 29, 34, 41, 46, 80, 84, 87, 93, 105, 107, 136, 137, 147, 150, 181, 201, 205, 210, 224, 229, 256, 278, 324, 326, 341, 345, 348, 358, 375, 395, 396, 399, 401, 403, 422, 428, 447, 449, 468, 482, 488, 494, 517, 520, 521, 550, 568, 571, 575, 576, 577, 583, 599, 601, 636, 639, 648, 657, 664, 668, 712, 714, 745, 747, 751, 754, 763, 781, 789, 793, 800, 807, 813, 824, 825, 827, 834, 848, 849, 856, 872, 887, 891, 892, 897, 910, 911, 914, 915, 925, 936, 943, 944, 956, 961, 968, 975, 981],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p4': [11, 29, 34, 41, 46, 80, 84, 87, 93, 105, 107, 136, 137, 147, 150, 181, 201, 205, 210, 224, 229, 256, 278, 324, 326, 341, 345, 348, 358, 375, 395, 396, 399, 401, 403, 422, 428, 447, 449, 468, 482, 488, 494, 517, 520, 521, 550, 568, 571, 575, 576, 577, 583, 599, 601, 636, 639, 648, 657, 664, 668, 712, 714, 745, 747, 751, 754, 763, 781, 789, 793, 800, 807, 813, 824, 825, 827, 834, 848, 849, 856, 872, 887, 891, 892, 897, 910, 911, 914, 915, 925, 936, 943, 944, 956, 961, 968, 975, 981],
        // æ¸å˜å¤§ç†çŸ³ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | æ¸å˜å¤§ç†çŸ³': [5, 8, 14, 16, 28, 32, 48, 58, 68, 108, 112, 121, 126, 129, 146, 149, 152, 156, 165, 171, 177, 178, 182, 188, 202, 204, 206, 213, 230, 233, 238, 241, 243, 252, 274, 281, 287, 292, 332, 337, 340, 344, 356, 359, 370, 372, 378, 393, 405, 406, 412, 444, 452, 454, 457, 461, 471, 493, 499, 516, 522, 539, 541, 545, 546, 553, 559, 578, 589, 591, 602, 607, 614, 621, 628, 631, 632, 637, 649, 652, 653, 655, 656, 660, 672, 673, 683, 685, 688, 696, 701, 702, 705, 706, 725, 728, 732, 736, 743, 761, 764, 766, 770, 773, 777, 780, 787, 791, 792, 795, 803, 817, 826, 832, 844, 854, 858, 867, 868, 873, 874, 876, 908, 918, 922, 923, 949, 959, 966, 971, 972, 977, 982, 988, 994, 997, 1000],
        'è¿åŠ¨æ‰‹å¥—ï¼ˆâ˜…ï¼‰ | å¤§å‹çŒç‰©': [921, 203, 653, 817, 705],
        'æ²™æ¼ ä¹‹é¹° | çƒ­å¤„ç†': [843, 347, 66, 308, 772, 792, 461, 69, 259, 328, 704, 990],
        'å»“å°”å–€åˆ€ï¼ˆâ˜…ï¼‰ | è¡¨é¢æ·¬ç«': [398, 838, 652, 371, 182, 494],
    };
    const templatesCollectionT2 = {
        // å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        //   'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p1': [],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p2': [5, 8, 14, 15, 16, 17, 32, 35, 39, 48, 55, 58, 68, 70, 74, 83, 86, 92, 99, 100, 101, 106, 108, 112, 119, 120, 122, 123, 124, 126, 127, 128, 129, 131, 132, 133, 135, 140, 144, 146, 149, 152, 153, 158, 159, 165, 169, 171, 178, 180, 182, 186, 188, 197, 198, 199, 202, 204, 208, 213, 219, 221, 225, 226, 230, 231, 233, 237, 239, 241, 242, 243, 244, 245, 247, 248, 252, 261, 263, 264, 265, 268, 274, 275, 279, 281, 286, 287, 288, 290, 292, 305, 306, 316, 317, 320, 330, 331, 332, 337, 338, 339, 340, 344, 350, 352, 356, 359, 360, 362, 366, 371, 378, 383, 386, 391, 393, 405, 406, 407, 412, 417, 418, 420, 423, 426, 444, 452, 454, 456, 457, 460, 461, 467, 469, 471, 472, 474, 476, 478, 484, 490, 493, 495, 497, 500, 501, 502, 503, 505, 509, 510, 516, 519, 522, 523, 524, 534, 539, 541, 542, 544, 548, 551, 557, 558, 562, 563, 565, 578, 581, 585, 595, 600, 602, 603, 607, 609, 614, 615, 618, 620, 621, 622, 623, 625, 631, 634, 637, 638, 643, 646, 649, 650, 652, 653, 656, 659, 660, 669, 671, 673, 675, 679, 681, 682, 683, 685, 688, 692, 694, 696, 701, 702, 704, 705, 708, 711, 713, 720, 721, 728, 732, 736, 739, 743, 748, 755, 761, 768, 770, 771, 772, 773, 775, 777, 779, 780, 784, 787, 788, 792, 795, 796, 803, 816, 826, 832, 836, 855, 857, 859, 862, 867, 871, 873, 874, 876, 882, 883, 890, 893, 896, 908, 913, 918, 922, 923, 926, 927, 928, 935, 937, 938, 945, 949, 952, 954, 959, 965, 966, 971, 973, 982, 983, 985, 986, 987, 988, 994, 999, 1000],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p3': [6, 12, 18, 21, 22, 30, 33, 37, 43, 64, 73, 76, 79, 89, 94, 103, 104, 109, 111, 117, 130, 141, 145, 154, 155, 157, 161, 168, 172, 173, 176, 179, 187, 191, 211, 212, 223, 227, 236, 249, 260, 273, 276, 277, 282, 283, 285, 289, 293, 295, 299, 302, 308, 312, 313, 314, 323, 336, 357, 361, 376, 377, 380, 381, 382, 389, 392, 416, 421, 424, 429, 430, 433, 435, 440, 442, 446, 455, 458, 462, 465, 466, 481, 486, 487, 491, 508, 511, 512, 513, 514, 518, 525, 527, 528, 536, 538, 549, 556, 564, 566, 572, 573, 584, 586, 587, 588, 592, 596, 597, 604, 608, 612, 633, 640, 645, 651, 654, 658, 661, 665, 666, 686, 687, 690, 697, 698, 703, 719, 726, 737, 740, 742, 749, 752, 757, 758, 759, 760, 762, 769, 774, 782, 790, 798, 802, 804, 806, 808, 811, 815, 821, 835, 838, 840, 851, 860, 863, 864, 866, 875, 878, 881, 884, 886, 895, 898, 901, 902, 916, 917, 921, 933, 942, 953, 955, 960, 974, 978, 979, 984, 990, 991, 993, 995],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p4': [6, 12, 18, 21, 22, 30, 33, 37, 43, 64, 73, 76, 79, 89, 94, 103, 104, 109, 111, 117, 130, 141, 145, 154, 155, 157, 161, 168, 172, 173, 176, 179, 187, 191, 211, 212, 223, 227, 236, 249, 260, 273, 276, 277, 282, 283, 285, 289, 293, 295, 299, 302, 308, 312, 313, 314, 323, 336, 357, 361, 376, 377, 380, 381, 382, 389, 416, 421, 424, 429, 430, 433, 435, 440, 442, 446, 455, 458, 462, 465, 466, 481, 486, 487, 491, 508, 511, 512, 513, 514, 518, 525, 527, 528, 536, 538, 549, 556, 564, 566, 572, 573, 584, 586, 587, 588, 592, 596, 597, 604, 608, 612, 633, 640, 645, 651, 654, 658, 661, 665, 666, 686, 687, 690, 697, 698, 703, 719, 726, 737, 740, 742, 749, 752, 757, 758, 759, 760, 762, 769, 774, 782, 790, 798, 802, 804, 806, 808, 811, 815, 821, 835, 838, 840, 851, 860, 863, 864, 866, 875, 878, 881, 884, 886, 895, 898, 901, 902, 916, 917, 921, 933, 942, 953, 955, 960, 974, 978, 979, 984, 990, 991, 993, 995],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’çº¢å®çŸ³': [4, 7, 39, 60, 86, 106, 110, 116, 125, 132, 151, 185, 194, 196, 202, 218, 222, 226, 253, 325, 328, 354, 360, 374, 383, 384, 422, 436, 464, 478, 480, 487, 507, 540, 551, 555, 560, 560, 570, 598, 621, 646, 659, 667, 678, 681, 693, 694, 696, 711, 717, 750, 756, 770, 776, 777, 819, 843, 858, 859, 868, 871, 894, 896, 908, 922, 969, 983],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’è“å®çŸ³': [4, 7, 39, 60, 86, 106, 110, 116, 125, 132, 151, 185, 194, 196, 202, 218, 222, 226, 253, 325, 328, 354, 360, 374, 383, 384, 422, 436, 464, 478, 480, 487, 507, 540, 551, 555, 560, 560, 570, 598, 621, 646, 659, 667, 678, 681, 693, 694, 696, 711, 717, 750, 756, 770, 776, 777, 819, 843, 858, 859, 868, 871, 894, 896, 908, 922, 969, 983],
        // ä¼½ç›å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p1': [1, 3, 5, 8, 9, 14, 16, 27, 28, 32, 42, 45, 48, 54, 58, 60, 62, 68, 71, 90, 108, 110, 112, 121, 125, 126, 129, 146, 148, 149, 152, 156, 165, 170, 171, 177, 178, 182, 183, 188, 195, 196, 202, 203, 204, 206, 213, 216, 222, 230, 232, 233, 234, 238, 241, 243, 252, 254, 266, 274, 280, 281, 287, 292, 304, 307, 309, 315, 321, 328, 329, 332, 333, 335, 337, 340, 344, 351, 356, 359, 364, 368, 370, 372, 378, 385, 393, 397, 400, 402, 404, 405, 406, 411, 412, 413, 415, 438, 441, 444, 445, 448, 452, 454, 457, 459, 461, 463, 471, 473, 483, 485, 489, 493, 496, 499, 506, 515, 516, 522, 535, 537, 539, 541, 545, 546, 547, 553, 555, 559, 561, 569, 578, 582, 589, 590, 591, 593, 602, 605, 606, 607, 611, 614, 621, 624, 626, 628, 630, 631, 632, 637, 647, 649, 652, 653, 655, 656, 660, 663, 672, 673, 674, 683, 685, 688, 691, 696, 701, 702, 705, 706, 710, 717, 725, 727, 728, 732, 736, 743, 746, 753, 756, 761, 764, 766, 770, 773, 777, 780, 785, 787, 791, 792, 794, 795, 803, 805, 809, 810, 817, 818, 822, 826, 832, 844, 846, 854, 858, 867, 868, 869, 873, 874, 876, 894, 908, 909, 918, 922, 923, 930, 931, 941, 948, 949, 958, 959, 962, 966, 971, 972, 976, 977, 980, 982, 988, 989, 994, 997, 1000],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p2': [5, 8, 14, 15, 16, 17, 32, 35, 39, 48, 55, 58, 68, 70, 74, 83, 86, 92, 99, 100, 101, 106, 108, 112, 119, 120, 122, 123, 124, 126, 127, 128, 129, 131, 132, 133, 135, 140, 144, 146, 149, 152, 153, 158, 159, 165, 169, 171, 178, 180, 182, 186, 188, 197, 198, 199, 202, 204, 208, 213, 219, 221, 225, 226, 230, 231, 233, 237, 239, 241, 242, 243, 244, 245, 247, 248, 252, 261, 263, 264, 265, 268, 274, 275, 279, 281, 286, 287, 288, 290, 292, 305, 306, 316, 317, 320, 330, 331, 332, 337, 338, 339, 340, 344, 350, 352, 356, 359, 360, 362, 366, 371, 378, 383, 386, 391, 393, 405, 406, 407, 412, 417, 418, 420, 423, 426, 444, 452, 454, 456, 457, 460, 461, 467, 469, 471, 472, 474, 476, 478, 484, 490, 493, 495, 497, 500, 501, 502, 503, 505, 509, 510, 516, 519, 522, 523, 524, 534, 539, 541, 542, 544, 548, 551, 557, 558, 562, 563, 565, 578, 581, 585, 595, 600, 602, 603, 607, 609, 614, 615, 618, 620, 621, 622, 623, 625, 631, 634, 637, 638, 643, 646, 649, 650, 652, 653, 656, 659, 660, 669, 671, 673, 675, 679, 681, 682, 683, 685, 688, 692, 694, 696, 701, 702, 704, 705, 708, 711, 713, 720, 721, 728, 732, 736, 739, 743, 748, 755, 761, 768, 770, 771, 772, 773, 775, 777, 779, 780, 784, 787, 788, 792, 795, 796, 803, 816, 826, 832, 836, 855, 857, 859, 862, 867, 871, 873, 874, 876, 882, 883, 890, 893, 896, 908, 913, 918, 922, 923, 926, 927, 928, 935, 937, 938, 945, 949, 952, 954, 959, 965, 966, 971, 973, 982, 983, 985, 986, 987, 988, 994, 999, 1000],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p3': [6, 12, 18, 21, 22, 30, 33, 37, 43, 64, 73, 76, 79, 89, 94, 103, 104, 109, 111, 117, 130, 141, 145, 154, 155, 157, 161, 168, 172, 173, 176, 179, 187, 191, 211, 212, 223, 227, 236, 249, 260, 273, 276, 277, 282, 283, 285, 289, 293, 295, 299, 302, 308, 312, 313, 314, 323, 336, 357, 361, 376, 377, 380, 381, 382, 389, 416, 421, 424, 429, 430, 433, 435, 440, 442, 446, 455, 458, 462, 465, 466, 481, 486, 487, 491, 508, 511, 512, 513, 514, 518, 525, 527, 528, 536, 538, 549, 556, 564, 566, 572, 573, 584, 586, 587, 588, 592, 596, 597, 604, 608, 612, 633, 640, 645, 651, 654, 658, 661, 665, 666, 686, 687, 690, 697, 698, 703, 719, 726, 737, 740, 742, 749, 752, 757, 758, 759, 760, 762, 769, 774, 782, 790, 798, 802, 804, 806, 808, 811, 815, 821, 835, 838, 840, 851, 860, 863, 864, 866, 875, 878, 881, 884, 886, 895, 898, 901, 902, 916, 917, 921, 933, 942, 953, 955, 960, 974, 978, 979, 984, 990, 991, 993, 995],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p4': [6, 12, 18, 21, 22, 30, 33, 37, 43, 64, 73, 76, 79, 89, 94, 103, 104, 109, 111, 117, 130, 141, 145, 154, 155, 157, 161, 168, 172, 173, 176, 179, 187, 191, 211, 212, 223, 227, 236, 249, 260, 273, 276, 277, 282, 283, 285, 289, 293, 295, 299, 302, 308, 312, 313, 314, 323, 336, 357, 361, 376, 377, 380, 381, 382, 389, 416, 421, 424, 429, 430, 433, 435, 440, 442, 446, 455, 458, 462, 465, 466, 481, 486, 487, 491, 508, 511, 512, 513, 514, 518, 525, 527, 528, 536, 538, 549, 556, 564, 566, 572, 573, 584, 586, 587, 588, 592, 596, 597, 604, 608, 612, 633, 640, 645, 651, 654, 658, 661, 665, 666, 686, 687, 690, 697, 698, 703, 719, 726, 737, 740, 742, 749, 752, 757, 758, 759, 760, 762, 769, 774, 782, 790, 798, 802, 804, 806, 808, 811, 815, 821, 835, 838, 840, 851, 860, 863, 864, 866, 875, 878, 881, 884, 886, 895, 898, 901, 902, 916, 917, 921, 933, 942, 953, 955, 960, 974, 978, 979, 984, 990, 991, 993, 995],
        // æ¸å˜å¤§ç†çŸ³ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | æ¸å˜å¤§ç†çŸ³': [1, 3, 4, 9, 27, 42, 45, 54, 60, 62, 71, 88, 90, 98, 102, 110, 125, 138, 148, 162, 170, 183, 185, 195, 196, 203, 216, 222, 232, 234, 253, 254, 266, 269, 280, 296, 304, 307, 309, 311, 315, 321, 328, 329, 333, 334, 335, 351, 354, 364, 368, 385, 387, 388, 397, 400, 402, 404, 411, 413, 415, 438, 441, 445, 448, 451, 459, 463, 473, 483, 485, 489, 506, 515, 535, 537, 547, 561, 569, 570, 582, 590, 593, 605, 606, 624, 626, 630, 647, 670, 674, 691, 710, 717, 723, 727, 746, 753, 756, 785, 805, 809, 810, 818, 822, 846, 869, 909, 930, 931, 941, 948, 958, 962, 976, 980, 989],
        'è¿åŠ¨æ‰‹å¥—ï¼ˆâ˜…ï¼‰ | å¤§å‹çŒç‰©': [11, 16, 112, 201, 267, 301, 345, 486, 614, 896],
        'æ²™æ¼ ä¹‹é¹° | çƒ­å¤„ç†': [67, 96, 263, 297, 321, 341, 530, 695, 885, 885, 16, 16, 273, 273, 674, 674, 48, 48, 482, 482, 517, 517, 790, 790, 904, 904, 490, 948],
        'å»“å°”å–€åˆ€ï¼ˆâ˜…ï¼‰ | è¡¨é¢æ·¬ç«': [29, 130, 214, 283, 358, 407, 575, 702, 720, 749, 770, 839, 868, 881, 928],
    };
    const templatesCollectionT3 = {
        // å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p1': [15, 17, 35, 39, 55, 70, 74, 83, 86, 92, 99, 100, 101, 106, 119, 120, 122, 123, 124, 127, 128, 131, 132, 133, 135, 140, 144, 153, 158, 159, 169, 180, 186, 197, 198, 199, 208, 219, 221, 225, 226, 231, 237, 239, 242, 244, 245, 247, 248, 261, 263, 264, 265, 268, 275, 279, 286, 288, 290, 305, 306, 316, 317, 320, 330, 331, 338, 339, 350, 352, 360, 362, 366, 371, 383, 386, 391, 407, 417, 418, 420, 423, 426, 456, 460, 467, 469, 472, 474, 476, 478, 484, 490, 495, 497, 500, 501, 502, 503, 505, 509, 510, 519, 523, 524, 534, 542, 544, 548, 551, 557, 558, 562, 563, 565, 581, 585, 595, 600, 603, 609, 615, 618, 620, 622, 623, 625, 634, 638, 643, 646, 650, 659, 669, 671, 675, 679, 681, 682, 692, 694, 704, 708, 711, 713, 720, 721, 739, 748, 755, 768, 771, 772, 775, 779, 784, 788, 796, 816, 836, 855, 857, 859, 862, 871, 882, 883, 890, 893, 896, 913, 926, 927, 928, 935, 937, 938, 945, 952, 954, 965, 973, 983, 985, 986, 987, 999],
        //   'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p2': [],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p3': [2, 10, 19, 23, 25, 26, 36, 38, 40, 47, 50, 51, 52, 53, 56, 57, 61, 63, 65, 67, 69, 78, 81, 82, 85, 91, 95, 97, 114, 115, 118, 139, 163, 167, 192, 200, 207, 214, 215, 228, 240, 251, 255, 257, 267, 270, 271, 272, 291, 294, 297, 298, 300, 301, 318, 319, 322, 327, 342, 343, 346, 347, 363, 365, 367, 379, 390, 414, 427, 431, 437, 439, 470, 475, 453, 533, 543, 554, 567, 613, 617, 619, 629, 635, 644, 662, 676, 695, 700, 707, 718, 722, 724, 729, 734, 735, 738, 741, 765, 778, 786, 797, 799, 801, 814, 819, 823, 828, 829, 830, 831, 833, 837, 841, 842, 847, 850, 877, 879, 880, 885, 888, 889, 900, 903, 904, 905, 906, 912, 920, 924, 932, 934, 946, 947, 950, 957, 963, 964, 967, 970, 996],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’p4': [2, 10, 19, 23, 25, 26, 36, 38, 40, 47, 50, 51, 52, 53, 56, 57, 61, 63, 65, 67, 69, 78, 81, 82, 85, 91, 95, 97, 114, 115, 118, 139, 163, 167, 207, 214, 215, 228, 240, 251, 255, 257, 267, 270, 271, 272, 291, 294, 297, 298, 300, 301, 318, 319, 322, 342, 343, 414, 431, 453, 533, 543, 554, 567, 613, 617, 619, 635, 662, 676, 695, 700, 718, 724, 729, 734, 735, 738, 741, 765, 778, 786, 797, 801, 823, 828, 829, 830, 831, 837, 841, 850, 879, 880, 885, 900, 903, 904, 905, 906, 912, 920, 924, 947, 950, 963, 964, 967, 970, 996],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’çº¢å®çŸ³': [20, 31, 45, 49, 58, 66, 77, 119, 132, 149, 153, 160, 162, 166, 174, 178, 184, 189, 192, 193, 203, 204, 217, 234, 246, 250, 262, 280, 286, 287, 292, 296, 303, 334, 369, 370, 373, 388, 394, 404, 409, 411, 412, 423, 443, 444, 450, 463, 464, 468, 469, 477, 489, 492, 498, 502, 504, 506, 510, 526, 530, 532, 574, 579, 580, 589, 593, 600, 616, 627, 637, 670, 699, 705, 706, 716, 723, 730, 733, 764, 766, 787, 795, 803, 817, 818, 844, 853, 857, 861, 874, 893, 913, 928, 935, 939, 949, 992, 998],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’è“å®çŸ³': [20, 31, 45, 49, 58, 66, 77, 119, 132, 149, 153, 160, 162, 166, 174, 178, 184, 189, 192, 193, 203, 204, 217, 234, 246, 250, 262, 280, 286, 287, 292, 296, 303, 334, 369, 370, 373, 388, 394, 404, 409, 411, 412, 423, 443, 444, 450, 463, 464, 468, 469, 477, 489, 492, 498, 502, 504, 506, 510, 526, 530, 532, 574, 579, 580, 589, 593, 600, 616, 627, 637, 670, 699, 705, 706, 716, 723, 730, 733, 764, 766, 787, 795, 803, 817, 818, 844, 853, 857, 861, 874, 893, 913, 928, 935, 939, 949, 992, 998],
        // ä¼½ç›å¤šæ™®å‹’ç³»åˆ—--åŒ•é¦–
        //   'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p1': [],
        //   'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p2': [],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p3': [2, 10, 19, 23, 25, 26, 36, 38, 40, 47, 50, 51, 52, 53, 56, 57, 61, 63, 65, 67, 69, 78, 81, 82, 85, 91, 95, 97, 114, 115, 118, 139, 163, 167, 175, 207, 214, 215, 228, 240, 251, 255, 257, 267, 270, 271, 272, 291, 294, 297, 298, 300, 301, 318, 319, 322, 342, 343, 414, 431, 453, 533, 543, 554, 567, 613, 617, 619, 635, 641, 662, 676, 695, 700, 718, 724, 729, 734, 735, 738, 741, 765, 778, 786, 797, 801, 823, 828, 829, 830, 831, 837, 841, 850, 879, 880, 885, 900, 903, 904, 905, 906, 912, 920, 924, 947, 950, 963, 964, 967, 970, 996],
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | ä¼½ç›å¤šæ™®å‹’p4': [2, 10, 19, 23, 25, 26, 36, 38, 40, 47, 50, 51, 52, 53, 56, 57, 61, 63, 65, 67, 69, 78, 81, 82, 85, 91, 95, 97, 114, 115, 118, 139, 163, 167, 207, 214, 215, 228, 240, 251, 255, 257, 267, 270, 271, 272, 291, 294, 297, 298, 300, 301, 318, 319, 322, 342, 343, 414, 431, 453, 533, 543, 554, 567, 613, 617, 619, 635, 662, 676, 695, 700, 718, 724, 729, 734, 735, 738, 741, 765, 778, 786, 797, 801, 823, 828, 829, 830, 831, 837, 841, 850, 879, 880, 885, 900, 903, 904, 905, 906, 912, 920, 924, 947, 950, 963, 964, 967, 970, 996],
        // æ¸å˜å¤§ç†çŸ³ç³»åˆ—--åŒ•é¦–
        'çˆªå­åˆ€ï¼ˆâ˜…ï¼‰ | æ¸å˜å¤§ç†çŸ³': [7, 13, 20, 24, 31, 39, 44, 49, 59, 66, 72, 75, 77, 83, 96, 106, 113, 115, 116, 119, 132, 134, 142, 143, 151, 153, 160, 164, 166, 174, 184, 186, 189, 190, 193, 194, 209, 217, 218, 220, 221, 226, 231, 235, 237, 244, 246, 248, 250, 258, 259, 262, 265, 279, 284, 286, 290, 303, 310, 325, 349, 352, 353, 355, 360, 369, 371, 373, 374, 383, 384, 386, 394, 398, 408, 409, 410, 419, 423, 425, 432, 434, 436, 443, 450, 464, 469, 472, 474, 476, 477, 478, 479, 480, 484, 490, 492, 496, 498, 502, 504, 507, 510, 519, 523, 526, 529, 530, 531, 532, 534, 540, 544, 551, 552, 555, 558, 560, 562, 574, 579, 580, 585, 594, 595, 598, 600, 603, 610, 611, 616, 627, 634, 638, 642, 646, 650, 659, 663, 667, 669, 671, 675, 678, 679, 680, 681, 684, 689, 692, 693, 694, 699, 704, 708, 709, 711, 715, 716, 720, 721, 730, 731, 733, 739, 744, 748, 750, 755, 767, 771, 772, 776, 783, 784, 788, 794, 796, 812, 816, 820, 833, 839, 843, 845, 852, 853, 855, 857, 859, 861, 862, 865, 871, 883, 890, 893, 894, 896, 899, 907, 913, 919, 926, 927, 928, 929, 935, 937, 939, 951, 952, 954, 969, 973, 983, 986, 992, 998, 999],
        'è¿åŠ¨æ‰‹å¥—ï¼ˆâ˜…ï¼‰ | å¤§å‹çŒç‰©': [18, 30, 34, 40, 59, 65, 69, 103, 93, 127, 139, 177, 197, 226, 230, 242, 254, 270, 355, 378, 382, 390, 459, 492, 507, 537, 541, 580, 609, 669, 738, 785, 798, 850, 872, 898, 902, 935],
    };
    const templatesCollectionT4 = {
    };

    console.log('è„šæœ¬å·²åˆå§‹åŒ–');

    // æ‹¦æˆª XMLHttpRequest è¯·æ±‚
    const originalXhrOpen = XMLHttpRequest.prototype.open;

    // é‡å†™ XMLHttpRequest çš„ open æ–¹æ³•
    XMLHttpRequest.prototype.open = function (method, url) {
        // queryOnSaleCommodityList æ˜¯uuè·å–åœ¨å”®åˆ—è¡¨çš„æ¥å£
        if (url.includes('queryOnSaleCommodityList')) {
            const originalOnreadystatechange = this.onreadystatechange;
            console.log("===triger!!")
            // ç›‘å¬è¯·æ±‚å®Œæˆåçš„å›è°ƒ
            this.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    // è·å–æ¥å£è¿”å›çš„æ•°æ®
                    const res = JSON.parse(this.responseText);

                    // å­˜å‚¨æ¥å£æ•°æ®ï¼Œå‡è®¾æ¥å£è¿”å›çš„æ•°æ®ç»“æ„é€‚åˆå­˜å‚¨
                    if (res && res.Data) {

                        res.Data.forEach(item => {
                            let obj = {
                                wearValue: item.abrade.replace(/0+$/, '') || '', // å‡è®¾æ¥å£è¿”å›çš„æ•°æ®æœ‰ wearValue å­—æ®µ
                                paintseed: item.paintSeed || '', // å‡è®¾æ¥å£è¿”å›çš„æ•°æ®æœ‰ wearValue å­—æ®µ
                                template: item.dopplerName || '', // å‡è®¾æ¥å£è¿”å›çš„æ•°æ®æœ‰ wearValue å­—æ®µ å¤šæ™®å‹’Pçº§
                                targetName: item.commodityName || '', // å‡è®¾æ¥å£è¿”å›çš„æ•°æ®æœ‰ wearValue å­—æ®µ ç‰©å“å…¨ç§°
                            }
                            dataList.push(obj)
                        });

                        console.log("dataList =====> " + JSON.stringify(dataList));
                    }
                }
                // è°ƒç”¨åŸå§‹çš„ onreadystatechange å›è°ƒ
                if (originalOnreadystatechange) {
                    originalOnreadystatechange.apply(this, arguments);
                }
            };
        }

        // è°ƒç”¨åŸå§‹çš„ open æ–¹æ³•
        originalXhrOpen.apply(this, arguments);
    };

    // æŒ‰é’®å¼¹å‡ºçª—å£
    function showPopup(dataList, goodsName, type) {
        // åˆ›å»ºèƒŒæ™¯é®ç½©
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100%';
        overlay.style.height = '100%';
        overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
        overlay.style.zIndex = '9998';
        overlay.style.transition = 'opacity 0.3s ease-in-out';
        overlay.style.opacity = 0;

        setTimeout(() => overlay.style.opacity = 1, 10); // ä¸ºé®ç½©æ·»åŠ æ¸å˜å‡ºç°æ•ˆæœ

        // åˆ›å»ºå¼¹çª—å®¹å™¨
        const popup = document.createElement('div');
        popup.style.position = 'fixed';
        popup.style.left = '50%';
        popup.style.top = '50%';
        popup.style.transform = 'translate(-50%, -50%) scale(0.8)';
        popup.style.padding = '30px';
        popup.style.backgroundColor = '#ffffff';
        popup.style.borderRadius = '15px';
        popup.style.boxShadow = '0 15px 30px rgba(0, 0, 0, 0.2)';
        popup.style.zIndex = '9999';
        popup.style.maxWidth = '900px';
        popup.style.width = '50%';
        popup.style.fontFamily = 'Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif';
        popup.style.border = 'none';
        popup.style.transition = 'opacity 0.3s ease-in-out, transform 0.3s ease-in-out';
        popup.style.opacity = 0;
        popup.className = 'aaaaapopup'; // æ·»åŠ ç±»åaaaaapopup

        setTimeout(() => {
            popup.style.opacity = 1;
            popup.style.transform = 'translate(-50%, -50%) scale(1)';
        }, 10); // ä¸ºå¼¹çª—æ·»åŠ æ¸å˜å‡ºç°å’Œç¼©æ”¾æ•ˆæœ

        // åˆ›å»ºå†…å®¹å®¹å™¨å¹¶è®¾ç½®æœ€å¤§é«˜åº¦ä¸éšè—æ»šåŠ¨æ¡
        const contentContainer = document.createElement('div');
        contentContainer.style.maxHeight = '600px';
        contentContainer.style.overflow = 'auto'; // å¯ç”¨æ»šåŠ¨
        contentContainer.style.padding = '20px';
        contentContainer.style.fontSize = '16px';
        contentContainer.style.lineHeight = '1.2';

        // éšè—æ»šåŠ¨æ¡ï¼Œä½†æ”¯æŒæ»šåŠ¨
        contentContainer.style.scrollbarWidth = 'none'; // Firefox
        contentContainer.style.msOverflowStyle = 'none'; // IE 10+

        // ä½¿ç”¨ Webkit æ–¹å¼éšè—æ»šåŠ¨æ¡
        contentContainer.style.webkitOverflowScrolling = 'touch'; // å¹³æ»‘æ»šåŠ¨æ•ˆæœ
        const style = document.createElement('style');
        style.innerHTML = `
  /* Webkit æµè§ˆå™¨ */
  .hide-scrollbar::-webkit-scrollbar {
      display: none;
  }
  .hide-scrollbar {
      -ms-overflow-style: none;  /* IE 10+ */
      scrollbar-width: none;  /* Firefox */
  }
  `;
        document.head.appendChild(style);
        contentContainer.classList.add('hide-scrollbar'); // æ·»åŠ æ ·å¼ç±»ä»¥éšè—æ»šåŠ¨æ¡

        // å¼¹çª—å†…å®¹
        let content = `<h3 style="text-align:center; color:#222; font-size: 24px; font-weight: 700; margin-bottom: 25px;">${type === '1' ? 'ç£¨æŸ' : 'æ¨¡æ¿'}ä»·æ ¼æŸ¥è¯¢</h3>`;

        // éå†æ•°æ®åˆ—è¡¨å¹¶ç”Ÿæˆå†…å®¹
        dataList.forEach((data, index) => {
            const isLastItem = index === dataList.length - 1;
            content += `
  <div style="${isLastItem ? '' : 'border-bottom: 1px solid #e5e5e5;'} padding: 20px 0;">
      <p style="color:#273249; font-weight: 600;"><strong>åç§°:</strong> ${goodsName}</p>
      <p style="color:#ff5722; font-weight: 600;"><strong>å›¾æ¡ˆæ¨¡æ¿:</strong> ${data.paintSeed ? data.paintSeed : ''}</p>
      <p style="color:#273249;"><strong>ç£¨æŸ:</strong> ${data.wearFlot}</p>
      <p style="color:#273249; font-weight: 600;"><strong>å°èŠ±:</strong>
        ${data.stickers.length > 0 ? data.stickers.map(sticker => `
            <img src="${sticker.stickerimg}" alt="${sticker.name}" style="width: 32px; height: 32px;">
        `).join('') : '<p style="color:#ff5722; font-weight: 600;">æ— </p>'}
      </p>
      <p style="color:#ff5722; font-weight: 600;"><strong>æˆäº¤ä»·æ ¼:</strong> Â¥${data.tradePrice}</p>
      <p style="color:#273249;"><strong>æˆäº¤æ—¶åœ¨å”®åº•ä»·:</strong> Â¥${data.minSellPrice}</p>
      <p style="color:#273249;"><strong>æˆäº¤æ—¶é—´:</strong> ${new Date(data.tradeTime * 1000).toLocaleString()}</p>
  </div>
  `;
        });

        // å°†å†…å®¹æ·»åŠ åˆ°å†…å®¹å®¹å™¨ä¸­
        contentContainer.innerHTML = content;

        // åˆ›å»ºå…³é—­æ–‡æœ¬
        const closeText = document.createElement('span');
        closeText.innerText = 'å…³é—­';
        closeText.style.position = 'absolute';
        closeText.style.top = '15px';
        closeText.style.right = '15px';
        closeText.style.color = '#273249';
        closeText.style.fontSize = '18px';
        closeText.style.cursor = 'pointer';
        closeText.style.fontWeight = '400';
        closeText.style.transition = 'color 0.3s';

        closeText.addEventListener('mouseenter', () => {
            closeText.style.color = '#666';
        });

        closeText.addEventListener('mouseleave', () => {
            closeText.style.color = '#273249';
        });

        closeText.addEventListener('click', () => {
            popup.style.opacity = 0;
            popup.style.transform = 'translate(-50%, -50%) scale(0.8)';
            overlay.style.opacity = 0;
            setTimeout(() => {
                document.body.removeChild(popup);
                document.body.removeChild(overlay);
            }, 300);
        });

        // å°†å…³é—­æ–‡æœ¬å’Œå†…å®¹å®¹å™¨æ·»åŠ åˆ°å¼¹çª—
        popup.appendChild(contentContainer);
        popup.appendChild(closeText);

        // æ·»åŠ åˆ°é¡µé¢
        document.body.appendChild(overlay);
        document.body.appendChild(popup);
    }

    // å‘é€æŸ¥è¯¢è¯·æ±‚çš„å‡½æ•°
    function sendRequest(wearValue, paintseed, template, type, targetName) {
        // ç¬¬ä¸€ä¸ªæ¥å£çš„URL
        const firstApiUrl = 'https://sdt-api.ok-skins.com/user/skin/v2/skin-info?content=' + wearValue + '&timestamp=' + new Date().getTime();

        // è¯·æ±‚ç¬¬ä¸€ä¸ªæ¥å£
        fetch(firstApiUrl, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'X-App-Version': '1.0.0',
                'X-Currency': 'CNY',
                'X-Device': '1',
                'X-Device-Id': '6ff4f894-4c0a-49a4-935c-2303c4185ecb',
                'Language': 'zh_CN',
                'Origin': 'https://steamdt.com',
                'Referer': 'https://steamdt.com/',
            }
        })
            .then(response => response.json()) // è§£æç¬¬ä¸€ä¸ªæ¥å£çš„å“åº”
            .then(firstApiData => {

                // éå†ç¬¬ä¸€ä¸ªæ¥å£è¿”å›çš„æ•°ç»„ï¼Œå¯»æ‰¾åŒ¹é…çš„åç§°
                const matchedItem = firstApiData?.data?.find(item => item.assetDetail?.classInfo?.name === targetName);

                if (matchedItem) {
                    const itemId = matchedItem.assetDetail.classInfo.itemId; // è·å– itemId
                    const goodsName = matchedItem.assetDetail.classInfo.name; // è·å– goodsName

                    // ç¬¬äºŒä¸ªæ¥å£çš„URL
                    const secondApiUrl = 'https://sdt-api.ok-skins.com/item/trade/v1/list?timestamp=' + new Date().getTime();

                    const headers = {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'X-App-Version': '1.0.0',
                        'X-Currency': 'CNY',
                        'X-Device': '1',
                        'X-Device-Id': '6ff4f894-4c0a-49a4-935c-2303c4185ecb',
                        'Language': 'zh_CN',
                        'Origin': 'https://steamdt.com',
                        'Referer': 'https://steamdt.com/',
                    };

                    const requestData = {
                        paintSeed: paintseed ? [paintseed] : [], // ä¼ å…¥ paintseed æ•°æ®
                        specialStyles: template ? [template] : [], // ä¼ å…¥ template æ•°æ®
                        style: template ? [template] : [], // ä¼ å…¥ style æ•°æ®
                        wear: type === '1' ? wearValue : '', // ç£¨æŸå­—æ®µ
                        pageSize: 20,
                        itemId: itemId,
                        sortBy: "tradeTime",
                        sortType: "desc",
                        styles: "",
                        paintIndex: [], // æ ¹æ®éœ€æ±‚è°ƒæ•´
                        timestamp: new Date().getTime().toString(), // ä½¿ç”¨å½“å‰æ—¶é—´æˆ³
                    };

                    // ä½¿ç”¨ fetch å‘é€ POST è¯·æ±‚
                    fetch(secondApiUrl, {
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify(requestData),
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data && data.data.list.length > 0) {
                                showPopup(data.data.list, goodsName, type); // ä½¿ç”¨è¿”å›çš„æ•°æ®æ›´æ–°å¼¹çª—
                            }
                        })
                        .catch(error => {
                            console.error('ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚å¤±è´¥:', error);
                        });
                } else {
                    console.error('æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç‰©å“åï¼š', targetName);
                }
            })
            .catch(error => {
                console.error('ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚å¤±è´¥:', error);

            });
    }

    document.addEventListener('DOMContentLoaded', function () {

        const defaultPaintseedList = new Set([]);

        const storedPaintseedList = localStorage.getItem('paintseedList');
        let paintseedList = storedPaintseedList ? new Set(JSON.parse(storedPaintseedList)) : new Set(defaultPaintseedList);
        let refreshIntervalId = null;

        const panel = document.createElement('div');
        panel.style.position = 'fixed';
        panel.style.top = '20px';
        panel.style.right = '20px';
        panel.style.backgroundColor = 'rgba(38, 49, 71, 0.9)';
        panel.style.backdropFilter = 'blur(5px)';   // æ·»åŠ æ¨¡ç³Šæ•ˆæœ
        panel.style.borderRadius = '8px';
        panel.style.color = '#fff';
        panel.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';
        panel.style.padding = '18px';
        panel.style.zIndex = 10000;
        panel.style.maxHeight = '400px';
        panel.style.overflowY = 'auto';
        panel.style.fontFamily = 'Arial, sans-serif';
        panel.innerHTML = `
            <a href="https://csgo2.wiki?from=jianloudashi-plugin" target="_blank">
               <img style="width:50px" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F2fc8821e-eb40-4711-90a8-0e0d8e102d62%2Fd952780c-41d8-4840-b136-157392ce321b%2Fimage_5.png?table=collection&id=2e575e25-51de-4609-9f5e-7370aa9064b8&t=2e575e25-51de-4609-9f5e-7370aa9064b8&width=800&cache=v2" />
            </a>
            <a href="https://csgo2.wiki?from=jianloudashi-plugin" target="_blank" style="color:#fff"><strong>ã€ç‰¹æ®Šæ¨¡æ¿æ¡æ¼å¤§å¸ˆã€‘è‡ªå®šä¹‰é«˜äº®é¢æ¿</strong></a>
            <br><br>
            <strong>è‡ªå®šä¹‰æ¨¡æ¿å†å²è®°å½•:</strong>
            <div id="paintseedList"></div>
            <button id="clearPaintseeds" style="margin-top: 10px; background-color: #ff6b6b; color: #fff; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">æ¸…é™¤å†å²è®°å½•</button>
            <br><br>
            <strong>è‡ªå®šä¹‰æ¨¡æ¿id:</strong>
            <br>
            <input type="text" id="paintseedInput" placeholder="è¾“å…¥ paintseed" style="width: 100%; margin-top: 10px; padding: 5px; border-radius: 5px; border: 1px solid #ccc; color: #000">
            <button id="updatePaintseeds" style="margin-top: 10px; background-color: #F7971D; color: #fff; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">æ›´æ–°ç›®æ ‡æ¨¡æ¿</button>
            <br><br>
            <strong>è‡ªåŠ¨æ“ä½œ:</strong>
            <br>
            <button id="toggleRefresh" style="margin-top: 10px; background-color: #F7971D; color: #fff; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">æ¯5Såˆ·æ–°ä¸€æ¬¡ç›´åˆ°é‡åˆ°è‡ªå®šä¹‰æ¨¡æ¿</button>
        `;
        document.body.appendChild(panel);

        let isPanelHidden = true;
        panel.style.transform = 'translateX(calc(100% + 5px))';
        panel.style.transition = 'transform 0.3s ease';
        panel.style.backgroundColor = 'rgba(247, 151, 49, 0.9)';

        panel.addEventListener('click', (e) => {
            // åªæœ‰å½“ç‚¹å‡»çš„æ˜¯é¢æ¿èƒŒæ™¯è€Œä¸æ˜¯å†…éƒ¨å…ƒç´ æ—¶æ‰è§¦å‘
            if (e.target === panel) {
                if (!isPanelHidden) {
                    // ç§»åŠ¨åˆ°å³è¾¹ç¼˜ï¼Œåªç•™ä¸‹10px
                    panel.style.transform = 'translateX(calc(100% + 5px))';
                    panel.style.transition = 'transform 0.3s ease';
                    panel.style.backgroundColor = 'rgba(247, 151, 49, 0.9)';
                    isPanelHidden = true;
                } else {
                    // æ¢å¤åŸä½
                    panel.style.transform = 'translateX(0)';
                    panel.style.backgroundColor = 'rgba(38, 49, 71, 0.9)';
                    isPanelHidden = false;
                }
            }
        });

        const paintseedDisplay = document.getElementById('paintseedList');
        const clearButton = document.getElementById('clearPaintseeds');
        const updateButton = document.getElementById('updatePaintseeds');
        const paintseedInput = document.getElementById('paintseedInput');
        const toggleRefreshButton = document.getElementById('toggleRefresh');

        let highlightedPaintseeds = new Set(JSON.parse(localStorage.getItem('highlightedPaintseeds') || '[]'));
        updatePanel();

        function processTRElements() {
            let found = false;
            if (urlFlag === 'yy') {
                if (dataList.length <= 0) return found;
                const rows = document.querySelectorAll('tr.ant-table-row');

                rows.forEach((row) => {
                    // é˜²æ­¢é‡å¤å¤„ç†ï¼šæ£€æŸ¥æ˜¯å¦å·²ç»æ·»åŠ è¿‡æŒ‰é’®
                    if (row.querySelector('.view-history-btn') || row.querySelector('.cs-assistant-processed')) {
                        return; // è·³è¿‡å·²å¤„ç†çš„è¡Œ
                    }
                    
                    // æ·»åŠ æ ‡è®°ï¼Œè¡¨ç¤ºè¿™ä¸€è¡Œå·²ç»è¢«å¤„ç†è¿‡
                    row.classList.add('cs-assistant-processed');

                    // æ£€æŸ¥å½“å‰è¡Œæ˜¯å¦åŒ…å«ç£¨æŸå€¼
                    const wearValueDiv = row.querySelector('.wear-degree-num___AbgA1 span');
                    const wearText = wearValueDiv.textContent.trim();
                    const wearMatch = wearText.match(/ç£¨æŸï¼š\s*(\d+\.\d+)/);
                    let wearValue = ''; // ç£¨æŸå€¼
                    if (wearMatch) {
                        wearValue = wearMatch[1];
                    }

                    // dataListçš„ç£¨æŸå€¼åŒ¹é…wearValue
                    const matchedData = dataList.find(item => item.wearValue === wearValue);
                    if (matchedData) {
                        // è·å–doppleråç§°
                        let template = matchedData.template || '';
                        let paintseed = matchedData.paintseed || '';
                        let targetName = matchedData.targetName || '';
                        let topTemplate = '';

                        template = targetName.includes('å¤šæ™®å‹’') ? template.toLowerCase() || '' : '';
                        topTemplate = targetName.replace(/\s*\(.*?\)/g, '').trim() + template;


                        // æ·»åŠ æŸ¥çœ‹å†å²ä»·æ ¼æŒ‰é’®
                        const historyButton = document.createElement('button');
                        historyButton.innerText = 'æŸ¥çœ‹å†å²ä»·æ ¼';
                        historyButton.className = 'view-history-btn';
                        historyButton.style.display = 'block';
                        historyButton.style.cursor = 'pointer';
                        historyButton.style.marginBottom = '6px';
                        historyButton.style.padding = '8px 15px';
                        historyButton.style.backgroundColor = '#F7971D';
                        historyButton.style.border = 'none';
                        historyButton.style.color = '#fff';
                        historyButton.style.borderRadius = '4px';
                        historyButton.style.fontSize = '14px';
                        historyButton.style.transition = 'background-color 0.3s';
                        historyButton.style.width = '130px';

                        // æ‚¬æµ®æ•ˆæœ
                        historyButton.addEventListener('mouseenter', () => {
                            historyButton.style.backgroundColor = '#D0801B';
                        });
                        historyButton.addEventListener('mouseleave', () => {
                            historyButton.style.backgroundColor = '#F7971D';
                        });

                        // æ·»åŠ æŸ¥çœ‹å†å²ä»·æ ¼æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                        historyButton.addEventListener('click', function () {
                            const existingPopups = document.querySelectorAll('.aaaaapopup');
                            existingPopups.forEach(popup => popup.remove());

                            // è°ƒç”¨è¯·æ±‚å‡½æ•°
                            sendRequest(wearValue, '', '', '1', targetName); // ä¼ å…¥ç£¨æŸå€¼å’Œpaintseed
                        });

                        // æ·»åŠ æŒ‰æ¨¡æ¿æŸ¥è¯¢ä»·æ ¼æŒ‰é’®
                        const templateButton = document.createElement('button');
                        templateButton.innerText = 'æŒ‰æ¨¡æ¿æŸ¥è¯¢ä»·æ ¼';
                        templateButton.className = 'view-template-btn';
                        templateButton.style.cursor = 'pointer';
                        templateButton.style.padding = '8px 15px';
                        templateButton.style.backgroundColor = '#F7971D';
                        templateButton.style.border = 'none';
                        templateButton.style.color = '#fff';
                        templateButton.style.borderRadius = '4px';
                        templateButton.style.fontSize = '14px';
                        templateButton.style.transition = 'background-color 0.3s';
                        templateButton.style.width = '130px';

                        // æ‚¬æµ®æ•ˆæœ
                        templateButton.addEventListener('mouseenter', () => {
                            templateButton.style.backgroundColor = '#D0801B';
                        });
                        templateButton.addEventListener('mouseleave', () => {
                            templateButton.style.backgroundColor = '#F7971D';
                        });

                        templateButton.addEventListener('click', function () {
                            const existingPopups = document.querySelectorAll('.aaaaapopup');
                            existingPopups.forEach(popup => popup.remove());

                            // è°ƒç”¨è¯·æ±‚å‡½æ•°
                            sendRequest(wearValue, paintseed, template, '2', targetName); // ä¼ å…¥ç£¨æŸå€¼å’Œpaintseed
                        });
                        // åˆ›å»ºæ˜¾ç¤ºT1/T2çš„div
                        const templateLabel = document.createElement('div');
                        templateLabel.style.marginTop = '5px';
                        templateLabel.style.marginBottom = '5px';
                        templateLabel.style.fontSize = '16px';
                        templateLabel.style.fontWeight = '600';
                        templateLabel.style.backgroundColor = '#fff';
                        templateLabel.style.color = '#fff';
                        templateLabel.style.fontStyle = 'italic';
                        templateLabel.style.textAlign = 'center';
                        templateLabel.style.borderRadius = '4px';
                        templateLabel.style.cursor = 'pointer';
                        templateLabel.addEventListener('click', function () {
                            // ä½¿ç”¨ window.open æ‰“å¼€é“¾æ¥ï¼Œå¹¶æŒ‡å®š '_blank' è¡¨ç¤ºæ–°æ ‡ç­¾é¡µ
                            window.open('https://csgo2.wiki', '_blank');
                        });
                        // æ ¹æ®æ¨¡æ¿å’Œpaintseedåˆ¤æ–­æ˜¯å¦éœ€è¦å˜æ›´èƒŒæ™¯é¢œè‰²
                        if (templatesCollectionT1[topTemplate] && templatesCollectionT1[topTemplate].includes(Number(paintseed))) {
                            row.style.backgroundColor = '#E3BF90'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºé»„è‰²
                            templateLabel.style.backgroundColor = '#273249';
                            templateLabel.style.color = '#fff';
                            templateLabel.innerText = 'wikiæ¦œå•T1ğŸ¥‡'; // æ˜¾ç¤ºT1
                            templateLabel.style.padding = '6px';
                        } else if (templatesCollectionT2[topTemplate] && templatesCollectionT2[topTemplate].includes(Number(paintseed))) {
                            row.style.backgroundColor = '#FFF2E2'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºè“è‰²
                            templateLabel.style.backgroundColor = '#454B58';
                            templateLabel.style.color = '#fff';
                            templateLabel.innerText = 'wikiæ¦œå•T2'; // æ˜¾ç¤ºT2
                            templateLabel.style.padding = '6px';
                        } else if (templatesCollectionT3[topTemplate] && templatesCollectionT3[topTemplate].includes(Number(paintseed))) {
                            templateLabel.style.backgroundColor = '#B3B3B3';
                            templateLabel.innerText = 'wikiæ¦œå•T3'; // æ˜¾ç¤ºT3
                            templateLabel.style.padding = '6px';
                        } else if (templatesCollectionT4[topTemplate] && templatesCollectionT4[topTemplate].includes(Number(paintseed))) {
                            templateLabel.style.backgroundColor = '#DBDBDB';
                            templateLabel.innerText = 'wikiæ¦œå•T4'; // æ˜¾ç¤ºT4
                            templateLabel.style.padding = '6px';
                        } else {
                            row.style.backgroundColor = ''; // ä¸æ»¡è¶³æ¡ä»¶åˆ™æ¢å¤é»˜è®¤èƒŒæ™¯
                        }

                        // è‡ªå®šä¹‰æ¨¡æ¿
                        if (paintseed !== null && paintseedList.has(paintseed)) {
                            row.style.backgroundColor = '#E3BF90'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºé»„è‰²
                            templateLabel.style.backgroundColor = '#273249';
                            templateLabel.style.color = '#fff';
                            let infix = templateLabel.innerText ? "|" : "";
                            templateLabel.innerText = "è‡ªå®šä¹‰æ¨¡æ¿ğŸš©" + infix + templateLabel.innerText; // è‡ªå®šä¹‰æ¨¡æ¿
                            templateLabel.style.padding = '6px';
                            highlightedPaintseeds.add(paintseed);
                            found = true;
                        }

                        // è·å–è¡Œå†…çš„ä¸€ä¸ª td å…ƒç´ ï¼Œå‡è®¾æ˜¯æœ€åä¸€ä¸ª td
                        const lastTd = row.querySelector('td:last-child');
                        if (lastTd) {
                            lastTd.appendChild(templateLabel); // æ·»åŠ æ˜¾ç¤ºT1/T2çš„div
                            lastTd.appendChild(historyButton);
                            lastTd.appendChild(templateButton);
                        }

                        dataList = dataList.filter(item => item.wearValue !== wearValue);
                    }
                });

            }

            // ä¸ºbuffå¹³å°æ·»åŠ æŒ‰é’®
            if (urlFlag === 'buff') {
                addHistoryButtonToRows();
            }

            updatePanel();
            if (found) {
                // playAudioNotification();
            }


            return found;
        }

        function updatePanel() {
            paintseedDisplay.textContent = Array.from(highlightedPaintseeds).join(', ');
            paintseedInput.value = Array.from(paintseedList).join(', ');
            localStorage.setItem('highlightedPaintseeds', JSON.stringify(Array.from(highlightedPaintseeds)));
        }

        clearButton.addEventListener('click', () => {
            highlightedPaintseeds.clear();
            updatePanel();
        });

        updateButton.addEventListener('click', () => {

            const inputValues = paintseedInput.value
                .replace(/ï¼Œ|ã€|\s+/g, ',')
                .split(',')
                .map(item => item.trim())
                .filter(item => item !== '')
                .map(Number)
                .filter(n => !isNaN(n));
            paintseedList = new Set(inputValues);
            highlightedPaintseeds.clear();
            processTRElements();
            updatePanel();
            localStorage.setItem('paintseedList', JSON.stringify(Array.from(paintseedList)));
        });

        toggleRefreshButton.addEventListener('click', () => {

            if (refreshIntervalId) {
                clearInterval(refreshIntervalId);
                refreshIntervalId = null;
                toggleRefreshButton.textContent = "åˆ·æ–°ç›´åˆ°æœ‰æ¼";
                localStorage.setItem('refreshActive', 'false');

            } else {
                let refreshCount = 0;
                const maxRefreshes = 20; // æœ€å¤šåˆ·æ–°20æ¬¡ï¼Œé˜²æ­¢æ— é™åˆ·æ–°
                
                refreshIntervalId = setInterval(() => {
                    refreshCount++;
                    
                    if (!processTRElements()) {
                        if (refreshCount >= maxRefreshes) {
                            clearInterval(refreshIntervalId);
                            refreshIntervalId = null;
                            toggleRefreshButton.textContent = "åˆ·æ–°ç›´åˆ°æœ‰æ¼";
                            localStorage.setItem('refreshActive', 'false');
                            alert('å·²è¾¾åˆ°æœ€å¤§åˆ·æ–°æ¬¡æ•°é™åˆ¶ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥æˆ–è°ƒæ•´è‡ªå®šä¹‰æ¨¡æ¿è®¾ç½®');
                            return;
                        }
                        
                        // å¢åŠ åˆ·æ–°é—´éš”ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›
                        setTimeout(() => {
                            location.reload();
                        }, 1000);
                    } else {
                        clearInterval(refreshIntervalId);
                        refreshIntervalId = null;
                        toggleRefreshButton.textContent = "åˆ·æ–°ç›´åˆ°æœ‰æ¼";
                        localStorage.setItem('refreshActive', 'false');
                        // æ‰¾åˆ°ç›®æ ‡åæ’­æ”¾æç¤ºéŸ³
                        playAudioNotification();
                    }
                }, 8000); // å¢åŠ åˆ°8ç§’é—´éš”ï¼Œå‡å°‘é¢‘ç‡
                toggleRefreshButton.textContent = "åœæ­¢åˆ·æ–°";
                localStorage.setItem('refreshActive', 'true');

            }

        });

        processTRElements();

        const observer = new MutationObserver((mutations) => {
            let shouldProcess = false;
            
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    // åªæœ‰å½“æ·»åŠ çš„èŠ‚ç‚¹ä¸­åŒ…å«æ–°çš„è¡¨æ ¼è¡Œæ—¶æ‰å¤„ç†
                    mutation.addedNodes.forEach(node => {
                        if (node.nodeType === Node.ELEMENT_NODE) {
                            if (node.matches && node.matches('tr.ant-table-row')) {
                                shouldProcess = true;
                            } else if (node.querySelector && node.querySelector('tr.ant-table-row')) {
                                shouldProcess = true;
                            }
                        }
                    });
                }
            });
            
            if (shouldProcess) {
                // ä½¿ç”¨é˜²æŠ–ï¼Œé¿å…é¢‘ç¹è°ƒç”¨
                clearTimeout(window.processTRElementsTimeout);
                window.processTRElementsTimeout = setTimeout(() => {
                    processTRElements();
                }, 100);
            }
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });



        if (localStorage.getItem('refreshActive') === 'true') {
            toggleRefreshButton.click();
        }

        function playAudioNotification() {

            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.start();
            oscillator.stop(audioContext.currentTime + 1);

        }

        // ä¸ºbuffå¹³å°æ·»åŠ æŒ‰é’®åŠŸèƒ½
        function addHistoryButtonToRows() {
            if (urlFlag === 'buff') {
                const rows = document.querySelectorAll('tr');

                rows.forEach(row => {
                    // æ£€æŸ¥å½“å‰è¡Œæ˜¯å¦åŒ…å«ç£¨æŸå€¼
                    const wearValueDiv = row.querySelector('.wear-value');
                    if (wearValueDiv && !row.querySelector('.view-history-btn') && !row.querySelector('.view-template-btn')) {
                        // æ·»åŠ æŸ¥çœ‹å†å²ä»·æ ¼æŒ‰é’®
                        const historyButton = document.createElement('button');
                        historyButton.innerText = 'é¥°å“/å†å²ä»·æ ¼';
                        historyButton.className = 'view-history-btn';
                        historyButton.style.display = 'block';
                        historyButton.style.margin = '5px 10px 5px';
                        historyButton.style.cursor = 'pointer';
                        historyButton.style.padding = '8px 15px';
                        historyButton.style.backgroundColor = '#F7971D';
                        historyButton.style.border = 'none';
                        historyButton.style.color = '#fff';
                        historyButton.style.borderRadius = '4px';
                        historyButton.style.fontSize = '14px';
                        historyButton.style.transition = 'background-color 0.3s';

                        // æ‚¬æµ®æ•ˆæœ
                        historyButton.addEventListener('mouseenter', () => {
                            historyButton.style.backgroundColor = '#ECBB7E';
                        });
                        historyButton.addEventListener('mouseleave', () => {
                            historyButton.style.backgroundColor = '#F7971D';
                        });
                        // è·å–paintseedå€¼
                        const assetInfo = JSON.parse(row.getAttribute('data-asset-info'));
                        const goodsInfo = JSON.parse(row.getAttribute('data-goods-info'));

                        let paintseed = '';
                        let template = '';
                        let targetName = '';
                        let wearValue = null;
                        let topTemplate = '';

                        // è·å–ç£¨æŸå€¼
                        const wearText = wearValueDiv.textContent.trim();
                        const wearMatch = wearText.match(/ç£¨æŸ:\s*(\d+\.\d+)/);
                        if (wearMatch) {
                            wearValue = wearMatch[1];
                        }
                        if (goodsInfo) {
                            targetName = goodsInfo.name || '';
                        }
                        if (assetInfo) {
                            paintseed = assetInfo?.info?.paintseed;
                            template = targetName.includes('å¤šæ™®å‹’') ? assetInfo?.info?.metaphysic?.data?.name?.toLowerCase() || '' : '';
                        }

                        topTemplate = targetName.replace(/\s*\(.*?\)/g, '').trim() + template;

                        // æ·»åŠ æŸ¥çœ‹å†å²ä»·æ ¼æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                        historyButton.addEventListener('click', function () {
                            const existingPopups = document.querySelectorAll('.aaaaapopup');
                            existingPopups.forEach(popup => popup.remove());

                            // è°ƒç”¨è¯·æ±‚å‡½æ•°
                            sendRequest(wearValue, '', '', '1', targetName); // ä¼ å…¥ç£¨æŸå€¼å’Œpaintseed
                        });

                        // æ·»åŠ æŒ‰æ¨¡æ¿æŸ¥è¯¢ä»·æ ¼æŒ‰é’®
                        const templateButton = document.createElement('button');
                        templateButton.innerText = 'æ¨¡æ¿/å†å²ä»·æ ¼';
                        templateButton.className = 'view-template-btn';
                        templateButton.style.marginLeft = '10px';
                        templateButton.style.marginBottom = '10px';
                        templateButton.style.cursor = 'pointer';
                        templateButton.style.padding = '8px 15px';
                        templateButton.style.backgroundColor = '#F7971D';
                        templateButton.style.border = 'none';
                        templateButton.style.color = '#fff';
                        templateButton.style.borderRadius = '4px';
                        templateButton.style.fontSize = '14px';
                        templateButton.style.transition = 'background-color 0.3s';

                        // æ‚¬æµ®æ•ˆæœ
                        templateButton.addEventListener('mouseenter', () => {
                            templateButton.style.backgroundColor = '#ECBB7E';
                        });
                        templateButton.addEventListener('mouseleave', () => {
                            templateButton.style.backgroundColor = '#F7971D';
                        });

                        templateButton.addEventListener('click', function () {
                            const existingPopups = document.querySelectorAll('.aaaaapopup');
                            existingPopups.forEach(popup => popup.remove());

                            // è°ƒç”¨è¯·æ±‚å‡½æ•°
                            sendRequest(wearValue, paintseed, template, '2', targetName); // ä¼ å…¥ç£¨æŸå€¼å’Œpaintseed
                        });
                        // åˆ›å»ºæ˜¾ç¤ºT1/T2çš„div
                        const templateLabel = document.createElement('div');
                        templateLabel.style.padding = '5px';
                        templateLabel.style.marginTop = '5px';
                        templateLabel.style.marginLeft = '10px';
                        templateLabel.style.backgroundColor = '#fff';
                        templateLabel.style.borderRadius = '4px';
                        templateLabel.style.fontSize = '13px';
                        templateLabel.style.fontWeight = '600';
                        templateLabel.style.color = '#fff';
                        templateLabel.style.fontStyle = 'italic';
                        templateLabel.style.textAlign = 'center';
                        templateLabel.style.width = '110px';
                        templateLabel.style.cursor = 'pointer';
                        templateLabel.addEventListener('click', function () {
                            // ä½¿ç”¨ window.open æ‰“å¼€é“¾æ¥ï¼Œå¹¶æŒ‡å®š '_blank' è¡¨ç¤ºæ–°æ ‡ç­¾é¡µ
                            window.open('https://csgo2.wiki', '_blank');
                        });
                        // æ ¹æ®æ¨¡æ¿å’Œpaintseedåˆ¤æ–­æ˜¯å¦éœ€è¦å˜æ›´èƒŒæ™¯é¢œè‰²
                        if (templatesCollectionT1[topTemplate] && templatesCollectionT1[topTemplate].includes(Number(paintseed))) {
                            row.style.backgroundColor = '#E3BF90'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºé»„è‰²
                            templateLabel.style.backgroundColor = '#273249';
                            templateLabel.style.color = '#fff';
                            templateLabel.innerText = 'wikiæ¦œå•T1ğŸ¥‡'; // æ˜¾ç¤ºT1
                        } else if (templatesCollectionT2[topTemplate] && templatesCollectionT2[topTemplate].includes(Number(paintseed))) {
                            row.style.backgroundColor = '#FFF2E2'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºè“è‰²
                            templateLabel.style.backgroundColor = '#454B58';
                            templateLabel.innerText = 'wikiæ¦œå•T2'; // æ˜¾ç¤ºT2
                            templateLabel.style.padding = '6px';
                            templateLabel.style.color = '#fff';
                        } else if (templatesCollectionT3[topTemplate] && templatesCollectionT3[topTemplate].includes(Number(paintseed))) {
                            templateLabel.style.backgroundColor = '#B3B3B3';
                            // row.style.backgroundColor = 'lightgreen'; // æ»¡è¶³æ¡ä»¶åˆ™èƒŒæ™¯å˜ä¸ºç»¿è‰²
                            templateLabel.innerText = 'wikiæ¦œå•T3'; // æ˜¾ç¤ºT3
                            templateLabel.style.padding = '6px';
                        } else if (templatesCollectionT4[topTemplate] && templatesCollectionT4[topTemplate].includes(Number(paintseed))) {
                            templateLabel.style.backgroundColor = '#DBDBDB';
                            templateLabel.innerText = 'wikiæ¦œå•T4'; // æ˜¾ç¤ºT4
                            templateLabel.style.padding = '6px';
                        } else {
                            row.style.backgroundColor = ''; // ä¸æ»¡è¶³æ¡ä»¶åˆ™æ¢å¤é»˜è®¤èƒŒæ™¯
                        }
                        // å°†æŒ‰é’®æ·»åŠ åˆ°å½“å‰è¡Œ
                        row.appendChild(templateLabel); // æ·»åŠ æ˜¾ç¤ºT1/T2çš„div
                        row.appendChild(historyButton);
                        row.appendChild(templateButton);
                    }
                });
            }
        }

        // æ¯éš”1ç§’æ£€æŸ¥å¹¶ä¸ºè¡¨æ ¼è¡Œæ·»åŠ æŒ‰é’®
        setInterval(addHistoryButtonToRows, 500); // è¿™æ ·å³ä½¿å®šæ—¶å™¨è¿˜åœ¨è¿è¡Œï¼Œä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡
    });
})();
