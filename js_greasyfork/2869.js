// ==UserScript==
// @name        HP-FC:Punkteabstand
// @author      Nugorra
// @namespace   hpfcpunkteabstand
// @description ein Script zur Anzeige der Punkteabst√§nde im Forum
// @include     https://www.hp-fc.de/forum/
// @version     4.2.2
// @grant       none
// @downloadURL https://update.greasyfork.org/scripts/2869/HP-FC%3APunkteabstand.user.js
// @updateURL https://update.greasyfork.org/scripts/2869/HP-FC%3APunkteabstand.meta.js
// ==/UserScript==
var current,nextPoints,textSave = "";
var addedStyle = [];

var svgs = {
    gryffindor: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001"><path d="M390.483,187.497l-20.226-45.339c-4.775-10.705-13.968-18.726-25.222-22.009c-16.515-4.818-34.174,1.462-43.941,15.624 l-6.089,8.829c-5.072,7.353-13.432,11.744-22.365,11.744h-27.372c-8.932,0-17.293-4.39-22.365-11.744l-6.089-8.829 c-9.767-14.161-27.423-20.44-43.942-15.624c-11.252,3.283-20.445,11.304-25.221,22.008l-20.229,45.34 c-11.487,25.75-3.928,55.776,18.383,73.016c2.808,2.169,6.653,2.41,9.708,0.603l15.967-9.436l-1.216,6.349 c-5.562,29.05,4.196,59.103,25.524,79.372c2.035,26.554,24.276,47.542,51.344,47.542h23.638c27.066,0,49.307-20.989,51.344-47.542 c21.328-20.271,31.087-50.323,25.524-79.374l-1.216-6.348l15.967,9.436c3.055,1.805,6.901,1.566,9.708-0.603 C394.412,243.272,401.971,213.248,390.483,187.497z M270.774,367.61h-23.638c-17.352,0-31.714-13.001-33.883-29.771l45.703-30.88 l45.703,30.88C302.488,354.609,288.126,367.61,270.774,367.61z M258.954,284.491L240.2,266.506 c-0.185-0.177-0.617-0.592-0.298-1.386c0.319-0.794,0.918-0.794,1.174-0.794h35.759c0.257,0,0.855,0,1.175,0.794 c0.318,0.794-0.114,1.208-0.299,1.384L258.954,284.491z M365.809,242.999l-27.098-16.012c-2.933-1.733-6.611-1.587-9.396,0.373 c-2.787,1.961-4.166,5.372-3.526,8.718l4.828,25.21c4.23,22.091-2.603,44.913-17.932,61.053l-39.984-27.016l17.009-16.309 c5.511-5.285,7.232-13.278,4.383-20.362c-2.847-7.085-9.622-11.663-17.258-11.663h-35.759c-7.634,0-14.41,4.577-17.257,11.661 c-2.849,7.084-1.129,15.078,4.382,20.363l17.009,16.309l-39.984,27.016c-15.329-16.141-22.162-38.962-17.932-61.053l4.828-25.21 c0.641-3.347-0.738-6.758-3.526-8.718c-1.491-1.049-3.237-1.579-4.988-1.579c-1.52,0-3.045,0.4-4.408,1.205l-27.098,16.012 c-12.57-12.636-16.275-31.788-8.845-48.441l20.229-45.34c2.696-6.045,7.888-10.575,14.243-12.43 c9.329-2.72,19.301,0.826,24.82,8.824l6.089,8.829c8.307,12.045,22.002,19.237,36.634,19.237h27.372 c14.631,0,28.327-7.192,36.634-19.237l6.089-8.828c5.516-7.998,15.485-11.547,24.818-8.824c6.356,1.854,11.548,6.385,14.244,12.43 l20.229,45.339C382.084,211.211,378.379,230.364,365.809,242.999z"/><path d="M492.882,286.797c-10.824-56.935-29.842-109.913-50.269-155.117l22.809-42.005c7.277-13.401,6.14-29.322-2.965-41.55 c-9.125-12.251-24.086-17.91-39.039-14.77c-12.882,2.704-22.536,6.462-28.017,8.928c-11.226-16.276-27.26-28.928-45.797-35.96 c-20.643-7.832-43.584-8.408-64.595-1.619l-29.009,9.372l-29.009-9.372c-21.009-6.788-43.95-6.213-64.595,1.619 c-18.535,7.032-34.571,19.685-45.797,35.96c-5.482-2.467-15.136-6.224-28.018-8.928c-14.953-3.139-29.914,2.52-39.037,14.771 c-9.108,12.228-10.242,28.149-2.965,41.55l22.809,42.005c-20.427,45.203-39.445,98.183-50.269,155.117 c-7.281,38.298,12.109,77.134,47.151,94.442c100.891,49.833,167.206,95.721,181.943,125.897c1.454,2.976,4.476,4.864,7.788,4.864 c3.312,0,6.334-1.887,7.788-4.864c14.737-30.175,81.053-76.063,181.942-125.897C480.774,363.931,500.162,325.094,492.882,286.797z M426.98,50.319c8.391-1.761,16.457,1.289,21.575,8.16c5.1,6.848,5.71,15.418,1.635,22.924l-16.701,30.758 c-9.825-20.326-19.738-38.77-29.021-54.916C409.287,55.212,417.005,52.413,426.98,50.319z M61.811,81.403 c-4.076-7.506-3.465-16.076,1.635-22.923c5.117-6.871,13.183-9.922,21.573-8.16c9.979,2.095,17.694,4.894,22.514,6.928 c-9.284,16.145-19.196,34.588-29.021,54.915L61.811,81.403z M438.054,365.698c-67.854,33.516-151.2,80.397-182.054,121.378 C225.145,446.094,141.8,399.212,73.946,365.698c-28.087-13.873-43.63-44.987-37.797-75.663 c18.106-95.254,59.877-179.429,91.728-233.269c9.252-15.638,23.694-27.796,40.667-34.236c9.125-3.462,18.796-5.2,28.474-5.2 c8.325,0,16.655,1.286,24.645,3.868l31.672,10.233c1.731,0.559,3.598,0.559,5.329,0l31.672-10.233 c17.276-5.582,36.141-5.109,53.119,1.332c16.974,6.439,31.416,18.598,40.667,34.236c31.853,53.84,73.622,138.015,91.73,233.268 C481.684,320.711,466.14,351.824,438.054,365.698z"/><path d="M209.225 198.43l-14.749-6.413c-4.391-1.909-9.497.104-11.404 4.493-1.908 4.39.103 9.496 4.493 11.405l14.749 6.413c1.126.489 2.297.721 3.451.721 3.347 0 6.534-1.95 7.953-5.213C215.626 205.445 213.615 200.339 209.225 198.43zM331.882 196.511c-1.908-4.389-7.016-6.402-11.404-4.492l-14.748 6.413c-4.39 1.909-6.401 7.015-4.493 11.404 1.42 3.265 4.606 5.213 7.953 5.213 1.153 0 2.326-.232 3.451-.721l14.748-6.413C331.779 206.005 333.79 200.9 331.882 196.511z"/></svg>',
    ravenclaw: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 739.34 739.34"><path d="M671.613,550.213c-0.328-1.006-32.922-102.904-32.922-325.654c0-30.131-6.632-59.346-19.718-86.834 c-12.564-26.394-30.51-51.687-53.339-71.97C519.091,24.399,457.341,0,391.75,0h-44.444c-65.583,0-127.341,24.399-173.884,65.754 c-22.829,20.283-40.774,44.765-53.339,71.159c-13.085,27.488-19.718,57.113-19.718,87.244c0,110.712-8.991,193.691-16.532,243.636 c-8.172,54.105-16.45,82.51-16.524,82.777l-3.625,12.215l10.629,6.967c3.26,2.129,16.093,9.088,44.184,9.088 c10.845,0,22.739-1.049,35.527-3.133c0.067,12.459-1.213,31.172-6.997,54.307l-8.217,32.848l31.262-13.004 c1.266-0.529,27.503-11.5,58.862-28.984c4.421,5.434,9.192,10.658,14.313,15.623c25.88,25.076,58.281,41.504,93.474,47.809 c3.32,5.523,6.379,10.666,9.148,15.311c3.632,6.096,6.766,11.359,9.49,15.832l14.537,23.893l14.537-23.893 c2.725-4.48,5.865-9.742,9.49-15.84c2.791-4.689,5.88-9.877,9.237-15.459c34.864-6.416,66.953-22.785,92.625-47.652 c5.129-4.965,9.899-10.189,14.313-15.623c31.359,17.477,57.604,28.455,58.862,28.984l31.262,13.002l-8.217-32.846 c-5.784-23.135-7.064-41.84-6.997-54.301c12.787,2.084,24.682,3.143,35.527,3.143l0,0c28.091,0,40.923-6.953,44.184-9.082 l10.935-7.145L671.613,550.213z M258.574,603.113c-7.465-8.59-13.889-18.059-19.062-28.219 c-6.982-13.688-11.708-28.635-13.711-44.385c9.498,9.707,19.36,20.908,29.558,33.584c3.215,3.998,6.461,8.121,9.743,12.408 c3.692,4.824,7.339,9.723,10.927,14.656c12.029,16.531,23.387,33.473,33.696,49.521 C289.881,631.971,272.426,619.049,258.574,603.113z M499.545,574.902c-5.181,10.16-11.597,19.621-19.062,28.217 c-13.599,15.646-30.682,28.383-50.079,37.092c10.153-15.795,21.318-32.424,33.123-48.68c3.67-5.055,7.406-10.078,11.188-15.021 c3.186-4.16,6.342-8.172,9.461-12.064c9.988-12.432,19.65-23.463,28.962-33.049C511.082,546.826,506.4,561.467,499.545,574.902z M511.589,486.23c-17.091,14.447-34.933,33.256-53.704,56.598c-3.372,4.191-6.767,8.516-10.197,12.996 c-3.581,4.676-7.108,9.408-10.585,14.174c-20.834,28.545-39.644,58.102-54.619,82.621c-3.789,6.207-7.339,12.094-10.614,17.559 c-0.662,1.109-1.325,2.211-1.965,3.281c-0.64-1.07-1.295-2.166-1.958-3.273c-3.26-5.441-6.803-11.314-10.577-17.5 c-15.058-24.652-33.994-54.412-54.969-83.113c-3.372-4.615-6.796-9.207-10.272-13.748c-3.543-4.629-7.049-9.096-10.525-13.412 c-18.891-23.439-36.837-42.301-54.024-56.732c-4.994-4.191-9.922-8.01-14.79-11.457c-5.069-3.588-10.063-6.779-15.006-9.572 c-3.685-2.084-7.332-3.951-10.949-5.596c4.176-7.578,11.895-19.234,23.395-32.811c6.066-7.16,11.812-13.221,17.008-18.17 c9.937-9.469,17.849-14.865,22.077-16.1c20.097-5.881,33.145-18.572,44.652-29.766c4.228-4.109,8.24-7.994,12.513-11.545 c0.305-0.253,0.603-0.521,0.908-0.767c4.466-3.632,9.074-7.756,13.941-12.125c14.299-12.817,33.875-30.384,47.98-30.384 l0.61,0.007l0.61-0.007c14.105,0,33.688,17.559,47.987,30.384c4.868,4.369,9.476,8.493,13.941,12.125 c0.499,0.41,0.982,0.834,1.474,1.25c4.057,3.424,7.912,7.138,11.947,11.068c11.507,11.194,24.548,23.886,44.652,29.767 c3.796,1.109,10.547,5.566,19.069,13.301c5.947,5.396,12.751,12.393,20.008,20.961c11.5,13.576,19.219,25.232,23.395,32.811 c-3.833,1.74-7.696,3.736-11.604,5.961c-4.942,2.822-9.938,6.045-15.006,9.662C521.511,478.16,516.583,482.01,511.589,486.23z M620.566,544.809c-13.599,0-29.505-2.047-47.295-6.08l-17.053-3.871l-3.401,17.156c-0.209,1.064-3.968,20.76-0.053,52.811 c-7.197-3.572-15.311-7.764-23.818-12.453c12.706-24.152,19.435-51.061,19.435-78.98c0-4.123-0.156-8.225-0.446-12.297 c10.041-6.975,19.554-11.879,28.516-14.67c8.708-2.725,14.283-10.682,14.201-20.291c-0.156-17.291-20.804-44.727-33.107-59.539 c-12.476-15.035-36.54-41.17-57.471-47.295c-11.983-3.506-20.551-11.843-30.473-21.497c-4.86-4.727-9.893-9.625-15.69-14.336 c-3.818-3.104-8.121-5.932-12.677-10.019c-19.419-17.403-43.58-38.043-70.719-38.043c-0.201,0-0.41,0-0.61,0 c-0.201,0-0.41,0-0.61,0c-27.131,0-51.292,20.64-70.712,38.05c-4.556,4.086-8.858,7.428-12.684,10.532 c-5.798,4.712-10.83,9.349-15.69,14.075c-9.922,9.654-18.489,17.857-30.473,21.37c-20.938,6.126-44.995,32.201-57.47,47.236 c-12.296,14.812-32.952,42.219-33.108,59.51c-0.089,9.602,5.486,17.551,14.202,20.268c8.739,2.732,18.013,7.465,27.786,14.172 c-0.312,4.236-0.477,8.5-0.477,12.789c0,27.92,6.729,54.826,19.435,78.98c-8.515,4.689-16.621,8.881-23.818,12.453 c3.915-32.051,0.164-51.746-0.052-52.811l-3.402-17.158l-17.052,3.871c-17.79,4.035-33.696,6.082-47.295,6.082 c-5.821,0-10.555-0.381-14.321-0.908c3.35-14.18,8.254-37.479,13.16-69.76c7.793-51.27,17.075-136.228,17.075-249.62 c0.007-103.269,95.513-187.319,212.91-187.319h44.444c117.396,0,212.902,84.05,212.902,187.305 c0,179.006,20.439,281.484,29.93,319.402C630.868,544.43,626.231,544.809,620.566,544.809z"/><path d="M420.177 371.35L404.39 377.713 404.359 377.721 388.609 384.07 410.143 437.477 425.923 431.111 441.71 424.748 425.469 384.479zM335.188 377.609L319.662 371.35 314.511 384.113 298.128 424.748 313.908 431.111 329.695 437.477 351.221 384.07 335.441 377.713zM563.021 207.833c-59.979-2.255-93.228 17.067-108.598 30.004-2.896 2.188-5.509 4.689-7.764 7.443-1.802 2.01-2.754 3.335-2.955 3.625l.208.142c-.469.722-.923 1.451-1.347 2.196-5.575 9.855-6.535 21.184-2.628 31.083 5.479 13.882 19.666 22.851 36.146 22.851l0 0c5.939 0 11.835-1.139 17.514-3.379 21.929-8.657 33.54-31.485 25.881-50.883-1.809-4.578-4.562-8.62-8.039-11.984 18.117-4.518 36.465-5.181 50.593-4.652 7.294.268 13.45-5.426 13.726-12.736C576.025 214.25 570.324 208.101 563.021 207.833zM481.093 270.142c-1.66.655-3.394.998-5.009.998l0 0c-2.844 0-4.325-1.027-4.489-1.325-.186-.759 1.452-4.637 6.722-6.721 1.66-.655 3.395-.998 5.017-.998 2.852 0 4.317 1.027 4.488 1.325C488.008 264.18 486.363 268.058 481.093 270.142zM295.91 244.983l.208-.141c-.275-.395-1.288-1.794-3.141-3.856-2.062-2.486-4.406-4.756-6.997-6.773-4.362-3.744-10.25-8.061-17.894-12.251-24.474-13.413-55.185-19.539-91.285-18.184-7.31.275-13.003 6.416-12.736 13.718.275 7.31 6.431 12.989 13.726 12.736 20.767-.782 37.462 1.37 50.585 4.66-3.468 3.364-6.223 7.398-8.031 11.976-7.659 19.397 3.953 42.226 25.881 50.883 5.679 2.24 11.574 3.379 17.514 3.379 16.472 0 30.667-8.977 36.145-22.859 3.908-9.899 2.948-21.228-2.627-31.083C296.833 246.435 296.379 245.705 295.91 244.983zM263.74 267.083c-1.623 0-3.357-.35-5.017-1.005-5.27-2.077-6.907-5.955-6.721-6.729.164-.29 1.63-1.317 4.481-1.317 1.623 0 3.357.35 5.017 1.005 5.27 2.084 6.908 5.962 6.722 6.729C268.057 266.062 266.583 267.083 263.74 267.083z"/></svg>',
    hufflepuff: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001"><path d="M468.703,169.851c16.707-24.204,26.045-48.263,29.044-74.631c3.806-33.539-10.486-64.032-38.231-81.568 c-29.963-18.937-68.8-18.122-101.35,2.128c-15.107,9.396-29.282,24.029-42.248,43.553c-18.889-3.915-38.891-5.895-59.916-5.895 c-21.025,0-41.028,1.98-59.916,5.895c-12.966-19.523-27.141-34.157-42.247-43.552C121.287-4.47,82.452-5.286,52.487,13.652 C24.742,31.188,10.449,61.681,14.256,95.223c2.997,26.365,12.335,50.424,29.043,74.628C4.622,236.167,1.44,307.409,1.44,328.743 v10.552l9.531,4.529c31.857,15.137,120.607,60.468,148.346,88.083c10.895,10.846,19.549,22.075,27.918,32.934 c18.691,24.253,36.346,47.16,68.765,47.16c32.42,0,50.074-22.907,68.765-47.16c8.369-10.859,17.023-22.088,27.917-32.934 c27.739-27.615,116.49-72.946,148.346-88.083l9.531-4.529v-10.552C510.561,307.409,507.379,236.167,468.703,169.851z M375.804,44.135c21.585-13.428,46.824-14.291,65.871-2.255c16.91,10.688,25.254,28.757,22.893,49.571 c-1.908,16.771-7.212,32.555-16.347,48.381c-18.734-23.551-41.108-42.565-66.729-56.655 c-10.013-5.506-20.537-10.227-31.511-14.212C358.333,57.948,366.976,49.626,375.804,44.135z M70.328,41.88 c19.045-12.038,44.286-11.174,65.872,2.256c8.827,5.49,17.47,13.813,25.822,24.828c-10.975,3.985-21.499,8.705-31.511,14.212 c-25.621,14.091-47.995,33.104-66.729,56.655c-9.135-15.826-14.439-31.609-16.346-48.377 C45.073,70.636,53.416,52.568,70.328,41.88z M35.069,318.394c1.237-28.403,8.358-89.588,44.517-143.634 c10.229-15.29,21.869-28.585,34.86-39.91c28.232,69.042,52.381,169.112,65.574,270.655 C146.369,374.313,63.678,332.428,35.069,318.394z M293.291,450.932c-14.292,18.21-23.552,27.676-37.289,27.676 c-13.739,0-22.997-9.467-37.288-27.676c-0.109-1.156-0.219-2.313-0.331-3.469h75.239 C293.51,448.619,293.399,449.775,293.291,450.932z M297.233,414.07h-82.464c-13.583-113.288-40.24-223.703-72.499-299.256 c31.796-18.605,69.805-27.983,113.731-27.983s81.933,9.378,113.731,27.983C337.473,190.367,310.816,300.782,297.233,414.07z M331.981,405.505c13.193-101.542,37.343-201.613,65.574-270.655c12.991,11.325,24.63,24.62,34.86,39.91 c36.159,54.046,43.279,115.231,44.517,143.634C448.324,332.427,365.634,374.313,331.981,405.505z"/><path d="M382.574 287.579c-11.274 0-20.42 9.214-20.42 20.582s9.145 20.582 20.42 20.582c11.26 0 20.405-9.214 20.405-20.582S393.834 287.579 382.574 287.579zM129.442 287.579c-11.274 0-20.419 9.214-20.419 20.582s9.145 20.582 20.419 20.582c11.26 0 20.405-9.214 20.405-20.582S140.702 287.579 129.442 287.579z"/></svg>',
    slytherin: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512,168.316c0-32.748-10.197-60.547-25.454-74.459C465,51.433,384.513,58.445,313.399,64.651 c-21.366,1.864-41.553,3.623-57.399,3.661c-15.846-0.039-36.033-1.798-57.399-3.661C127.486,58.447,47,51.432,25.454,93.857 C10.197,107.768,0,135.568,0,168.316c0,18.328,3.203,35.096,8.689,48.761C8.249,218.067,8,219.162,8,220.316 c0,46.345,10.999,78.972,33.624,99.746c23.577,21.648,56.672,27.353,92.686,27.353c20.315,0,41.562-1.816,62.548-3.61 c17.084-1.46,34.654-2.952,51.143-3.367v68.273l-29.657,29.657c-3.125,3.124-3.125,8.189,0,11.313 c1.562,1.562,3.609,2.343,5.657,2.343s4.095-0.781,5.657-2.343L256,423.338l26.343,26.343c1.562,1.562,3.609,2.343,5.657,2.343 s4.095-0.781,5.657-2.343c3.125-3.124,3.125-8.189,0-11.313L264,408.711v-68.273c16.489,0.414,34.059,1.906,51.143,3.367 c20.989,1.794,42.229,3.61,62.548,3.61c36.01,0,69.11-5.707,92.686-27.353C493.001,299.288,504,266.66,504,220.316 c0-1.154-0.249-2.248-0.689-3.239C508.797,203.411,512,186.644,512,168.316z M496,168.316c0,19.025-3.834,36.788-10.795,50.014 c-6.016,11.43-13.745,17.986-21.205,17.986s-15.189-6.556-21.205-17.986C435.834,205.103,432,187.341,432,168.316 s3.834-36.788,10.795-50.014c6.016-11.43,13.745-17.986,21.205-17.986s15.189,6.556,21.205,17.986 C492.166,131.528,496,149.29,496,168.316z M26.795,118.302c6.016-11.43,13.745-17.986,21.205-17.986s15.189,6.556,21.205,17.986 C76.166,131.528,80,149.29,80,168.316s-3.834,36.788-10.795,50.014C63.189,229.76,55.46,236.316,48,236.316 s-15.189-6.556-21.205-17.986C19.834,205.103,16,187.341,16,168.316S19.834,131.528,26.795,118.302z M459.555,308.276 c-31.698,29.105-88.305,24.268-143.049,19.587c-17.464-1.493-35.431-3.02-52.506-3.431V180.553 c14.973,0.857,29.093,4.113,41.222,9.561c21.542,9.676,37.5,26.284,47.429,49.364c11.637,27.048,25.999,46.695,42.686,58.394 c10.979,7.697,22.906,11.68,34.545,11.68c4.072,0,8.11-0.488,12.058-1.475c4.286-1.072,6.892-5.415,5.821-9.702 c-1.072-4.287-5.416-6.894-9.702-5.821c-10.816,2.705-22.415,0.013-33.538-7.784c-14.02-9.829-26.874-27.678-37.173-51.616 c-25.167-58.498-78.267-68.392-109.169-68.821c-0.694-0.196-1.423-0.308-2.18-0.308s-1.486,0.112-2.18,0.308 c-30.902,0.43-84.001,10.324-109.169,68.821c-10.299,23.938-23.154,41.787-37.173,51.616c-11.122,7.797-22.72,10.489-33.538,7.784 c-4.288-1.069-8.63,1.535-9.702,5.821c-1.071,4.287,1.535,8.63,5.821,9.702c15.232,3.809,31.783,0.184,46.604-10.206 c16.687-11.699,31.048-31.346,42.686-58.394c9.93-23.08,25.887-39.688,47.429-49.364c12.129-5.448,26.249-8.704,41.222-9.561 v143.879c-17.075,0.411-35.041,1.939-52.506,3.431c-54.744,4.68-111.351,9.518-143.049-19.587 c-15.555-14.282-24.614-35.961-27.462-65.917c6.797,6.367,14.623,9.957,23.017,9.957c26.916,0,48-36.897,48-84 c0-41.76-16.577-75.475-39.094-82.592c9.792-4.638,23.178-7.581,40.32-8.9c30.187-2.323,67.268,0.911,99.984,3.766 c21.426,1.869,41.681,3.632,58.09,3.717c0.054,0.001,0.107,0.008,0.161,0.008c0.177,0,0.36-0.003,0.538-0.004 c0.178,0,0.361,0.004,0.538,0.004c0.054,0,0.107-0.007,0.161-0.008c16.409-0.085,36.665-1.848,58.09-3.717 c32.715-2.854,69.794-6.089,99.984-3.766c17.142,1.319,30.528,4.262,40.32,8.9C432.577,92.84,416,126.555,416,168.316 c0,47.103,21.084,84,48,84c8.394,0,16.22-3.59,23.017-9.957C484.169,272.315,475.111,293.993,459.555,308.276z"/><path d="M464 124.316c-9.731 0-12.542 12.651-13.466 16.809C448.9 148.477 448 158.134 448 168.316s.9 19.839 2.534 27.191c.924 4.157 3.735 16.809 13.466 16.809s12.542-12.651 13.466-16.809c1.634-7.353 2.534-17.009 2.534-27.191s-.9-19.839-2.534-27.191C476.542 136.967 473.731 124.316 464 124.316zM48 212.316c9.731 0 12.542-12.651 13.466-16.809C63.1 188.155 64 178.498 64 168.316s-.9-19.839-2.534-27.191c-.924-4.158-3.735-16.809-13.466-16.809s-12.542 12.651-13.466 16.809C32.9 148.477 32 158.134 32 168.316s.9 19.839 2.534 27.191C35.458 199.664 38.269 212.316 48 212.316z"/></svg>'
};

var infoBox = document.querySelector('[data-house-points]').closest('.boxContent');
var prefix = ".box[data-box-identifier='" + infoBox.parentElement.dataset.boxIdentifier + "']";
var list = infoBox.querySelector('ol');
var currentPoints = list.querySelectorAll('li');
var output = document.createElement('ul');

for (var i = 0; i < currentPoints.length;i++) {
    current = currentPoints[i].dataset;
    if((currentPoints.length - 1) != i) {
        nextPoints = current.housePoints - currentPoints[i+1].dataset.housePoints;
    } else {
        nextPoints = false;
    }
    output.appendChild(buildReturn(i+1,current.houseColor,current.houseName,current.housePoints,nextPoints));
    addedStyle.push({ name: current.houseName.toLowerCase(), color: current.houseColor });
}

var sheet = document.createElement('style');
sheet.innerHTML = buildStyle(addedStyle);
document.body.appendChild(sheet);

list.remove();
infoBox.appendChild(output);

function buildReturn(rank,color,name,own,distance) {
    var li = document.createElement('li');
    li.classList.add(name.toLowerCase());

    addText(li,rank + ". ");

    render_xml(li,svgs[name.toLowerCase()]);

    addText(li,name + ": ");
    addText(li,addDot(own));

    if(distance) {
        addText(li," (+ " + addDot(distance) + ")");
    } else {
        addText(li,"");
    }

    return li;
}

function addText(el, text){
    var element = document.createElement('span');
    var textNode = document.createTextNode(text);
    element.appendChild(textNode);
    el.appendChild(element);
}

function render_xml(el, xml_string){
    var doc = new DOMParser().parseFromString(xml_string, 'application/xml');
    el.appendChild(
        el.ownerDocument.importNode(doc.documentElement, true)
    );
}

function buildStyle(){
    var style = prefix + " ul { display: table;} " + prefix + " ul li { display: table-row; text-align: left;} " + prefix + " ul li svg { display: table-cell; min-width: 20px; max-width: 20px; stroke: #000000; stroke-width:2; transform: translateY(25%); margin: auto 2px; }" + prefix + " ul li span { display: table-cell; }";

    addedStyle.forEach(function(house){
        style = style + " " + prefix + " li." + house.name + " { color: " + house.color + "; }";
        style = style + " " + prefix + " li." + house.name + " svg { fill: " + house.color + "; }";
    });

    return style;
}

function addDot(x){
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}
