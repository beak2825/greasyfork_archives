// ==UserScript==
// @name         TsTools-心流助手 For Spare Warehouse
// @namespace    TsTools.TBR.Spare
// @version      0.1.4
// @description  通过选中文字查询航材库存。心流模式可以一键查询当前IPC页面全部航材航材库存。现已支持福州、厦门两地8个TBR IPC手册选中文字查询库存，和页面批量查询库存。后续将支持A320以及AHM系统
// @author       Johnson-62117
// @match        http://fz787.xiamenair.com:8081/ToolboxRemote.html*
// @match        http://fzng.xiamenair.com:8081/ToolboxRemote.html*
// @match        http://fzmax.xiamenair.com:8081/ToolboxRemote.html*
// @match        http://11.24.134.90:8081/ToolboxRemote.html*
// @match        http://11.24.134.91:8081/ToolboxRemote.html*
// @match        http://11.24.134.92:8081/ToolboxRemote.html*
// @match        http://11.25.134.90:8081/ToolboxRemote.html*
// @match        http://11.25.134.91:8081/ToolboxRemote.html*
// @match        http://11.25.134.92:8081/ToolboxRemote.html*
// @match        http://spare2.xiamenair.com.cn*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// require      file://I:/zx/tsTools/tbrTools.js
// require      file://D:/zx/dev/tstools/tbrTools.js
// @require https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.11.1/sweetalert2.min.js
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle

// @downloadURL https://update.greasyfork.org/scripts/497465/TsTools-%E5%BF%83%E6%B5%81%E5%8A%A9%E6%89%8B%20For%20Spare%20Warehouse.user.js
// @updateURL https://update.greasyfork.org/scripts/497465/TsTools-%E5%BF%83%E6%B5%81%E5%8A%A9%E6%89%8B%20For%20Spare%20Warehouse.meta.js
// ==/UserScript==
!function(){"use strict";const e=document.querySelector('meta[http-equiv="Content-Security-Policy"]');e&&e.parentNode.removeChild(e);GM_addStyle("\n            .swal2-popup {\n            font-size: 105% !important; /* TBR页面弹窗文字太小增加5%的文字大小 */\n        }\n            .flowPnHover:hover {\n            border: 2px solid #FFA07A;\n            transition: border-color 0.3s ease; /* 添加过渡效果，使颜色变化更加平滑 */\n            transform: scale(1.01); /* 将元素放大1%，包括文字 */\n            transform-origin: left;\n        }\n            .spinner {\n                display: inline-block;\n                width: 64px;\n                height: 64px;\n                border: 4px solid rgba(0, 0, 0, 0.1);\n                border-top-color: #000;\n                border-radius: 50%;\n                animation: spin 1s linear infinite;\n\n        }\n\n            @keyframes spin {\n                to { transform: rotate(360deg); }\n        }\n            .button-color {\n                background: transparent !important;\n                margin-bottom:6px !important;\n        }\n            .btnStockNum-0{\n                background: #D3D3D3 !important;\n        }\n            .table-detail,\n            .table-interchange{\n                /*表格居中显示*/\n                margin:auto;\n                width:100%;\n        }\n            .table-detail th,\n            .table-interchange th {\n                text-align: center;\n                background-color: #4da6ff;\n        }\n                /* 使 td 中的第二到第四个单元格靠左对齐 */\n            .table-detail td:nth-child(2),\n            .table-detail td:nth-child(3),\n            .table-detail td:nth-child(4) {\n                text-align: left;\n        }\n\n        /* 使 td 中的其余单元格居中对齐 */\n        .table-detail td,\n        .table-interchange td{\n            text-align: center;\n        }\n        .table-stockDetail-row:hover,\n        .table-interchangeDetail-row:hover {\n            background-color: #f5f5f5;\n        }\n        \n        .span-interCount0{\n            display:none;\n        }\n\n        #div_swal_interchangeInfo {\n            height: 0;\n        }\n        #div_swal_interchangeInfo.show {\n            height: auto;\n        }\n        \n        #span-interchangeDisplayControl {\n            color: #333;\n            font-size: 90%;\n            font-family: 'Arial', sans-serif;\n            border: 1px solid #ccc;\n            background-color: #f9f9f9;\n            border-radius: 4px;\n            cursor: pointer; /* 鼠标变为手指形状 */\n            transition: all 0.3s ease; /* 平滑过渡效果 */\n\n        }\n        \n        #span-interchangeDisplayControl:hover {\n            background-color: #e0e0e0; /* 鼠标悬停时背景颜色变浅 */\n            border-color: #a0a0a0; /* 鼠标悬停时边框颜色变深 */\n        }\n\n        #span-interchangeDisplayControl:active {\n            background-color: #d0d0d0; /* 鼠标点击时背景颜色更深 */\n            border-color: #808080; /* 鼠标点击时边框颜色更深 */\n        }\n\n    ");GM_addStyle('\n    .swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}\n    ');GM_addStyle("\n    html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}html{font-family:sans-serif}.hidden,[hidden]{display:none!important}.pure-img{max-width:100%;height:auto;display:block}\n    .pure-button{display:inline-block;line-height:normal;white-space:nowrap;vertical-align:middle;text-align:center;cursor:pointer;-webkit-user-drag:none;-webkit-user-select:none;user-select:none;box-sizing:border-box}.pure-button::-moz-focus-inner{padding:0;border:0}.pure-button-group{letter-spacing:-.31em;text-rendering:optimizespeed}.opera-only :-o-prefocus,.pure-button-group{word-spacing:-.43em}.pure-button-group .pure-button{letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-button{font-family:inherit;font-size:100%;padding:.5em 1em;color:rgba(0,0,0,.8);border:none transparent;background-color:#e6e6e6;text-decoration:none;border-radius:2px}.pure-button-hover,.pure-button:focus,.pure-button:hover{background-image:linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1))}.pure-button:focus{outline:0}.pure-button-active,.pure-button:active{box-shadow:0 0 0 1px rgba(0,0,0,.15) inset,0 0 6px rgba(0,0,0,.2) inset;border-color:#000}.pure-button-disabled,.pure-button-disabled:active,.pure-button-disabled:focus,.pure-button-disabled:hover,.pure-button[disabled]{border:none;background-image:none;opacity:.4;cursor:not-allowed;box-shadow:none;pointer-events:none}.pure-button-hidden{display:none}.pure-button-primary,.pure-button-selected,a.pure-button-primary,a.pure-button-selected{background-color:#0078e7;color:#fff}.pure-button-group .pure-button{margin:0;border-radius:0;border-right:1px solid rgba(0,0,0,.2)}.pure-button-group .pure-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}.pure-button-group .pure-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px;border-right:none}\n    .pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td{background-color:#f2f2f2}.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}\n    "),window.addEventListener("load",(function(){if(window.location.href.includes("spare2.xiamenair.com.cn")){if(!window.opener){console.log("不是通过子窗口调用什么都不管");var e=sessionStorage.getItem("user");return void console.log(e)}var t=setInterval((function(){if(sessionStorage.getItem("user")){clearInterval(t);var e=sessionStorage.getItem("user");console.log(e),window.opener.postMessage(e,"*")}}),1e3)}}));const t=["AIPC","IPD","doctype:IPC","doctype:PIPC"];var n="",o=window.location.hash,a=!1,r=!0;const s="http://spare2.xiamenair.com.cn/api/proxy/plan-server/plan/pnGeneralInfo/getPnStockInfoDto";var i={pn:"182513-001",grpFlg:"SP-MF"},l=[],c=!0,d="";function w(){var e=window.getSelection().toString();if(!(e.length>=50))return""!==e.trim()&&(e=e.replace(/^\s+|\s+$/g,""),"range"==window.getSelection().type.toLowerCase())?(i.pn=e,v(e),e):void 0}function p(){var e=window.open("http://spare2.xiamenair.com.cn","_blank","width=800,height=600,top=0,left=0,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=no,status=no");window.addEventListener("message",(function(t){if("http://spare2.xiamenair.com.cn"===t.origin){var o=t.data;localStorage.setItem("spareUserInfo",o),this.window.removeEventListener("message"),n=JSON.parse(o).token,Swal.fire({title:"成功",html:`欢迎你，${JSON.parse(o).userName}!工作辛苦了<br>\n                <hr>\n                心流助手启用成功。`,icon:"success",timer:1500,timerProgressBar:!0,showConfirmButton:!1}),e.close()}else console.warn("消息来源不明，拒绝处理！")}))}function m(){c?(flowHelperSwitch.innerHTML='<i class="fa fa-check"></i>&nbsp;心流插件已启用',flowHelperSwitch.style.backgroundColor="rgb(28, 184, 65)",document.addEventListener("mouseup",w),document.addEventListener("keyup",w)):(flowHelperSwitch.innerHTML='<i class="fa fa-times"></i>&nbsp;心流插件已禁用',flowHelperSwitch.style.backgroundColor="grey",document.removeEventListener("mouseup",w),document.removeEventListener("keyup",w))}function u(e){const t=e.includes("-"),n=/\d/.test(e),o=/(?=.*[a-zA-Z])(?=.*\d)/.test(e);return t||n||o}async function h(e){i.pn=l[e].pn,GM_xmlhttpRequest({method:"POST",url:s,headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36 Edg/125.0.0.0",Authorization:n},data:g(),onload:function(t){if(console.log("POST请求响应:",t.responseText),-1!=t.responseText.indexOf("unauthenticated"))return Swal.fire({title:"登录状态过期",text:"用户状态过期，需重新获取登录",icon:"info",timer:4e3,showConfirmButton:!1}),void p();var n=JSON.parse(t.responseText).result;document.querySelectorAll("#"+l[e].pnDiv)[0].innerHTML=`<hr>\n                            福州：${n.fzStockQty}<br>\n                            厦门：${n.xmStockQty}<br>\n                            外站：${n.wzStockQty}<br>\n                            石家庄：${n.sjzStockQty}<br>\n                            合计：${n.totalStockQty}`},onerror:function(e){console.error("POST请求错误:",e)}})}function g(e=i){let t="";for(let n in e)i.hasOwnProperty(n)&&(Array.isArray(i[n])?i[n].forEach(((e,o)=>{t+=`${encodeURIComponent(n)}[]=${encodeURIComponent(e)}&`})):t+=`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}&`);return t.slice(0,-1)}function b(e){e.preventDefault()}async function f(e="182513-001"){let t="",o={grpFlg:"SP-MF",pnStatus:"YSX",filter:e,total:6,pageSize:100,curPage:1};GM_xmlhttpRequest({method:"POST",url:"http://spare2.xiamenair.com.cn/api/proxy/common-server/pn/compare/listByPnPage",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36 Edg/125.0.0.0",Authorization:n,"Content-Type":"application/json"},data:JSON.stringify(o),onload:function(o){if(console.log("POST请求响应:",o.responseText),-1!=o.responseText.indexOf("unauthenticated"))return Swal.fire({title:"登录状态过期",text:"用户状态过期，需重新获取登录",icon:"info",timer:4e3,showConfirmButton:!1}),void p();console.log("返回基本信息");let a=JSON.parse(o.responseText).result;if(a.total>0&&a.records.sort((function(e,t){return e.pn.length-t.pn.length})),a.total>0&&a.records[0].pn==e)return t=a.records[0].pkid,console.log(t),void async function(e=""){let t=[],o=`curPage=1&pageSize=10000&rq.startRow=0&rq.endRow=10000&rq.pivotMode=false&pnPkid=${e}&grpFlg=SP-MF`,a={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36 Edg/125.0.0.0",Authorization:n,"Content-Type":"application/x-www-form-urlencoded"};GM_xmlhttpRequest({method:"POST",url:"http://spare2.xiamenair.com.cn/api/proxy/plan-server/plan/pnGeneralInfo/findPnGroupStock",headers:a,data:o,onload:function(e){-1==e.responseText.indexOf("unauthenticated")?(console.log("返回互换件基本信息"),console.log(e.responseText),t=JSON.parse(e.responseText).result,x(!0),null!=t?(!function(e={}){const t=document.querySelector(".table-interchange tbody");t.innerHTML="";let n=0;e.forEach((e=>{const o=document.createElement("tr");o.className="table-interchangeDetail-row";const a=[document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td")];a[0].textContent=++n,a[1].textContent=e.relation+e.replaceDesc,a[2].textContent=e.rPn,a[3].textContent=e.totalCount,a[4].innerHTML=`<span class="span-interCount${e["MF-FUZHOU"]}">福州:${e["MF-FUZHOU"]} </span>\n                                    <span class="span-interCount${e["MF-XIAMEN"]}">厦门:${e["MF-XIAMEN"]} </span>\n                                    <span class="span-interCount${e["MF-XIAMENBUJIAN"]}">厦门部件:${e["MF-XIAMENBUJIAN"]} </span>\n                                    <span class="span-interCount${e["MF-JINJIANG"]}">晋江:${e["MF-JINJIANG"]} </span>\n                                    <span class="span-interCount${e["MF-DAXING"]}">大兴:${e["MF-DAXING"]} </span>\n                                    <span class="span-interCount${e["MF-HANGZHOU"]}">杭州:${e["MF-HANGZHOU"]} </span>\n                                    <span class="span-interCount${e["MF-CHANGSHA"]}">长沙:${e["MF-CHANGSHA"]} </span>\n                                    <span class="span-interCount${e["MF-CHONGQING"]}">重庆:${e["MF-CHONGQING"]} </span>\n                                    <span class="span-interCount${e["MF-TIANJIN"]}">天津:${e["MF-TIANJIN"]} </span>\n                                    <span class="span-interCount${e["MF-SHIJIAZHUANG"]}">石家庄:${e["MF-SHIJIAZHUANG"]} </span>\n                                    <span class="span-interCount${e["MF-NANCHANG"]}">南昌:${e["MF-NANCHANG"]}</span>`,a.forEach((e=>o.appendChild(e))),t.appendChild(o)}))}(t),"<strong>总库存：</strong>0"!=document.getElementById("btn-swal-total").innerText&&"福州：0"!=document.getElementById("btn-swal-fz").innerText&&"厦门：0"!=document.getElementById("btn-swal-xm").innerText||document.getElementById("span-interchangeDisplayControl").click()):(console.log("无互换性"),y("未在航材系统中找到互换信息"),x(!1))):Swal.fire({title:"登录状态过期",text:"用户状态过期，需重新获取登录",icon:"info",timer:4e3,showConfirmButton:!1})},onerror:function(e){console.error("POST请求错误:",e)}})}(t);y("注意：该件号未在航材系统注册 or 不是一个有效件号"),x(!1)},onerror:function(e){console.error("POST请求错误:",e)}})}function v(e="182513-001",t=!1,o=!1,a="*"){i.pn=e;let r={curPage:1,pageSize:1e4,rq:{startRow:0,endRow:1e4,rowGroupCols:[],valueCols:[],pivotCols:[],pivotMode:!1,groupKeys:[],filterModel:{},sortModel:[]},pn:e,grpFlg:"SP-MF",pnStockQtyType:a},l={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36 Edg/125.0.0.0",Authorization:n},c="",d="";o?(d="http://spare2.xiamenair.com.cn/api/proxy/plan-server/plan/pnGeneralInfo/findStoreStockDtoList",l["Content-Type"]="application/json",c=JSON.stringify(r)):(d=s,l["Content-Type"]="application/x-www-form-urlencoded",c=g());let w=document.querySelector("#div_swal_detail");!t&o&&(w.innerHTML='<span class="spinner data_onload" id="span_detailLoading"></span>'),GM_xmlhttpRequest({method:"POST",url:d,headers:l,data:c,onload:function(n){if(console.log("POST请求响应:",n.responseText),-1!=n.responseText.indexOf("unauthenticated"))return Swal.fire({title:"登录状态过期",text:"用户状态过期，需重新获取登录",icon:"info",timer:4e3,showConfirmButton:!1}),void p();if(!t){if(o){let e=JSON.parse(n.responseText).result;return w.innerHTML='<hr class="data_ready">\n                            <div style="max-height:300px; overflow-y:scroll; font-size: 14px;"><table class="pure-table table-detail">\n                                <thead style="position: sticky; top: 0;">\n                                    <tr>\n                                        <th>#</th>\n                                        <th>件号</th>\n                                        <th>序号</th>\n                                        <th>数量</th>\n                                        <th>单位</th>\n                                        <th>库房</th>\n                                        <th>挂签号</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                </tbody>\n                            </table></div>',void function(e={}){const t=document.querySelector(".table-detail tbody");t.innerHTML="";let n=0;e.forEach((e=>{const o=document.createElement("tr");o.className="table-stockDetail-row";const a=[document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td")];a[0].textContent=++n,a[1].textContent=e.pn,a[2].textContent=e.sn,a[3].textContent=e.totalQty,a[4].textContent=e.unit,a[5].textContent=e.storeInfoName,a[6].textContent=e.tagNo,a.forEach((e=>o.appendChild(e))),t.appendChild(o)}))}(e.records)}f(e);var a=JSON.parse(n.responseText).result;document.addEventListener("mousedown",b),document.addEventListener("mouseup",b),Swal.fire({title:`\n                        <button id="copyButton" style="padding: 0.2em 0.2em;width: auto;background-color: #4da6ff; color: white; border: none; cursor: pointer;" class="pure-button" title="点击复制件号信息"><u>${i.pn}</u></button>库存信息`,html:`\n                            <button id="btn-swal-total" class="button-color pure-button btnStockNum-${a.totalStockQty}"><strong>总库存：</strong>${a.totalStockQty}</button>\n                            <button id="btn-swal-total" class="button-color pure-button btnStockNum-${a.frozenStockQty}"><strong>领料冻结：</strong>${a.frozenStockQty}</button><br/>\n                            <button id="btn-swal-fz" class="button-color pure-button btnStockNum-${a.fzStockQty}" >福州：${a.fzStockQty}</button>\n                            <button id="btn-swal-xm" class="button-color pure-button btnStockNum-${a.xmStockQty}" >厦门：${a.xmStockQty}</button>\n                            <button id="btn-swal-wz" class="button-color pure-button btnStockNum-${a.wzStockQty}" >外站：${a.wzStockQty}</button>\n                            <button id="btn-swal-sjz" class="button-color pure-button btnStockNum-${a.sjzStockQty}" >石家庄：${a.sjzStockQty}</button><br>            \n                            <div id="div_swal_detail"></div>\n                            <span id="span_swal_notavail" style="color: #999; text-align: center; margin-top:8px; font-size:80% !important;">提示该件号在航材系统中未注册/没有找到这个件号的互换信息</span>\n                            <div id="div_swal_interchangeInfoBlock" style="margin-top:8px;">\n                                <span id="span-interchangeDisplayControl">▼▼▼ 展开互换信息 ▼▼▼</span>\n                                    <div id="div_swal_interchangeInfo" style="overflow:hidden; transition: height 0.5s;"> \n                                        <hr>  \n                                        <div style="max-height:300px; overflow-y:scroll; font-size: 14px;">\n                                            <table class="pure-table table-interchange">\n                                                <thead style="position: sticky; top: 0;">\n                                                    <tr>\n                                                        <th>#</th>\n                                                        <th>互换关系</th>\n                                                        <th>互换件号</th>\n                                                        <th>总库存</th>\n                                                        <th>各地库存详情</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    <div style="font-size:80%; color:#ff6666; text-align:right"><u>互换信息来自航材系统，仅供参考</u></div>\n    \n                            </div>`,icon:"info",width:"36%",footer:`<div style="color: #ccc; text-align: right; font-size:80% !important">DataSupport by 心流助手 ${(new Date).toLocaleString()}</div>`,didDestroy:()=>{document.removeEventListener("mousedown",b),document.removeEventListener("mouseup",b)},didOpen:()=>{document.getElementById("btn-swal-total").addEventListener("click",(()=>{v(e,!1,!0,"*")})),document.getElementById("btn-swal-fz").addEventListener("click",(()=>{v(e,!1,!0,"FZ")})),document.getElementById("btn-swal-xm").addEventListener("click",(()=>{v(e,!1,!0,"XM")})),document.getElementById("btn-swal-wz").addEventListener("click",(()=>{v(e,!1,!0,"WZ")})),document.getElementById("btn-swal-sjz").addEventListener("click",(()=>{v(e,!1,!0,"SJZ")}));let t=document.getElementById("span-interchangeDisplayControl"),n=document.getElementById("div_swal_interchangeInfo");t.addEventListener("click",(()=>{0===n.clientHeight?(n.style.height=`${n.scrollHeight}px`,t.innerHTML="▲▲▲ 隐藏互换信息 ▲▲▲"):(n.style.height="0px",t.innerHTML="▼▼▼ 展开互换信息 ▼▼▼")})),document.getElementById("span_swal_notavail").style.display="none",document.getElementById("div_swal_interchangeInfoBlock").style.display="none"}}),document.getElementById("copyButton").addEventListener("click",(function(){"https:"===location.protocol?function(e){return navigator.clipboard.writeText(e)}(i.pn).then((()=>{Swal.fire({title:`件号：${text} 已复制到剪贴板`,icon:"success",timer:1100,timerProgressBar:!0,showConfirmButton:!0})})).catch((e=>{console.error("无法复制文本: ",e),Swal.fire("复制失败!","复制操作遇到问题，请重试。","error")})):function(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy"),Swal.fire({title:`件号：${e} 已复制到剪贴板`,icon:"success",timer:1100,timerProgressBar:!0,showConfirmButton:!1})}catch(e){console.error("无法使用execCommand复制文本: ",e),Swal.fire("复制失败!","您的浏览器可能不支持此操作，请尝试手动复制。","error")}finally{document.body.removeChild(t)}}(i.pn)})),window.getSelection().removeAllRanges()}},onerror:function(e){console.error("POST请求错误:",e)}})}function x(e=!1){e?(document.getElementById("span_swal_notavail").style.display="none",document.getElementById("div_swal_interchangeInfoBlock").style.display=""):(document.getElementById("span_swal_notavail").style.display="",document.getElementById("div_swal_interchangeInfoBlock").style.display="none")}function y(e="未在航材系统中找到互换信息"){document.getElementById("span_swal_notavail").innerHTML=e}setInterval((function(){o=window.location.href,t.some((e=>o.includes(e)))?(document.getElementById("flow_mode_button")||function(){var e="headerTitle";-1!==window.location.href.indexOf("http://11.24.21.54:8000/airnavx/")&&(e="information");if(document.getElementById(e)){var t=document.getElementById(e),n=document.createElement("button");if(n.innerHTML='<i class="fa fa-check"></i>&nbsp;心流插件已启用',n.style.cssText="font-size:80%; margin:6px 5px; background: rgb(28, 184, 65);","information"==e&&(n.style.cssText="font-size:130%; margin:6px 5px; background: rgb(28, 184, 65);"),n.className="pure-button",n.id="flowHelperSwitch",t.appendChild(n),n.addEventListener("click",(function(){c=!c,m()})),document.getElementById("flow_mode_button"))return;var o=document.createElement("button");o.innerHTML='<i class="fa fa-spinner"></i>&nbsp;心流模式',o.style.cssText="font-size:80%; margin:6px 5px","information"==e&&(o.style.cssText="font-size:130%; margin:6px 5px"),o.className="pure-button",o.id="flow_mode_button",o.onclick=function(){v("182513-001",!0),Swal.fire({title:"模式选择",html:"心流将获取当前页面所有航材库存，请根据需要选择<br>\n                    Pro模式兼顾性能和速度，对网络应用冲击较小。\n                    ",input:"radio",inputOptions:{0:"Ultra",10:"Pro+",20:"Pro",50:"Standard"},width:"30%",height:"130%",inputValue:20,showCancelButton:!0,inputValidator:e=>{}}).then((e=>{if(e.isConfirmed){const t=e.value;l=[],function(e=20){var t=10*e;if(document.querySelectorAll("tr:not(.ng-hide) td.col-ata-part-number div.ng-binding").forEach((function(e,t){var n=document.createElement("div");n.id="pn"+t,n.innerHTML="",e.parentNode.appendChild(n),l.push({pn:e.textContent,pnDiv:"pn"+t})})),l.length>0)for(let e=0;e<l.length;e++)setTimeout((()=>{h(e)}),t*e)}(t)}}))},t.appendChild(o);var a=document.createElement("button");a.innerHTML='<i class="fa fa-bookmark-o" ></i>&nbsp;航材清单',a.style.cssText="font-size:80%; margin:6px 5px","information"==e&&(a.style.cssText="font-size:130%; margin:6px 5px"),a.className="pure-button",a.onclick=function(){Swal.fire("一键复制功能尚未完成")},t.appendChild(a),document.addEventListener("mouseover",(function(e){if(c){const t=e.target;if("DIV"!==t.tagName&&"SPAN"!==t.tagName||!t.classList.contains("ng-binding")||1!==t.classList.length)d="SPAN"===t.tagName&&t.classList.contains("flowPnHover")?t.innerText:"";else{if(t.innerHTML.includes("flowPnHover"))return;if(!u(t.innerText))return;let e=t.innerText.split(/[\s'(),]|(?<=\.)\s|(?<=\.|\:)$/),n=t.innerText;e=function(e){for(let t=0;t<e.length;t++){let n=e[t];n.endsWith(".")&&e.splice(t,1,n.slice(0,-1))}let t=new Set(e.map((e=>e.trim())));return Array.from(t).filter((e=>""!==e))}(e),e.forEach((e=>{if(!u(e))return;let t=document.createElement("span");t.innerHTML=`${e}`,t.title=`按压字母x查询${e}的库存情况`,t.className="flowPnHover",n=n.replace(new RegExp(e+"(?![\\w\\d_\\u4e00-\\u9fa5\\-]|\\.\\w|\\.\\d)","g"),t.outerHTML)})),t.innerHTML=n}}}),!0),document.addEventListener("keydown",(function(e){if("x"===e.key||"X"===e.key){if(""==d)return;v(d)}}))}}(),a||(console.log("启用库查询功能"),a=!0,document.addEventListener("mouseup",w),document.addEventListener("keyup",w),function(){if(r){if(r=!1,!localStorage.getItem("spareUserInfo"))return Swal.fire({title:"航材系统未登录",text:"请在弹窗内完成登录，获取登录信息后窗口会自动关闭。",icon:"info",timer:4e3,showConfirmButton:!1}),void p();n=JSON.parse(localStorage.getItem("spareUserInfo")).token,v("182513-001",!0)}}())):a&&(console.log("关闭库查询功能"),a=!1,r=!1,document.removeEventListener("mouseup",w),document.removeEventListener("keyup",w))}),2e3),console.log("hello")}();