// ==UserScript==
// @name         üß† X.com Heavy JS Optimizer+
// @name:vi      üß† Tr√¨nh t·ªëi ∆∞u JavaScript n·∫∑ng cho X.com+
// @name:en      üß† X.com Heavy JS Optimizer+
// @name:zh-CN   üß† X.com È´òÁ∫ß JavaScript ‰ºòÂåñÂô®+
// @name:zh-TW   üß† X.com È´òÁ¥ö JavaScript ÂÑ™ÂåñÂô®+
// @name:ja      üß† X.com È´òÊÄßËÉΩ JavaScript „Ç™„Éó„ÉÜ„Ç£„Éû„Ç§„Ç∂„Éº+
// @name:ko      üß† X.com Í≥†Í∏â JS ÏµúÏ†ÅÌôîÍ∏∞+
// @name:fr      üß† Optimiseur JavaScript Avanc√© pour X.com+
// @name:de      üß† X.com Erweiterter JS-Optimierer+
// @name:es      üß† Optimizador JS Avanzado para X.com+
// @name:pt      üß† Otimizador JS Avan√ßado para X.com+
// @name:it      üß† Ottimizzatore JS Avanzato per X.com+
// @name:ru      üß† –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä JS –¥–ª—è X.com+
// @name:pl      üß† Zaawansowany optymalizator JS dla X.com+
// @name:tr      üß† X.com Geli≈ümi≈ü JS Optimize Edici+
// @name:ar      üß† ŸÖŸèÿ≠ÿ≥ŸêŸëŸÜ JavaScript ŸÖÿ™ŸÇÿØŸÖ ŸÑŸÄ X.com+
// @name:hi      üß† X.com ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§®‡•ç‡§®‡§§ JS ‡§ë‡§™‡•ç‡§ü‡§ø‡§Æ‡§æ‡§á‡§ú‡§º‡§∞+
// @name:th      üß† ‡∏ï‡∏±‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û JS ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö X.com+
// @name:id      üß† Pengoptimal JS Tingkat Lanjut untuk X.com+
// @name:nl      üß† Geavanceerde JS-Optimizer voor X.com+
// @name:uk      üß† –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä JS –¥–ª—è X.com+
// @name:sv      üß† X.com Tung JS-optimerare+
// @name:no      üß† X.com Tung JS-optimaliserer+
// @name:da      üß† X.com Tung JS-optimerer+
// @name:fi      üß† X.com Raskas JS-optimoija+
// @name:el      üß† ŒíŒµŒªœÑŒπœÉœÑŒøœÄŒøŒπŒ∑œÑŒÆœÇ Œ≤Œ±œÅŒ≠œâŒΩ JS œÑŒøœÖ X.com+
// @name:cs      üß† Tƒõ≈æk√Ω JS optimaliz√°tor pro X.com+
// @name:hu      üß† X.com Neh√©z JS Optimaliz√°l√≥+
// @name:ro      üß† Optimizator JS Greu pentru X.com+
// @name:bg      üß† –¢–µ–∂—ä–∫ JS –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –∑–∞ X.com+
// @name:sr      üß† –¢–µ—à–∫–∏ –à–° –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –∑–∞ X.com+
// @name:hr      üß† Te≈°ki JS optimizator za X.com+
// @name:sk      üß† ≈§a≈æk√Ω JS optimaliz√°tor pre X.com+
// @name:sl      üß† Te≈æki JS optimizator za X.com+
// @name:lt      üß† Sunkus JS optimizatorius, skirtas X.com+
// @name:lv      üß† Smagais JS optimizƒìtƒÅjs vietnei X.com+
// @name:et      üß† Raske JS-i optimeerija X.com-i jaoks+
// @name:fil     üß† Malakas na JS Optimizer para sa X.com+
// @name:ms      üß† Pengoptimum JS Berat X.com+
// @name:bn      üß† X.com ‡¶≠‡¶æ‡¶∞‡ßÄ ‡¶ú‡ßá‡¶è‡¶∏ ‡¶Ö‡¶™‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡¶æ‡¶∞+
// @name:pa      üß† X.com ‡®π‡©à‡®µ‡©Ä ‡®ú‡©á‡®ê‡®∏ ‡®Ü‡®™‡®ü‡©Ä‡®Æ‡®æ‡®à‡®ú‡®º‡®∞+
// @name:jv      üß† Optimizer JS Abot kanggo X.com+
// @name:te      üß† X.com ‡∞π‡±Ü‡∞µ‡±Ä JS ‡∞Ü‡∞™‡±ç‡∞ü‡∞ø‡∞Æ‡±à‡∞ú‡∞∞‡±ç+
// @name:mr      üß† X.com ‡§π‡•á‡§µ‡•Ä ‡§ú‡•á‡§è‡§∏ ‡§ë‡§™‡•ç‡§ü‡™ø‡™Æ‡™æ‡™á‡™ù‡™∞+
// @name:ta      üß† X.com ‡Æï‡Æ©‡ÆÆ‡Ææ‡Æ© ‡Æú‡Øá‡Æé‡Æ∏‡Øç ‡ÆÜ‡Æ™‡Øç‡Æü‡Æø‡∞Æ‡±à‡∞ú‡∞∞‡±ç+
// @name:ur      üß† X.com €Å€åŸà€å ÿ¨€í ÿß€åÿ≥ ÿ¢ŸæŸπ€åŸÖÿßÿ¶ÿ≤ÿ±+
// @name:fa      üß† ÿ®Ÿá€åŸÜŸá ÿ≥ÿßÿ≤ ÿ≥ŸÜ⁄Ø€åŸÜ ÿ¨ÿßŸàÿß ÿßÿ≥⁄©ÿ±€åŸæÿ™ X.com+
// @name:he      üß† ◊û◊ô◊ô◊¢◊ú JS ◊õ◊ë◊ì ◊©◊ú X.com+
// @name:sw      üß† Kiongeza kasi cha JS Kizito cha X.com+
// @name:af      üß† X.com Swaar JS-optimeerder+

// @description        Enhance X.com/Twitter performance by removing heavy CSS, throttling FPS, limiting feed DOM, blocking analytics, and optimizing offscreen videos.
// @description:vi     C·∫£i thi·ªán hi·ªáu nƒÉng X.com/Twitter b·∫±ng c√°ch lo·∫°i b·ªè CSS n·∫∑ng, gi·ªõi h·∫°n FPS, gi·∫£m t·∫£i DOM feed, ch·∫∑n theo d√µi v√† t·ªëi ∆∞u video ngo√†i m√†n h√¨nh.
// @description:en     Improve X.com/Twitter performance: removes heavy CSS, throttles FPS, limits DOM size, pauses offscreen videos, blocks analytics, and auto-enables aggressive mode when lag is detected.
// @description:zh-CN  ‰ºòÂåñ X.com/Twitter ÊÄßËÉΩÔºöÁßªÈô§È´òË¥üËΩΩ CSS„ÄÅÈôêÂà∂ FPS„ÄÅÂáèÂ∞ë DOM„ÄÅÊöÇÂÅúÂ±èÂπïÂ§ñËßÜÈ¢ë„ÄÅÂ±èËîΩÂàÜÊûêÂπ∂Âú®Âç°È°øÊó∂Ëá™Âä®ÂêØÁî®È´òÊÄßËÉΩÊ®°Âºè„ÄÇ
// @description:zh-TW  ÂÑ™Âåñ X.com/Twitter ÊïàËÉΩÔºöÁßªÈô§È´òË≤†Ëºâ CSS„ÄÅÈôêÂà∂ FPS„ÄÅÊ∏õÂ∞ë DOM„ÄÅÊö´ÂÅúËû¢ÂπïÂ§ñÂΩ±Áâá„ÄÅÂ∞ÅÈéñÂàÜÊûê‰∏¶Âú®Âª∂ÈÅ≤ÊôÇËá™ÂãïÂïüÁî®È´òÊïàÊ®°Âºè„ÄÇ
// @description:ja      X.com/Twitter „ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÇíÂêë‰∏ä: Èáç„ÅÑ CSS „ÇíÂâäÈô§„Åó„ÄÅFPS „ÇíÂà∂Èôê„Åó„ÄÅ„Éï„Ç£„Éº„Éâ DOM „ÇíÁ∏ÆÂ∞è„Åó„ÄÅÁîªÈù¢Â§ñ„ÅÆÂãïÁîª„Çí‰∏ÄÊôÇÂÅúÊ≠¢„Åó„ÄÅÂàÜÊûê„Çí„Éñ„É≠„ÉÉ„ÇØ„Åó„ÄÅÈÅÖÂª∂ÊôÇ„Å´Ëá™ÂãïÁöÑ„Å´„Ç¢„Ç∞„É¨„ÉÉ„Ç∑„Éñ„É¢„Éº„Éâ„ÇíÊúâÂäπÂåñ„ÄÇ
// @description:ko      X.com/Twitter ÏÑ±Îä• ÏµúÏ†ÅÌôî: Î¨¥Í±∞Ïö¥ CSS Ï†úÍ±∞, FPS Ï†úÌïú, ÌîºÎìú DOM Ï∂ïÏÜå, ÌôîÎ©¥ Î∞ñ ÎèôÏòÅÏÉÅ ÏùºÏãúÏ†ïÏßÄ, Î∂ÑÏÑù Ï∞®Îã®, Î†â Î∞úÏÉù Ïãú ÏûêÎèô Í≥µÍ≤©Ï†Å Î™®Îìú Ï†ÑÌôò.
// @description:fr      Am√©liorez les performances de X.com/Twitter : supprime les filtres CSS lourds, limite les FPS, r√©duit le DOM, met en pause les vid√©os hors √©cran, bloque l‚Äôanalytique et active le mode agressif en cas de ralentissement.
// @description:de      Optimiert die Leistung von X.com/Twitter: Entfernt schwere CSS-Filter, begrenzt FPS, reduziert das DOM, pausiert Videos au√üerhalb des Bildschirms, blockiert Analysen und aktiviert bei Lag den aggressiven Modus automatisch.
// @description:es      Mejora el rendimiento de X.com/Twitter: elimina CSS pesados, limita FPS, reduce DOM, pausa videos fuera de pantalla, bloquea anal√≠ticas y activa modo agresivo autom√°ticamente al detectar lag.
// @description:pt      Melhora o desempenho do X.com/Twitter: remove CSS pesado, limita FPS, reduz o DOM, pausa v√≠deos fora da tela, bloqueia an√°lises e ativa o modo agressivo automaticamente quando h√° lag.
// @description:it      Migliora le prestazioni di X.com/Twitter: rimuove CSS pesanti, limita FPS, riduce DOM, mette in pausa i video fuori schermo, blocca le analisi e attiva la modalit√† aggressiva quando rileva lag.
// @description:ru      –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç X.com/Twitter: —É–¥–∞–ª—è–µ—Ç —Ç—è–∂–µ–ª—ã–µ CSS, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç FPS, —Å–æ–∫—Ä–∞—â–∞–µ—Ç DOM, –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –≤–Ω–µ —ç–∫—Ä–∞–Ω–∞, –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –ª–∞–≥–∞—Ö.
// @description:pl      Popraw wydajno≈õƒá X.com/Twitter: usuwa ciƒô≈ºkie style CSS, ogranicza FPS, zmniejsza DOM, wstrzymuje filmy poza ekranem, blokuje analitykƒô i automatycznie w≈ÇƒÖcza tryb agresywny przy lagach.
// @description:tr      X.com/Twitter performansƒ±nƒ± artƒ±rƒ±r: aƒüƒ±r CSS filtrelerini kaldƒ±rƒ±r, FPS sƒ±nƒ±rlar, DOM‚Äôu k√º√ß√ºlt√ºr, ekrandƒ±≈üƒ± videolarƒ± duraklatƒ±r, analitiƒüi engeller ve gecikme durumunda agresif modu otomatik a√ßar.
// @description:ar      ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ£ÿØÿßÿ° X.com/Twitter: ÿ•ÿ≤ÿßŸÑÿ© CSS ÿßŸÑÿ´ŸÇŸäŸÑÿå ÿ™ÿ≠ÿØŸäÿØ ŸÖÿπÿØŸÑ ÿßŸÑÿ•ÿ∑ÿßÿ±ÿßÿ™ÿå ÿ™ŸÇŸÑŸäŸÑ DOMÿå ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿÆÿßÿ±ÿ¨ ÿßŸÑÿ¥ÿßÿ¥ÿ©ÿå ÿ≠ÿ∏ÿ± ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ÿå Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿØŸàÿßŸÜŸä ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß ÿπŸÜÿØ ÿßŸÑÿ™ÿ£ÿÆŸäÿ±.
// @description:hi      X.com/Twitter ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§¨‡•á‡§π‡§§‡§∞ ‡§ï‡§∞‡•á‡§Ç: ‡§≠‡§æ‡§∞‡•Ä CSS ‡§π‡§ü‡§æ‡§è‡§Ç, FPS ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç, DOM ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç, ‡§ë‡§´‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§∞‡•ã‡§ï‡•á‡§Ç, ‡§è‡§®‡§æ‡§≤‡§ø‡§ü‡§ø‡§ï‡•ç‡§∏ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§≤‡•à‡§ó ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§§‡§É ‡§Ü‡§ï‡•ç‡§∞‡§æ‡§Æ‡§ï ‡§Æ‡•ã‡§° ‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡•á‡§Ç.
// @description:th      ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û X.com/Twitter: ‡∏•‡∏ö CSS ‡∏´‡∏ô‡∏±‡∏Å, ‡∏à‡∏≥‡∏Å‡∏±‡∏î FPS, ‡∏•‡∏î DOM, ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ô‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠, ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏£‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏Ñ.
// @description:id      Meningkatkan performa X.com/Twitter: menghapus CSS berat, membatasi FPS, mengurangi DOM, menjeda video di luar layar, memblokir analitik, dan otomatis mengaktifkan mode agresif saat lag terdeteksi.
// @description:nl      Verbeter de prestaties van X.com/Twitter: verwijdert zware CSS, beperkt FPS, vermindert DOM, pauzeert video's buiten beeld, blokkeert analyses en activeert automatisch agressieve modus bij lag.
// @description:uk      –û–ø—Ç–∏–º—ñ–∑—É—î X.com/Twitter: –≤–∏–¥–∞–ª—è—î –≤–∞–∂–∫—ñ CSS, –æ–±–º–µ–∂—É—î FPS, —Å–∫–æ—Ä–æ—á—É—î DOM, –ø—Ä–∏–∑—É–ø–∏–Ω—è—î –≤—ñ–¥–µ–æ –ø–æ–∑–∞ –µ–∫—Ä–∞–Ω–æ–º, –±–ª–æ–∫—É—î –∞–Ω–∞–ª—ñ—Ç–∏–∫—É —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–º–∏–∫–∞—î –∞–≥—Ä–µ—Å–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º –ø—Ä–∏ –ª–∞–≥–∞—Ö.
// @description:sv      F√∂rb√§ttra prestandan f√∂r X.com/Twitter: tar bort tung CSS, stryper FPS, begr√§nsar DOM-storleken, pausar videor utanf√∂r sk√§rmen, blockerar analyser och aktiverar automatiskt aggressivt l√§ge n√§r f√∂rdr√∂jning uppt√§cks.
// @description:no      Forbedre ytelsen til X.com/Twitter: fjerner tung CSS, struper FPS, begrenser DOM-st√∏rrelse, pauser videoer utenfor skjermen, blokkerer analyser og aktiverer automatisk aggressiv modus n√•r etterslep oppdages.
// @description:da      Forbedre ydeevnen for X.com/Twitter: fjerner tung CSS, drosler FPS, begr√¶nser DOM-st√∏rrelse, pauser videoer uden for sk√¶rmen, blokerer analyser og aktiverer automatisk aggressiv tilstand, n√•r der registreres forsinkelse.
// @description:fi      Paranna X.com/Twitter-suorituskyky√§: poistaa raskaat CSS-tyylit, rajoittaa FPS:√§√§, pienent√§√§ DOM-kokoa, keskeytt√§√§ ruudun ulkopuoliset videot, est√§√§ analytiikan ja ottaa aggressiivisen tilan automaattisesti k√§ytt√∂√∂n viiveen sattuessa.
// @description:el      ŒíŒµŒªœÑŒπœéœÉœÑŒµ œÑŒ∑ŒΩ Œ±œÄœåŒ¥ŒøœÉŒ∑ œÑŒøœÖ X.com/Twitter: Œ±œÜŒ±ŒπœÅŒµŒØ Œ≤Œ±œÅŒπŒ¨ CSS, œÄŒµœÅŒπŒøœÅŒØŒ∂ŒµŒπ œÑŒ± FPS, ŒºŒµŒπœéŒΩŒµŒπ œÑŒø ŒºŒ≠Œ≥ŒµŒ∏ŒøœÇ œÑŒøœÖ DOM, Œ∏Œ≠œÑŒµŒπ œÉŒµ œÄŒ±œçœÉŒ∑ Œ≤ŒØŒΩœÑŒµŒø ŒµŒ∫œÑœåœÇ ŒøŒ∏œåŒΩŒ∑œÇ, Œ±œÄŒøŒ∫ŒªŒµŒØŒµŒπ œÑŒ± Œ±ŒΩŒ±ŒªœÖœÑŒπŒ∫Œ¨ œÉœÑŒøŒπœáŒµŒØŒ± Œ∫Œ±Œπ ŒµŒΩŒµœÅŒ≥ŒøœÄŒøŒπŒµŒØ Œ±œÖœÑœåŒºŒ±œÑŒ± œÑŒ∑ŒΩ ŒµœÄŒπŒ∏ŒµœÑŒπŒ∫ŒÆ ŒªŒµŒπœÑŒøœÖœÅŒ≥ŒØŒ± œåœÑŒ±ŒΩ ŒµŒΩœÑŒøœÄŒØŒ∂ŒµœÑŒ±Œπ Œ∫Œ±Œ∏œÖœÉœÑŒ≠œÅŒ∑œÉŒ∑.
// @description:cs      Zlep≈°ete v√Ωkon X.com/Twitter: odstra≈àuje tƒõ≈æk√© CSS, omezuje FPS, zmen≈°uje velikost DOM, pozastavuje videa mimo obrazovku, blokuje analytiku a automaticky povoluje agresivn√≠ re≈æim p≈ôi zpo≈ædƒõn√≠.
// @description:hu      Jav√≠tsa az X.com/Twitter teljes√≠tm√©ny√©t: elt√°vol√≠tja a neh√©z CSS-t, korl√°tozza az FPS-t, cs√∂kkenti a DOM m√©ret√©t, sz√ºnetelteti a k√©perny≈ën k√≠v√ºli vide√≥kat, letiltja az analitik√°t, √©s k√©s√©s eset√©n automatikusan enged√©lyezi az agressz√≠v m√≥dot.
// @description:ro      √émbunƒÉtƒÉ»õi»õi performan»õa X.com/Twitter: eliminƒÉ CSS-ul greu, limiteazƒÉ FPS-ul, reduce dimensiunea DOM-ului, √Æntrerupe videoclipurile din afara ecranului, blocheazƒÉ analizele »ôi activeazƒÉ automat modul agresiv la detectarea √Ænt√¢rzierilor.
// @description:bg      –ü–æ–¥–æ–±—Ä–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ X.com/Twitter: –ø—Ä–µ–º–∞—Ö–≤–∞ —Ç–µ–∂—ä–∫ CSS, –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ FPS, –Ω–∞–º–∞–ª—è–≤–∞ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ DOM, –ø–æ—Å—Ç–∞–≤—è –Ω–∞ –ø–∞—É–∑–∞ –≤–∏–¥–µ–æ–∫–ª–∏–ø–æ–≤–µ –∏–∑–≤—ä–Ω –µ–∫—Ä–∞–Ω–∞, –±–ª–æ–∫–∏—Ä–∞ –∞–Ω–∞–ª–∏–∑–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–∞ –∞–≥—Ä–µ—Å–∏–≤–µ–Ω —Ä–µ–∂–∏–º –ø—Ä–∏ –∑–∞–±–∞–≤—è–Ω–µ.
// @description:sr      –ü–æ–±–æ—ô—à–∞—ò—Ç–µ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ X.com/Twitter-–∞: —É–∫–ª–∞—ö–∞ —Ç–µ–∂–∞–∫ –¶–°–°, –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –§–ü–°, —Å–º–∞—ö—É—ò–µ –≤–µ–ª–∏—á–∏–Ω—É –î–û–ú-–∞, –ø–∞—É–∑–∏—Ä–∞ –≤–∏–¥–µ–æ —Å–Ω–∏–º–∫–µ –≤–∞–Ω –µ–∫—Ä–∞–Ω–∞, –±–ª–æ–∫–∏—Ä–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –∞—É—Ç–æ–º–∞—Ç—Å–∫–∏ –æ–º–æ–≥—É—õ–∞–≤–∞ –∞–≥—Ä–µ—Å–∏–≤–Ω–∏ —Ä–µ–∂–∏–º –∫–∞–¥–∞ —Å–µ –æ—Ç–∫—Ä–∏—ò–µ –∫–∞—à—ö–µ—ö–µ.
// @description:hr      Pobolj≈°ajte performanse X.com/Twittera: uklanja te≈°ki CSS, ograniƒçava FPS, smanjuje veliƒçinu DOM-a, pauzira videozapise izvan zaslona, blokira analitiku i automatski omoguƒáuje agresivan naƒçin rada kada se otkrije ka≈°njenje.
// @description:sk      Zlep≈°ite v√Ωkon X.com/Twitter: odstra≈àuje ≈•a≈æk√© CSS, obmedzuje FPS, zmen≈°uje veƒækos≈• DOM, pozastavuje vide√° mimo obrazovky, blokuje analytiku a automaticky povoƒæuje agres√≠vny re≈æim pri oneskoren√≠.
// @description:sl      Izbolj≈°ajte delovanje X.com/Twitter: odstrani te≈æke CSS, omeji FPS, zmanj≈°a velikost DOM, zaustavi videoposnetke zunaj zaslona, blokira analitiko in samodejno omogoƒçi agresiven naƒçin ob zaznavi zaostanka.
// @description:lt      Pagerinkite ‚ÄûX.com‚Äú / ‚ÄûTwitter‚Äú na≈°umƒÖ: pa≈°alina sunk≈≥ CSS, riboja FPS, suma≈æina DOM dydƒØ, pristabdo vaizdo ƒØra≈°us u≈æ ekrano rib≈≥, blokuoja analizƒô ir automati≈°kai ƒØjungia agresyv≈≥jƒØ re≈æimƒÖ, kai aptinkamas vƒólavimas.
// @description:lv      Uzlabojiet X.com/Twitter veiktspƒìju: no≈Üem smago CSS, ierobe≈æo FPS, samazina DOM lielumu, aptur video ƒÅrpus ekrƒÅna, bloƒ∑ƒì analƒ´zi un automƒÅtiski ieslƒìdz agresƒ´vo re≈æƒ´mu, kad tiek konstatƒìta aizkave.
// @description:et      Parandage X.com/Twitteri j√µudlust: eemaldab raske CSS-i, piirab FPS-i, v√§hendab DOM-i suurust, peatab ekraaniv√§lised videod, blokeerib anal√º√ºtika ja lubab viivituse tuvastamisel automaatselt agressiivse re≈æiimi.
// @description:fil     Pahusayin ang pagganap ng X.com/Twitter: nag-aalis ng mabibigat na CSS, nag-throttle ng FPS, nililimitahan ang laki ng DOM, ipinapahinga ang mga video na wala sa screen, hinaharangan ang analytics, at awtomatikong pinapagana ang agresibong mode kapag may na-detect na lag.
// @description:ms      Tingkatkan prestasi X.com/Twitter: membuang CSS berat, mengurangkan FPS, mengehadkan saiz DOM, menjedakan video di luar skrin, menyekat analitik dan mengaktifkan mod agresif secara automatik apabila ketinggalan dikesan.
// @description:bn      X.com/Twitter ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®: ‡¶≠‡¶æ‡¶∞‡ßÄ CSS ‡¶∏‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶Ø‡¶º, FPS ‡¶•‡ßç‡¶∞‡ßã‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßá, DOM ‡¶Ü‡¶ï‡¶æ‡¶∞ ‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá, ‡¶Ö‡¶´‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡¶ú ‡¶ï‡¶∞‡ßá, ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó ‡¶∏‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶π‡¶≤‡ßá ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶ï‡ßç‡¶∞‡¶Æ‡¶£‡¶æ‡¶§‡ßç‡¶Æ‡¶ï ‡¶Æ‡ßã‡¶° ‡¶∏‡¶ï‡ßç‡¶∑‡¶Æ ‡¶ï‡¶∞‡ßá‡•§
// @description:pa      X.com/Twitter ‡®¶‡©Ä ‡®ï‡®æ‡®∞‡®ó‡©Å‡®ú‡®º‡®æ‡®∞‡©Ä ‡®µ‡®ø‡©±‡®ö ‡®∏‡©Å‡®ß‡®æ‡®∞ ‡®ï‡®∞‡©ã: ‡®≠‡®æ‡®∞‡©Ä CSS ‡®®‡©Ç‡©∞ ‡®π‡®ü‡®æ‡®â‡®Ç‡®¶‡®æ ‡®π‡©à, FPS ‡®®‡©Ç‡©∞ ‡®•‡©ç‡®∞‡©ã‡®ü‡®≤ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à, DOM ‡®Ü‡®ï‡®æ‡®∞ ‡®®‡©Ç‡©∞ ‡®∏‡©Ä‡®Æ‡®ø‡®§ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à, ‡®Ü‡®´‡®∏‡®ï‡©ç‡®∞‡©Ä‡®® ‡®µ‡©Ä‡®°‡©Ä‡®ì ‡®®‡©Ç‡©∞ ‡®∞‡©ã‡®ï‡®¶‡®æ ‡®π‡©à, ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£ ‡®®‡©Ç‡©∞ ‡®¨‡®≤‡©å‡®ï ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à, ‡®Ö‡®§‡©á ‡®™‡®õ‡©ú ‡®ú‡®æ‡®£ '‡®§‡©á ‡®∏‡®µ‡©à‡®ö‡®≤‡®ø‡®§ ‡®§‡©å‡®∞ '‡®§‡©á ‡®π‡®Æ‡®≤‡®æ‡®µ‡®∞ ‡®Æ‡©ã‡®° ‡®®‡©Ç‡©∞ ‡®∏‡®Æ‡®∞‡©±‡®• ‡®¨‡®£‡®æ‡®â‡®Ç‡®¶‡®æ ‡®π‡©à‡•§
// @description:jv      Ningkatake kinerja X.com/Twitter: mbusak CSS abot, matesi FPS, matesi ukuran DOM, ngaso video ing njaba layar, mblokir analitik, lan ngaktifake mode agresif kanthi otomatis nalika ana lag.
// @description:te      X.com/Twitter ‡∞™‡∞®‡∞ø‡∞§‡±Ä‡∞∞‡±Å‡∞®‡±Å ‡∞Æ‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞™‡∞∞‡∞ö‡∞Ç‡∞°‡∞ø: ‡∞≠‡∞æ‡∞∞‡±Ä CSS‡∞®‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø, FPS‡∞®‡∞ø ‡∞•‡±ç‡∞∞‡±ã‡∞ü‡∞ø‡∞≤‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø, DOM ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞™‡∞∞‡∞ø‡∞Æ‡∞ø‡∞§‡∞Ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø, ‡∞Ü‡∞´‡±ç-‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡±Ä‡∞®‡±ç ‡∞µ‡±Ä‡∞°‡∞ø‡∞Ø‡±ã‡∞≤‡∞®‡±Å ‡∞™‡∞æ‡∞ú‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø, ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£‡∞≤‡∞®‡±Å ‡∞¨‡±ç‡∞≤‡∞æ‡∞ï‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞≤‡∞æ‡∞ó‡±ç ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞¶‡±Ç‡∞ï‡±Å‡∞°‡±Å ‡∞Æ‡±ã‡∞°‡±ç‚Äå‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.
// @description:mr      X.com/Twitter ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§∏‡•Å‡§ß‡§æ‡§∞‡§æ: ‡§ú‡§° CSS ‡§ï‡§æ‡§¢‡§§‡•á, FPS ‡§•‡•ç‡§∞‡•â‡§ü‡§≤ ‡§ï‡§∞‡§§‡•á, DOM ‡§Ü‡§ï‡§æ‡§∞ ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§§‡•á, ‡§ë‡§´‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì ‡§•‡§æ‡§Ç‡§¨‡§µ‡§§‡•á, ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡§∞‡§§‡•á ‡§Ü‡§£‡§ø ‡§≤‡•Ö‡§ó ‡§Ü‡§¢‡§≥‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡•ç‡§µ‡§Ø‡§Ç‡§ö‡§≤‡§ø‡§§‡§™‡§£‡•á ‡§Ü‡§ï‡•ç‡§∞‡§Æ‡§ï ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡§§‡•á.
// @description:ta      X.com/Twitter ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ§‡Æø‡Æ±‡Æ©‡Øà ‡ÆÆ‡Øá‡ÆÆ‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç: ‡Æï‡Æ©‡ÆÆ‡Ææ‡Æ© CSS ‡Æê ‡Æ®‡ØÄ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ, FPS ‡Æê‡Æï‡Øç ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ, DOM ‡ÆÖ‡Æ≥‡Æµ‡Øà‡Æï‡Øç ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ, ‡Æ§‡Æø‡Æ∞‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡Øá ‡Æâ‡Æ≥‡Øç‡Æ≥ ‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã‡Æï‡Øç‡Æï‡Æ≥‡Øà ‡Æá‡Æü‡Øà‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ, ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ, ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Ææ‡ÆÆ‡Æ§‡ÆÆ‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æ§‡ØÄ‡Æµ‡Æø‡Æ∞ ‡Æ™‡ÆØ‡Æ©‡Øç‡ÆÆ‡ØÅ‡Æ±‡Øà‡ÆØ‡Øà ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.
// @description:ur      X.com/Twitter ⁄©€å ⁄©ÿßÿ±⁄©ÿ±ÿØ⁄Ø€å ⁄©Ÿà ÿ®€Åÿ™ÿ± ÿ®ŸÜÿßÿ¶€å⁄∫: ÿ®⁄æÿßÿ±€å CSS ⁄©Ÿà €ÅŸπÿßÿ™ÿß €Å€íÿå FPS ⁄©Ÿà ÿ™⁄æÿ±ŸàŸπŸÑ ⁄©ÿ±ÿ™ÿß €Å€íÿå DOM ⁄©€í ÿ≥ÿßÿ¶ÿ≤ ⁄©Ÿà ŸÖÿ≠ÿØŸàÿØ ⁄©ÿ±ÿ™ÿß €Å€íÿå ÿ¢ŸÅ ÿßÿ≥⁄©ÿ±€åŸÜ Ÿà€å⁄à€åŸàÿ≤ ⁄©Ÿà ÿ±Ÿà⁄©ÿ™ÿß €Å€íÿå ÿ™ÿ¨ÿ≤€åÿßÿ™ ⁄©Ÿà ÿ®ŸÑÿß⁄© ⁄©ÿ±ÿ™ÿß €Å€íÿå ÿßŸàÿ± ŸàŸÇŸÅ€í ⁄©ÿß Ÿæÿ™€Å ⁄ÜŸÑŸÜ€í Ÿæÿ± ÿÆŸàÿØ ÿ®ÿÆŸàÿØ ÿ¨ÿßÿ±ÿ≠ÿßŸÜ€Å ŸÖŸà⁄à ⁄©Ÿà ŸÅÿπÿßŸÑ ⁄©ÿ±ÿ™ÿß €Å€í€î
// @description:fa      ÿ®Ÿáÿ®ŸàÿØ ÿπŸÖŸÑ⁄©ÿ±ÿØ X.com/Twitter: ÿ≠ÿ∞ŸÅ CSS ÿ≥ŸÜ⁄Ø€åŸÜÿå ŸÖÿ≠ÿØŸàÿØ ⁄©ÿ±ÿØŸÜ FPSÿå ŸÖÿ≠ÿØŸàÿØ ⁄©ÿ±ÿØŸÜ ÿßŸÜÿØÿßÿ≤Ÿá DOMÿå ÿ™ŸàŸÇŸÅ Ÿà€åÿØ€åŸàŸáÿß€å ÿÆÿßÿ±ÿ¨ ÿßÿ≤ ÿµŸÅÿ≠Ÿáÿå ŸÖÿ≥ÿØŸàÿØ ⁄©ÿ±ÿØŸÜ ÿ™ÿ¨ÿ≤€åŸá Ÿà ÿ™ÿ≠ŸÑ€åŸÑ Ÿà ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ÿÆŸàÿØ⁄©ÿßÿ± ÿ≠ÿßŸÑÿ™ ÿ™Ÿáÿßÿ¨ŸÖ€å ŸáŸÜ⁄ØÿßŸÖ ÿ™ÿ¥ÿÆ€åÿµ ÿ™ÿßÿÆ€åÿ±.
// @description:he      ◊©◊§◊® ◊ê◊™ ◊î◊ë◊ô◊¶◊ï◊¢◊ô◊ù ◊©◊ú X.com/Twitter: ◊û◊°◊ô◊® CSS ◊õ◊ë◊ì, ◊û◊ï◊ï◊°◊™ FPS, ◊û◊í◊ë◊ô◊ú ◊ê◊™ ◊í◊ï◊ì◊ú ◊î-DOM, ◊û◊©◊î◊î ◊°◊®◊ò◊ï◊†◊ô◊ù ◊û◊ó◊ï◊• ◊ú◊û◊°◊ö, ◊ó◊ï◊°◊ù ◊ê◊†◊ú◊ô◊ò◊ô◊ß◊î ◊ï◊û◊§◊¢◊ô◊ú ◊ê◊ï◊ò◊ï◊û◊ò◊ô◊™ ◊û◊¶◊ë ◊ê◊í◊®◊°◊ô◊ë◊ô ◊õ◊ê◊©◊® ◊û◊ñ◊ï◊î◊î ◊î◊©◊î◊ô◊î.
// @description:sw      Boresha utendaji wa X.com/Twitter: huondoa CSS nzito, hupunguza FPS, hupunguza ukubwa wa DOM, husitisha video zilizo nje ya skrini, huzuia uchanganuzi, na huwasha kiotomatiki hali ya fujo wakati ucheleweshaji unapogunduliwa.
// @description:af      Verbeter X.com/Twitter se werkverrigting: verwyder swaar CSS, smoor FPS, beperk DOM-grootte, onderbreek video's buite die skerm, blokkeer analise, en aktiveer outomaties aggressiewe modus wanneer vertraging bespeur word.

// @author       Oppai1442
// @namespace    https://greasyfork.org/users/oppai1442
// @license      MIT
// @homepageURL  https://greasyfork.org/scripts/553367-x-com-heavy-js-optimizer
// @version      1.3.9
// @icon         https://x.com/favicon.ico
// @match        *://x.com/*
// @match        *://twitter.com/*
// @grant        GM_registerMenuCommand
// @run-at       document-start
// @inject-into  auto
// @downloadURL https://update.greasyfork.org/scripts/553367/%F0%9F%A7%A0%20Xcom%20Heavy%20JS%20Optimizer%2B.user.js
// @updateURL https://update.greasyfork.org/scripts/553367/%F0%9F%A7%A0%20Xcom%20Heavy%20JS%20Optimizer%2B.meta.js
// ==/UserScript==

(() => {
  'use strict';

  // =======================
  // 1) CONFIG (userscript context)
  // =======================
  const LS_KEY_MODE = '__x_opt_aggressive__';
  const LS_KEY_LIMIT = '__x_opt_limit__';
  const LS_KEY_BLOCK_METRICS = '__x_opt_block_metrics__';
  const LS_KEY_NUKE_PRELOAD = '__x_opt_nuke_preload__';
  const LS_KEY_LANG = '__x_opt_lang__';

  const LANG = (localStorage.getItem(LS_KEY_LANG) || navigator.language || 'en')
    .toLowerCase().startsWith('vi') ? 'vi' : 'en';

  const readBool = (k, def = false) => {
    const v = localStorage.getItem(k);
    if (v == null) return def;
    return v === '1';
  };

  const I18N = {
    vi: {
      aggressive: (on) => `Aggressive: ${on ? 'ON' : 'OFF'}`,
      limitTitle: (n) => `Gi·ªõi h·∫°n tweet DOM (hi·ªán: ${n})`,
      limitPrompt: 'Gi·ªØ t·ªëi ƒëa bao nhi√™u tweet trong DOM? (0 = kh√¥ng gi·ªõi h·∫°n)',
      blockMetrics: (on) => `Block metrics r√°c: ${on ? 'ON' : 'OFF'}`,
      nukePreload: (on) => `Nuke preload/prefetch: ${on ? 'ON' : 'OFF'}`,
    },
    en: {
      aggressive: (on) => `Aggressive: ${on ? 'ON' : 'OFF'}`,
      limitTitle: (n) => `Tweet DOM limit (current: ${n})`,
      limitPrompt: 'Max tweets to keep in DOM? (0 = unlimited)',
      blockMetrics: (on) => `Block noisy metrics: ${on ? 'ON' : 'OFF'}`,
      nukePreload: (on) => `Nuke preload/prefetch: ${on ? 'ON' : 'OFF'}`,
    }
  };

  const T = I18N[LANG];

  const cfg = {
    AGGRESSIVE: readBool(LS_KEY_MODE, false),
    LIMIT_FEED: Math.max(0, parseInt(localStorage.getItem(LS_KEY_LIMIT) ?? '70', 10) || 0),
    BLOCK_METRICS: readBool(LS_KEY_BLOCK_METRICS, true),
    NUKE_PRELOAD: readBool(LS_KEY_NUKE_PRELOAD, readBool(LS_KEY_MODE, false)),
  };

  // =======================
  // 2) MENU (userscript context)
  // =======================
  if (typeof GM_registerMenuCommand === 'function') {
    GM_registerMenuCommand(T.aggressive(cfg.AGGRESSIVE), () => {
      localStorage.setItem(LS_KEY_MODE, cfg.AGGRESSIVE ? '0' : '1');
      location.reload();
    });

    GM_registerMenuCommand(T.limitTitle(cfg.LIMIT_FEED), () => {
      const v = prompt(T.limitPrompt, String(cfg.LIMIT_FEED));
      if (v == null) return;
      const n = Math.max(0, parseInt(v, 10) || 0);
      localStorage.setItem(LS_KEY_LIMIT, String(n));
      location.reload();
    });

    GM_registerMenuCommand(T.blockMetrics(cfg.BLOCK_METRICS), () => {
      localStorage.setItem(LS_KEY_BLOCK_METRICS, cfg.BLOCK_METRICS ? '0' : '1');
      location.reload();
    });

    GM_registerMenuCommand(T.nukePreload(cfg.NUKE_PRELOAD), () => {
      localStorage.setItem(LS_KEY_NUKE_PRELOAD, cfg.NUKE_PRELOAD ? '0' : '1');
      location.reload();
    });
    GM_registerMenuCommand(`Language: ${LANG.toUpperCase()}`, () => {
      const next = (LANG === 'vi') ? 'en' : 'vi';
      localStorage.setItem(LS_KEY_LANG, next);
      location.reload();
    });
  }

  // =======================
  // 3) CSS (userscript context) ‚Äî nh·∫π, √≠t r·ªßi ro
  // =======================
  const injectCSSOnce = (css, id) => {
    if (id && document.getElementById(id)) return;
    const el = document.createElement('style');
    if (id) el.id = id;
    el.textContent = css;
    (document.head || document.documentElement).appendChild(el);
  };

  injectCSSOnce(`
    /* Gi·∫£m compositor n·∫∑ng */
    * { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }
    [style*="backdrop-filter"], [style*="filter: blur"], *[style*="blur("] { filter: none !important; }

    html, body { scroll-behavior: auto !important; }

    /* Offscreen render: l·ª£i cho feed d√†i */
    article[role="article"], [data-testid="cellInnerDiv"], [data-testid="sidebarColumn"] {
      content-visibility: auto !important;
      contain: layout paint style !important;
      contain-intrinsic-size: 800px !important;
    }

    /* D·ªçn b√≥ng/gradient */
    [class*="shadow"], [style*="box-shadow"] { box-shadow: none !important; }
    [class*="gradient"], [class*="bg-gradient"], [style*="linear-gradient("] { background-image: none !important; }

    video { transform: none !important; will-change: auto !important; background-color: black !important; }
    * { will-change: auto !important; }
    ${cfg.AGGRESSIVE ? '* { animation: none !important; transition: none !important; }' : ''}
  `, 'oppai1442-xopt-css');

  // =======================
  // 4) PAGE CONTEXT INJECTION (ƒÉn ch·∫Øc)
  // =======================
  function main(cfg) {
    const TAG = '[Oppai1442] X-Optimizer';
    const {
      AGGRESSIVE,
      LIMIT_FEED,
      BLOCK_METRICS,
      NUKE_PRELOAD,
    } = cfg;

    // -------- Config n·ªôi b·ªô --------
    const TARGET_FPS = 45;
    const LONGTASK_AUTO_ON_MS = 1500;
    const LONGTASK_ULTRA_ON_MS = 3000;

    let useRAFCap = !!AGGRESSIVE;
    let minInterval = AGGRESSIVE ? 100 : 0;
    let ultraMode = false;

    const onReady = (fn) =>
      (document.readyState === 'loading')
        ? document.addEventListener('DOMContentLoaded', fn, { once: true })
        : fn();

    const innerInjectCSSOnce = (css, id) => {
      if (id && document.getElementById(id)) return;
      const el = document.createElement('style');
      if (id) el.id = id;
      el.textContent = css;
      (document.head || document.documentElement).appendChild(el);
    };

    console.log(`${TAG} Page Context active`);

    // -------- 0) Kill React DevTools hook (nh·∫π) --------
    try {
      delete window.__REACT_DEVTOOLS_GLOBAL_HOOK__;
      Object.defineProperty(window, '__REACT_DEVTOOLS_GLOBAL_HOOK__', {
        value: {},
        writable: false,
        configurable: false
      });
    } catch { }

    // -------- 1) Passive listeners cho scroll/touch/wheel --------
    (function patchEventsPassive() {
      const origAdd = EventTarget.prototype.addEventListener;
      const passiveEvents = new Set(['touchstart', 'touchmove', 'wheel', 'mousewheel', 'scroll']);
      EventTarget.prototype.addEventListener = function (type, listener, options) {
        if (passiveEvents.has(type)) {
          if (options == null) options = { passive: true };
          else if (typeof options === 'boolean') options = { capture: options, passive: true };
          else if (typeof options === 'object' && options.passive == null) options = { ...options, passive: true };
        }
        return origAdd.call(this, type, listener, options);
      };
    })();

    // -------- 2) Nuke preload/prefetch/modulepreload (tu·ª≥ ch·ªçn) --------
    const removePreloads = () => {
      document
        .querySelectorAll('link[rel="preload"], link[rel="prefetch"], link[rel="modulepreload"]')
        .forEach(l => l.remove());
    };

    if (NUKE_PRELOAD) {
      // ch·∫°y s·ªõm + theo d√µi th√™m
      onReady(removePreloads);

      // Throttle observer c·ªßa *m√¨nh* (kh√¥ng override global MO)
      let plScheduled = false;
      const plObs = new MutationObserver(() => {
        if (plScheduled) return;
        plScheduled = true;
        requestAnimationFrame(() => {
          plScheduled = false;
          try { removePreloads(); } catch { }
        });
      });
      plObs.observe(document.documentElement, { childList: true, subtree: true });
    }

    // -------- 3) Block metrics (fetch + XHR + sendBeacon) --------
    if (BLOCK_METRICS) {
      const noisy = /\/(client_event|impression|engagement|scribe|metrics|ad_event)/i;

      // fetch
      try {
        const origFetch = window.fetch?.bind(window);
        if (origFetch) {
          window.fetch = (input, init) => {
            try {
              const url = (typeof input === 'string') ? input : (input?.url ?? '');
              if (noisy.test(url)) return Promise.resolve(new Response(null, { status: 204 }));
            } catch { }
            return origFetch(input, init);
          };
        }
      } catch { }

      // XHR
      try {
        const OrigXHR = window.XMLHttpRequest;
        if (OrigXHR && OrigXHR.prototype) {
          const origOpen = OrigXHR.prototype.open;
          const origSend = OrigXHR.prototype.send;

          OrigXHR.prototype.open = function (method, url, ...rest) {
            try { this.__xopt_url = String(url || ''); } catch { }
            return origOpen.call(this, method, url, ...rest);
          };

          OrigXHR.prototype.send = function (...args) {
            try {
              const u = this.__xopt_url || '';
              if (noisy.test(u)) {
                try { this.abort(); } catch { }
                // gi·∫£ l·∫≠p "xong" ƒë·ªÉ tr√°nh caller treo
                try {
                  Object.defineProperty(this, 'readyState', { value: 4, configurable: true });
                  Object.defineProperty(this, 'status', { value: 204, configurable: true });
                } catch { }
                return;
              }
            } catch { }
            return origSend.apply(this, args);
          };
        }
      } catch { }

      // sendBeacon: ch·ªâ block metrics, kh√¥ng ch·∫∑n t·∫•t c·∫£ (ƒë·ª° b·ªÉ)
      try {
        const origBeacon = navigator.sendBeacon?.bind(navigator);
        if (origBeacon) {
          navigator.sendBeacon = (url, data) => {
            try {
              if (noisy.test(String(url || ''))) return true;
            } catch { }
            try { return origBeacon(url, data); } catch { return true; }
          };
        } else {
          // fallback
          navigator.sendBeacon = () => true;
        }
      } catch { }
    }

    // -------- 4) Throttle timers + rAF cap (aggressive/auto) --------
    const origRAF = window.requestAnimationFrame.bind(window);
    const origSetInterval = window.setInterval.bind(window);
    const origSetTimeout = window.setTimeout.bind(window);

    let lastRAF = 0;

    window.setTimeout = (fn, delay, ...args) => {
      const d = (delay == null || delay < minInterval) ? (minInterval || delay || 0) : delay;
      return origSetTimeout(fn, d, ...args);
    };

    window.setInterval = (fn, delay, ...args) => {
      const d = (delay == null || delay < minInterval) ? (minInterval || delay || 0) : delay;
      return origSetInterval(fn, d, ...args);
    };

    window.requestAnimationFrame = (cb) => {
      if (!useRAFCap) return origRAF(cb);
      return origRAF((ts) => {
        if (ts - lastRAF >= (1000 / TARGET_FPS)) {
          lastRAF = ts;
          try { cb(ts); } catch { }
        } else {
          origRAF(cb);
        }
      });
    };

    // -------- 5) Media optimization: video + img --------
    let playingNow = null;

    const optimizeVideo = (v) => {
      if (!v || v.__xopt_done) return;
      v.__xopt_done = true;

      try {
        v.autoplay = false;
        v.loop = false;
        v.preload = 'metadata';
      } catch { }

      v.addEventListener('play', () => {
        if (playingNow && playingNow !== v) {
          try { playingNow.pause(); } catch { }
        }
        playingNow = v;
      }, { passive: true });
    };

    const tuneImg = (img) => {
      if (!img) return;
      try { img.loading = 'lazy'; } catch { }
      try { img.decoding = 'async'; } catch { }
      try { img.fetchPriority = 'low'; } catch { }
    };

    const scanMedia = (root = document) => {
      if (!root || typeof root.querySelectorAll !== 'function') return;
      root.querySelectorAll('video').forEach(optimizeVideo);
      root.querySelectorAll('img').forEach(tuneImg);
    };

    onReady(scanMedia);

    // Throttle callback observer c·ªßa m√¨nh
    let moBuf = [];
    let moScheduled = false;

    const mediaObs = new MutationObserver((muts) => {
      moBuf.push(...muts);
      if (moScheduled) return;
      moScheduled = true;

      requestAnimationFrame(() => {
        moScheduled = false;
        const batch = moBuf.splice(0);
        for (const m of batch) {
          for (const n of (m.addedNodes || [])) {
            if (n && n.nodeType === 1) {
              if (n.tagName === 'VIDEO') optimizeVideo(n);
              else if (n.tagName === 'IMG') tuneImg(n);
              else scanMedia(n);
            }
          }
        }
      });
    });

    mediaObs.observe(document.documentElement, { childList: true, subtree: true });

    // Pause video offscreen
    try {
      const io = new IntersectionObserver((entries) => {
        for (const e of entries) {
          const v = e.target;
          if (!(v instanceof HTMLVideoElement)) continue;
          if (!e.isIntersecting) {
            try { v.pause(); } catch { }
          }
        }
      }, { root: null, threshold: 0.001 });

      onReady(() => document.querySelectorAll('video').forEach(v => io.observe(v)));
    } catch { }

    // Pause h·∫øt khi tab ·∫©n
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        document.querySelectorAll('video').forEach(v => { try { v.pause(); } catch { } });
      }
    }, { passive: true });

    // -------- 6) Feed GC (kh√¥ng gi·∫≠t scroll) --------
    // Thay v√¨ display:none -> d√πng content-visibility:hidden + kh√≥a height.
    // V·ª´a gi·∫£m paint/layout cost, v·ª´a gi·ªØ layout ƒë·ªÉ kh·ªèi ‚Äút·ª•t m·∫π scroll‚Äù.
    const pruneTweet = (el) => {
      if (!el || el.__xopt_pruned) return;
      el.__xopt_pruned = true;

      // lock height tr∆∞·ªõc khi hide content
      let h = 0;
      try { h = Math.max(0, Math.floor(el.getBoundingClientRect().height || 0)); } catch { }
      if (!h) h = 800; // fallback

      try {
        el.style.contain = 'layout paint style';
        el.style.contentVisibility = 'hidden';
        el.style.containIntrinsicSize = `${h}px`;
        el.style.height = `${h}px`;
        el.style.overflow = 'hidden';
      } catch { }

      // gi·∫£i ph√≥ng decode
      try {
        el.querySelectorAll('video').forEach(v => { try { v.pause(); } catch { } });
      } catch { }
    };

    const gcFeed = () => {
      if (!LIMIT_FEED) return;

      const nodes = document.querySelectorAll('article[role="article"]');
      if (nodes.length <= LIMIT_FEED) return;

      const over = nodes.length - LIMIT_FEED;

      // Prune nh·ªØng c√°i c≈© nh·∫•t (·ªü top)
      for (let i = 0; i < over; i++) {
        pruneTweet(nodes[i]);
      }
    };

    window.setInterval(gcFeed, 1500);

    // -------- 7) Longtask auto-toggle Aggressive/Ultra --------
    try {
      let bucket = 0;

      const po = new PerformanceObserver((list) => {
        for (const e of list.getEntries()) bucket += (e.duration || 0);
      });

      po.observe({ type: 'longtask', buffered: true });

      window.setInterval(() => {
        const total = bucket; bucket = 0;

        if (!useRAFCap && total > LONGTASK_AUTO_ON_MS) {
          useRAFCap = true;
          minInterval = 100;
          console.warn(`${TAG} Aggressive ON (auto) longtasks=${total | 0}ms`);
        }

        if (!ultraMode && total > LONGTASK_ULTRA_ON_MS) {
          ultraMode = true;
          useRAFCap = true;
          minInterval = 150;

          innerInjectCSSOnce(
            `.xopt-ultra *{ animation:none!important; transition:none!important; }`,
            'oppai1442-xopt-ultra-css'
          );
          document.documentElement.classList.add('xopt-ultra');

          console.warn(`${TAG} ULTRA ON longtasks=${total | 0}ms`);
        }
      }, 5000);
    } catch { }
  }

  function waitForNonceAndInject({ timeoutMs = 3000, intervalMs = 50 } = {}) {
    const start = performance.now();

    const tick = () => {
      const s = document.querySelector('script[nonce]');
      const nonce = s?.nonce || s?.getAttribute('nonce');

      if (nonce) {
        const script = document.createElement('script');
        script.setAttribute('nonce', nonce);
        script.textContent = '(' + main.toString() + ')(' + JSON.stringify(cfg) + ');';
        (document.head || document.documentElement).appendChild(script);
        script.remove();
        return;
      }

      if (performance.now() - start >= timeoutMs) {
        // fallback: inject lu√¥n (c√≥ th·ªÉ b·ªã CSP block, nh∆∞ng √≠t nh·∫•t kh√¥ng treo)
        const script = document.createElement('script');
        script.textContent = '(' + main.toString() + ')(' + JSON.stringify(cfg) + ');';
        (document.head || document.documentElement).appendChild(script);
        script.remove();
        return;
      }

      setTimeout(tick, intervalMs);
    };

    tick();
  }

  waitForNonceAndInject({ timeoutMs: 3000, intervalMs: 50 });

})();