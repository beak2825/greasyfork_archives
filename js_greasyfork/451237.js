// ==UserScript==
// @name         唯品会
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  优化网页性能（0） 去除多余页面组件、页面登录弹窗 扩展商品、尺码详情栏 自动复制衣服详细材质 F9获取商品编码 F8重新获取衣服材质
// @author       Yrin
// @match        *://detail.vip.com/*
// @grant        none
// @license 唯品会
// @downloadURL https://update.greasyfork.org/scripts/451237/%E5%94%AF%E5%93%81%E4%BC%9A.user.js
// @updateURL https://update.greasyfork.org/scripts/451237/%E5%94%AF%E5%93%81%E4%BC%9A.meta.js
// ==/UserScript==

document.querySelector("#vip-common-header").parentNode.removeChild(document.querySelector("#vip-common-header")),document.querySelector(".M-recommend").parentNode.removeChild(document.querySelector(".M-recommend")),document.querySelector("#J-footerArea").parentNode.removeChild(document.querySelector("#J-footerArea")),document.querySelector("#J-safeguard-icon").parentNode.removeChild(document.querySelector("#J-safeguard-icon")),document.querySelector(".M-detail").style.float="none",document.querySelector(".M-placeholder").style.float="none",window.onload=function(){setTimeout(function(){var e=document.cookie,t=e.indexOf("vip_access_times=");if(-1!=t){var o=e.indexOf("=",t)+1,n=e.indexOf(";",t);-1==n&&(n=e.length),123!=unescape(e.substring(o,n))&&(console.log("执行"),document.cookie="vip_access_times=123")}},600);const e=document.createElement("style");e.innerText=".demo {animation: demo 1s .5s forwards;}@keyframes demo {form {top: 30%;opacity: 100%;}to {top: 10%;opacity: 0%;}}html,body {position: relative;top: 0;}.tip {overflow:hidden;z-index: 999;position: fixed;top: 30%;left: 50%;transform: translate(-50%, 0);width: auto;height: 30px;line-height: 30px;padding: 3px 20px;border-radius: 5px;font-size: 14px;font-weight: 400;cursor: pointer;color: #fff;}.success {background-color: rgba(46, 204, 113, 1);border: 1px solid rgba(46, 204, 113, 0.6);box-shadow: 0 0px 15px 5px rgba(46, 204, 113, 0.2);}.fail {background-color: rgba(255, 51, 51, 1);border: 1px solid rgba(255, 51, 51, 0.6);box-shadow: 0 0px 15px 5px rgba(255, 51, 51, 0.2);}.demo {}@keyframes demo {form {top: 30%;opacity: 100%;}to {top: 10%;opacity: 0%;}}",document.querySelector("head").appendChild(e);const t=document.createElement("script");function o(e,t){e?navigator.clipboard.writeText(e).then(()=>{copyEle(e)}).catch(o=>{if(document.execCommand("copy")){const t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",e),t.select(),document.execCommand("copy"),document.body.removeChild(t),copyEle(e)}else copyEle(!1,t)}):copyEle(!1,t)}t.innerHTML="function copyEle(val, status) {\n\tsetTimeout(function() {\n\t\tconst newTip = document.createElement('div');\n\t\tconst eleTotal = document.querySelectorAll('.tip');\n\t\tif (eleTotal[0]) {\n\t\t\tnewTip.style.top = eleTotal[eleTotal.length - 1].offsetTop + 40 + 'px';\n\t\t}\n\t\tif (val) {\n\t\t\tnewTip.innerHTML =\n\t\t\t\t\"复制成功：{\" + val + \"}\";\n\t\t\tnewTip.classList.add('tip', 'success', 'demo');\n\t\t\tconsole.log(!document.querySelector('.success'));\n\t\t\tdocument.body.appendChild(newTip);\n\t\t} else {\n\t\t\tif (status == 'itemNo') {\n\t\t\t\tnewTip.innerHTML =\n\t\t\t\t\t\"复制失败：{ 稍等页面加载完毕后重试 }\";\n\t\t\t} else {\n\t\t\t\tnewTip.innerHTML = \"复制失败：{ 文档未焦距，稍等下网页加载完毕后刷新重试 }\";\n\t\t\t}\n\t\t\tnewTip.classList.add('tip', 'fail', 'demo');\n\t\t\t document.body.appendChild(newTip);\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\tdocument.querySelectorAll('.tip')[0].parentNode.removeChild(document.querySelectorAll(\n\t\t\t\t'.tip')[0])\n\t\t}, 1300);\n\t});\n}\n",document.body.appendChild(t),setTimeout(function(){document.querySelector(".J_dc_info")&&document.querySelector(".J_dc_info").classList.add("dc-table-more"),document.querySelector(".J-wrap-sizeTable")&&document.querySelector(".J-wrap-sizeTable").classList.add("size-table-more"),o(Object.values(document.querySelectorAll(".dc-table-tit")).find(function(e){return"详细材质信息："==e.innerText}).nextElementSibling.innerText)},600),document.addEventListener("keyup",function(e){if(120==e.keyCode){const t=document.querySelector("#J_detail_barCode").innerText;120==e.keyCode&&o("商品编码"==t.split("：")[0]&&t.split("：")[1],"itemNo")}}),document.addEventListener("keyup",function(e){119==e.keyCode&&o(Object.values(document.querySelectorAll(".dc-table-tit")).find(function(e){return"详细材质信息："==e.innerText}).nextElementSibling.innerText)})};
