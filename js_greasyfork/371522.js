// ==UserScript==
// @name         re:Anime
// @version      4.20
// @description  Michał Białek kończył nocną wartę w serwerowni wykopu...
// @author       Zamaskowany_Kotek
// @match        http://www.wykop.pl/*
// @match        https://www.wykop.pl/*
// @grant        GM_addStyle
// @namespace https://greasyfork.org/users/207472
// @downloadURL https://update.greasyfork.org/scripts/371522/re%3AAnime.user.js
// @updateURL https://update.greasyfork.org/scripts/371522/re%3AAnime.meta.js
// ==/UserScript==

var a=['ZnVuY3Rpb24=','YW1k','dW5kZWZpbmVk','ZXhwb3J0cw==','bWF0Y2g=','dXJs','eXRfc2hvcnQ=','ZmJfdg==','dmFsdWU=','IeOAjHJlOg==','O3VybD0=','O2J1aWxkPQ==','O25zZnc9MDs=','OmXjgI0=','Z2V0RWxlbWVudHNCeUNsYXNzTmFtZQ==','ZW50cnkgaUM=','ZmluZA==','Y2hpbGRyZW4=','dGV4dENvbnRlbnQ=','ZGl2','c2V0QXR0cmlidXRl','bWVkaWEtY29udGVudCB0ZXh0','c3R5bGU=','aW5uZXJIVE1M','PGJyPg==','aW5zZXJ0QWZ0ZXI=','cGFyZW50','ZGVjb21wcmVzc0Zyb21CYXNlNjQ=','c2xpY2U=','44CMTWFzeiBuaWVha3R1YWxuxIUgd2Vyc2rEmSBkb2RhdGt1ICggzaHCsCDNnMqWIM2hwrAp44CNPGEgaHJlZj1odHRwczovL2dyZWFzeWZvcmsub3JnL3BsL3NjcmlwdHMvMzcxNTIyLXJlLWFuaW1lIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0icmVkICI+PT4gPGI+WmFrdHVhbGl6dWo8L2I+IDw9PC9hPg==','Ij48L2Rpdj4=','44CMSmFracWbIGLFgsSFZCDCr1xfKOODhClfL8Kv44CN','aW1n','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48YSBocmVmPSI=','IiByZWw9ImxpZ2h0Ym94W3ddIiBkYXRhLW9wZW49IjEiIGNsYXNzPSIiPjxpbWcgc3JjPSI=','IiBjbGFzcz0iYmxvY2siIHRpdGxlPSIiIHN0eWxlPSIiPjwvYT48L3A+PC9kaXY+','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48cD4=','IiByZWw9Im5vb3BlbmVyIj4=','PC9hPjwvZGl2Pg==','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48aWZyYW1lIGlkPSJ5dC0=','IiBjbGFzcz0ieW91dHViZS1wbGF5ZXIgdnRvcCIgdHlwZT0idGV4dC9odG1sIiBzcmM9Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLw==','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48aWZyYW1lIHNyYz0iaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3BsdWdpbnMvdmlkZW8ucGhwP2hyZWY9','JnNob3dfdGV4dD0wJndpZHRoPTU2MCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0ODUiIHN0eWxlPSJib3JkZXI6bm9uZTtvdmVyZmxvdzpoaWRkZW4iIHNjcm9sbGluZz0ibm8iIGZyYW1lYm9yZGVyPSIwIiBhbGxvd1RyYW5zcGFyZW5jeT0idHJ1ZSIgYWxsb3dGdWxsU2NyZWVuPSJ0cnVlIj48L2lmcmFtZT48L2Rpdj4=','d2VibQ==','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48dmlkZW8gd2lkdGg9IjgwMCIgaGVpZ2h0PSI0ODUiIGNvbnRyb2xzPSIiPjxzb3VyY2Ugc3JjPSI=','IiBzb3VyY2U9InZpZGVvL3dlYm0iPjwvc291cmNlPjwvdmlkZW8+PC9kaXY+','PGRpdiBjbGFzcz0idmlkZW9XcmFwcGVyIHJlIj48aWZyYW1lIHNyYz0iLy9jb3ViLmNvbS9lbWJlZC8=','P211dGVkPWZhbHNlJmF1dG9zdGFydD1mYWxzZSZvcmlnaW5hbFNpemU9ZmFsc2Umc3RhcnRXaXRoSEQ9dHJ1ZSIgYWxsb3dmdWxsc2NyZWVuIGZyYW1lYm9yZGVyPSIwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjQ4NSIgYWxsb3c9ImF1dG9wbGF5Ij48L2lmcmFtZT48L2Rpdj4=','cHJvcA==','Lm1mVXBsb2FkSG9sZGVy','dGV4dGFyZWFbbmFtZT1ib2R5XQ==','Y2xpY2s=','LnJlX2J0bg==','I2FuaW1lX2J0bg==','YW5pbWU=','I21uZ19idG4=','bWFuZ293cGlz','I3JldXJsX2J0bg==','UG9kYWogdXJsOg==','I3JlZmlsZV9idG4=','cHJldmVudERlZmF1bHQ=','Lm5zZndfYnRu','YWRkQ2xhc3M=','cmVtb3ZlQ2xhc3M=','dHJpZ2dlcg==','I2l0ZW1zU3RyZWFt','YWRkZWROb2Rlcw==','LnRleHQ=','ICAgIC5yb3cuYnV0dG9ucy5kbm9uZXsgbGluZS1oZWlnaHQ6IDMycHg7fSAgICAubnNmd19vbnsgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjMjBiMGI7ICAgIH0gICAgLnZpZGVvV3JhcHBlci5yZXsgcGFkZGluZy10b3A6IDBweDt9','Y3JlYXRlRWxlbWVudA==','Y2xhc3M=','YnV0dG9uIHJlX2J0biBhbmltZV9idG4=','YnV0dG9uIHJlX2J0bg==','cmFzX2J0bg==','bW5nX2J0bg==','cmV1cmxfYnRu','I2FuaW1l','I3Jhcw==','I21hbmdv','44CMK3VybOOAjQ==','44CMK3BsaWvjgI0=','44CMbnNmd+OAjQ==','ZmllbGRzZXRbY2xhc3M9InJvdyBidXR0b25zIGRub25lIl0=','d3JhcEFsbA==','PHA+PC9wPg==','YXBwZW5k','Y3VycmVudFRhcmdldA==','YWx0','cmVtb3Zl','Z2V0','ZmlsZXM=','Y2hhbmdl','cGFzdGU=','Y2xpcGJvYXJkRGF0YQ==','b3JpZ2luYWxFdmVudA==','aXRlbXM=','a2luZA==','ZmlsZQ==','Z2V0QXNGaWxl','aHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2U=','MGMwNTM5YzNjN2M1OGVi','UE9TVA==','Q2xpZW50LUlEIA==','YXBwbGljYXRpb24vanNvbg==','bXVsdGlwYXJ0L2Zvcm0tZGF0YQ==','YWpheA==','bG9n','cGFyc2U=','bGluaw==','QsWCxIVkIHdncnl3YW5pYSBwbGlrdSAoIM2hwrAgypbMryDNocKwKS4gU3ByYXdkxbogcG/FgsSFY3plbmllIHogaW50ZXJuZXRlbS4=','I2Zvb3Rlcg==','YWZ0ZXI=','PGlucHV0IHR5cGU9ImZpbGUiIGlkPSJvRkQiIGRhdGEtbWF4LXNpemU9IjIwTWlCIj4=','I29GRA==','Y3Nz','Y2hhckF0','ZnJvbUNoYXJDb2Rl','QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0=','QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLSQ=','X2NvbXByZXNz','bGVuZ3Ro','PT09','X2RlY29tcHJlc3M=','Y2hhckNvZGVBdA==','Y29tcHJlc3M=','ZGVjb21wcmVzcw==','cHVzaA==','am9pbg==','cmVwbGFjZQ==','cHJvdG90eXBl','aGFzT3duUHJvcGVydHk=','Y2FsbA==','cG93','dmFs','cG9zaXRpb24=','aW5kZXg='];(function(x,y){(function(B){for(;--B;)x.push(x.shift())})(++y)})(a,246);var b=function(x){x-=0;var A=a[x];void 0===b.fmaQWM&&(function(){var D=function(){var G;try{G=Function('return (function() {}.constructor("return this")( ));')()}catch(H){G=window}return G}();D.atob||(D.atob=function(G){for(var J,K,H=(G+'').replace(/=+$/,''),I=0,L=0,N='';K=H.charAt(L++);~K&&(J=I%4?64*J+K:K,I++%4)?N+=String.fromCharCode(255&J>>(6&-2*I)):0)K='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.indexOf(K);return N})}(),b.VEVYfA=function(C){for(var D=atob(C),F=[],G=0,H=D.length;G<H;G++)F+='%'+('00'+D.charCodeAt(G).toString(16)).slice(-2);return decodeURIComponent(F)},b.cQbvny={},b.fmaQWM=!0);var B=b.cQbvny[x];return void 0===B?(A=b.VEVYfA(A),b.cQbvny[x]=A):A=B,A},build_ver=420;$(b('0x0'))[b('0x1')](b('0x2')),$(b('0x3'))[b('0x4')]('opacity','0');var LZString=function(){function x(F,G){if(!C[F]){C[F]={};for(var H=0;H<F.length;H++)C[F][F[b('0x5')](H)]=H}return C[F][G]}var y=String[b('0x6')],A=b('0x7'),B=b('0x8'),C={},D={compressToBase64:function(F){if(null==F)return'';var G=D[b('0x9')](F,6,function(H){return A[b('0x5')](H)});switch(G[b('0xa')]%4){default:case 0:return G;case 1:return G+b('0xb');case 2:return G+'==';case 3:return G+'=';}},decompressFromBase64:function(F){return null==F?'':''==F?null:D[b('0xc')](F[b('0xa')],32,function(G){return x(A,F[b('0x5')](G))})},compressToUTF16:function(F){return null==F?'':D[b('0x9')](F,15,function(G){return y(G+32)})+' '},decompressFromUTF16:function(F){return null==F?'':''==F?null:D[b('0xc')](F[b('0xa')],16384,function(G){return F[b('0xd')](G)-32})},compressToUint8Array:function(F){for(var K,G=D[b('0xe')](F),H=new Uint8Array(2*G[b('0xa')]),I=0,J=G[b('0xa')];J>I;I++)K=G[b('0xd')](I),H[2*I]=K>>>8,H[2*I+1]=K%256;return H},decompressFromUint8Array:function(F){if(null===F||void 0===F)return D[b('0xf')](F);for(var G=Array(F[b('0xa')]/2),H=0,I=G[b('0xa')];I>H;H++)G[H]=256*F[2*H]+F[2*H+1];var J=[];return G.forEach(function(K){J[b('0x10')](y(K))}),D[b('0xf')](J[b('0x11')](''))},compressToEncodedURIComponent:function(F){return null==F?'':D[b('0x9')](F,6,function(G){return B[b('0x5')](G)})},decompressFromEncodedURIComponent:function(F){return null==F?'':''==F?null:(F=F[b('0x12')](/ /g,'+'),D[b('0xc')](F[b('0xa')],32,function(G){return x(B,F.charAt(G))}))},compress:function(F){return D[b('0x9')](F,16,function(G){return y(G)})},_compress:function(F,G,H){if(null==F)return'';var I,J,K,L={},N={},P='',Q='',R='',V=2,Z=3,_=2,ba=[],ca=0,da=0;for(K=0;K<F[b('0xa')];K+=1)if(P=F.charAt(K),Object[b('0x13')][b('0x14')][b('0x15')](L,P)||(L[P]=Z++,N[P]=!0),Q=R+P,Object.prototype.hasOwnProperty[b('0x15')](L,Q))R=Q;else{if(Object.prototype[b('0x14')][b('0x15')](N,R)){if(256>R.charCodeAt(0)){for(I=0;_>I;I++)ca<<=1,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++;for(J=R[b('0xd')](0),I=0;8>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J>>=1}else{for(J=1,I=0;_>I;I++)ca=ca<<1|J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J=0;for(J=R[b('0xd')](0),I=0;16>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J>>=1}V--,0==V&&(V=Math[b('0x16')](2,_),_++),delete N[R]}else for(J=L[R],I=0;_>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J>>=1;V--,0==V&&(V=Math[b('0x16')](2,_),_++),L[Q]=Z++,R=P+''}if(''!=R){if(Object.prototype[b('0x14')][b('0x15')](N,R)){if(256>R.charCodeAt(0)){for(I=0;_>I;I++)ca<<=1,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++;for(J=R[b('0xd')](0),I=0;8>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J>>=1}else{for(J=1,I=0;_>I;I++)ca=ca<<1|J,da==G-1?(da=0,ba.push(H(ca)),ca=0):da++,J=0;for(J=R[b('0xd')](0),I=0;16>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba.push(H(ca)),ca=0):da++,J>>=1}V--,0==V&&(V=Math.pow(2,_),_++),delete N[R]}else for(J=L[R],I=0;_>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba.push(H(ca)),ca=0):da++,J>>=1;V--,0==V&&(V=Math[b('0x16')](2,_),_++)}for(J=2,I=0;_>I;I++)ca=ca<<1|1&J,da==G-1?(da=0,ba[b('0x10')](H(ca)),ca=0):da++,J>>=1;for(;;){if(ca<<=1,da==G-1){ba[b('0x10')](H(ca));break}da++}return ba[b('0x11')]('')},decompress:function(F){return null==F?'':''==F?null:D[b('0xc')](F[b('0xa')],32768,function(G){return F[b('0xd')](G)})},_decompress:function(F,G,H){var I,J,K,L,N,P,Q,R,V=[],Z=4,_=4,ba=3,ca='',da=[],ea={val:H(0),position:G,index:1};for(J=0;3>J;J+=1)V[J]=J;for(L=0,P=Math[b('0x16')](2,2),Q=1;Q!=P;)N=ea[b('0x17')]&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea[b('0x18')]=G,ea[b('0x17')]=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;switch(I=L){case 0:for(L=0,P=Math[b('0x16')](2,8),Q=1;Q!=P;)N=ea.val&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea[b('0x18')]=G,ea[b('0x17')]=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;R=y(L);break;case 1:for(L=0,P=Math[b('0x16')](2,16),Q=1;Q!=P;)N=ea[b('0x17')]&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea.position=G,ea[b('0x17')]=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;R=y(L);break;case 2:return'';}for(V[3]=R,K=R,da[b('0x10')](R);;){if(ea[b('0x19')]>F)return'';for(L=0,P=Math[b('0x16')](2,ba),Q=1;Q!=P;)N=ea[b('0x17')]&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea.position=G,ea.val=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;switch(R=L){case 0:for(L=0,P=Math[b('0x16')](2,8),Q=1;Q!=P;)N=ea[b('0x17')]&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea[b('0x18')]=G,ea[b('0x17')]=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;V[_++]=y(L),R=_-1,Z--;break;case 1:for(L=0,P=Math[b('0x16')](2,16),Q=1;Q!=P;)N=ea.val&ea[b('0x18')],ea[b('0x18')]>>=1,0==ea[b('0x18')]&&(ea[b('0x18')]=G,ea[b('0x17')]=H(ea[b('0x19')]++)),L|=(0<N?1:0)*Q,Q<<=1;V[_++]=y(L),R=_-1,Z--;break;case 2:return da[b('0x11')]('');}if(0==Z&&(Z=Math[b('0x16')](2,ba),ba++),V[R])ca=V[R];else{if(R!==_)return null;ca=K+K[b('0x5')](0)}da[b('0x10')](ca),V[_++]=K+ca[b('0x5')](0),Z--,K=ca,0==Z&&(Z=Math[b('0x16')](2,ba),ba++)}}};return D}();b('0x1a')==typeof define&&define[b('0x1b')]?define(function(){return LZString}):b('0x1c')!=typeof module&&null!=module&&(module[b('0x1d')]=LZString);function reUrl(x){var y='text';x[b('0x1e')](/^https?/g)&&(y=b('0x1f')),x.match(/(\.((jpg)|(jpeg)|(png)|(gif))$)|(fbcdn.net\/.*\.(jpg)|(jpeg)|(png)|(gif))|(image\.myanimelist\.net\/ui\/[a-zA-Z0-9\-\_]*)|(twimg\.com\/\w*\/\w*\.(jpg)|(jpeg)|(png)|(gif))|(wordpress.com\/.*?\.((jpg)|(jpeg)|(png)|(gif)))/g)&&(y='img'),x.match(/^https?:\/\/(www\.)?youtube.com\/watch/g)&&(y='yt'),x[b('0x1e')](/^https?:\/\/(www\.)?youtu.be\//g)&&(y=b('0x20')),x[b('0x1e')](/facebook\.com\/.*?\/videos\//g)&&(y=b('0x21')),x[b('0x1e')](/\.webm$/g)&&(y='webm'),x[b('0x1e')](/coub\.com\/view\/\w*/g)&&(y='coub'),closestBody[b('0x22')]=closestBody[b('0x22')]+'\n'+encode(y,x,nsfw)}function encode(x,y){var B=b('0x23')+LZString.compressToBase64('type='+x+b('0x24')+y+b('0x25')+build_ver+b('0x26'))+b('0x27');return B}function decodeAllMessages(){for(var A,x=document[b('0x28')](b('0x29')),y=0;y<x[b('0xa')];y++){A=$(x[y])[b('0x2a')]('.text')[b('0x2b')]('p');for(var B=0;B<A[b('0xa')];B++)A[B][b('0x2c')][b('0x1e')](/「re:.*?:e」/g)&&decodeMessage(A[B])}}function decodeMessage(x){var y=document.createElement(b('0x2d'));y[b('0x2e')]('class',b('0x2f')),y[b('0x2e')](b('0x30'),'border:3px solid #3f87a6;padding:2px;display:block');for(var A=x[b('0x31')],B='',C=A[b('0x1e')](/「re:.*?:e」/g),F=0;F<C.length;F++)0<F&&(B+=b('0x32')),B+=decode(C[F]);A=A[b('0x12')](/「re:.*?:e」(<br>)?/g,''),y[b('0x31')]=B,x[b('0x31')]=A,$(y)[b('0x33')]($(x)[b('0x34')]())}function decode(x){var y=LZString[b('0x35')](x[b('0x36')](4,-3)),A=b('0x37');try{var B=y.match(/type=.*?;/g)[0].slice(5,-1),C=y[b('0x1e')](/url=.*?;/g)[0][b('0x36')](4,-1),D='';if(y[b('0x1e')](/build=\d*?;/g)){var F=y[b('0x1e')](/build=\d*?;/g)[0][b('0x36')](6,-1);if(F>build_ver)return A}if(y[b('0x1e')](/nsfw=\d*?;/g)&&(nsfw=y[b('0x1e')](/nsfw=\d*?;/g)[0][b('0x36')](5,-1),1==nsfw))return'<div class="videoWrapper re"><img class="re_nsfw" src="https://www.wykop.pl/cdn/c2526412/nsfw.jpg" alt="'+encode(B,C,0)+b('0x38')}catch(G){return b('0x39')}switch(B){case b('0x3a'):return b('0x3b')+C+b('0x3c')+C+b('0x3d');break;case'text':return b('0x3e')+C+'</p></div>';break;case b('0x1f'):return b('0x3b')+C+b('0x3f')+C+b('0x40');break;case'yt':return D=C[b('0x1e')](/\?v=[\w\d-_]*/g)[0][b('0x36')](3),b('0x41')+D+b('0x42')+D+'?autoplay=0&amp;wmode=opaque&amp;fs=1&amp;rel=0&amp;autohide=1" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" width="800" height="485" frameborder="0"></iframe></div>';break;case b('0x20'):return D=C[b('0x1e')](/u\.be\/[\w\d-_]*/g)[0][b('0x36')](5),b('0x41')+D+b('0x42')+D+'?autoplay=0&amp;wmode=opaque&amp;fs=1&amp;rel=0&amp;autohide=1" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" width="800" height="485" frameborder="0"></iframe></div>';break;case b('0x21'):return b('0x43')+encodeURIComponent(C)+b('0x44');break;case b('0x45'):return b('0x46')+C+b('0x47');break;case'coub':return D=C[b('0x1e')](/\/view\/[\w\d]*/g)[0][b('0x36')](6),b('0x48')+D+b('0x49');}return A}function setClosestBody(x){closestBody=$($(x)[b('0x4a')]('currentTarget').closest(b('0x4b')))[b('0x2a')](b('0x4c'))[0]}function assignButtons(){$(document).on(b('0x4d'),b('0x4e'),x=>{setClosestBody(x)}),$(document).on(b('0x4d'),b('0x4f'),()=>{closestBody[b('0x22')]=closestBody[b('0x22')]+'\n#'+b('0x50')}),$(document).on('click','#ras_btn',()=>{closestBody[b('0x22')]=closestBody[b('0x22')]+'\n#randomanimeshit'}),$(document).on('click',b('0x51'),()=>{closestBody[b('0x22')]=closestBody.value+'\n#'+b('0x52')}),$(document).on(b('0x4d'),b('0x53'),()=>{reUrl(prompt(b('0x54')))}),$(document).on(b('0x4d'),b('0x55'),x=>{x[b('0x56')](),$(b('0x3')).trigger(b('0x4d'))}),$(document).on(b('0x4d'),b('0x57'),x=>{x.preventDefault(),0==nsfw?(nsfw=1,$(b('0x57'))[b('0x58')]('nsfw_on')):(nsfw=0,$('.nsfw_btn')[b('0x59')]('nsfw_on'))}),$(document).on(b('0x4d'),'.re_btn',x=>{x[b('0x56')](),$(closestBody)[b('0x5a')]('change')})}var stream=document.querySelector(b('0x5b')),observer=new MutationObserver(function(x){x.forEach(function(y){for(var A=$(y[b('0x5c')])[b('0x2a')](b('0x5d'))[b('0x2b')]('p'),B=0;B<A[b('0xa')];B++)A[B][b('0x2c')].match(/「re:.*:e」/g)&&decodeMessage(A[B])})}),config={childList:!0,subtree:!0};observer.observe(stream,config),GM_addStyle(b('0x5e'));var closestBody,nsfw=0,animeButton=document[b('0x5f')]('a'),rasButton=document.createElement('a'),mangoButton=document[b('0x5f')]('a'),reUrlButton=document.createElement('a'),reFileButton=document[b('0x5f')]('a'),reNsfwButton=document[b('0x5f')]('a');animeButton[b('0x2e')](b('0x60'),b('0x61')),animeButton[b('0x2e')]('id','anime_btn'),rasButton[b('0x2e')]('class',b('0x62')),rasButton[b('0x2e')]('id',b('0x63')),mangoButton.setAttribute(b('0x60'),b('0x62')),mangoButton[b('0x2e')]('id',b('0x64')),reUrlButton[b('0x2e')]('class','button re_btn'),reUrlButton.setAttribute('id',b('0x65')),reFileButton[b('0x2e')](b('0x60'),b('0x62')),reFileButton[b('0x2e')]('id','refile_btn'),reNsfwButton[b('0x2e')](b('0x60'),'button nsfw_btn'),animeButton[b('0x2c')]=b('0x66'),rasButton[b('0x2c')]=b('0x67'),mangoButton[b('0x2c')]=b('0x68'),reUrlButton[b('0x2c')]=b('0x69'),reFileButton[b('0x2c')]=b('0x6a'),reNsfwButton.textContent=b('0x6b');var btn_bar=$(b('0x6c'))[0],btn_bar2=document[b('0x5f')]('p');$(btn_bar[b('0x2b')])[b('0x36')](0,-1)[b('0x6d')](b('0x6e')),$(btn_bar[b('0x2b')][0]).after(b('0x32')),$(btn_bar2)[b('0x6f')](animeButton),$(btn_bar2)[b('0x6f')](rasButton),$(btn_bar2)[b('0x6f')](mangoButton),$(btn_bar2)[b('0x6f')](reUrlButton),$(btn_bar2).append(reFileButton),$(btn_bar[b('0x2b')][1])[b('0x1')](btn_bar2),decodeAllMessages(),assignButtons(),$(document).on(b('0x4d'),'img[class="re_nsfw"]',x=>{$(x[b('0x70')])[b('0x1')](decode(x[b('0x70')][b('0x71')][b('0x1e')](/「re:.*?:e」/g)[0]))[b('0x72')]()}),$('input[type=file][id=oFD]').on('change',function(){var x=$(this)[b('0x73')](0)[b('0x74')];x[b('0xa')]&&(upload(x[0]),$(closestBody)[b('0x5a')](b('0x75')))}),$(document).on(b('0x76'),'textarea[name=body]',x=>{var y=(x[b('0x77')]||x[b('0x78')].clipboardData)[b('0x79')];for(index in y){var A=y[index];if(A[b('0x7a')]===b('0x7b')){closestBody=$(x)[0][b('0x70')],upload(A[b('0x7c')]());break}}});function upload(x){var A,B=b('0x7d'),C=b('0x7e'),D=new FormData;D.append('image',x),A={async:!1,crossDomain:!0,processData:!1,contentType:!1,type:b('0x7f'),url:B,success:analyzeResponse,error:uploadError,headers:{Authorization:b('0x80')+C,Accept:b('0x81')},mimeType:b('0x82')},A.data=D,$[b('0x83')](A)}function analyzeResponse(x){console[b('0x84')](x),closestBody[b('0x22')]=closestBody[b('0x22')]+'\n'+encode(b('0x3a'),JSON[b('0x85')](x).data[b('0x86')],nsfw)}function uploadError(){alert(b('0x87'))}