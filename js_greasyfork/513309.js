// ==UserScript==
// @name         心理健康教育答题
// @namespace    http://tampermonkey.net/
// @version      2024-10-20
// @description  抚州心理健康教育答题
// @author       guan
// @match        *.jsbr.org.cn/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=jsbr.org.cn
// @grant        none
// @license      MIT
// @downloadURL https://update.greasyfork.org/scripts/513309/%E5%BF%83%E7%90%86%E5%81%A5%E5%BA%B7%E6%95%99%E8%82%B2%E7%AD%94%E9%A2%98.user.js
// @updateURL https://update.greasyfork.org/scripts/513309/%E5%BF%83%E7%90%86%E5%81%A5%E5%BA%B7%E6%95%99%E8%82%B2%E7%AD%94%E9%A2%98.meta.js
// ==/UserScript==

(function() {
    'use strict';

    // 假设questionBank是一个包含题目和答案的对象数组
    const questionBank = [
        {"qs": "比别人笑的时候更多。", "as": "完全一致"},
        {"qs": "愿意跟任何人打招呼。", "as": "完全一致"},
        {"qs": "有不可示人的不良习惯。", "as": "完全不一致"},
        {"qs": "只要开始玩游戏，哪怕明天要考试也收不住。", "as": "完全不一致"},
        {"qs": "不管做什么事，都不会轻易放弃。", "as": "完全一致"},
        {"qs": "即使失败了，还会再去挑战。", "as": "完全一致"},
        {"qs": "经常感到心烦。", "as": "完全不一致"},
        {"qs": "愿意做朋友托付给自己的事。", "as": "完全一致"},
        {"qs": "我是值得被别人表扬的人。", "as": "完全一致"},
        {"qs": "比别人朋友少。", "as": "完全不一致"},
        {"qs": "有时想骂人。", "as": "完全不一致"},
        {"qs": "是否学习，取决于当时的心情。", "as": "完全不一致"},
        {"qs": "集中精力学习或做事情时，经常忘记时间。", "as": "完全一致"},
        {"qs": "感到伤心时会不由自主地流泪。", "as": "完全不一致"},
        {"qs": "我有别人还不了解的优点。", "as": "完全一致"},
        {"qs": "学习内容太难，跟不上。", "as": "完全不一致"},
        {"qs": "父母经常吵架。", "as": "完全不一致"},
        {"qs": "善解人意。", "as": "完全一致"},
        {"qs": "有时会利用朋友。", "as": "完全不一致"},
        {"qs": "我知道很多自杀的方法。", "as": "完全不一致"},
        {"qs": "父母的唠叨太多了。", "as": "完全不一致"},
        {"qs": "离家出走并不可怕。", "as": "完全不一致"},
        {"qs": "偷过东西。", "as": "完全不一致"},
        {"qs": "跟别人说话，想尽可能温和一些。", "as": "完全一致"},
        {"qs": "感觉胸闷。", "as": "完全不一致"},
        {"qs": "经常和父母吵架。", "as": "完全不一致"},
        {"qs": "周边有我讨厌的人，所以经常躲避他们。", "as": "完全不一致"},
        {"qs": "有时想离家出走。", "as": "完全不一致"},
        {"qs": "经常忘掉作业或重要的约定。", "as": "完全不一致"},
        {"qs": "我的家庭和睦。", "as": "完全一致"},
        {"qs": "对自己做的事情感到自豪，有成就感。", "as": "完全一致"},
        {"qs": "会谅解别人对我做的错事。", "as": "完全一致"},
        {"qs": "我做事时经常有人关注和鼓励。", "as": "完全一致"},
        {"qs": "竭尽全力做好学校交给的任务。", "as": "完全一致"},
        {"qs": "跟初次见面的人也能轻松地交谈。", "as": "完全一致"},
        {"qs": "神经过于敏感、尖刻。", "as": "完全不一致"},
        {"qs": "能够自己主动减少使用电脑的时间。", "as": "完全一致"},
        {"qs": "经常感到有压力。", "as": "完全不一致"},
        {"qs": "比起独自在家，和朋友们在一起更舒服。", "as": "完全一致"},
        {"qs": "我曾经偷窥过。", "as": "完全不一致"},
        {"qs": "自己该做的事情，能够自己做。", "as": "完全一致"},
        {"qs": "当我需要时，有帮助我的朋友。", "as": "完全一致"},
        {"qs": "当我遇到困难的时候，家人会安慰和鼓励我。", "as": "完全一致"},
        {"qs": "即便想玩，也先做好该做的事情。", "as": "完全一致"},
        {"qs": "一想到考试就害怕。", "as": "完全不一致"},
        {"qs": "要做的功课太多。", "as": "完全不一致"},
        {"qs": "偶尔装病。", "as": "完全不一致"},
        {"qs": "有时会撒谎。", "as": "完全不一致"},
        {"qs": "对自己比较满意。", "as": "完全一致"},
        {"qs": "想到未来就充满希望。", "as": "完全一致"},
        {"qs": "不愿意回家。", "as": "完全不一致"},
        {"qs": "对方惹我不开心时，我会告诉他我的感受。", "as": "完全一致"},
        {"qs": "有理解和肯定我的好朋友。", "as": "完全一致"},
        {"qs": "偶尔有想偷东西的念头。", "as": "完全不一致"},
        {"qs": "我经常埋怨自己。", "as": "完全不一致"},
        {"qs": "打过别的小孩。", "as": "完全不一致"},
        {"qs": "即便不必担心被人发现，也总是遵守规则。", "as": "完全一致"},
        {"qs": "别人无理由地看不起我或避开我。", "as": "完全不一致"},
        {"qs": "哪怕碰到小事， 也容易发火。", "as": "完全不一致"},
        {"qs": "和朋友们在一起，又开心、又有趣。", "as": "完全一致"},
        {"qs": "有时有想死的念头。", "as": "完全不一致"},
        {"qs": "听到一点动静，就精神溜号。", "as": "完全不一致"},
        {"qs": "对自己的长相还算满意。", "as": "完全一致"},
        {"qs": "周边经常发生令人愉快的事情。", "as": "完全一致"},
        {"qs": "我是有很多优点的人。", "as": "完全一致"},
        {"qs": "活着很有意义。", "as": "完全一致"},
        {"qs": "我周围有很多好人。", "as": "完全一致"},
        {"qs": "我很珍惜自己。", "as": "完全一致"},
        {"qs": "待人亲切。", "as": "完全一致"},
        {"qs": "只要下决心，就能和别人一样做得好。", "as": "完全一致"},
        {"qs": "很难静静地把注意力集中到一件事情上。", "as": "完全不一致"},
        {"qs": "受同学们排挤。", "as": "完全不一致"},
        {"qs": "经常担心，容易感到不安。", "as": "完全不一致"},
        {"qs": "有听我诉说烦恼的朋友。", "as": "完全一致"},
        {"qs": "感觉太抑郁了，很难受。", "as": "完全不一致"},
        {"qs": "经常体验到孤独感。", "as": "完全不一致"},
        {"qs": "周边有只要和他在一起就很开心的人。", "as": "完全一致"},
        {"qs": "我会听对方把话说完为止。", "as": "完全一致"},
        {"qs": "当我孤独和难受的时候，会有人安慰我。", "as": "完全一致"},
        {"qs": "在家会感到心里舒服。", "as": "完全一致"},
        {"qs": "开心愉悦。", "as": "完全一致"},
        {"qs": "感觉压力越来越大。", "as": "完全不一致"},
        {"qs": "即便生气也能忍。", "as": "完全一致"},
        {"qs": "我经常觉得零花钱不够花。", "as": "完全不一致"},
        {"qs": "经常因行为冲动而后悔。", "as": "完全不一致"},
        {"qs": "忍不住淘气的冲动。", "as": "完全不一致"},
        {"qs": "偶尔有自杀的冲动。", "as": "完全不一致"},
        {"qs": "心情很舒畅，悠闲。", "as": "完全一致"},
        {"qs": "每天都感觉充满活力。", "as": "完全一致"},
        {"qs": "因为一时没忍住，曾和朋友大打出手过。", "as": "完全不一致"},
        {"qs": "需要做的事情会竭尽全力。", "as": "完全一致"},
        {"qs": "我很满足现在的生活。", "as": "完全一致"},
        {"qs": "同学们有时会排斥或冷淡我 。", "as": "完全不一致"},
        {"qs": "学习或做游戏时，我经常会妨碍别人。", "as": "完全不一致"},
        {"qs": "最近经受的压力，多数都是一年前就有的。", "as": "完全不一致"},
        {"qs": "我会高度集中注意力去做重要的事情。", "as": "完全一致"},
        {"qs": "脾气上来时自己无法忍住。", "as": "完全不一致"},
        {"qs": "因为有些同学的原因，很难适应学校生活。", "as": "完全不一致"},
        {"qs": "不管谁遇到困难，我都会积极帮助。", "as": "完全一致"},
        {"qs": "别人开玩笑时，我马上就能听明白。", "as": "完全一致"},
        {"qs": "相信不管做什么，只要努力就会越做越好。", "as": "完全一致"},
        {"qs": "最近家里经济情况不好。", "as": "完全不一致"},
        {"qs": "父母能够理解我的心情。", "as": "完全一致"},
        {"qs": "经常感到不安，心砰砰跳。", "as": "完全不一致"},
        {"qs": "和同学一起逃过课。", "as": "完全不一致"},
        {"qs": "经常担心未来。", "as": "完全不一致"},
        {"qs": "最近有人骂我，嘲笑我。", "as": "完全不一致"},
        {"qs": "别人看不起我。", "as": "完全不一致"},
        {"qs": "经常做事有头无尾。", "as": "完全不一致"},
        {"qs": "在小事情上也能产生喜悦感。", "as": "完全一致"},
        {"qs": "成绩太低了。", "as": "完全不一致"},
        {"qs": "听到父母批评，心情变得很不好。", "as": "完全不一致"},
        {"qs": "能把自己的想法向别人很好地表达出来。", "as": "完全一致"},
        {"qs": "有幽默感，经常逗人笑。", "as": "完全一致"},
        {"qs": "抢一点富人的钱，算不了什么。", "as": "完全不一致"},
        {"qs": "父母愿意倾听我的话。", "as": "完全一致"},
        {"qs": "我会迎合别人的心情。", "as": "完全不一致"},
        {"qs": "经常在别人提问还没结束时，就急于回答。", "as": "完全不一致"},
        {"qs": "太散漫，一会都不能安静。", "as": "完全不一致"},
        {"qs": "能够感受到父母的爱。", "as": "完全一致"},
        {"qs": "在背后骂人。", "as": "完全不一致"},
        {"qs": "曾经跟好朋友吵的很厉害。", "as": "完全不一致"},
        {"qs": "被拿来和别人做比较时，心情很不好。", "as": "完全不一致"},
        {"qs": "愿意对人做出让步。", "as": "完全一致"},
        {"qs": "有几个能够交心的好朋友?", "as": "3~4名"},
        {"qs": "你感觉自己有多幸福？(请选择相应答案)", "as": "很幸福(感觉非常好，充满活力 )"},
        {"qs": "本人的学习成绩属于哪个范围?(请选择相应答案)", "as": "较好"}
    ];


    function answerCurrentQuestion() {
        // 找到当前题目元素
        const questionElement = document.querySelector('.el-row.question-pc');
        if (questionElement) {
            const questionText = questionElement.textContent.trim().replace(/^\d+\./, '');
            const correspondingAnswerInBank = questionBank.find(item => item.qs === questionText);
            if (correspondingAnswerInBank) {
                const correctAnswer = correspondingAnswerInBank.as;
                const optionGroup = questionElement.nextElementSibling.querySelector('.el-radio-group.options-pc');
                const radioButtons = optionGroup.querySelectorAll('input[type="radio"]');
                radioButtons.forEach(radioButton => {
                    const label = radioButton.parentElement.parentElement;
                    const labelText = label.textContent.trim();
                    console.log(labelText+":"+correctAnswer)
                    if (labelText === correctAnswer) {
                        radioButton.click();
                    }
                });
            }
        }
    }

    function checkForCompletionMessage() {
        const completionMessage = document.querySelector('.el-message-box__message');
        if (completionMessage && completionMessage.textContent.includes('您已完成所有题目，是否现在提交？提交后，将不可修改。')) {
            const submitButton = document.querySelector('.el-button.el-button--default.el-button--small.el-button--primary');
            if (submitButton) {
                submitButton.click();
            }
        }
    }

    // 如果还有下一题，延时0.5秒后再次调用answerCurrentQuestion函数
    setInterval(() => {
        answerCurrentQuestion();
        checkForCompletionMessage();
    }, 500);
})();